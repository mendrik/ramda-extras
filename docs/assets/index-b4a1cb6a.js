var Gte=Object.defineProperty;var Zte=(i,e,t)=>e in i?Gte(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var ei=(i,e,t)=>(Zte(i,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var vL,yt,xj,Tj,qf,W9,kj,FN,s_={},Lj=[],Xte=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,yL=Array.isArray;function Qu(i,e){for(var t in e)i[t]=e[t];return i}function Dj(i){var e=i.parentNode;e&&e.removeChild(i)}function u0(i,e,t){var n,r,s,o={};for(s in e)s=="key"?n=e[s]:s=="ref"?r=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?vL.call(arguments,2):t),typeof i=="function"&&i.defaultProps!=null)for(s in i.defaultProps)o[s]===void 0&&(o[s]=i.defaultProps[s]);return YS(i,o,n,r,null)}function YS(i,e,t,n,r){var s={type:i,props:e,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r??++xj,__i:-1};return r==null&&yt.vnode!=null&&yt.vnode(s),s}function Pg(i){return i.children}function Nc(i,e){this.props=i,this.context=e}function h0(i,e){if(e==null)return i.__?h0(i.__,i.__i+1):null;for(var t;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null)return t.__e;return typeof i.type=="function"?h0(i):null}function Ij(i){var e,t;if((i=i.__)!=null&&i.__c!=null){for(i.__e=i.__c.base=null,e=0;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null){i.__e=i.__c.base=t.__e;break}return Ij(i)}}function V9(i){(!i.__d&&(i.__d=!0)&&qf.push(i)&&!qx.__r++||W9!==yt.debounceRendering)&&((W9=yt.debounceRendering)||kj)(qx)}function qx(){var i,e,t,n,r,s,o,a,l;for(qf.sort(FN);i=qf.shift();)i.__d&&(e=qf.length,n=void 0,r=void 0,s=void 0,a=(o=(t=i).__v).__e,(l=t.__P)&&(n=[],r=[],(s=Qu({},o)).__v=o.__v+1,PF(l,s,o,t.__n,l.ownerSVGElement!==void 0,o.__h!=null?[a]:null,n,a??h0(o),o.__h,r),s.__.__k[s.__i]=s,Aj(n,s,r),s.__e!=a&&Ij(s)),qf.length>e&&qf.sort(FN));qx.__r=0}function Rj(i,e,t,n,r,s,o,a,l,c,d){var u,h,f,g,m,y,b,v,C,w=0,S=n&&n.__k||Lj,L=S.length,T=L,I=e.length;for(t.__k=[],u=0;u<I;u++)(g=t.__k[u]=(g=e[u])==null||typeof g=="boolean"||typeof g=="function"?null:g.constructor==String||typeof g=="number"||typeof g=="bigint"?YS(null,g,null,null,g):yL(g)?YS(Pg,{children:g},null,null,null):g.__b>0?YS(g.type,g.props,g.key,g.ref?g.ref:null,g.__v):g)!=null?(g.__=t,g.__b=t.__b+1,g.__i=u,(v=Yte(g,S,b=u+w,T))===-1?f=s_:(f=S[v]||s_,S[v]=void 0,T--),PF(i,g,f,r,s,o,a,l,c,d),m=g.__e,(h=g.ref)&&f.ref!=h&&(f.ref&&MF(f.ref,null,g),d.push(h,g.__c||m,g)),y==null&&m!=null&&(y=m),(C=f===s_||f.__v===null)?v==-1&&w--:v!==b&&(v===b+1?w++:v>b?T>I-b?w+=v-b:w--:w=v<b&&v==b-1?v-b:0),b=u+w,typeof g.type=="function"?(v!==b||f.__k===g.__k?l=Ej(g,l,i):g.__d!==void 0?l=g.__d:m&&(l=m.nextSibling),g.__d=void 0):m&&(l=v!==b||C?Nj(i,m,l):m.nextSibling),typeof t.type=="function"&&(t.__d=l)):(f=S[u])&&f.key==null&&f.__e&&(f.__e==l&&(l=h0(f),typeof t.type=="function"&&(t.__d=l)),BN(f,f,!1),S[u]=null);for(t.__e=y,u=L;u--;)S[u]!=null&&(typeof t.type=="function"&&S[u].__e!=null&&S[u].__e==l&&(t.__d=S[u].__e.nextSibling),BN(S[u],S[u]))}function Ej(i,e,t){for(var n,r=i.__k,s=0;r&&s<r.length;s++)(n=r[s])&&(n.__=i,e=typeof n.type=="function"?Ej(n,e,t):Nj(t,n.__e,e));return e}function Gx(i,e){return e=e||[],i==null||typeof i=="boolean"||(yL(i)?i.some(function(t){Gx(t,e)}):e.push(i)),e}function Nj(i,e,t){return e!=t&&i.insertBefore(e,t||null),e.nextSibling}function Yte(i,e,t,n){var r=i.key,s=i.type,o=t-1,a=t+1,l=e[t];if(l===null||l&&r==l.key&&s===l.type)return t;if(n>(l!=null?1:0))for(;o>=0||a<e.length;){if(o>=0){if((l=e[o])&&r==l.key&&s===l.type)return o;o--}if(a<e.length){if((l=e[a])&&r==l.key&&s===l.type)return a;a++}}return-1}function Qte(i,e,t,n,r){var s;for(s in t)s==="children"||s==="key"||s in e||Zx(i,s,null,t[s],n);for(s in e)r&&typeof e[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||t[s]===e[s]||Zx(i,s,e[s],t[s],n)}function H9(i,e,t){e[0]==="-"?i.setProperty(e,t??""):i[e]=t==null?"":typeof t!="number"||Xte.test(e)?t:t+"px"}function Zx(i,e,t,n,r){var s;e:if(e==="style")if(typeof t=="string")i.style.cssText=t;else{if(typeof n=="string"&&(i.style.cssText=n=""),n)for(e in n)t&&e in t||H9(i.style,e,"");if(t)for(e in t)n&&t[e]===n[e]||H9(i.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/(PointerCapture)$|Capture$/,"$1")),e=e.toLowerCase()in i?e.toLowerCase().slice(2):e.slice(2),i.l||(i.l={}),i.l[e+s]=t,t?n?t.u=n.u:(t.u=Date.now(),i.addEventListener(e,s?j9:U9,s)):i.removeEventListener(e,s?j9:U9,s);else if(e!=="dangerouslySetInnerHTML"){if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e!=="rowSpan"&&e!=="colSpan"&&e!=="role"&&e in i)try{i[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!=="-"?i.removeAttribute(e):i.setAttribute(e,t))}}function U9(i){var e=this.l[i.type+!1];if(i.t){if(i.t<=e.u)return}else i.t=Date.now();return e(yt.event?yt.event(i):i)}function j9(i){return this.l[i.type+!0](yt.event?yt.event(i):i)}function PF(i,e,t,n,r,s,o,a,l,c){var d,u,h,f,g,m,y,b,v,C,w,S,L,T,I,R=e.type;if(e.constructor!==void 0)return null;t.__h!=null&&(l=t.__h,a=e.__e=t.__e,e.__h=null,s=[a]),(d=yt.__b)&&d(e);e:if(typeof R=="function")try{if(b=e.props,v=(d=R.contextType)&&n[d.__c],C=d?v?v.props.value:d.__:n,t.__c?y=(u=e.__c=t.__c).__=u.__E:("prototype"in R&&R.prototype.render?e.__c=u=new R(b,C):(e.__c=u=new Nc(b,C),u.constructor=R,u.render=ene),v&&v.sub(u),u.props=b,u.state||(u.state={}),u.context=C,u.__n=n,h=u.__d=!0,u.__h=[],u._sb=[]),u.__s==null&&(u.__s=u.state),R.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=Qu({},u.__s)),Qu(u.__s,R.getDerivedStateFromProps(b,u.__s))),f=u.props,g=u.state,u.__v=e,h)R.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(R.getDerivedStateFromProps==null&&b!==f&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(b,C),!u.__e&&(u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(b,u.__s,C)===!1||e.__v===t.__v)){for(e.__v!==t.__v&&(u.props=b,u.state=u.__s,u.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(B){B&&(B.__=e)}),w=0;w<u._sb.length;w++)u.__h.push(u._sb[w]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(b,u.__s,C),u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(f,g,m)})}if(u.context=C,u.props=b,u.__P=i,u.__e=!1,S=yt.__r,L=0,"prototype"in R&&R.prototype.render){for(u.state=u.__s,u.__d=!1,S&&S(e),d=u.render(u.props,u.state,u.context),T=0;T<u._sb.length;T++)u.__h.push(u._sb[T]);u._sb=[]}else do u.__d=!1,S&&S(e),d=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++L<25);u.state=u.__s,u.getChildContext!=null&&(n=Qu(Qu({},n),u.getChildContext())),h||u.getSnapshotBeforeUpdate==null||(m=u.getSnapshotBeforeUpdate(f,g)),Rj(i,yL(I=d!=null&&d.type===Pg&&d.key==null?d.props.children:d)?I:[I],e,t,n,r,s,o,a,l,c),u.base=e.__e,e.__h=null,u.__h.length&&o.push(u),y&&(u.__E=u.__=null)}catch(B){e.__v=null,l||s!=null?(e.__e=a,e.__h=!!l,s[s.indexOf(a)]=null):(e.__e=t.__e,e.__k=t.__k),yt.__e(B,e,t)}else s==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=Jte(t.__e,e,t,n,r,s,o,l,c);(d=yt.diffed)&&d(e)}function Aj(i,e,t){e.__d=void 0;for(var n=0;n<t.length;n++)MF(t[n],t[++n],t[++n]);yt.__c&&yt.__c(e,i),i.some(function(r){try{i=r.__h,r.__h=[],i.some(function(s){s.call(r)})}catch(s){yt.__e(s,r.__v)}})}function Jte(i,e,t,n,r,s,o,a,l){var c,d,u,h=t.props,f=e.props,g=e.type,m=0;if(g==="svg"&&(r=!0),s!=null){for(;m<s.length;m++)if((c=s[m])&&"setAttribute"in c==!!g&&(g?c.localName===g:c.nodeType===3)){i=c,s[m]=null;break}}if(i==null){if(g===null)return document.createTextNode(f);i=r?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,f.is&&f),s=null,a=!1}if(g===null)h===f||a&&i.data===f||(i.data=f);else{if(s=s&&vL.call(i.childNodes),d=(h=t.props||s_).dangerouslySetInnerHTML,u=f.dangerouslySetInnerHTML,!a){if(s!=null)for(h={},m=0;m<i.attributes.length;m++)h[i.attributes[m].name]=i.attributes[m].value;(u||d)&&(u&&(d&&u.__html==d.__html||u.__html===i.innerHTML)||(i.innerHTML=u&&u.__html||""))}if(Qte(i,f,h,r,a),u)e.__k=[];else if(Rj(i,yL(m=e.props.children)?m:[m],e,t,n,r&&g!=="foreignObject",s,o,s?s[0]:t.__k&&h0(t,0),a,l),s!=null)for(m=s.length;m--;)s[m]!=null&&Dj(s[m]);a||("value"in f&&(m=f.value)!==void 0&&(m!==i.value||g==="progress"&&!m||g==="option"&&m!==h.value)&&Zx(i,"value",m,h.value,!1),"checked"in f&&(m=f.checked)!==void 0&&m!==i.checked&&Zx(i,"checked",m,h.checked,!1))}return i}function MF(i,e,t){try{typeof i=="function"?i(e):i.current=e}catch(n){yt.__e(n,t)}}function BN(i,e,t){var n,r;if(yt.unmount&&yt.unmount(i),(n=i.ref)&&(n.current&&n.current!==i.__e||MF(n,null,e)),(n=i.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){yt.__e(s,e)}n.base=n.__P=null,i.__c=void 0}if(n=i.__k)for(r=0;r<n.length;r++)n[r]&&BN(n[r],e,t||typeof i.type!="function");t||i.__e==null||Dj(i.__e),i.__=i.__e=i.__d=void 0}function ene(i,e,t){return this.constructor(i,t)}function tne(i,e,t){var n,r,s,o;yt.__&&yt.__(i,e),r=(n=typeof t=="function")?null:t&&t.__k||e.__k,s=[],o=[],PF(e,i=(!n&&t||e).__k=u0(Pg,null,[i]),r||s_,s_,e.ownerSVGElement!==void 0,!n&&t?[t]:r?null:e.firstChild?vL.call(e.childNodes):null,s,!n&&t?t:r?r.__e:e.firstChild,n,o),Aj(s,i,o)}vL=Lj.slice,yt={__e:function(i,e,t,n){for(var r,s,o;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(i)),o=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(i,n||{}),o=r.__d),o)return r.__E=r}catch(a){i=a}throw i}},xj=0,Tj=function(i){return i!=null&&i.constructor==null},Nc.prototype.setState=function(i,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Qu({},this.state),typeof i=="function"&&(i=i(Qu({},t),this.props)),i&&Qu(t,i),i!=null&&this.__v&&(e&&this._sb.push(e),V9(this))},Nc.prototype.forceUpdate=function(i){this.__v&&(this.__e=!0,i&&this.__h.push(i),V9(this))},Nc.prototype.render=Pg,qf=[],kj=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,FN=function(i,e){return i.__v.__b-e.__v.__b},qx.__r=0;function nne(){return new Worker("/assets/ts.worker-72c9fe54.js")}const gh={of(i){return Qn(i)},lefts(i){let e=[];for(const t of i)t.isLeft()&&e.push(t.extract());return e},rights(i){let e=[];for(const t of i)t.isRight()&&e.push(t.extract());return e},encase(i){try{return Qn(i())}catch(e){return hi(e)}},sequence(i){let e=[];for(const t of i){if(t.isLeft())return t;e.push(t.extract())}return Qn(e)},isEither(i){return i instanceof FF||i instanceof OF},"fantasy-land/of"(i){return gh.of(i)}};class OF{constructor(e){this.__value=e,this._="R",this["fantasy-land/bimap"]=this.bimap,this["fantasy-land/map"]=this.map,this["fantasy-land/ap"]=this.ap,this["fantasy-land/equals"]=this.equals,this["fantasy-land/chain"]=this.chain,this["fantasy-land/alt"]=this.alt,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/extend"]=this.extend}isLeft(){return!1}isRight(){return!0}toJSON(){return this.__value}inspect(){return`Right(${this.__value})`}toString(){return this.inspect()}bimap(e,t){return Qn(t(this.__value))}map(e){return Qn(e(this.__value))}mapLeft(e){return this}ap(e){return e.isRight()?this.map(e.extract()):e}equals(e){return e.isRight()?this.__value===e.extract():!1}chain(e){return e(this.__value)}chainLeft(e){return this}join(){return this.__value}alt(e){return this}altLazy(e){return this}reduce(e,t){return e(t,this.__value)}extend(e){return Qn(e(this))}unsafeCoerce(){return this.__value}caseOf(e){return"_"in e?e._():e.Right(this.__value)}leftOrDefault(e){return e}orDefault(e){return this.__value}orDefaultLazy(e){return this.__value}leftOrDefaultLazy(e){return e()}ifLeft(e){return this}ifRight(e){return e(this.__value),this}toMaybe(){return er(this.__value)}leftToMaybe(){return Pn}extract(){return this.__value}swap(){return hi(this.__value)}}OF.prototype.constructor=gh;class FF{constructor(e){this.__value=e,this._="L",this["fantasy-land/bimap"]=this.bimap,this["fantasy-land/map"]=this.map,this["fantasy-land/ap"]=this.ap,this["fantasy-land/equals"]=this.equals,this["fantasy-land/chain"]=this.chain,this["fantasy-land/alt"]=this.alt,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/extend"]=this.extend}isLeft(){return!0}isRight(){return!1}toJSON(){return this.__value}inspect(){return`Left(${JSON.stringify(this.__value)})`}toString(){return this.inspect()}bimap(e,t){return hi(e(this.__value))}map(e){return this}mapLeft(e){return hi(e(this.__value))}ap(e){return e.isLeft()?e:this}equals(e){return e.isLeft()?e.extract()===this.__value:!1}chain(e){return this}chainLeft(e){return e(this.__value)}join(){return this}alt(e){return e}altLazy(e){return e()}reduce(e,t){return t}extend(e){return this}unsafeCoerce(){throw this.__value instanceof Error?this.__value:new Error("Either#unsafeCoerce was ran on a Left")}caseOf(e){return"_"in e?e._():e.Left(this.__value)}leftOrDefault(e){return this.__value}orDefault(e){return e}orDefaultLazy(e){return e()}leftOrDefaultLazy(e){return this.__value}ifLeft(e){return e(this.__value),this}ifRight(e){return this}toMaybe(){return Pn}leftToMaybe(){return er(this.__value)}extract(){return this.__value}swap(){return Qn(this.__value)}}FF.prototype.constructor=gh;const hi=i=>new FF(i),Qn=i=>new OF(i),Ea={of(i){return er(i)},empty(){return Pn},zero(){return Pn},fromNullable(i){return i==null?Pn:er(i)},fromFalsy(i){return i?er(i):Pn},fromPredicate(i,e){switch(arguments.length){case 1:return t=>Ea.fromPredicate(i,t);default:return i(e)?er(e):Pn}},mapMaybe(i,e){switch(arguments.length){case 1:return t=>Ea.mapMaybe(i,t);default:return Ea.catMaybes(e.map(i))}},catMaybes(i){let e=[];for(const t of i)t.isJust()&&e.push(t.extract());return e},encase(i){try{return er(i())}catch{return Pn}},isMaybe(i){return i instanceof BF||i instanceof WF},sequence(i){let e=[];for(const t of i)if(t.isJust())e.push(t.extract());else return Pn;return er(e)},"fantasy-land/of"(i){return this.of(i)},"fantasy-land/empty"(){return this.empty()},"fantasy-land/zero"(){return this.zero()}};class BF{constructor(e){this.__value=e,this["fantasy-land/equals"]=this.equals,this["fantasy-land/map"]=this.map,this["fantasy-land/ap"]=this.ap,this["fantasy-land/alt"]=this.alt,this["fantasy-land/chain"]=this.chain,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/extend"]=this.extend,this["fantasy-land/filter"]=this.filter}isJust(){return!0}isNothing(){return!1}inspect(){return`Just(${this.__value})`}toString(){return this.inspect()}toJSON(){const e=this.__value;return e instanceof Date?e.toJSON():e}equals(e){return this.extract()===e.extract()}map(e){return er(e(this.__value))}ap(e){return e.isJust()?this.map(e.extract()):Pn}alt(e){return this}altLazy(e){return this}chain(e){return e(this.__value)}chainNullable(e){return Ea.fromNullable(e(this.__value))}join(){return this.__value}reduce(e,t){return e(t,this.__value)}extend(e){return er(e(this))}unsafeCoerce(){return this.__value}caseOf(e){return"_"in e?e._():e.Just(this.__value)}orDefault(e){return this.__value}orDefaultLazy(e){return this.__value}toList(){return[this.__value]}mapOrDefault(e,t){return e(this.__value)}extract(){return this.__value}extractNullable(){return this.__value}toEither(e){return Qn(this.__value)}ifJust(e){return e(this.__value),this}ifNothing(e){return this}filter(e){return e(this.__value)?er(this.__value):Pn}}BF.prototype.constructor=Ea;class WF{constructor(){this["fantasy-land/equals"]=this.equals,this["fantasy-land/map"]=this.map,this["fantasy-land/ap"]=this.ap,this["fantasy-land/alt"]=this.alt,this["fantasy-land/chain"]=this.chain,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/extend"]=this.extend,this["fantasy-land/filter"]=this.filter}isJust(){return!1}isNothing(){return!0}inspect(){return"Nothing"}toString(){return this.inspect()}toJSON(){return this.__value}equals(e){return this.extract()===e.extract()}map(e){return Pn}ap(e){return Pn}alt(e){return e}altLazy(e){return e()}chain(e){return Pn}chainNullable(e){return Pn}join(){return Pn}reduce(e,t){return t}extend(e){return Pn}unsafeCoerce(){throw new Error("Maybe#unsafeCoerce was ran on a Nothing")}caseOf(e){return"_"in e?e._():e.Nothing()}orDefault(e){return e}orDefaultLazy(e){return e()}toList(){return[]}mapOrDefault(e,t){return t}extract(){}extractNullable(){return null}toEither(e){return hi(e)}ifJust(e){return this}ifNothing(e){return e(),this}filter(e){return Pn}}WF.prototype.constructor=Ea;const er=i=>new BF(i),Pn=new WF;var Xx,bo,SR,z9,WN=0,Pj=[],QS=[],$9=yt.__b,K9=yt.__r,q9=yt.diffed,G9=yt.__c,Z9=yt.unmount;function Mj(i,e){yt.__h&&yt.__h(bo,i,WN||e),WN=0;var t=bo.__H||(bo.__H={__:[],__h:[]});return i>=t.__.length&&t.__.push({__V:QS}),t.__[i]}function Oj(i,e){var t=Mj(Xx++,3);!yt.__s&&Bj(t.__H,e)&&(t.__=i,t.i=e,bo.__H.__h.push(t))}function Fj(i){return WN=5,VF(function(){return{current:i}},[])}function VF(i,e){var t=Mj(Xx++,7);return Bj(t.__H,e)?(t.__V=i(),t.i=e,t.__h=i,t.__V):t.__}function ine(){for(var i;i=Pj.shift();)if(i.__P&&i.__H)try{i.__H.__h.forEach(JS),i.__H.__h.forEach(VN),i.__H.__h=[]}catch(e){i.__H.__h=[],yt.__e(e,i.__v)}}yt.__b=function(i){bo=null,$9&&$9(i)},yt.__r=function(i){K9&&K9(i),Xx=0;var e=(bo=i.__c).__H;e&&(SR===bo?(e.__h=[],bo.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=QS,t.__N=t.i=void 0})):(e.__h.forEach(JS),e.__h.forEach(VN),e.__h=[],Xx=0)),SR=bo},yt.diffed=function(i){q9&&q9(i);var e=i.__c;e&&e.__H&&(e.__H.__h.length&&(Pj.push(e)!==1&&z9===yt.requestAnimationFrame||((z9=yt.requestAnimationFrame)||rne)(ine)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==QS&&(t.__=t.__V),t.i=void 0,t.__V=QS})),SR=bo=null},yt.__c=function(i,e){e.some(function(t){try{t.__h.forEach(JS),t.__h=t.__h.filter(function(n){return!n.__||VN(n)})}catch(n){e.some(function(r){r.__h&&(r.__h=[])}),e=[],yt.__e(n,t.__v)}}),G9&&G9(i,e)},yt.unmount=function(i){Z9&&Z9(i);var e,t=i.__c;t&&t.__H&&(t.__H.__.forEach(function(n){try{JS(n)}catch(r){e=r}}),t.__H=void 0,e&&yt.__e(e,t.__v))};var X9=typeof requestAnimationFrame=="function";function rne(i){var e,t=function(){clearTimeout(n),X9&&cancelAnimationFrame(e),setTimeout(i)},n=setTimeout(t,100);X9&&(e=requestAnimationFrame(t))}function JS(i){var e=bo,t=i.__c;typeof t=="function"&&(i.__c=void 0,t()),bo=e}function VN(i){var e=bo;i.__c=i.__(),bo=e}function Bj(i,e){return!i||i.length!==e.length||e.some(function(t,n){return t!==i[n]})}function CL(){throw new Error("Cycle detected")}var sne=Symbol.for("preact-signals");function HF(){if(o_>1)o_--;else{for(var i,e=!1;xv!==void 0;){var t=xv;for(xv=void 0,HN++;t!==void 0;){var n=t.o;if(t.o=void 0,t.f&=-3,!(8&t.f)&&Vj(t))try{t.c()}catch(r){e||(i=r,e=!0)}t=n}}if(HN=0,o_--,e)throw i}}var Yi=void 0,xv=void 0,o_=0,HN=0,Yx=0;function Wj(i){if(Yi!==void 0){var e=i.n;if(e===void 0||e.t!==Yi)return e={i:0,S:i,p:Yi.s,n:void 0,t:Yi,e:void 0,x:void 0,r:e},Yi.s!==void 0&&(Yi.s.n=e),Yi.s=e,i.n=e,32&Yi.f&&i.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=Yi.s,e.n=void 0,Yi.s.n=e,Yi.s=e),e}}function ws(i){this.v=i,this.i=0,this.n=void 0,this.t=void 0}ws.prototype.brand=sne;ws.prototype.h=function(){return!0};ws.prototype.S=function(i){this.t!==i&&i.e===void 0&&(i.x=this.t,this.t!==void 0&&(this.t.e=i),this.t=i)};ws.prototype.U=function(i){if(this.t!==void 0){var e=i.e,t=i.x;e!==void 0&&(e.x=t,i.e=void 0),t!==void 0&&(t.e=e,i.x=void 0),i===this.t&&(this.t=t)}};ws.prototype.subscribe=function(i){var e=this;return wL(function(){var t=e.value,n=32&this.f;this.f&=-33;try{i(t)}finally{this.f|=n}})};ws.prototype.valueOf=function(){return this.value};ws.prototype.toString=function(){return this.value+""};ws.prototype.toJSON=function(){return this.value};ws.prototype.peek=function(){return this.v};Object.defineProperty(ws.prototype,"value",{get:function(){var i=Wj(this);return i!==void 0&&(i.i=this.i),this.v},set:function(i){if(Yi instanceof cf&&function(){throw new Error("Computed cannot have side-effects")}(),i!==this.v){HN>100&&CL(),this.v=i,this.i++,Yx++,o_++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{HF()}}}});function aC(i){return new ws(i)}function Vj(i){for(var e=i.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function Hj(i){for(var e=i.s;e!==void 0;e=e.n){var t=e.S.n;if(t!==void 0&&(e.r=t),e.S.n=e,e.i=-1,e.n===void 0){i.s=e;break}}}function Uj(i){for(var e=i.s,t=void 0;e!==void 0;){var n=e.p;e.i===-1?(e.S.U(e),n!==void 0&&(n.n=e.n),e.n!==void 0&&(e.n.p=n)):t=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=n}i.s=t}function cf(i){ws.call(this,void 0),this.x=i,this.s=void 0,this.g=Yx-1,this.f=4}(cf.prototype=new ws).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===Yx))return!0;if(this.g=Yx,this.f|=1,this.i>0&&!Vj(this))return this.f&=-2,!0;var i=Yi;try{Hj(this),Yi=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(t){this.v=t,this.f|=16,this.i++}return Yi=i,Uj(this),this.f&=-2,!0};cf.prototype.S=function(i){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}ws.prototype.S.call(this,i)};cf.prototype.U=function(i){if(this.t!==void 0&&(ws.prototype.U.call(this,i),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};cf.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var i=this.t;i!==void 0;i=i.x)i.t.N()}};cf.prototype.peek=function(){if(this.h()||CL(),16&this.f)throw this.v;return this.v};Object.defineProperty(cf.prototype,"value",{get:function(){1&this.f&&CL();var i=Wj(this);if(this.h(),i!==void 0&&(i.i=this.i),16&this.f)throw this.v;return this.v}});function one(i){return new cf(i)}function jj(i){var e=i.u;if(i.u=void 0,typeof e=="function"){o_++;var t=Yi;Yi=void 0;try{e()}catch(n){throw i.f&=-2,i.f|=8,UF(i),n}finally{Yi=t,HF()}}}function UF(i){for(var e=i.s;e!==void 0;e=e.n)e.S.U(e);i.x=void 0,i.s=void 0,jj(i)}function ane(i){if(Yi!==this)throw new Error("Out-of-order effect");Uj(this),Yi=i,this.f&=-2,8&this.f&&UF(this),HF()}function lC(i){this.x=i,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}lC.prototype.c=function(){var i=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{i()}};lC.prototype.S=function(){1&this.f&&CL(),this.f|=1,this.f&=-9,jj(this),Hj(this),o_++;var i=Yi;return Yi=this,ane.bind(this,i)};lC.prototype.N=function(){2&this.f||(this.f|=2,this.o=xv,xv=this)};lC.prototype.d=function(){this.f|=8,1&this.f||UF(this)};function wL(i){var e=new lC(i);try{e.c()}catch(t){throw e.d(),t}return e.d.bind(e)}var xR;function E1(i,e){yt[i]=e.bind(null,yt[i]||function(){})}function Qx(i){xR&&xR(),xR=i&&i.S()}function zj(i){var e=this,t=i.data,n=cne(t);n.value=t;var r=VF(function(){for(var s=e.__v;s=s.__;)if(s.__c){s.__c.__$f|=4;break}return e.__$u.c=function(){var o;!Tj(r.peek())&&((o=e.base)==null?void 0:o.nodeType)===3?e.base.data=r.peek():(e.__$f|=1,e.setState({}))},one(function(){var o=n.value.value;return o===0?0:o===!0?"":o||""})},[]);return r.value}zj.displayName="_st";Object.defineProperties(ws.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:zj},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});E1("__b",function(i,e){if(typeof e.type=="string"){var t,n=e.props;for(var r in n)if(r!=="children"){var s=n[r];s instanceof ws&&(t||(e.__np=t={}),t[r]=s,n[r]=s.peek())}}i(e)});E1("__r",function(i,e){Qx();var t,n=e.__c;n&&(n.__$f&=-2,(t=n.__$u)===void 0&&(n.__$u=t=function(r){var s;return wL(function(){s=this}),s.c=function(){n.__$f|=1,n.setState({})},s}())),Qx(t),i(e)});E1("__e",function(i,e,t,n){Qx(),i(e,t,n)});E1("diffed",function(i,e){Qx();var t;if(typeof e.type=="string"&&(t=e.__e)){var n=e.__np,r=e.props;if(n){var s=t.U;if(s)for(var o in s){var a=s[o];a!==void 0&&!(o in n)&&(a.d(),s[o]=void 0)}else t.U=s={};for(var l in n){var c=s[l],d=n[l];c===void 0?(c=lne(t,l,d,r),s[l]=c):c.o(d,r)}}}i(e)});function lne(i,e,t,n){var r=e in i&&i.ownerSVGElement===void 0,s=aC(t);return{o:function(o,a){s.value=o,n=a},d:wL(function(){var o=s.value.value;n[e]!==o&&(n[e]=o,r?i[e]=o:o?i.setAttribute(e,o):i.removeAttribute(e))})}}E1("unmount",function(i,e){if(typeof e.type=="string"){var t=e.__e;if(t){var n=t.U;if(n){t.U=void 0;for(var r in n){var s=n[r];s&&s.d()}}}}else{var o=e.__c;if(o){var a=o.__$u;a&&(o.__$u=void 0,a.d())}}i(e)});E1("__h",function(i,e,t,n){(n<3||n===9)&&(e.__$f|=2),i(e,t,n)});Nc.prototype.shouldComponentUpdate=function(i,e){var t=this.__$u;if(!(t&&t.s!==void 0||4&this.__$f)||3&this.__$f)return!0;for(var n in e)return!0;for(var r in i)if(r!=="__source"&&i[r]!==this.props[r])return!0;for(var s in this.props)if(!(s in i))return!0;return!1};function cne(i){return VF(function(){return aC(i)},[])}const rd=i=>i,dne=i=>()=>i;var Yd;(function(i){i.LT="LT",i.EQ="EQ",i.GT="GT"})(Yd||(Yd={}));const une=(i,e)=>i>e?Yd.GT:i<e?Yd.LT:Yd.EQ,$j=i=>{switch(i){case Yd.LT:return-1;case Yd.EQ:return 0;case Yd.GT:return 1}},hne=i=>function e(...t){return t.length>=i.length?i.apply(void 0,t):e.bind(void 0,...t)},fne=i=>i,Tv=Object.assign(fne,{fromArray:i=>Tv.isNonEmpty(i)?er(i):Pn,unsafeCoerce:i=>{if(Tv.isNonEmpty(i))return i;throw new Error("NonEmptyList#unsafeCoerce was ran on an empty array")},fromTuple:i=>Tv(i.toArray()),head:i=>i[0],last:i=>i[i.length-1],isNonEmpty:i=>i.length>0,tail:i=>i.slice(1)}),ex=(i,e)=>typeof e=="bigint"?e.toString():e,gne=i=>Object.keys(i).length===0,Em=i=>typeof i=="object"&&i!==null&&!Array.isArray(i),Ua=(i,e)=>{let t="";switch(typeof e){case"undefined":t="undefined";break;case"object":t=e===null?"null":Array.isArray(e)?"an array with value "+JSON.stringify(e,ex):"an object with value "+JSON.stringify(e,ex);break;case"boolean":t="a boolean";break;case"symbol":t="a symbol";break;case"function":t="a function";break;case"bigint":t=`a bigint with value ${e.toString()}`}return t=t||`a ${typeof e} with value ${JSON.stringify(e,ex)}`,`Expected ${i}, but received ${t}`},pne=i=>{var t;return Object.keys(i).length===1&&((t=i.oneOf)==null?void 0:t.length)===1&&typeof i.oneOf[0]=="object"&&(Object.assign(i,i.oneOf[0]),delete i.oneOf),i},mne=i=>{if(Array.isArray(i.oneOf))for(let e=0;e<i.oneOf.length;e++){const t=i.oneOf[e];if(typeof t=="object"&&t.oneOf)return i.oneOf.splice(e,1),i.oneOf.push(...t.oneOf),Kj(i)}return i},Kj=i=>(mne(i),pne(i),i),Pr={interface(i){const e=Object.keys(i),t=r=>{if(!Em(r))return hi(Ua("an object",r));const s={};for(const o of e){if(!r.hasOwnProperty(o)&&!i[o]._isOptional)return hi(`Problem with property "${o}": it does not exist in received object ${JSON.stringify(r,ex)}`);const a=i[o].decode(r[o]);if(a.isLeft())return hi(`Problem with the value of property "${o}": ${a.extract()}`);const l=a.extract();l!==void 0&&(s[o]=l)}return Qn(s)};return{decode:t,encode:r=>{const s={};for(const o of e)s[o]=i[o].encode(r[o]);return s},unsafeDecode:r=>t(r).mapLeft(Error).unsafeCoerce(),schema:()=>e.reduce((r,s)=>(i[s]._isOptional||r.required.push(s),r.properties[s]=Kj(i[s].schema()),r),{type:"object",properties:{},required:[]})}},custom({decode:i,encode:e,schema:t}){return{decode:i,encode:e,unsafeDecode:n=>i(n).mapLeft(Error).unsafeCoerce(),schema:t??(()=>({}))}}},SL=Pr.custom({decode:i=>typeof i=="string"?Qn(i):hi(Ua("a string",i)),encode:rd,schema:()=>({type:"string"})}),xL=Pr.custom({decode:i=>typeof i=="number"?Qn(i):hi(Ua("a number",i)),encode:rd,schema:()=>({type:"number"})}),qj=Pr.custom({decode:i=>i===null?Qn(i):hi(Ua("a null",i)),encode:rd,schema:()=>({type:"null"})}),_ne=Pr.custom({decode:i=>i===void 0?Qn(i):hi(Ua("an undefined",i)),encode:rd}),bne=i=>({...TL([i,_ne]),schema:i.schema,_isOptional:!0}),vne=i=>TL([i,qj]),yne=Pr.custom({decode:i=>typeof i=="boolean"?Qn(i):hi(Ua("a boolean",i)),encode:rd,schema:()=>({type:"boolean"})}),Cne=Pr.custom({decode:Qn,encode:rd,schema:()=>({})}),wne=i=>{const e=Object.values(i);return Pr.custom({decode:t=>TL([SL,xL]).decode(t).chain(n=>{const r=e.indexOf(n);return r!==-1?Qn(e[r]):hi(Ua("an enum member",t))}),encode:rd,schema:()=>({enum:e})})},TL=i=>Pr.custom({decode:e=>{let t=[];for(const n of i){const r=n.decode(e);if(r.isRight())return r;t.push(r.extract())}return hi(`One of the following problems occured: ${t.map((n,r)=>`(${r}) ${n}`).join(", ")}`)},encode:e=>{for(const t of i)if(gh.encase(()=>t.encode(e)).mapLeft(r=>"").chain(t.decode).isRight())return t.encode(e);return e},schema:()=>({oneOf:i.map(e=>e.schema())})}),jF=i=>Pr.custom({decode:e=>{if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=i.decode(e[n]);if(r.isRight())t.push(r.extract());else return hi(`Problem with the value at index ${n}: ${r.extract()}`)}return Qn(t)}else return hi(Ua("an array",e))},encode:e=>e.map(i.encode),schema:()=>({type:"array",items:i.schema()})}),Sne=Pr.custom({decode:i=>SL.decode(i).chain(e=>isFinite(+e)?Qn(e):hi(Ua("a number",i))),encode:rd,schema:xL.schema}),xne=(i,e)=>Pr.custom({decode:t=>{const n={},r=i===xL?Sne:i;if(!Em(t))return hi(Ua("an object",t));for(const s of Object.keys(t))if(t.hasOwnProperty(s)){const o=r.decode(s),a=e.decode(t[s]);if(o.isRight()&&a.isRight())n[o.extract()]=a.extract();else{if(o.isLeft())return hi(`Problem with key type of property "${s}": ${o.extract()}`);if(a.isLeft())return hi(`Problem with the value of property "${s}": ${a.extract()}`)}}return Qn(n)},encode:t=>{const n={};for(const r in t)t.hasOwnProperty(r)&&(n[i.encode(r)]=e.encode(t[r]));return n},schema:()=>({type:"object",additionalProperties:e.schema()})}),Tne=(...i)=>Pr.custom({decode:e=>i.includes(e)?Qn(e):hi(Ua(i.map(t=>JSON.stringify(t)).join(", "),e)),encode:rd,schema:()=>({oneOf:i.map(e=>({type:typeof e,enum:[e]}))})}),kne=i=>Pr.custom({decode:e=>i().decode(e),encode:e=>i().encode(e),schema:()=>({$comment:"Lazy codecs are not supported when generating a JSON schema"})}),Lne=i=>({...Pr.custom({decode:t=>Ea.fromNullable(t).caseOf({Just:n=>i.decode(n).map(er),Nothing:()=>Qn(Pn)}),encode:t=>t.map(i.encode).orDefault(void 0),schema:()=>gne(i.schema())?{}:{oneOf:[i.schema(),{type:"null"}]}}),_isOptional:!0}),Dne=i=>{const e=jF(i);return Pr.custom({decode:t=>e.decode(t).chain(n=>Tv.fromArray(n).toEither("Expected an array with one or more elements, but received an empty array")),encode:e.encode,schema:()=>({...e.schema(),minItems:1})})},Gj=i=>Pr.custom({decode:e=>{if(Array.isArray(e)){if(i.length!==e.length)return hi(`Expected an array of length ${i.length}, but received an array with length of ${e.length}`);{const t=[];for(let n=0;n<i.length;n++){const r=i[n].decode(e[n]);if(r.isRight())t.push(r.extract());else return hi(`Problem with the value at index ${n}: ${r.extract()}`)}return Qn(t)}}else return hi(Ua("an array",e))},encode:e=>e.map((t,n)=>i[n].encode(t)),schema:()=>({type:"array",items:i.map(e=>e.schema()),additionalItems:!1,minItems:i.length,maxItems:i.length})}),Ine=Pr.custom({decode:i=>SL.decode(i).mapLeft(e=>`Problem with date string: ${e}`).chain(e=>Number.isNaN(Date.parse(e))?hi("Expected a valid date string, but received a string that cannot be parsed"):Qn(new Date(e))),encode:i=>i.toISOString(),schema:()=>({type:"string",format:"date-time"})}),Rne=(i,e)=>Pr.custom({decode:t=>{const n=i.decode(t);if(n.isLeft())return n;const r=e.decode(t);if(r.isLeft())return r;const s=n.extract(),o=r.extract();return Em(s)&&Em(o)?Qn(Object.assign(s,o)):Qn(o)},encode:t=>{const n=i.encode(t),r=e.encode(t);return Em(n)&&Em(r)?Object.assign(n,r):r},schema:()=>({allOf:[i,e].map(t=>t.schema())})}),Ene=(i,e)=>Pr.custom({decode:t=>jF(Gj([i,e])).decode(t).map(n=>new Map(n)),encode:t=>Array.from(t.entries()).map(([n,r])=>[i.encode(n),e.encode(r)]),schema:()=>({type:"array",items:{type:"array",items:[i.schema(),e.schema()],additionalItems:!1,minItems:2,maxItems:2}})}),Nne=/^(One of the following problems occured:)\s/,Ane=/\(\d\)\s/,Pne=/\, (?=\()/g,Mne=/^(Expected ).+(, but received )/,Y9=" with value",Q9='Problem with property "',J9='Problem with the value of property "',e7='Problem with key type of property "',t7="Problem with date string: ",n7="Problem with the value at index ",One={"an object":"object","a number":"number","a string":"string","an undefined":"undefined","a boolean":"boolean","an array":"array","a null":"null","an enum member":"enum"},Fne={"a string":"string","a number":"number",null:"null",undefined:"undefined","a boolean":"boolean","an array":"array","an object":"object","a symbol":"symbol","a function":"function","a bigint":"bigint"},Bne=["null","undefined","boolean","symbol","function","bigint"],Jb=i=>{const e=i.match(Nne);if(e)return{type:"oneOf",errors:i.replace(e[0],"").split(Pne).map(r=>Jb(r.replace(r.match(Ane)[0],"")))};const t=i.match(Mne);if(t){const n=i.split(t[2]).pop(),r=Fne[n.split(Y9)[0]];if(r){const s=i.replace(t[1],"").split(t[2])[0];return{type:"failure",expectedType:One[s],receivedType:r,receivedValue:Bne.includes(r)?void 0:JSON.parse(n.split(Y9).pop())}}}if(i.startsWith(Q9))return{type:"property",property:i.replace(Q9,"").split('": ')[0],error:{type:"failure",receivedType:"undefined"}};if(i.startsWith(J9)||i.startsWith(e7)){const[n,...r]=i.replace(J9,"").replace(e7,"").split(/": (.+)/);return{type:"property",property:n,error:Jb(r.join(""))}}if(i.startsWith(t7))return Jb(i.replace(t7,""));if(i.startsWith(n7)){const[n,...r]=i.replace(n7,"").split(/: (.+)/);return{type:"index",index:Number(n),error:Jb(r.join(""))}}return{type:"custom",message:i}};class Zj{constructor(e,t){this.first=e,this.second=t,this.length=2,this["fantasy-land/equals"]=this.equals,this["fantasy-land/bimap"]=this.bimap,this["fantasy-land/map"]=this.map,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/ap"]=this.ap,this[0]=e,this[1]=t}*[Symbol.iterator](){yield this.first,yield this.second}toJSON(){return this.toArray()}inspect(){return`Tuple(${JSON.stringify(this.first)}, ${JSON.stringify(this.second)})`}toString(){return this.inspect()}fst(){return this.first}snd(){return this.second}equals(e){return this.first===e.fst()&&this.second===e.snd()}bimap(e,t){return Ta(e(this.first),t(this.second))}mapFirst(e){return Ta(e(this.first),this.second)}map(e){return Ta(this.first,e(this.second))}reduce(e,t){return e(t,this.second)}toArray(){return[this.first,this.second]}swap(){return Ta(this.second,this.first)}ap(e){return Ta(this.first,e.snd()(this.second))}every(e){return e(this.first)&&e(this.second)}some(e){return e(this.first)||e(this.second)}}const Ta=Object.assign((i,e)=>new Zj(i,e),{fromArray:([i,e])=>Ta(i,e),fanout:(...i)=>{const[e,t,n]=i;switch(i.length){case 3:return Ta(e(n),t(n));case 2:return r=>Ta.fanout(e,t,r);default:return r=>s=>Ta.fanout(e,r,s)}}});Zj.prototype.constructor=Ta;const Wne=i=>i.length>0?er(i[0]):Pn,Vne=i=>i.length>0?er(i[i.length-1]):Pn,Hne=i=>i.length>0?er(i.slice(1)):Pn,Une=i=>i.length>0?er(i.slice(0,-1)):Pn,jne=i=>i.length>0?er(Ta(i[0],i.slice(1))):Pn,zne=i=>i.reduce((e,t)=>e+t,0);function Xj(i,e){switch(arguments.length){case 1:return t=>Xj(i,t);default:return Ea.fromNullable(e.find(i))}}function Yj(i,e){switch(arguments.length){case 1:return t=>Yj(i,t);default:return Ea.fromPredicate(t=>t!==-1,e.findIndex(i))}}function Qj(i,e){switch(arguments.length){case 1:return t=>Qj(i,t);default:return e[i]===void 0?Pn:er(e[i])}}function Jj(i,e){switch(arguments.length){case 1:return t=>Jj(i,t);default:return[...e].sort((t,n)=>$j(i(t,n)))}}const $ne={init:Une,uncons:jne,at:Qj,head:Wne,last:Vne,tail:Hne,find:Xj,findIndex:Yj,sum:zne,sort:Jj};var ez;const tz={liftEither(i){if(i.isRight())return Promise.resolve(i.extract());throw i.extract()},fromPromise(i){return i.then(tz.liftEither)},throwE(i){throw i}};class nz{constructor(e){this.runPromise=e,this[ez]="EitherAsync",this["fantasy-land/chain"]=this.chain,this["fantasy-land/alt"]=this.alt,this.then=(t,n)=>this.run().then(t,n)}leftOrDefault(e){return this.run().then(t=>t.leftOrDefault(e))}orDefault(e){return this.run().then(t=>t.orDefault(e))}join(){return lr(async e=>{const t=await this;if(t.isRight()){const n=await t.extract();return e.liftEither(n)}return e.liftEither(t)})}ap(e){return lr(async t=>{const n=await e;if(n.isRight()){const r=await this.run();return r.isRight()?n.extract()(r.extract()):t.liftEither(r)}return t.liftEither(n)})}alt(e){return lr(async t=>{const n=await this.run();if(n.isRight())return n.extract();{const r=await e;return t.liftEither(r)}})}extend(e){return lr(async t=>{const n=await this.run();if(n.isRight()){const r=lr.liftEither(n);return t.liftEither(Qn(e(r)))}return t.liftEither(n)})}async run(){try{return Qn(await this.runPromise(tz))}catch(e){return hi(e)}}bimap(e,t){return lr(async n=>{const r=await this.run();return n.liftEither(r.bimap(e,t))})}map(e){return lr(t=>this.runPromise(t).then(e))}mapLeft(e){return lr(async t=>{try{return await this.runPromise(t)}catch(n){throw await e(n)}})}chain(e){return lr(async t=>{const n=await this.runPromise(t);return t.fromPromise(e(n))})}chainLeft(e){return lr(async t=>{try{return await this.runPromise(t)}catch(n){return t.fromPromise(e(n))}})}toMaybeAsync(){return Rs(async({liftMaybe:e})=>{const t=await this.run();return e(t.toMaybe())})}swap(){return lr(async e=>{const t=await this.run();return t.isRight()&&e.throwE(t.extract()),e.liftEither(Qn(t.extract()))})}ifLeft(e){return lr(async t=>{const n=await this.run();return n.ifLeft(e),t.liftEither(n)})}ifRight(e){return lr(async t=>{const n=await this.run();return n.ifRight(e),t.liftEither(n)})}void(){return this.map(e=>{})}caseOf(e){return this.run().then(t=>t.caseOf(e))}finally(e){return lr(({fromPromise:t})=>t(this.run().finally(e)))}}ez=Symbol.toStringTag;const lr=Object.assign(i=>new nz(i),{fromPromise:i=>lr(({fromPromise:e})=>e(i())),liftEither:i=>lr(({liftEither:e})=>e(i)),lefts:i=>Promise.all(i.map(e=>e.run())).then(gh.lefts),rights:i=>Promise.all(i.map(e=>e.run())).then(gh.rights),sequence:i=>lr(async e=>{let t=[];for await(const n of i){if(n.isLeft())return e.liftEither(n);t.push(n.extract())}return e.liftEither(Qn(t))}),all:i=>lr.fromPromise(async()=>Promise.all(i).then(gh.sequence))});nz.prototype.constructor=lr;var iz;const rz={liftMaybe(i){if(i.isJust())return Promise.resolve(i.extract());throw Pn},fromPromise(i){return i.then(rz.liftMaybe)}};class sz{constructor(e){this.runPromise=e,this[iz]="MaybeAsync",this["fantasy-land/chain"]=this.chain,this["fantasy-land/filter"]=this.filter,this["fantasy-land/alt"]=this.alt}orDefault(e){return this.run().then(t=>t.orDefault(e))}join(){return Rs(async e=>{const t=await this.run();if(t.isJust()){const n=await t.extract();return e.liftMaybe(n)}return e.liftMaybe(Pn)})}ap(e){return Rs(async t=>{const n=await e;if(n.isJust()){const r=await this.run();return r.isJust()?n.extract()(r.extract()):t.liftMaybe(Pn)}return t.liftMaybe(Pn)})}alt(e){return Rs(async t=>{const n=await this.run();if(n.isJust())return n.extract();{const r=await e;return t.liftMaybe(r)}})}extend(e){return Rs(async t=>{const n=await this.run();if(n.isJust()){const r=Rs.liftMaybe(n);return t.liftMaybe(er(e(r)))}return t.liftMaybe(Pn)})}filter(e){return Rs(async t=>{const n=await this.run();return t.liftMaybe(n.filter(e))})}async run(){try{return er(await this.runPromise(rz))}catch{return Pn}}map(e){return Rs(t=>this.runPromise(t).then(e))}chain(e){return Rs(async t=>{const n=await this.runPromise(t);return t.fromPromise(e(n))})}toEitherAsync(e){return lr(async({liftEither:t})=>{const n=await this.run();return t(n.toEither(e))})}ifJust(e){return Rs(async t=>{const n=await this.run();return n.ifJust(e),t.liftMaybe(n)})}ifNothing(e){return Rs(async t=>{const n=await this.run();return n.ifNothing(e),t.liftMaybe(n)})}void(){return this.map(e=>{})}caseOf(e){return this.run().then(t=>t.caseOf(e))}finally(e){return Rs(({fromPromise:t})=>t(this.run().finally(e)))}then(e,t){return this.run().then(e,t)}}iz=Symbol.toStringTag;const Rs=Object.assign(i=>new sz(i),{catMaybes:i=>Promise.all(i).then(Ea.catMaybes),fromPromise:i=>Rs(({fromPromise:e})=>e(i())),liftMaybe:i=>Rs(({liftMaybe:e})=>e(i))});sz.prototype.constructor=Rs;const zF=Object.freeze(Object.defineProperty({__proto__:null,Codec:Pr,Either:gh,EitherAsync:lr,Just:er,Left:hi,List:$ne,Maybe:Ea,MaybeAsync:Rs,NonEmptyList:Tv,Nothing:Pn,get Order(){return Yd},Right:Qn,Tuple:Ta,always:dne,array:jF,boolean:yne,compare:une,curry:hne,date:Ine,enumeration:wne,exactly:Tne,identity:rd,intersect:Rne,lazy:kne,map:Ene,maybe:Lne,nonEmptyList:Dne,nullType:qj,nullable:vne,number:xL,oneOf:TL,optional:bne,orderToNumber:$j,parseError:Jb,record:xne,string:SL,tuple:Gj,unknown:Cne},Symbol.toStringTag,{value:"Module"}));var Kne=function(){return!1};const qne=Kne;var Gne=function(){return!0};const Zne=Gne,Mg={"@@functional/placeholder":!0};function Ni(i){return i!=null&&typeof i=="object"&&i["@@functional/placeholder"]===!0}function ht(i){return function e(t){return arguments.length===0||Ni(t)?e:i.apply(this,arguments)}}function ve(i){return function e(t,n){switch(arguments.length){case 0:return e;case 1:return Ni(t)?e:ht(function(r){return i(t,r)});default:return Ni(t)&&Ni(n)?e:Ni(t)?ht(function(r){return i(r,n)}):Ni(n)?ht(function(r){return i(t,r)}):i(t,n)}}}var Xne=ve(function(e,t){return Number(e)+Number(t)});const kL=Xne;function ja(i,e){i=i||[],e=e||[];var t,n=i.length,r=e.length,s=[];for(t=0;t<n;)s[s.length]=i[t],t+=1;for(t=0;t<r;)s[s.length]=e[t],t+=1;return s}function sd(i,e){switch(i){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,s){return e.apply(this,arguments)};case 5:return function(t,n,r,s,o){return e.apply(this,arguments)};case 6:return function(t,n,r,s,o,a){return e.apply(this,arguments)};case 7:return function(t,n,r,s,o,a,l){return e.apply(this,arguments)};case 8:return function(t,n,r,s,o,a,l,c){return e.apply(this,arguments)};case 9:return function(t,n,r,s,o,a,l,c,d){return e.apply(this,arguments)};case 10:return function(t,n,r,s,o,a,l,c,d,u){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function N1(i,e,t){return function(){for(var n=[],r=0,s=i,o=0,a=!1;o<e.length||r<arguments.length;){var l;o<e.length&&(!Ni(e[o])||r>=arguments.length)?l=e[o]:(l=arguments[r],r+=1),n[o]=l,Ni(l)?a=!0:s-=1,o+=1}return!a&&s<=0?t.apply(this,n):sd(Math.max(0,s),N1(i,n,t))}}var Yne=ve(function(e,t){return e===1?ht(t):sd(e,N1(e,[],t))});const Te=Yne;var Qne=ht(function(e){return Te(e.length,function(){var t=0,n=arguments[0],r=arguments[arguments.length-1],s=Array.prototype.slice.call(arguments,0);return s[0]=function(){var o=n.apply(this,ja(arguments,[t,r]));return t+=1,o},e.apply(this,s)})});const xp=Qne;var Jne=ht(function(e){return Te(e.length,function(){var t=arguments[0],n=arguments[arguments.length-1],r=n.length-1,s=Array.prototype.slice.call(arguments,0);return s[0]=function(){var o=t.apply(this,ja(arguments,[r,n]));return r-=1,o},e.apply(this,s)})});const eie=Jne;function Ft(i){return function e(t,n,r){switch(arguments.length){case 0:return e;case 1:return Ni(t)?e:ve(function(s,o){return i(t,s,o)});case 2:return Ni(t)&&Ni(n)?e:Ni(t)?ve(function(s,o){return i(s,n,o)}):Ni(n)?ve(function(s,o){return i(t,s,o)}):ht(function(s){return i(t,n,s)});default:return Ni(t)&&Ni(n)&&Ni(r)?e:Ni(t)&&Ni(n)?ve(function(s,o){return i(s,o,r)}):Ni(t)&&Ni(r)?ve(function(s,o){return i(s,n,o)}):Ni(n)&&Ni(r)?ve(function(s,o){return i(t,s,o)}):Ni(t)?ht(function(s){return i(s,n,r)}):Ni(n)?ht(function(s){return i(t,s,r)}):Ni(r)?ht(function(s){return i(t,n,s)}):i(t,n,r)}}}var tie=Ft(function(e,t,n){var r=n.length;if(e>=r||e<-r)return n;var s=(r+e)%r,o=ja(n);return o[s]=t(n[s]),o});const oz=tie,is=Array.isArray||function(e){return e!=null&&e.length>=0&&Object.prototype.toString.call(e)==="[object Array]"};function $F(i){return i!=null&&typeof i["@@transducer/step"]=="function"}function Fi(i,e,t){return function(){if(arguments.length===0)return t();var n=arguments[arguments.length-1];if(!is(n)){for(var r=0;r<i.length;){if(typeof n[i[r]]=="function")return n[i[r]].apply(n,Array.prototype.slice.call(arguments,0,-1));r+=1}if($F(n)){var s=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return s(n)}}return t.apply(this,arguments)}}function mu(i){return i&&i["@@transducer/reduced"]?i:{"@@transducer/value":i,"@@transducer/reduced":!0}}const mn={init:function(){return this.xf["@@transducer/init"]()},result:function(i){return this.xf["@@transducer/result"](i)}};var nie=function(){function i(e,t){this.xf=t,this.f=e,this.all=!0}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=function(e){return this.all&&(e=this.xf["@@transducer/step"](e,!0)),this.xf["@@transducer/result"](e)},i.prototype["@@transducer/step"]=function(e,t){return this.f(t)||(this.all=!1,e=mu(this.xf["@@transducer/step"](e,!1))),e},i}();function iie(i){return function(e){return new nie(i,e)}}var rie=ve(Fi(["all"],iie,function(e,t){for(var n=0;n<t.length;){if(!e(t[n]))return!1;n+=1}return!0}));const LL=rie;function i7(i){for(var e=[],t;!(t=i.next()).done;)e.push(t.value);return e}function Og(i,e,t){for(var n=0,r=t.length;n<r;){if(i(e,t[n]))return!0;n+=1}return!1}function sie(i){var e=String(i).match(/^function (\w*)/);return e==null?"":e[1]}function Ur(i,e){return Object.prototype.hasOwnProperty.call(e,i)}function oie(i,e){return i===e?i!==0||1/i===1/e:i!==i&&e!==e}const kv=typeof Object.is=="function"?Object.is:oie;var r7=Object.prototype.toString,aie=function(){return r7.call(arguments)==="[object Arguments]"?function(e){return r7.call(e)==="[object Arguments]"}:function(e){return Ur("callee",e)}}();const az=aie;var lie=!{toString:null}.propertyIsEnumerable("toString"),s7=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],o7=function(){return arguments.propertyIsEnumerable("length")}(),cie=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},die=ht(typeof Object.keys=="function"&&!o7?function(e){return Object(e)!==e?[]:Object.keys(e)}:function(e){if(Object(e)!==e)return[];var t,n,r=[],s=o7&&az(e);for(t in e)Ur(t,e)&&(!s||t!=="length")&&(r[r.length]=t);if(lie)for(n=s7.length-1;n>=0;)t=s7[n],Ur(t,e)&&!cie(r,t)&&(r[r.length]=t),n-=1;return r});const $r=die;var uie=ht(function(e){return e===null?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)});const Kr=uie;function a7(i,e,t,n){var r=i7(i),s=i7(e);function o(a,l){return KF(a,l,t.slice(),n.slice())}return!Og(function(a,l){return!Og(o,l,a)},s,r)}function KF(i,e,t,n){if(kv(i,e))return!0;var r=Kr(i);if(r!==Kr(e))return!1;if(typeof i["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof i["fantasy-land/equals"]=="function"&&i["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](i);if(typeof i.equals=="function"||typeof e.equals=="function")return typeof i.equals=="function"&&i.equals(e)&&typeof e.equals=="function"&&e.equals(i);switch(r){case"Arguments":case"Array":case"Object":if(typeof i.constructor=="function"&&sie(i.constructor)==="Promise")return i===e;break;case"Boolean":case"Number":case"String":if(!(typeof i==typeof e&&kv(i.valueOf(),e.valueOf())))return!1;break;case"Date":if(!kv(i.valueOf(),e.valueOf()))return!1;break;case"Error":return i.name===e.name&&i.message===e.message;case"RegExp":if(!(i.source===e.source&&i.global===e.global&&i.ignoreCase===e.ignoreCase&&i.multiline===e.multiline&&i.sticky===e.sticky&&i.unicode===e.unicode))return!1;break}for(var s=t.length-1;s>=0;){if(t[s]===i)return n[s]===e;s-=1}switch(r){case"Map":return i.size!==e.size?!1:a7(i.entries(),e.entries(),t.concat([i]),n.concat([e]));case"Set":return i.size!==e.size?!1:a7(i.values(),e.values(),t.concat([i]),n.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var o=$r(i);if(o.length!==$r(e).length)return!1;var a=t.concat([i]),l=n.concat([e]);for(s=o.length-1;s>=0;){var c=o[s];if(!(Ur(c,e)&&KF(e[c],i[c],a,l)))return!1;s-=1}return!0}var hie=ve(function(e,t){return KF(e,t,[],[])});const Jn=hie;function lz(i,e,t){var n,r;if(typeof i.indexOf=="function")switch(typeof e){case"number":if(e===0){for(n=1/e;t<i.length;){if(r=i[t],r===0&&1/r===n)return t;t+=1}return-1}else if(e!==e){for(;t<i.length;){if(r=i[t],typeof r=="number"&&r!==r)return t;t+=1}return-1}return i.indexOf(e,t);case"string":case"boolean":case"function":case"undefined":return i.indexOf(e,t);case"object":if(e===null)return i.indexOf(e,t)}for(;t<i.length;){if(Jn(i[t],e))return t;t+=1}return-1}function Jx(i,e){return lz(e,i,0)>=0}function yg(i,e){for(var t=0,n=e.length,r=Array(n);t<n;)r[t]=i(e[t]),t+=1;return r}function TR(i){var e=i.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'}var mb=function(e){return(e<10?"0":"")+e},fie=typeof Date.prototype.toISOString=="function"?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+mb(e.getUTCMonth()+1)+"-"+mb(e.getUTCDate())+"T"+mb(e.getUTCHours())+":"+mb(e.getUTCMinutes())+":"+mb(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};const gie=fie;function cz(i){return function(){return!i.apply(this,arguments)}}function cC(i,e,t){for(var n=0,r=t.length;n<r;)e=i(e,t[n]),n+=1;return e}function qF(i,e){for(var t=0,n=e.length,r=[];t<n;)i(e[t])&&(r[r.length]=e[t]),t+=1;return r}function F_(i){return Object.prototype.toString.call(i)==="[object Object]"}var pie=function(){function i(e,t){this.xf=t,this.f=e}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=mn.result,i.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},i}();function mie(i){return function(e){return new pie(i,e)}}var _ie=ve(Fi(["fantasy-land/filter","filter"],mie,function(i,e){return F_(e)?cC(function(t,n){return i(e[n])&&(t[n]=e[n]),t},{},$r(e)):qF(i,e)}));const A1=_ie;var bie=ve(function(e,t){return A1(cz(e),t)});const P1=bie;function GF(i,e){var t=function(o){var a=e.concat([i]);return Jx(o,a)?"<Circular>":GF(o,a)},n=function(s,o){return yg(function(a){return TR(a)+": "+t(s[a])},o.slice().sort())};switch(Object.prototype.toString.call(i)){case"[object Arguments]":return"(function() { return arguments; }("+yg(t,i).join(", ")+"))";case"[object Array]":return"["+yg(t,i).concat(n(i,P1(function(s){return/^\d+$/.test(s)},$r(i)))).join(", ")+"]";case"[object Boolean]":return typeof i=="object"?"new Boolean("+t(i.valueOf())+")":i.toString();case"[object Date]":return"new Date("+(isNaN(i.valueOf())?t(NaN):TR(gie(i)))+")";case"[object Map]":return"new Map("+t(Array.from(i))+")";case"[object Null]":return"null";case"[object Number]":return typeof i=="object"?"new Number("+t(i.valueOf())+")":1/i===-1/0?"-0":i.toString(10);case"[object Set]":return"new Set("+t(Array.from(i).sort())+")";case"[object String]":return typeof i=="object"?"new String("+t(i.valueOf())+")":TR(i);case"[object Undefined]":return"undefined";default:if(typeof i.toString=="function"){var r=i.toString();if(r!=="[object Object]")return r}return"{"+n(i,$r(i)).join(", ")+"}"}}var vie=ht(function(e){return GF(e,[])});const ta=vie;var yie=ve(function(e,t){if(e===t)return t;function n(l,c){if(l>c!=c>l)return c>l?c:l}var r=n(e,t);if(r!==void 0)return r;var s=n(typeof e,typeof t);if(s!==void 0)return s===typeof e?e:t;var o=ta(e),a=n(o,ta(t));return a!==void 0&&a===o?e:t});const Tp=yie;var Cie=function(){function i(e,t){this.xf=t,this.f=e}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=mn.result,i.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},i}(),wie=function(e){return function(t){return new Cie(e,t)}};const dz=wie;var Sie=ve(Fi(["fantasy-land/map","map"],dz,function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return Te(t.length,function(){return e.call(this,t.apply(this,arguments))});case"[object Object]":return cC(function(n,r){return n[r]=e(t[r]),n},{},$r(t));default:return yg(e,t)}}));const Li=Sie,lu=Number.isInteger||function(e){return e<<0===e};function Fg(i){return Object.prototype.toString.call(i)==="[object String]"}var xie=ve(function(e,t){var n=e<0?t.length+e:e;return Fg(t)?t.charAt(n):t[n]});const od=xie;var Tie=ve(function(e,t){if(t!=null)return lu(e)?od(e,t):t[e]});const Nl=Tie;var kie=ve(function(e,t){return Li(Nl(e),t)});const dC=kie;var Lie=ht(function(e){return is(e)?!0:!e||typeof e!="object"||Fg(e)?!1:e.length===0?!0:e.length>0?e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1):!1});const uC=Lie;var l7=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function uz(i,e,t){return function(r,s,o){if(uC(o))return i(r,s,o);if(o==null)return s;if(typeof o["fantasy-land/reduce"]=="function")return e(r,s,o,"fantasy-land/reduce");if(o[l7]!=null)return t(r,s,o[l7]());if(typeof o.next=="function")return t(r,s,o);if(typeof o.reduce=="function")return e(r,s,o,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function hz(i,e,t){for(var n=0,r=t.length;n<r;){if(e=i["@@transducer/step"](e,t[n]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n+=1}return i["@@transducer/result"](e)}var Die=ve(function(e,t){return sd(e.length,function(){return e.apply(t,arguments)})});const Er=Die;function Iie(i,e,t){for(var n=t.next();!n.done;){if(e=i["@@transducer/step"](e,n.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n=t.next()}return i["@@transducer/result"](e)}function Rie(i,e,t,n){return i["@@transducer/result"](t[n](Er(i["@@transducer/step"],i),e))}var Eie=uz(hz,Rie,Iie);const kp=Eie;var Nie=function(){function i(e){this.f=e}return i.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},i.prototype["@@transducer/result"]=function(e){return e},i.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},i}();function DL(i){return new Nie(i)}var Aie=Ft(function(i,e,t){return kp(typeof i=="function"?DL(i):i,e,t)});const oo=Aie;var Pie=ht(function(e){return Te(oo(Tp,0,dC("length",e)),function(){for(var t=0,n=e.length;t<n;){if(!e[t].apply(this,arguments))return!1;t+=1}return!0})});const ZF=Pie;var Mie=ht(function(e){return function(){return e}});const ad=Mie;var Oie=ve(function(e,t){return e&&t});const XF=Oie;var Fie=function(){function i(e,t){this.xf=t,this.f=e,this.any=!1}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=function(e){return this.any||(e=this.xf["@@transducer/step"](e,!1)),this.xf["@@transducer/result"](e)},i.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.any=!0,e=mu(this.xf["@@transducer/step"](e,!0))),e},i}();function Bie(i){return function(e){return new Fie(i,e)}}var Wie=ve(Fi(["any"],Bie,function(e,t){for(var n=0;n<t.length;){if(e(t[n]))return!0;n+=1}return!1}));const Vie=Wie;var Hie=ht(function(e){return Te(oo(Tp,0,dC("length",e)),function(){for(var t=0,n=e.length;t<n;){if(e[t].apply(this,arguments))return!0;t+=1}return!1})});const hC=Hie;function Uie(i,e,t){for(var n=t.next();!n.done;)e=i(e,n.value),n=t.next();return e}function jie(i,e,t,n){return t[n](i,e)}var zie=uz(cC,jie,Uie);const IL=zie;var $ie=ve(function(e,t){return typeof t["fantasy-land/ap"]=="function"?t["fantasy-land/ap"](e):typeof e.ap=="function"?e.ap(t):typeof e=="function"?function(n){return e(n)(t(n))}:IL(function(n,r){return ja(n,Li(r,t))},[],e)});const fC=$ie;function Kie(i,e){for(var t=0,n=e.length-(i-1),r=new Array(n>=0?n:0);t<n;)r[t]=Array.prototype.slice.call(e,t,t+i),t+=1;return r}var qie=function(){function i(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=new Array(e)}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},i.prototype["@@transducer/step"]=function(e,t){return this.store(t),this.full?this.xf["@@transducer/step"](e,this.getCopy()):e},i.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},i.prototype.getCopy=function(){return ja(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},i}();function Gie(i){return function(e){return new qie(i,e)}}var Zie=ve(Fi([],Gie,Kie));const Xie=Zie;var Yie=ve(function(e,t){return ja(t,[e])});const YF=Yie;var Qie=ve(function(e,t){return e.apply(this,t)});const M1=Qie;var Jie=ht(function(e){for(var t=$r(e),n=t.length,r=[],s=0;s<n;)r[s]=e[t[s]],s+=1;return r});const RL=Jie;function c7(i,e){return is(e)?e.map(i):$r(e).reduce(function(t,n){return t[n]=i(e[n]),t},{})}var ere=ht(function i(e){return e=c7(function(t){return typeof t=="function"?t:i(t)},e),Te(oo(Tp,0,dC("length",RL(e))),function(){var t=arguments;return c7(function(n){return M1(n,t)},e)})});const tre=ere;var nre=ve(function(e,t){return t(e)});const ire=nre;var rre=Ft(function(e,t,n){var r=e(t),s=e(n);return r<s?-1:r>s?1:0});const fz=rre;function QF(i,e,t){if(lu(i)&&is(t)){var n=[].concat(t);return n[i]=e,n}var r={};for(var s in t)r[s]=t[s];return r[i]=e,r}var sre=ht(function(e){return e==null});const Vc=sre;var ore=Ft(function i(e,t,n){if(e.length===0)return t;var r=e[0];if(e.length>1){var s=!Vc(n)&&Ur(r,n)&&typeof n[r]=="object"?n[r]:lu(e[1])?[]:{};t=i(Array.prototype.slice.call(e,1),t,s)}return QF(r,t,n)});const JF=ore;var are=Ft(function(e,t,n){return JF([e],t,n)});const e4=are;var lre=ve(function(e,t){switch(e){case 0:return function(){return t.call(this)};case 1:return function(n){return t.call(this,n)};case 2:return function(n,r){return t.call(this,n,r)};case 3:return function(n,r,s){return t.call(this,n,r,s)};case 4:return function(n,r,s,o){return t.call(this,n,r,s,o)};case 5:return function(n,r,s,o,a){return t.call(this,n,r,s,o,a)};case 6:return function(n,r,s,o,a,l){return t.call(this,n,r,s,o,a,l)};case 7:return function(n,r,s,o,a,l,c){return t.call(this,n,r,s,o,a,l,c)};case 8:return function(n,r,s,o,a,l,c,d){return t.call(this,n,r,s,o,a,l,c,d)};case 9:return function(n,r,s,o,a,l,c,d,u){return t.call(this,n,r,s,o,a,l,c,d,u)};case 10:return function(n,r,s,o,a,l,c,d,u,h){return t.call(this,n,r,s,o,a,l,c,d,u,h)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}});const gC=lre;var cre=ht(function(e){return gC(2,e)});const dre=cre;function B_(i){var e=Object.prototype.toString.call(i);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"}var ure=ve(function(e,t){var n=Te(e,t);return Te(e,function(){return cC(fC,Li(n,arguments[0]),Array.prototype.slice.call(arguments,1))})});const gz=ure;var hre=ht(function(e){return gz(e.length,e)});const EL=hre;var fre=ve(function(e,t){return B_(e)?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:EL(XF)(e,t)});const yi=fre;var gre=ht(function(e){return e.apply(this,Array.prototype.slice.call(arguments,1))});const pre=gre;function pz(i){return function e(t){for(var n,r,s,o=[],a=0,l=t.length;a<l;){if(uC(t[a]))for(n=i?e(t[a]):t[a],s=0,r=n.length;s<r;)o[o.length]=n[s],s+=1;else o[o.length]=t[a];a+=1}return o}}function mre(i){return{"@@transducer/value":i,"@@transducer/reduced":!0}}var mz="@@transducer/init",UN="@@transducer/step",_z="@@transducer/result",_re=function(){function i(e){this.xf=e}return i.prototype[mz]=mn.init,i.prototype[_z]=mn.result,i.prototype[UN]=function(e,t){var n=this.xf[UN](e,t);return n["@@transducer/reduced"]?mre(n):n},i}(),bre=function(){function i(e){this.xf=new _re(e)}return i.prototype[mz]=mn.init,i.prototype[_z]=mn.result,i.prototype[UN]=function(e,t){return uC(t)?kp(this.xf,e,t):hz(this.xf,e,[t])},i}(),vre=function(e){return new bre(e)};const yre=vre;function Cre(i){return function(e){return dz(i)(yre(e))}}var wre=ve(Fi(["fantasy-land/chain","chain"],Cre,function(e,t){return typeof t=="function"?function(n){return e(t(n))(n)}:pz(!1)(Li(e,t))}));const bz=wre;var Sre=Ft(function(e,t,n){if(e>t)throw new Error("min must not be greater than max in clamp(min, max, value)");return n<e?e:n>t?t:n});const xre=Sre;function vz(i){return new RegExp(i.source,i.flags?i.flags:(i.global?"g":"")+(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.sticky?"y":"")+(i.unicode?"u":"")+(i.dotAll?"s":""))}function NL(i,e,t){if(t||(t=new kre),Tre(i))return i;var n=function(s){var o=t.get(i);if(o)return o;t.set(i,s);for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(s[a]=e?NL(i[a],!0,t):i[a]);return s};switch(Kr(i)){case"Object":return n(Object.create(Object.getPrototypeOf(i)));case"Array":return n([]);case"Date":return new Date(i.valueOf());case"RegExp":return vz(i);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return i.slice();default:return i}}function Tre(i){var e=typeof i;return i==null||e!="object"&&e!="function"}var kre=function(){function i(){this.map={},this.length=0}return i.prototype.set=function(e,t){const n=this.hash(e);let r=this.map[n];r||(this.map[n]=r=[]),r.push([e,t]),this.length+=1},i.prototype.hash=function(e){let t=[];for(var n in e)t.push(Object.prototype.toString.call(e[n]));return t.join()},i.prototype.get=function(e){if(this.length<=180){for(const r in this.map){const s=this.map[r];for(let o=0;o<s.length;o+=1){const a=s[o];if(a[0]===e)return a[1]}}return}const t=this.hash(e),n=this.map[t];if(n)for(let r=0;r<n.length;r+=1){const s=n[r];if(s[0]===e)return s[1]}},i}(),Lre=ht(function(e){return e!=null&&typeof e.clone=="function"?e.clone():NL(e,!0)});const yz=Lre;var Dre=ve(function(e,t){var n=IL(function(o,a){var l=e(a);return o[l]===void 0&&(o[l]=[]),o[l].push(a),o},{},t),r=[];for(var s in n)r.push(n[s]);return r});const Ire=Dre;var Rre=ht(function(e){return function(t,n){return e(t,n)?-1:e(n,t)?1:0}});const t4=Rre;var Ere=ht(function(e){return!e});const Cz=Ere;var Nre=EL(Cz);const jt=Nre;function Are(i,e){return function(){return e.call(this,i.apply(this,arguments))}}function pC(i,e){return function(){var t=arguments.length;if(t===0)return e();var n=arguments[t-1];return is(n)||typeof n[i]!="function"?e.apply(this,arguments):n[i].apply(n,Array.prototype.slice.call(arguments,0,t-1))}}var Pre=Ft(pC("slice",function(e,t,n){return Array.prototype.slice.call(n,e,t)}));const no=Pre;var Mre=ht(pC("tail",no(1,1/0)));const n4=Mre;function sn(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return sd(arguments[0].length,oo(Are,arguments[0],n4(arguments)))}var Ore=ht(function(e){return Fg(e)?e.split("").reverse().join(""):Array.prototype.slice.call(e,0).reverse()});const AL=Ore;function _u(){if(arguments.length===0)throw new Error("compose requires at least one argument");return sn.apply(this,AL(arguments))}var Fre=od(0);const PL=Fre;function Bg(i){return i}var Bre=ht(Bg);const jl=Bre;var Wre=ve(function(e,t){if(t.length<=0)return jl;var n=PL(t),r=n4(t);return sd(n.length,function(){return IL(function(s,o){return e.call(this,o,s)},n.apply(this,arguments),r)})});const wz=Wre;var Vre=ve(function(e,t){return wz.apply(this,[e,AL(t)])});const Hre=Vre;var Ure=ve(function(e,t){if(is(e)){if(is(t))return e.concat(t);throw new TypeError(ta(t)+" is not an array")}if(Fg(e)){if(Fg(t))return e+t;throw new TypeError(ta(t)+" is not a string")}if(e!=null&&B_(e["fantasy-land/concat"]))return e["fantasy-land/concat"](t);if(e!=null&&B_(e.concat))return e.concat(t);throw new TypeError(ta(e)+' does not have a method named "concat" or "fantasy-land/concat"')});const O1=Ure;var jre=ht(function(e){var t=oo(Tp,0,Li(function(n){return n[0].length},e));return sd(t,function(){for(var n=0;n<e.length;){if(e[n][0].apply(this,arguments))return e[n][1].apply(this,arguments);n+=1}})});const zre=jre;var $re=ht(function(e){return Te(e.length,e)});const zt=$re;var Kre=ve(function(e,t){if(e>10)throw new Error("Constructor with greater than ten arguments");return e===0?function(){return new t}:zt(gC(e,function(n,r,s,o,a,l,c,d,u,h){switch(e){case 1:return new t(n);case 2:return new t(n,r);case 3:return new t(n,r,s);case 4:return new t(n,r,s,o);case 5:return new t(n,r,s,o,a);case 6:return new t(n,r,s,o,a,l);case 7:return new t(n,r,s,o,a,l,c);case 8:return new t(n,r,s,o,a,l,c,d);case 9:return new t(n,r,s,o,a,l,c,d,u);case 10:return new t(n,r,s,o,a,l,c,d,u,h)}}))});const Sz=Kre;var qre=ht(function(e){return Sz(e.length,e)});const Gre=qre;var Zre=ve(function(e,t){return Te(oo(Tp,0,dC("length",t)),function(){var n=arguments,r=this;return e.apply(r,yg(function(s){return s.apply(r,n)},t))})});const Lp=Zre;var Xre=zt(function(i,e){return IL(function(t,n){return i(n)?t+1:t},0,e)});const Yre=Xre;var Qre=function(){function i(e,t,n,r){this.valueFn=e,this.valueAcc=t,this.keyFn=n,this.xf=r,this.inputs={}}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=function(e){var t;for(t in this.inputs)if(Ur(t,this.inputs)&&(e=this.xf["@@transducer/step"](e,this.inputs[t]),e["@@transducer/reduced"])){e=e["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](e)},i.prototype["@@transducer/step"]=function(e,t){var n=this.keyFn(t);return this.inputs[n]=this.inputs[n]||[n,NL(this.valueAcc,!1)],this.inputs[n][1]=this.valueFn(this.inputs[n][1],t),e},i}();function Jre(i,e,t){return function(n){return new Qre(i,e,t,n)}}var ese=N1(4,[],Fi([],Jre,function(e,t,n,r){var s=DL(function(o,a){var l=n(a),c=e(Ur(l,o)?o[l]:NL(t,!1),a);return c&&c["@@transducer/reduced"]?mu(o):(o[l]=c,o)});return kp(s,{},r)}));const ML=ese;var tse=ML(function(i,e){return i+1},0);const nse=tse;var ise=kL(-1);const rse=ise;var sse=ve(function(e,t){return t==null||t!==t?e:t});const mC=sse;var ose=Ft(function(e,t,n){var r=e(t),s=e(n);return r>s?-1:r<s?1:0});const ase=ose;var lse=function(){function i(){this._nativeSet=typeof Set=="function"?new Set:null,this._items={}}return i.prototype.add=function(e){return!d7(e,!0,this)},i.prototype.has=function(e){return d7(e,!1,this)},i}();function d7(i,e,t){var n=typeof i,r,s;switch(n){case"string":case"number":return i===0&&1/i===-1/0?t._items["-0"]?!0:(e&&(t._items["-0"]=!0),!1):t._nativeSet!==null?e?(r=t._nativeSet.size,t._nativeSet.add(i),s=t._nativeSet.size,s===r):t._nativeSet.has(i):n in t._items?i in t._items[n]?!0:(e&&(t._items[n][i]=!0),!1):(e&&(t._items[n]={},t._items[n][i]=!0),!1);case"boolean":if(n in t._items){var o=i?1:0;return t._items[n][o]?!0:(e&&(t._items[n][o]=!0),!1)}else return e&&(t._items[n]=i?[!1,!0]:[!0,!1]),!1;case"function":return t._nativeSet!==null?e?(r=t._nativeSet.size,t._nativeSet.add(i),s=t._nativeSet.size,s===r):t._nativeSet.has(i):n in t._items?Jx(i,t._items[n])?!0:(e&&t._items[n].push(i),!1):(e&&(t._items[n]=[i]),!1);case"undefined":return t._items[n]?!0:(e&&(t._items[n]=!0),!1);case"object":if(i===null)return t._items.null?!0:(e&&(t._items.null=!0),!1);default:return n=Object.prototype.toString.call(i),n in t._items?Jx(i,t._items[n])?!0:(e&&t._items[n].push(i),!1):(e&&(t._items[n]=[i]),!1)}}const _C=lse;var cse=ve(function(e,t){for(var n=[],r=0,s=e.length,o=t.length,a=new _C,l=0;l<o;l+=1)a.add(t[l]);for(;r<s;)a.add(e[r])&&(n[n.length]=e[r]),r+=1;return n});const jN=cse;var dse=Ft(function(e,t,n){for(var r=[],s=0,o=t.length;s<o;)!Og(e,t[s],n)&&!Og(e,t[s],r)&&r.push(t[s]),s+=1;return r});const zN=dse;var use=Ft(function(e,t,n){var r=Array.prototype.slice.call(n,0);return r.splice(e,t),r});const i4=use;function hse(i,e){if(e==null)return e;if(lu(i)&&is(e))return i4(i,1,e);var t={};for(var n in e)t[n]=e[n];return delete t[i],t}function fse(i,e){if(lu(i)&&is(e))return[].concat(e);var t={};for(var n in e)t[n]=e[n];return t}var gse=ve(function i(e,t){if(t==null)return t;switch(e.length){case 0:return t;case 1:return hse(e[0],t);default:var n=e[0],r=Array.prototype.slice.call(e,1);return t[n]==null?fse(n,t):e4(n,i(r,t[n]),t)}});const r4=gse;var pse=ve(function(e,t){return r4([e],t)});const mse=pse;var _se=ve(function(e,t){return e/t});const xz=_se;var bse=function(){function i(e,t){this.xf=t,this.n=e}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=mn.result,i.prototype["@@transducer/step"]=function(e,t){return this.n>0?(this.n-=1,e):this.xf["@@transducer/step"](e,t)},i}();function vse(i){return function(e){return new bse(i,e)}}var yse=ve(Fi(["drop"],vse,function(e,t){return no(Math.max(0,e),1/0,t)}));const Tz=yse;var Cse=function(){function i(e,t){this.xf=t,this.n=e,this.i=0}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=mn.result,i.prototype["@@transducer/step"]=function(e,t){this.i+=1;var n=this.n===0?e:this.xf["@@transducer/step"](e,t);return this.n>=0&&this.i>=this.n?mu(n):n},i}();function wse(i){return function(e){return new Cse(i,e)}}var Sse=ve(Fi(["take"],wse,function(e,t){return no(0,e<0?1/0:e,t)}));const s4=Sse;function xse(i,e){return s4(i<e.length?e.length-i:0,e)}var Tse=function(){function i(e,t){if(e<=0)return t;this.xf=t,this.pos=0,this.full=!1,this.acc=new Array(e)}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},i.prototype["@@transducer/step"]=function(e,t){return this.full&&(e=this.xf["@@transducer/step"](e,this.acc[this.pos])),this.store(t),e},i.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},i}();function kse(i){return function(e){return new Tse(i,e)}}var Lse=ve(Fi([],kse,xse));const Dse=Lse;function Ise(i,e){for(var t=e.length-1;t>=0&&i(e[t]);)t-=1;return no(0,t+1,e)}var Rse=function(){function i(e,t){this.f=e,this.retained=[],this.xf=t}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=function(e){return this.retained=null,this.xf["@@transducer/result"](e)},i.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.retain(e,t):this.flush(e,t)},i.prototype.flush=function(e,t){return e=kp(this.xf,e,this.retained),this.retained=[],this.xf["@@transducer/step"](e,t)},i.prototype.retain=function(e,t){return this.retained.push(t),e},i}();function Ese(i){return function(e){return new Rse(i,e)}}var Nse=ve(Fi([],Ese,Ise));const kz=Nse;var Ase=function(){function i(e,t){this.xf=t,this.pred=e,this.lastValue=void 0,this.seenFirstValue=!1}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=mn.result,i.prototype["@@transducer/step"]=function(e,t){var n=!1;return this.seenFirstValue?this.pred(this.lastValue,t)&&(n=!0):this.seenFirstValue=!0,this.lastValue=t,n?e:this.xf["@@transducer/step"](e,t)},i}();function o4(i){return function(e){return new Ase(i,e)}}var Pse=od(-1);const a4=Pse;var Mse=ve(Fi([],o4,function(e,t){var n=[],r=1,s=t.length;if(s!==0)for(n[0]=t[0];r<s;)e(a4(n),t[r])||(n[n.length]=t[r]),r+=1;return n}));const l4=Mse;var Ose=ht(Fi([],function(){return o4(Jn)},l4(Jn)));const Fse=Ose;var Bse=Ft(function(e,t,n){return Jn(e(t),e(n))});const $N=Bse;var Wse=ve(function(i,e){return Fi([],function(){return o4($N(i))},l4($N(i)))(e)});const Vse=Wse;var Hse=function(){function i(e,t){this.xf=t,this.f=e}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=mn.result,i.prototype["@@transducer/step"]=function(e,t){if(this.f){if(this.f(t))return e;this.f=null}return this.xf["@@transducer/step"](e,t)},i}();function Use(i){return function(e){return new Hse(i,e)}}var jse=ve(Fi(["dropWhile"],Use,function(e,t){for(var n=0,r=t.length;n<r&&e(t[n]);)n+=1;return no(n,1/0,t)}));const Lz=jse;var zse=ve(function(e,t){return e||t});const c4=zse;var $se=ve(function(e,t){return B_(e)?function(){return e.apply(this,arguments)||t.apply(this,arguments)}:EL(c4)(e,t)});const ld=$se;function Kse(i){var e=Object.prototype.toString.call(i);return e==="[object Uint8ClampedArray]"||e==="[object Int8Array]"||e==="[object Uint8Array]"||e==="[object Int16Array]"||e==="[object Uint16Array]"||e==="[object Int32Array]"||e==="[object Uint32Array]"||e==="[object Float32Array]"||e==="[object Float64Array]"||e==="[object BigInt64Array]"||e==="[object BigUint64Array]"}var qse=ht(function(e){return e!=null&&typeof e["fantasy-land/empty"]=="function"?e["fantasy-land/empty"]():e!=null&&e.constructor!=null&&typeof e.constructor["fantasy-land/empty"]=="function"?e.constructor["fantasy-land/empty"]():e!=null&&typeof e.empty=="function"?e.empty():e!=null&&e.constructor!=null&&typeof e.constructor.empty=="function"?e.constructor.empty():is(e)?[]:Fg(e)?"":F_(e)?{}:az(e)?function(){return arguments}():Kse(e)?e.constructor.from(""):void 0});const d4=qse;var Gse=ve(function(e,t){return Tz(e>=0?t.length-e:0,t)});const Dz=Gse;var Zse=ve(function(i,e){return Jn(Dz(i.length,e),i)});const Xse=Zse;var Yse=Ft(function(e,t,n){return Jn(t[e],n[e])});const Qse=Yse;var Jse=ve(function i(e,t){if(!F_(t)&&!is(t))return t;var n=t instanceof Array?[]:{},r,s,o;for(s in t)r=e[s],o=typeof r,n[s]=o==="function"?r(t[s]):r&&o==="object"?i(r,t[s]):t[s];return n});const eoe=Jse;var toe=function(){function i(e,t){this.xf=t,this.f=e,this.found=!1}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},i.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.found=!0,e=mu(this.xf["@@transducer/step"](e,t))),e},i}();function noe(i){return function(e){return new toe(i,e)}}var ioe=ve(Fi(["find"],noe,function(e,t){for(var n=0,r=t.length;n<r;){if(e(t[n]))return t[n];n+=1}}));const Iz=ioe;var roe=function(){function i(e,t){this.xf=t,this.f=e,this.idx=-1,this.found=!1}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,-1)),this.xf["@@transducer/result"](e)},i.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.found=!0,e=mu(this.xf["@@transducer/step"](e,this.idx))),e},i}();function soe(i){return function(e){return new roe(i,e)}}var ooe=ve(Fi([],soe,function(e,t){for(var n=0,r=t.length;n<r;){if(e(t[n]))return n;n+=1}return-1}));const aoe=ooe;var loe=function(){function i(e,t){this.xf=t,this.f=e}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.last))},i.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.last=t),e},i}();function coe(i){return function(e){return new loe(i,e)}}var doe=ve(Fi([],coe,function(e,t){for(var n=t.length-1;n>=0;){if(e(t[n]))return t[n];n-=1}}));const uoe=doe;var hoe=function(){function i(e,t){this.xf=t,this.f=e,this.idx=-1,this.lastIdx=-1}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.lastIdx))},i.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.lastIdx=this.idx),e},i}();function foe(i){return function(e){return new hoe(i,e)}}var goe=ve(Fi([],foe,function(e,t){for(var n=t.length-1;n>=0;){if(e(t[n]))return n;n-=1}return-1}));const poe=goe;var moe=ht(pz(!0));const _oe=moe;var boe=ht(function(e){return Te(e.length,function(t,n){var r=Array.prototype.slice.call(arguments,0);return r[0]=n,r[1]=t,e.apply(this,r)})});const as=boe;var voe=ve(pC("forEach",function(e,t){for(var n=t.length,r=0;r<n;)e(t[r]),r+=1;return t}));const yoe=voe;var Coe=ve(function(e,t){for(var n=$r(t),r=0;r<n.length;){var s=n[r];e(t[s],s,t),r+=1}return t});const woe=Coe;var Soe=ht(function(e){for(var t={},n=0;n<e.length;)t[e[n][0]]=e[n][1],n+=1;return t});const u4=Soe;var xoe=ve(pC("groupBy",ML(function(i,e){return i.push(e),i},[])));const Toe=xoe;var koe=ve(function(i,e){for(var t=[],n=0,r=e.length;n<r;){for(var s=n+1;s<r&&i(e[s-1],e[s]);)s+=1;t.push(e.slice(n,s)),n=s}return t});const Loe=koe;var Doe=ve(function(e,t){return e>t});const OL=Doe;var Ioe=ve(function(e,t){return e>=t});const FL=Ioe;var Roe=ve(function(e,t){if(e.length===0||Vc(t))return!1;for(var n=t,r=0;r<e.length;)if(!Vc(n)&&Ur(e[r],n))n=n[e[r]],r+=1;else return!1;return!0});const Rz=Roe;var Eoe=ve(function(e,t){return Rz([e],t)});const eT=Eoe;var Noe=ve(function(e,t){return Vc(t)?!1:e in t});const tT=Noe;var Ez=function(i,e){switch(arguments.length){case 0:return Ez;case 1:return function(){return function t(n){switch(arguments.length){case 0:return t;default:return kv(i,n)}}}();default:return kv(i,e)}};const Bi=Ez;var Aoe=Ft(function(e,t,n){return Te(Math.max(e.length,t.length,n.length),function(){return e.apply(this,arguments)?t.apply(this,arguments):n.apply(this,arguments)})});const bC=Aoe;var Poe=kL(1);const Moe=Poe;var Ooe=ve(Jx);const BL=Ooe;var Foe=ML(function(i,e){return e},null);const Boe=Foe;var Woe=ve(function(e,t){return typeof t.indexOf=="function"&&!is(t)?t.indexOf(e):lz(t,e,0)});const Voe=Woe;var Hoe=no(0,-1);const Nz=Hoe;var Uoe=Ft(function(e,t,n){return qF(function(r){return Og(e,r,n)},t)});const joe=Uoe;var zoe=Ft(function(e,t,n){e=e<n.length&&e>=0?e:n.length;var r=Array.prototype.slice.call(n,0);return r.splice(e,0,t),r});const Az=zoe;var $oe=Ft(function(e,t,n){return e=e<n.length&&e>=0?e:n.length,[].concat(Array.prototype.slice.call(n,0,e),t,Array.prototype.slice.call(n,e))});const Koe=$oe;var qoe=function(){function i(e,t){this.xf=t,this.f=e,this.set=new _C}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=mn.result,i.prototype["@@transducer/step"]=function(e,t){return this.set.add(this.f(t))?this.xf["@@transducer/step"](e,t):e},i}();function Goe(i){return function(e){return new qoe(i,e)}}var Zoe=ve(Fi([],Goe,function(i,e){for(var t=new _C,n=[],r=0,s,o;r<e.length;)o=e[r],s=i(o),t.add(s)&&n.push(o),r+=1;return n}));const Pz=Zoe;var Xoe=Pz(jl);const vC=Xoe;var Yoe=ve(function(e,t){for(var n=new _C,r=0;r<e.length;r+=1)n.add(e[r]);return vC(qF(n.has.bind(n),t))});const Mz=Yoe;var Qoe=ve(pC("intersperse",function(e,t){for(var n=[],r=0,s=t.length;r<s;)r===s-1?n.push(t[r]):n.push(t[r],e),r+=1;return n}));const Joe=Qoe;function eae(i){if(i==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(i),t=1,n=arguments.length;t<n;){var r=arguments[t];if(r!=null)for(var s in r)Ur(s,r)&&(e[s]=r[s]);t+=1}return e}const WL=typeof Object.assign=="function"?Object.assign:eae;var tae=ve(function(e,t){var n={};return n[e]=t,n});const Oz=tae;var nae={"@@transducer/init":Array,"@@transducer/step":function(i,e){return i.push(e),i},"@@transducer/result":Bg},iae={"@@transducer/init":String,"@@transducer/step":function(i,e){return i+e},"@@transducer/result":Bg},rae={"@@transducer/init":Object,"@@transducer/step":function(i,e){return WL(i,uC(e)?Oz(e[0],e[1]):e)},"@@transducer/result":Bg};function sae(i){if($F(i))return i;if(uC(i))return nae;if(typeof i=="string")return iae;if(typeof i=="object")return rae;throw new Error("Cannot create transformer for "+i)}var oae=Ft(function(e,t,n){var r=t($F(e)?e:sae(e));return kp(r,r["@@transducer/init"](),n)});const aae=oae;var lae=ht(function(e){for(var t=$r(e),n=t.length,r=0,s={};r<n;){var o=t[r],a=e[o],l=Ur(a,s)?s[a]:s[a]=[];l[l.length]=o,r+=1}return s});const cae=lae;var dae=ht(function(e){for(var t=$r(e),n=t.length,r=0,s={};r<n;){var o=t[r];s[e[o]]=o,r+=1}return s});const uae=dae;var hae=ve(function(e,t){return Te(e+1,function(){var n=arguments[e];if(n!=null&&B_(n[t]))return n[t].apply(n,Array.prototype.slice.call(arguments,0,e));throw new TypeError(ta(n)+' does not have a method named "'+t+'"')})});const Fo=hae;var fae=ve(function(e,t){return t instanceof e||t!=null&&(t.constructor===e||e.name==="Object"&&typeof t=="object")});const Fz=fae;var gae=ht(function(e){return e!=null&&Jn(e,d4(e))});const F1=gae;var pae=ht(function(e){return!Vc(e)});const mae=pae;var _ae=Fo(1,"join");const h4=_ae;var bae=ht(function(e){return Lp(function(){return Array.prototype.slice.call(arguments,0)},e)});const Bz=bae;var vae=ht(function(e){var t,n=[];for(t in e)n[n.length]=t;return n});const yae=vae;var Cae=ve(function(e,t){if(typeof t.lastIndexOf=="function"&&!is(t))return t.lastIndexOf(e);for(var n=t.length-1;n>=0;){if(Jn(t[n],e))return n;n-=1}return-1});const wae=Cae;function KN(i){return Object.prototype.toString.call(i)==="[object Number]"}var Sae=ht(function(e){return e!=null&&KN(e.length)?e.length:NaN});const Hc=Sae;var xae=ve(function(e,t){return function(n){return function(r){return Li(function(s){return t(s,r)},n(e(r)))}}});const VL=xae;var Tae=Ft(function(e,t,n){return oz(e,ad(t),n)});const Wz=Tae;var kae=ht(function(e){return VL(od(e),Wz(e))});const Vz=kae;var Lae=ve(function(e,t){return e.map(function(n){for(var r=t,s=0,o;s<n.length;){if(r==null)return;o=n[s],r=lu(o)?od(o,r):r[o],s+=1}return r})});const Hz=Lae;var Dae=ve(function(e,t){return Hz([e],t)[0]});const Ba=Dae;var Iae=ht(function(e){return VL(Ba(e),JF(e))});const Uz=Iae;var Rae=ht(function(e){return VL(Nl(e),e4(e))});const Eae=Rae;var Nae=ve(function(e,t){return e<t});const HL=Nae;var Aae=ve(function(e,t){return e<=t});const UL=Aae;var Pae=Ft(function(e,t,n){for(var r=0,s=n.length,o=[],a=[t];r<s;)a=e(a[0],n[r]),o[r]=a[1],r+=1;return[a[0],o]});const Mae=Pae;var Oae=Ft(function(e,t,n){for(var r=n.length-1,s=[],o=[t];r>=0;)o=e(o[0],n[r]),s[r]=o[1],r-=1;return[o[0],s]});const Fae=Oae;var Bae=ve(function(e,t){return cC(function(n,r){return n[r]=e(t[r],r,t),n},{},$r(t))});const Wae=Bae;var Vae=ve(function(e,t){return t.match(e)||[]});const Hae=Vae;var Uae=ve(function(e,t){return lu(e)?!lu(t)||t<1?NaN:(e%t+t)%t:NaN});const jae=Uae;var zae=Ft(function(e,t,n){var r=e(n);return Tp(e(t),r)===r?n:t});const $ae=zae;var Kae=oo(kL,0);const jz=Kae;var qae=ht(function(e){return jz(e)/e.length});const zz=qae;var Gae=ht(function(e){var t=e.length;if(t===0)return NaN;var n=2-t%2,r=(t-n)/2;return zz(Array.prototype.slice.call(e,0).sort(function(s,o){return s<o?-1:s>o?1:0}).slice(r,r+n))});const Zae=Gae;var Xae=ve(function(e,t){var n={};return sd(t.length,function(){var r=e.apply(this,arguments);return Ur(r,n)||(n[r]=t.apply(this,arguments)),n[r]})});const Yae=Xae;var Qae=ht(function(e){return WL.apply(null,[{}].concat(e))});const f4=Qae;var Jae=Ft(function(e,t,n){var r={},s;t=t||{},n=n||{};for(s in t)Ur(s,t)&&(r[s]=Ur(s,n)?e(s,t[s],n[s]):t[s]);for(s in n)Ur(s,n)&&!Ur(s,r)&&(r[s]=n[s]);return r});const g4=Jae;var ele=Ft(function i(e,t,n){return g4(function(r,s,o){return F_(s)&&F_(o)?i(e,s,o):e(r,s,o)},t,n)});const jL=ele;var tle=ve(function(e,t){return jL(function(n,r,s){return r},e,t)});const nle=tle;var ile=ve(function(e,t){return jL(function(n,r,s){return s},e,t)});const $z=ile;var rle=Ft(function(e,t,n){return jL(function(r,s,o){return e(s,o)},t,n)});const sle=rle;var ole=ve(function(e,t){return WL({},t,e)});const Kz=ole;var ale=ve(function(e,t){return WL({},e,t)});const p4=ale;var lle=Ft(function(e,t,n){return g4(function(r,s,o){return e(s,o)},t,n)});const cle=lle;var dle=ve(function(e,t){if(e===t)return e;function n(l,c){if(l<c!=c<l)return c<l?c:l}var r=n(e,t);if(r!==void 0)return r;var s=n(typeof e,typeof t);if(s!==void 0)return s===typeof e?e:t;var o=ta(e),a=n(o,ta(t));return a!==void 0?a===o?e:t:e});const qz=dle;var ule=Ft(function(e,t,n){var r=e(n);return qz(e(t),r)===r?n:t});const hle=ule;function fle(i,e,t){if(lu(i)&&is(t)){var n=[].concat(t);return n[i]=e(n[i]),n}var r={};for(var s in t)r[s]=t[s];return r[i]=e(r[i]),r}var gle=Ft(function i(e,t,n){if(!F_(n)&&!is(n))return n;if(e.length===0)return t(n);var r=e[0];if(!Ur(r,n))return n;if(e.length===1)return fle(r,t,n);var s=i(Array.prototype.slice.call(e,1),t,n[r]);return s===n[r]?n:QF(r,s,n)});const Gz=gle;var ple=Ft(function(e,t,n){return Gz([e],t,n)});const mle=ple;var _le=ve(function(e,t){return e%t});const m4=_le;var ble=Ft(function(i,e,t){var n=t.length,r=t.slice(),s=i<0?n+i:i,o=e<0?n+e:e,a=r.splice(s,1);return s<0||s>=t.length||o<0||o>=t.length?t:[].concat(r.slice(0,o)).concat(a).concat(r.slice(o,t.length))});const vle=ble;var yle=ve(function(e,t){return e*t});const Zz=yle;var Cle=ve((i,e)=>t=>i.call(globalThis,$z(e,t)));const wle=Cle;var Sle=ht(function(e){return-e});const xle=Sle;var Tle=ve(function(e,t){return LL(cz(e),t)});const kle=Tle;var Lle=ht(function(e){var t=e<0?1:e+1;return Te(t,function(){return od(e,arguments)})});const Xz=Lle;var Dle=Ft(function(e,t,n){return e(t(n))});const Ile=Dle;var Rle=ve(function(e,t){return typeof e["fantasy-land/of"]=="function"?e["fantasy-land/of"](t):typeof e.of=="function"?e.of(t):[t]});const yC=Rle;var Ele=ve(function(e,t){for(var n={},r={},s=0,o=e.length;s<o;)r[e[s]]=1,s+=1;for(var a in t)r.hasOwnProperty(a)||(n[a]=t[a]);return n});const Nle=Ele;var Ale=N1(4,[],function(e,t,n,r){return e(t(n),t(r))});const Ple=Ale;var Mle=ht(function(e){var t=!1,n;return sd(e.length,function(){return t||(t=!0,n=e.apply(this,arguments)),n})});const Ole=Mle;function Yz(i,e){if(e==null||!B_(e.then))throw new TypeError("`"+i+"` expected a Promise, received "+GF(e,[]))}var Fle=ve(function(e,t){return Yz("otherwise",t),t.then(null,e)});const Ble=Fle;var Qz=function(i){return{value:i,map:function(e){return Qz(e(i))}}},Wle=Ft(function(e,t,n){return e(function(r){return Qz(t(r))})(n).value});const zL=Wle;var Vle=ve(function(e,t){return[e,t]});const Hle=Vle;function Jz(i){return ve(function(e,t){return sd(Math.max(0,e.length-t.length),function(){return e.apply(this,i(t,arguments))})})}var Ule=Jz(ja);const _4=Ule;var jle=Jz(as(ja));const zle=jle;var $le=Bz([A1,P1]);const Kle=$le;var qle=Ft(function(e,t,n){return Jn(Ba(t,n),e)});const e$=qle;var Gle=Ft(function(e,t,n){return mC(e,Ba(t,n))});const $L=Gle;var Zle=Ft(function(e,t,n){return e(Ba(t,n))});const cu=Zle;var Xle=ve(function(e,t){for(var n={},r=0;r<e.length;)e[r]in t&&(n[e[r]]=t[e[r]]),r+=1;return n});const Yle=Xle;var Qle=ve(function(e,t){for(var n={},r=0,s=e.length;r<s;){var o=e[r];n[o]=t[o],r+=1}return n});const t$=Qle;var Jle=ve(function(e,t){var n={};for(var r in t)e(t[r],r,t)&&(n[r]=t[r]);return n});const n$=Jle;var ece=ve(function(e,t){return ja([e],t)});const i$=ece;var tce=oo(Zz,1);const nce=tce;var ice=ve(function(e,t){return Te(t.length,function(){for(var n=[],r=0;r<t.length;)n.push(t[r].call(this,arguments[r])),r+=1;return e.apply(this,n.concat(Array.prototype.slice.call(arguments,t.length)))})});const df=ice;var rce=df(yg,[t$,jl]);const sce=rce;function r$(i,e,t){return function(n){return e(t(i(n)))}}var oce=function(){function i(e,t,n){this.xf=n,this.f=e,this.g=t}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=mn.result,i.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,r$(this.f,this.g,t))},i}();function ace(i,e){return function(t){return new oce(i,e,t)}}var lce=Ft(Fi(["fantasy-land/promap","promap"],ace,r$));const cce=lce;var dce=Ft(function(e,t,n){return Jn(e,Nl(t,n))});const s$=dce;var uce=Ft(function(e,t,n){return Fz(e,Nl(t,n))});const hce=uce;var fce=Ft(function(e,t,n){return mC(e,Nl(t,n))});const qN=fce;var gce=Ft(function(e,t,n){return e(Nl(t,n))});const pce=gce;var mce=ve(function(e,t){return e.map(function(n){return Ba([n],t)})});const o$=mce;var _ce=ve(function(e,t){if(!(KN(e)&&KN(t)))throw new TypeError("Both arguments to range must be numbers");for(var n=[],r=e;r<t;)n.push(r),r+=1;return n});const a$=_ce;var bce=Ft(function(e,t,n){for(var r=n.length-1;r>=0;){if(t=e(n[r],t),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r-=1}return t});const KL=bce;var vce=N1(4,[],function(e,t,n,r){var s=DL(function(o,a){return e(o,a)?t(o,a):mu(o)});return kp(s,n,r)});const yce=vce;var Cce=ht(mu);const l$=Cce;var wce=ve(function(e,t){var n=Number(t),r=0,s;if(n<0||isNaN(n))throw new RangeError("n must be a non-negative number");for(s=[];r<n;)s.push(e(r)),r+=1;return s});const c$=wce;var Sce=ve(function(e,t){return c$(ad(e),t)});const xce=Sce;var Tce=Ft(function(e,t,n){return n.replace(e,t)});const CC=Tce;var u7="@@transducer/init",kR="@@transducer/step",kce=function(){function i(e,t,n){this.xf=n,this.f=e,this.acc=t}return i.prototype[u7]=function(){return this.xf[kR](this.xf[u7](),this.acc)},i.prototype["@@transducer/result"]=mn.result,i.prototype[kR]=function(e,t){return e["@@transducer/reduced"]?e:(this.acc=this.f(this.acc,t),this.xf[kR](e,this.acc))},i}(),Lce=Ft(function(e,t,n){return new kce(e,t,n)});const Dce=Lce;var Ice=Ft(Fi([],Dce,function(e,t,n){for(var r=0,s=n.length,o=[t];r<s;)t=e(t,n[r]),o[r+1]=t,r+=1;return o}));const Rce=Ice;var Ece=ve(function(e,t){var n=typeof e["fantasy-land/of"]=="function"?e["fantasy-land/of"]:typeof e.of=="function"?e.of:e,r={"fantasy-land/of":n};return typeof t["fantasy-land/traverse"]=="function"?t["fantasy-land/traverse"](r,Bg):typeof t.traverse=="function"?t.traverse(r,Bg):KL(function(s,o){return fC(Li(i$,s),o)},n([]),t)});const d$=Ece;var Nce=Ft(function(e,t,n){return zL(e,ad(t),n)});const Ace=Nce;var Pce=ve(function(e,t){return Array.prototype.slice.call(t,0).sort(e)});const b4=Pce;var Mce=ve(function(e,t){return Array.prototype.slice.call(t,0).sort(function(n,r){var s=e(n),o=e(r);return s<o?-1:s>o?1:0})});const Oce=Mce;var Fce=ve(function(e,t){return Array.prototype.slice.call(t,0).sort(function(n,r){for(var s=0,o=0;s===0&&o<e.length;)s=e[o](n,r),o+=1;return s})});const u$=Fce;var Bce=Fo(1,"split");const v4=Bce;var Wce=ve(function(e,t){return[no(0,e,t),no(e,Hc(t),t)]});const Vce=Wce;var Hce=ve(function(e,t){if(e<=0)throw new Error("First argument to splitEvery must be a positive integer");for(var n=[],r=0;r<t.length;)n.push(no(r,r+=e,t));return n});const Uce=Hce;var jce=ve(function(e,t){for(var n=0,r=t.length,s=[];n<r&&!e(t[n]);)s.push(t[n]),n+=1;return[s,Array.prototype.slice.call(t,n)]});const zce=jce;var $ce=N1(2,[],function(e,t){for(var n=[],r=[],s=0;s<t.length;s=s+1)e(t[s])||r.push(t[s]),(s<t.length-1&&e(t[s+1])||s===t.length-1)&&r.length>0&&(n.push(r),r=[]);return n});const Kce=$ce;var qce=ve(function(i,e){return Jn(s4(i.length,e),i)});const Gce=qce;var Zce=ve(function(e,t){return Number(e)-Number(t)});const h$=Zce;var Xce=function(i,e,t){var n=yz(t),r=Object.getOwnPropertyNames(n);if(r.includes(i)&&r.includes(e)){var s=n[i];n[i]=n[e],n[e]=s}return n},f$=function(i,e,t){var n=t.length,r=t.slice(),s=i<0?n+i:i,o=e<0?n+e:e,a=Math.min(s,o),l=Math.max(s,o);return s<0||s>n||o<0||o>n||s===o||(r=[].concat(r.slice(0,a)).concat([r[l]]).concat(r.slice(a+1,l)).concat([r[a]]).concat(r.slice(l+1,n))),r},Yce=function(i,e,t){var n=f$(i,e,t);return is(n)?n.join(""):n},Qce=Ft(function(i,e,t){return is(t)?f$(i,e,t):Fg(t)?Yce(i,e,t):Xce(i,e,t)});const Jce=Qce;var ede=ve(function(e,t){return O1(jN(e,t),jN(t,e))});const tde=ede;var nde=Ft(function(e,t,n){return O1(zN(e,t,n),zN(e,n,t))});const ide=nde;var rde=ve(function(e,t){for(var n=t.length-1;n>=0&&e(t[n]);)n-=1;return no(n+1,1/0,t)});const sde=rde;var ode=function(){function i(e,t){this.xf=t,this.f=e}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=mn.result,i.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):mu(e)},i}();function ade(i){return function(e){return new ode(i,e)}}var lde=ve(Fi(["takeWhile"],ade,function(e,t){for(var n=0,r=t.length;n<r&&e(t[n]);)n+=1;return no(0,n,t)}));const cde=lde;var dde=function(){function i(e,t){this.xf=t,this.f=e}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=mn.result,i.prototype["@@transducer/step"]=function(e,t){return this.f(t),this.xf["@@transducer/step"](e,t)},i}();function ude(i){return function(e){return new dde(i,e)}}var hde=ve(Fi([],ude,function(e,t){return e(t),t}));const g$=hde;function fde(i){return Object.prototype.toString.call(i)==="[object RegExp]"}var gde=ve(function(e,t){if(!fde(e))throw new TypeError("‘test’ requires a value of type RegExp as its first argument; received "+ta(e));return vz(e).test(t)});const p$=gde;var pde=ve(function(e,t){return Yz("andThen",t),t.then(e)});const mde=pde;var _de=Fo(0,"toLowerCase");const bde=_de;var vde=ht(function(e){var t=[];for(var n in e)Ur(n,e)&&(t[t.length]=[n,e[n]]);return t});const y4=vde;var yde=ht(function(e){var t=[];for(var n in e)t[t.length]=[n,e[n]];return t});const Cde=yde;var wde=Fo(0,"toUpperCase");const Sde=wde;var xde=Te(4,function(e,t,n,r){return kp(e(typeof t=="function"?DL(t):t),n,r)});const Tde=xde;var kde=ht(function(e){for(var t=0,n=[];t<e.length;){for(var r=e[t],s=0;s<r.length;)typeof n[s]>"u"&&(n[s]=[]),n[s].push(r[s]),s+=1;t+=1}return n});const m$=kde;var Lde=Ft(function(e,t,n){var r=typeof e["fantasy-land/of"]=="function"?e["fantasy-land/of"]:typeof e.of=="function"?e.of:e,s={"fantasy-land/of":r};return typeof n["fantasy-land/traverse"]=="function"?n["fantasy-land/traverse"](s,t):typeof n.traverse=="function"?n.traverse(s,t):d$(s,Li(t,n))});const _$=Lde;var _b=`	
\v\f\r                　\u2028\u2029\uFEFF`,Dde="​",Ide=typeof String.prototype.trim=="function",Rde=ht(!Ide||_b.trim()||!Dde.trim()?function(e){var t=new RegExp("^["+_b+"]["+_b+"]*"),n=new RegExp("["+_b+"]["+_b+"]*$");return e.replace(t,"").replace(n,"")}:function(e){return e.trim()});const Ede=Rde;var Nde=ve(function(e,t){return sd(e.length,function(){try{return e.apply(this,arguments)}catch(n){return t.apply(this,ja([n],arguments))}})});const Ade=Nde;var Pde=ht(function(e){return function(){return e(Array.prototype.slice.call(arguments,0))}});const b$=Pde;var Mde=ht(function(e){return gC(1,e)});const v$=Mde;var Ode=ve(function(e,t){return Te(e,function(){for(var n=1,r=t,s=0,o;n<=e&&typeof r=="function";)o=n===e?arguments.length:s+r.length,r=r.apply(this,Array.prototype.slice.call(arguments,s,o)),n+=1,s=o;return r})});const Fde=Ode;var Bde=ve(function(e,t){for(var n=e(t),r=[];n&&n.length;)r[r.length]=n[0],n=e(n[1]);return r});const Wde=Bde;var Vde=ve(_u(vC,ja));const Hde=Vde;var Ude=function(){function i(e,t){this.xf=t,this.pred=e,this.items=[]}return i.prototype["@@transducer/init"]=mn.init,i.prototype["@@transducer/result"]=mn.result,i.prototype["@@transducer/step"]=function(e,t){return Og(this.pred,t,this.items)?e:(this.items.push(t),this.xf["@@transducer/step"](e,t))},i}();function jde(i){return function(e){return new Ude(i,e)}}var zde=ve(Fi([],jde,function(i,e){for(var t=0,n=e.length,r=[],s;t<n;)s=e[t],Og(i,s,r)||(r[r.length]=s),t+=1;return r}));const C4=zde;var $de=Ft(function(e,t,n){return C4(e,ja(t,n))});const Kde=$de;var qde=Ft(function(e,t,n){return e(n)?n:t(n)});const Gde=qde;var Zde=bz(Bg);const Xde=Zde;var Yde=Ft(function(e,t,n){for(var r=n;!e(r);)r=t(r);return r});const Qde=Yde;var Jde=ve(function(i,e){return i in e&&is(e[i])?yg(function(t){return QF(i,t,e)},e[i]):[e]});const eue=Jde;var tue=ht(function(e){var t,n=[];for(t in e)n[n.length]=e[t];return n});const nue=tue;var iue=function(i){return{value:i,"fantasy-land/map":function(){return this}}},rue=ve(function(e,t){return e(iue)(t).value});const qL=rue;var sue=Ft(function(e,t,n){return e(n)?t(n):n});const Dp=sue;var oue=ve(function(e,t){for(var n in e)if(Ur(n,e)&&!e[n](t[n]))return!1;return!0});const y$=oue;var aue=ve(function(e,t){for(var n in e)if(Ur(n,e)&&e[n](t[n]))return!0;return!1});const lue=aue;var cue=ve(function(e,t){return y$(Li(Jn,e),t)});const due=cue;var uue=ve(function(e,t){for(var n=new _C,r=0;r<e.length;r+=1)n.add(e[r]);return P1(n.has.bind(n),t)});const wC=uue;var hue=ve(function(e,t){return!!(!e^!t)});const fue=hue;var gue=ve(function(e,t){for(var n=0,r=e.length,s,o=t.length,a=[];n<r;){for(s=0;s<o;)a[a.length]=[e[n],t[s]],s+=1;n+=1}return a});const pue=gue;var mue=ve(function(e,t){for(var n=[],r=0,s=Math.min(e.length,t.length);r<s;)n[r]=[e[r],t[r]],r+=1;return n});const C$=mue;var _ue=ve(function(e,t){for(var n=0,r=Math.min(e.length,t.length),s={};n<r;)s[e[n]]=t[n],n+=1;return s});const bue=_ue;var vue=Ft(function(e,t,n){for(var r=[],s=0,o=Math.min(t.length,n.length);s<o;)r[s]=e(t[s],n[s]),s+=1;return r});const yue=vue;var Cue=ht(function(e){return Te(e.length,function(){var n=arguments;return function(){return e.apply(this,n)}})});const wue=Cue,w4=Object.freeze(Object.defineProperty({__proto__:null,F:qne,T:Zne,__:Mg,add:kL,addIndex:xp,addIndexRight:eie,adjust:oz,all:LL,allPass:ZF,always:ad,and:XF,andThen:mde,any:Vie,anyPass:hC,ap:fC,aperture:Xie,append:YF,apply:M1,applySpec:tre,applyTo:ire,ascend:fz,assoc:e4,assocPath:JF,binary:dre,bind:Er,both:yi,call:pre,chain:bz,clamp:xre,clone:yz,collectBy:Ire,comparator:t4,complement:jt,compose:_u,composeWith:Hre,concat:O1,cond:zre,construct:Gre,constructN:Sz,converge:Lp,count:Yre,countBy:nse,curry:zt,curryN:Te,dec:rse,defaultTo:mC,descend:ase,difference:jN,differenceWith:zN,dissoc:mse,dissocPath:r4,divide:xz,drop:Tz,dropLast:Dse,dropLastWhile:kz,dropRepeats:Fse,dropRepeatsBy:Vse,dropRepeatsWith:l4,dropWhile:Lz,either:ld,empty:d4,endsWith:Xse,eqBy:$N,eqProps:Qse,equals:Jn,evolve:eoe,filter:A1,find:Iz,findIndex:aoe,findLast:uoe,findLastIndex:poe,flatten:_oe,flip:as,forEach:yoe,forEachObjIndexed:woe,fromPairs:u4,groupBy:Toe,groupWith:Loe,gt:OL,gte:FL,has:eT,hasIn:tT,hasPath:Rz,head:PL,identical:Bi,identity:jl,ifElse:bC,inc:Moe,includes:BL,indexBy:Boe,indexOf:Voe,init:Nz,innerJoin:joe,insert:Az,insertAll:Koe,intersection:Mz,intersperse:Joe,into:aae,invert:cae,invertObj:uae,invoker:Fo,is:Fz,isEmpty:F1,isNil:Vc,isNotNil:mae,join:h4,juxt:Bz,keys:$r,keysIn:yae,last:a4,lastIndexOf:wae,length:Hc,lens:VL,lensIndex:Vz,lensPath:Uz,lensProp:Eae,lift:EL,liftN:gz,lt:HL,lte:UL,map:Li,mapAccum:Mae,mapAccumRight:Fae,mapObjIndexed:Wae,match:Hae,mathMod:jae,max:Tp,maxBy:$ae,mean:zz,median:Zae,memoizeWith:Yae,mergeAll:f4,mergeDeepLeft:nle,mergeDeepRight:$z,mergeDeepWith:sle,mergeDeepWithKey:jL,mergeLeft:Kz,mergeRight:p4,mergeWith:cle,mergeWithKey:g4,min:qz,minBy:hle,modify:mle,modifyPath:Gz,modulo:m4,move:vle,multiply:Zz,nAry:gC,negate:xle,none:kle,not:Cz,nth:od,nthArg:Xz,o:Ile,objOf:Oz,of:yC,omit:Nle,on:Ple,once:Ole,or:c4,otherwise:Ble,over:zL,pair:Hle,partial:_4,partialObject:wle,partialRight:zle,partition:Kle,path:Ba,pathEq:e$,pathOr:$L,pathSatisfies:cu,paths:Hz,pick:Yle,pickAll:t$,pickBy:n$,pipe:sn,pipeWith:wz,pluck:dC,prepend:i$,product:nce,project:sce,promap:cce,prop:Nl,propEq:s$,propIs:hce,propOr:qN,propSatisfies:pce,props:o$,range:a$,reduce:oo,reduceBy:ML,reduceRight:KL,reduceWhile:yce,reduced:l$,reject:P1,remove:i4,repeat:xce,replace:CC,reverse:AL,scan:Rce,sequence:d$,set:Ace,slice:no,sort:b4,sortBy:Oce,sortWith:u$,split:v4,splitAt:Vce,splitEvery:Uce,splitWhen:zce,splitWhenever:Kce,startsWith:Gce,subtract:h$,sum:jz,swap:Jce,symmetricDifference:tde,symmetricDifferenceWith:ide,tail:n4,take:s4,takeLast:Dz,takeLastWhile:sde,takeWhile:cde,tap:g$,test:p$,thunkify:wue,times:c$,toLower:bde,toPairs:y4,toPairsIn:Cde,toString:ta,toUpper:Sde,transduce:Tde,transpose:m$,traverse:_$,trim:Ede,tryCatch:Ade,type:Kr,unapply:b$,unary:v$,uncurryN:Fde,unfold:Wde,union:Hde,unionWith:Kde,uniq:vC,uniqBy:Pz,uniqWith:C4,unless:Gde,unnest:Xde,until:Qde,unwind:eue,update:Wz,useWith:df,values:RL,valuesIn:nue,view:qL,when:Dp,where:y$,whereAny:lue,whereEq:due,without:wC,xor:fue,xprod:pue,zip:C$,zipObj:bue,zipWith:yue},Symbol.toStringTag,{value:"Module"}));var Sue=ad(void 0);const SC=Sue;var xue=Jn(SC());const xC=xue;var Tue=jt(xC);const f0=Tue;var kue=Jn(null);const GL=kue;var Lue=jt(GL);const S4=Lue;var Due=jt(Vc);const x4=Due;var Iue=Te(1,sn(Kr,Bi("GeneratorFunction")));const T4=Iue;var Rue=Te(1,sn(Kr,Bi("AsyncFunction")));const k4=Rue;var Eue=hC([sn(Kr,Bi("Function")),T4,k4]);const Mn=Eue;var Nue=Te(1,Mn(Array.isArray)?Array.isArray:sn(Kr,Bi("Array")));const uf=Nue;var Aue=Te(1,function(i){return typeof Symbol>"u"?!1:tT(Symbol.iterator,Object(i))&&Mn(i[Symbol.iterator])});const L4=Aue;var Pue=yi(uf,F1);const w$=Pue;var Mue=jt(uf);const S$=Mue;var Oue=jt(F1);const ZL=Oue;var Fue=yi(uf,ZL);const x$=Fue;var Bue=Te(1,sn(Kr,Bi("Boolean")));const D4=Bue;var Wue=jt(D4);const Vue=Wue;var Hue=Te(1,ld(Vc,F1));const T$=Hue;var Uue=Te(1,sn(Kr,Bi("String")));const hf=Uue;var jue=Jn("");const zue=jue;var $ue=jt(hf);const Kue=$ue;function GN(i){"@babel/helpers - typeof";return GN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GN(i)}var que=function(e){return GN(e)==="object"};const k$=que;var Gue=Te(1,yi(S4,ld(k$,Mn)));const g0=Gue;var Zue=jt(g0);const nT=Zue;var Xue=ZF([hf,nT,ZL]);const Yue=Xue;function ZN(i){"@babel/helpers - typeof";return ZN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZN(i)}var Que=Te(1,function(i){return uf(i)?!0:!i||hf(i)||ZN(i)!=="object"?!1:i.nodeType===1?!!i.length:i.length===0?!0:i.length>0?eT(0,i)&&eT(i.length-1,i):!1});const I4=Que;var Jue=jt(I4);const ehe=Jue;var the=jt(T4);const nhe=the;var ihe=jt(k4);const rhe=ihe;var she=jt(Mn);const R4=she;var ohe=Te(1,yi(S4,k$));const iT=ohe;var ahe=jt(iT);const h7=ahe;var lhe=sn(Kr,Bi("Object")),che=sn(ta,Jn(ta(Object))),dhe=cu(yi(Mn,che),["constructor"]),uhe=Te(1,function(i){if(!iT(i)||!lhe(i))return!1;var e=Object.getPrototypeOf(i);return GL(e)?!0:dhe(e)});const XN=uhe;var hhe=jt(XN);const f7=hhe;var fhe=Te(1,sn(Kr,Bi("Date")));const E4=fhe;var ghe=jt(E4);const phe=ghe;var mhe=Te(1,sn(Kr,Bi("Number")));const cd=mhe;var _he=yi(cd,isNaN);const bhe=_he;var vhe=Te(1,bhe),yhe=Mn(Number.isNaN)?Te(1,Number.isNaN):vhe;const L$=yhe;var Che=jt(L$);const D$=Che;var whe=Te(1,yi(E4,sn(Fo(0,"getTime"),D$)));const I$=whe;var She=jt(I$);const g7=She;var xhe=jt(cd);const The=xhe;var khe=yi(cd,HL(0));const Lhe=khe;var Dhe=Te(1,yi(cd,OL(0)));const N4=Dhe;var Ihe=Te(1,Bi(0));const Rhe=Ihe;var Ehe=Te(1,Bi(-0));const Nhe=Ehe;var Ahe=jt(T$);const Phe=Ahe;var Mhe=Te(1,yi(cd,as(UL)(0)));const Ohe=Mhe;var Fhe=Te(1,yi(cd,as(FL)(0)));const R$=Fhe;var Bhe=Te(1,sn(Kr,Bi("Map")));const E$=Bhe;var Whe=jt(E$);const Vhe=Whe;var Hhe=yi(cd,isFinite);const Uhe=Hhe;var jhe=Te(1,Uhe),zhe=Mn(Number.isFinite)?Te(1,Er(Number.isFinite,Number)):jhe;const TC=zhe;var $he=jt(TC);const N$=$he;var Khe=yi(TC,Lp(Jn,[Math.floor,jl]));const qhe=Khe;var Ghe=Te(1,qhe),Zhe=Mn(Number.isInteger)?Te(1,Er(Number.isInteger,Number)):Ghe;const bu=Zhe;var Xhe=Te(1,function(i){return i>>0});const YN=Xhe;var Yhe=Te(1,function(i){return YN(i)===i});const QN=Yhe;var Qhe=Te(1,function(i){return i>>>0});const JN=Qhe;var Jhe=Te(1,function(i){return JN(i)===i});const p7=Jhe;var efe=jt(bu);const tfe=efe;var nfe=Te(1,sn(Kr,Bi("BigInt")));const A$=nfe;var ife=yi(TC,jt(bu));const A4=ife;var rfe=Te(1,jt(A4));const sfe=rfe;var ofe=Te(1,ld(bu,A4));const P$=ofe;var afe=jt(P$);const lfe=afe;var cfe=Te(1,yi(bu,sn(as(m4)(2),jt(Jn)(0))));const M$=cfe;var dfe=Te(1,yi(bu,jt(M$)));const ufe=dfe;var hfe=Te(1,yi(uf,sn(Hc,Jn(2))));const O$=hfe;var ffe=jt(O$);const gfe=ffe;var pfe=cu(Mn,["then"]);const mfe=pfe;var _fe=Te(1,yi(g0,sn(ta,Jn("[object Promise]"))));const bfe=_fe;var vfe=Te(1,Bi(!0));const F$=vfe;var yfe=Te(1,Bi(!1));const B$=yfe;var Cfe=Te(1,Boolean);const P4=Cfe;var wfe=jt(P4);const W$=wfe;var Sfe=Te(1,sn(Kr,Bi("RegExp")));const M4=Sfe;var xfe=jt(M4);const Tfe=xfe;var kfe=Te(1,sn(Kr,Bi("Set")));const V$=kfe;var Lfe=jt(V$);const Dfe=Lfe;var Ife=yi(uf,Lp(jt(Bi),[sn(RL,Hc),Hc]));const Rfe=Ife;function rT(i){"@babel/helpers - typeof";return rT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rT(i)}var Efe=Te(1,function(i){return rT(i)==="symbol"||rT(i)==="object"&&Kr(i)==="Symbol"});const O4=Efe;var Nfe=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;const Afe=Nfe;var Pfe=yi(bu,function(i){return Math.abs(i)<=Afe});const Mfe=Pfe;var Ofe=Te(1,Mfe),Ffe=Mn(Number.isSafeInteger)?Te(1,Er(Number.isSafeInteger,Number)):Ofe;const Bfe=Ffe;var Wfe=Te(1,ld(hf,uf));const Vfe=Wfe;var Hfe=Te(1,sn(Kr,Bi("Error")));const Ufe=Hfe;var jfe=Te(1,yi(bu,jt(N4)));const zfe=jfe;var $fe=yi(nT,hC([hf,cd,A$,D4,xC,GL,O4]));const H$=$fe;var Kfe=Te(1,jt(H$));const qfe=Kfe;var Gfe=Te(1,function(i){return QN(i)&&~i===0});const Zfe=Gfe;var Xfe=hC([B$,Vc,F1,p$(/^\s+$/gm)]);const Yfe=Xfe;var Qfe=ad(null);const Jfe=Qfe;var ege=function(){return{}};const m7=ege;var tge=ad("");const nge=tge;var ige=function(){return[]};const rge=ige;var sge=ad(SC());const oge=sge;var Lv="fantasy-land/equals",tx="fantasy-land/lte",a_="fantasy-land/concat",_7="fantasy-land/empty",Dv="fantasy-land/map",b7="fantasy-land/contramap",Iv="fantasy-land/ap",F4="fantasy-land/of",nx="fantasy-land/chain",age=ld(cu(Mn,["map"]),cu(Mn,[Dv])),v7=yi(age,ld(cu(Mn,["ap"]),cu(Mn,[Iv]))),lge=Te(2,function(i,e){if(!v7(i)||!v7(e))return fC(i,e);try{return i.ap(e)}catch{return e.ap(i)}});const cge=lge;var dge=zt(function(i,e){var t=Te(i,e);return Te(i,function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];var o=Li(t,PL(r)),a=no(1,1/0,r);return oo(cge,o,a)})});const U$=dge;var uge=Te(1,function(i){return U$(i.length,i)});const hge=uge;var fge=zt(function(i,e,t){if(Mn(t.matchWith))return t.matchWith({Ok:function(o){var a=o.value;return e(a)},Error:function(o){var a=o.value;return i(a)},Just:function(o){var a=o.value;return e(a)},Nothing:function(){return i(void 0)},Success:function(o){var a=o.value;return e(a)},Failure:function(o){var a=o.value;return i(a)}});if(Mn(t.cata))return t.cata(i,e);if(Mn(t.getOrElse)){var n="RA.cata".concat(Math.random()),r=t.getOrElse(n);return r===n?i():e(r)}return t.either(i,e)});const gge=fge;var pge=Te(2,function(i,e){return Te(i.length,function(){return i.apply(void 0,arguments).run(e)})});const mge=pge;var _ge=Te(2,function(i,e){return Te(i.length,function(){return i.apply(void 0,arguments).run(e())})});const bge=_ge;var vge=Te(2,function(i,e){return Te(i,function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.apply(this,AL(r))})});const j$=vge;var yge=Lp(j$,[Hc,jl]);const Cge=yge;var wge=Te(1,Er(Promise.all,Promise));const B1=wge;var Sge=Fo(1,"catch");const xge=Sge;var Tge=Er(Promise.reject,Promise);const XL=Tge;var kge=Er(Promise.resolve,Promise);const Al=kge;var Lge=Te(1,sn(Li(Al),Li(function(i){return i.then(XL,Al)}),B1));const Dge=Lge;var z$=zt(function(i,e){var t,n;return bu(e)&&R$(e)?t=e:(t=qN(0,"timeout",e),n=qN(n,"value",e)),new Promise(function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];var a=i(s);setTimeout(_4(a,[n]),t)})}),$$=z$(od(0));$$.reject=z$(od(1));const Ige=$$;var Rge=Fo(2,"then");const Ege=Rge;function Nge(i){return Oge(i)||Mge(i)||Pge(i)||Age()}function Age(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pge(i,e){if(i){if(typeof i=="string")return e2(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return e2(i,e)}}function Mge(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Oge(i){if(Array.isArray(i))return e2(i)}function e2(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}var Fge=function(e){return{status:"fulfilled",value:e}},Bge=function(e){return{status:"rejected",reason:e}},Wge=function(e){var t=Li(function(n){return Al(n).then(Fge).catch(Bge)},Nge(e));return B1(t)};const Vge=Wge;var Hge=Te(1,Vge),Uge=Mn(Promise.allSettled)?Te(1,Er(Promise.allSettled,Promise)):Hge;const jge=Uge;var zge=Te(1,function(i){return function(e){return e(e)}(function(e){return i(function(t){return e(e)(t)})})});const $ge=zge;var Kge=zt(function(i,e){return g$(function(t){return Li(function(n){return n(t)})(i)})(e)});const y7=Kge;function qge(i){return Yge(i)||Xge(i)||Zge(i)||Gge()}function Gge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zge(i,e){if(i){if(typeof i=="string")return t2(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return t2(i,e)}}function Xge(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Yge(i){if(Array.isArray(i))return t2(i)}function t2(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}var Qge=t4(function(i,e){return i.length>e.length}),Jge=sn(b4(Qge),PL,Nl("length")),epe=zt(function(i,e,t){var n=t.apply(void 0,qge(i));return x4(n)?l$(n):e}),tpe=function(e){var t=Jge(e);return Te(t,function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return oo(epe(r),void 0,e)})},npe=bC(x$,tpe,SC);const ipe=npe;var rpe=Te(1,function(i){function e(){var t=Er(i,this).apply(void 0,arguments),n=function r(s){var o=Al(s.value);return s.done?o:o.then(function(a){return r(t.next(a))},function(a){return r(t.throw(a))})};try{return n(t.next())}catch(r){return XL(r)}}return i.length>0?Te(i.length,e):e});const spe=rpe;function W_(i){"@babel/helpers - typeof";return W_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W_(i)}function ope(i){return dpe(i)||cpe(i)||lpe(i)||ape()}function ape(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lpe(i,e){if(i){if(typeof i=="string")return n2(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return n2(i,e)}}function cpe(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function dpe(i){if(Array.isArray(i))return n2(i)}function n2(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function C7(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,hpe(n.key),n)}}function upe(i,e,t){return e&&C7(i.prototype,e),t&&C7(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function hpe(i){var e=fpe(i,"string");return W_(e)==="symbol"?e:String(e)}function fpe(i,e){if(W_(i)!=="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(W_(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function gpe(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function ppe(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&p0(i,e)}function mpe(i){var e=K$();return function(){var n=m0(i),r;if(e){var s=m0(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return _pe(this,r)}}function _pe(i,e){if(e&&(W_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bpe(i)}function bpe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function i2(i){var e=typeof Map=="function"?new Map:void 0;return i2=function(n){if(n===null||!vpe(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,r)}function r(){return ix(n,arguments,m0(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),p0(r,n)},i2(i)}function ix(i,e,t){return K$()?ix=Reflect.construct.bind():ix=function(r,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(r,a),c=new l;return o&&p0(c,o.prototype),c},ix.apply(null,arguments)}function K$(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function vpe(i){return Function.toString.call(i).indexOf("[native code]")!==-1}function p0(i,e){return p0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},p0(i,e)}function m0(i){return m0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m0(i)}var ype=function(i){ppe(t,i);var e=mpe(t);function t(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return gpe(this,t),n=e.call(this,s),n.errors=r,n}return upe(t)}(i2(Error)),Cpe=function(e){var t=[];return new Promise(function(n,r){var s=function(a){t.push(a),t.length===e.length&&r(new ype(t))};Li(function(o){return Al(o).then(n).catch(s)},ope(e))})};const wpe=Cpe;var Spe=Te(1,wpe),xpe=Mn(Promise.any)?Te(1,Er(Promise.any,Promise)):Spe;const w7=xpe;var Tpe=zt(function(i,e,t){return _u(i(e),Hc)(t)});const W1=Tpe;var kpe=W1(Jn);const _0=kpe;var Lpe=W1(as(FL));const q$=Lpe;function Dpe(i){return Npe(i)||Epe(i)||Rpe(i)||Ipe()}function Ipe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rpe(i,e){if(i){if(typeof i=="string")return r2(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return r2(i,e)}}function Epe(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Npe(i){if(Array.isArray(i))return r2(i)}function r2(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}var Ape=Te(1,function(i){var e=[],t=[],n=Er(e.push,e),r=Er(t.push,t),s=Li(function(o){return Al(o).then(n).catch(r)},Dpe(i));return B1(s).then(function(){if(!(_0(0,e)&&_0(0,t)))return q$(1,e)?a4(e):XL(t)})});const Ppe=Ape;var Mpe=zt(function(i,e,t){return i(t)?e:t});const G$=Mpe;var Ope=xp(Li);const Z$=Ope;var Fpe=zt(function(i,e){return Te(i.length,function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var s=Z$(function(o,a){return G$(Vc,e[a],o)},n);return M1(i,s)})});const Bpe=Fpe;var Wpe=xp(oo);const Vpe=Wpe;var Hpe=xp(A1);const Upe=Hpe;var jpe=xp(A1),zpe=zt(function(i,e,t){return BL(t,i)}),$pe=zt(function(i,e){return jpe(zpe(i),e)});const Kpe=$pe;var qpe=b$(jl);const X$=qpe;var Gpe=Dp(S$,yC(Array));const Zpe=Gpe;var S7={concat:jl},Xpe=sn(oo(O1,S7),Dp(Bi(S7),SC));const Ype=Xpe;var Qpe=as(O1);const Jpe=Qpe;function eme(i,e){return rme(i)||ime(i,e)||nme(i,e)||tme()}function tme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nme(i,e){if(i){if(typeof i=="string")return x7(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return x7(i,e)}}function x7(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function ime(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function rme(i){if(Array.isArray(i))return i}var sme=Te(3,function(i,e,t){return Al(t).then(function(n){var r=Hc(n);if(r===0)return e;var s=oo(function(o,a){return o.then(function(l){return B1([l,a])}).then(function(l){var c=eme(l,2),d=c[0],u=c[1];return xC(d)&&r===1?u:i(d,u)})});return s(Al(e),n)})});const ome=sme;function ame(i,e){return ume(i)||dme(i,e)||cme(i,e)||lme()}function lme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cme(i,e){if(i){if(typeof i=="string")return T7(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return T7(i,e)}}function T7(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function dme(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function ume(i){if(Array.isArray(i))return i}var hme=sn(KL(O1,""),Jn("ba"))(["a","b"]),fme=Te(3,function(i,e,t){return Al(t).then(function(n){var r=Hc(n);if(r===0)return e;var s=KL(function(o,a){var l,c;return hme?(l=o,c=a):(l=a,c=o),l.then(function(d){return B1([d,c])}).then(function(d){var u=ame(d,2),h=u[0],f=u[1];return xC(h)&&r===1?f:i(f,h)})});return s(Al(e),n)})});const gme=fme;var pme=no(Mg,1/0);const mme=pme;var _me=no(0);const bme=_me;var vme=xp(P1),yme=zt(function(i,e,t){return BL(t,i)}),Cme=zt(function(i,e){return vme(yme(i),e)});const wme=Cme;var Sme=P1(W$);const xme=Sme;var Tme=as(YF);const kme=Tme;var Lme=as(BL);const B4=Lme;var Dme=zt(function(i,e,t){return _u(Az(e,od(i,t)),i4(i,1))(t)});const Ime=Dme;var Rme=W1(as(OL));const Eme=Rme;var Nme=W1(as(HL));const Ame=Nme;var Pme=W1(as(UL));const W4=Pme;var Mme=W1(jt(Jn));const Ome=Mme;var Fme=Te(1,sn(vC,W4(1)));const Bme=Fme;var Wme=function(e,t){var n=Number(t);if(n!==t&&(n=0),N4(n))throw new RangeError("repeat count must be non-negative");if(N$(n))throw new RangeError("repeat count must be less than infinity");if(n=Math.floor(n),e.length===0||n===0)return"";if(e.length*n>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");var r=e.length*n;n=Math.floor(Math.log(n)/Math.log(2));for(var s=e;n;)s+=e,n-=1;return s+=s.substring(0,r-s.length),s};const V4=Wme;var Vme=zt(V4),Hme=as(Fo(1,"repeat")),Ume=Mn(String.prototype.repeat)?Hme:Vme;const jme=Ume;var zme=Te(1,sn(C4(Bi),W4(1)));const $me=zme;var Kme=zt(function(i,e){return LL(Bi(i),e)});const qme=Kme;var Gme=zt(function(i,e){return LL(Jn(i),e)});const Zme=Gme;var Xme=function(e){return function t(n){for(var r,s,o,a=[],l=0;l<n.length;){if(I4(n[l]))for(r=e?t(n[l]):n[l],o=0,s=r.length;o<s;)a[a.length]=r[o],o+=1;else a[a.length]=n[l];l+=1}return a}};const Yme=Xme;function Qme(i){return n_e(i)||t_e(i)||e_e(i)||Jme()}function Jme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e_e(i,e){if(i){if(typeof i=="string")return s2(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return s2(i,e)}}function t_e(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function n_e(i){if(Array.isArray(i))return s2(i)}function s2(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}var i_e=Yme(!1),r_e=zt(function(i,e){for(var t=i,n=Qme(e);t>0;)n=i_e(n),t-=1;return n});const s_e=r_e;function k7(i){return c_e(i)||l_e(i)||a_e(i)||o_e()}function o_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a_e(i,e){if(i){if(typeof i=="string")return o2(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o2(i,e)}}function l_e(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function c_e(i){if(Array.isArray(i))return o2(i)}function o2(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}var d_e=function(e,t,n){var r=f0(n)?Er(t,n):t;return f0(t)?k7(e).map(r):k7(e)},u_e=function(e,t,n){if(e==null)throw new TypeError("Array.from requires an array-like object - not null or undefined");if(x4(t)&&R4(t))throw new TypeError("Array.from: when provided, the second argument must be a function");return L4(e)?d_e(e,t,n):[]};const h_e=u_e;var f_e=Te(1,h_e),g_e=Mn(Array.from)?Te(1,Array.from):f_e,p_e=bC(L4,g_e,RL);const m_e=p_e;var __e=Lp(_0,[Hc,vC]);const Y$=__e;var b_e=jt(Y$);const v_e=b_e;function y_e(i){return x_e(i)||S_e(i)||w_e(i)||C_e()}function C_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w_e(i,e){if(i){if(typeof i=="string")return L7(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return L7(i,e)}}function L7(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function S_e(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function x_e(i){if(Array.isArray(i))return i}var T_e=zt(function(i,e){var t=function(s){var o=y_e(s),a=o[0],l=o.slice(1);return oo(ld,a,l)},n=function(s){return t4(function(o,a){return HL(Nl(s,o),Nl(s,a))})};return b4(t(Li(n,i)),e)});const Q$=T_e;var k_e=YF(Mg,[]),L_e=df(Q$,[k_e,jl]);const D_e=L_e;var I_e=sn(Ba,fz),R_e=Li(I_e),E_e=df(u$,[R_e,jl]);const N_e=E_e;var A_e=zt(function(i,e){return xp(A1)(sn(Xz(1),m4(Mg,i),Bi(0)))(e)});const P_e=A_e;var M_e=Te(1,Er(Math.floor,Math));const J$=M_e;var O_e=Te(3,function(i,e,t){var n=i===0?ad(e):function(s){return e+i*s},r=i===0?t-e:J$((t-e)/i);return Li(n,a$(0,r))});const F_e=O_e;var B_e=zt(function(i,e,t){return sn(Iz(e),mC(i))(t)});const W_e=B_e;var V_e=Te(3,function(i,e,t){var n=Ba(i,t),r=Ba(Nz(i),t);if(!R4(n)&&!w$(i)){var s=Er(n,r);return M1(s,e)}});const H4=V_e;var H_e=H4(Mg,[],Mg);const U_e=H_e;var j_e=zt(function(i,e){return fC([Ba(Mg,e)],i)});const eK=j_e;var z_e=zt(function(i,e){return sn(y4,Li(zL(Vz(0),i)),u4)(e)});const U4=z_e;var $_e=function(e){return function(t){return eT(t,e)?e[t]:t}},K_e=zt(function(i,e){return U4($_e(i),e)});const j4=K_e;function b0(i){"@babel/helpers - typeof";return b0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b0(i)}function q_e(i,e,t){return e=G_e(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function G_e(i){var e=Z_e(i,"string");return b0(e)==="symbol"?e:String(e)}function Z_e(i,e){if(b0(i)!=="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(b0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}var X_e=zt(function(i,e,t){return j4(q_e({},i,e),t)});const Y_e=X_e;var Q_e=zt(function(i,e,t){return U4(Dp(Jn(e),i),t)});const J_e=Q_e;function v0(i){"@babel/helpers - typeof";return v0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v0(i)}function D7(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function I7(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?D7(Object(t),!0).forEach(function(n){e1e(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):D7(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function e1e(i,e,t){return e=t1e(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function t1e(i){var e=n1e(i,"string");return v0(e)==="symbol"?e:String(e)}function n1e(i,e){if(v0(i)!=="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(v0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}var i1e=Te(2,function(i,e){return I7(I7({},e),j4(i,e))});const r1e=i1e;var s1e=Te(2,sn(o$,f4));const o1e=s1e;var a1e=Te(2,sn(eK,f4));const l1e=a1e;var c1e=zt(function(i,e,t){return zL(Uz(i),Kz(e),t)});const tK=c1e;var d1e=zt(function(i,e,t){return tK(yC(Array,i),e,t)});const u1e=d1e;var h1e=df(n$,[jt,jl]);const f1e=h1e;var g1e=Te(3,function(i,e,t){return Dp(Bi(i),_4(v$(i),[t]),$L(i,e,t))});const p1e=g1e;var m1e=Te(3,function(i,e,t){return mC(i,qL(e,t))});const _1e=m1e;var b1e=Te(2,Lp(p4,[r4,$L({})]));const nK=b1e;var v1e=zt(function(i,e){return nK(yC(Array,i),e)});const y1e=v1e;var C1e=zt(function(i,e){return p4(e,$L({},i,e))});const iK=C1e;var w1e=zt(function(i,e){return iK(yC(Array,i),e)});const S1e=w1e;var x1e=Te(2,function(i,e){return sn(y4,Li(sn(as,M1)(i)),m$,Dp(_0(0),function(){return[[],[]]}))(e)});const T1e=x1e;var k1e=Te(3,function(i,e,t){return sn(C$,Li(M1(i)),u4)(t,e)});const L1e=k1e;var D1e=zt(function(i,e){return!!H4(["prototype","isPrototypeOf"],[e],i)});const I1e=D1e;var R1e=Te(3,function(i,e,t){return sn(qL(i),Jn(e))(t)});const rK=R1e;var E1e=jt(rK);const N1e=E1e;var A1e=Te(3,function(i,e,t){return sn(qL(e),i,F$)(t)});const sK=A1e;var P1e=jt(sK);const M1e=P1e;var a2=ld(Ba(["@@type"]),Ba(["constructor","@@type"]));zt(function(i,e){return a2(e)===i});var YL=Te(2,df(Jn,[a2,a2]));jt(YL);function y0(i){"@babel/helpers - typeof";return y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y0(i)}function V1(i,e,t){return e=O1e(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function O1e(i){var e=F1e(i,"string");return y0(e)==="symbol"?e:String(e)}function F1e(i,e){if(y0(i)!=="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(y0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}var B1e=V1({},Dv,function(i){return this.constructor[F4](i(this.value))}),W1e=V1({},Iv,function(i){var e=this;return i.map(function(t){return t(e.value)})}),V1e=V1({},Lv,function(i){return YL(this,i)&&Jn(this.value,i.value)}),H1e=V1({},a_,function(i){var e=this.value;return hf(this.value)||cd(this.value)?e=this.value+i.value:cu(Mn,["value",a_],this)?e=this.value[a_](i.value):cu(Mn,["value","concat"],this)&&(e=this.value.concat(i.value)),this.constructor[F4](e)}),U1e=V1({},nx,function(i){var e=i(this.value);return YL(this,e)?e:this}),j1e=V1({},tx,function(i){return YL(this,i)&&(this.value<i.value||this[Lv](i))});function C0(i){"@babel/helpers - typeof";return C0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C0(i)}function z1e(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function R7(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,K1e(n.key),n)}}function $1e(i,e,t){return e&&R7(i.prototype,e),t&&R7(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function K1e(i){var e=q1e(i,"string");return C0(e)==="symbol"?e:String(e)}function q1e(i,e){if(C0(i)!=="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(C0(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}var G1e=function(i,e,t,n,r,s,o,a,l){function c(d){z1e(this,c),this.value=d}return $1e(c,[{key:"get",value:function(){return this.value}},{key:e,value:function(u){return W1e[Iv].call(this,u)}},{key:"ap",value:function(u){return this[Iv](u)}},{key:t,value:function(u){return B1e[Dv].call(this,u)}},{key:"map",value:function(u){return this[Dv](u)}},{key:n,value:function(u){return V1e[Lv].call(this,u)}},{key:"equals",value:function(u){return this[Lv](u)}},{key:r,value:function(u){return H1e[a_].call(this,u)}},{key:"concat",value:function(u){return this[a_](u)}},{key:s,value:function(u){return U1e[nx].call(this,u)}},{key:"chain",value:function(u){return this[nx](u)}},{key:o,value:function(u){return j1e[tx].call(this,u)}},{key:"lte",value:function(u){return this[tx](u)}},{key:a,value:function(){return this.constructor.of(d4(this.value))}},{key:"empty",value:function(){return this[_7]()}},{key:l,value:function(u){var h=this;return this.constructor.of(function(f){return h.value(u(f))})}},{key:"contramap",value:function(u){return this[b7](u)}}],[{key:i,value:function(u){return new c(u)}},{key:"of",value:function(u){return new c(u)}},{key:"@@type",get:function(){return"RA/Identity"}}]),c}(F4,Iv,Dv,Lv,a_,nx,tx,_7,b7);const oK=G1e;var Z1e=Te(1,function(i){var e=typeof i["fantasy-land/of"]=="function"?i["fantasy-land/of"]:typeof i.of=="function"?i.of:i,t={"fantasy-land/of":e};return zt(function(n,r){return oK.of(_$(t,sn(n,Nl("value")),r))})});const X1e=Z1e;var Y1e=function(e,t){var n=function(s){return e(s)};return n.from=t,n},Q1e=function(e,t){return Y1e(zt(function(n,r){return Li(t,n(e(r)))}),zt(function(n,r){return Li(e,n(t(r)))}))},J1e=zt(function(i,e){return i.from(e)}),aK=zt(Q1e);aK.from=J1e;const ebe=aK;var tbe=jt(s$);const nbe=tbe;var ibe=jt(e$);const rbe=ibe;var sbe=bC(FL,function(){throw new Error("low must not be greater than high in inRange(low, high, value)")},df(yi,[UL,OL]));const obe=zt(function(i,e,t){return sbe(i,e)(t)});var abe=jt(Jn);const lbe=abe;var cbe=Te(2,function(i,e){return F1(i)?!0:sn(Mz,ZL)(i,e)});const dbe=cbe;var ube=zt(_u(jt,yi));const hbe=ube;var fbe=jt(XF);const gbe=fbe;var pbe=zt(_u(jt,ld));const l2=pbe;var mbe=jt(c4);const _be=mbe;var bbe=zt(_u(jt,ZF));const vbe=bbe;var ybe=Te(1,_u(jt,hC));const Cbe=ybe;var wbe=zt(function(i,e){return df(_u(i(P4),X$),e)});const Sbe=wbe;var xbe=gC(0);const Tbe=xbe;var kbe=Te(1,Er(Math.round,Math));const Lbe=kbe;var Dbe=Te(1,Er(Math.ceil,Math));const Ibe=Dbe;var Rbe=as(xz);const Ebe=Rbe;var Nbe=function(e){var t=Number(e);return TC(t)?t-t%1||(t<0?-0:t===0?t:0):t};const Abe=Nbe;var Pbe=Te(1,Abe),Mbe=Mn(Math.trunc)?Te(1,Er(Math.trunc,Math)):Pbe;const Obe=Mbe;var Fbe=function(e){return(e>0)-(e<0)||+e};const Bbe=Fbe;var Wbe=Te(1,Bbe),Vbe=Mn(Math.sign)?Te(1,Er(Math.sign,Math)):Wbe;const Hbe=Vbe;var Ube=as(h$);const jbe=Ube;var zbe=l2(O4,yi(g0,l2(tT("toString"),tT("valueOf"))));const $be=zbe;var Kbe=bC($be,Number,ad(NaN));const qbe=Kbe;var Gbe=Dp(hf,CC(/[.*+?^${}()|[\]\\-]/g,"\\$&"));const lK=Gbe;var Zbe=function(e,t,n){if(n==null||e==null||t==null)throw TypeError("Input values must not be `null` or `undefined`")},E7=function(e,t){if(typeof e!="string"&&!(e instanceof String))throw TypeError("`".concat(t,"` must be a string"))},Xbe=function(e){if(typeof e!="string"&&!(e instanceof String)&&!(e instanceof RegExp))throw TypeError("`searchValue` must be a string or an regexp")},Ybe=function(e,t,n){Zbe(e,t,n),E7(n,"str"),E7(t,"replaceValue"),Xbe(e);var r=new RegExp(M4(e)?e:lK(e),"g");return CC(r,t,n)};const Qbe=Ybe;var Jbe=Te(3,Qbe),eve=Fo(2,"replaceAll"),tve=Mn(String.prototype.replaceAll)?eve:Jbe;const nve=tve;var ive=CC(/^[\s\uFEFF\xA0]+/,"");const rve=ive;var sve=rve,ove=Fo(0,"trimStart"),ave=Mn(String.prototype.trimStart)?ove:sve;const N7=ave;var lve=CC(/[\s\uFEFF\xA0]+$/,"");const cve=lve;var dve=cve,uve=Fo(0,"trimEnd"),hve=Mn(String.prototype.trimEnd)?uve:dve;const A7=hve;var fve=zt(function(i,e){return sn(v4(""),kz(B4(i)),h4(""))(e)});const gve=fve;var pve=zt(function(i,e){return sn(v4(""),Lz(B4(i)),h4(""))(e)});const mve=pve;var _ve=function(e,t,n){var r=t>>0,s=String(f0(e)?e:" ");if(n.length>=r)return String(n);if(r-=n.length,r>s.length){var o=r/s.length;s+=Mn(String.prototype.repeat)?s.repeat(o):V4(s,o)}return s.slice(0,r)+String(n)};const bve=_ve;var vve=as(Fo(2,"padStart")),yve=zt(bve),Cve=Mn(String.prototype.padStart)?vve:yve;const cK=Cve;var wve=function(e,t,n){var r=t>>0,s=String(f0(e)?e:" ");if(n.length>r)return String(n);if(r-=n.length,r>s.length){var o=r/s.length;s+=Mn(String.prototype.repeat)?s.repeat(o):V4(s,o)}return String(n)+s.slice(0,r)};const Sve=wve;var xve=zt(Sve),Tve=as(Fo(2,"padEnd")),kve=Mn(String.prototype.padEnd)?Tve:xve;const dK=kve;var Lve=dK(" ");const Dve=Lve;var Ive=cK(" ");const Rve=Ive,z4=Object.freeze(Object.defineProperty({__proto__:null,Identity:oK,Y:$ge,allEqual:Bme,allEqualTo:Zme,allIdentical:$me,allIdenticalTo:qme,allP:B1,allSettledP:jge,allUnique:Y$,anyP:w7,appendFlipped:kme,argsPass:Sbe,async:spe,cata:gge,catchP:xge,ceil:Ibe,compact:xme,concatAll:Ype,concatRight:Jpe,copyKeys:r1e,curryRight:Cge,curryRightN:j$,defaultWhen:G$,delayP:Ige,dispatch:ipe,divideNum:Ebe,dropArgs:Tbe,ensureArray:Zpe,escapeRegExp:lK,filterIndexed:Upe,findOr:W_e,firstP:w7,flattenDepth:s_e,flattenPath:iK,flattenProp:S1e,floor:J$,fnull:Bpe,inRange:obe,included:B4,invoke:U_e,invokeArgs:H4,isArray:uf,isArrayLike:I4,isAsyncFunction:k4,isBigInt:A$,isBlank:Yfe,isBoolean:D4,isDate:E4,isEmptyArray:w$,isEmptyString:zue,isError:Ufe,isEven:ufe,isFalse:B$,isFalsy:W$,isFinite:TC,isFloat:A4,isFunction:Mn,isGeneratorFunction:T4,isIndexed:Vfe,isInt32:QN,isInteger:bu,isInteger32:QN,isInvalidDate:g7,isIterable:L4,isMap:E$,isNaN:L$,isNaturalNumber:zfe,isNegative:N4,isNegativeZero:Nhe,isNilOrEmpty:T$,isNonEmptyArray:x$,isNonEmptyString:Yue,isNonNegative:R$,isNonPositive:Ohe,isNotArray:S$,isNotArrayLike:ehe,isNotAsyncFunction:rhe,isNotBoolean:Vue,isNotDate:phe,isNotEmpty:ZL,isNotFinite:N$,isNotFloat:sfe,isNotFunction:R4,isNotGeneratorFunction:nhe,isNotInteger:tfe,isNotMap:Vhe,isNotNaN:D$,isNotNil:x4,isNotNilOrEmpty:Phe,isNotNull:S4,isNotNumber:The,isNotObj:nT,isNotObjLike:h7,isNotObject:nT,isNotObjectLike:h7,isNotPair:gfe,isNotPlainObj:f7,isNotPlainObject:f7,isNotPrimitive:qfe,isNotRegExp:Tfe,isNotSet:Dfe,isNotString:Kue,isNotUndefined:f0,isNotValidDate:g7,isNotValidNumber:lfe,isNull:GL,isNumber:cd,isObj:g0,isObjLike:iT,isObject:g0,isObjectLike:iT,isOdd:M$,isPair:O$,isPlainObj:XN,isPlainObject:XN,isPositive:Lhe,isPositiveZero:Rhe,isPrimitive:H$,isPromise:bfe,isPrototypeOf:I1e,isRegExp:M4,isSafeInteger:Bfe,isSentinelValue:Zfe,isSet:V$,isSparseArray:Rfe,isString:hf,isSymbol:O4,isThenable:mfe,isTrue:F$,isTruthy:P4,isUint32:p7,isUinteger32:p7,isUndefined:xC,isValidDate:I$,isValidNumber:P$,lastP:Ppe,lengthEq:_0,lengthGt:Eme,lengthGte:q$,lengthLt:Ame,lengthLte:W4,lengthNotEq:Ome,lensEq:rK,lensIso:ebe,lensNotEq:N1e,lensNotSatisfy:M1e,lensSatisfies:sK,lensTraverse:X1e,liftF:hge,liftFN:U$,list:X$,mapIndexed:Z$,mergePath:tK,mergePaths:l1e,mergeProp:u1e,mergeProps:o1e,move:Ime,nand:gbe,neither:l2,noneP:Dge,nonePass:Cbe,noop:oge,nor:_be,notAllPass:vbe,notAllUnique:v_e,notBoth:hbe,notEqual:lbe,omitBy:f1e,omitIndexes:wme,overlaps:dbe,padCharsEnd:dK,padCharsStart:cK,padEnd:Dve,padStart:Rve,pathNotEq:rbe,pathOrLazy:p1e,paths:eK,pickIndexes:Kpe,propNotEq:nbe,rangeStep:F_e,reduceIndexed:Vpe,reduceP:ome,reduceRightP:gme,rejectP:XL,renameKey:Y_e,renameKeyWith:J_e,renameKeys:j4,renameKeysWith:U4,repeatStr:jme,replaceAll:nve,resolveP:Al,round:Lbe,seq:y7,sequencing:y7,sign:Hbe,skipTake:P_e,sliceFrom:mme,sliceTo:bme,sortByPaths:N_e,sortByProp:D_e,sortByProps:Q$,spreadPath:nK,spreadProp:y1e,stubArray:rge,stubNull:Jfe,stubObj:m7,stubObject:m7,stubString:nge,stubUndefined:SC,subtractNum:jbe,thenCatchP:Ege,toArray:m_e,toInt32:YN,toInteger32:YN,toNumber:qbe,toUint32:JN,toUinteger32:JN,trimCharsEnd:gve,trimCharsStart:mve,trimEnd:A7,trimLeft:N7,trimRight:A7,trimStart:N7,trunc:Obe,unzipObjWith:T1e,viewOr:_1e,weave:mge,weaveLazy:bge,zipObjWith:L1e},Symbol.toStringTag,{value:"Module"}));var z;(function(i){i[i.NONE=0]="NONE";const t=0+1;i[i._abstract=t]="_abstract";const n=t+1;i[i._accessor=n]="_accessor";const r=n+1;i[i._as=r]="_as";const s=r+1;i[i._assert=s]="_assert";const o=s+1;i[i._asserts=o]="_asserts";const a=o+1;i[i._async=a]="_async";const l=a+1;i[i._await=l]="_await";const c=l+1;i[i._checks=c]="_checks";const d=c+1;i[i._constructor=d]="_constructor";const u=d+1;i[i._declare=u]="_declare";const h=u+1;i[i._enum=h]="_enum";const f=h+1;i[i._exports=f]="_exports";const g=f+1;i[i._from=g]="_from";const m=g+1;i[i._get=m]="_get";const y=m+1;i[i._global=y]="_global";const b=y+1;i[i._implements=b]="_implements";const v=b+1;i[i._infer=v]="_infer";const C=v+1;i[i._interface=C]="_interface";const w=C+1;i[i._is=w]="_is";const S=w+1;i[i._keyof=S]="_keyof";const L=S+1;i[i._mixins=L]="_mixins";const T=L+1;i[i._module=T]="_module";const I=T+1;i[i._namespace=I]="_namespace";const R=I+1;i[i._of=R]="_of";const B=R+1;i[i._opaque=B]="_opaque";const V=B+1;i[i._out=V]="_out";const F=V+1;i[i._override=F]="_override";const W=F+1;i[i._private=W]="_private";const X=W+1;i[i._protected=X]="_protected";const oe=X+1;i[i._proto=oe]="_proto";const we=oe+1;i[i._public=we]="_public";const ke=we+1;i[i._readonly=ke]="_readonly";const Ee=ke+1;i[i._require=Ee]="_require";const Le=Ee+1;i[i._satisfies=Le]="_satisfies";const qe=Le+1;i[i._set=qe]="_set";const Ue=qe+1;i[i._static=Ue]="_static";const Oe=Ue+1;i[i._symbol=Oe]="_symbol";const be=Oe+1;i[i._type=be]="_type";const un=be+1;i[i._unique=un]="_unique";const he=un+1;i[i._using=he]="_using"})(z||(z={}));var _;(function(i){i[i.PRECEDENCE_MASK=15]="PRECEDENCE_MASK";const t=16;i[i.IS_KEYWORD=t]="IS_KEYWORD";const n=32;i[i.IS_ASSIGN=n]="IS_ASSIGN";const r=64;i[i.IS_RIGHT_ASSOCIATIVE=r]="IS_RIGHT_ASSOCIATIVE";const s=128;i[i.IS_PREFIX=s]="IS_PREFIX";const o=256;i[i.IS_POSTFIX=o]="IS_POSTFIX";const a=512;i[i.IS_EXPRESSION_START=a]="IS_EXPRESSION_START";const l=512;i[i.num=l]="num";const c=1536;i[i.bigint=c]="bigint";const d=2560;i[i.decimal=d]="decimal";const u=3584;i[i.regexp=u]="regexp";const h=4608;i[i.string=h]="string";const f=5632;i[i.name=f]="name";const g=6144;i[i.eof=g]="eof";const m=7680;i[i.bracketL=m]="bracketL";const y=8192;i[i.bracketR=y]="bracketR";const b=9728;i[i.braceL=b]="braceL";const v=10752;i[i.braceBarL=v]="braceBarL";const C=11264;i[i.braceR=C]="braceR";const w=12288;i[i.braceBarR=w]="braceBarR";const S=13824;i[i.parenL=S]="parenL";const L=14336;i[i.parenR=L]="parenR";const T=15360;i[i.comma=T]="comma";const I=16384;i[i.semi=I]="semi";const R=17408;i[i.colon=R]="colon";const B=18432;i[i.doubleColon=B]="doubleColon";const V=19456;i[i.dot=V]="dot";const F=20480;i[i.question=F]="question";const W=21504;i[i.questionDot=W]="questionDot";const X=22528;i[i.arrow=X]="arrow";const oe=23552;i[i.template=oe]="template";const we=24576;i[i.ellipsis=we]="ellipsis";const ke=25600;i[i.backQuote=ke]="backQuote";const Ee=27136;i[i.dollarBraceL=Ee]="dollarBraceL";const Le=27648;i[i.at=Le]="at";const qe=29184;i[i.hash=qe]="hash";const Ue=29728;i[i.eq=Ue]="eq";const Oe=30752;i[i.assign=Oe]="assign";const be=32640;i[i.preIncDec=be]="preIncDec";const un=33664;i[i.postIncDec=un]="postIncDec";const he=34432;i[i.bang=he]="bang";const _e=35456;i[i.tilde=_e]="tilde";const pe=35841;i[i.pipeline=pe]="pipeline";const Pe=36866;i[i.nullishCoalescing=Pe]="nullishCoalescing";const ie=37890;i[i.logicalOR=ie]="logicalOR";const te=38915;i[i.logicalAND=te]="logicalAND";const Y=39940;i[i.bitwiseOR=Y]="bitwiseOR";const De=40965;i[i.bitwiseXOR=De]="bitwiseXOR";const Je=41990;i[i.bitwiseAND=Je]="bitwiseAND";const We=43015;i[i.equality=We]="equality";const Ge=44040;i[i.lessThan=Ge]="lessThan";const Tt=45064;i[i.greaterThan=Tt]="greaterThan";const pt=46088;i[i.relationalOrEqual=pt]="relationalOrEqual";const Nt=47113;i[i.bitShiftL=Nt]="bitShiftL";const hn=48137;i[i.bitShiftR=hn]="bitShiftR";const ne=49802;i[i.plus=ne]="plus";const G=50826;i[i.minus=G]="minus";const Z=51723;i[i.modulo=Z]="modulo";const A=52235;i[i.star=A]="star";const M=53259;i[i.slash=M]="slash";const $=54348;i[i.exponent=$]="exponent";const j=55296;i[i.jsxName=j]="jsxName";const le=56320;i[i.jsxText=le]="jsxText";const Ie=57344;i[i.jsxEmptyText=Ie]="jsxEmptyText";const je=58880;i[i.jsxTagStart=je]="jsxTagStart";const Xe=59392;i[i.jsxTagEnd=Xe]="jsxTagEnd";const at=60928;i[i.typeParameterStart=at]="typeParameterStart";const lt=61440;i[i.nonNullAssertion=lt]="nonNullAssertion";const on=62480;i[i._break=on]="_break";const en=63504;i[i._case=en]="_case";const nt=64528;i[i._catch=nt]="_catch";const Bn=65552;i[i._continue=Bn]="_continue";const Wn=66576;i[i._debugger=Wn]="_debugger";const ks=67600;i[i._default=ks]="_default";const qt=68624;i[i._do=qt]="_do";const ai=69648;i[i._else=ai]="_else";const Ya=70672;i[i._finally=Ya]="_finally";const Qa=71696;i[i._for=Qa]="_for";const Hs=73232;i[i._function=Hs]="_function";const ba=73744;i[i._if=ba]="_if";const Ja=74768;i[i._return=Ja]="_return";const el=75792;i[i._switch=el]="_switch";const Ql=77456;i[i._throw=Ql]="_throw";const tl=77840;i[i._try=tl]="_try";const Df=78864;i[i._var=Df]="_var";const co=79888;i[i._let=co]="_let";const gd=80912;i[i._const=gd]="_const";const pd=81936;i[i._while=pd]="_while";const ku=82960;i[i._with=ku]="_with";const fb=84496;i[i._new=fb]="_new";const Lu=85520;i[i._this=Lu]="_this";const Uo=86544;i[i._super=Uo]="_super";const Xp=87568;i[i._class=Xp]="_class";const Yp=88080;i[i._extends=Yp]="_extends";const Qp=89104;i[i._export=Qp]="_export";const Jp=90640;i[i._import=Jp]="_import";const gb=91664;i[i._yield=gb]="_yield";const mt=92688;i[i._null=mt]="_null";const J=93712;i[i._true=J]="_true";const Ve=94736;i[i._false=Ve]="_false";const it=95256;i[i._in=it]="_in";const Vn=96280;i[i._instanceof=Vn]="_instanceof";const Gi=97936;i[i._typeof=Gi]="_typeof";const Ls=98960;i[i._void=Ls]="_void";const Ri=99984;i[i._delete=Ri]="_delete";const va=100880;i[i._async=va]="_async";const pb=101904;i[i._get=pb]="_get";const xw=102928;i[i._set=xw]="_set";const B9=103952;i[i._declare=B9]="_declare";const Fte=104976;i[i._readonly=Fte]="_readonly";const Bte=106e3;i[i._abstract=Bte]="_abstract";const Wte=107024;i[i._static=Wte]="_static";const Vte=107536;i[i._public=Vte]="_public";const Hte=108560;i[i._private=Hte]="_private";const Ute=109584;i[i._protected=Ute]="_protected";const jte=110608;i[i._override=jte]="_override";const zte=112144;i[i._as=zte]="_as";const $te=113168;i[i._enum=$te]="_enum";const Kte=114192;i[i._type=Kte]="_type";const qte=115216;i[i._implements=qte]="_implements"})(_||(_={}));function Eve(i){switch(i){case _.num:return"num";case _.bigint:return"bigint";case _.decimal:return"decimal";case _.regexp:return"regexp";case _.string:return"string";case _.name:return"name";case _.eof:return"eof";case _.bracketL:return"[";case _.bracketR:return"]";case _.braceL:return"{";case _.braceBarL:return"{|";case _.braceR:return"}";case _.braceBarR:return"|}";case _.parenL:return"(";case _.parenR:return")";case _.comma:return",";case _.semi:return";";case _.colon:return":";case _.doubleColon:return"::";case _.dot:return".";case _.question:return"?";case _.questionDot:return"?.";case _.arrow:return"=>";case _.template:return"template";case _.ellipsis:return"...";case _.backQuote:return"`";case _.dollarBraceL:return"${";case _.at:return"@";case _.hash:return"#";case _.eq:return"=";case _.assign:return"_=";case _.preIncDec:return"++/--";case _.postIncDec:return"++/--";case _.bang:return"!";case _.tilde:return"~";case _.pipeline:return"|>";case _.nullishCoalescing:return"??";case _.logicalOR:return"||";case _.logicalAND:return"&&";case _.bitwiseOR:return"|";case _.bitwiseXOR:return"^";case _.bitwiseAND:return"&";case _.equality:return"==/!=";case _.lessThan:return"<";case _.greaterThan:return">";case _.relationalOrEqual:return"<=/>=";case _.bitShiftL:return"<<";case _.bitShiftR:return">>/>>>";case _.plus:return"+";case _.minus:return"-";case _.modulo:return"%";case _.star:return"*";case _.slash:return"/";case _.exponent:return"**";case _.jsxName:return"jsxName";case _.jsxText:return"jsxText";case _.jsxEmptyText:return"jsxEmptyText";case _.jsxTagStart:return"jsxTagStart";case _.jsxTagEnd:return"jsxTagEnd";case _.typeParameterStart:return"typeParameterStart";case _.nonNullAssertion:return"nonNullAssertion";case _._break:return"break";case _._case:return"case";case _._catch:return"catch";case _._continue:return"continue";case _._debugger:return"debugger";case _._default:return"default";case _._do:return"do";case _._else:return"else";case _._finally:return"finally";case _._for:return"for";case _._function:return"function";case _._if:return"if";case _._return:return"return";case _._switch:return"switch";case _._throw:return"throw";case _._try:return"try";case _._var:return"var";case _._let:return"let";case _._const:return"const";case _._while:return"while";case _._with:return"with";case _._new:return"new";case _._this:return"this";case _._super:return"super";case _._class:return"class";case _._extends:return"extends";case _._export:return"export";case _._import:return"import";case _._yield:return"yield";case _._null:return"null";case _._true:return"true";case _._false:return"false";case _._in:return"in";case _._instanceof:return"instanceof";case _._typeof:return"typeof";case _._void:return"void";case _._delete:return"delete";case _._async:return"async";case _._get:return"get";case _._set:return"set";case _._declare:return"declare";case _._readonly:return"readonly";case _._abstract:return"abstract";case _._static:return"static";case _._public:return"public";case _._private:return"private";case _._protected:return"protected";case _._override:return"override";case _._as:return"as";case _._enum:return"enum";case _._type:return"type";case _._implements:return"implements";default:return""}}class Uc{constructor(e,t,n){this.startTokenIndex=e,this.endTokenIndex=t,this.isFunctionScope=n}}class Nve{constructor(e,t,n,r,s,o,a,l,c,d,u,h,f){this.potentialArrowAt=e,this.noAnonFunctionType=t,this.inDisallowConditionalTypesContext=n,this.tokensLength=r,this.scopesLength=s,this.pos=o,this.type=a,this.contextualKeyword=l,this.start=c,this.end=d,this.isType=u,this.scopeDepth=h,this.error=f}}let Ave=class fo{constructor(){fo.prototype.__init.call(this),fo.prototype.__init2.call(this),fo.prototype.__init3.call(this),fo.prototype.__init4.call(this),fo.prototype.__init5.call(this),fo.prototype.__init6.call(this),fo.prototype.__init7.call(this),fo.prototype.__init8.call(this),fo.prototype.__init9.call(this),fo.prototype.__init10.call(this),fo.prototype.__init11.call(this),fo.prototype.__init12.call(this),fo.prototype.__init13.call(this)}__init(){this.potentialArrowAt=-1}__init2(){this.noAnonFunctionType=!1}__init3(){this.inDisallowConditionalTypesContext=!1}__init4(){this.tokens=[]}__init5(){this.scopes=[]}__init6(){this.pos=0}__init7(){this.type=_.eof}__init8(){this.contextualKeyword=z.NONE}__init9(){this.start=0}__init10(){this.end=0}__init11(){this.isType=!1}__init12(){this.scopeDepth=0}__init13(){this.error=null}snapshot(){return new Nve(this.potentialArrowAt,this.noAnonFunctionType,this.inDisallowConditionalTypesContext,this.tokens.length,this.scopes.length,this.pos,this.type,this.contextualKeyword,this.start,this.end,this.isType,this.scopeDepth,this.error)}restoreFromSnapshot(e){this.potentialArrowAt=e.potentialArrowAt,this.noAnonFunctionType=e.noAnonFunctionType,this.inDisallowConditionalTypesContext=e.inDisallowConditionalTypesContext,this.tokens.length=e.tokensLength,this.scopes.length=e.scopesLength,this.pos=e.pos,this.type=e.type,this.contextualKeyword=e.contextualKeyword,this.start=e.start,this.end=e.end,this.isType=e.isType,this.scopeDepth=e.scopeDepth,this.error=e.error}};var Q;(function(i){i[i.backSpace=8]="backSpace";const t=10;i[i.lineFeed=t]="lineFeed";const n=9;i[i.tab=n]="tab";const r=13;i[i.carriageReturn=r]="carriageReturn";const s=14;i[i.shiftOut=s]="shiftOut";const o=32;i[i.space=o]="space";const a=33;i[i.exclamationMark=a]="exclamationMark";const l=34;i[i.quotationMark=l]="quotationMark";const c=35;i[i.numberSign=c]="numberSign";const d=36;i[i.dollarSign=d]="dollarSign";const u=37;i[i.percentSign=u]="percentSign";const h=38;i[i.ampersand=h]="ampersand";const f=39;i[i.apostrophe=f]="apostrophe";const g=40;i[i.leftParenthesis=g]="leftParenthesis";const m=41;i[i.rightParenthesis=m]="rightParenthesis";const y=42;i[i.asterisk=y]="asterisk";const b=43;i[i.plusSign=b]="plusSign";const v=44;i[i.comma=v]="comma";const C=45;i[i.dash=C]="dash";const w=46;i[i.dot=w]="dot";const S=47;i[i.slash=S]="slash";const L=48;i[i.digit0=L]="digit0";const T=49;i[i.digit1=T]="digit1";const I=50;i[i.digit2=I]="digit2";const R=51;i[i.digit3=R]="digit3";const B=52;i[i.digit4=B]="digit4";const V=53;i[i.digit5=V]="digit5";const F=54;i[i.digit6=F]="digit6";const W=55;i[i.digit7=W]="digit7";const X=56;i[i.digit8=X]="digit8";const oe=57;i[i.digit9=oe]="digit9";const we=58;i[i.colon=we]="colon";const ke=59;i[i.semicolon=ke]="semicolon";const Ee=60;i[i.lessThan=Ee]="lessThan";const Le=61;i[i.equalsTo=Le]="equalsTo";const qe=62;i[i.greaterThan=qe]="greaterThan";const Ue=63;i[i.questionMark=Ue]="questionMark";const Oe=64;i[i.atSign=Oe]="atSign";const be=65;i[i.uppercaseA=be]="uppercaseA";const un=66;i[i.uppercaseB=un]="uppercaseB";const he=67;i[i.uppercaseC=he]="uppercaseC";const _e=68;i[i.uppercaseD=_e]="uppercaseD";const pe=69;i[i.uppercaseE=pe]="uppercaseE";const Pe=70;i[i.uppercaseF=Pe]="uppercaseF";const ie=71;i[i.uppercaseG=ie]="uppercaseG";const te=72;i[i.uppercaseH=te]="uppercaseH";const Y=73;i[i.uppercaseI=Y]="uppercaseI";const De=74;i[i.uppercaseJ=De]="uppercaseJ";const Je=75;i[i.uppercaseK=Je]="uppercaseK";const We=76;i[i.uppercaseL=We]="uppercaseL";const Ge=77;i[i.uppercaseM=Ge]="uppercaseM";const Tt=78;i[i.uppercaseN=Tt]="uppercaseN";const pt=79;i[i.uppercaseO=pt]="uppercaseO";const Nt=80;i[i.uppercaseP=Nt]="uppercaseP";const hn=81;i[i.uppercaseQ=hn]="uppercaseQ";const ne=82;i[i.uppercaseR=ne]="uppercaseR";const G=83;i[i.uppercaseS=G]="uppercaseS";const Z=84;i[i.uppercaseT=Z]="uppercaseT";const A=85;i[i.uppercaseU=A]="uppercaseU";const M=86;i[i.uppercaseV=M]="uppercaseV";const $=87;i[i.uppercaseW=$]="uppercaseW";const j=88;i[i.uppercaseX=j]="uppercaseX";const le=89;i[i.uppercaseY=le]="uppercaseY";const Ie=90;i[i.uppercaseZ=Ie]="uppercaseZ";const je=91;i[i.leftSquareBracket=je]="leftSquareBracket";const Xe=92;i[i.backslash=Xe]="backslash";const at=93;i[i.rightSquareBracket=at]="rightSquareBracket";const lt=94;i[i.caret=lt]="caret";const on=95;i[i.underscore=on]="underscore";const en=96;i[i.graveAccent=en]="graveAccent";const nt=97;i[i.lowercaseA=nt]="lowercaseA";const Bn=98;i[i.lowercaseB=Bn]="lowercaseB";const Wn=99;i[i.lowercaseC=Wn]="lowercaseC";const ks=100;i[i.lowercaseD=ks]="lowercaseD";const qt=101;i[i.lowercaseE=qt]="lowercaseE";const ai=102;i[i.lowercaseF=ai]="lowercaseF";const Ya=103;i[i.lowercaseG=Ya]="lowercaseG";const Qa=104;i[i.lowercaseH=Qa]="lowercaseH";const Hs=105;i[i.lowercaseI=Hs]="lowercaseI";const ba=106;i[i.lowercaseJ=ba]="lowercaseJ";const Ja=107;i[i.lowercaseK=Ja]="lowercaseK";const el=108;i[i.lowercaseL=el]="lowercaseL";const Ql=109;i[i.lowercaseM=Ql]="lowercaseM";const tl=110;i[i.lowercaseN=tl]="lowercaseN";const Df=111;i[i.lowercaseO=Df]="lowercaseO";const co=112;i[i.lowercaseP=co]="lowercaseP";const gd=113;i[i.lowercaseQ=gd]="lowercaseQ";const pd=114;i[i.lowercaseR=pd]="lowercaseR";const ku=115;i[i.lowercaseS=ku]="lowercaseS";const fb=116;i[i.lowercaseT=fb]="lowercaseT";const Lu=117;i[i.lowercaseU=Lu]="lowercaseU";const Uo=118;i[i.lowercaseV=Uo]="lowercaseV";const Xp=119;i[i.lowercaseW=Xp]="lowercaseW";const Yp=120;i[i.lowercaseX=Yp]="lowercaseX";const Qp=121;i[i.lowercaseY=Qp]="lowercaseY";const Jp=122;i[i.lowercaseZ=Jp]="lowercaseZ";const gb=123;i[i.leftCurlyBrace=gb]="leftCurlyBrace";const mt=124;i[i.verticalBar=mt]="verticalBar";const J=125;i[i.rightCurlyBrace=J]="rightCurlyBrace";const Ve=126;i[i.tilde=Ve]="tilde";const it=160;i[i.nonBreakingSpace=it]="nonBreakingSpace";const Vn=5760;i[i.oghamSpaceMark=Vn]="oghamSpaceMark";const Gi=8232;i[i.lineSeparator=Gi]="lineSeparator";const Ls=8233;i[i.paragraphSeparator=Ls]="paragraphSeparator"})(Q||(Q={}));let QL,_n,On,x,Ze,uK;function w0(){return uK++}function Pve(i){if("pos"in i){const e=Ove(i.pos);i.message+=` (${e.line}:${e.column})`,i.loc=e}return i}class Mve{constructor(e,t){this.line=e,this.column=t}}function Ove(i){let e=1,t=1;for(let n=0;n<i;n++)Ze.charCodeAt(n)===Q.lineFeed?(e++,t=1):t++;return new Mve(e,t)}function Fve(i,e,t,n){Ze=i,x=new Ave,uK=1,QL=e,_n=t,On=n}function gt(i){return x.contextualKeyword===i}function $4(i){const e=LC();return e.type===_.name&&e.contextualKeyword===i}function Nr(i){return x.contextualKeyword===i&&ge(_.name)}function ir(i){Nr(i)||Xt()}function Yo(){return O(_.eof)||O(_.braceR)||io()}function io(){const i=x.tokens[x.tokens.length-1],e=i?i.end:0;for(let t=e;t<x.start;t++){const n=Ze.charCodeAt(t);if(n===Q.lineFeed||n===Q.carriageReturn||n===8232||n===8233)return!0}return!1}function hK(){const i=K4();for(let e=x.end;e<i;e++){const t=Ze.charCodeAt(e);if(t===Q.lineFeed||t===Q.carriageReturn||t===8232||t===8233)return!0}return!1}function Cc(){return ge(_.semi)||Yo()}function Di(){Cc()||Xt('Unexpected token, expected ";"')}function Se(i){ge(i)||Xt(`Unexpected token, expected "${Eve(i)}"`)}function Xt(i="Unexpected token",e=x.start){if(x.error)return;const t=new SyntaxError(i);t.pos=e,x.error=t,x.pos=Ze.length,Zt(_.eof)}const fK=[9,11,12,Q.space,Q.nonBreakingSpace,Q.oghamSpaceMark,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279],P7=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,gK=new Uint8Array(65536);for(const i of fK)gK[i]=1;function Bve(i){if(i<48)return i===36;if(i<58)return!0;if(i<65)return!1;if(i<91)return!0;if(i<97)return i===95;if(i<123)return!0;if(i<128)return!1;throw new Error("Should not be called with non-ASCII char code.")}const Pl=new Uint8Array(65536);for(let i=0;i<128;i++)Pl[i]=Bve(i)?1:0;for(let i=128;i<65536;i++)Pl[i]=1;for(const i of fK)Pl[i]=0;Pl[8232]=0;Pl[8233]=0;const kC=Pl.slice();for(let i=Q.digit0;i<=Q.digit9;i++)kC[i]=0;const M7=new Int32Array([-1,27,783,918,1755,2376,2862,3483,-1,3699,-1,4617,4752,4833,5130,5508,5940,-1,6480,6939,7749,8181,8451,8613,-1,8829,-1,-1,-1,54,243,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,432,-1,-1,-1,675,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,81,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,108,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,135,-1,-1,-1,-1,-1,-1,-1,-1,-1,162,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,189,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,216,-1,-1,-1,-1,-1,-1,z._abstract<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,270,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,297,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,324,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,351,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,378,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,405,-1,-1,-1,-1,-1,-1,-1,-1,z._accessor<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._as<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,459,-1,-1,-1,-1,-1,594,-1,-1,-1,-1,-1,-1,486,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,513,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,540,-1,-1,-1,-1,-1,-1,z._assert<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,567,-1,-1,-1,-1,-1,-1,-1,z._asserts<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,621,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,648,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._async<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,702,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,729,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,756,-1,-1,-1,-1,-1,-1,z._await<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,810,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,837,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,864,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,891,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._break<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,945,-1,-1,-1,-1,-1,-1,1107,-1,-1,-1,1242,-1,-1,1350,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,972,1026,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,999,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._case<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1053,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1080,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._catch<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1134,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1161,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1188,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1215,-1,-1,-1,-1,-1,-1,-1,z._checks<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1269,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1296,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1323,-1,-1,-1,-1,-1,-1,-1,(_._class<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1377,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1404,1620,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1431,-1,-1,-1,-1,-1,-1,(_._const<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1458,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1485,-1,-1,-1,-1,-1,-1,-1,-1,1512,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1539,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1566,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1593,-1,-1,-1,-1,-1,-1,-1,-1,z._constructor<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1647,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1674,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1701,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1728,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._continue<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1782,-1,-1,-1,-1,-1,-1,-1,-1,-1,2349,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1809,1971,-1,-1,2106,-1,-1,-1,-1,-1,2241,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1836,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1863,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1890,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1917,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1944,-1,-1,-1,-1,-1,-1,-1,-1,(_._debugger<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1998,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2025,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2052,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2079,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._declare<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2133,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2160,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2187,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2214,-1,-1,-1,-1,-1,-1,(_._default<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2268,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2295,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2322,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._delete<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._do<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2403,-1,2484,-1,-1,-1,-1,-1,-1,-1,-1,-1,2565,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2430,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2457,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._else<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2511,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2538,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._enum<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2592,-1,-1,-1,2727,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2619,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2646,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2673,-1,-1,-1,-1,-1,-1,(_._export<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2700,-1,-1,-1,-1,-1,-1,-1,z._exports<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2754,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2781,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2808,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2835,-1,-1,-1,-1,-1,-1,-1,(_._extends<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2889,-1,-1,-1,-1,-1,-1,-1,2997,-1,-1,-1,-1,-1,3159,-1,-1,3213,-1,-1,3294,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2916,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2943,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2970,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._false<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3024,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3051,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3078,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3105,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3132,-1,(_._finally<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3186,-1,-1,-1,-1,-1,-1,-1,-1,(_._for<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3240,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3267,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._from<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3321,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3348,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3375,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3402,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3429,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3456,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._function<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3510,-1,-1,-1,-1,-1,-1,3564,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3537,-1,-1,-1,-1,-1,-1,z._get<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3591,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3618,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3645,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3672,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._global<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3726,-1,-1,-1,-1,-1,-1,3753,4077,-1,-1,-1,-1,4590,-1,-1,-1,-1,-1,-1,-1,(_._if<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3780,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3807,-1,-1,3996,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3834,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3861,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3888,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3915,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3942,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3969,-1,-1,-1,-1,-1,-1,-1,z._implements<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4023,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4050,-1,-1,-1,-1,-1,-1,(_._import<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._in<<1)+1,-1,-1,-1,-1,-1,4104,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4185,4401,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4131,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4158,-1,-1,-1,-1,-1,-1,-1,-1,z._infer<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4212,-1,-1,-1,-1,-1,-1,-1,4239,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4266,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4293,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4320,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4347,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4374,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._instanceof<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4428,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4455,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4482,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4509,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4536,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4563,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._interface<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._is<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4644,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4671,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4698,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4725,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._keyof<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4779,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4806,-1,-1,-1,-1,-1,-1,(_._let<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4860,-1,-1,-1,-1,-1,4995,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4887,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4914,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4941,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4968,-1,-1,-1,-1,-1,-1,-1,z._mixins<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5022,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5049,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5076,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5103,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._module<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5157,-1,-1,-1,5373,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5427,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5184,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5211,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5238,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5265,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5292,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5319,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5346,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._namespace<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5400,-1,-1,-1,(_._new<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5454,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5481,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._null<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5535,-1,-1,-1,-1,-1,-1,-1,-1,-1,5562,-1,-1,-1,-1,5697,5751,-1,-1,-1,-1,z._of<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5589,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5616,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5643,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5670,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._opaque<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5724,-1,-1,-1,-1,-1,-1,z._out<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5778,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5805,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5832,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5859,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5886,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5913,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._override<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5967,-1,-1,6345,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5994,-1,-1,-1,-1,-1,6129,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6021,-1,-1,-1,-1,-1,6048,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6075,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6102,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._private<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6156,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6183,-1,-1,-1,-1,-1,-1,-1,-1,-1,6318,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6210,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6237,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6264,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6291,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._protected<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._proto<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6372,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6399,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6426,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6453,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._public<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6507,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6534,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6696,-1,-1,6831,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6561,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6588,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6615,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6642,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6669,-1,z._readonly<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6723,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6750,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6777,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6804,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._require<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6858,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6885,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6912,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._return<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6966,-1,-1,-1,7182,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7236,7371,-1,7479,-1,7614,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6993,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7020,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7047,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7074,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7101,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7128,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7155,-1,-1,-1,-1,-1,-1,-1,z._satisfies<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7209,-1,-1,-1,-1,-1,-1,z._set<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7263,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7290,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7317,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7344,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._static<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7398,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7425,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7452,-1,-1,-1,-1,-1,-1,-1,-1,(_._super<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7506,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7533,-1,-1,-1,-1,-1,-1,-1,-1,-1,7560,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7587,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._switch<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7641,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7668,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7695,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7722,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._symbol<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7776,-1,-1,-1,-1,-1,-1,-1,-1,-1,7938,-1,-1,-1,-1,-1,-1,8046,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7803,-1,-1,-1,-1,-1,-1,-1,-1,7857,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7830,-1,-1,-1,-1,-1,-1,-1,(_._this<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7884,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7911,-1,-1,-1,(_._throw<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7965,-1,-1,-1,8019,-1,-1,-1,-1,-1,-1,7992,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._true<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._try<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8073,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8100,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._type<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8127,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8154,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._typeof<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8208,-1,-1,-1,-1,8343,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8235,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8262,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8289,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8316,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._unique<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8370,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8397,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8424,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,z._using<<1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8478,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8532,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8505,-1,-1,-1,-1,-1,-1,-1,-1,(_._var<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8559,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8586,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._void<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8640,8748,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8667,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8694,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8721,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._while<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8775,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8802,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._with<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8856,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8883,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8910,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8937,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,(_._yield<<1)+1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]);function Wve(){let i=0,e=0,t=x.pos;for(;t<Ze.length&&(e=Ze.charCodeAt(t),!(e<Q.lowercaseA||e>Q.lowercaseZ));){const r=M7[i+(e-Q.lowercaseA)+1];if(r===-1)break;i=r,t++}const n=M7[i];if(n>-1&&!Pl[e]){x.pos=t,n&1?Zt(n>>>1):Zt(_.name,n>>>1);return}for(;t<Ze.length;){const r=Ze.charCodeAt(t);if(Pl[r])t++;else if(r===Q.backslash){if(t+=2,Ze.charCodeAt(t)===Q.leftCurlyBrace){for(;t<Ze.length&&Ze.charCodeAt(t)!==Q.rightCurlyBrace;)t++;t++}}else if(r===Q.atSign&&Ze.charCodeAt(t+1)===Q.atSign)t+=2;else break}x.pos=t,Zt(_.name)}var Ct;(function(i){i[i.Access=0]="Access";const t=0+1;i[i.ExportAccess=t]="ExportAccess";const n=t+1;i[i.TopLevelDeclaration=n]="TopLevelDeclaration";const r=n+1;i[i.FunctionScopedDeclaration=r]="FunctionScopedDeclaration";const s=r+1;i[i.BlockScopedDeclaration=s]="BlockScopedDeclaration";const o=s+1;i[i.ObjectShorthandTopLevelDeclaration=o]="ObjectShorthandTopLevelDeclaration";const a=o+1;i[i.ObjectShorthandFunctionScopedDeclaration=a]="ObjectShorthandFunctionScopedDeclaration";const l=a+1;i[i.ObjectShorthandBlockScopedDeclaration=l]="ObjectShorthandBlockScopedDeclaration";const c=l+1;i[i.ObjectShorthand=c]="ObjectShorthand";const d=c+1;i[i.ImportDeclaration=d]="ImportDeclaration";const u=d+1;i[i.ObjectKey=u]="ObjectKey";const h=u+1;i[i.ImportAccess=h]="ImportAccess"})(Ct||(Ct={}));var wl;(function(i){i[i.NoChildren=0]="NoChildren";const t=0+1;i[i.OneChild=t]="OneChild";const n=t+1;i[i.StaticChildren=n]="StaticChildren";const r=n+1;i[i.KeyAfterPropSpread=r]="KeyAfterPropSpread"})(wl||(wl={}));function pK(i){const e=i.identifierRole;return e===Ct.TopLevelDeclaration||e===Ct.FunctionScopedDeclaration||e===Ct.BlockScopedDeclaration||e===Ct.ObjectShorthandTopLevelDeclaration||e===Ct.ObjectShorthandFunctionScopedDeclaration||e===Ct.ObjectShorthandBlockScopedDeclaration}function Vve(i){const e=i.identifierRole;return e===Ct.FunctionScopedDeclaration||e===Ct.BlockScopedDeclaration||e===Ct.ObjectShorthandFunctionScopedDeclaration||e===Ct.ObjectShorthandBlockScopedDeclaration}function mK(i){const e=i.identifierRole;return e===Ct.TopLevelDeclaration||e===Ct.ObjectShorthandTopLevelDeclaration||e===Ct.ImportDeclaration}function Hve(i){const e=i.identifierRole;return e===Ct.TopLevelDeclaration||e===Ct.BlockScopedDeclaration||e===Ct.ObjectShorthandTopLevelDeclaration||e===Ct.ObjectShorthandBlockScopedDeclaration}function Uve(i){const e=i.identifierRole;return e===Ct.FunctionScopedDeclaration||e===Ct.ObjectShorthandFunctionScopedDeclaration}function jve(i){return i.identifierRole===Ct.ObjectShorthandTopLevelDeclaration||i.identifierRole===Ct.ObjectShorthandBlockScopedDeclaration||i.identifierRole===Ct.ObjectShorthandFunctionScopedDeclaration}let JL=class{constructor(){this.type=x.type,this.contextualKeyword=x.contextualKeyword,this.start=x.start,this.end=x.end,this.scopeDepth=x.scopeDepth,this.isType=x.isType,this.identifierRole=null,this.jsxRole=null,this.shadowsGlobal=!1,this.isAsyncOperation=!1,this.contextId=null,this.rhsEndIndex=null,this.isExpression=!1,this.numNullishCoalesceStarts=0,this.numNullishCoalesceEnds=0,this.isOptionalChainStart=!1,this.isOptionalChainEnd=!1,this.subscriptStartIndex=null,this.nullishStartIndex=null}};function xe(){x.tokens.push(new JL),yK()}function Ju(){x.tokens.push(new JL),x.start=x.pos,o0e()}function zve(){x.type===_.assign&&--x.pos,i0e()}function nn(i){for(let t=x.tokens.length-i;t<x.tokens.length;t++)x.tokens[t].isType=!0;const e=x.isType;return x.isType=!0,e}function Qt(i){x.isType=i}function ge(i){return O(i)?(xe(),!0):!1}function _K(i){const e=x.isType;x.isType=!0,ge(i),x.isType=e}function O(i){return x.type===i}function Vi(){const i=x.snapshot();xe();const e=x.type;return x.restoreFromSnapshot(i),e}class $ve{constructor(e,t){this.type=e,this.contextualKeyword=t}}function LC(){const i=x.snapshot();xe();const e=x.type,t=x.contextualKeyword;return x.restoreFromSnapshot(i),new $ve(e,t)}function K4(){return bK(x.pos)}function bK(i){P7.lastIndex=i;const e=P7.exec(Ze);return i+e[0].length}function vK(){return Ze.charCodeAt(K4())}function yK(){if(wK(),x.start=x.pos,x.pos>=Ze.length){const i=x.tokens;i.length>=2&&i[i.length-1].start>=Ze.length&&i[i.length-2].start>=Ze.length&&Xt("Unexpectedly reached the end of input."),Zt(_.eof);return}Kve(Ze.charCodeAt(x.pos))}function Kve(i){kC[i]||i===Q.backslash||i===Q.atSign&&Ze.charCodeAt(x.pos+1)===Q.atSign?Wve():TK(i)}function qve(){for(;Ze.charCodeAt(x.pos)!==Q.asterisk||Ze.charCodeAt(x.pos+1)!==Q.slash;)if(x.pos++,x.pos>Ze.length){Xt("Unterminated comment",x.pos-2);return}x.pos+=2}function CK(i){let e=Ze.charCodeAt(x.pos+=i);if(x.pos<Ze.length)for(;e!==Q.lineFeed&&e!==Q.carriageReturn&&e!==Q.lineSeparator&&e!==Q.paragraphSeparator&&++x.pos<Ze.length;)e=Ze.charCodeAt(x.pos)}function wK(){for(;x.pos<Ze.length;){const i=Ze.charCodeAt(x.pos);switch(i){case Q.carriageReturn:Ze.charCodeAt(x.pos+1)===Q.lineFeed&&++x.pos;case Q.lineFeed:case Q.lineSeparator:case Q.paragraphSeparator:++x.pos;break;case Q.slash:switch(Ze.charCodeAt(x.pos+1)){case Q.asterisk:x.pos+=2,qve();break;case Q.slash:CK(2);break;default:return}break;default:if(gK[i])++x.pos;else return}}}function Zt(i,e=z.NONE){x.end=x.pos,x.type=i,x.contextualKeyword=e}function Gve(){const i=Ze.charCodeAt(x.pos+1);if(i>=Q.digit0&&i<=Q.digit9){kK(!0);return}i===Q.dot&&Ze.charCodeAt(x.pos+2)===Q.dot?(x.pos+=3,Zt(_.ellipsis)):(++x.pos,Zt(_.dot))}function Zve(){Ze.charCodeAt(x.pos+1)===Q.equalsTo?Un(_.assign,2):Un(_.slash,1)}function Xve(i){let e=i===Q.asterisk?_.star:_.modulo,t=1,n=Ze.charCodeAt(x.pos+1);i===Q.asterisk&&n===Q.asterisk&&(t++,n=Ze.charCodeAt(x.pos+2),e=_.exponent),n===Q.equalsTo&&Ze.charCodeAt(x.pos+2)!==Q.greaterThan&&(t++,e=_.assign),Un(e,t)}function Yve(i){const e=Ze.charCodeAt(x.pos+1);if(e===i){Ze.charCodeAt(x.pos+2)===Q.equalsTo?Un(_.assign,3):Un(i===Q.verticalBar?_.logicalOR:_.logicalAND,2);return}if(i===Q.verticalBar){if(e===Q.greaterThan){Un(_.pipeline,2);return}else if(e===Q.rightCurlyBrace&&On){Un(_.braceBarR,2);return}}if(e===Q.equalsTo){Un(_.assign,2);return}Un(i===Q.verticalBar?_.bitwiseOR:_.bitwiseAND,1)}function Qve(){Ze.charCodeAt(x.pos+1)===Q.equalsTo?Un(_.assign,2):Un(_.bitwiseXOR,1)}function Jve(i){const e=Ze.charCodeAt(x.pos+1);if(e===i){Un(_.preIncDec,2);return}e===Q.equalsTo?Un(_.assign,2):i===Q.plusSign?Un(_.plus,1):Un(_.minus,1)}function e0e(){const i=Ze.charCodeAt(x.pos+1);if(i===Q.lessThan){if(Ze.charCodeAt(x.pos+2)===Q.equalsTo){Un(_.assign,3);return}x.isType?Un(_.lessThan,1):Un(_.bitShiftL,2);return}i===Q.equalsTo?Un(_.relationalOrEqual,2):Un(_.lessThan,1)}function SK(){if(x.isType){Un(_.greaterThan,1);return}const i=Ze.charCodeAt(x.pos+1);if(i===Q.greaterThan){const e=Ze.charCodeAt(x.pos+2)===Q.greaterThan?3:2;if(Ze.charCodeAt(x.pos+e)===Q.equalsTo){Un(_.assign,e+1);return}Un(_.bitShiftR,e);return}i===Q.equalsTo?Un(_.relationalOrEqual,2):Un(_.greaterThan,1)}function xK(){x.type===_.greaterThan&&(x.pos-=1,SK())}function t0e(i){const e=Ze.charCodeAt(x.pos+1);if(e===Q.equalsTo){Un(_.equality,Ze.charCodeAt(x.pos+2)===Q.equalsTo?3:2);return}if(i===Q.equalsTo&&e===Q.greaterThan){x.pos+=2,Zt(_.arrow);return}Un(i===Q.equalsTo?_.eq:_.bang,1)}function n0e(){const i=Ze.charCodeAt(x.pos+1),e=Ze.charCodeAt(x.pos+2);i===Q.questionMark&&!(On&&x.isType)?e===Q.equalsTo?Un(_.assign,3):Un(_.nullishCoalescing,2):i===Q.dot&&!(e>=Q.digit0&&e<=Q.digit9)?(x.pos+=2,Zt(_.questionDot)):(++x.pos,Zt(_.question))}function TK(i){switch(i){case Q.numberSign:++x.pos,Zt(_.hash);return;case Q.dot:Gve();return;case Q.leftParenthesis:++x.pos,Zt(_.parenL);return;case Q.rightParenthesis:++x.pos,Zt(_.parenR);return;case Q.semicolon:++x.pos,Zt(_.semi);return;case Q.comma:++x.pos,Zt(_.comma);return;case Q.leftSquareBracket:++x.pos,Zt(_.bracketL);return;case Q.rightSquareBracket:++x.pos,Zt(_.bracketR);return;case Q.leftCurlyBrace:On&&Ze.charCodeAt(x.pos+1)===Q.verticalBar?Un(_.braceBarL,2):(++x.pos,Zt(_.braceL));return;case Q.rightCurlyBrace:++x.pos,Zt(_.braceR);return;case Q.colon:Ze.charCodeAt(x.pos+1)===Q.colon?Un(_.doubleColon,2):(++x.pos,Zt(_.colon));return;case Q.questionMark:n0e();return;case Q.atSign:++x.pos,Zt(_.at);return;case Q.graveAccent:++x.pos,Zt(_.backQuote);return;case Q.digit0:{const e=Ze.charCodeAt(x.pos+1);if(e===Q.lowercaseX||e===Q.uppercaseX||e===Q.lowercaseO||e===Q.uppercaseO||e===Q.lowercaseB||e===Q.uppercaseB){r0e();return}}case Q.digit1:case Q.digit2:case Q.digit3:case Q.digit4:case Q.digit5:case Q.digit6:case Q.digit7:case Q.digit8:case Q.digit9:kK(!1);return;case Q.quotationMark:case Q.apostrophe:s0e(i);return;case Q.slash:Zve();return;case Q.percentSign:case Q.asterisk:Xve(i);return;case Q.verticalBar:case Q.ampersand:Yve(i);return;case Q.caret:Qve();return;case Q.plusSign:case Q.dash:Jve(i);return;case Q.lessThan:e0e();return;case Q.greaterThan:SK();return;case Q.equalsTo:case Q.exclamationMark:t0e(i);return;case Q.tilde:Un(_.tilde,1);return}Xt(`Unexpected character '${String.fromCharCode(i)}'`,x.pos)}function Un(i,e){x.pos+=e,Zt(i)}function i0e(){const i=x.pos;let e=!1,t=!1;for(;;){if(x.pos>=Ze.length){Xt("Unterminated regular expression",i);return}const n=Ze.charCodeAt(x.pos);if(e)e=!1;else{if(n===Q.leftSquareBracket)t=!0;else if(n===Q.rightSquareBracket&&t)t=!1;else if(n===Q.slash&&!t)break;e=n===Q.backslash}++x.pos}++x.pos,a0e(),Zt(_.regexp)}function LR(){for(;;){const i=Ze.charCodeAt(x.pos);if(i>=Q.digit0&&i<=Q.digit9||i===Q.underscore)x.pos++;else break}}function r0e(){for(x.pos+=2;;){const e=Ze.charCodeAt(x.pos);if(e>=Q.digit0&&e<=Q.digit9||e>=Q.lowercaseA&&e<=Q.lowercaseF||e>=Q.uppercaseA&&e<=Q.uppercaseF||e===Q.underscore)x.pos++;else break}Ze.charCodeAt(x.pos)===Q.lowercaseN?(++x.pos,Zt(_.bigint)):Zt(_.num)}function kK(i){let e=!1,t=!1;i||LR();let n=Ze.charCodeAt(x.pos);if(n===Q.dot&&(++x.pos,LR(),n=Ze.charCodeAt(x.pos)),(n===Q.uppercaseE||n===Q.lowercaseE)&&(n=Ze.charCodeAt(++x.pos),(n===Q.plusSign||n===Q.dash)&&++x.pos,LR(),n=Ze.charCodeAt(x.pos)),n===Q.lowercaseN?(++x.pos,e=!0):n===Q.lowercaseM&&(++x.pos,t=!0),e){Zt(_.bigint);return}if(t){Zt(_.decimal);return}Zt(_.num)}function s0e(i){for(x.pos++;;){if(x.pos>=Ze.length){Xt("Unterminated string constant");return}const e=Ze.charCodeAt(x.pos);if(e===Q.backslash)x.pos++;else if(e===i)break;x.pos++}x.pos++,Zt(_.string)}function o0e(){for(;;){if(x.pos>=Ze.length){Xt("Unterminated template");return}const i=Ze.charCodeAt(x.pos);if(i===Q.graveAccent||i===Q.dollarSign&&Ze.charCodeAt(x.pos+1)===Q.leftCurlyBrace){if(x.pos===x.start&&O(_.template))if(i===Q.dollarSign){x.pos+=2,Zt(_.dollarBraceL);return}else{++x.pos,Zt(_.backQuote);return}Zt(_.template);return}i===Q.backslash&&x.pos++,x.pos++}}function a0e(){for(;x.pos<Ze.length;){const i=Ze.charCodeAt(x.pos);if(Pl[i])x.pos++;else if(i===Q.backslash){if(x.pos+=2,Ze.charCodeAt(x.pos)===Q.leftCurlyBrace){for(;x.pos<Ze.length&&Ze.charCodeAt(x.pos)!==Q.rightCurlyBrace;)x.pos++;x.pos++}}else break}}function S0(i,e=i.currentIndex()){let t=e+1;if(Tw(i,t)){const n=i.identifierNameAtIndex(e);return{isType:!1,leftName:n,rightName:n,endIndex:t}}if(t++,Tw(i,t))return{isType:!0,leftName:null,rightName:null,endIndex:t};if(t++,Tw(i,t))return{isType:!1,leftName:i.identifierNameAtIndex(e),rightName:i.identifierNameAtIndex(e+2),endIndex:t};if(t++,Tw(i,t))return{isType:!0,leftName:null,rightName:null,endIndex:t};throw new Error(`Unexpected import/export specifier at ${e}`)}function Tw(i,e){const t=i.tokens[e];return t.type===_.braceR||t.type===_.comma}const l0e=new Map([["quot",'"'],["amp","&"],["apos","'"],["lt","<"],["gt",">"],["nbsp"," "],["iexcl","¡"],["cent","¢"],["pound","£"],["curren","¤"],["yen","¥"],["brvbar","¦"],["sect","§"],["uml","¨"],["copy","©"],["ordf","ª"],["laquo","«"],["not","¬"],["shy","­"],["reg","®"],["macr","¯"],["deg","°"],["plusmn","±"],["sup2","²"],["sup3","³"],["acute","´"],["micro","µ"],["para","¶"],["middot","·"],["cedil","¸"],["sup1","¹"],["ordm","º"],["raquo","»"],["frac14","¼"],["frac12","½"],["frac34","¾"],["iquest","¿"],["Agrave","À"],["Aacute","Á"],["Acirc","Â"],["Atilde","Ã"],["Auml","Ä"],["Aring","Å"],["AElig","Æ"],["Ccedil","Ç"],["Egrave","È"],["Eacute","É"],["Ecirc","Ê"],["Euml","Ë"],["Igrave","Ì"],["Iacute","Í"],["Icirc","Î"],["Iuml","Ï"],["ETH","Ð"],["Ntilde","Ñ"],["Ograve","Ò"],["Oacute","Ó"],["Ocirc","Ô"],["Otilde","Õ"],["Ouml","Ö"],["times","×"],["Oslash","Ø"],["Ugrave","Ù"],["Uacute","Ú"],["Ucirc","Û"],["Uuml","Ü"],["Yacute","Ý"],["THORN","Þ"],["szlig","ß"],["agrave","à"],["aacute","á"],["acirc","â"],["atilde","ã"],["auml","ä"],["aring","å"],["aelig","æ"],["ccedil","ç"],["egrave","è"],["eacute","é"],["ecirc","ê"],["euml","ë"],["igrave","ì"],["iacute","í"],["icirc","î"],["iuml","ï"],["eth","ð"],["ntilde","ñ"],["ograve","ò"],["oacute","ó"],["ocirc","ô"],["otilde","õ"],["ouml","ö"],["divide","÷"],["oslash","ø"],["ugrave","ù"],["uacute","ú"],["ucirc","û"],["uuml","ü"],["yacute","ý"],["thorn","þ"],["yuml","ÿ"],["OElig","Œ"],["oelig","œ"],["Scaron","Š"],["scaron","š"],["Yuml","Ÿ"],["fnof","ƒ"],["circ","ˆ"],["tilde","˜"],["Alpha","Α"],["Beta","Β"],["Gamma","Γ"],["Delta","Δ"],["Epsilon","Ε"],["Zeta","Ζ"],["Eta","Η"],["Theta","Θ"],["Iota","Ι"],["Kappa","Κ"],["Lambda","Λ"],["Mu","Μ"],["Nu","Ν"],["Xi","Ξ"],["Omicron","Ο"],["Pi","Π"],["Rho","Ρ"],["Sigma","Σ"],["Tau","Τ"],["Upsilon","Υ"],["Phi","Φ"],["Chi","Χ"],["Psi","Ψ"],["Omega","Ω"],["alpha","α"],["beta","β"],["gamma","γ"],["delta","δ"],["epsilon","ε"],["zeta","ζ"],["eta","η"],["theta","θ"],["iota","ι"],["kappa","κ"],["lambda","λ"],["mu","μ"],["nu","ν"],["xi","ξ"],["omicron","ο"],["pi","π"],["rho","ρ"],["sigmaf","ς"],["sigma","σ"],["tau","τ"],["upsilon","υ"],["phi","φ"],["chi","χ"],["psi","ψ"],["omega","ω"],["thetasym","ϑ"],["upsih","ϒ"],["piv","ϖ"],["ensp"," "],["emsp"," "],["thinsp"," "],["zwnj","‌"],["zwj","‍"],["lrm","‎"],["rlm","‏"],["ndash","–"],["mdash","—"],["lsquo","‘"],["rsquo","’"],["sbquo","‚"],["ldquo","“"],["rdquo","”"],["bdquo","„"],["dagger","†"],["Dagger","‡"],["bull","•"],["hellip","…"],["permil","‰"],["prime","′"],["Prime","″"],["lsaquo","‹"],["rsaquo","›"],["oline","‾"],["frasl","⁄"],["euro","€"],["image","ℑ"],["weierp","℘"],["real","ℜ"],["trade","™"],["alefsym","ℵ"],["larr","←"],["uarr","↑"],["rarr","→"],["darr","↓"],["harr","↔"],["crarr","↵"],["lArr","⇐"],["uArr","⇑"],["rArr","⇒"],["dArr","⇓"],["hArr","⇔"],["forall","∀"],["part","∂"],["exist","∃"],["empty","∅"],["nabla","∇"],["isin","∈"],["notin","∉"],["ni","∋"],["prod","∏"],["sum","∑"],["minus","−"],["lowast","∗"],["radic","√"],["prop","∝"],["infin","∞"],["ang","∠"],["and","∧"],["or","∨"],["cap","∩"],["cup","∪"],["int","∫"],["there4","∴"],["sim","∼"],["cong","≅"],["asymp","≈"],["ne","≠"],["equiv","≡"],["le","≤"],["ge","≥"],["sub","⊂"],["sup","⊃"],["nsub","⊄"],["sube","⊆"],["supe","⊇"],["oplus","⊕"],["otimes","⊗"],["perp","⊥"],["sdot","⋅"],["lceil","⌈"],["rceil","⌉"],["lfloor","⌊"],["rfloor","⌋"],["lang","〈"],["rang","〉"],["loz","◊"],["spades","♠"],["clubs","♣"],["hearts","♥"],["diams","♦"]]);function LK(i){const[e,t]=O7(i.jsxPragma||"React.createElement"),[n,r]=O7(i.jsxFragmentPragma||"React.Fragment");return{base:e,suffix:t,fragmentBase:n,fragmentSuffix:r}}function O7(i){let e=i.indexOf(".");return e===-1&&(e=i.length),[i.slice(0,e),i.slice(e)]}class zl{getPrefixCode(){return""}getHoistedCode(){return""}getSuffixCode(){return""}}class Gf extends zl{__init(){this.lastLineNumber=1}__init2(){this.lastIndex=0}__init3(){this.filenameVarName=null}__init4(){this.esmAutomaticImportNameResolutions={}}__init5(){this.cjsAutomaticModuleNameResolutions={}}constructor(e,t,n,r,s){super(),this.rootTransformer=e,this.tokens=t,this.importProcessor=n,this.nameManager=r,this.options=s,Gf.prototype.__init.call(this),Gf.prototype.__init2.call(this),Gf.prototype.__init3.call(this),Gf.prototype.__init4.call(this),Gf.prototype.__init5.call(this),this.jsxPragmaInfo=LK(s),this.isAutomaticRuntime=s.jsxRuntime==="automatic",this.jsxImportSource=s.jsxImportSource||"react"}process(){return this.tokens.matches1(_.jsxTagStart)?(this.processJSXTag(),!0):!1}getPrefixCode(){let e="";if(this.filenameVarName&&(e+=`const ${this.filenameVarName} = ${JSON.stringify(this.options.filePath||"")};`),this.isAutomaticRuntime)if(this.importProcessor)for(const[t,n]of Object.entries(this.cjsAutomaticModuleNameResolutions))e+=`var ${n} = require("${t}");`;else{const{createElement:t,...n}=this.esmAutomaticImportNameResolutions;t&&(e+=`import {createElement as ${t}} from "${this.jsxImportSource}";`);const r=Object.entries(n).map(([s,o])=>`${s} as ${o}`).join(", ");if(r){const s=this.jsxImportSource+(this.options.production?"/jsx-runtime":"/jsx-dev-runtime");e+=`import {${r}} from "${s}";`}}return e}processJSXTag(){const{jsxRole:e,start:t}=this.tokens.currentToken(),n=this.options.production?null:this.getElementLocationCode(t);this.isAutomaticRuntime&&e!==wl.KeyAfterPropSpread?this.transformTagToJSXFunc(n,e):this.transformTagToCreateElement(n)}getElementLocationCode(e){return`lineNumber: ${this.getLineNumberForIndex(e)}`}getLineNumberForIndex(e){const t=this.tokens.code;for(;this.lastIndex<e&&this.lastIndex<t.length;)t[this.lastIndex]===`
`&&this.lastLineNumber++,this.lastIndex++;return this.lastLineNumber}transformTagToJSXFunc(e,t){const n=t===wl.StaticChildren;this.tokens.replaceToken(this.getJSXFuncInvocationCode(n));let r=null;if(this.tokens.matches1(_.jsxTagEnd))this.tokens.replaceToken(`${this.getFragmentCode()}, {`),this.processAutomaticChildrenAndEndProps(t);else{if(this.processTagIntro(),this.tokens.appendCode(", {"),r=this.processProps(!0),this.tokens.matches2(_.slash,_.jsxTagEnd))this.tokens.appendCode("}");else if(this.tokens.matches1(_.jsxTagEnd))this.tokens.removeToken(),this.processAutomaticChildrenAndEndProps(t);else throw new Error("Expected either /> or > at the end of the tag.");r&&this.tokens.appendCode(`, ${r}`)}for(this.options.production||(r===null&&this.tokens.appendCode(", void 0"),this.tokens.appendCode(`, ${n}, ${this.getDevSource(e)}, this`)),this.tokens.removeInitialToken();!this.tokens.matches1(_.jsxTagEnd);)this.tokens.removeToken();this.tokens.replaceToken(")")}transformTagToCreateElement(e){if(this.tokens.replaceToken(this.getCreateElementInvocationCode()),this.tokens.matches1(_.jsxTagEnd))this.tokens.replaceToken(`${this.getFragmentCode()}, null`),this.processChildren(!0);else if(this.processTagIntro(),this.processPropsObjectWithDevInfo(e),!this.tokens.matches2(_.slash,_.jsxTagEnd))if(this.tokens.matches1(_.jsxTagEnd))this.tokens.removeToken(),this.processChildren(!0);else throw new Error("Expected either /> or > at the end of the tag.");for(this.tokens.removeInitialToken();!this.tokens.matches1(_.jsxTagEnd);)this.tokens.removeToken();this.tokens.replaceToken(")")}getJSXFuncInvocationCode(e){return this.options.production?e?this.claimAutoImportedFuncInvocation("jsxs","/jsx-runtime"):this.claimAutoImportedFuncInvocation("jsx","/jsx-runtime"):this.claimAutoImportedFuncInvocation("jsxDEV","/jsx-dev-runtime")}getCreateElementInvocationCode(){if(this.isAutomaticRuntime)return this.claimAutoImportedFuncInvocation("createElement","");{const{jsxPragmaInfo:e}=this;return`${this.importProcessor&&this.importProcessor.getIdentifierReplacement(e.base)||e.base}${e.suffix}(`}}getFragmentCode(){if(this.isAutomaticRuntime)return this.claimAutoImportedName("Fragment",this.options.production?"/jsx-runtime":"/jsx-dev-runtime");{const{jsxPragmaInfo:e}=this;return(this.importProcessor&&this.importProcessor.getIdentifierReplacement(e.fragmentBase)||e.fragmentBase)+e.fragmentSuffix}}claimAutoImportedFuncInvocation(e,t){const n=this.claimAutoImportedName(e,t);return this.importProcessor?`${n}.call(void 0, `:`${n}(`}claimAutoImportedName(e,t){if(this.importProcessor){const n=this.jsxImportSource+t;return this.cjsAutomaticModuleNameResolutions[n]||(this.cjsAutomaticModuleNameResolutions[n]=this.importProcessor.getFreeIdentifierForPath(n)),`${this.cjsAutomaticModuleNameResolutions[n]}.${e}`}else return this.esmAutomaticImportNameResolutions[e]||(this.esmAutomaticImportNameResolutions[e]=this.nameManager.claimFreeName(`_${e}`)),this.esmAutomaticImportNameResolutions[e]}processTagIntro(){let e=this.tokens.currentIndex()+1;for(;this.tokens.tokens[e].isType||!this.tokens.matches2AtIndex(e-1,_.jsxName,_.jsxName)&&!this.tokens.matches2AtIndex(e-1,_.greaterThan,_.jsxName)&&!this.tokens.matches1AtIndex(e,_.braceL)&&!this.tokens.matches1AtIndex(e,_.jsxTagEnd)&&!this.tokens.matches2AtIndex(e,_.slash,_.jsxTagEnd);)e++;if(e===this.tokens.currentIndex()+1){const t=this.tokens.identifierName();DK(t)&&this.tokens.replaceToken(`'${t}'`)}for(;this.tokens.currentIndex()<e;)this.rootTransformer.processToken()}processPropsObjectWithDevInfo(e){const t=this.options.production?"":`__self: this, __source: ${this.getDevSource(e)}`;if(!this.tokens.matches1(_.jsxName)&&!this.tokens.matches1(_.braceL)){t?this.tokens.appendCode(`, {${t}}`):this.tokens.appendCode(", null");return}this.tokens.appendCode(", {"),this.processProps(!1),t?this.tokens.appendCode(` ${t}}`):this.tokens.appendCode("}")}processProps(e){let t=null;for(;;){if(this.tokens.matches2(_.jsxName,_.eq)){const n=this.tokens.identifierName();if(e&&n==="key"){t!==null&&this.tokens.appendCode(t.replace(/[^\n]/g,"")),this.tokens.removeToken(),this.tokens.removeToken();const r=this.tokens.snapshot();this.processPropValue(),t=this.tokens.dangerouslyGetAndRemoveCodeSinceSnapshot(r);continue}else this.processPropName(n),this.tokens.replaceToken(": "),this.processPropValue()}else if(this.tokens.matches1(_.jsxName)){const n=this.tokens.identifierName();this.processPropName(n),this.tokens.appendCode(": true")}else if(this.tokens.matches1(_.braceL))this.tokens.replaceToken(""),this.rootTransformer.processBalancedCode(),this.tokens.replaceToken("");else break;this.tokens.appendCode(",")}return t}processPropName(e){e.includes("-")?this.tokens.replaceToken(`'${e}'`):this.tokens.copyToken()}processPropValue(){this.tokens.matches1(_.braceL)?(this.tokens.replaceToken(""),this.rootTransformer.processBalancedCode(),this.tokens.replaceToken("")):this.tokens.matches1(_.jsxTagStart)?this.processJSXTag():this.processStringPropValue()}processStringPropValue(){const e=this.tokens.currentToken(),t=this.tokens.code.slice(e.start+1,e.end-1),n=F7(t),r=d0e(t);this.tokens.replaceToken(r+n)}processAutomaticChildrenAndEndProps(e){e===wl.StaticChildren?(this.tokens.appendCode(" children: ["),this.processChildren(!1),this.tokens.appendCode("]}")):(e===wl.OneChild&&this.tokens.appendCode(" children: "),this.processChildren(!1),this.tokens.appendCode("}"))}processChildren(e){let t=e;for(;;){if(this.tokens.matches2(_.jsxTagStart,_.slash))return;let n=!1;if(this.tokens.matches1(_.braceL))this.tokens.matches2(_.braceL,_.braceR)?(this.tokens.replaceToken(""),this.tokens.replaceToken("")):(this.tokens.replaceToken(t?", ":""),this.rootTransformer.processBalancedCode(),this.tokens.replaceToken(""),n=!0);else if(this.tokens.matches1(_.jsxTagStart))this.tokens.appendCode(t?", ":""),this.processJSXTag(),n=!0;else if(this.tokens.matches1(_.jsxText)||this.tokens.matches1(_.jsxEmptyText))n=this.processChildTextElement(t);else throw new Error("Unexpected token when processing JSX children.");n&&(t=!0)}}processChildTextElement(e){const t=this.tokens.currentToken(),n=this.tokens.code.slice(t.start,t.end),r=F7(n),s=c0e(n);return s==='""'?(this.tokens.replaceToken(r),!1):(this.tokens.replaceToken(`${e?", ":""}${s}${r}`),!0)}getDevSource(e){return`{fileName: ${this.getFilenameVarName()}, ${e}}`}getFilenameVarName(){return this.filenameVarName||(this.filenameVarName=this.nameManager.claimFreeName("_jsxFileName")),this.filenameVarName}}function DK(i){const e=i.charCodeAt(0);return e>=Q.lowercaseA&&e<=Q.lowercaseZ}function c0e(i){let e="",t="",n=!1,r=!1;for(let s=0;s<i.length;s++){const o=i[s];if(o===" "||o==="	"||o==="\r")n||(t+=o);else if(o===`
`)t="",n=!0;else{if(r&&n&&(e+=" "),e+=t,t="",o==="&"){const{entity:a,newI:l}=IK(i,s+1);s=l-1,e+=a}else e+=o;r=!0,n=!1}}return n||(e+=t),JSON.stringify(e)}function F7(i){let e=0,t=0;for(const n of i)n===`
`?(e++,t=0):n===" "&&t++;return`
`.repeat(e)+" ".repeat(t)}function d0e(i){let e="";for(let t=0;t<i.length;t++){const n=i[t];if(n===`
`)if(/\s/.test(i[t+1]))for(e+=" ";t<i.length&&/\s/.test(i[t+1]);)t++;else e+=`
`;else if(n==="&"){const{entity:r,newI:s}=IK(i,t+1);e+=r,t=s-1}else e+=n}return JSON.stringify(e)}function IK(i,e){let t="",n=0,r,s=e;if(i[s]==="#"){let o=10;s++;let a;if(i[s]==="x")for(o=16,s++,a=s;s<i.length&&h0e(i.charCodeAt(s));)s++;else for(a=s;s<i.length&&u0e(i.charCodeAt(s));)s++;if(i[s]===";"){const l=i.slice(a,s);l&&(s++,r=String.fromCodePoint(parseInt(l,o)))}}else for(;s<i.length&&n++<10;){const o=i[s];if(s++,o===";"){r=l0e.get(t);break}t+=o}return r?{entity:r,newI:s}:{entity:"&",newI:e}}function u0e(i){return i>=Q.digit0&&i<=Q.digit9}function h0e(i){return i>=Q.digit0&&i<=Q.digit9||i>=Q.lowercaseA&&i<=Q.lowercaseF||i>=Q.uppercaseA&&i<=Q.uppercaseF}function RK(i,e){const t=LK(e),n=new Set;for(let r=0;r<i.tokens.length;r++){const s=i.tokens[r];if(s.type===_.name&&!s.isType&&(s.identifierRole===Ct.Access||s.identifierRole===Ct.ObjectShorthand||s.identifierRole===Ct.ExportAccess)&&!s.shadowsGlobal&&n.add(i.identifierNameForToken(s)),s.type===_.jsxTagStart&&n.add(t.base),s.type===_.jsxTagStart&&r+1<i.tokens.length&&i.tokens[r+1].type===_.jsxTagEnd&&(n.add(t.base),n.add(t.fragmentBase)),s.type===_.jsxName&&s.identifierRole===Ct.Access){const o=i.identifierNameForToken(s);(!DK(o)||i.tokens[r+1].type===_.dot)&&n.add(i.identifierNameForToken(s))}}return n}class Zf{__init(){this.nonTypeIdentifiers=new Set}__init2(){this.importInfoByPath=new Map}__init3(){this.importsToReplace=new Map}__init4(){this.identifierReplacements=new Map}__init5(){this.exportBindingsByLocalName=new Map}constructor(e,t,n,r,s,o,a){this.nameManager=e,this.tokens=t,this.enableLegacyTypeScriptModuleInterop=n,this.options=r,this.isTypeScriptTransformEnabled=s,this.keepUnusedImports=o,this.helperManager=a,Zf.prototype.__init.call(this),Zf.prototype.__init2.call(this),Zf.prototype.__init3.call(this),Zf.prototype.__init4.call(this),Zf.prototype.__init5.call(this)}preprocessTokens(){for(let e=0;e<this.tokens.tokens.length;e++)this.tokens.matches1AtIndex(e,_._import)&&!this.tokens.matches3AtIndex(e,_._import,_.name,_.eq)&&this.preprocessImportAtIndex(e),this.tokens.matches1AtIndex(e,_._export)&&!this.tokens.matches2AtIndex(e,_._export,_.eq)&&this.preprocessExportAtIndex(e);this.generateImportReplacements()}pruneTypeOnlyImports(){this.nonTypeIdentifiers=RK(this.tokens,this.options);for(const[e,t]of this.importInfoByPath.entries()){if(t.hasBareImport||t.hasStarExport||t.exportStarNames.length>0||t.namedExports.length>0)continue;[...t.defaultNames,...t.wildcardNames,...t.namedImports.map(({localName:r})=>r)].every(r=>this.shouldAutomaticallyElideImportedName(r))&&this.importsToReplace.set(e,"")}}shouldAutomaticallyElideImportedName(e){return this.isTypeScriptTransformEnabled&&!this.keepUnusedImports&&!this.nonTypeIdentifiers.has(e)}generateImportReplacements(){for(const[e,t]of this.importInfoByPath.entries()){const{defaultNames:n,wildcardNames:r,namedImports:s,namedExports:o,exportStarNames:a,hasStarExport:l}=t;if(n.length===0&&r.length===0&&s.length===0&&o.length===0&&a.length===0&&!l){this.importsToReplace.set(e,`require('${e}');`);continue}const c=this.getFreeIdentifierForPath(e);let d;this.enableLegacyTypeScriptModuleInterop?d=c:d=r.length>0?r[0]:this.getFreeIdentifierForPath(e);let u=`var ${c} = require('${e}');`;if(r.length>0)for(const h of r){const f=this.enableLegacyTypeScriptModuleInterop?c:`${this.helperManager.getHelperName("interopRequireWildcard")}(${c})`;u+=` var ${h} = ${f};`}else a.length>0&&d!==c?u+=` var ${d} = ${this.helperManager.getHelperName("interopRequireWildcard")}(${c});`:n.length>0&&d!==c&&(u+=` var ${d} = ${this.helperManager.getHelperName("interopRequireDefault")}(${c});`);for(const{importedName:h,localName:f}of o)u+=` ${this.helperManager.getHelperName("createNamedExportFrom")}(${c}, '${f}', '${h}');`;for(const h of a)u+=` exports.${h} = ${d};`;l&&(u+=` ${this.helperManager.getHelperName("createStarExport")}(${c});`),this.importsToReplace.set(e,u);for(const h of n)this.identifierReplacements.set(h,`${d}.default`);for(const{importedName:h,localName:f}of s)this.identifierReplacements.set(f,`${c}.${h}`)}}getFreeIdentifierForPath(e){const t=e.split("/"),r=t[t.length-1].replace(/\W/g,"");return this.nameManager.claimFreeName(`_${r}`)}preprocessImportAtIndex(e){const t=[],n=[],r=[];if(e++,(this.tokens.matchesContextualAtIndex(e,z._type)||this.tokens.matches1AtIndex(e,_._typeof))&&!this.tokens.matches1AtIndex(e+1,_.comma)&&!this.tokens.matchesContextualAtIndex(e+1,z._from)||this.tokens.matches1AtIndex(e,_.parenL))return;if(this.tokens.matches1AtIndex(e,_.name)&&(t.push(this.tokens.identifierNameAtIndex(e)),e++,this.tokens.matches1AtIndex(e,_.comma)&&e++),this.tokens.matches1AtIndex(e,_.star)&&(e+=2,n.push(this.tokens.identifierNameAtIndex(e)),e++),this.tokens.matches1AtIndex(e,_.braceL)){const a=this.getNamedImports(e+1);e=a.newIndex;for(const l of a.namedImports)l.importedName==="default"?t.push(l.localName):r.push(l)}if(this.tokens.matchesContextualAtIndex(e,z._from)&&e++,!this.tokens.matches1AtIndex(e,_.string))throw new Error("Expected string token at the end of import statement.");const s=this.tokens.stringValueAtIndex(e),o=this.getImportInfo(s);o.defaultNames.push(...t),o.wildcardNames.push(...n),o.namedImports.push(...r),t.length===0&&n.length===0&&r.length===0&&(o.hasBareImport=!0)}preprocessExportAtIndex(e){if(this.tokens.matches2AtIndex(e,_._export,_._var)||this.tokens.matches2AtIndex(e,_._export,_._let)||this.tokens.matches2AtIndex(e,_._export,_._const))this.preprocessVarExportAtIndex(e);else if(this.tokens.matches2AtIndex(e,_._export,_._function)||this.tokens.matches2AtIndex(e,_._export,_._class)){const t=this.tokens.identifierNameAtIndex(e+2);this.addExportBinding(t,t)}else if(this.tokens.matches3AtIndex(e,_._export,_.name,_._function)){const t=this.tokens.identifierNameAtIndex(e+3);this.addExportBinding(t,t)}else this.tokens.matches2AtIndex(e,_._export,_.braceL)?this.preprocessNamedExportAtIndex(e):this.tokens.matches2AtIndex(e,_._export,_.star)&&this.preprocessExportStarAtIndex(e)}preprocessVarExportAtIndex(e){let t=0;for(let n=e+2;;n++)if(this.tokens.matches1AtIndex(n,_.braceL)||this.tokens.matches1AtIndex(n,_.dollarBraceL)||this.tokens.matches1AtIndex(n,_.bracketL))t++;else if(this.tokens.matches1AtIndex(n,_.braceR)||this.tokens.matches1AtIndex(n,_.bracketR))t--;else{if(t===0&&!this.tokens.matches1AtIndex(n,_.name))break;if(this.tokens.matches1AtIndex(1,_.eq)){const r=this.tokens.currentToken().rhsEndIndex;if(r==null)throw new Error("Expected = token with an end index.");n=r-1}else{const r=this.tokens.tokens[n];if(pK(r)){const s=this.tokens.identifierNameAtIndex(n);this.identifierReplacements.set(s,`exports.${s}`)}}}}preprocessNamedExportAtIndex(e){e+=2;const{newIndex:t,namedImports:n}=this.getNamedImports(e);if(e=t,this.tokens.matchesContextualAtIndex(e,z._from))e++;else{for(const{importedName:o,localName:a}of n)this.addExportBinding(o,a);return}if(!this.tokens.matches1AtIndex(e,_.string))throw new Error("Expected string token at the end of import statement.");const r=this.tokens.stringValueAtIndex(e);this.getImportInfo(r).namedExports.push(...n)}preprocessExportStarAtIndex(e){let t=null;if(this.tokens.matches3AtIndex(e,_._export,_.star,_._as)?(e+=3,t=this.tokens.identifierNameAtIndex(e),e+=2):e+=3,!this.tokens.matches1AtIndex(e,_.string))throw new Error("Expected string token at the end of star export statement.");const n=this.tokens.stringValueAtIndex(e),r=this.getImportInfo(n);t!==null?r.exportStarNames.push(t):r.hasStarExport=!0}getNamedImports(e){const t=[];for(;;){if(this.tokens.matches1AtIndex(e,_.braceR)){e++;break}const n=S0(this.tokens,e);if(e=n.endIndex,n.isType||t.push({importedName:n.leftName,localName:n.rightName}),this.tokens.matches2AtIndex(e,_.comma,_.braceR)){e+=2;break}else if(this.tokens.matches1AtIndex(e,_.braceR)){e++;break}else if(this.tokens.matches1AtIndex(e,_.comma))e++;else throw new Error(`Unexpected token: ${JSON.stringify(this.tokens.tokens[e])}`)}return{newIndex:e,namedImports:t}}getImportInfo(e){const t=this.importInfoByPath.get(e);if(t)return t;const n={defaultNames:[],wildcardNames:[],namedImports:[],namedExports:[],hasBareImport:!1,exportStarNames:[],hasStarExport:!1};return this.importInfoByPath.set(e,n),n}addExportBinding(e,t){this.exportBindingsByLocalName.has(e)||this.exportBindingsByLocalName.set(e,[]),this.exportBindingsByLocalName.get(e).push(t)}claimImportCode(e){const t=this.importsToReplace.get(e);return this.importsToReplace.set(e,""),t||""}getIdentifierReplacement(e){return this.identifierReplacements.get(e)||null}resolveExportBinding(e){const t=this.exportBindingsByLocalName.get(e);return!t||t.length===0?null:t.map(n=>`exports.${n}`).join(" = ")}getGlobalNames(){return new Set([...this.identifierReplacements.keys(),...this.exportBindingsByLocalName.keys()])}}var Ml=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function f0e(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var c2={exports:{}},kw={exports:{}},B7;function g0e(){return B7||(B7=1,function(i,e){(function(t,n){n(e)})(Ml,function(t){t.get=void 0,t.put=void 0,t.pop=void 0;class n{constructor(){this._indexes={__proto__:null},this.array=[]}}t.get=(r,s)=>r._indexes[s],t.put=(r,s)=>{const o=t.get(r,s);if(o!==void 0)return o;const{array:a,_indexes:l}=r;return l[s]=a.push(s)-1},t.pop=r=>{const{array:s,_indexes:o}=r;if(s.length===0)return;const a=s.pop();o[a]=void 0},t.SetArray=n,Object.defineProperty(t,"__esModule",{value:!0})})}(kw,kw.exports)),kw.exports}var Lw={exports:{}},W7;function EK(){return W7||(W7=1,function(i,e){(function(t,n){n(e)})(Ml,function(t){const n=",".charCodeAt(0),r=";".charCodeAt(0),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=new Uint8Array(64),a=new Uint8Array(128);for(let b=0;b<s.length;b++){const v=s.charCodeAt(b);o[b]=v,a[v]=b}const l=typeof TextDecoder<"u"?new TextDecoder:typeof Buffer<"u"?{decode(b){return Buffer.from(b.buffer,b.byteOffset,b.byteLength).toString()}}:{decode(b){let v="";for(let C=0;C<b.length;C++)v+=String.fromCharCode(b[C]);return v}};function c(b){const v=new Int32Array(5),C=[];let w=0;do{const S=d(b,w),L=[];let T=!0,I=0;v[0]=0;for(let R=w;R<S;R++){let B;R=u(b,R,v,0);const V=v[0];V<I&&(T=!1),I=V,h(b,R,S)?(R=u(b,R,v,1),R=u(b,R,v,2),R=u(b,R,v,3),h(b,R,S)?(R=u(b,R,v,4),B=[V,v[1],v[2],v[3],v[4]]):B=[V,v[1],v[2],v[3]]):B=[V],L.push(B)}T||f(L),C.push(L),w=S+1}while(w<=b.length);return C}function d(b,v){const C=b.indexOf(";",v);return C===-1?b.length:C}function u(b,v,C,w){let S=0,L=0,T=0;do{const R=b.charCodeAt(v++);T=a[R],S|=(T&31)<<L,L+=5}while(T&32);const I=S&1;return S>>>=1,I&&(S=-2147483648|-S),C[w]+=S,v}function h(b,v,C){return v>=C?!1:b.charCodeAt(v)!==n}function f(b){b.sort(g)}function g(b,v){return b[0]-v[0]}function m(b){const v=new Int32Array(5),C=1024*16,w=C-36,S=new Uint8Array(C),L=S.subarray(0,w);let T=0,I="";for(let R=0;R<b.length;R++){const B=b[R];if(R>0&&(T===C&&(I+=l.decode(S),T=0),S[T++]=r),B.length!==0){v[0]=0;for(let V=0;V<B.length;V++){const F=B[V];T>w&&(I+=l.decode(L),S.copyWithin(0,w,T),T-=w),V>0&&(S[T++]=n),T=y(S,T,v,F,0),F.length!==1&&(T=y(S,T,v,F,1),T=y(S,T,v,F,2),T=y(S,T,v,F,3),F.length!==4&&(T=y(S,T,v,F,4)))}}}return I+l.decode(S.subarray(0,T))}function y(b,v,C,w,S){const L=w[S];let T=L-C[S];C[S]=L,T=T<0?-T<<1|1:T<<1;do{let I=T&31;T>>>=5,T>0&&(I|=32),b[v++]=o[I]}while(T>0);return v}t.decode=c,t.encode=m,Object.defineProperty(t,"__esModule",{value:!0})})}(Lw,Lw.exports)),Lw.exports}var Dw={exports:{}},DR={exports:{}},V7;function p0e(){return V7||(V7=1,function(i,e){(function(t,n){i.exports=n()})(Ml,function(){const t=/^[\w+.-]+:\/\//,n=/^([\w+.-]+:)\/\/([^@/#?]*@)?([^:/#?]*)(:\d+)?(\/[^#?]*)?(\?[^#]*)?(#.*)?/,r=/^file:(?:\/\/((?![a-z]:)[^/#?]*)?)?(\/?[^#?]*)(\?[^#]*)?(#.*)?/i;var s;(function(C){C[C.Empty=1]="Empty",C[C.Hash=2]="Hash",C[C.Query=3]="Query",C[C.RelativePath=4]="RelativePath",C[C.AbsolutePath=5]="AbsolutePath",C[C.SchemeRelative=6]="SchemeRelative",C[C.Absolute=7]="Absolute"})(s||(s={}));function o(C){return t.test(C)}function a(C){return C.startsWith("//")}function l(C){return C.startsWith("/")}function c(C){return C.startsWith("file:")}function d(C){return/^[.?#]/.test(C)}function u(C){const w=n.exec(C);return f(w[1],w[2]||"",w[3],w[4]||"",w[5]||"/",w[6]||"",w[7]||"")}function h(C){const w=r.exec(C),S=w[2];return f("file:","",w[1]||"","",l(S)?S:"/"+S,w[3]||"",w[4]||"")}function f(C,w,S,L,T,I,R){return{scheme:C,user:w,host:S,port:L,path:T,query:I,hash:R,type:s.Absolute}}function g(C){if(a(C)){const S=u("http:"+C);return S.scheme="",S.type=s.SchemeRelative,S}if(l(C)){const S=u("http://foo.com"+C);return S.scheme="",S.host="",S.type=s.AbsolutePath,S}if(c(C))return h(C);if(o(C))return u(C);const w=u("http://foo.com/"+C);return w.scheme="",w.host="",w.type=C?C.startsWith("?")?s.Query:C.startsWith("#")?s.Hash:s.RelativePath:s.Empty,w}function m(C){if(C.endsWith("/.."))return C;const w=C.lastIndexOf("/");return C.slice(0,w+1)}function y(C,w){b(w,w.type),C.path==="/"?C.path=w.path:C.path=m(w.path)+C.path}function b(C,w){const S=w<=s.RelativePath,L=C.path.split("/");let T=1,I=0,R=!1;for(let V=1;V<L.length;V++){const F=L[V];if(!F){R=!0;continue}if(R=!1,F!=="."){if(F===".."){I?(R=!0,I--,T--):S&&(L[T++]=F);continue}L[T++]=F,I++}}let B="";for(let V=1;V<T;V++)B+="/"+L[V];(!B||R&&!B.endsWith("/.."))&&(B+="/"),C.path=B}function v(C,w){if(!C&&!w)return"";const S=g(C);let L=S.type;if(w&&L!==s.Absolute){const I=g(w),R=I.type;switch(L){case s.Empty:S.hash=I.hash;case s.Hash:S.query=I.query;case s.Query:case s.RelativePath:y(S,I);case s.AbsolutePath:S.user=I.user,S.host=I.host,S.port=I.port;case s.SchemeRelative:S.scheme=I.scheme}R>L&&(L=R)}b(S,L);const T=S.query+S.hash;switch(L){case s.Hash:case s.Query:return T;case s.RelativePath:{const I=S.path.slice(1);return I?d(w||C)&&!d(I)?"./"+I+T:I+T:T||"."}case s.AbsolutePath:return S.path+T;default:return S.scheme+"//"+S.user+S.host+S.port+S.path+T}}return v})}(DR)),DR.exports}var H7;function m0e(){return H7||(H7=1,function(i,e){(function(t,n){n(e,EK(),p0e())})(Ml,function(t,n,r){function s(ie){return ie&&typeof ie=="object"&&"default"in ie?ie:{default:ie}}var o=s(r);function a(ie,te){return te&&!te.endsWith("/")&&(te+="/"),o.default(ie,te)}function l(ie){if(!ie)return"";const te=ie.lastIndexOf("/");return ie.slice(0,te+1)}const c=0,d=1,u=2,h=3,f=4,g=1,m=2;function y(ie,te){const Y=b(ie,0);if(Y===ie.length)return ie;te||(ie=ie.slice());for(let De=Y;De<ie.length;De=b(ie,De+1))ie[De]=C(ie[De],te);return ie}function b(ie,te){for(let Y=te;Y<ie.length;Y++)if(!v(ie[Y]))return Y;return ie.length}function v(ie){for(let te=1;te<ie.length;te++)if(ie[te][c]<ie[te-1][c])return!1;return!0}function C(ie,te){return te||(ie=ie.slice()),ie.sort(w)}function w(ie,te){return ie[c]-te[c]}let S=!1;function L(ie,te,Y,De){for(;Y<=De;){const Je=Y+(De-Y>>1),We=ie[Je][c]-te;if(We===0)return S=!0,Je;We<0?Y=Je+1:De=Je-1}return S=!1,Y-1}function T(ie,te,Y){for(let De=Y+1;De<ie.length&&ie[De][c]===te;Y=De++);return Y}function I(ie,te,Y){for(let De=Y-1;De>=0&&ie[De][c]===te;Y=De--);return Y}function R(){return{lastKey:-1,lastNeedle:-1,lastIndex:-1}}function B(ie,te,Y,De){const{lastKey:Je,lastNeedle:We,lastIndex:Ge}=Y;let Tt=0,pt=ie.length-1;if(De===Je){if(te===We)return S=Ge!==-1&&ie[Ge][c]===te,Ge;te>=We?Tt=Ge===-1?0:Ge:pt=Ge}return Y.lastKey=De,Y.lastNeedle=te,Y.lastIndex=L(ie,te,Tt,pt)}function V(ie,te){const Y=te.map(W);for(let De=0;De<ie.length;De++){const Je=ie[De];for(let We=0;We<Je.length;We++){const Ge=Je[We];if(Ge.length===1)continue;const Tt=Ge[d],pt=Ge[u],Nt=Ge[h],hn=Y[Tt],ne=hn[pt]||(hn[pt]=[]),G=te[Tt],Z=T(ne,Nt,B(ne,Nt,G,pt));F(ne,G.lastIndex=Z+1,[Nt,De,Ge[c]])}}return Y}function F(ie,te,Y){for(let De=ie.length;De>te;De--)ie[De]=ie[De-1];ie[te]=Y}function W(){return{__proto__:null}}const X=function(ie,te){const Y=typeof ie=="string"?JSON.parse(ie):ie;if(!("sections"in Y))return new be(Y,te);const De=[],Je=[],We=[],Ge=[];oe(Y,te,De,Je,We,Ge,0,0,1/0,1/0);const Tt={version:3,file:Y.file,names:Ge,sources:Je,sourcesContent:We,mappings:De};return t.presortedDecodedMap(Tt)};function oe(ie,te,Y,De,Je,We,Ge,Tt,pt,Nt){const{sections:hn}=ie;for(let ne=0;ne<hn.length;ne++){const{map:G,offset:Z}=hn[ne];let A=pt,M=Nt;if(ne+1<hn.length){const $=hn[ne+1].offset;A=Math.min(pt,Ge+$.line),A===pt?M=Math.min(Nt,Tt+$.column):A<pt&&(M=Tt+$.column)}we(G,te,Y,De,Je,We,Ge+Z.line,Tt+Z.column,A,M)}}function we(ie,te,Y,De,Je,We,Ge,Tt,pt,Nt){if("sections"in ie)return oe(...arguments);const hn=new be(ie,te),ne=De.length,G=We.length,Z=t.decodedMappings(hn),{resolvedSources:A,sourcesContent:M}=hn;if(ke(De,A),ke(We,hn.names),M)ke(Je,M);else for(let $=0;$<A.length;$++)Je.push(null);for(let $=0;$<Z.length;$++){const j=Ge+$;if(j>pt)return;const le=Ee(Y,j),Ie=$===0?Tt:0,je=Z[$];for(let Xe=0;Xe<je.length;Xe++){const at=je[Xe],lt=Ie+at[c];if(j===pt&&lt>=Nt)return;if(at.length===1){le.push([lt]);continue}const on=ne+at[d],en=at[u],nt=at[h];le.push(at.length===4?[lt,on,en,nt]:[lt,on,en,nt,G+at[f]])}}}function ke(ie,te){for(let Y=0;Y<te.length;Y++)ie.push(te[Y])}function Ee(ie,te){for(let Y=ie.length;Y<=te;Y++)ie[Y]=[];return ie[te]}const Le="`line` must be greater than 0 (lines start at line 1)",qe="`column` must be greater than or equal to 0 (columns start at column 0)",Ue=-1,Oe=1;t.encodedMappings=void 0,t.decodedMappings=void 0,t.traceSegment=void 0,t.originalPositionFor=void 0,t.generatedPositionFor=void 0,t.allGeneratedPositionsFor=void 0,t.eachMapping=void 0,t.sourceContentFor=void 0,t.presortedDecodedMap=void 0,t.decodedMap=void 0,t.encodedMap=void 0;class be{constructor(te,Y){const De=typeof te=="string";if(!De&&te._decodedMemo)return te;const Je=De?JSON.parse(te):te,{version:We,file:Ge,names:Tt,sourceRoot:pt,sources:Nt,sourcesContent:hn}=Je;this.version=We,this.file=Ge,this.names=Tt||[],this.sourceRoot=pt,this.sources=Nt,this.sourcesContent=hn;const ne=a(pt||"",l(Y));this.resolvedSources=Nt.map(Z=>a(Z||"",ne));const{mappings:G}=Je;typeof G=="string"?(this._encoded=G,this._decoded=void 0):(this._encoded=void 0,this._decoded=y(G,De)),this._decodedMemo=R(),this._bySources=void 0,this._bySourceMemos=void 0}}(()=>{t.encodedMappings=te=>{var Y;return(Y=te._encoded)!==null&&Y!==void 0?Y:te._encoded=n.encode(te._decoded)},t.decodedMappings=te=>te._decoded||(te._decoded=n.decode(te._encoded)),t.traceSegment=(te,Y,De)=>{const Je=t.decodedMappings(te);if(Y>=Je.length)return null;const We=Je[Y],Ge=pe(We,te._decodedMemo,Y,De,Oe);return Ge===-1?null:We[Ge]},t.originalPositionFor=(te,{line:Y,column:De,bias:Je})=>{if(Y--,Y<0)throw new Error(Le);if(De<0)throw new Error(qe);const We=t.decodedMappings(te);if(Y>=We.length)return he(null,null,null,null);const Ge=We[Y],Tt=pe(Ge,te._decodedMemo,Y,De,Je||Oe);if(Tt===-1)return he(null,null,null,null);const pt=Ge[Tt];if(pt.length===1)return he(null,null,null,null);const{names:Nt,resolvedSources:hn}=te;return he(hn[pt[d]],pt[u]+1,pt[h],pt.length===5?Nt[pt[f]]:null)},t.allGeneratedPositionsFor=(te,{source:Y,line:De,column:Je,bias:We})=>ie(te,Y,De,Je,We||Ue,!0),t.generatedPositionFor=(te,{source:Y,line:De,column:Je,bias:We})=>ie(te,Y,De,Je,We||Oe,!1),t.eachMapping=(te,Y)=>{const De=t.decodedMappings(te),{names:Je,resolvedSources:We}=te;for(let Ge=0;Ge<De.length;Ge++){const Tt=De[Ge];for(let pt=0;pt<Tt.length;pt++){const Nt=Tt[pt],hn=Ge+1,ne=Nt[0];let G=null,Z=null,A=null,M=null;Nt.length!==1&&(G=We[Nt[1]],Z=Nt[2]+1,A=Nt[3]),Nt.length===5&&(M=Je[Nt[4]]),Y({generatedLine:hn,generatedColumn:ne,source:G,originalLine:Z,originalColumn:A,name:M})}}},t.sourceContentFor=(te,Y)=>{const{sources:De,resolvedSources:Je,sourcesContent:We}=te;if(We==null)return null;let Ge=De.indexOf(Y);return Ge===-1&&(Ge=Je.indexOf(Y)),Ge===-1?null:We[Ge]},t.presortedDecodedMap=(te,Y)=>{const De=new be(un(te,[]),Y);return De._decoded=te.mappings,De},t.decodedMap=te=>un(te,t.decodedMappings(te)),t.encodedMap=te=>un(te,t.encodedMappings(te));function ie(te,Y,De,Je,We,Ge){if(De--,De<0)throw new Error(Le);if(Je<0)throw new Error(qe);const{sources:Tt,resolvedSources:pt}=te;let Nt=Tt.indexOf(Y);if(Nt===-1&&(Nt=pt.indexOf(Y)),Nt===-1)return Ge?[]:_e(null,null);const ne=(te._bySources||(te._bySources=V(t.decodedMappings(te),te._bySourceMemos=Tt.map(R))))[Nt][De];if(ne==null)return Ge?[]:_e(null,null);const G=te._bySourceMemos[Nt];if(Ge)return Pe(ne,G,De,Je,We);const Z=pe(ne,G,De,Je,We);if(Z===-1)return _e(null,null);const A=ne[Z];return _e(A[g]+1,A[m])}})();function un(ie,te){return{version:ie.version,file:ie.file,names:ie.names,sourceRoot:ie.sourceRoot,sources:ie.sources,sourcesContent:ie.sourcesContent,mappings:te}}function he(ie,te,Y,De){return{source:ie,line:te,column:Y,name:De}}function _e(ie,te){return{line:ie,column:te}}function pe(ie,te,Y,De,Je){let We=B(ie,De,te,Y);return S?We=(Je===Ue?T:I)(ie,De,We):Je===Ue&&We++,We===-1||We===ie.length?-1:We}function Pe(ie,te,Y,De,Je){let We=pe(ie,te,Y,De,Oe);if(!S&&Je===Ue&&We++,We===-1||We===ie.length)return[];const Ge=S?De:ie[We][c];S||(We=I(ie,Ge,We));const Tt=T(ie,Ge,We),pt=[];for(;We<=Tt;We++){const Nt=ie[We];pt.push(_e(Nt[g]+1,Nt[m]))}return pt}t.AnyMap=X,t.GREATEST_LOWER_BOUND=Oe,t.LEAST_UPPER_BOUND=Ue,t.TraceMap=be,Object.defineProperty(t,"__esModule",{value:!0})})}(Dw,Dw.exports)),Dw.exports}(function(i,e){(function(t,n){n(e,g0e(),EK(),m0e())})(Ml,function(t,n,r,s){t.addSegment=void 0,t.addMapping=void 0,t.maybeAddSegment=void 0,t.maybeAddMapping=void 0,t.setSourceContent=void 0,t.toDecodedMap=void 0,t.toEncodedMap=void 0,t.fromMap=void 0,t.allMappings=void 0;let h;class f{constructor({file:T,sourceRoot:I}={}){this._names=new n.SetArray,this._sources=new n.SetArray,this._sourcesContent=[],this._mappings=[],this.file=T,this.sourceRoot=I}}t.addSegment=(L,T,I,R,B,V,F,W)=>h(!1,L,T,I,R,B,V,F,W),t.maybeAddSegment=(L,T,I,R,B,V,F,W)=>h(!0,L,T,I,R,B,V,F,W),t.addMapping=(L,T)=>S(!1,L,T),t.maybeAddMapping=(L,T)=>S(!0,L,T),t.setSourceContent=(L,T,I)=>{const{_sources:R,_sourcesContent:B}=L;B[n.put(R,T)]=I},t.toDecodedMap=L=>{const{file:T,sourceRoot:I,_mappings:R,_sources:B,_sourcesContent:V,_names:F}=L;return b(R),{version:3,file:T||void 0,names:F.array,sourceRoot:I||void 0,sources:B.array,sourcesContent:V,mappings:R}},t.toEncodedMap=L=>{const T=t.toDecodedMap(L);return Object.assign(Object.assign({},T),{mappings:r.encode(T.mappings)})},t.allMappings=L=>{const T=[],{_mappings:I,_sources:R,_names:B}=L;for(let V=0;V<I.length;V++){const F=I[V];for(let W=0;W<F.length;W++){const X=F[W],oe={line:V+1,column:X[0]};let we,ke,Ee;X.length!==1&&(we=R.array[X[1]],ke={line:X[2]+1,column:X[3]},X.length===5&&(Ee=B.array[X[4]])),T.push({generated:oe,source:we,original:ke,name:Ee})}}return T},t.fromMap=L=>{const T=new s.TraceMap(L),I=new f({file:T.file,sourceRoot:T.sourceRoot});return v(I._names,T.names),v(I._sources,T.sources),I._sourcesContent=T.sourcesContent||T.sources.map(()=>null),I._mappings=s.decodedMappings(T),I},h=(L,T,I,R,B,V,F,W,X)=>{const{_mappings:oe,_sources:we,_sourcesContent:ke,_names:Ee}=T,Le=g(oe,I),qe=m(Le,R);if(!B)return L&&C(Le,qe)?void 0:y(Le,qe,[R]);const Ue=n.put(we,B),Oe=W?n.put(Ee,W):-1;if(Ue===ke.length&&(ke[Ue]=X??null),!(L&&w(Le,qe,Ue,V,F,Oe)))return y(Le,qe,W?[R,Ue,V,F,Oe]:[R,Ue,V,F])};function g(L,T){for(let I=L.length;I<=T;I++)L[I]=[];return L[T]}function m(L,T){let I=L.length;for(let R=I-1;R>=0;I=R--){const B=L[R];if(T>=B[0])break}return I}function y(L,T,I){for(let R=L.length;R>T;R--)L[R]=L[R-1];L[T]=I}function b(L){const{length:T}=L;let I=T;for(let R=I-1;R>=0&&!(L[R].length>0);I=R,R--);I<T&&(L.length=I)}function v(L,T){for(let I=0;I<T.length;I++)n.put(L,T[I])}function C(L,T){return T===0?!0:L[T-1].length===1}function w(L,T,I,R,B,V){if(T===0)return!1;const F=L[T-1];return F.length===1?!1:I===F[1]&&R===F[2]&&B===F[3]&&V===(F.length===5?F[4]:-1)}function S(L,T,I){const{generated:R,source:B,original:V,name:F,content:W}=I;if(!B)return h(L,T,R.line-1,R.column,null,null,null,null,null);const X=B;return h(L,T,R.line-1,R.column,X,V.line-1,V.column,F,W)}t.GenMapping=f,Object.defineProperty(t,"__esModule",{value:!0})})})(c2,c2.exports);var bb=c2.exports;function _0e({code:i,mappings:e},t,n,r,s){const o=b0e(r,s),a=new bb.GenMapping({file:n.compiledFilename});let l=0,c=e[0];for(;c===void 0&&l<e.length-1;)l++,c=e[l];let d=0,u=0;c!==u&&bb.maybeAddSegment(a,d,0,t,d,0);for(let m=0;m<i.length;m++){if(m===c){const y=c-u,b=o[l];for(bb.maybeAddSegment(a,d,y,t,d,b);(c===m||c===void 0)&&l<e.length-1;)l++,c=e[l]}i.charCodeAt(m)===Q.lineFeed&&(d++,u=m+1,c!==u&&bb.maybeAddSegment(a,d,0,t,d,0))}const{sourceRoot:h,sourcesContent:f,...g}=bb.toEncodedMap(a);return g}function b0e(i,e){const t=new Array(e.length);let n=0,r=e[n].start,s=0;for(let o=0;o<i.length;o++)o===r&&(t[n]=r-s,n++,r=e[n].start),i.charCodeAt(o)===Q.lineFeed&&(s=o+1);return t}const v0e={require:`
    import {createRequire as CREATE_REQUIRE_NAME} from "module";
    const require = CREATE_REQUIRE_NAME(import.meta.url);
  `,interopRequireWildcard:`
    function interopRequireWildcard(obj) {
      if (obj && obj.__esModule) {
        return obj;
      } else {
        var newObj = {};
        if (obj != null) {
          for (var key in obj) {
            if (Object.prototype.hasOwnProperty.call(obj, key)) {
              newObj[key] = obj[key];
            }
          }
        }
        newObj.default = obj;
        return newObj;
      }
    }
  `,interopRequireDefault:`
    function interopRequireDefault(obj) {
      return obj && obj.__esModule ? obj : { default: obj };
    }
  `,createNamedExportFrom:`
    function createNamedExportFrom(obj, localName, importedName) {
      Object.defineProperty(exports, localName, {enumerable: true, configurable: true, get: () => obj[importedName]});
    }
  `,createStarExport:`
    function createStarExport(obj) {
      Object.keys(obj)
        .filter((key) => key !== "default" && key !== "__esModule")
        .forEach((key) => {
          if (exports.hasOwnProperty(key)) {
            return;
          }
          Object.defineProperty(exports, key, {enumerable: true, configurable: true, get: () => obj[key]});
        });
    }
  `,nullishCoalesce:`
    function nullishCoalesce(lhs, rhsFn) {
      if (lhs != null) {
        return lhs;
      } else {
        return rhsFn();
      }
    }
  `,asyncNullishCoalesce:`
    async function asyncNullishCoalesce(lhs, rhsFn) {
      if (lhs != null) {
        return lhs;
      } else {
        return await rhsFn();
      }
    }
  `,optionalChain:`
    function optionalChain(ops) {
      let lastAccessLHS = undefined;
      let value = ops[0];
      let i = 1;
      while (i < ops.length) {
        const op = ops[i];
        const fn = ops[i + 1];
        i += 2;
        if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) {
          return undefined;
        }
        if (op === 'access' || op === 'optionalAccess') {
          lastAccessLHS = value;
          value = fn(value);
        } else if (op === 'call' || op === 'optionalCall') {
          value = fn((...args) => value.call(lastAccessLHS, ...args));
          lastAccessLHS = undefined;
        }
      }
      return value;
    }
  `,asyncOptionalChain:`
    async function asyncOptionalChain(ops) {
      let lastAccessLHS = undefined;
      let value = ops[0];
      let i = 1;
      while (i < ops.length) {
        const op = ops[i];
        const fn = ops[i + 1];
        i += 2;
        if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) {
          return undefined;
        }
        if (op === 'access' || op === 'optionalAccess') {
          lastAccessLHS = value;
          value = await fn(value);
        } else if (op === 'call' || op === 'optionalCall') {
          value = await fn((...args) => value.call(lastAccessLHS, ...args));
          lastAccessLHS = undefined;
        }
      }
      return value;
    }
  `,optionalChainDelete:`
    function optionalChainDelete(ops) {
      const result = OPTIONAL_CHAIN_NAME(ops);
      return result == null ? true : result;
    }
  `,asyncOptionalChainDelete:`
    async function asyncOptionalChainDelete(ops) {
      const result = await ASYNC_OPTIONAL_CHAIN_NAME(ops);
      return result == null ? true : result;
    }
  `};class sT{__init(){this.helperNames={}}__init2(){this.createRequireName=null}constructor(e){this.nameManager=e,sT.prototype.__init.call(this),sT.prototype.__init2.call(this)}getHelperName(e){let t=this.helperNames[e];return t||(t=this.nameManager.claimFreeName(`_${e}`),this.helperNames[e]=t,t)}emitHelpers(){let e="";this.helperNames.optionalChainDelete&&this.getHelperName("optionalChain"),this.helperNames.asyncOptionalChainDelete&&this.getHelperName("asyncOptionalChain");for(const[t,n]of Object.entries(v0e)){const r=this.helperNames[t];let s=n;t==="optionalChainDelete"?s=s.replace("OPTIONAL_CHAIN_NAME",this.helperNames.optionalChain):t==="asyncOptionalChainDelete"?s=s.replace("ASYNC_OPTIONAL_CHAIN_NAME",this.helperNames.asyncOptionalChain):t==="require"&&(this.createRequireName===null&&(this.createRequireName=this.nameManager.claimFreeName("_createRequire")),s=s.replace(/CREATE_REQUIRE_NAME/g,this.createRequireName)),r&&(e+=" ",e+=s.replace(t,r).replace(/\s+/g," ").trim())}return e}}function U7(i,e,t){y0e(i,t)&&C0e(i,e,t)}function y0e(i,e){for(const t of i.tokens)if(t.type===_.name&&!t.isType&&Vve(t)&&e.has(i.identifierNameForToken(t)))return!0;return!1}function C0e(i,e,t){const n=[];let r=e.length-1;for(let s=i.tokens.length-1;;s--){for(;n.length>0&&n[n.length-1].startTokenIndex===s+1;)n.pop();for(;r>=0&&e[r].endTokenIndex===s+1;)n.push(e[r]),r--;if(s<0)break;const o=i.tokens[s],a=i.identifierNameForToken(o);if(n.length>1&&!o.isType&&o.type===_.name&&t.has(a)){if(Hve(o))j7(n[n.length-1],i,a);else if(Uve(o)){let l=n.length-1;for(;l>0&&!n[l].isFunctionScope;)l--;if(l<0)throw new Error("Did not find parent function scope.");j7(n[l],i,a)}}}if(n.length>0)throw new Error("Expected empty scope stack after processing file.")}function j7(i,e,t){for(let n=i.startTokenIndex;n<i.endTokenIndex;n++){const r=e.tokens[n];(r.type===_.name||r.type===_.jsxName)&&e.identifierNameForToken(r)===t&&(r.shadowsGlobal=!0)}}function w0e(i,e){const t=[];for(const n of e)n.type===_.name&&t.push(i.slice(n.start,n.end));return t}class q4{__init(){this.usedNames=new Set}constructor(e,t){q4.prototype.__init.call(this),this.usedNames=new Set(w0e(e,t))}claimFreeName(e){const t=this.findFreeName(e);return this.usedNames.add(t),t}findFreeName(e){if(!this.usedNames.has(e))return e;let t=2;for(;this.usedNames.has(e+String(t));)t++;return e+String(t)}}var ri={},d2={},Ac={},S0e=Ml&&Ml.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},i(e,t)};return function(e,t){i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ac,"__esModule",{value:!0});Ac.DetailContext=Ac.NoopContext=Ac.VError=void 0;var NK=function(i){S0e(e,i);function e(t,n){var r=i.call(this,n)||this;return r.path=t,Object.setPrototypeOf(r,e.prototype),r}return e}(Error);Ac.VError=NK;var x0e=function(){function i(){}return i.prototype.fail=function(e,t,n){return!1},i.prototype.unionResolver=function(){return this},i.prototype.createContext=function(){return this},i.prototype.resolveUnion=function(e){},i}();Ac.NoopContext=x0e;var AK=function(){function i(){this._propNames=[""],this._messages=[null],this._score=0}return i.prototype.fail=function(e,t,n){return this._propNames.push(e),this._messages.push(t),this._score+=n,!1},i.prototype.unionResolver=function(){return new T0e},i.prototype.resolveUnion=function(e){for(var t,n,r=e,s=null,o=0,a=r.contexts;o<a.length;o++){var l=a[o];(!s||l._score>=s._score)&&(s=l)}s&&s._score>0&&((t=this._propNames).push.apply(t,s._propNames),(n=this._messages).push.apply(n,s._messages))},i.prototype.getError=function(e){for(var t=[],n=this._propNames.length-1;n>=0;n--){var r=this._propNames[n];e+=typeof r=="number"?"["+r+"]":r?"."+r:"";var s=this._messages[n];s&&t.push(e+" "+s)}return new NK(e,t.join("; "))},i.prototype.getErrorDetail=function(e){for(var t=[],n=this._propNames.length-1;n>=0;n--){var r=this._propNames[n];e+=typeof r=="number"?"["+r+"]":r?"."+r:"";var s=this._messages[n];s&&t.push({path:e,message:s})}for(var o=null,n=t.length-1;n>=0;n--)o&&(t[n].nested=[o]),o=t[n];return o},i}();Ac.DetailContext=AK;var T0e=function(){function i(){this.contexts=[]}return i.prototype.createContext=function(){var e=new AK;return this.contexts.push(e),e},i}();(function(i){var e=Ml&&Ml.__extends||function(){var he=function(_e,pe){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Pe,ie){Pe.__proto__=ie}||function(Pe,ie){for(var te in ie)ie.hasOwnProperty(te)&&(Pe[te]=ie[te])},he(_e,pe)};return function(_e,pe){he(_e,pe);function Pe(){this.constructor=_e}_e.prototype=pe===null?Object.create(pe):(Pe.prototype=pe.prototype,new Pe)}}();Object.defineProperty(i,"__esModule",{value:!0}),i.basicTypes=i.BasicType=i.TParamList=i.TParam=i.param=i.TFunc=i.func=i.TProp=i.TOptional=i.opt=i.TIface=i.iface=i.TEnumLiteral=i.enumlit=i.TEnumType=i.enumtype=i.TIntersection=i.intersection=i.TUnion=i.union=i.TTuple=i.tuple=i.TArray=i.array=i.TLiteral=i.lit=i.TName=i.name=i.TType=void 0;var t=Ac,n=function(){function he(){}return he}();i.TType=n;function r(he){return typeof he=="string"?o(he):he}function s(he,_e){var pe=he[_e];if(!pe)throw new Error("Unknown type "+_e);return pe}function o(he){return new a(he)}i.name=o;var a=function(he){e(_e,he);function _e(pe){var Pe=he.call(this)||this;return Pe.name=pe,Pe._failMsg="is not a "+pe,Pe}return _e.prototype.getChecker=function(pe,Pe,ie){var te=this,Y=s(pe,this.name),De=Y.getChecker(pe,Pe,ie);return Y instanceof Ee||Y instanceof _e?De:function(Je,We){return De(Je,We)?!0:We.fail(null,te._failMsg,0)}},_e}(n);i.TName=a;function l(he){return new c(he)}i.lit=l;var c=function(he){e(_e,he);function _e(pe){var Pe=he.call(this)||this;return Pe.value=pe,Pe.name=JSON.stringify(pe),Pe._failMsg="is not "+Pe.name,Pe}return _e.prototype.getChecker=function(pe,Pe){var ie=this;return function(te,Y){return te===ie.value?!0:Y.fail(null,ie._failMsg,-1)}},_e}(n);i.TLiteral=c;function d(he){return new u(r(he))}i.array=d;var u=function(he){e(_e,he);function _e(pe){var Pe=he.call(this)||this;return Pe.ttype=pe,Pe}return _e.prototype.getChecker=function(pe,Pe){var ie=this.ttype.getChecker(pe,Pe);return function(te,Y){if(!Array.isArray(te))return Y.fail(null,"is not an array",0);for(var De=0;De<te.length;De++){var Je=ie(te[De],Y);if(!Je)return Y.fail(De,null,1)}return!0}},_e}(n);i.TArray=u;function h(){for(var he=[],_e=0;_e<arguments.length;_e++)he[_e]=arguments[_e];return new f(he.map(function(pe){return r(pe)}))}i.tuple=h;var f=function(he){e(_e,he);function _e(pe){var Pe=he.call(this)||this;return Pe.ttypes=pe,Pe}return _e.prototype.getChecker=function(pe,Pe){var ie=this.ttypes.map(function(Y){return Y.getChecker(pe,Pe)}),te=function(Y,De){if(!Array.isArray(Y))return De.fail(null,"is not an array",0);for(var Je=0;Je<ie.length;Je++){var We=ie[Je](Y[Je],De);if(!We)return De.fail(Je,null,1)}return!0};return Pe?function(Y,De){return te(Y,De)?Y.length<=ie.length?!0:De.fail(ie.length,"is extraneous",2):!1}:te},_e}(n);i.TTuple=f;function g(){for(var he=[],_e=0;_e<arguments.length;_e++)he[_e]=arguments[_e];return new m(he.map(function(pe){return r(pe)}))}i.union=g;var m=function(he){e(_e,he);function _e(pe){var Pe=he.call(this)||this;Pe.ttypes=pe;var ie=pe.map(function(Y){return Y instanceof a||Y instanceof c?Y.name:null}).filter(function(Y){return Y}),te=pe.length-ie.length;return ie.length?(te>0&&ie.push(te+" more"),Pe._failMsg="is none of "+ie.join(", ")):Pe._failMsg="is none of "+te+" types",Pe}return _e.prototype.getChecker=function(pe,Pe){var ie=this,te=this.ttypes.map(function(Y){return Y.getChecker(pe,Pe)});return function(Y,De){for(var Je=De.unionResolver(),We=0;We<te.length;We++){var Ge=te[We](Y,Je.createContext());if(Ge)return!0}return De.resolveUnion(Je),De.fail(null,ie._failMsg,0)}},_e}(n);i.TUnion=m;function y(){for(var he=[],_e=0;_e<arguments.length;_e++)he[_e]=arguments[_e];return new b(he.map(function(pe){return r(pe)}))}i.intersection=y;var b=function(he){e(_e,he);function _e(pe){var Pe=he.call(this)||this;return Pe.ttypes=pe,Pe}return _e.prototype.getChecker=function(pe,Pe){var ie=new Set,te=this.ttypes.map(function(Y){return Y.getChecker(pe,Pe,ie)});return function(Y,De){var Je=te.every(function(We){return We(Y,De)});return Je?!0:De.fail(null,null,0)}},_e}(n);i.TIntersection=b;function v(he){return new C(he)}i.enumtype=v;var C=function(he){e(_e,he);function _e(pe){var Pe=he.call(this)||this;return Pe.members=pe,Pe.validValues=new Set,Pe._failMsg="is not a valid enum value",Pe.validValues=new Set(Object.keys(pe).map(function(ie){return pe[ie]})),Pe}return _e.prototype.getChecker=function(pe,Pe){var ie=this;return function(te,Y){return ie.validValues.has(te)?!0:Y.fail(null,ie._failMsg,0)}},_e}(n);i.TEnumType=C;function w(he,_e){return new S(he,_e)}i.enumlit=w;var S=function(he){e(_e,he);function _e(pe,Pe){var ie=he.call(this)||this;return ie.enumName=pe,ie.prop=Pe,ie._failMsg="is not "+pe+"."+Pe,ie}return _e.prototype.getChecker=function(pe,Pe){var ie=this,te=s(pe,this.enumName);if(!(te instanceof C))throw new Error("Type "+this.enumName+" used in enumlit is not an enum type");var Y=te.members[this.prop];if(!te.members.hasOwnProperty(this.prop))throw new Error("Unknown value "+this.enumName+"."+this.prop+" used in enumlit");return function(De,Je){return De===Y?!0:Je.fail(null,ie._failMsg,-1)}},_e}(n);i.TEnumLiteral=S;function L(he){return Object.keys(he).map(function(_e){return T(_e,he[_e])})}function T(he,_e){return _e instanceof V?new F(he,_e.ttype,!0):new F(he,r(_e),!1)}function I(he,_e){return new R(he,L(_e))}i.iface=I;var R=function(he){e(_e,he);function _e(pe,Pe){var ie=he.call(this)||this;return ie.bases=pe,ie.props=Pe,ie.propSet=new Set(Pe.map(function(te){return te.name})),ie}return _e.prototype.getChecker=function(pe,Pe,ie){var te=this,Y=this.bases.map(function(pt){return s(pe,pt).getChecker(pe,Pe)}),De=this.props.map(function(pt){return pt.ttype.getChecker(pe,Pe)}),Je=new t.NoopContext,We=this.props.map(function(pt,Nt){return!pt.isOpt&&!De[Nt](void 0,Je)}),Ge=function(pt,Nt){if(typeof pt!="object"||pt===null)return Nt.fail(null,"is not an object",0);for(var hn=0;hn<Y.length;hn++)if(!Y[hn](pt,Nt))return!1;for(var hn=0;hn<De.length;hn++){var ne=te.props[hn].name,G=pt[ne];if(G===void 0){if(We[hn])return Nt.fail(ne,"is missing",1)}else{var Z=De[hn](G,Nt);if(!Z)return Nt.fail(ne,null,1)}}return!0};if(!Pe)return Ge;var Tt=this.propSet;return ie&&(this.propSet.forEach(function(pt){return ie.add(pt)}),Tt=ie),function(pt,Nt){if(!Ge(pt,Nt))return!1;for(var hn in pt)if(!Tt.has(hn))return Nt.fail(hn,"is extraneous",2);return!0}},_e}(n);i.TIface=R;function B(he){return new V(r(he))}i.opt=B;var V=function(he){e(_e,he);function _e(pe){var Pe=he.call(this)||this;return Pe.ttype=pe,Pe}return _e.prototype.getChecker=function(pe,Pe){var ie=this.ttype.getChecker(pe,Pe);return function(te,Y){return te===void 0||ie(te,Y)}},_e}(n);i.TOptional=V;var F=function(){function he(_e,pe,Pe){this.name=_e,this.ttype=pe,this.isOpt=Pe}return he}();i.TProp=F;function W(he){for(var _e=[],pe=1;pe<arguments.length;pe++)_e[pe-1]=arguments[pe];return new X(new ke(_e),r(he))}i.func=W;var X=function(he){e(_e,he);function _e(pe,Pe){var ie=he.call(this)||this;return ie.paramList=pe,ie.result=Pe,ie}return _e.prototype.getChecker=function(pe,Pe){return function(ie,te){return typeof ie=="function"?!0:te.fail(null,"is not a function",0)}},_e}(n);i.TFunc=X;function oe(he,_e,pe){return new we(he,r(_e),!!pe)}i.param=oe;var we=function(){function he(_e,pe,Pe){this.name=_e,this.ttype=pe,this.isOpt=Pe}return he}();i.TParam=we;var ke=function(he){e(_e,he);function _e(pe){var Pe=he.call(this)||this;return Pe.params=pe,Pe}return _e.prototype.getChecker=function(pe,Pe){var ie=this,te=this.params.map(function(We){return We.ttype.getChecker(pe,Pe)}),Y=new t.NoopContext,De=this.params.map(function(We,Ge){return!We.isOpt&&!te[Ge](void 0,Y)}),Je=function(We,Ge){if(!Array.isArray(We))return Ge.fail(null,"is not an array",0);for(var Tt=0;Tt<te.length;Tt++){var pt=ie.params[Tt];if(We[Tt]===void 0){if(De[Tt])return Ge.fail(pt.name,"is missing",1)}else{var Nt=te[Tt](We[Tt],Ge);if(!Nt)return Ge.fail(pt.name,null,1)}}return!0};return Pe?function(We,Ge){return Je(We,Ge)?We.length<=te.length?!0:Ge.fail(te.length,"is extraneous",2):!1}:Je},_e}(n);i.TParamList=ke;var Ee=function(he){e(_e,he);function _e(pe,Pe){var ie=he.call(this)||this;return ie.validator=pe,ie.message=Pe,ie}return _e.prototype.getChecker=function(pe,Pe){var ie=this;return function(te,Y){return ie.validator(te)?!0:Y.fail(null,ie.message,0)}},_e}(n);i.BasicType=Ee,i.basicTypes={any:new Ee(function(he){return!0},"is invalid"),number:new Ee(function(he){return typeof he=="number"},"is not a number"),object:new Ee(function(he){return typeof he=="object"&&he},"is not an object"),boolean:new Ee(function(he){return typeof he=="boolean"},"is not a boolean"),string:new Ee(function(he){return typeof he=="string"},"is not a string"),symbol:new Ee(function(he){return typeof he=="symbol"},"is not a symbol"),void:new Ee(function(he){return he==null},"is not void"),undefined:new Ee(function(he){return he===void 0},"is not undefined"),null:new Ee(function(he){return he===null},"is not null"),never:new Ee(function(he){return!1},"is unexpected"),Date:new Ee(qe("[object Date]"),"is not a Date"),RegExp:new Ee(qe("[object RegExp]"),"is not a RegExp")};var Le=Object.prototype.toString;function qe(he){return function(_e){return typeof _e=="object"&&_e&&Le.call(_e)===he}}typeof Buffer<"u"&&(i.basicTypes.Buffer=new Ee(function(he){return Buffer.isBuffer(he)},"is not a Buffer"));for(var Ue=function(he){i.basicTypes[he.name]=new Ee(function(_e){return _e instanceof he},"is not a "+he.name)},Oe=0,be=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,ArrayBuffer];Oe<be.length;Oe++){var un=be[Oe];Ue(un)}})(d2);(function(i){var e=Ml&&Ml.__spreadArrays||function(){for(var l=0,c=0,d=arguments.length;c<d;c++)l+=arguments[c].length;for(var u=Array(l),h=0,c=0;c<d;c++)for(var f=arguments[c],g=0,m=f.length;g<m;g++,h++)u[h]=f[g];return u};Object.defineProperty(i,"__esModule",{value:!0}),i.Checker=i.createCheckers=void 0;var t=d2,n=Ac,r=d2;Object.defineProperty(i,"TArray",{enumerable:!0,get:function(){return r.TArray}}),Object.defineProperty(i,"TEnumType",{enumerable:!0,get:function(){return r.TEnumType}}),Object.defineProperty(i,"TEnumLiteral",{enumerable:!0,get:function(){return r.TEnumLiteral}}),Object.defineProperty(i,"TFunc",{enumerable:!0,get:function(){return r.TFunc}}),Object.defineProperty(i,"TIface",{enumerable:!0,get:function(){return r.TIface}}),Object.defineProperty(i,"TLiteral",{enumerable:!0,get:function(){return r.TLiteral}}),Object.defineProperty(i,"TName",{enumerable:!0,get:function(){return r.TName}}),Object.defineProperty(i,"TOptional",{enumerable:!0,get:function(){return r.TOptional}}),Object.defineProperty(i,"TParam",{enumerable:!0,get:function(){return r.TParam}}),Object.defineProperty(i,"TParamList",{enumerable:!0,get:function(){return r.TParamList}}),Object.defineProperty(i,"TProp",{enumerable:!0,get:function(){return r.TProp}}),Object.defineProperty(i,"TTuple",{enumerable:!0,get:function(){return r.TTuple}}),Object.defineProperty(i,"TType",{enumerable:!0,get:function(){return r.TType}}),Object.defineProperty(i,"TUnion",{enumerable:!0,get:function(){return r.TUnion}}),Object.defineProperty(i,"TIntersection",{enumerable:!0,get:function(){return r.TIntersection}}),Object.defineProperty(i,"array",{enumerable:!0,get:function(){return r.array}}),Object.defineProperty(i,"enumlit",{enumerable:!0,get:function(){return r.enumlit}}),Object.defineProperty(i,"enumtype",{enumerable:!0,get:function(){return r.enumtype}}),Object.defineProperty(i,"func",{enumerable:!0,get:function(){return r.func}}),Object.defineProperty(i,"iface",{enumerable:!0,get:function(){return r.iface}}),Object.defineProperty(i,"lit",{enumerable:!0,get:function(){return r.lit}}),Object.defineProperty(i,"name",{enumerable:!0,get:function(){return r.name}}),Object.defineProperty(i,"opt",{enumerable:!0,get:function(){return r.opt}}),Object.defineProperty(i,"param",{enumerable:!0,get:function(){return r.param}}),Object.defineProperty(i,"tuple",{enumerable:!0,get:function(){return r.tuple}}),Object.defineProperty(i,"union",{enumerable:!0,get:function(){return r.union}}),Object.defineProperty(i,"intersection",{enumerable:!0,get:function(){return r.intersection}}),Object.defineProperty(i,"BasicType",{enumerable:!0,get:function(){return r.BasicType}});var s=Ac;Object.defineProperty(i,"VError",{enumerable:!0,get:function(){return s.VError}});function o(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];for(var d=Object.assign.apply(Object,e([{},t.basicTypes],l)),u={},h=0,f=l;h<f.length;h++)for(var g=f[h],m=0,y=Object.keys(g);m<y.length;m++){var b=y[m];u[b]=new a(d,g[b])}return u}i.createCheckers=o;var a=function(){function l(c,d,u){if(u===void 0&&(u="value"),this.suite=c,this.ttype=d,this._path=u,this.props=new Map,d instanceof t.TIface)for(var h=0,f=d.props;h<f.length;h++){var g=f[h];this.props.set(g.name,g.ttype)}this.checkerPlain=this.ttype.getChecker(c,!1),this.checkerStrict=this.ttype.getChecker(c,!0)}return l.prototype.setReportedPath=function(c){this._path=c},l.prototype.check=function(c){return this._doCheck(this.checkerPlain,c)},l.prototype.test=function(c){return this.checkerPlain(c,new n.NoopContext)},l.prototype.validate=function(c){return this._doValidate(this.checkerPlain,c)},l.prototype.strictCheck=function(c){return this._doCheck(this.checkerStrict,c)},l.prototype.strictTest=function(c){return this.checkerStrict(c,new n.NoopContext)},l.prototype.strictValidate=function(c){return this._doValidate(this.checkerStrict,c)},l.prototype.getProp=function(c){var d=this.props.get(c);if(!d)throw new Error("Type has no property "+c);return new l(this.suite,d,this._path+"."+c)},l.prototype.methodArgs=function(c){var d=this._getMethod(c);return new l(this.suite,d.paramList)},l.prototype.methodResult=function(c){var d=this._getMethod(c);return new l(this.suite,d.result)},l.prototype.getArgs=function(){if(!(this.ttype instanceof t.TFunc))throw new Error("getArgs() applied to non-function");return new l(this.suite,this.ttype.paramList)},l.prototype.getResult=function(){if(!(this.ttype instanceof t.TFunc))throw new Error("getResult() applied to non-function");return new l(this.suite,this.ttype.result)},l.prototype.getType=function(){return this.ttype},l.prototype._doCheck=function(c,d){var u=new n.NoopContext;if(!c(d,u)){var h=new n.DetailContext;throw c(d,h),h.getError(this._path)}},l.prototype._doValidate=function(c,d){var u=new n.NoopContext;if(c(d,u))return null;var h=new n.DetailContext;return c(d,h),h.getErrorDetail(this._path)},l.prototype._getMethod=function(c){var d=this.props.get(c);if(!d)throw new Error("Type has no property "+c);if(!(d instanceof t.TFunc))throw new Error("Property "+c+" is not a method");return d},l}();i.Checker=a})(ri);const k0e=ri.union(ri.lit("jsx"),ri.lit("typescript"),ri.lit("flow"),ri.lit("imports"),ri.lit("react-hot-loader"),ri.lit("jest")),L0e=ri.iface([],{compiledFilename:"string"}),D0e=ri.iface([],{transforms:ri.array("Transform"),disableESTransforms:ri.opt("boolean"),jsxRuntime:ri.opt(ri.union(ri.lit("classic"),ri.lit("automatic"),ri.lit("preserve"))),production:ri.opt("boolean"),jsxImportSource:ri.opt("string"),jsxPragma:ri.opt("string"),jsxFragmentPragma:ri.opt("string"),keepUnusedImports:ri.opt("boolean"),preserveDynamicImport:ri.opt("boolean"),injectCreateRequireForImportRequire:ri.opt("boolean"),enableLegacyTypeScriptModuleInterop:ri.opt("boolean"),enableLegacyBabel5ModuleInterop:ri.opt("boolean"),sourceMapOptions:ri.opt("SourceMapOptions"),filePath:ri.opt("string")}),I0e={Transform:k0e,SourceMapOptions:L0e,Options:D0e},{Options:R0e}=ri.createCheckers(I0e);function E0e(i){R0e.strictCheck(i)}function PK(){xe(),ss(!1)}function MK(i){xe(),eD(i)}function ff(i){Pt(),G4(i)}function oT(){Pt(),x.tokens[x.tokens.length-1].identifierRole=Ct.ImportDeclaration}function G4(i){let e;x.scopeDepth===0?e=Ct.TopLevelDeclaration:i?e=Ct.BlockScopedDeclaration:e=Ct.FunctionScopedDeclaration,x.tokens[x.tokens.length-1].identifierRole=e}function eD(i){switch(x.type){case _._this:{const e=nn(0);xe(),Qt(e);return}case _._yield:case _.name:{x.type=_.name,ff(i);return}case _.bracketL:{xe(),Z4(_.bracketR,i,!0);return}case _.braceL:o3(!0,i);return;default:Xt()}}function Z4(i,e,t=!1,n=!1,r=0){let s=!0,o=!1;const a=x.tokens.length;for(;!ge(i)&&!x.error;)if(s?s=!1:(Se(_.comma),x.tokens[x.tokens.length-1].contextId=r,!o&&x.tokens[a].isType&&(x.tokens[x.tokens.length-1].isType=!0,o=!0)),!(t&&O(_.comma))){if(ge(i))break;if(O(_.ellipsis)){MK(e),OK(),ge(_.comma),Se(i);break}else N0e(n,e)}}function N0e(i,e){i&&X4([z._public,z._protected,z._private,z._readonly,z._override]),aT(e),OK(),aT(e,!0)}function OK(){On?XCe():_n&&Vye()}function aT(i,e=!1){if(e||eD(i),!ge(_.eq))return;const t=x.tokens.length-1;ss(),x.tokens[t].rhsEndIndex=x.tokens.length}function u2(){return O(_.name)}function A0e(){return O(_.name)||!!(x.type&_.IS_KEYWORD)||O(_.string)||O(_.num)||O(_.bigint)||O(_.decimal)}function FK(){const i=x.snapshot();return xe(),(O(_.bracketL)||O(_.braceL)||O(_.star)||O(_.ellipsis)||O(_.hash)||A0e())&&!io()?!0:(x.restoreFromSnapshot(i),!1)}function X4(i){for(;BK(i)!==null;);}function BK(i){if(!O(_.name))return null;const e=x.contextualKeyword;if(i.indexOf(e)!==-1&&FK()){switch(e){case z._readonly:x.tokens[x.tokens.length-1].type=_._readonly;break;case z._abstract:x.tokens[x.tokens.length-1].type=_._abstract;break;case z._static:x.tokens[x.tokens.length-1].type=_._static;break;case z._public:x.tokens[x.tokens.length-1].type=_._public;break;case z._private:x.tokens[x.tokens.length-1].type=_._private;break;case z._protected:x.tokens[x.tokens.length-1].type=_._protected;break;case z._override:x.tokens[x.tokens.length-1].type=_._override;break;case z._declare:x.tokens[x.tokens.length-1].type=_._declare;break}return e}return null}function DC(){for(Pt();ge(_.dot);)Pt()}function P0e(){DC(),!io()&&O(_.lessThan)&&U1()}function M0e(){xe(),IC()}function O0e(){xe()}function F0e(){Se(_._typeof),O(_._import)?WK():DC(),!io()&&O(_.lessThan)&&U1()}function WK(){Se(_._import),Se(_.parenL),Se(_.string),Se(_.parenR),ge(_.dot)&&DC(),O(_.lessThan)&&U1()}function B0e(){ge(_._const);const i=ge(_._in),e=Nr(z._out);ge(_._const),(i||e)&&!O(_.name)?x.tokens[x.tokens.length-1].type=_.name:Pt(),ge(_._extends)&&Hi(),ge(_.eq)&&Hi()}function Ip(){O(_.lessThan)&&tD()}function tD(){const i=nn(0);for(O(_.lessThan)||O(_.typeParameterStart)?xe():Xt();!ge(_.greaterThan)&&!x.error;)B0e(),ge(_.comma);Qt(i)}function Y4(i){const e=i===_.arrow;Ip(),Se(_.parenL),x.scopeDepth++,W0e(!1),x.scopeDepth--,(e||O(i))&&x0(i)}function W0e(i){Z4(_.parenR,i)}function lT(){ge(_.comma)||Di()}function z7(){Y4(_.colon),lT()}function V0e(){const i=x.snapshot();xe();const e=ge(_.name)&&O(_.colon);return x.restoreFromSnapshot(i),e}function VK(){if(!(O(_.bracketL)&&V0e()))return!1;const i=nn(0);return Se(_.bracketL),Pt(),IC(),Se(_.bracketR),H1(),lT(),Qt(i),!0}function $7(i){ge(_.question),!i&&(O(_.parenL)||O(_.lessThan))?(Y4(_.colon),lT()):(H1(),lT())}function H0e(){if(O(_.parenL)||O(_.lessThan)){z7();return}if(O(_._new)){xe(),O(_.parenL)||O(_.lessThan)?z7():$7(!1);return}const i=!!BK([z._readonly]);VK()||((gt(z._get)||gt(z._set))&&FK(),T0(-1),$7(i))}function U0e(){HK()}function HK(){for(Se(_.braceL);!ge(_.braceR)&&!x.error;)H0e()}function j0e(){const i=x.snapshot(),e=z0e();return x.restoreFromSnapshot(i),e}function z0e(){return xe(),ge(_.plus)||ge(_.minus)?gt(z._readonly):(gt(z._readonly)&&xe(),!O(_.bracketL)||(xe(),!u2())?!1:(xe(),O(_._in)))}function $0e(){Pt(),Se(_._in),Hi()}function K0e(){Se(_.braceL),O(_.plus)||O(_.minus)?(xe(),ir(z._readonly)):Nr(z._readonly),Se(_.bracketL),$0e(),Nr(z._as)&&Hi(),Se(_.bracketR),O(_.plus)||O(_.minus)?(xe(),Se(_.question)):ge(_.question),oye(),Di(),Se(_.braceR)}function q0e(){for(Se(_.bracketL);!ge(_.bracketR)&&!x.error;)G0e(),ge(_.comma)}function G0e(){ge(_.ellipsis)?Hi():(Hi(),ge(_.question)),ge(_.colon)&&Hi()}function Z0e(){Se(_.parenL),Hi(),Se(_.parenR)}function X0e(){for(Ju(),Ju();!O(_.backQuote)&&!x.error;)Se(_.dollarBraceL),Hi(),Ju(),Ju();xe()}var ph;(function(i){i[i.TSFunctionType=0]="TSFunctionType";const t=0+1;i[i.TSConstructorType=t]="TSConstructorType";const n=t+1;i[i.TSAbstractConstructorType=n]="TSAbstractConstructorType"})(ph||(ph={}));function IR(i){i===ph.TSAbstractConstructorType&&ir(z._abstract),(i===ph.TSConstructorType||i===ph.TSAbstractConstructorType)&&Se(_._new);const e=x.inDisallowConditionalTypesContext;x.inDisallowConditionalTypesContext=!1,Y4(_.arrow),x.inDisallowConditionalTypesContext=e}function Y0e(){switch(x.type){case _.name:P0e();return;case _._void:case _._null:xe();return;case _.string:case _.num:case _.bigint:case _.decimal:case _._true:case _._false:V_();return;case _.minus:xe(),V_();return;case _._this:{O0e(),gt(z._is)&&!io()&&M0e();return}case _._typeof:F0e();return;case _._import:WK();return;case _.braceL:j0e()?K0e():U0e();return;case _.bracketL:q0e();return;case _.parenL:Z0e();return;case _.backQuote:X0e();return;default:if(x.type&_.IS_KEYWORD){xe(),x.tokens[x.tokens.length-1].type=_.name;return}break}Xt()}function Q0e(){for(Y0e();!io()&&ge(_.bracketL);)ge(_.bracketR)||(Hi(),Se(_.bracketR))}function J0e(){if(ir(z._infer),Pt(),O(_._extends)){const i=x.snapshot();Se(_._extends);const e=x.inDisallowConditionalTypesContext;x.inDisallowConditionalTypesContext=!0,Hi(),x.inDisallowConditionalTypesContext=e,(x.error||!x.inDisallowConditionalTypesContext&&O(_.question))&&x.restoreFromSnapshot(i)}}function h2(){if(gt(z._keyof)||gt(z._unique)||gt(z._readonly))xe(),h2();else if(gt(z._infer))J0e();else{const i=x.inDisallowConditionalTypesContext;x.inDisallowConditionalTypesContext=!1,Q0e(),x.inDisallowConditionalTypesContext=i}}function K7(){if(ge(_.bitwiseAND),h2(),O(_.bitwiseAND))for(;ge(_.bitwiseAND);)h2()}function eye(){if(ge(_.bitwiseOR),K7(),O(_.bitwiseOR))for(;ge(_.bitwiseOR);)K7()}function tye(){return O(_.lessThan)?!0:O(_.parenL)&&iye()}function nye(){if(O(_.name)||O(_._this))return xe(),!0;if(O(_.braceL)||O(_.bracketL)){let i=1;for(xe();i>0&&!x.error;)O(_.braceL)||O(_.bracketL)?i++:(O(_.braceR)||O(_.bracketR))&&i--,xe();return!0}return!1}function iye(){const i=x.snapshot(),e=rye();return x.restoreFromSnapshot(i),e}function rye(){return xe(),!!(O(_.parenR)||O(_.ellipsis)||nye()&&(O(_.colon)||O(_.comma)||O(_.question)||O(_.eq)||O(_.parenR)&&(xe(),O(_.arrow))))}function x0(i){const e=nn(0);Se(i),aye()||Hi(),Qt(e)}function sye(){O(_.colon)&&x0(_.colon)}function H1(){O(_.colon)&&IC()}function oye(){ge(_.colon)&&Hi()}function aye(){const i=x.snapshot();return gt(z._asserts)?(xe(),Nr(z._is)?(Hi(),!0):u2()||O(_._this)?(xe(),Nr(z._is)&&Hi(),!0):(x.restoreFromSnapshot(i),!1)):u2()||O(_._this)?(xe(),gt(z._is)&&!io()?(xe(),Hi(),!0):(x.restoreFromSnapshot(i),!1)):!1}function IC(){const i=nn(0);Se(_.colon),Hi(),Qt(i)}function Hi(){if(q7(),x.inDisallowConditionalTypesContext||io()||!ge(_._extends))return;const i=x.inDisallowConditionalTypesContext;x.inDisallowConditionalTypesContext=!0,q7(),x.inDisallowConditionalTypesContext=i,Se(_.question),Hi(),Se(_.colon),Hi()}function lye(){return gt(z._abstract)&&Vi()===_._new}function q7(){if(tye()){IR(ph.TSFunctionType);return}if(O(_._new)){IR(ph.TSConstructorType);return}else if(lye()){IR(ph.TSAbstractConstructorType);return}eye()}function cye(){const i=nn(1);Hi(),Se(_.greaterThan),Qt(i),RC()}function dye(){if(ge(_.jsxTagStart)){x.tokens[x.tokens.length-1].type=_.typeParameterStart;const i=nn(1);for(;!O(_.greaterThan)&&!x.error;)Hi(),ge(_.comma);Na(),Qt(i)}}function UK(){for(;!O(_.braceL)&&!x.error;)uye(),ge(_.comma)}function uye(){DC(),O(_.lessThan)&&U1()}function hye(){ff(!1),Ip(),ge(_._extends)&&UK(),HK()}function fye(){ff(!1),Ip(),Se(_.eq),Hi(),Di()}function gye(){if(O(_.string)?V_():Pt(),ge(_.eq)){const i=x.tokens.length-1;ss(),x.tokens[i].rhsEndIndex=x.tokens.length}}function Q4(){for(ff(!1),Se(_.braceL);!ge(_.braceR)&&!x.error;)gye(),ge(_.comma)}function J4(){Se(_.braceL),sD(_.braceR)}function f2(){ff(!1),ge(_.dot)?f2():J4()}function jK(){gt(z._global)?Pt():O(_.string)?du():Xt(),O(_.braceL)?J4():Di()}function g2(){oT(),Se(_.eq),mye(),Di()}function pye(){return gt(z._require)&&Vi()===_.parenL}function mye(){pye()?_ye():DC()}function _ye(){ir(z._require),Se(_.parenL),O(_.string)||Xt(),V_(),Se(_.parenR)}function bye(){if(Cc())return!1;switch(x.type){case _._function:{const i=nn(1);xe();const e=x.start;return Vg(e,!0),Qt(i),!0}case _._class:{const i=nn(1);return Hg(!0,!1),Qt(i),!0}case _._const:if(O(_._const)&&$4(z._enum)){const i=nn(1);return Se(_._const),ir(z._enum),x.tokens[x.tokens.length-1].type=_._enum,Q4(),Qt(i),!0}case _._var:case _._let:{const i=nn(1);return ox(x.type!==_._var),Qt(i),!0}case _.name:{const i=nn(1),e=x.contextualKeyword;let t=!1;return e===z._global?(jK(),t=!0):t=nD(e,!0),Qt(i),t}default:return!1}}function G7(){return nD(x.contextualKeyword,!0)}function vye(i){switch(i){case z._declare:{const e=x.tokens.length-1;if(bye())return x.tokens[e].type=_._declare,!0;break}case z._global:if(O(_.braceL))return J4(),!0;break;default:return nD(i,!1)}return!1}function nD(i,e){switch(i){case z._abstract:if(em(e)&&O(_._class))return x.tokens[x.tokens.length-1].type=_._abstract,Hg(!0,!1),!0;break;case z._enum:if(em(e)&&O(_.name))return x.tokens[x.tokens.length-1].type=_._enum,Q4(),!0;break;case z._interface:if(em(e)&&O(_.name)){const t=nn(e?2:1);return hye(),Qt(t),!0}break;case z._module:if(em(e)){if(O(_.string)){const t=nn(e?2:1);return jK(),Qt(t),!0}else if(O(_.name)){const t=nn(e?2:1);return f2(),Qt(t),!0}}break;case z._namespace:if(em(e)&&O(_.name)){const t=nn(e?2:1);return f2(),Qt(t),!0}break;case z._type:if(em(e)&&O(_.name)){const t=nn(e?2:1);return fye(),Qt(t),!0}break}return!1}function em(i){return i?(xe(),!0):!Cc()}function yye(){const i=x.snapshot();return tD(),j1(),sye(),Se(_.arrow),x.error?(x.restoreFromSnapshot(i),!1):(EC(!0),!0)}function e3(){x.type===_.bitShiftL&&(x.pos-=1,Zt(_.lessThan)),U1()}function U1(){const i=nn(0);for(Se(_.lessThan);!O(_.greaterThan)&&!x.error;)Hi(),ge(_.comma);i?(Se(_.greaterThan),Qt(i)):(Qt(i),xK(),Se(_.greaterThan),x.tokens[x.tokens.length-1].isType=!0)}function zK(){if(O(_.name))switch(x.contextualKeyword){case z._abstract:case z._declare:case z._enum:case z._interface:case z._module:case z._namespace:case z._type:return!0}return!1}function Cye(i,e){if(O(_.colon)&&x0(_.colon),!O(_.braceL)&&Cc()){let t=x.tokens.length-1;for(;t>=0&&(x.tokens[t].start>=i||x.tokens[t].type===_._default||x.tokens[t].type===_._export);)x.tokens[t].isType=!0,t--;return}EC(!1,e)}function wye(i,e,t){if(!io()&&ge(_.bang)){x.tokens[x.tokens.length-1].type=_.nonNullAssertion;return}if(O(_.lessThan)||O(_.bitShiftL)){const n=x.snapshot();if(!e&&QK()&&yye())return;if(e3(),!e&&ge(_.parenL)?(x.tokens[x.tokens.length-1].subscriptStartIndex=i,mh()):O(_.backQuote)?s3():(x.type===_.greaterThan||x.type!==_.parenL&&x.type&_.IS_EXPRESSION_START&&!io())&&Xt(),x.error)x.restoreFromSnapshot(n);else return}else!e&&O(_.questionDot)&&Vi()===_.lessThan&&(xe(),x.tokens[i].isOptionalChainStart=!0,x.tokens[x.tokens.length-1].subscriptStartIndex=i,U1(),Se(_.parenL),mh());n3(i,e,t)}function Sye(){if(ge(_._import))return gt(z._type)&&Vi()!==_.eq&&ir(z._type),g2(),!0;if(ge(_.eq))return rs(),Di(),!0;if(Nr(z._as))return ir(z._namespace),Pt(),Di(),!0;if(gt(z._type)){const i=Vi();(i===_.braceL||i===_.star)&&xe()}return!1}function xye(){if(Pt(),O(_.comma)||O(_.braceR)){x.tokens[x.tokens.length-1].identifierRole=Ct.ImportDeclaration;return}if(Pt(),O(_.comma)||O(_.braceR)){x.tokens[x.tokens.length-1].identifierRole=Ct.ImportDeclaration,x.tokens[x.tokens.length-2].isType=!0,x.tokens[x.tokens.length-1].isType=!0;return}if(Pt(),O(_.comma)||O(_.braceR)){x.tokens[x.tokens.length-3].identifierRole=Ct.ImportAccess,x.tokens[x.tokens.length-1].identifierRole=Ct.ImportDeclaration;return}Pt(),x.tokens[x.tokens.length-3].identifierRole=Ct.ImportAccess,x.tokens[x.tokens.length-1].identifierRole=Ct.ImportDeclaration,x.tokens[x.tokens.length-4].isType=!0,x.tokens[x.tokens.length-3].isType=!0,x.tokens[x.tokens.length-2].isType=!0,x.tokens[x.tokens.length-1].isType=!0}function Tye(){if(Pt(),O(_.comma)||O(_.braceR)){x.tokens[x.tokens.length-1].identifierRole=Ct.ExportAccess;return}if(Pt(),O(_.comma)||O(_.braceR)){x.tokens[x.tokens.length-1].identifierRole=Ct.ExportAccess,x.tokens[x.tokens.length-2].isType=!0,x.tokens[x.tokens.length-1].isType=!0;return}if(Pt(),O(_.comma)||O(_.braceR)){x.tokens[x.tokens.length-3].identifierRole=Ct.ExportAccess;return}Pt(),x.tokens[x.tokens.length-3].identifierRole=Ct.ExportAccess,x.tokens[x.tokens.length-4].isType=!0,x.tokens[x.tokens.length-3].isType=!0,x.tokens[x.tokens.length-2].isType=!0,x.tokens[x.tokens.length-1].isType=!0}function kye(){if(gt(z._abstract)&&Vi()===_._class)return x.type=_._abstract,xe(),Hg(!0,!0),!0;if(gt(z._interface)){const i=nn(2);return nD(z._interface,!0),Qt(i),!0}return!1}function Lye(){if(x.type===_._const){const i=LC();if(i.type===_.name&&i.contextualKeyword===z._enum)return Se(_._const),ir(z._enum),x.tokens[x.tokens.length-1].type=_._enum,Q4(),!0}return!1}function Dye(i){const e=x.tokens.length;X4([z._abstract,z._readonly,z._declare,z._static,z._override]);const t=x.tokens.length;if(VK()){const r=i?e-1:e;for(let s=r;s<t;s++)x.tokens[s].isType=!0;return!0}return!1}function Iye(i){vye(i)||Di()}function Rye(){const i=Nr(z._declare);i&&(x.tokens[x.tokens.length-1].type=_._declare);let e=!1;if(O(_.name))if(i){const t=nn(2);e=G7(),Qt(t)}else e=G7();if(!e)if(i){const t=nn(2);oa(!0),Qt(t)}else oa(!0)}function Eye(i){if(i&&(O(_.lessThan)||O(_.bitShiftL))&&e3(),Nr(z._implements)){x.tokens[x.tokens.length-1].type=_._implements;const e=nn(1);UK(),Qt(e)}}function Nye(){Ip()}function Aye(){Ip()}function Pye(){const i=nn(0);io()||ge(_.bang),H1(),Qt(i)}function Mye(){O(_.colon)&&IC()}function Oye(i,e){return QL?Fye(i,e):Bye(i,e)}function Fye(i,e){if(!O(_.lessThan))return Pc(i,e);const t=x.snapshot();let n=Pc(i,e);if(x.error)x.restoreFromSnapshot(t);else return n;return x.type=_.typeParameterStart,tD(),n=Pc(i,e),n||Xt(),n}function Bye(i,e){if(!O(_.lessThan))return Pc(i,e);const t=x.snapshot();tD();const n=Pc(i,e);if(n||Xt(),x.error)x.restoreFromSnapshot(t);else return n;return Pc(i,e)}function Wye(){if(O(_.colon)){const i=x.snapshot();x0(_.colon),Yo()&&Xt(),O(_.arrow)||Xt(),x.error&&x.restoreFromSnapshot(i)}return ge(_.arrow)}function Vye(){const i=nn(0);ge(_.question),H1(),Qt(i)}function Hye(){(O(_.lessThan)||O(_.bitShiftL))&&e3(),dq()}function Uye(){let i=!1,e=!1;for(;;){if(x.pos>=Ze.length){Xt("Unterminated JSX contents");return}const t=Ze.charCodeAt(x.pos);if(t===Q.lessThan||t===Q.leftCurlyBrace){if(x.pos===x.start){if(t===Q.lessThan){x.pos++,Zt(_.jsxTagStart);return}TK(t);return}Zt(i&&!e?_.jsxEmptyText:_.jsxText);return}t===Q.lineFeed?i=!0:t!==Q.space&&t!==Q.carriageReturn&&t!==Q.tab&&(e=!0),x.pos++}}function jye(i){for(x.pos++;;){if(x.pos>=Ze.length){Xt("Unterminated string constant");return}if(Ze.charCodeAt(x.pos)===i){x.pos++;break}x.pos++}Zt(_.string)}function zye(){let i;do{if(x.pos>Ze.length){Xt("Unexpectedly reached the end of input.");return}i=Ze.charCodeAt(++x.pos)}while(Pl[i]||i===Q.dash);Zt(_.jsxName)}function p2(){Na()}function $K(i){if(p2(),!ge(_.colon)){x.tokens[x.tokens.length-1].identifierRole=i;return}p2()}function KK(){const i=x.tokens.length;$K(Ct.Access);let e=!1;for(;O(_.dot);)e=!0,Na(),p2();if(!e){const t=x.tokens[i],n=Ze.charCodeAt(t.start);n>=Q.lowercaseA&&n<=Q.lowercaseZ&&(t.identifierRole=null)}}function $ye(){switch(x.type){case _.braceL:xe(),rs(),Na();return;case _.jsxTagStart:GK(),Na();return;case _.string:Na();return;default:Xt("JSX value should be either an expression or a quoted JSX text")}}function Kye(){Se(_.ellipsis),rs()}function qye(i){if(O(_.jsxTagEnd))return!1;KK(),_n&&dye();let e=!1;for(;!O(_.slash)&&!O(_.jsxTagEnd)&&!x.error;){if(ge(_.braceL)){e=!0,Se(_.ellipsis),ss(),Na();continue}e&&x.end-x.start===3&&Ze.charCodeAt(x.start)===Q.lowercaseK&&Ze.charCodeAt(x.start+1)===Q.lowercaseE&&Ze.charCodeAt(x.start+2)===Q.lowercaseY&&(x.tokens[i].jsxRole=wl.KeyAfterPropSpread),$K(Ct.ObjectKey),O(_.eq)&&(Na(),$ye())}const t=O(_.slash);return t&&Na(),t}function Gye(){O(_.jsxTagEnd)||KK()}function qK(){const i=x.tokens.length-1;x.tokens[i].jsxRole=wl.NoChildren;let e=0;if(!qye(i))for(tm();;)switch(x.type){case _.jsxTagStart:if(Na(),O(_.slash)){Na(),Gye(),x.tokens[i].jsxRole!==wl.KeyAfterPropSpread&&(e===1?x.tokens[i].jsxRole=wl.OneChild:e>1&&(x.tokens[i].jsxRole=wl.StaticChildren));return}e++,qK(),tm();break;case _.jsxText:e++,tm();break;case _.jsxEmptyText:tm();break;case _.braceL:xe(),O(_.ellipsis)?(Kye(),tm(),e+=2):(O(_.braceR)||(e++,rs()),tm());break;default:Xt();return}}function GK(){Na(),qK()}function Na(){x.tokens.push(new JL),wK(),x.start=x.pos;const i=Ze.charCodeAt(x.pos);if(kC[i])zye();else if(i===Q.quotationMark||i===Q.apostrophe)jye(i);else switch(++x.pos,i){case Q.greaterThan:Zt(_.jsxTagEnd);break;case Q.lessThan:Zt(_.jsxTagStart);break;case Q.slash:Zt(_.slash);break;case Q.equalsTo:Zt(_.eq);break;case Q.leftCurlyBrace:Zt(_.braceL);break;case Q.dot:Zt(_.dot);break;case Q.colon:Zt(_.colon);break;default:Xt()}}function tm(){x.tokens.push(new JL),x.start=x.pos,Uye()}function Zye(i){if(O(_.question)){const e=Vi();if(e===_.colon||e===_.comma||e===_.parenR)return}ZK(i)}function Xye(){_K(_.question),O(_.colon)&&(_n?IC():On&&Rp())}class Yye{constructor(e){this.stop=e}}function rs(i=!1){if(ss(i),O(_.comma))for(;ge(_.comma);)ss(i)}function ss(i=!1,e=!1){return _n?Oye(i,e):On?nwe(i,e):Pc(i,e)}function Pc(i,e){if(O(_._yield))return fCe(),!1;(O(_.parenL)||O(_.name)||O(_._yield))&&(x.potentialArrowAt=x.start);const t=Qye(i);return e&&r3(),x.type&_.IS_ASSIGN?(xe(),ss(i),!1):t}function Qye(i){return eCe(i)?!0:(Jye(i),!1)}function Jye(i){_n||On?Zye(i):ZK(i)}function ZK(i){ge(_.question)&&(ss(),Se(_.colon),ss(i))}function eCe(i){const e=x.tokens.length;return RC()?!0:(rx(e,-1,i),!1)}function rx(i,e,t){if(_n&&(_._in&_.PRECEDENCE_MASK)>e&&!io()&&(Nr(z._as)||Nr(z._satisfies))){const r=nn(1);Hi(),Qt(r),xK(),rx(i,e,t);return}const n=x.type&_.PRECEDENCE_MASK;if(n>0&&(!t||!O(_._in))&&n>e){const r=x.type;xe(),r===_.nullishCoalescing&&(x.tokens[x.tokens.length-1].nullishStartIndex=i);const s=x.tokens.length;RC(),rx(s,r&_.IS_RIGHT_ASSOCIATIVE?n-1:n,t),r===_.nullishCoalescing&&(x.tokens[i].numNullishCoalesceStarts++,x.tokens[x.tokens.length-1].numNullishCoalesceEnds++),rx(i,e,t)}}function RC(){if(_n&&!QL&&ge(_.lessThan))return cye(),!1;if(gt(z._module)&&vK()===Q.leftCurlyBrace&&!hK())return gCe(),!1;if(x.type&_.IS_PREFIX)return xe(),RC(),!1;if(XK())return!0;for(;x.type&_.IS_POSTFIX&&!Yo();)x.type===_.preIncDec&&(x.type=_.postIncDec),xe();return!1}function XK(){const i=x.tokens.length;return du()?!0:(t3(i),x.tokens.length>i&&x.tokens[i].isOptionalChainStart&&(x.tokens[x.tokens.length-1].isOptionalChainEnd=!0),!1)}function t3(i,e=!1){On?rwe(i,e):YK(i,e)}function YK(i,e=!1){const t=new Yye(!1);do tCe(i,e,t);while(!t.stop&&!x.error)}function tCe(i,e,t){_n?wye(i,e,t):On?BCe(i,e,t):n3(i,e,t)}function n3(i,e,t){if(!e&&ge(_.doubleColon))i3(),t.stop=!0,t3(i,e);else if(O(_.questionDot)){if(x.tokens[i].isOptionalChainStart=!0,e&&Vi()===_.parenL){t.stop=!0;return}xe(),x.tokens[x.tokens.length-1].subscriptStartIndex=i,ge(_.bracketL)?(rs(),Se(_.bracketR)):ge(_.parenL)?mh():cT()}else if(ge(_.dot))x.tokens[x.tokens.length-1].subscriptStartIndex=i,cT();else if(ge(_.bracketL))x.tokens[x.tokens.length-1].subscriptStartIndex=i,rs(),Se(_.bracketR);else if(!e&&O(_.parenL))if(QK()){const n=x.snapshot(),r=x.tokens.length;xe(),x.tokens[x.tokens.length-1].subscriptStartIndex=i;const s=w0();x.tokens[x.tokens.length-1].contextId=s,mh(),x.tokens[x.tokens.length-1].contextId=s,nCe()&&(x.restoreFromSnapshot(n),t.stop=!0,x.scopeDepth++,j1(),iCe(r))}else{xe(),x.tokens[x.tokens.length-1].subscriptStartIndex=i;const n=w0();x.tokens[x.tokens.length-1].contextId=n,mh(),x.tokens[x.tokens.length-1].contextId=n}else O(_.backQuote)?s3():t.stop=!0}function QK(){return x.tokens[x.tokens.length-1].contextualKeyword===z._async&&!Yo()}function mh(){let i=!0;for(;!ge(_.parenR)&&!x.error;){if(i)i=!1;else if(Se(_.comma),ge(_.parenR))break;nq(!1)}}function nCe(){return O(_.colon)||O(_.arrow)}function iCe(i){_n?Mye():On&&twe(),Se(_.arrow),k0(i)}function i3(){const i=x.tokens.length;du(),t3(i,!0)}function du(){if(ge(_.modulo))return Pt(),!1;if(O(_.jsxText)||O(_.jsxEmptyText))return V_(),!1;if(O(_.lessThan)&&QL)return x.type=_.jsxTagStart,GK(),xe(),!1;const i=x.potentialArrowAt===x.start;switch(x.type){case _.slash:case _.assign:zve();case _._super:case _._this:case _.regexp:case _.num:case _.bigint:case _.decimal:case _.string:case _._null:case _._true:case _._false:return xe(),!1;case _._import:return xe(),O(_.dot)&&(x.tokens[x.tokens.length-1].type=_.name,xe(),Pt()),!1;case _.name:{const e=x.tokens.length,t=x.start,n=x.contextualKeyword;return Pt(),n===z._await?(hCe(),!1):n===z._async&&O(_._function)&&!Yo()?(xe(),Vg(t,!1),!1):i&&n===z._async&&!Yo()&&O(_.name)?(x.scopeDepth++,ff(!1),Se(_.arrow),k0(e),!0):O(_._do)&&!Yo()?(xe(),_h(),!1):i&&!Yo()&&O(_.arrow)?(x.scopeDepth++,G4(!1),Se(_.arrow),k0(e),!0):(x.tokens[x.tokens.length-1].identifierRole=Ct.Access,!1)}case _._do:return xe(),_h(),!1;case _.parenL:return JK(i);case _.bracketL:return xe(),tq(_.bracketR,!0),!1;case _.braceL:return o3(!1,!1),!1;case _._function:return rCe(),!1;case _.at:p3();case _._class:return Hg(!1),!1;case _._new:return oCe(),!1;case _.backQuote:return s3(),!1;case _.doubleColon:return xe(),i3(),!1;case _.hash:{const e=vK();return kC[e]||e===Q.backslash?cT():xe(),!1}default:return Xt(),!1}}function cT(){ge(_.hash),Pt()}function rCe(){const i=x.start;Pt(),ge(_.dot)&&Pt(),Vg(i,!1)}function V_(){xe()}function iD(){Se(_.parenL),rs(),Se(_.parenR)}function JK(i){const e=x.snapshot(),t=x.tokens.length;Se(_.parenL);let n=!0;for(;!O(_.parenR)&&!x.error;){if(n)n=!1;else if(Se(_.comma),O(_.parenR))break;if(O(_.ellipsis)){MK(!1),r3();break}else ss(!1,!0)}return Se(_.parenR),i&&sCe()&&m2()?(x.restoreFromSnapshot(e),x.scopeDepth++,j1(),m2(),k0(t),x.error?(x.restoreFromSnapshot(e),JK(!1),!1):!0):!1}function sCe(){return O(_.colon)||!Yo()}function m2(){return _n?Wye():On?iwe():ge(_.arrow)}function r3(){(_n||On)&&Xye()}function oCe(){if(Se(_._new),ge(_.dot)){Pt();return}aCe(),On&&WCe(),ge(_.parenL)&&tq(_.parenR)}function aCe(){i3(),ge(_.questionDot)}function s3(){for(Ju(),Ju();!O(_.backQuote)&&!x.error;)Se(_.dollarBraceL),rs(),Ju(),Ju();xe()}function o3(i,e){const t=w0();let n=!0;for(xe(),x.tokens[x.tokens.length-1].contextId=t;!ge(_.braceR)&&!x.error;){if(n)n=!1;else if(Se(_.comma),ge(_.braceR))break;let r=!1;if(O(_.ellipsis)){const s=x.tokens.length;if(PK(),i&&(x.tokens.length===s+2&&G4(e),ge(_.braceR)))break;continue}i||(r=ge(_.star)),!i&&gt(z._async)?(r&&Xt(),Pt(),O(_.colon)||O(_.parenL)||O(_.braceR)||O(_.eq)||O(_.comma)||(O(_.star)&&(xe(),r=!0),T0(t))):T0(t),uCe(i,e,t)}x.tokens[x.tokens.length-1].contextId=t}function lCe(i){return!i&&(O(_.string)||O(_.num)||O(_.bracketL)||O(_.name)||!!(x.type&_.IS_KEYWORD))}function cCe(i,e){const t=x.start;return O(_.parenL)?(i&&Xt(),_2(t,!1),!0):lCe(i)?(T0(e),_2(t,!1),!0):!1}function dCe(i,e){if(ge(_.colon)){i?aT(e):ss(!1);return}let t;i?x.scopeDepth===0?t=Ct.ObjectShorthandTopLevelDeclaration:e?t=Ct.ObjectShorthandBlockScopedDeclaration:t=Ct.ObjectShorthandFunctionScopedDeclaration:t=Ct.ObjectShorthand,x.tokens[x.tokens.length-1].identifierRole=t,aT(e,!0)}function uCe(i,e,t){_n?Nye():On&&ZCe(),cCe(i,t)||dCe(i,e)}function T0(i){On&&g3(),ge(_.bracketL)?(x.tokens[x.tokens.length-1].contextId=i,ss(),Se(_.bracketR),x.tokens[x.tokens.length-1].contextId=i):(O(_.num)||O(_.string)||O(_.bigint)||O(_.decimal)?du():cT(),x.tokens[x.tokens.length-1].identifierRole=Ct.ObjectKey,x.tokens[x.tokens.length-1].contextId=i)}function _2(i,e){const t=w0();x.scopeDepth++;const n=x.tokens.length;j1(e,t),eq(i,t);const s=x.tokens.length;x.scopes.push(new Uc(n,s,!0)),x.scopeDepth--}function k0(i){EC(!0);const e=x.tokens.length;x.scopes.push(new Uc(i,e,!0)),x.scopeDepth--}function eq(i,e=0){_n?Cye(i,e):On?FCe(e):EC(!1,e)}function EC(i,e=0){i&&!O(_.braceL)?ss():_h(!0,e)}function tq(i,e=!1){let t=!0;for(;!ge(i)&&!x.error;){if(t)t=!1;else if(Se(_.comma),ge(i))break;nq(e)}}function nq(i){i&&O(_.comma)||(O(_.ellipsis)?(PK(),r3()):O(_.question)?xe():ss(!1,!0))}function Pt(){xe(),x.tokens[x.tokens.length-1].type=_.name}function hCe(){RC()}function fCe(){xe(),!O(_.semi)&&!Yo()&&(ge(_.star),ss())}function gCe(){ir(z._module),Se(_.braceL),sD(_.braceR)}function pCe(i){return(i.type===_.name||!!(i.type&_.IS_KEYWORD))&&i.contextualKeyword!==z._from}function jc(i){const e=nn(0);Se(i||_.colon),Io(),Qt(e)}function Z7(){Se(_.modulo),ir(z._checks),ge(_.parenL)&&(rs(),Se(_.parenR))}function a3(){const i=nn(0);Se(_.colon),O(_.modulo)?Z7():(Io(),O(_.modulo)&&Z7()),Qt(i)}function mCe(){xe(),l3(!0)}function _Ce(){xe(),Pt(),O(_.lessThan)&&$l(),Se(_.parenL),v2(),Se(_.parenR),a3(),Di()}function b2(){O(_._class)?mCe():O(_._function)?_Ce():O(_._var)?bCe():Nr(z._module)?ge(_.dot)?CCe():vCe():gt(z._type)?wCe():gt(z._opaque)?SCe():gt(z._interface)?xCe():O(_._export)?yCe():Xt()}function bCe(){xe(),oq(),Di()}function vCe(){for(O(_.string)?du():Pt(),Se(_.braceL);!O(_.braceR)&&!x.error;)O(_._import)?(xe(),mq()):Xt();Se(_.braceR)}function yCe(){Se(_._export),ge(_._default)?O(_._function)||O(_._class)?b2():(Io(),Di()):O(_._var)||O(_._function)||O(_._class)||gt(z._opaque)?b2():O(_.star)||O(_.braceL)||gt(z._interface)||gt(z._type)||gt(z._opaque)?gq():Xt()}function CCe(){ir(z._exports),Rp(),Di()}function wCe(){xe(),d3()}function SCe(){xe(),u3(!0)}function xCe(){xe(),l3()}function l3(i=!1){if(rD(),O(_.lessThan)&&$l(),ge(_._extends))do sx();while(!i&&ge(_.comma));if(gt(z._mixins)){xe();do sx();while(ge(_.comma))}if(gt(z._implements)){xe();do sx();while(ge(_.comma))}dT(i,!1,i)}function sx(){iq(!1),O(_.lessThan)&&Wg()}function c3(){l3()}function rD(){Pt()}function d3(){rD(),O(_.lessThan)&&$l(),jc(_.eq),Di()}function u3(i){ir(z._type),rD(),O(_.lessThan)&&$l(),O(_.colon)&&jc(_.colon),i||jc(_.eq),Di()}function TCe(){g3(),oq(),ge(_.eq)&&Io()}function $l(){const i=nn(0);O(_.lessThan)||O(_.typeParameterStart)?xe():Xt();do TCe(),O(_.greaterThan)||Se(_.comma);while(!O(_.greaterThan)&&!x.error);Se(_.greaterThan),Qt(i)}function Wg(){const i=nn(0);for(Se(_.lessThan);!O(_.greaterThan)&&!x.error;)Io(),O(_.greaterThan)||Se(_.comma);Se(_.greaterThan),Qt(i)}function kCe(){if(ir(z._interface),ge(_._extends))do sx();while(ge(_.comma));dT(!1,!1,!1)}function h3(){O(_.num)||O(_.string)?du():Pt()}function LCe(){Vi()===_.colon?(h3(),jc()):Io(),Se(_.bracketR),jc()}function DCe(){h3(),Se(_.bracketR),Se(_.bracketR),O(_.lessThan)||O(_.parenL)?f3():(ge(_.question),jc())}function f3(){for(O(_.lessThan)&&$l(),Se(_.parenL);!O(_.parenR)&&!O(_.ellipsis)&&!x.error;)uT(),O(_.parenR)||Se(_.comma);ge(_.ellipsis)&&uT(),Se(_.parenR),jc()}function ICe(){f3()}function dT(i,e,t){let n;for(e&&O(_.braceBarL)?(Se(_.braceBarL),n=_.braceBarR):(Se(_.braceL),n=_.braceR);!O(n)&&!x.error;){if(t&&gt(z._proto)){const r=Vi();r!==_.colon&&r!==_.question&&(xe(),i=!1)}if(i&&gt(z._static)){const r=Vi();r!==_.colon&&r!==_.question&&xe()}if(g3(),ge(_.bracketL))ge(_.bracketL)?DCe():LCe();else if(O(_.parenL)||O(_.lessThan))ICe();else{if(gt(z._get)||gt(z._set)){const r=Vi();(r===_.name||r===_.string||r===_.num)&&xe()}RCe()}ECe()}Se(n)}function RCe(){if(O(_.ellipsis)){if(Se(_.ellipsis),ge(_.comma)||ge(_.semi),O(_.braceR))return;Io()}else h3(),O(_.lessThan)||O(_.parenL)?f3():(ge(_.question),jc())}function ECe(){!ge(_.semi)&&!ge(_.comma)&&!O(_.braceR)&&!O(_.braceBarR)&&Xt()}function iq(i){for(i||Pt();ge(_.dot);)Pt()}function NCe(){iq(!0),O(_.lessThan)&&Wg()}function ACe(){Se(_._typeof),rq()}function PCe(){for(Se(_.bracketL);x.pos<Ze.length&&!O(_.bracketR)&&(Io(),!O(_.bracketR));)Se(_.comma);Se(_.bracketR)}function uT(){const i=Vi();i===_.colon||i===_.question?(Pt(),ge(_.question),jc()):Io()}function v2(){for(;!O(_.parenR)&&!O(_.ellipsis)&&!x.error;)uT(),O(_.parenR)||Se(_.comma);ge(_.ellipsis)&&uT()}function rq(){let i=!1;const e=x.noAnonFunctionType;switch(x.type){case _.name:{if(gt(z._interface)){kCe();return}Pt(),NCe();return}case _.braceL:dT(!1,!1,!1);return;case _.braceBarL:dT(!1,!0,!1);return;case _.bracketL:PCe();return;case _.lessThan:$l(),Se(_.parenL),v2(),Se(_.parenR),Se(_.arrow),Io();return;case _.parenL:if(xe(),!O(_.parenR)&&!O(_.ellipsis))if(O(_.name)){const t=Vi();i=t!==_.question&&t!==_.colon}else i=!0;if(i)if(x.noAnonFunctionType=!1,Io(),x.noAnonFunctionType=e,x.noAnonFunctionType||!(O(_.comma)||O(_.parenR)&&Vi()===_.arrow)){Se(_.parenR);return}else ge(_.comma);v2(),Se(_.parenR),Se(_.arrow),Io();return;case _.minus:xe(),V_();return;case _.string:case _.num:case _._true:case _._false:case _._null:case _._this:case _._void:case _.star:xe();return;default:if(x.type===_._typeof){ACe();return}else if(x.type&_.IS_KEYWORD){xe(),x.tokens[x.tokens.length-1].type=_.name;return}}Xt()}function MCe(){for(rq();!Yo()&&(O(_.bracketL)||O(_.questionDot));)ge(_.questionDot),Se(_.bracketL),ge(_.bracketR)||(Io(),Se(_.bracketR))}function sq(){ge(_.question)?sq():MCe()}function X7(){sq(),!x.noAnonFunctionType&&ge(_.arrow)&&Io()}function Y7(){for(ge(_.bitwiseAND),X7();ge(_.bitwiseAND);)X7()}function OCe(){for(ge(_.bitwiseOR),Y7();ge(_.bitwiseOR);)Y7()}function Io(){OCe()}function Rp(){jc()}function oq(){Pt(),O(_.colon)&&Rp()}function g3(){(O(_.plus)||O(_.minus))&&(xe(),x.tokens[x.tokens.length-1].isType=!0)}function FCe(i){O(_.colon)&&a3(),EC(!1,i)}function BCe(i,e,t){if(O(_.questionDot)&&Vi()===_.lessThan){if(e){t.stop=!0;return}xe(),Wg(),Se(_.parenL),mh();return}else if(!e&&O(_.lessThan)){const n=x.snapshot();if(Wg(),Se(_.parenL),mh(),x.error)x.restoreFromSnapshot(n);else return}n3(i,e,t)}function WCe(){if(O(_.lessThan)){const i=x.snapshot();Wg(),x.error&&x.restoreFromSnapshot(i)}}function VCe(){if(O(_.name)&&x.contextualKeyword===z._interface){const i=nn(0);return xe(),c3(),Qt(i),!0}else if(gt(z._enum))return aq(),!0;return!1}function HCe(){return gt(z._enum)?(aq(),!0):!1}function UCe(i){if(i===z._declare){if(O(_._class)||O(_.name)||O(_._function)||O(_._var)||O(_._export)){const e=nn(1);b2(),Qt(e)}}else if(O(_.name)){if(i===z._interface){const e=nn(1);c3(),Qt(e)}else if(i===z._type){const e=nn(1);d3(),Qt(e)}else if(i===z._opaque){const e=nn(1);u3(!1),Qt(e)}}Di()}function jCe(){return gt(z._type)||gt(z._interface)||gt(z._opaque)||gt(z._enum)}function zCe(){return O(_.name)&&(x.contextualKeyword===z._type||x.contextualKeyword===z._interface||x.contextualKeyword===z._opaque||x.contextualKeyword===z._enum)}function $Ce(){if(gt(z._type)){const i=nn(1);xe(),O(_.braceL)?(m3(),L0()):d3(),Qt(i)}else if(gt(z._opaque)){const i=nn(1);xe(),u3(!1),Qt(i)}else if(gt(z._interface)){const i=nn(1);xe(),c3(),Qt(i)}else oa(!0)}function KCe(){return O(_.star)||gt(z._type)&&Vi()===_.star}function qCe(){if(Nr(z._type)){const i=nn(2);y2(),Qt(i)}else y2()}function GCe(i){if(i&&O(_.lessThan)&&Wg(),gt(z._implements)){const e=nn(0);xe(),x.tokens[x.tokens.length-1].type=_._implements;do rD(),O(_.lessThan)&&Wg();while(ge(_.comma));Qt(e)}}function ZCe(){O(_.lessThan)&&($l(),O(_.parenL)||Xt())}function XCe(){const i=nn(0);ge(_.question),O(_.colon)&&Rp(),Qt(i)}function YCe(){if(O(_._typeof)||gt(z._type)){const i=LC();(pCe(i)||i.type===_.braceL||i.type===_.star)&&xe()}}function QCe(){const i=x.contextualKeyword===z._type||x.type===_._typeof;i?xe():Pt(),gt(z._as)&&!$4(z._as)?(Pt(),i&&!O(_.name)&&!(x.type&_.IS_KEYWORD)||Pt()):(i&&(O(_.name)||x.type&_.IS_KEYWORD)&&Pt(),Nr(z._as)&&Pt())}function JCe(){if(O(_.lessThan)){const i=nn(0);$l(),Qt(i)}}function ewe(){O(_.colon)&&Rp()}function twe(){if(O(_.colon)){const i=x.noAnonFunctionType;x.noAnonFunctionType=!0,Rp(),x.noAnonFunctionType=i}}function nwe(i,e){if(O(_.lessThan)){const t=x.snapshot();let n=Pc(i,e);if(x.error)x.restoreFromSnapshot(t),x.type=_.typeParameterStart;else return n;const r=nn(0);if($l(),Qt(r),n=Pc(i,e),n)return!0;Xt()}return Pc(i,e)}function iwe(){if(O(_.colon)){const i=nn(0),e=x.snapshot(),t=x.noAnonFunctionType;x.noAnonFunctionType=!0,a3(),x.noAnonFunctionType=t,Yo()&&Xt(),O(_.arrow)||Xt(),x.error&&x.restoreFromSnapshot(e),Qt(i)}return ge(_.arrow)}function rwe(i,e=!1){if(x.tokens[x.tokens.length-1].contextualKeyword===z._async&&O(_.lessThan)){const t=x.snapshot();if(swe()&&!x.error)return;x.restoreFromSnapshot(t)}YK(i,e)}function swe(){x.scopeDepth++;const i=x.tokens.length;return j1(),m2()?(k0(i),!0):!1}function aq(){ir(z._enum),x.tokens[x.tokens.length-1].type=_._enum,Pt(),owe()}function owe(){Nr(z._of)&&xe(),Se(_.braceL),awe(),Se(_.braceR)}function awe(){for(;!O(_.braceR)&&!x.error&&!ge(_.ellipsis);)lwe(),O(_.braceR)||Se(_.comma)}function lwe(){Pt(),ge(_.eq)&&xe()}function cwe(){if(sD(_.eof),x.scopes.push(new Uc(0,x.tokens.length,!0)),x.scopeDepth!==0)throw new Error(`Invalid scope depth at end of file: ${x.scopeDepth}`);return new Zwe(x.tokens,x.scopes)}function oa(i){On&&VCe()||(O(_.at)&&p3(),dwe(i))}function dwe(i){if(_n&&Lye())return;const e=x.type;switch(e){case _._break:case _._continue:hwe();return;case _._debugger:fwe();return;case _._do:gwe();return;case _._for:pwe();return;case _._function:if(Vi()===_.dot)break;i||Xt(),bwe();return;case _._class:i||Xt(),Hg(!0);return;case _._if:vwe();return;case _._return:ywe();return;case _._switch:Cwe();return;case _._throw:wwe();return;case _._try:xwe();return;case _._let:case _._const:i||Xt();case _._var:ox(e!==_._var);return;case _._while:Twe();return;case _.braceL:_h();return;case _.semi:kwe();return;case _._export:case _._import:{const r=Vi();if(r===_.parenL||r===_.dot)break;xe(),e===_._import?mq():gq();return}case _.name:if(x.contextualKeyword===z._async){const r=x.start,s=x.snapshot();if(xe(),O(_._function)&&!Yo()){Se(_._function),Vg(r,!0);return}else x.restoreFromSnapshot(s)}else if(x.contextualKeyword===z._using&&!hK()&&Vi()===_.name){ox(!0);return}else if(lq()){ir(z._await),ox(!0);return}}const t=x.tokens.length;rs();let n=null;if(x.tokens.length===t+1){const r=x.tokens[x.tokens.length-1];r.type===_.name&&(n=r.contextualKeyword)}if(n==null){Di();return}ge(_.colon)?Lwe():Dwe(n)}function lq(){if(!gt(z._await))return!1;const i=x.snapshot();return xe(),!gt(z._using)||io()||(xe(),!O(_.name)||io())?(x.restoreFromSnapshot(i),!1):(x.restoreFromSnapshot(i),!0)}function p3(){for(;O(_.at);)cq()}function cq(){if(xe(),ge(_.parenL))rs(),Se(_.parenR);else{for(Pt();ge(_.dot);)Pt();uwe()}}function uwe(){_n?Hye():dq()}function dq(){ge(_.parenL)&&mh()}function hwe(){xe(),Cc()||(Pt(),Di())}function fwe(){xe(),Di()}function gwe(){xe(),oa(!1),Se(_._while),iD(),ge(_.semi)}function pwe(){x.scopeDepth++;const i=x.tokens.length;_we();const e=x.tokens.length;x.scopes.push(new Uc(i,e,!1)),x.scopeDepth--}function mwe(){return!(!gt(z._using)||$4(z._of))}function _we(){xe();let i=!1;if(gt(z._await)&&(i=!0,xe()),Se(_.parenL),O(_.semi)){i&&Xt(),RR();return}const e=lq();if(e||O(_._var)||O(_._let)||O(_._const)||mwe()){if(e&&ir(z._await),xe(),uq(!0,x.type!==_._var),O(_._in)||gt(z._of)){Q7(i);return}RR();return}if(rs(!0),O(_._in)||gt(z._of)){Q7(i);return}i&&Xt(),RR()}function bwe(){const i=x.start;xe(),Vg(i,!0)}function vwe(){xe(),iD(),oa(!1),ge(_._else)&&oa(!1)}function ywe(){xe(),Cc()||(rs(),Di())}function Cwe(){xe(),iD(),x.scopeDepth++;const i=x.tokens.length;for(Se(_.braceL);!O(_.braceR)&&!x.error;)if(O(_._case)||O(_._default)){const t=O(_._case);xe(),t&&rs(),Se(_.colon)}else oa(!0);xe();const e=x.tokens.length;x.scopes.push(new Uc(i,e,!1)),x.scopeDepth--}function wwe(){xe(),rs(),Di()}function Swe(){eD(!0),_n&&H1()}function xwe(){if(xe(),_h(),O(_._catch)){xe();let i=null;if(O(_.parenL)&&(x.scopeDepth++,i=x.tokens.length,Se(_.parenL),Swe(),Se(_.parenR)),_h(),i!=null){const e=x.tokens.length;x.scopes.push(new Uc(i,e,!1)),x.scopeDepth--}}ge(_._finally)&&_h()}function ox(i){xe(),uq(!1,i),Di()}function Twe(){xe(),iD(),oa(!1)}function kwe(){xe()}function Lwe(){oa(!0)}function Dwe(i){_n?Iye(i):On?UCe(i):Di()}function _h(i=!1,e=0){const t=x.tokens.length;x.scopeDepth++,Se(_.braceL),e&&(x.tokens[x.tokens.length-1].contextId=e),sD(_.braceR),e&&(x.tokens[x.tokens.length-1].contextId=e);const n=x.tokens.length;x.scopes.push(new Uc(t,n,i)),x.scopeDepth--}function sD(i){for(;!ge(i)&&!x.error;)oa(!0)}function RR(){Se(_.semi),O(_.semi)||rs(),Se(_.semi),O(_.parenR)||rs(),Se(_.parenR),oa(!1)}function Q7(i){i?Nr(z._of):xe(),rs(),Se(_.parenR),oa(!1)}function uq(i,e){for(;;){if(Iwe(e),ge(_.eq)){const t=x.tokens.length-1;ss(i),x.tokens[t].rhsEndIndex=x.tokens.length}if(!ge(_.comma))break}}function Iwe(i){eD(i),_n?Pye():On&&ewe()}function Vg(i,e,t=!1){O(_.star)&&xe(),e&&!t&&!O(_.name)&&!O(_._yield)&&Xt();let n=null;O(_.name)&&(e||(n=x.tokens.length,x.scopeDepth++),ff(!1));const r=x.tokens.length;x.scopeDepth++,j1(),eq(i);const s=x.tokens.length;x.scopes.push(new Uc(r,s,!0)),x.scopeDepth--,n!==null&&(x.scopes.push(new Uc(n,s,!0)),x.scopeDepth--)}function j1(i=!1,e=0){_n?Aye():On&&JCe(),Se(_.parenL),e&&(x.tokens[x.tokens.length-1].contextId=e),Z4(_.parenR,!1,!1,i,e),e&&(x.tokens[x.tokens.length-1].contextId=e)}function Hg(i,e=!1){const t=w0();xe(),x.tokens[x.tokens.length-1].contextId=t,x.tokens[x.tokens.length-1].isExpression=!i;let n=null;i||(n=x.tokens.length,x.scopeDepth++),Awe(i,e),Pwe();const r=x.tokens.length;if(Rwe(t),!x.error&&(x.tokens[r].contextId=t,x.tokens[x.tokens.length-1].contextId=t,n!==null)){const s=x.tokens.length;x.scopes.push(new Uc(n,s,!1)),x.scopeDepth--}}function hq(){return O(_.eq)||O(_.semi)||O(_.braceR)||O(_.bang)||O(_.colon)}function fq(){return O(_.parenL)||O(_.lessThan)}function Rwe(i){for(Se(_.braceL);!ge(_.braceR)&&!x.error;){if(ge(_.semi))continue;if(O(_.at)){cq();continue}const e=x.start;Ewe(e,i)}}function Ewe(i,e){_n&&X4([z._declare,z._public,z._protected,z._private,z._override]);let t=!1;if(O(_.name)&&x.contextualKeyword===z._static){if(Pt(),fq()){ev(i,!1);return}else if(hq()){ax();return}if(x.tokens[x.tokens.length-1].type=_._static,t=!0,O(_.braceL)){x.tokens[x.tokens.length-1].contextId=e,_h();return}}Nwe(i,t,e)}function Nwe(i,e,t){if(_n&&Dye(e))return;if(ge(_.star)){vb(t),ev(i,!1);return}vb(t);let n=!1;const r=x.tokens[x.tokens.length-1];r.contextualKeyword===z._constructor&&(n=!0),J7(),fq()?ev(i,n):hq()?ax():r.contextualKeyword===z._async&&!Cc()?(x.tokens[x.tokens.length-1].type=_._async,O(_.star)&&xe(),vb(t),J7(),ev(i,!1)):(r.contextualKeyword===z._get||r.contextualKeyword===z._set)&&!(Cc()&&O(_.star))?(r.contextualKeyword===z._get?x.tokens[x.tokens.length-1].type=_._get:x.tokens[x.tokens.length-1].type=_._set,vb(t),ev(i,!1)):r.contextualKeyword===z._accessor&&!Cc()?(vb(t),ax()):Cc()?ax():Xt()}function ev(i,e){_n?Ip():On&&O(_.lessThan)&&$l(),_2(i,e)}function vb(i){T0(i)}function J7(){if(_n){const i=nn(0);ge(_.question),Qt(i)}}function ax(){if(_n?(_K(_.bang),H1()):On&&O(_.colon)&&Rp(),O(_.eq)){const i=x.tokens.length;xe(),ss(),x.tokens[i].rhsEndIndex=x.tokens.length}Di()}function Awe(i,e=!1){_n&&(!i||e)&&gt(z._implements)||(O(_.name)&&ff(!0),_n?Ip():On&&O(_.lessThan)&&$l())}function Pwe(){let i=!1;ge(_._extends)?(XK(),i=!0):i=!1,_n?Eye(i):On&&GCe(i)}function gq(){const i=x.tokens.length-1;_n&&Sye()||(Bwe()?Wwe():Fwe()?(Pt(),O(_.comma)&&Vi()===_.star?(Se(_.comma),Se(_.star),ir(z._as),Pt()):pq(),L0()):ge(_._default)?Mwe():Hwe()?Owe():(m3(),L0()),x.tokens[i].rhsEndIndex=x.tokens.length)}function Mwe(){if(_n&&kye()||On&&HCe())return;const i=x.start;ge(_._function)?Vg(i,!0,!0):gt(z._async)&&Vi()===_._function?(Nr(z._async),ge(_._function),Vg(i,!0,!0)):O(_._class)?Hg(!0,!0):O(_.at)?(p3(),Hg(!0,!0)):(ss(),Di())}function Owe(){_n?Rye():On?$Ce():oa(!0)}function Fwe(){if(_n&&zK())return!1;if(On&&zCe())return!1;if(O(_.name))return x.contextualKeyword!==z._async;if(!O(_._default))return!1;const i=K4(),e=LC(),t=e.type===_.name&&e.contextualKeyword===z._from;if(e.type===_.comma)return!0;if(t){const n=Ze.charCodeAt(bK(i+4));return n===Q.quotationMark||n===Q.apostrophe}return!1}function pq(){ge(_.comma)&&m3()}function L0(){Nr(z._from)&&(du(),_q()),Di()}function Bwe(){return On?KCe():O(_.star)}function Wwe(){On?qCe():y2()}function y2(){Se(_.star),gt(z._as)?Vwe():L0()}function Vwe(){xe(),x.tokens[x.tokens.length-1].type=_._as,Pt(),pq(),L0()}function Hwe(){return _n&&zK()||On&&jCe()||x.type===_._var||x.type===_._const||x.type===_._let||x.type===_._function||x.type===_._class||gt(z._async)||O(_.at)}function m3(){let i=!0;for(Se(_.braceL);!ge(_.braceR)&&!x.error;){if(i)i=!1;else if(Se(_.comma),ge(_.braceR))break;Uwe()}}function Uwe(){if(_n){Tye();return}Pt(),x.tokens[x.tokens.length-1].identifierRole=Ct.ExportAccess,Nr(z._as)&&Pt()}function jwe(){const i=x.snapshot();return ir(z._module),Nr(z._from)?gt(z._from)?(x.restoreFromSnapshot(i),!0):(x.restoreFromSnapshot(i),!1):O(_.comma)?(x.restoreFromSnapshot(i),!1):(x.restoreFromSnapshot(i),!0)}function zwe(){gt(z._module)&&jwe()&&xe()}function mq(){if(_n&&O(_.name)&&Vi()===_.eq){g2();return}if(_n&&gt(z._type)){const i=LC();if(i.type===_.name&&i.contextualKeyword!==z._from){if(ir(z._type),Vi()===_.eq){g2();return}}else(i.type===_.star||i.type===_.braceL)&&ir(z._type)}O(_.string)||(zwe(),Kwe(),ir(z._from)),du(),_q(),Di()}function $we(){return O(_.name)}function e8(){oT()}function Kwe(){On&&YCe();let i=!0;if(!($we()&&(e8(),!ge(_.comma)))){if(O(_.star)){xe(),ir(z._as),e8();return}for(Se(_.braceL);!ge(_.braceR)&&!x.error;){if(i)i=!1;else if(ge(_.colon)&&Xt("ES2015 named imports do not destructure. Use another statement for destructuring after the import."),Se(_.comma),ge(_.braceR))break;qwe()}}}function qwe(){if(_n){xye();return}if(On){QCe();return}oT(),gt(z._as)&&(x.tokens[x.tokens.length-1].identifierRole=Ct.ImportAccess,xe(),oT())}function _q(){(O(_._with)||gt(z._assert)&&!io())&&(xe(),o3(!1,!1))}function Gwe(){return x.pos===0&&Ze.charCodeAt(0)===Q.numberSign&&Ze.charCodeAt(1)===Q.exclamationMark&&CK(2),yK(),cwe()}class Zwe{constructor(e,t){this.tokens=e,this.scopes=t}}function Xwe(i,e,t,n){if(n&&t)throw new Error("Cannot combine flow and typescript plugins.");Fve(i,e,t,n);const r=Gwe();if(x.error)throw Pve(x.error);return r}function Ywe(i){let e=i.currentIndex(),t=0;const n=i.currentToken();do{const r=i.tokens[e];if(r.isOptionalChainStart&&t++,r.isOptionalChainEnd&&t--,t+=r.numNullishCoalesceStarts,t-=r.numNullishCoalesceEnds,r.contextualKeyword===z._await&&r.identifierRole==null&&r.scopeDepth===n.scopeDepth)return!0;e+=1}while(t>0&&e<i.tokens.length);return!1}class Rv{__init(){this.resultCode=""}__init2(){this.resultMappings=new Array(this.tokens.length)}__init3(){this.tokenIndex=0}constructor(e,t,n,r,s){this.code=e,this.tokens=t,this.isFlowEnabled=n,this.disableESTransforms=r,this.helperManager=s,Rv.prototype.__init.call(this),Rv.prototype.__init2.call(this),Rv.prototype.__init3.call(this)}snapshot(){return{resultCode:this.resultCode,tokenIndex:this.tokenIndex}}restoreToSnapshot(e){this.resultCode=e.resultCode,this.tokenIndex=e.tokenIndex}dangerouslyGetAndRemoveCodeSinceSnapshot(e){const t=this.resultCode.slice(e.resultCode.length);return this.resultCode=e.resultCode,t}reset(){this.resultCode="",this.resultMappings=new Array(this.tokens.length),this.tokenIndex=0}matchesContextualAtIndex(e,t){return this.matches1AtIndex(e,_.name)&&this.tokens[e].contextualKeyword===t}identifierNameAtIndex(e){return this.identifierNameForToken(this.tokens[e])}identifierNameAtRelativeIndex(e){return this.identifierNameForToken(this.tokenAtRelativeIndex(e))}identifierName(){return this.identifierNameForToken(this.currentToken())}identifierNameForToken(e){return this.code.slice(e.start,e.end)}rawCodeForToken(e){return this.code.slice(e.start,e.end)}stringValueAtIndex(e){return this.stringValueForToken(this.tokens[e])}stringValue(){return this.stringValueForToken(this.currentToken())}stringValueForToken(e){return this.code.slice(e.start+1,e.end-1)}matches1AtIndex(e,t){return this.tokens[e].type===t}matches2AtIndex(e,t,n){return this.tokens[e].type===t&&this.tokens[e+1].type===n}matches3AtIndex(e,t,n,r){return this.tokens[e].type===t&&this.tokens[e+1].type===n&&this.tokens[e+2].type===r}matches1(e){return this.tokens[this.tokenIndex].type===e}matches2(e,t){return this.tokens[this.tokenIndex].type===e&&this.tokens[this.tokenIndex+1].type===t}matches3(e,t,n){return this.tokens[this.tokenIndex].type===e&&this.tokens[this.tokenIndex+1].type===t&&this.tokens[this.tokenIndex+2].type===n}matches4(e,t,n,r){return this.tokens[this.tokenIndex].type===e&&this.tokens[this.tokenIndex+1].type===t&&this.tokens[this.tokenIndex+2].type===n&&this.tokens[this.tokenIndex+3].type===r}matches5(e,t,n,r,s){return this.tokens[this.tokenIndex].type===e&&this.tokens[this.tokenIndex+1].type===t&&this.tokens[this.tokenIndex+2].type===n&&this.tokens[this.tokenIndex+3].type===r&&this.tokens[this.tokenIndex+4].type===s}matchesContextual(e){return this.matchesContextualAtIndex(this.tokenIndex,e)}matchesContextIdAndLabel(e,t){return this.matches1(e)&&this.currentToken().contextId===t}previousWhitespaceAndComments(){let e=this.code.slice(this.tokenIndex>0?this.tokens[this.tokenIndex-1].end:0,this.tokenIndex<this.tokens.length?this.tokens[this.tokenIndex].start:this.code.length);return this.isFlowEnabled&&(e=e.replace(/@flow/g,"")),e}replaceToken(e){this.resultCode+=this.previousWhitespaceAndComments(),this.appendTokenPrefix(),this.resultMappings[this.tokenIndex]=this.resultCode.length,this.resultCode+=e,this.appendTokenSuffix(),this.tokenIndex++}replaceTokenTrimmingLeftWhitespace(e){this.resultCode+=this.previousWhitespaceAndComments().replace(/[^\r\n]/g,""),this.appendTokenPrefix(),this.resultMappings[this.tokenIndex]=this.resultCode.length,this.resultCode+=e,this.appendTokenSuffix(),this.tokenIndex++}removeInitialToken(){this.replaceToken("")}removeToken(){this.replaceTokenTrimmingLeftWhitespace("")}removeBalancedCode(){let e=0;for(;!this.isAtEnd();){if(this.matches1(_.braceL))e++;else if(this.matches1(_.braceR)){if(e===0)return;e--}this.removeToken()}}copyExpectedToken(e){if(this.tokens[this.tokenIndex].type!==e)throw new Error(`Expected token ${e}`);this.copyToken()}copyToken(){this.resultCode+=this.previousWhitespaceAndComments(),this.appendTokenPrefix(),this.resultMappings[this.tokenIndex]=this.resultCode.length,this.resultCode+=this.code.slice(this.tokens[this.tokenIndex].start,this.tokens[this.tokenIndex].end),this.appendTokenSuffix(),this.tokenIndex++}copyTokenWithPrefix(e){this.resultCode+=this.previousWhitespaceAndComments(),this.appendTokenPrefix(),this.resultCode+=e,this.resultMappings[this.tokenIndex]=this.resultCode.length,this.resultCode+=this.code.slice(this.tokens[this.tokenIndex].start,this.tokens[this.tokenIndex].end),this.appendTokenSuffix(),this.tokenIndex++}appendTokenPrefix(){const e=this.currentToken();if((e.numNullishCoalesceStarts||e.isOptionalChainStart)&&(e.isAsyncOperation=Ywe(this)),!this.disableESTransforms){if(e.numNullishCoalesceStarts)for(let t=0;t<e.numNullishCoalesceStarts;t++)e.isAsyncOperation?(this.resultCode+="await ",this.resultCode+=this.helperManager.getHelperName("asyncNullishCoalesce")):this.resultCode+=this.helperManager.getHelperName("nullishCoalesce"),this.resultCode+="(";e.isOptionalChainStart&&(e.isAsyncOperation&&(this.resultCode+="await "),this.tokenIndex>0&&this.tokenAtRelativeIndex(-1).type===_._delete?e.isAsyncOperation?this.resultCode+=this.helperManager.getHelperName("asyncOptionalChainDelete"):this.resultCode+=this.helperManager.getHelperName("optionalChainDelete"):e.isAsyncOperation?this.resultCode+=this.helperManager.getHelperName("asyncOptionalChain"):this.resultCode+=this.helperManager.getHelperName("optionalChain"),this.resultCode+="([")}}appendTokenSuffix(){const e=this.currentToken();if(e.isOptionalChainEnd&&!this.disableESTransforms&&(this.resultCode+="])"),e.numNullishCoalesceEnds&&!this.disableESTransforms)for(let t=0;t<e.numNullishCoalesceEnds;t++)this.resultCode+="))"}appendCode(e){this.resultCode+=e}currentToken(){return this.tokens[this.tokenIndex]}currentTokenCode(){const e=this.currentToken();return this.code.slice(e.start,e.end)}tokenAtRelativeIndex(e){return this.tokens[this.tokenIndex+e]}currentIndex(){return this.tokenIndex}nextToken(){if(this.tokenIndex===this.tokens.length)throw new Error("Unexpectedly reached end of input.");this.tokenIndex++}previousToken(){this.tokenIndex--}finish(){if(this.tokenIndex!==this.tokens.length)throw new Error("Tried to finish processing tokens before reaching the end.");return this.resultCode+=this.previousWhitespaceAndComments(),{code:this.resultCode,mappings:this.resultMappings}}isAtEnd(){return this.tokenIndex===this.tokens.length}}function Qwe(i,e,t,n){const r=e.snapshot(),s=Jwe(e);let o=[];const a=[],l=[];let c=null;const d=[],u=[],h=e.currentToken().contextId;if(h==null)throw new Error("Expected non-null class context ID on class open-brace.");for(e.nextToken();!e.matchesContextIdAndLabel(_.braceR,h);)if(e.matchesContextual(z._constructor)&&!e.currentToken().isType)({constructorInitializerStatements:o,constructorInsertPos:c}=t8(e));else if(e.matches1(_.semi))n||u.push({start:e.currentIndex(),end:e.currentIndex()+1}),e.nextToken();else if(e.currentToken().isType)e.nextToken();else{const f=e.currentIndex();let g=!1,m=!1,y=!1;for(;hT(e.currentToken());)e.matches1(_._static)&&(g=!0),e.matches1(_.hash)&&(m=!0),(e.matches1(_._declare)||e.matches1(_._abstract))&&(y=!0),e.nextToken();if(g&&e.matches1(_.braceL)){ER(e,h);continue}if(m){ER(e,h);continue}if(e.matchesContextual(z._constructor)&&!e.currentToken().isType){({constructorInitializerStatements:o,constructorInsertPos:c}=t8(e));continue}const b=e.currentIndex();if(eSe(e),e.matches1(_.lessThan)||e.matches1(_.parenL)){ER(e,h);continue}for(;e.currentToken().isType;)e.nextToken();if(e.matches1(_.eq)){const v=e.currentIndex(),C=e.currentToken().rhsEndIndex;if(C==null)throw new Error("Expected rhsEndIndex on class field assignment.");for(e.nextToken();e.currentIndex()<C;)i.processToken();let w;g?(w=t.claimFreeName("__initStatic"),l.push(w)):(w=t.claimFreeName("__init"),a.push(w)),d.push({initializerName:w,equalsIndex:v,start:b,end:e.currentIndex()})}else(!n||y)&&u.push({start:f,end:e.currentIndex()})}return e.restoreToSnapshot(r),n?{headerInfo:s,constructorInitializerStatements:o,instanceInitializerNames:[],staticInitializerNames:[],constructorInsertPos:c,fields:[],rangesToRemove:u}:{headerInfo:s,constructorInitializerStatements:o,instanceInitializerNames:a,staticInitializerNames:l,constructorInsertPos:c,fields:d,rangesToRemove:u}}function ER(i,e){for(i.nextToken();i.currentToken().contextId!==e;)i.nextToken();for(;hT(i.tokenAtRelativeIndex(-1));)i.previousToken()}function Jwe(i){const e=i.currentToken(),t=e.contextId;if(t==null)throw new Error("Expected context ID on class token.");const n=e.isExpression;if(n==null)throw new Error("Expected isExpression on class token.");let r=null,s=!1;for(i.nextToken(),i.matches1(_.name)&&(r=i.identifierName());!i.matchesContextIdAndLabel(_.braceL,t);)i.matches1(_._extends)&&!i.currentToken().isType&&(s=!0),i.nextToken();return{isExpression:n,className:r,hasSuperclass:s}}function t8(i){const e=[];i.nextToken();const t=i.currentToken().contextId;if(t==null)throw new Error("Expected context ID on open-paren starting constructor params.");for(;!i.matchesContextIdAndLabel(_.parenR,t);)if(i.currentToken().contextId===t){if(i.nextToken(),hT(i.currentToken())){for(i.nextToken();hT(i.currentToken());)i.nextToken();const s=i.currentToken();if(s.type!==_.name)throw new Error("Expected identifier after access modifiers in constructor arg.");const o=i.identifierNameForToken(s);e.push(`this.${o} = ${o}`)}}else i.nextToken();for(i.nextToken();i.currentToken().isType;)i.nextToken();let n=i.currentIndex(),r=!1;for(;!i.matchesContextIdAndLabel(_.braceR,t);){if(!r&&i.matches2(_._super,_.parenL)){i.nextToken();const s=i.currentToken().contextId;if(s==null)throw new Error("Expected a context ID on the super call");for(;!i.matchesContextIdAndLabel(_.parenR,s);)i.nextToken();n=i.currentIndex(),r=!0}i.nextToken()}return i.nextToken(),{constructorInitializerStatements:e,constructorInsertPos:n}}function hT(i){return[_._async,_._get,_._set,_.plus,_.minus,_._readonly,_._static,_._public,_._private,_._protected,_._override,_._abstract,_.star,_._declare,_.hash].includes(i.type)}function eSe(i){if(i.matches1(_.bracketL)){const t=i.currentToken().contextId;if(t==null)throw new Error("Expected class context ID on computed name open bracket.");for(;!i.matchesContextIdAndLabel(_.bracketR,t);)i.nextToken();i.nextToken()}else i.nextToken()}function bq(i){if(i.removeInitialToken(),i.removeToken(),i.removeToken(),i.removeToken(),i.matches1(_.parenL))i.removeToken(),i.removeToken(),i.removeToken();else for(;i.matches1(_.dot);)i.removeToken(),i.removeToken()}const vq={typeDeclarations:new Set,valueDeclarations:new Set};function yq(i){const e=new Set,t=new Set;for(let n=0;n<i.tokens.length;n++){const r=i.tokens[n];r.type===_.name&&mK(r)&&(r.isType?e.add(i.identifierNameForToken(r)):t.add(i.identifierNameForToken(r)))}return{typeDeclarations:e,valueDeclarations:t}}function Cq(i){let e=i.currentIndex();for(;!i.matches1AtIndex(e,_.braceR);)e++;return i.matchesContextualAtIndex(e+1,z._from)&&i.matches1AtIndex(e+2,_.string)}function lg(i){(i.matches2(_._with,_.braceL)||i.matches2(_.name,_.braceL)&&i.matchesContextual(z._assert))&&(i.removeToken(),i.removeToken(),i.removeBalancedCode(),i.removeToken())}function wq(i,e,t,n){if(!i||e)return!1;const r=t.currentToken();if(r.rhsEndIndex==null)throw new Error("Expected non-null rhsEndIndex on export token.");const s=r.rhsEndIndex-t.currentIndex();if(s!==3&&!(s===4&&t.matches1AtIndex(r.rhsEndIndex-1,_.semi)))return!1;const o=t.tokenAtRelativeIndex(2);if(o.type!==_.name)return!1;const a=t.identifierNameForToken(o);return n.typeDeclarations.has(a)&&!n.valueDeclarations.has(a)}class Ev extends zl{__init(){this.hadExport=!1}__init2(){this.hadNamedExport=!1}__init3(){this.hadDefaultExport=!1}constructor(e,t,n,r,s,o,a,l,c,d,u,h){super(),this.rootTransformer=e,this.tokens=t,this.importProcessor=n,this.nameManager=r,this.helperManager=s,this.reactHotLoaderTransformer=o,this.enableLegacyBabel5ModuleInterop=a,this.enableLegacyTypeScriptModuleInterop=l,this.isTypeScriptTransformEnabled=c,this.isFlowTransformEnabled=d,this.preserveDynamicImport=u,this.keepUnusedImports=h,Ev.prototype.__init.call(this),Ev.prototype.__init2.call(this),Ev.prototype.__init3.call(this),this.declarationInfo=c?yq(t):vq}getPrefixCode(){let e="";return this.hadExport&&(e+='Object.defineProperty(exports, "__esModule", {value: true});'),e}getSuffixCode(){return this.enableLegacyBabel5ModuleInterop&&this.hadDefaultExport&&!this.hadNamedExport?`
module.exports = exports.default;
`:""}process(){return this.tokens.matches3(_._import,_.name,_.eq)?this.processImportEquals():this.tokens.matches1(_._import)?(this.processImport(),!0):this.tokens.matches2(_._export,_.eq)?(this.tokens.replaceToken("module.exports"),!0):this.tokens.matches1(_._export)&&!this.tokens.currentToken().isType?(this.hadExport=!0,this.processExport()):this.tokens.matches2(_.name,_.postIncDec)&&this.processPostIncDec()?!0:this.tokens.matches1(_.name)||this.tokens.matches1(_.jsxName)?this.processIdentifier():this.tokens.matches1(_.eq)?this.processAssignment():this.tokens.matches1(_.assign)?this.processComplexAssignment():this.tokens.matches1(_.preIncDec)?this.processPreIncDec():!1}processImportEquals(){const e=this.tokens.identifierNameAtIndex(this.tokens.currentIndex()+1);return this.importProcessor.shouldAutomaticallyElideImportedName(e)?bq(this.tokens):this.tokens.replaceToken("const"),!0}processImport(){if(this.tokens.matches2(_._import,_.parenL)){if(this.preserveDynamicImport){this.tokens.copyToken();return}const t=this.enableLegacyTypeScriptModuleInterop?"":`${this.helperManager.getHelperName("interopRequireWildcard")}(`;this.tokens.replaceToken(`Promise.resolve().then(() => ${t}require`);const n=this.tokens.currentToken().contextId;if(n==null)throw new Error("Expected context ID on dynamic import invocation.");for(this.tokens.copyToken();!this.tokens.matchesContextIdAndLabel(_.parenR,n);)this.rootTransformer.processToken();this.tokens.replaceToken(t?")))":"))");return}if(this.removeImportAndDetectIfShouldElide())this.tokens.removeToken();else{const t=this.tokens.stringValue();this.tokens.replaceTokenTrimmingLeftWhitespace(this.importProcessor.claimImportCode(t)),this.tokens.appendCode(this.importProcessor.claimImportCode(t))}lg(this.tokens),this.tokens.matches1(_.semi)&&this.tokens.removeToken()}removeImportAndDetectIfShouldElide(){if(this.tokens.removeInitialToken(),this.tokens.matchesContextual(z._type)&&!this.tokens.matches1AtIndex(this.tokens.currentIndex()+1,_.comma)&&!this.tokens.matchesContextualAtIndex(this.tokens.currentIndex()+1,z._from))return this.removeRemainingImport(),!0;if(this.tokens.matches1(_.name)||this.tokens.matches1(_.star))return this.removeRemainingImport(),!1;if(this.tokens.matches1(_.string))return!1;let e=!1,t=!1;for(;!this.tokens.matches1(_.string);)(!e&&this.tokens.matches1(_.braceL)||this.tokens.matches1(_.comma))&&(this.tokens.removeToken(),this.tokens.matches1(_.braceR)||(t=!0),(this.tokens.matches2(_.name,_.comma)||this.tokens.matches2(_.name,_.braceR)||this.tokens.matches4(_.name,_.name,_.name,_.comma)||this.tokens.matches4(_.name,_.name,_.name,_.braceR))&&(e=!0)),this.tokens.removeToken();return this.keepUnusedImports?!1:this.isTypeScriptTransformEnabled?!e:this.isFlowTransformEnabled?t&&!e:!1}removeRemainingImport(){for(;!this.tokens.matches1(_.string);)this.tokens.removeToken()}processIdentifier(){const e=this.tokens.currentToken();if(e.shadowsGlobal)return!1;if(e.identifierRole===Ct.ObjectShorthand)return this.processObjectShorthand();if(e.identifierRole!==Ct.Access)return!1;const t=this.importProcessor.getIdentifierReplacement(this.tokens.identifierNameForToken(e));if(!t)return!1;let n=this.tokens.currentIndex()+1;for(;n<this.tokens.tokens.length&&this.tokens.tokens[n].type===_.parenR;)n++;return this.tokens.tokens[n].type===_.parenL?this.tokens.tokenAtRelativeIndex(1).type===_.parenL&&this.tokens.tokenAtRelativeIndex(-1).type!==_._new?(this.tokens.replaceToken(`${t}.call(void 0, `),this.tokens.removeToken(),this.rootTransformer.processBalancedCode(),this.tokens.copyExpectedToken(_.parenR)):this.tokens.replaceToken(`(0, ${t})`):this.tokens.replaceToken(t),!0}processObjectShorthand(){const e=this.tokens.identifierName(),t=this.importProcessor.getIdentifierReplacement(e);return t?(this.tokens.replaceToken(`${e}: ${t}`),!0):!1}processExport(){if(this.tokens.matches2(_._export,_._enum)||this.tokens.matches3(_._export,_._const,_._enum))return this.hadNamedExport=!0,!1;if(this.tokens.matches2(_._export,_._default))return this.tokens.matches3(_._export,_._default,_._enum)?(this.hadDefaultExport=!0,!1):(this.processExportDefault(),!0);if(this.tokens.matches2(_._export,_.braceL))return this.processExportBindings(),!0;if(this.tokens.matches2(_._export,_.name)&&this.tokens.matchesContextualAtIndex(this.tokens.currentIndex()+1,z._type)){if(this.tokens.removeInitialToken(),this.tokens.removeToken(),this.tokens.matches1(_.braceL)){for(;!this.tokens.matches1(_.braceR);)this.tokens.removeToken();this.tokens.removeToken()}else this.tokens.removeToken(),this.tokens.matches1(_._as)&&(this.tokens.removeToken(),this.tokens.removeToken());return this.tokens.matchesContextual(z._from)&&this.tokens.matches1AtIndex(this.tokens.currentIndex()+1,_.string)&&(this.tokens.removeToken(),this.tokens.removeToken(),lg(this.tokens)),!0}if(this.hadNamedExport=!0,this.tokens.matches2(_._export,_._var)||this.tokens.matches2(_._export,_._let)||this.tokens.matches2(_._export,_._const))return this.processExportVar(),!0;if(this.tokens.matches2(_._export,_._function)||this.tokens.matches3(_._export,_.name,_._function))return this.processExportFunction(),!0;if(this.tokens.matches2(_._export,_._class)||this.tokens.matches3(_._export,_._abstract,_._class)||this.tokens.matches2(_._export,_.at))return this.processExportClass(),!0;if(this.tokens.matches2(_._export,_.star))return this.processExportStar(),!0;throw new Error("Unrecognized export syntax.")}processAssignment(){const e=this.tokens.currentIndex(),t=this.tokens.tokens[e-1];if(t.isType||t.type!==_.name||t.shadowsGlobal||e>=2&&this.tokens.matches1AtIndex(e-2,_.dot)||e>=2&&[_._var,_._let,_._const].includes(this.tokens.tokens[e-2].type))return!1;const n=this.importProcessor.resolveExportBinding(this.tokens.identifierNameForToken(t));return n?(this.tokens.copyToken(),this.tokens.appendCode(` ${n} =`),!0):!1}processComplexAssignment(){const e=this.tokens.currentIndex(),t=this.tokens.tokens[e-1];if(t.type!==_.name||t.shadowsGlobal||e>=2&&this.tokens.matches1AtIndex(e-2,_.dot))return!1;const n=this.importProcessor.resolveExportBinding(this.tokens.identifierNameForToken(t));return n?(this.tokens.appendCode(` = ${n}`),this.tokens.copyToken(),!0):!1}processPreIncDec(){const e=this.tokens.currentIndex(),t=this.tokens.tokens[e+1];if(t.type!==_.name||t.shadowsGlobal||e+2<this.tokens.tokens.length&&(this.tokens.matches1AtIndex(e+2,_.dot)||this.tokens.matches1AtIndex(e+2,_.bracketL)||this.tokens.matches1AtIndex(e+2,_.parenL)))return!1;const n=this.tokens.identifierNameForToken(t),r=this.importProcessor.resolveExportBinding(n);return r?(this.tokens.appendCode(`${r} = `),this.tokens.copyToken(),!0):!1}processPostIncDec(){const e=this.tokens.currentIndex(),t=this.tokens.tokens[e],n=this.tokens.tokens[e+1];if(t.type!==_.name||t.shadowsGlobal||e>=1&&this.tokens.matches1AtIndex(e-1,_.dot))return!1;const r=this.tokens.identifierNameForToken(t),s=this.importProcessor.resolveExportBinding(r);if(!s)return!1;const o=this.tokens.rawCodeForToken(n),a=this.importProcessor.getIdentifierReplacement(r)||r;if(o==="++")this.tokens.replaceToken(`(${a} = ${s} = ${a} + 1, ${a} - 1)`);else if(o==="--")this.tokens.replaceToken(`(${a} = ${s} = ${a} - 1, ${a} + 1)`);else throw new Error(`Unexpected operator: ${o}`);return this.tokens.removeToken(),!0}processExportDefault(){let e=!0;if(this.tokens.matches4(_._export,_._default,_._function,_.name)||this.tokens.matches5(_._export,_._default,_.name,_._function,_.name)&&this.tokens.matchesContextualAtIndex(this.tokens.currentIndex()+2,z._async)){this.tokens.removeInitialToken(),this.tokens.removeToken();const t=this.processNamedFunction();this.tokens.appendCode(` exports.default = ${t};`)}else if(this.tokens.matches4(_._export,_._default,_._class,_.name)||this.tokens.matches5(_._export,_._default,_._abstract,_._class,_.name)||this.tokens.matches3(_._export,_._default,_.at)){this.tokens.removeInitialToken(),this.tokens.removeToken(),this.copyDecorators(),this.tokens.matches1(_._abstract)&&this.tokens.removeToken();const t=this.rootTransformer.processNamedClass();this.tokens.appendCode(` exports.default = ${t};`)}else if(wq(this.isTypeScriptTransformEnabled,this.keepUnusedImports,this.tokens,this.declarationInfo))e=!1,this.tokens.removeInitialToken(),this.tokens.removeToken(),this.tokens.removeToken();else if(this.reactHotLoaderTransformer){const t=this.nameManager.claimFreeName("_default");this.tokens.replaceToken(`let ${t}; exports.`),this.tokens.copyToken(),this.tokens.appendCode(` = ${t} =`),this.reactHotLoaderTransformer.setExtractedDefaultExportName(t)}else this.tokens.replaceToken("exports."),this.tokens.copyToken(),this.tokens.appendCode(" =");e&&(this.hadDefaultExport=!0)}copyDecorators(){for(;this.tokens.matches1(_.at);)if(this.tokens.copyToken(),this.tokens.matches1(_.parenL))this.tokens.copyExpectedToken(_.parenL),this.rootTransformer.processBalancedCode(),this.tokens.copyExpectedToken(_.parenR);else{for(this.tokens.copyExpectedToken(_.name);this.tokens.matches1(_.dot);)this.tokens.copyExpectedToken(_.dot),this.tokens.copyExpectedToken(_.name);this.tokens.matches1(_.parenL)&&(this.tokens.copyExpectedToken(_.parenL),this.rootTransformer.processBalancedCode(),this.tokens.copyExpectedToken(_.parenR))}}processExportVar(){this.isSimpleExportVar()?this.processSimpleExportVar():this.processComplexExportVar()}isSimpleExportVar(){let e=this.tokens.currentIndex();if(e++,e++,!this.tokens.matches1AtIndex(e,_.name))return!1;for(e++;e<this.tokens.tokens.length&&this.tokens.tokens[e].isType;)e++;return!!this.tokens.matches1AtIndex(e,_.eq)}processSimpleExportVar(){this.tokens.removeInitialToken(),this.tokens.copyToken();const e=this.tokens.identifierName();for(;!this.tokens.matches1(_.eq);)this.rootTransformer.processToken();const t=this.tokens.currentToken().rhsEndIndex;if(t==null)throw new Error("Expected = token with an end index.");for(;this.tokens.currentIndex()<t;)this.rootTransformer.processToken();this.tokens.appendCode(`; exports.${e} = ${e}`)}processComplexExportVar(){this.tokens.removeInitialToken(),this.tokens.removeToken();const e=this.tokens.matches1(_.braceL);e&&this.tokens.appendCode("(");let t=0;for(;;)if(this.tokens.matches1(_.braceL)||this.tokens.matches1(_.dollarBraceL)||this.tokens.matches1(_.bracketL))t++,this.tokens.copyToken();else if(this.tokens.matches1(_.braceR)||this.tokens.matches1(_.bracketR))t--,this.tokens.copyToken();else{if(t===0&&!this.tokens.matches1(_.name)&&!this.tokens.currentToken().isType)break;if(this.tokens.matches1(_.eq)){const n=this.tokens.currentToken().rhsEndIndex;if(n==null)throw new Error("Expected = token with an end index.");for(;this.tokens.currentIndex()<n;)this.rootTransformer.processToken()}else{const n=this.tokens.currentToken();if(pK(n)){const r=this.tokens.identifierName();let s=this.importProcessor.getIdentifierReplacement(r);if(s===null)throw new Error(`Expected a replacement for ${r} in \`export var\` syntax.`);jve(n)&&(s=`${r}: ${s}`),this.tokens.replaceToken(s)}else this.rootTransformer.processToken()}}if(e){const n=this.tokens.currentToken().rhsEndIndex;if(n==null)throw new Error("Expected = token with an end index.");for(;this.tokens.currentIndex()<n;)this.rootTransformer.processToken();this.tokens.appendCode(")")}}processExportFunction(){this.tokens.replaceToken("");const e=this.processNamedFunction();this.tokens.appendCode(` exports.${e} = ${e};`)}processNamedFunction(){if(this.tokens.matches1(_._function))this.tokens.copyToken();else if(this.tokens.matches2(_.name,_._function)){if(!this.tokens.matchesContextual(z._async))throw new Error("Expected async keyword in function export.");this.tokens.copyToken(),this.tokens.copyToken()}if(this.tokens.matches1(_.star)&&this.tokens.copyToken(),!this.tokens.matches1(_.name))throw new Error("Expected identifier for exported function name.");const e=this.tokens.identifierName();if(this.tokens.copyToken(),this.tokens.currentToken().isType)for(this.tokens.removeInitialToken();this.tokens.currentToken().isType;)this.tokens.removeToken();return this.tokens.copyExpectedToken(_.parenL),this.rootTransformer.processBalancedCode(),this.tokens.copyExpectedToken(_.parenR),this.rootTransformer.processPossibleTypeRange(),this.tokens.copyExpectedToken(_.braceL),this.rootTransformer.processBalancedCode(),this.tokens.copyExpectedToken(_.braceR),e}processExportClass(){this.tokens.removeInitialToken(),this.copyDecorators(),this.tokens.matches1(_._abstract)&&this.tokens.removeToken();const e=this.rootTransformer.processNamedClass();this.tokens.appendCode(` exports.${e} = ${e};`)}processExportBindings(){this.tokens.removeInitialToken(),this.tokens.removeToken();const e=Cq(this.tokens),t=[];for(;;){if(this.tokens.matches1(_.braceR)){this.tokens.removeToken();break}const n=S0(this.tokens);for(;this.tokens.currentIndex()<n.endIndex;)this.tokens.removeToken();if(!(n.isType||!e&&this.shouldElideExportedIdentifier(n.leftName))){const s=n.rightName;s==="default"?this.hadDefaultExport=!0:this.hadNamedExport=!0;const o=n.leftName,a=this.importProcessor.getIdentifierReplacement(o);t.push(`exports.${s} = ${a||o};`)}if(this.tokens.matches1(_.braceR)){this.tokens.removeToken();break}if(this.tokens.matches2(_.comma,_.braceR)){this.tokens.removeToken(),this.tokens.removeToken();break}else if(this.tokens.matches1(_.comma))this.tokens.removeToken();else throw new Error(`Unexpected token: ${JSON.stringify(this.tokens.currentToken())}`)}if(this.tokens.matchesContextual(z._from)){this.tokens.removeToken();const n=this.tokens.stringValue();this.tokens.replaceTokenTrimmingLeftWhitespace(this.importProcessor.claimImportCode(n)),lg(this.tokens)}else this.tokens.appendCode(t.join(" "));this.tokens.matches1(_.semi)&&this.tokens.removeToken()}processExportStar(){for(this.tokens.removeInitialToken();!this.tokens.matches1(_.string);)this.tokens.removeToken();const e=this.tokens.stringValue();this.tokens.replaceTokenTrimmingLeftWhitespace(this.importProcessor.claimImportCode(e)),lg(this.tokens),this.tokens.matches1(_.semi)&&this.tokens.removeToken()}shouldElideExportedIdentifier(e){return this.isTypeScriptTransformEnabled&&!this.keepUnusedImports&&!this.declarationInfo.valueDeclarations.has(e)}}class tSe extends zl{constructor(e,t,n,r,s,o,a,l){super(),this.tokens=e,this.nameManager=t,this.helperManager=n,this.reactHotLoaderTransformer=r,this.isTypeScriptTransformEnabled=s,this.isFlowTransformEnabled=o,this.keepUnusedImports=a,this.nonTypeIdentifiers=s&&!a?RK(e,l):new Set,this.declarationInfo=s&&!a?yq(e):vq,this.injectCreateRequireForImportRequire=!!l.injectCreateRequireForImportRequire}process(){if(this.tokens.matches3(_._import,_.name,_.eq))return this.processImportEquals();if(this.tokens.matches4(_._import,_.name,_.name,_.eq)&&this.tokens.matchesContextualAtIndex(this.tokens.currentIndex()+1,z._type)){this.tokens.removeInitialToken();for(let e=0;e<7;e++)this.tokens.removeToken();return!0}if(this.tokens.matches2(_._export,_.eq))return this.tokens.replaceToken("module.exports"),!0;if(this.tokens.matches5(_._export,_._import,_.name,_.name,_.eq)&&this.tokens.matchesContextualAtIndex(this.tokens.currentIndex()+2,z._type)){this.tokens.removeInitialToken();for(let e=0;e<8;e++)this.tokens.removeToken();return!0}if(this.tokens.matches1(_._import))return this.processImport();if(this.tokens.matches2(_._export,_._default))return this.processExportDefault();if(this.tokens.matches2(_._export,_.braceL))return this.processNamedExports();if(this.tokens.matches2(_._export,_.name)&&this.tokens.matchesContextualAtIndex(this.tokens.currentIndex()+1,z._type)){if(this.tokens.removeInitialToken(),this.tokens.removeToken(),this.tokens.matches1(_.braceL)){for(;!this.tokens.matches1(_.braceR);)this.tokens.removeToken();this.tokens.removeToken()}else this.tokens.removeToken(),this.tokens.matches1(_._as)&&(this.tokens.removeToken(),this.tokens.removeToken());return this.tokens.matchesContextual(z._from)&&this.tokens.matches1AtIndex(this.tokens.currentIndex()+1,_.string)&&(this.tokens.removeToken(),this.tokens.removeToken(),lg(this.tokens)),!0}return!1}processImportEquals(){const e=this.tokens.identifierNameAtIndex(this.tokens.currentIndex()+1);return this.shouldAutomaticallyElideImportedName(e)?bq(this.tokens):this.injectCreateRequireForImportRequire?(this.tokens.replaceToken("const"),this.tokens.copyToken(),this.tokens.copyToken(),this.tokens.replaceToken(this.helperManager.getHelperName("require"))):this.tokens.replaceToken("const"),!0}processImport(){if(this.tokens.matches2(_._import,_.parenL))return!1;const e=this.tokens.snapshot();if(this.removeImportTypeBindings()){for(this.tokens.restoreToSnapshot(e);!this.tokens.matches1(_.string);)this.tokens.removeToken();this.tokens.removeToken(),lg(this.tokens),this.tokens.matches1(_.semi)&&this.tokens.removeToken()}return!0}removeImportTypeBindings(){if(this.tokens.copyExpectedToken(_._import),this.tokens.matchesContextual(z._type)&&!this.tokens.matches1AtIndex(this.tokens.currentIndex()+1,_.comma)&&!this.tokens.matchesContextualAtIndex(this.tokens.currentIndex()+1,z._from))return!0;if(this.tokens.matches1(_.string))return this.tokens.copyToken(),!1;this.tokens.matchesContextual(z._module)&&this.tokens.matchesContextualAtIndex(this.tokens.currentIndex()+2,z._from)&&this.tokens.copyToken();let e=!1,t=!1,n=!1;if(this.tokens.matches1(_.name)&&(this.shouldAutomaticallyElideImportedName(this.tokens.identifierName())?(this.tokens.removeToken(),this.tokens.matches1(_.comma)&&this.tokens.removeToken()):(e=!0,this.tokens.copyToken(),this.tokens.matches1(_.comma)&&(n=!0,this.tokens.removeToken()))),this.tokens.matches1(_.star))this.shouldAutomaticallyElideImportedName(this.tokens.identifierNameAtRelativeIndex(2))?(this.tokens.removeToken(),this.tokens.removeToken(),this.tokens.removeToken()):(n&&this.tokens.appendCode(","),e=!0,this.tokens.copyExpectedToken(_.star),this.tokens.copyExpectedToken(_.name),this.tokens.copyExpectedToken(_.name));else if(this.tokens.matches1(_.braceL)){for(n&&this.tokens.appendCode(","),this.tokens.copyToken();!this.tokens.matches1(_.braceR);){t=!0;const r=S0(this.tokens);if(r.isType||this.shouldAutomaticallyElideImportedName(r.rightName)){for(;this.tokens.currentIndex()<r.endIndex;)this.tokens.removeToken();this.tokens.matches1(_.comma)&&this.tokens.removeToken()}else{for(e=!0;this.tokens.currentIndex()<r.endIndex;)this.tokens.copyToken();this.tokens.matches1(_.comma)&&this.tokens.copyToken()}}this.tokens.copyExpectedToken(_.braceR)}return this.keepUnusedImports?!1:this.isTypeScriptTransformEnabled?!e:this.isFlowTransformEnabled?t&&!e:!1}shouldAutomaticallyElideImportedName(e){return this.isTypeScriptTransformEnabled&&!this.keepUnusedImports&&!this.nonTypeIdentifiers.has(e)}processExportDefault(){if(wq(this.isTypeScriptTransformEnabled,this.keepUnusedImports,this.tokens,this.declarationInfo))return this.tokens.removeInitialToken(),this.tokens.removeToken(),this.tokens.removeToken(),!0;if(!(this.tokens.matches4(_._export,_._default,_._function,_.name)||this.tokens.matches5(_._export,_._default,_.name,_._function,_.name)&&this.tokens.matchesContextualAtIndex(this.tokens.currentIndex()+2,z._async)||this.tokens.matches4(_._export,_._default,_._class,_.name)||this.tokens.matches5(_._export,_._default,_._abstract,_._class,_.name))&&this.reactHotLoaderTransformer){const t=this.nameManager.claimFreeName("_default");return this.tokens.replaceToken(`let ${t}; export`),this.tokens.copyToken(),this.tokens.appendCode(` ${t} =`),this.reactHotLoaderTransformer.setExtractedDefaultExportName(t),!0}return!1}processNamedExports(){if(!this.isTypeScriptTransformEnabled)return!1;this.tokens.copyExpectedToken(_._export),this.tokens.copyExpectedToken(_.braceL);const e=Cq(this.tokens);let t=!1;for(;!this.tokens.matches1(_.braceR);){const n=S0(this.tokens);if(n.isType||!e&&this.shouldElideExportedName(n.leftName)){for(;this.tokens.currentIndex()<n.endIndex;)this.tokens.removeToken();this.tokens.matches1(_.comma)&&this.tokens.removeToken()}else{for(t=!0;this.tokens.currentIndex()<n.endIndex;)this.tokens.copyToken();this.tokens.matches1(_.comma)&&this.tokens.copyToken()}}return this.tokens.copyExpectedToken(_.braceR),!this.keepUnusedImports&&e&&!t&&(this.tokens.removeToken(),this.tokens.removeToken(),lg(this.tokens)),!0}shouldElideExportedName(e){return this.isTypeScriptTransformEnabled&&!this.keepUnusedImports&&this.declarationInfo.typeDeclarations.has(e)&&!this.declarationInfo.valueDeclarations.has(e)}}class nSe extends zl{constructor(e,t,n){super(),this.rootTransformer=e,this.tokens=t,this.isImportsTransformEnabled=n}process(){return this.rootTransformer.processPossibleArrowParamEnd()||this.rootTransformer.processPossibleAsyncArrowWithTypeParams()||this.rootTransformer.processPossibleTypeRange()?!0:this.tokens.matches1(_._enum)?(this.processEnum(),!0):this.tokens.matches2(_._export,_._enum)?(this.processNamedExportEnum(),!0):this.tokens.matches3(_._export,_._default,_._enum)?(this.processDefaultExportEnum(),!0):!1}processNamedExportEnum(){if(this.isImportsTransformEnabled){this.tokens.removeInitialToken();const e=this.tokens.identifierNameAtRelativeIndex(1);this.processEnum(),this.tokens.appendCode(` exports.${e} = ${e};`)}else this.tokens.copyToken(),this.processEnum()}processDefaultExportEnum(){this.tokens.removeInitialToken(),this.tokens.removeToken();const e=this.tokens.identifierNameAtRelativeIndex(1);this.processEnum(),this.isImportsTransformEnabled?this.tokens.appendCode(` exports.default = ${e};`):this.tokens.appendCode(` export default ${e};`)}processEnum(){this.tokens.replaceToken("const"),this.tokens.copyExpectedToken(_.name);let e=!1;this.tokens.matchesContextual(z._of)&&(this.tokens.removeToken(),e=this.tokens.matchesContextual(z._symbol),this.tokens.removeToken());const t=this.tokens.matches3(_.braceL,_.name,_.eq);this.tokens.appendCode(' = require("flow-enums-runtime")');const n=!e&&!t;for(this.tokens.replaceTokenTrimmingLeftWhitespace(n?".Mirrored([":"({");!this.tokens.matches1(_.braceR);){if(this.tokens.matches1(_.ellipsis)){this.tokens.removeToken();break}this.processEnumElement(e,t),this.tokens.matches1(_.comma)&&this.tokens.copyToken()}this.tokens.replaceToken(n?"]);":"});")}processEnumElement(e,t){if(e){const n=this.tokens.identifierName();this.tokens.copyToken(),this.tokens.appendCode(`: Symbol("${n}")`)}else t?(this.tokens.copyToken(),this.tokens.replaceTokenTrimmingLeftWhitespace(":"),this.tokens.copyToken()):this.tokens.replaceToken(`"${this.tokens.identifierName()}"`)}}function iSe(i){let e,t=i[0],n=1;for(;n<i.length;){const r=i[n],s=i[n+1];if(n+=2,(r==="optionalAccess"||r==="optionalCall")&&t==null)return;r==="access"||r==="optionalAccess"?(e=t,t=s(t)):(r==="call"||r==="optionalCall")&&(t=s((...o)=>t.call(e,...o)),e=void 0)}return t}const Iw="jest",rSe=["mock","unmock","enableAutomock","disableAutomock"];class _3 extends zl{__init(){this.hoistedFunctionNames=[]}constructor(e,t,n,r){super(),this.rootTransformer=e,this.tokens=t,this.nameManager=n,this.importProcessor=r,_3.prototype.__init.call(this)}process(){return this.tokens.currentToken().scopeDepth===0&&this.tokens.matches4(_.name,_.dot,_.name,_.parenL)&&this.tokens.identifierName()===Iw?iSe([this,"access",e=>e.importProcessor,"optionalAccess",e=>e.getGlobalNames,"call",e=>e(),"optionalAccess",e=>e.has,"call",e=>e(Iw)])?!1:this.extractHoistedCalls():!1}getHoistedCode(){return this.hoistedFunctionNames.length>0?this.hoistedFunctionNames.map(e=>`${e}();`).join(""):""}extractHoistedCalls(){this.tokens.removeToken();let e=!1;for(;this.tokens.matches3(_.dot,_.name,_.parenL);){const t=this.tokens.identifierNameAtIndex(this.tokens.currentIndex()+1);if(rSe.includes(t)){const r=this.nameManager.claimFreeName("__jestHoist");this.hoistedFunctionNames.push(r),this.tokens.replaceToken(`function ${r}(){${Iw}.`),this.tokens.copyToken(),this.tokens.copyToken(),this.rootTransformer.processBalancedCode(),this.tokens.copyExpectedToken(_.parenR),this.tokens.appendCode(";}"),e=!1}else e?this.tokens.copyToken():this.tokens.replaceToken(`${Iw}.`),this.tokens.copyToken(),this.tokens.copyToken(),this.rootTransformer.processBalancedCode(),this.tokens.copyExpectedToken(_.parenR),e=!0}return!0}}class sSe extends zl{constructor(e){super(),this.tokens=e}process(){if(this.tokens.matches1(_.num)){const e=this.tokens.currentTokenCode();if(e.includes("_"))return this.tokens.replaceToken(e.replace(/_/g,"")),!0}return!1}}class oSe extends zl{constructor(e,t){super(),this.tokens=e,this.nameManager=t}process(){return this.tokens.matches2(_._catch,_.braceL)?(this.tokens.copyToken(),this.tokens.appendCode(` (${this.nameManager.claimFreeName("e")})`),!0):!1}}class aSe extends zl{constructor(e,t){super(),this.tokens=e,this.nameManager=t}process(){if(this.tokens.matches1(_.nullishCoalescing)){const n=this.tokens.currentToken();return this.tokens.tokens[n.nullishStartIndex].isAsyncOperation?this.tokens.replaceTokenTrimmingLeftWhitespace(", async () => ("):this.tokens.replaceTokenTrimmingLeftWhitespace(", () => ("),!0}if(this.tokens.matches1(_._delete)&&this.tokens.tokenAtRelativeIndex(1).isOptionalChainStart)return this.tokens.removeInitialToken(),!0;const t=this.tokens.currentToken().subscriptStartIndex;if(t!=null&&this.tokens.tokens[t].isOptionalChainStart&&this.tokens.tokenAtRelativeIndex(-1).type!==_._super){const n=this.nameManager.claimFreeName("_");let r;if(t>0&&this.tokens.matches1AtIndex(t-1,_._delete)&&this.isLastSubscriptInChain()?r=`${n} => delete ${n}`:r=`${n} => ${n}`,this.tokens.tokens[t].isAsyncOperation&&(r=`async ${r}`),this.tokens.matches2(_.questionDot,_.parenL)||this.tokens.matches2(_.questionDot,_.lessThan))this.justSkippedSuper()&&this.tokens.appendCode(".bind(this)"),this.tokens.replaceTokenTrimmingLeftWhitespace(`, 'optionalCall', ${r}`);else if(this.tokens.matches2(_.questionDot,_.bracketL))this.tokens.replaceTokenTrimmingLeftWhitespace(`, 'optionalAccess', ${r}`);else if(this.tokens.matches1(_.questionDot))this.tokens.replaceTokenTrimmingLeftWhitespace(`, 'optionalAccess', ${r}.`);else if(this.tokens.matches1(_.dot))this.tokens.replaceTokenTrimmingLeftWhitespace(`, 'access', ${r}.`);else if(this.tokens.matches1(_.bracketL))this.tokens.replaceTokenTrimmingLeftWhitespace(`, 'access', ${r}[`);else if(this.tokens.matches1(_.parenL))this.justSkippedSuper()&&this.tokens.appendCode(".bind(this)"),this.tokens.replaceTokenTrimmingLeftWhitespace(`, 'call', ${r}(`);else throw new Error("Unexpected subscript operator in optional chain.");return!0}return!1}isLastSubscriptInChain(){let e=0;for(let t=this.tokens.currentIndex()+1;;t++){if(t>=this.tokens.tokens.length)throw new Error("Reached the end of the code while finding the end of the access chain.");if(this.tokens.tokens[t].isOptionalChainStart?e++:this.tokens.tokens[t].isOptionalChainEnd&&e--,e<0)return!0;if(e===0&&this.tokens.tokens[t].subscriptStartIndex!=null)return!1}}justSkippedSuper(){let e=0,t=this.tokens.currentIndex()-1;for(;;){if(t<0)throw new Error("Reached the start of the code while finding the start of the access chain.");if(this.tokens.tokens[t].isOptionalChainStart?e--:this.tokens.tokens[t].isOptionalChainEnd&&e++,e<0)return!1;if(e===0&&this.tokens.tokens[t].subscriptStartIndex!=null)return this.tokens.tokens[t-1].type===_._super;t--}}}class lSe extends zl{constructor(e,t,n,r){super(),this.rootTransformer=e,this.tokens=t,this.importProcessor=n,this.options=r}process(){const e=this.tokens.currentIndex();if(this.tokens.identifierName()==="createReactClass"){const t=this.importProcessor&&this.importProcessor.getIdentifierReplacement("createReactClass");return t?this.tokens.replaceToken(`(0, ${t})`):this.tokens.copyToken(),this.tryProcessCreateClassCall(e),!0}if(this.tokens.matches3(_.name,_.dot,_.name)&&this.tokens.identifierName()==="React"&&this.tokens.identifierNameAtIndex(this.tokens.currentIndex()+2)==="createClass"){const t=this.importProcessor&&this.importProcessor.getIdentifierReplacement("React")||"React";return t?(this.tokens.replaceToken(t),this.tokens.copyToken(),this.tokens.copyToken()):(this.tokens.copyToken(),this.tokens.copyToken(),this.tokens.copyToken()),this.tryProcessCreateClassCall(e),!0}return!1}tryProcessCreateClassCall(e){const t=this.findDisplayName(e);t&&this.classNeedsDisplayName()&&(this.tokens.copyExpectedToken(_.parenL),this.tokens.copyExpectedToken(_.braceL),this.tokens.appendCode(`displayName: '${t}',`),this.rootTransformer.processBalancedCode(),this.tokens.copyExpectedToken(_.braceR),this.tokens.copyExpectedToken(_.parenR))}findDisplayName(e){return e<2?null:this.tokens.matches2AtIndex(e-2,_.name,_.eq)?this.tokens.identifierNameAtIndex(e-2):e>=2&&this.tokens.tokens[e-2].identifierRole===Ct.ObjectKey?this.tokens.identifierNameAtIndex(e-2):this.tokens.matches2AtIndex(e-2,_._export,_._default)?this.getDisplayNameFromFilename():null}getDisplayNameFromFilename(){const t=(this.options.filePath||"unknown").split("/"),n=t[t.length-1],r=n.lastIndexOf("."),s=r===-1?n:n.slice(0,r);return s==="index"&&t[t.length-2]?t[t.length-2]:s}classNeedsDisplayName(){let e=this.tokens.currentIndex();if(!this.tokens.matches2(_.parenL,_.braceL))return!1;const t=e+1,n=this.tokens.tokens[t].contextId;if(n==null)throw new Error("Expected non-null context ID on object open-brace.");for(;e<this.tokens.tokens.length;e++){const r=this.tokens.tokens[e];if(r.type===_.braceR&&r.contextId===n){e++;break}if(this.tokens.identifierNameAtIndex(e)==="displayName"&&this.tokens.tokens[e].identifierRole===Ct.ObjectKey&&r.contextId===n)return!1}if(e===this.tokens.tokens.length)throw new Error("Unexpected end of input when processing React class.");return this.tokens.matches1AtIndex(e,_.parenR)||this.tokens.matches2AtIndex(e,_.comma,_.parenR)}}class b3 extends zl{__init(){this.extractedDefaultExportName=null}constructor(e,t){super(),this.tokens=e,this.filePath=t,b3.prototype.__init.call(this)}setExtractedDefaultExportName(e){this.extractedDefaultExportName=e}getPrefixCode(){return`
      (function () {
        var enterModule = require('react-hot-loader').enterModule;
        enterModule && enterModule(module);
      })();`.replace(/\s+/g," ").trim()}getSuffixCode(){const e=new Set;for(const n of this.tokens.tokens)!n.isType&&mK(n)&&n.identifierRole!==Ct.ImportDeclaration&&e.add(this.tokens.identifierNameForToken(n));const t=Array.from(e).map(n=>({variableName:n,uniqueLocalName:n}));return this.extractedDefaultExportName&&t.push({variableName:this.extractedDefaultExportName,uniqueLocalName:"default"}),`
;(function () {
  var reactHotLoader = require('react-hot-loader').default;
  var leaveModule = require('react-hot-loader').leaveModule;
  if (!reactHotLoader) {
    return;
  }
${t.map(({variableName:n,uniqueLocalName:r})=>`  reactHotLoader.register(${n}, "${r}", ${JSON.stringify(this.filePath||"")});`).join(`
`)}
  leaveModule(module);
})();`}process(){return!1}}const cSe=new Set(["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield","enum","implements","interface","let","package","private","protected","public","static","await","false","null","true"]);function n8(i){if(i.length===0||!kC[i.charCodeAt(0)])return!1;for(let e=1;e<i.length;e++)if(!Pl[i.charCodeAt(e)])return!1;return!cSe.has(i)}class dSe extends zl{constructor(e,t,n){super(),this.rootTransformer=e,this.tokens=t,this.isImportsTransformEnabled=n}process(){return this.rootTransformer.processPossibleArrowParamEnd()||this.rootTransformer.processPossibleAsyncArrowWithTypeParams()||this.rootTransformer.processPossibleTypeRange()?!0:this.tokens.matches1(_._public)||this.tokens.matches1(_._protected)||this.tokens.matches1(_._private)||this.tokens.matches1(_._abstract)||this.tokens.matches1(_._readonly)||this.tokens.matches1(_._override)||this.tokens.matches1(_.nonNullAssertion)?(this.tokens.removeInitialToken(),!0):this.tokens.matches1(_._enum)||this.tokens.matches2(_._const,_._enum)?(this.processEnum(),!0):this.tokens.matches2(_._export,_._enum)||this.tokens.matches3(_._export,_._const,_._enum)?(this.processEnum(!0),!0):!1}processEnum(e=!1){for(this.tokens.removeInitialToken();this.tokens.matches1(_._const)||this.tokens.matches1(_._enum);)this.tokens.removeToken();const t=this.tokens.identifierName();this.tokens.removeToken(),e&&!this.isImportsTransformEnabled&&this.tokens.appendCode("export "),this.tokens.appendCode(`var ${t}; (function (${t})`),this.tokens.copyExpectedToken(_.braceL),this.processEnumBody(t),this.tokens.copyExpectedToken(_.braceR),e&&this.isImportsTransformEnabled?this.tokens.appendCode(`)(${t} || (exports.${t} = ${t} = {}));`):this.tokens.appendCode(`)(${t} || (${t} = {}));`)}processEnumBody(e){let t=null;for(;!this.tokens.matches1(_.braceR);){const{nameStringCode:n,variableName:r}=this.extractEnumKeyInfo(this.tokens.currentToken());this.tokens.removeInitialToken(),this.tokens.matches3(_.eq,_.string,_.comma)||this.tokens.matches3(_.eq,_.string,_.braceR)?this.processStringLiteralEnumMember(e,n,r):this.tokens.matches1(_.eq)?this.processExplicitValueEnumMember(e,n,r):this.processImplicitValueEnumMember(e,n,r,t),this.tokens.matches1(_.comma)&&this.tokens.removeToken(),r!=null?t=r:t=`${e}[${n}]`}}extractEnumKeyInfo(e){if(e.type===_.name){const t=this.tokens.identifierNameForToken(e);return{nameStringCode:`"${t}"`,variableName:n8(t)?t:null}}else if(e.type===_.string){const t=this.tokens.stringValueForToken(e);return{nameStringCode:this.tokens.code.slice(e.start,e.end),variableName:n8(t)?t:null}}else throw new Error("Expected name or string at beginning of enum element.")}processStringLiteralEnumMember(e,t,n){n!=null?(this.tokens.appendCode(`const ${n}`),this.tokens.copyToken(),this.tokens.copyToken(),this.tokens.appendCode(`; ${e}[${t}] = ${n};`)):(this.tokens.appendCode(`${e}[${t}]`),this.tokens.copyToken(),this.tokens.copyToken(),this.tokens.appendCode(";"))}processExplicitValueEnumMember(e,t,n){const r=this.tokens.currentToken().rhsEndIndex;if(r==null)throw new Error("Expected rhsEndIndex on enum assign.");if(n!=null){for(this.tokens.appendCode(`const ${n}`),this.tokens.copyToken();this.tokens.currentIndex()<r;)this.rootTransformer.processToken();this.tokens.appendCode(`; ${e}[${e}[${t}] = ${n}] = ${t};`)}else{for(this.tokens.appendCode(`${e}[${e}[${t}]`),this.tokens.copyToken();this.tokens.currentIndex()<r;)this.rootTransformer.processToken();this.tokens.appendCode(`] = ${t};`)}}processImplicitValueEnumMember(e,t,n,r){let s=r!=null?`${r} + 1`:"0";n!=null&&(this.tokens.appendCode(`const ${n} = ${s}; `),s=n),this.tokens.appendCode(`${e}[${e}[${t}] = ${s}] = ${t};`)}}class fT{__init(){this.transformers=[]}__init2(){this.generatedVariables=[]}constructor(e,t,n,r){fT.prototype.__init.call(this),fT.prototype.__init2.call(this),this.nameManager=e.nameManager,this.helperManager=e.helperManager;const{tokenProcessor:s,importProcessor:o}=e;this.tokens=s,this.isImportsTransformEnabled=t.includes("imports"),this.isReactHotLoaderTransformEnabled=t.includes("react-hot-loader"),this.disableESTransforms=!!r.disableESTransforms,r.disableESTransforms||(this.transformers.push(new aSe(s,this.nameManager)),this.transformers.push(new sSe(s)),this.transformers.push(new oSe(s,this.nameManager))),t.includes("jsx")&&(r.jsxRuntime!=="preserve"&&this.transformers.push(new Gf(this,s,o,this.nameManager,r)),this.transformers.push(new lSe(this,s,o,r)));let a=null;if(t.includes("react-hot-loader")){if(!r.filePath)throw new Error("filePath is required when using the react-hot-loader transform.");a=new b3(s,r.filePath),this.transformers.push(a)}if(t.includes("imports")){if(o===null)throw new Error("Expected non-null importProcessor with imports transform enabled.");this.transformers.push(new Ev(this,s,o,this.nameManager,this.helperManager,a,n,!!r.enableLegacyTypeScriptModuleInterop,t.includes("typescript"),t.includes("flow"),!!r.preserveDynamicImport,!!r.keepUnusedImports))}else this.transformers.push(new tSe(s,this.nameManager,this.helperManager,a,t.includes("typescript"),t.includes("flow"),!!r.keepUnusedImports,r));t.includes("flow")&&this.transformers.push(new nSe(this,s,t.includes("imports"))),t.includes("typescript")&&this.transformers.push(new dSe(this,s,t.includes("imports"))),t.includes("jest")&&this.transformers.push(new _3(this,s,this.nameManager,o))}transform(){this.tokens.reset(),this.processBalancedCode();let t=this.isImportsTransformEnabled?'"use strict";':"";for(const o of this.transformers)t+=o.getPrefixCode();t+=this.helperManager.emitHelpers(),t+=this.generatedVariables.map(o=>` var ${o};`).join("");for(const o of this.transformers)t+=o.getHoistedCode();let n="";for(const o of this.transformers)n+=o.getSuffixCode();const r=this.tokens.finish();let{code:s}=r;if(s.startsWith("#!")){let o=s.indexOf(`
`);return o===-1&&(o=s.length,s+=`
`),{code:s.slice(0,o+1)+t+s.slice(o+1)+n,mappings:this.shiftMappings(r.mappings,t.length)}}else return{code:t+s+n,mappings:this.shiftMappings(r.mappings,t.length)}}processBalancedCode(){let e=0,t=0;for(;!this.tokens.isAtEnd();){if(this.tokens.matches1(_.braceL)||this.tokens.matches1(_.dollarBraceL))e++;else if(this.tokens.matches1(_.braceR)){if(e===0)return;e--}if(this.tokens.matches1(_.parenL))t++;else if(this.tokens.matches1(_.parenR)){if(t===0)return;t--}this.processToken()}}processToken(){if(this.tokens.matches1(_._class)){this.processClass();return}for(const e of this.transformers)if(e.process())return;this.tokens.copyToken()}processNamedClass(){if(!this.tokens.matches2(_._class,_.name))throw new Error("Expected identifier for exported class name.");const e=this.tokens.identifierNameAtIndex(this.tokens.currentIndex()+1);return this.processClass(),e}processClass(){const e=Qwe(this,this.tokens,this.nameManager,this.disableESTransforms),t=(e.headerInfo.isExpression||!e.headerInfo.className)&&e.staticInitializerNames.length+e.instanceInitializerNames.length>0;let n=e.headerInfo.className;t&&(n=this.nameManager.claimFreeName("_class"),this.generatedVariables.push(n),this.tokens.appendCode(` (${n} =`));const s=this.tokens.currentToken().contextId;if(s==null)throw new Error("Expected class to have a context ID.");for(this.tokens.copyExpectedToken(_._class);!this.tokens.matchesContextIdAndLabel(_.braceL,s);)this.processToken();this.processClassBody(e,n);const o=e.staticInitializerNames.map(a=>`${n}.${a}()`);t?this.tokens.appendCode(`, ${o.map(a=>`${a}, `).join("")}${n})`):e.staticInitializerNames.length>0&&this.tokens.appendCode(` ${o.map(a=>`${a};`).join(" ")}`)}processClassBody(e,t){const{headerInfo:n,constructorInsertPos:r,constructorInitializerStatements:s,fields:o,instanceInitializerNames:a,rangesToRemove:l}=e;let c=0,d=0;const u=this.tokens.currentToken().contextId;if(u==null)throw new Error("Expected non-null context ID on class.");this.tokens.copyExpectedToken(_.braceL),this.isReactHotLoaderTransformEnabled&&this.tokens.appendCode("__reactstandin__regenerateByEval(key, code) {this[key] = eval(code);}");const h=s.length+a.length>0;if(r===null&&h){const f=this.makeConstructorInitCode(s,a,t);if(n.hasSuperclass){const g=this.nameManager.claimFreeName("args");this.tokens.appendCode(`constructor(...${g}) { super(...${g}); ${f}; }`)}else this.tokens.appendCode(`constructor() { ${f}; }`)}for(;!this.tokens.matchesContextIdAndLabel(_.braceR,u);)if(c<o.length&&this.tokens.currentIndex()===o[c].start){let f=!1;for(this.tokens.matches1(_.bracketL)?this.tokens.copyTokenWithPrefix(`${o[c].initializerName}() {this`):this.tokens.matches1(_.string)||this.tokens.matches1(_.num)?(this.tokens.copyTokenWithPrefix(`${o[c].initializerName}() {this[`),f=!0):this.tokens.copyTokenWithPrefix(`${o[c].initializerName}() {this.`);this.tokens.currentIndex()<o[c].end;)f&&this.tokens.currentIndex()===o[c].equalsIndex&&this.tokens.appendCode("]"),this.processToken();this.tokens.appendCode("}"),c++}else if(d<l.length&&this.tokens.currentIndex()>=l[d].start){for(this.tokens.currentIndex()<l[d].end&&this.tokens.removeInitialToken();this.tokens.currentIndex()<l[d].end;)this.tokens.removeToken();d++}else this.tokens.currentIndex()===r?(this.tokens.copyToken(),h&&this.tokens.appendCode(`;${this.makeConstructorInitCode(s,a,t)};`),this.processToken()):this.processToken();this.tokens.copyExpectedToken(_.braceR)}makeConstructorInitCode(e,t,n){return[...e,...t.map(r=>`${n}.prototype.${r}.call(this)`)].join(";")}processPossibleArrowParamEnd(){if(this.tokens.matches2(_.parenR,_.colon)&&this.tokens.tokenAtRelativeIndex(1).isType){let e=this.tokens.currentIndex()+1;for(;this.tokens.tokens[e].isType;)e++;if(this.tokens.matches1AtIndex(e,_.arrow)){for(this.tokens.removeInitialToken();this.tokens.currentIndex()<e;)this.tokens.removeToken();return this.tokens.replaceTokenTrimmingLeftWhitespace(") =>"),!0}}return!1}processPossibleAsyncArrowWithTypeParams(){if(!this.tokens.matchesContextual(z._async)&&!this.tokens.matches1(_._async))return!1;const e=this.tokens.tokenAtRelativeIndex(1);if(e.type!==_.lessThan||!e.isType)return!1;let t=this.tokens.currentIndex()+1;for(;this.tokens.tokens[t].isType;)t++;if(this.tokens.matches1AtIndex(t,_.parenL)){for(this.tokens.replaceToken("async ("),this.tokens.removeInitialToken();this.tokens.currentIndex()<t;)this.tokens.removeToken();return this.tokens.removeToken(),this.processBalancedCode(),this.processToken(),!0}return!1}processPossibleTypeRange(){if(this.tokens.currentToken().isType){for(this.tokens.removeInitialToken();this.tokens.currentToken().isType;)this.tokens.removeToken();return!0}return!1}shiftMappings(e,t){for(let n=0;n<e.length;n++){const r=e[n];r!==void 0&&(e[n]=r+t)}return e}}var uSe={};(function(i){i.__esModule=!0,i.LinesAndColumns=void 0;var e=`
`,t="\r",n=function(){function r(s){this.string=s;for(var o=[0],a=0;a<s.length;)switch(s[a]){case e:a+=e.length,o.push(a);break;case t:a+=t.length,s[a]===e&&(a+=e.length),o.push(a);break;default:a++;break}this.offsets=o}return r.prototype.locationForIndex=function(s){if(s<0||s>this.string.length)return null;for(var o=0,a=this.offsets;a[o+1]<=s;)o++;var l=s-a[o];return{line:o,column:l}},r.prototype.indexForLocation=function(s){var o=s.line,a=s.column;return o<0||o>=this.offsets.length||a<0||a>this.lengthOfLine(o)?null:this.offsets[o]+a},r.prototype.lengthOfLine=function(s){var o=this.offsets[s],a=s===this.offsets.length-1?this.string.length:this.offsets[s+1];return a-o},r}();i.LinesAndColumns=n,i.default=n})(uSe);function hSe(i){const e=new Set;for(let t=0;t<i.tokens.length;t++)i.matches1AtIndex(t,_._import)&&!i.matches3AtIndex(t,_._import,_.name,_.eq)&&fSe(i,t,e);return e}function fSe(i,e,t){e++,!i.matches1AtIndex(e,_.parenL)&&(i.matches1AtIndex(e,_.name)&&(t.add(i.identifierNameAtIndex(e)),e++,i.matches1AtIndex(e,_.comma)&&e++),i.matches1AtIndex(e,_.star)&&(e+=2,t.add(i.identifierNameAtIndex(e)),e++),i.matches1AtIndex(e,_.braceL)&&(e++,gSe(i,e,t)))}function gSe(i,e,t){for(;;){if(i.matches1AtIndex(e,_.braceR))return;const n=S0(i,e);if(e=n.endIndex,n.isType||t.add(n.rightName),i.matches2AtIndex(e,_.comma,_.braceR))return;if(i.matches1AtIndex(e,_.braceR))return;if(i.matches1AtIndex(e,_.comma))e++;else throw new Error(`Unexpected token: ${JSON.stringify(i.tokens[e])}`)}}function pSe(i,e){E0e(e);try{const t=mSe(i,e),r=new fT(t,e.transforms,!!e.enableLegacyBabel5ModuleInterop,e).transform();let s={code:r.code};if(e.sourceMapOptions){if(!e.filePath)throw new Error("filePath must be specified when generating a source map.");s={...s,sourceMap:_0e(r,e.filePath,e.sourceMapOptions,i,t.tokenProcessor.tokens)}}return s}catch(t){throw e.filePath&&(t.message=`Error transforming ${e.filePath}: ${t.message}`),t}}function mSe(i,e){const t=e.transforms.includes("jsx"),n=e.transforms.includes("typescript"),r=e.transforms.includes("flow"),s=e.disableESTransforms===!0,o=Xwe(i,t,n,r),a=o.tokens,l=o.scopes,c=new q4(i,a),d=new sT(c),u=new Rv(i,a,r,s,d),h=!!e.enableLegacyTypeScriptModuleInterop;let f=null;return e.transforms.includes("imports")?(f=new Zf(c,u,h,e,e.transforms.includes("typescript"),!!e.keepUnusedImports,d),f.preprocessTokens(),U7(u,l,f.getGlobalNames()),e.transforms.includes("typescript")&&!e.keepUnusedImports&&f.pruneTypeOnlyImports()):e.transforms.includes("typescript")&&!e.keepUnusedImports&&U7(u,l,hSe(u)),{tokenProcessor:u,scopes:l,nameManager:c,importProcessor:f,helperManager:d}}function jo(i,e=0){return i[i.length-(1+e)]}function _Se(i){if(i.length===0)throw new Error("Invalid tail call");return[i.slice(0,i.length-1),i[i.length-1]]}function fi(i,e,t=(n,r)=>n===r){if(i===e)return!0;if(!i||!e||i.length!==e.length)return!1;for(let n=0,r=i.length;n<r;n++)if(!t(i[n],e[n]))return!1;return!0}function bSe(i,e){const t=i.length-1;e<t&&(i[e]=i[t]),i.pop()}function D0(i,e,t){return vSe(i.length,n=>t(i[n],e))}function vSe(i,e){let t=0,n=i-1;for(;t<=n;){const r=(t+n)/2|0,s=e(r);if(s<0)t=r+1;else if(s>0)n=r-1;else return r}return-(t+1)}function C2(i,e,t){if(i=i|0,i>=e.length)throw new TypeError("invalid index");const n=e[Math.floor(e.length*Math.random())],r=[],s=[],o=[];for(const a of e){const l=t(a,n);l<0?r.push(a):l>0?s.push(a):o.push(a)}return i<r.length?C2(i,r,t):i<r.length+o.length?o[0]:C2(i-(r.length+o.length),s,t)}function i8(i,e){const t=[];let n;for(const r of i.slice(0).sort(e))!n||e(n[0],r)!==0?(n=[r],t.push(n)):n.push(r);return t}function*Sq(i,e){let t,n;for(const r of i)n!==void 0&&e(n,r)?t.push(r):(t&&(yield t),t=[r]),n=r;t&&(yield t)}function xq(i,e){for(let t=0;t<=i.length;t++)e(t===0?void 0:i[t-1],t===i.length?void 0:i[t])}function ySe(i,e){for(let t=0;t<i.length;t++)e(t===0?void 0:i[t-1],i[t],t+1===i.length?void 0:i[t+1])}function zc(i){return i.filter(e=>!!e)}function r8(i){let e=0;for(let t=0;t<i.length;t++)i[t]&&(i[e]=i[t],e+=1);i.length=e}function Tq(i){return!Array.isArray(i)||i.length===0}function zr(i){return Array.isArray(i)&&i.length>0}function Mh(i,e=t=>t){const t=new Set;return i.filter(n=>{const r=e(n);return t.has(r)?!1:(t.add(r),!0)})}function kq(i,e){return i.length>0?i[0]:e}function cs(i,e){let t=typeof e=="number"?i:0;typeof e=="number"?t=i:(t=0,e=i);const n=[];if(t<=e)for(let r=t;r<e;r++)n.push(r);else for(let r=t;r>e;r--)n.push(r);return n}function oD(i,e,t){const n=i.slice(0,e),r=i.slice(e);return n.concat(t,r)}function NR(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.unshift(e))}function Rw(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.push(e))}function w2(i,e){for(const t of e)i.push(t)}function v3(i){return Array.isArray(i)?i:[i]}function CSe(i,e,t){const n=Lq(i,e),r=i.length,s=t.length;i.length=r+s;for(let o=r-1;o>=n;o--)i[o+s]=i[o];for(let o=0;o<s;o++)i[o+n]=t[o]}function s8(i,e,t,n){const r=Lq(i,e);let s=i.splice(r,t);return s===void 0&&(s=[]),CSe(i,r,n),s}function Lq(i,e){return e<0?Math.max(e+i.length,0):Math.min(e,i.length)}var I0;(function(i){function e(s){return s<0}i.isLessThan=e;function t(s){return s<=0}i.isLessThanOrEqual=t;function n(s){return s>0}i.isGreaterThan=n;function r(s){return s===0}i.isNeitherLessOrGreaterThan=r,i.greaterThan=1,i.lessThan=-1,i.neitherLessOrGreaterThan=0})(I0||(I0={}));function na(i,e){return(t,n)=>e(i(t),i(n))}function wSe(...i){return(e,t)=>{for(const n of i){const r=n(e,t);if(!I0.isNeitherLessOrGreaterThan(r))return r}return I0.neitherLessOrGreaterThan}}const Qd=(i,e)=>i-e,SSe=(i,e)=>Qd(i?1:0,e?1:0);function Dq(i){return(e,t)=>-i(e,t)}class uu{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}class Mc{constructor(e){this.iterate=e}toArray(){const e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new Mc(t=>this.iterate(n=>e(n)?t(n):!0))}map(e){return new Mc(t=>this.iterate(n=>t(e(n))))}findLast(e){let t;return this.iterate(n=>(e(n)&&(t=n),!0)),t}findLastMaxBy(e){let t,n=!0;return this.iterate(r=>((n||I0.isGreaterThan(e(r,t)))&&(n=!1,t=r),!0)),t}}Mc.empty=new Mc(i=>{});function bs(i){return typeof i=="string"}function gs(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)&&!(i instanceof RegExp)&&!(i instanceof Date)}function xSe(i){const e=Object.getPrototypeOf(Uint8Array);return typeof i=="object"&&i instanceof e}function Oh(i){return typeof i=="number"&&!isNaN(i)}function o8(i){return!!i&&typeof i[Symbol.iterator]=="function"}function Iq(i){return i===!0||i===!1}function Zs(i){return typeof i>"u"}function R0(i){return!yo(i)}function yo(i){return Zs(i)||i===null}function dn(i,e){if(!i)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function cg(i){if(yo(i))throw new Error("Assertion Failed: argument is undefined or null");return i}function E0(i){return typeof i=="function"}function TSe(i,e){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)kSe(i[n],e[n])}function kSe(i,e){if(bs(e)){if(typeof i!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(E0(e)){try{if(i instanceof e)return}catch{}if(!yo(i)&&i.constructor===e||e.length===1&&e.call(void 0,i)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function Rd(i){if(!i||typeof i!="object"||i instanceof RegExp)return i;const e=Array.isArray(i)?[]:{};return Object.entries(i).forEach(([t,n])=>{e[t]=n&&typeof n=="object"?Rd(n):n}),e}function LSe(i){if(!i||typeof i!="object")return i;const e=[i];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const n in t)if(Rq.call(t,n)){const r=t[n];typeof r=="object"&&!Object.isFrozen(r)&&!xSe(r)&&e.push(r)}}return i}const Rq=Object.prototype.hasOwnProperty;function Eq(i,e){return S2(i,e,new Set)}function S2(i,e,t){if(yo(i))return i;const n=e(i);if(typeof n<"u")return n;if(Array.isArray(i)){const r=[];for(const s of i)r.push(S2(s,e,t));return r}if(gs(i)){if(t.has(i))throw new Error("Cannot clone recursive data-structure");t.add(i);const r={};for(const s in i)Rq.call(i,s)&&(r[s]=S2(i[s],e,t));return t.delete(i),r}return i}function aD(i,e,t=!0){return gs(i)?(gs(e)&&Object.keys(e).forEach(n=>{n in i?t&&(gs(i[n])&&gs(e[n])?aD(i[n],e[n],t):i[n]=e[n]):i[n]=e[n]}),i):e}function Ro(i,e){if(i===e)return!0;if(i==null||e===null||e===void 0||typeof i!=typeof e||typeof i!="object"||Array.isArray(i)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(i)){if(i.length!==e.length)return!1;for(t=0;t<i.length;t++)if(!Ro(i[t],e[t]))return!1}else{const r=[];for(n in i)r.push(n);r.sort();const s=[];for(n in e)s.push(n);if(s.sort(),!Ro(r,s))return!1;for(t=0;t<r.length;t++)if(!Ro(i[r[t]],e[r[t]]))return!1}return!0}function DSe(i){let e=[];for(;Object.prototype!==i;)e=e.concat(Object.getOwnPropertyNames(i)),i=Object.getPrototypeOf(i);return e}function y3(i){const e=[];for(const t of DSe(i))typeof i[t]=="function"&&e.push(t);return e}function ISe(i,e){const t=r=>function(){const s=Array.prototype.slice.call(arguments,0);return e(r,s)},n={};for(const r of i)n[r]=t(r);return n}globalThis&&globalThis.__awaiter;let RSe=typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function ESe(i,e){let t;return e.length===0?t=i:t=i.replace(/\{(\d+)\}/g,(n,r)=>{const s=r[0],o=e[s];let a=n;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),RSe&&(t="［"+t.replace(/[aouei]/g,"$&$&")+"］"),t}function p(i,e,...t){return ESe(e,t)}var AR;const Nm="en";let gT=!1,pT=!1,lx=!1,Nq=!1,C3=!1,w3=!1,Aq=!1,Ew,cx=Nm,a8=Nm,NSe,rl;const Aa=typeof self=="object"?self:typeof global=="object"?global:{};let ds;typeof Aa.vscode<"u"&&typeof Aa.vscode.process<"u"?ds=Aa.vscode.process:typeof process<"u"&&(ds=process);const ASe=typeof((AR=ds==null?void 0:ds.versions)===null||AR===void 0?void 0:AR.electron)=="string",PSe=ASe&&(ds==null?void 0:ds.type)==="renderer";if(typeof navigator=="object"&&!PSe)rl=navigator.userAgent,gT=rl.indexOf("Windows")>=0,pT=rl.indexOf("Macintosh")>=0,w3=(rl.indexOf("Macintosh")>=0||rl.indexOf("iPad")>=0||rl.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,lx=rl.indexOf("Linux")>=0,Aq=(rl==null?void 0:rl.indexOf("Mobi"))>=0,C3=!0,p({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"),Ew=Nm,cx=Ew,a8=navigator.language;else if(typeof ds=="object"){gT=ds.platform==="win32",pT=ds.platform==="darwin",lx=ds.platform==="linux",lx&&ds.env.SNAP&&ds.env.SNAP_REVISION,ds.env.CI||ds.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Ew=Nm,cx=Nm;const i=ds.env.VSCODE_NLS_CONFIG;if(i)try{const e=JSON.parse(i),t=e.availableLanguages["*"];Ew=e.locale,a8=e.osLocale,cx=t||Nm,NSe=e._translationsConfigFile}catch{}Nq=!0}else console.error("Unable to resolve platform.");const Ar=gT,Ot=pT,os=lx,kl=Nq,gf=C3,MSe=C3&&typeof Aa.importScripts=="function",Ol=w3,OSe=Aq,$c=rl,FSe=cx,BSe=typeof Aa.postMessage=="function"&&!Aa.importScripts,Pq=(()=>{if(BSe){const i=[];Aa.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,r=i.length;n<r;n++){const s=i[n];if(s.id===t.data.vscodeScheduleAsyncWork){i.splice(n,1),s.callback();return}}});let e=0;return t=>{const n=++e;i.push({id:n,callback:t}),Aa.postMessage({vscodeScheduleAsyncWork:n},"*")}}return i=>setTimeout(i)})(),To=pT||w3?2:gT?1:3;let l8=!0,c8=!1;function Mq(){if(!c8){c8=!0;const i=new Uint8Array(2);i[0]=1,i[1]=2,l8=new Uint16Array(i.buffer)[0]===512+1}return l8}const Oq=!!($c&&$c.indexOf("Chrome")>=0),WSe=!!($c&&$c.indexOf("Firefox")>=0),VSe=!!(!Oq&&$c&&$c.indexOf("Safari")>=0),HSe=!!($c&&$c.indexOf("Edg/")>=0);$c&&$c.indexOf("Android")>=0;const Vr={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var St;(function(i){function e(v){return v&&typeof v=="object"&&typeof v[Symbol.iterator]=="function"}i.is=e;const t=Object.freeze([]);function n(){return t}i.empty=n;function*r(v){yield v}i.single=r;function s(v){return e(v)?v:r(v)}i.wrap=s;function o(v){return v||t}i.from=o;function*a(v){for(let C=v.length-1;C>=0;C--)yield v[C]}i.reverse=a;function l(v){return!v||v[Symbol.iterator]().next().done===!0}i.isEmpty=l;function c(v){return v[Symbol.iterator]().next().value}i.first=c;function d(v,C){for(const w of v)if(C(w))return!0;return!1}i.some=d;function u(v,C){for(const w of v)if(C(w))return w}i.find=u;function*h(v,C){for(const w of v)C(w)&&(yield w)}i.filter=h;function*f(v,C){let w=0;for(const S of v)yield C(S,w++)}i.map=f;function*g(...v){for(const C of v)for(const w of C)yield w}i.concat=g;function m(v,C,w){let S=w;for(const L of v)S=C(S,L);return S}i.reduce=m;function*y(v,C,w=v.length){for(C<0&&(C+=v.length),w<0?w+=v.length:w>v.length&&(w=v.length);C<w;C++)yield v[C]}i.slice=y;function b(v,C=Number.POSITIVE_INFINITY){const w=[];if(C===0)return[w,v];const S=v[Symbol.iterator]();for(let L=0;L<C;L++){const T=S.next();if(T.done)return[w,i.empty()];w.push(T.value)}return[w,{[Symbol.iterator](){return S}}]}i.consume=b})(St||(St={}));let Ei=class x2{constructor(e){this.element=e,this.next=x2.Undefined,this.prev=x2.Undefined}};Ei.Undefined=new Ei(void 0);class ps{constructor(){this._first=Ei.Undefined,this._last=Ei.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Ei.Undefined}clear(){let e=this._first;for(;e!==Ei.Undefined;){const t=e.next;e.prev=Ei.Undefined,e.next=Ei.Undefined,e=t}this._first=Ei.Undefined,this._last=Ei.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new Ei(e);if(this._first===Ei.Undefined)this._first=n,this._last=n;else if(t){const s=this._last;this._last=n,n.prev=s,s.next=n}else{const s=this._first;this._first=n,n.next=s,s.prev=n}this._size+=1;let r=!1;return()=>{r||(r=!0,this._remove(n))}}shift(){if(this._first!==Ei.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Ei.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Ei.Undefined&&e.next!==Ei.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Ei.Undefined&&e.next===Ei.Undefined?(this._first=Ei.Undefined,this._last=Ei.Undefined):e.next===Ei.Undefined?(this._last=this._last.prev,this._last.next=Ei.Undefined):e.prev===Ei.Undefined&&(this._first=this._first.next,this._first.prev=Ei.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Ei.Undefined;)yield e.element,e=e.next}}const Fq="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function USe(i=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of Fq)i.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const S3=USe();function Bq(i){let e=S3;if(i&&i instanceof RegExp)if(i.global)e=i;else{let t="g";i.ignoreCase&&(t+="i"),i.multiline&&(t+="m"),i.unicode&&(t+="u"),e=new RegExp(i.source,t)}return e.lastIndex=0,e}const Wq=new ps;Wq.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function N0(i,e,t,n,r){if(r||(r=St.first(Wq)),t.length>r.maxLen){let c=i-r.maxLen/2;return c<0?c=0:n+=c,t=t.substring(c,i+r.maxLen/2),N0(i,e,t,n,r)}const s=Date.now(),o=i-1-n;let a=-1,l=null;for(let c=1;!(Date.now()-s>=r.timeBudget);c++){const d=o-r.windowSize*c;e.lastIndex=Math.max(0,d);const u=jSe(e,t,o,a);if(!u&&l||(l=u,d<=0))break;a=d}if(l){const c={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function jSe(i,e,t,n){let r;for(;r=i.exec(e);){const s=r.index||0;if(s<=t&&i.lastIndex>=t)return r;if(n>0&&s>n)return null}return null}const Ou=8;class Vq{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class Hq{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class Kn{constructor(e,t,n,r){this.id=e,this.name=t,this.defaultValue=n,this.schema=r}applyUpdate(e,t){return lD(e,t)}compute(e,t,n){return n}}class Nv{constructor(e,t){this.newValue=e,this.didChange=t}}function lD(i,e){if(typeof i!="object"||typeof e!="object"||!i||!e)return new Nv(e,i!==e);if(Array.isArray(i)||Array.isArray(e)){const n=Array.isArray(i)&&Array.isArray(e)&&fi(i,e);return new Nv(e,!n)}let t=!1;for(const n in e)if(e.hasOwnProperty(n)){const r=lD(i[n],e[n]);r.didChange&&(i[n]=r.newValue,t=!0)}return new Nv(i,t)}class NC{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return lD(e,t)}validate(e){return this.defaultValue}}class z1{constructor(e,t,n,r){this.id=e,this.name=t,this.defaultValue=n,this.schema=r}applyUpdate(e,t){return lD(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}}function $e(i,e){return typeof i>"u"?e:i==="false"?!1:!!i}class Vt extends z1{constructor(e,t,n,r=void 0){typeof r<"u"&&(r.type="boolean",r.default=n),super(e,t,n,r)}validate(e){return $e(e,this.defaultValue)}}function Bf(i,e,t,n){if(typeof i>"u")return e;let r=parseInt(i,10);return isNaN(r)?e:(r=Math.max(t,r),r=Math.min(n,r),r|0)}class gn extends z1{static clampedInt(e,t,n,r){return Bf(e,t,n,r)}constructor(e,t,n,r,s,o=void 0){typeof o<"u"&&(o.type="integer",o.default=n,o.minimum=r,o.maximum=s),super(e,t,n,o),this.minimum=r,this.maximum=s}validate(e){return gn.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}function zSe(i,e,t,n){if(typeof i>"u")return e;const r=ka.float(i,e);return ka.clamp(r,t,n)}class ka extends z1{static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const n=parseFloat(e);return isNaN(n)?t:n}constructor(e,t,n,r,s){typeof s<"u"&&(s.type="number",s.default=n),super(e,t,n,s),this.validationFn=r}validate(e){return this.validationFn(ka.float(e,this.defaultValue))}}class Ks extends z1{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,r=void 0){typeof r<"u"&&(r.type="string",r.default=n),super(e,t,n,r)}validate(e){return Ks.string(e,this.defaultValue)}}function _i(i,e,t,n){return typeof i!="string"?e:n&&i in n?n[i]:t.indexOf(i)===-1?e:i}class ti extends z1{constructor(e,t,n,r,s=void 0){typeof s<"u"&&(s.type="string",s.enum=r,s.default=n),super(e,t,n,s),this._allowedValues=r}validate(e){return _i(e,this.defaultValue,this._allowedValues)}}class Nw extends Kn{constructor(e,t,n,r,s,o,a=void 0){typeof a<"u"&&(a.type="string",a.enum=s,a.default=r),super(e,t,n,a),this._allowedValues=s,this._convert=o}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function $Se(i){switch(i){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class KSe extends Kn{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[p("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached"),p("accessibilitySupport.on","Optimize for usage with a Screen Reader"),p("accessibilitySupport.off","Assume a screen reader is not attached")],default:"auto",tags:["accessibility"],description:p("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}}class qSe extends Kn{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:p("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:p("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:$e(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:$e(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function GSe(i){switch(i){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var fr;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(fr||(fr={}));function ZSe(i){switch(i){case"line":return fr.Line;case"block":return fr.Block;case"underline":return fr.Underline;case"line-thin":return fr.LineThin;case"block-outline":return fr.BlockOutline;case"underline-thin":return fr.UnderlineThin}}class XSe extends NC{constructor(){super(140)}compute(e,t,n){const r=["monaco-editor"];return t.get(39)&&r.push(t.get(39)),e.extraEditorClassName&&r.push(e.extraEditorClassName),t.get(73)==="default"?r.push("mouse-default"):t.get(73)==="copy"&&r.push("mouse-copy"),t.get(110)&&r.push("showUnused"),t.get(138)&&r.push("showDeprecated"),r.join(" ")}}class YSe extends Vt{constructor(){super(37,"emptySelectionClipboard",!0,{description:p("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}}class QSe extends Kn{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:p("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[p("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),p("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),p("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:p("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[p("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),p("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),p("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:p("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:p("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Ot},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:p("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:p("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:$e(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":_i(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":_i(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:$e(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:$e(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:$e(t.loop,this.defaultValue.loop)}}}class Co extends Kn{constructor(){super(51,"fontLigatures",Co.OFF,{anyOf:[{type:"boolean",description:p("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:p("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:p("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?Co.OFF:e==="true"?Co.ON:e:e?Co.ON:Co.OFF}}Co.OFF='"liga" off, "calt" off';Co.ON='"liga" on, "calt" on';class vl extends Kn{constructor(){super(54,"fontVariations",vl.OFF,{anyOf:[{type:"boolean",description:p("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:p("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:p("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?vl.OFF:e==="true"?vl.TRANSLATE:e:e?vl.TRANSLATE:vl.OFF}compute(e,t,n){return e.fontInfo.fontVariationSettings}}vl.OFF="normal";vl.TRANSLATE="translate";class JSe extends NC{constructor(){super(50)}compute(e,t,n){return e.fontInfo}}class exe extends z1{constructor(){super(52,"fontSize",Qs.fontSize,{type:"number",minimum:6,maximum:100,default:Qs.fontSize,description:p("fontSize","Controls the font size in pixels.")})}validate(e){const t=ka.float(e,this.defaultValue);return t===0?Qs.fontSize:ka.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}}class hc extends Kn{constructor(){super(53,"fontWeight",Qs.fontWeight,{anyOf:[{type:"number",minimum:hc.MINIMUM_VALUE,maximum:hc.MAXIMUM_VALUE,errorMessage:p("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:hc.SUGGESTION_VALUES}],default:Qs.fontWeight,description:p("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(gn.clampedInt(e,Qs.fontWeight,hc.MINIMUM_VALUE,hc.MAXIMUM_VALUE))}}hc.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];hc.MINIMUM_VALUE=1;hc.MAXIMUM_VALUE=1e3;class txe extends Kn{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[p("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),p("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),p("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:p("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:p("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:p("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:p("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:p("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:p("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:p("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:p("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:p("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:p("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:p("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,n,r,s,o;if(!e||typeof e!="object")return this.defaultValue;const a=e;return{multiple:_i(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:_i(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(n=a.multipleTypeDefinitions)!==null&&n!==void 0?n:_i(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(r=a.multipleDeclarations)!==null&&r!==void 0?r:_i(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(s=a.multipleImplementations)!==null&&s!==void 0?s:_i(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(o=a.multipleReferences)!==null&&o!==void 0?o:_i(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:Ks.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:Ks.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:Ks.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:Ks.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:Ks.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}class nxe extends Kn{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:p("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:p("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:p("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:p("hover.hidingDelay","Controls the delay in milliseconds after thich the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:p("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),delay:gn.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:$e(t.sticky,this.defaultValue.sticky),hidingDelay:gn.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:$e(t.above,this.defaultValue.above)}}}class l_ extends NC{constructor(){super(143)}compute(e,t,n){return l_.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=Math.floor(e.paddingTop/e.lineHeight);let r=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(r=Math.max(r,t-1));const s=(n+e.viewLineCount+r)/(e.pixelRatio*e.height),o=Math.floor(e.viewLineCount/s);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:n,extraLinesBeyondLastLine:r,desiredRatio:s,minimapLineCount:o}}static _computeMinimapLayout(e,t){const n=e.outerWidth,r=e.outerHeight,s=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(s*r),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:r};const o=t.stableMinimapLayoutInput,a=o&&e.outerHeight===o.outerHeight&&e.lineHeight===o.lineHeight&&e.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&e.pixelRatio===o.pixelRatio&&e.scrollBeyondLastLine===o.scrollBeyondLastLine&&e.paddingTop===o.paddingTop&&e.paddingBottom===o.paddingBottom&&e.minimap.enabled===o.minimap.enabled&&e.minimap.side===o.minimap.side&&e.minimap.size===o.minimap.size&&e.minimap.showSlider===o.minimap.showSlider&&e.minimap.renderCharacters===o.minimap.renderCharacters&&e.minimap.maxColumn===o.minimap.maxColumn&&e.minimap.scale===o.minimap.scale&&e.verticalScrollbarWidth===o.verticalScrollbarWidth&&e.isViewportWrapping===o.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,d=e.scrollBeyondLastLine,u=e.minimap.renderCharacters;let h=s>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const f=e.minimap.maxColumn,g=e.minimap.size,m=e.minimap.side,y=e.verticalScrollbarWidth,b=e.viewLineCount,v=e.remainingWidth,C=e.isViewportWrapping,w=u?2:3;let S=Math.floor(s*r);const L=S/s;let T=!1,I=!1,R=w*h,B=h/s,V=1;if(g==="fill"||g==="fit"){const{typicalViewportLineCount:Ee,extraLinesBeforeFirstLine:Le,extraLinesBeyondLastLine:qe,desiredRatio:Ue,minimapLineCount:Oe}=l_.computeContainedMinimapLineCount({viewLineCount:b,scrollBeyondLastLine:d,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:r,lineHeight:l,pixelRatio:s});if(b/Oe>1)T=!0,I=!0,h=1,R=1,B=h/s;else{let un=!1,he=h+1;if(g==="fit"){const _e=Math.ceil((Le+b+qe)*R);C&&a&&v<=t.stableFitRemainingWidth?(un=!0,he=t.stableFitMaxMinimapScale):un=_e>S}if(g==="fill"||un){T=!0;const _e=h;R=Math.min(l*s,Math.max(1,Math.floor(1/Ue))),C&&a&&v<=t.stableFitRemainingWidth&&(he=t.stableFitMaxMinimapScale),h=Math.min(he,Math.max(1,Math.floor(R/w))),h>_e&&(V=Math.min(2,h/_e)),B=h/s/V,S=Math.ceil(Math.max(Ee,Le+b+qe)*R),C?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=v,t.stableFitMaxMinimapScale=h):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const F=Math.floor(f*B),W=Math.min(F,Math.max(0,Math.floor((v-y-2)*B/(c+B)))+Ou);let X=Math.floor(s*W);const oe=X/s;X=Math.floor(X*V);const we=u?1:2,ke=m==="left"?0:n-W-y;return{renderMinimap:we,minimapLeft:ke,minimapWidth:W,minimapHeightIsEditorHeight:T,minimapIsSampling:I,minimapScale:h,minimapLineHeight:R,minimapCanvasInnerWidth:X,minimapCanvasInnerHeight:S,minimapCanvasOuterWidth:oe,minimapCanvasOuterHeight:L}}static computeLayout(e,t){const n=t.outerWidth|0,r=t.outerHeight|0,s=t.lineHeight|0,o=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,d=t.viewLineCount,u=e.get(135),h=u==="inherit"?e.get(134):u,f=h==="inherit"?e.get(130):h,g=e.get(133),m=t.isDominatedByLongLines,y=e.get(57),b=e.get(67).renderType!==0,v=e.get(68),C=e.get(104),w=e.get(83),S=e.get(72),L=e.get(102),T=L.verticalScrollbarSize,I=L.verticalHasArrows,R=L.arrowSize,B=L.horizontalScrollbarSize,V=e.get(43),F=e.get(109)!=="never";let W=e.get(65);V&&F&&(W+=16);let X=0;if(b){const Pe=Math.max(o,v);X=Math.round(Pe*l)}let oe=0;y&&(oe=s*t.glyphMarginDecorationLaneCount);let we=0,ke=we+oe,Ee=ke+X,Le=Ee+W;const qe=n-oe-X-W;let Ue=!1,Oe=!1,be=-1;h==="inherit"&&m?(Ue=!0,Oe=!0):f==="on"||f==="bounded"?Oe=!0:f==="wordWrapColumn"&&(be=g);const un=l_._computeMinimapLayout({outerWidth:n,outerHeight:r,lineHeight:s,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:C,paddingTop:w.top,paddingBottom:w.bottom,minimap:S,verticalScrollbarWidth:T,viewLineCount:d,remainingWidth:qe,isViewportWrapping:Oe},t.memory||new Hq);un.renderMinimap!==0&&un.minimapLeft===0&&(we+=un.minimapWidth,ke+=un.minimapWidth,Ee+=un.minimapWidth,Le+=un.minimapWidth);const he=qe-un.minimapWidth,_e=Math.max(1,Math.floor((he-T-2)/a)),pe=I?R:0;return Oe&&(be=Math.max(1,_e),f==="bounded"&&(be=Math.min(be,g))),{width:n,height:r,glyphMarginLeft:we,glyphMarginWidth:oe,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:ke,lineNumbersWidth:X,decorationsLeft:Ee,decorationsWidth:W,contentLeft:Le,contentWidth:he,minimap:un,viewportColumn:_e,isWordWrapMinified:Ue,isViewportWrapping:Oe,wrappingColumn:be,verticalScrollbarWidth:T,horizontalScrollbarHeight:B,overviewRuler:{top:pe,width:T,height:r-2*pe,right:0}}}}class ixe extends Kn{constructor(){super(137,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[p("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),p("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:p("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return _i(e,"simple",["simple","advanced"])}compute(e,t,n){return t.get(2)===2?"advanced":n}}class rxe extends Kn{constructor(){const e={enabled:!0};super(64,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:p("codeActions","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:$e(e.enabled,this.defaultValue.enabled)}}}class sxe extends Kn{constructor(){const e={enabled:!1,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(114,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:p("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor.")},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:10,description:p("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:p("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:p("editor.stickyScroll.scrollWithEditor","Enable scrolling of the sticky scroll widget with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),maxLineCount:gn.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,10),defaultModel:_i(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:$e(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}class oxe extends Kn{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(139,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:p("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[p("editor.inlayHints.on","Inlay hints are enabled"),p("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",Ot?"Ctrl+Option":"Ctrl+Alt"),p("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",Ot?"Ctrl+Option":"Ctrl+Alt"),p("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:p("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:p("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:p("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:_i(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:gn.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:Ks.string(t.fontFamily,this.defaultValue.fontFamily),padding:$e(t.padding,this.defaultValue.padding)}}}class axe extends Kn{constructor(){super(65,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):gn.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,n){return n<0?gn.clampedInt(-n*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):n}}class lxe extends ka{constructor(){super(66,"lineHeight",Qs.lineHeight,e=>ka.clamp(e,0,150),{markdownDescription:p("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}}class cxe extends Kn{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1};super(72,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:p("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:p("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[p("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),p("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),p("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:p("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:p("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:p("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:p("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:p("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:p("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),autohide:$e(t.autohide,this.defaultValue.autohide),size:_i(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:_i(t.side,this.defaultValue.side,["right","left"]),showSlider:_i(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:$e(t.renderCharacters,this.defaultValue.renderCharacters),scale:gn.clampedInt(t.scale,1,1,3),maxColumn:gn.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}function dxe(i){return i==="ctrlCmd"?Ot?"metaKey":"ctrlKey":"altKey"}class uxe extends Kn{constructor(){super(83,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:p("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:p("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:gn.clampedInt(t.top,0,0,1e3),bottom:gn.clampedInt(t.bottom,0,0,1e3)}}}class hxe extends Kn{constructor(){const e={enabled:!0,cycle:!0};super(85,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:p("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:p("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),cycle:$e(t.cycle,this.defaultValue.cycle)}}}class fxe extends NC{constructor(){super(141)}compute(e,t,n){return e.pixelRatio}}class gxe extends Kn{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[p("on","Quick suggestions show inside the suggest widget"),p("inline","Quick suggestions show as ghost text"),p("off","Quick suggestions are disabled")]}];super(88,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:p("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:p("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:p("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:p("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the '{0}'-setting which controls if suggestions are triggered by special characters.","#editor.suggestOnTriggerCharacters#")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:n,strings:r}=e,s=["on","inline","off"];let o,a,l;return typeof t=="boolean"?o=t?"on":"off":o=_i(t,this.defaultValue.other,s),typeof n=="boolean"?a=n?"on":"off":a=_i(n,this.defaultValue.comments,s),typeof r=="boolean"?l=r?"on":"off":l=_i(r,this.defaultValue.strings,s),{other:o,comments:a,strings:l}}}class pxe extends Kn{constructor(){super(67,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[p("lineNumbers.off","Line numbers are not rendered."),p("lineNumbers.on","Line numbers are rendered as absolute number."),p("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),p("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:p("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}}function mT(i){const e=i.get(97);return e==="editable"?i.get(90):e!=="on"}class mxe extends Kn{constructor(){const e=[],t={type:"number",description:p("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(101,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:p("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:p("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const n of e)if(typeof n=="number")t.push({column:gn.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){const r=n;t.push({column:gn.clampedInt(r.column,0,0,1e4),color:r.color})}return t.sort((n,r)=>n.column-r.column),t}return this.defaultValue}}class _xe extends Kn{constructor(){super(91,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}}function d8(i,e){if(typeof i!="string")return e;switch(i){case"hidden":return 2;case"visible":return 3;default:return 1}}let bxe=class extends Kn{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(102,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[p("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),p("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),p("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:p("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[p("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),p("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),p("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:p("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:p("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:p("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:p("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,n=gn.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),r=gn.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:gn.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:d8(t.vertical,this.defaultValue.vertical),horizontal:d8(t.horizontal,this.defaultValue.horizontal),useShadows:$e(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:$e(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:$e(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:$e(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:$e(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:gn.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:r,verticalSliderSize:gn.clampedInt(t.verticalSliderSize,r,0,1e3),scrollByPage:$e(t.scrollByPage,this.defaultValue.scrollByPage)}}};const po="inUntrustedWorkspace",As={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class vxe extends Kn{constructor(){const e={nonBasicASCII:po,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:po,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(124,"unicodeHighlight",e,{[As.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,po],default:e.nonBasicASCII,description:p("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[As.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:p("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[As.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:p("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[As.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,po],default:e.includeComments,description:p("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[As.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,po],default:e.includeStrings,description:p("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[As.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:p("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[As.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:p("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&e&&(Ro(e.allowedCharacters,t.allowedCharacters)||(e=Object.assign(Object.assign({},e),{allowedCharacters:t.allowedCharacters}),n=!0)),t.allowedLocales&&e&&(Ro(e.allowedLocales,t.allowedLocales)||(e=Object.assign(Object.assign({},e),{allowedLocales:t.allowedLocales}),n=!0));const r=super.applyUpdate(e,t);return n?new Nv(r.newValue,!0):r}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:c_(t.nonBasicASCII,po,[!0,!1,po]),invisibleCharacters:$e(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:$e(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:c_(t.includeComments,po,[!0,!1,po]),includeStrings:c_(t.includeStrings,po,[!0,!1,po]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const n={};for(const[r,s]of Object.entries(e))s===!0&&(n[r]=!0);return n}}class yxe extends Kn{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1};super(62,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:p("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover"],enumDescriptions:[p("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),p("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion.")],description:p("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:p("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),mode:_i(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:_i(t.showToolbar,this.defaultValue.showToolbar,["always","onHover"]),suppressSuggestions:$e(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:$e(t.keepOnBlur,this.defaultValue.keepOnBlur)}}}class Cxe extends Kn{constructor(){const e={enabled:Vr.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Vr.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:p("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:p("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:$e(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class wxe extends Kn{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[p("editor.guides.bracketPairs.true","Enables bracket pair guides."),p("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),p("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:p("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[p("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),p("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),p("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:p("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:p("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:p("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[p("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),p("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),p("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:p("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:c_(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:c_(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:$e(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:$e(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:c_(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function c_(i,e,t){const n=t.indexOf(i);return n===-1?e:t[n]}class Sxe extends Kn{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(117,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[p("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),p("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:p("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:p("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:p("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:p("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[p("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),p("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),p("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),p("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:p("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions (`#editor.quickSuggestions#` and `#editor.suggestOnTriggerCharacters#`) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:p("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:p("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:p("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:p("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:p("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:p("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:p("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:_i(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:$e(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:$e(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:$e(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:$e(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:_i(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:$e(t.showIcons,this.defaultValue.showIcons),showStatusBar:$e(t.showStatusBar,this.defaultValue.showStatusBar),preview:$e(t.preview,this.defaultValue.preview),previewMode:_i(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:$e(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:$e(t.showMethods,this.defaultValue.showMethods),showFunctions:$e(t.showFunctions,this.defaultValue.showFunctions),showConstructors:$e(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:$e(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:$e(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:$e(t.showFields,this.defaultValue.showFields),showVariables:$e(t.showVariables,this.defaultValue.showVariables),showClasses:$e(t.showClasses,this.defaultValue.showClasses),showStructs:$e(t.showStructs,this.defaultValue.showStructs),showInterfaces:$e(t.showInterfaces,this.defaultValue.showInterfaces),showModules:$e(t.showModules,this.defaultValue.showModules),showProperties:$e(t.showProperties,this.defaultValue.showProperties),showEvents:$e(t.showEvents,this.defaultValue.showEvents),showOperators:$e(t.showOperators,this.defaultValue.showOperators),showUnits:$e(t.showUnits,this.defaultValue.showUnits),showValues:$e(t.showValues,this.defaultValue.showValues),showConstants:$e(t.showConstants,this.defaultValue.showConstants),showEnums:$e(t.showEnums,this.defaultValue.showEnums),showEnumMembers:$e(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:$e(t.showKeywords,this.defaultValue.showKeywords),showWords:$e(t.showWords,this.defaultValue.showWords),showColors:$e(t.showColors,this.defaultValue.showColors),showFiles:$e(t.showFiles,this.defaultValue.showFiles),showReferences:$e(t.showReferences,this.defaultValue.showReferences),showFolders:$e(t.showFolders,this.defaultValue.showFolders),showTypeParameters:$e(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:$e(t.showSnippets,this.defaultValue.showSnippets),showUsers:$e(t.showUsers,this.defaultValue.showUsers),showIssues:$e(t.showIssues,this.defaultValue.showIssues)}}}class xxe extends Kn{constructor(){super(112,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:p("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:p("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:$e(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:$e(e.selectSubwords,this.defaultValue.selectSubwords)}}}class Txe extends Kn{constructor(){super(136,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[p("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),p("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),p("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),p("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:p("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,n){return t.get(2)===2?0:n}}class kxe extends NC{constructor(){super(144)}compute(e,t,n){const r=t.get(143);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:r.isWordWrapMinified,isViewportWrapping:r.isViewportWrapping,wrappingColumn:r.wrappingColumn}}}class Lxe extends Kn{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:p("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down `shift` (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:p("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[p("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),p("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),showDropSelector:_i(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}class Dxe extends Kn{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(84,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:p("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:p("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[p("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),p("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),showPasteSelector:_i(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}const Ixe="Consolas, 'Courier New', monospace",Rxe="Menlo, Monaco, 'Courier New', monospace",Exe="'Droid Sans Mono', 'monospace', monospace",Qs={fontFamily:Ot?Rxe:os?Exe:Ixe,fontWeight:"normal",fontSize:Ot?12:14,lineHeight:0,letterSpacing:0},Am=[];function de(i){return Am[i.id]=i,i}const Kl={acceptSuggestionOnCommitCharacter:de(new Vt(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:p("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:de(new ti(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",p("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:p("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:de(new KSe),accessibilityPageSize:de(new gn(3,"accessibilityPageSize",10,1,1073741824,{description:p("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:de(new Ks(4,"ariaLabel",p("editorViewAccessibleLabel","Editor content"))),ariaRequired:de(new Vt(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:de(new Vt(8,"screenReaderAnnounceInlineSuggestion",!0,{description:p("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:de(new ti(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),p("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:p("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:de(new ti(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),p("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:p("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:de(new ti(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",p("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:p("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:de(new ti(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",p("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:p("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:de(new ti(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),p("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:p("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:de(new Nw(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],$Se,{enumDescriptions:[p("editor.autoIndent.none","The editor will not insert indentation automatically."),p("editor.autoIndent.keep","The editor will keep the current line's indentation."),p("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),p("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),p("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:p("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:de(new Vt(13,"automaticLayout",!1)),autoSurround:de(new ti(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[p("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),p("editor.autoSurround.quotes","Surround with quotes but not brackets."),p("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:p("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:de(new Cxe),bracketPairGuides:de(new wxe),stickyTabStops:de(new Vt(115,"stickyTabStops",!1,{description:p("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:de(new Vt(17,"codeLens",!0,{description:p("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:de(new Ks(18,"codeLensFontFamily","",{description:p("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:de(new gn(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:p("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:de(new Vt(20,"colorDecorators",!0,{description:p("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:de(new ti(146,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[p("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),p("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),p("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:p("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:de(new gn(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:p("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:de(new Vt(22,"columnSelection",!1,{description:p("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:de(new qSe),contextmenu:de(new Vt(24,"contextmenu",!0)),copyWithSyntaxHighlighting:de(new Vt(25,"copyWithSyntaxHighlighting",!0,{description:p("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:de(new Nw(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],GSe,{description:p("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:de(new ti(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[p("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),p("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),p("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:p("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:de(new Nw(28,"cursorStyle",fr.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],ZSe,{description:p("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:de(new gn(29,"cursorSurroundingLines",0,0,1073741824,{description:p("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:de(new ti(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[p("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),p("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:p("cursorSurroundingLinesStyle","Controls when `#cursorSurroundingLines#` should be enforced.")})),cursorWidth:de(new gn(31,"cursorWidth",0,0,1073741824,{markdownDescription:p("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:de(new Vt(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:de(new Vt(33,"disableMonospaceOptimizations",!1)),domReadOnly:de(new Vt(34,"domReadOnly",!1)),dragAndDrop:de(new Vt(35,"dragAndDrop",!0,{description:p("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:de(new YSe),dropIntoEditor:de(new Lxe),stickyScroll:de(new sxe),experimentalWhitespaceRendering:de(new ti(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[p("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),p("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),p("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:p("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:de(new Ks(39,"extraEditorClassName","")),fastScrollSensitivity:de(new ka(40,"fastScrollSensitivity",5,i=>i<=0?5:i,{markdownDescription:p("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:de(new QSe),fixedOverflowWidgets:de(new Vt(42,"fixedOverflowWidgets",!1)),folding:de(new Vt(43,"folding",!0,{description:p("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:de(new ti(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[p("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),p("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:p("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:de(new Vt(45,"foldingHighlight",!0,{description:p("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:de(new Vt(46,"foldingImportsByDefault",!1,{description:p("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:de(new gn(47,"foldingMaximumRegions",5e3,10,65e3,{description:p("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:de(new Vt(48,"unfoldOnClickAfterEndOfLine",!1,{description:p("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:de(new Ks(49,"fontFamily",Qs.fontFamily,{description:p("fontFamily","Controls the font family.")})),fontInfo:de(new JSe),fontLigatures2:de(new Co),fontSize:de(new exe),fontWeight:de(new hc),fontVariations:de(new vl),formatOnPaste:de(new Vt(55,"formatOnPaste",!1,{description:p("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:de(new Vt(56,"formatOnType",!1,{description:p("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:de(new Vt(57,"glyphMargin",!0,{description:p("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:de(new txe),hideCursorInOverviewRuler:de(new Vt(59,"hideCursorInOverviewRuler",!1,{description:p("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:de(new nxe),inDiffEditor:de(new Vt(61,"inDiffEditor",!1)),letterSpacing:de(new ka(63,"letterSpacing",Qs.letterSpacing,i=>ka.clamp(i,-5,20),{description:p("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:de(new rxe),lineDecorationsWidth:de(new axe),lineHeight:de(new lxe),lineNumbers:de(new pxe),lineNumbersMinChars:de(new gn(68,"lineNumbersMinChars",5,1,300)),linkedEditing:de(new Vt(69,"linkedEditing",!1,{description:p("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:de(new Vt(70,"links",!0,{description:p("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:de(new ti(71,"matchBrackets","always",["always","near","never"],{description:p("matchBrackets","Highlight matching brackets.")})),minimap:de(new cxe),mouseStyle:de(new ti(73,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:de(new ka(74,"mouseWheelScrollSensitivity",1,i=>i===0?1:i,{markdownDescription:p("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:de(new Vt(75,"mouseWheelZoom",!1,{markdownDescription:p("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:de(new Vt(76,"multiCursorMergeOverlapping",!0,{description:p("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:de(new Nw(77,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],dxe,{markdownEnumDescriptions:[p("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),p("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:p({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:de(new ti(78,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[p("multiCursorPaste.spread","Each cursor pastes a single line of the text."),p("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:p("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:de(new gn(79,"multiCursorLimit",1e4,1,1e5,{markdownDescription:p("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:de(new Vt(80,"occurrencesHighlight",!0,{description:p("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:de(new Vt(81,"overviewRulerBorder",!0,{description:p("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:de(new gn(82,"overviewRulerLanes",3,0,3)),padding:de(new uxe),pasteAs:de(new Dxe),parameterHints:de(new hxe),peekWidgetDefaultFocus:de(new ti(86,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[p("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),p("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:p("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:de(new Vt(87,"definitionLinkOpensInPeek",!1,{description:p("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:de(new gxe),quickSuggestionsDelay:de(new gn(89,"quickSuggestionsDelay",10,0,1073741824,{description:p("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:de(new Vt(90,"readOnly",!1)),readOnlyMessage:de(new _xe),renameOnType:de(new Vt(92,"renameOnType",!1,{description:p("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:p("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:de(new Vt(93,"renderControlCharacters",!0,{description:p("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:de(new ti(94,"renderFinalNewline",os?"dimmed":"on",["off","on","dimmed"],{description:p("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:de(new ti(95,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",p("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:p("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:de(new Vt(96,"renderLineHighlightOnlyWhenFocus",!1,{description:p("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:de(new ti(97,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:de(new ti(98,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",p("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),p("renderWhitespace.selection","Render whitespace characters only on selected text."),p("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:p("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:de(new gn(99,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:de(new Vt(100,"roundedSelection",!0,{description:p("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:de(new mxe),scrollbar:de(new bxe),scrollBeyondLastColumn:de(new gn(103,"scrollBeyondLastColumn",4,0,1073741824,{description:p("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:de(new Vt(104,"scrollBeyondLastLine",!0,{description:p("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:de(new Vt(105,"scrollPredominantAxis",!0,{description:p("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:de(new Vt(106,"selectionClipboard",!0,{description:p("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:os})),selectionHighlight:de(new Vt(107,"selectionHighlight",!0,{description:p("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:de(new Vt(108,"selectOnLineNumbers",!0)),showFoldingControls:de(new ti(109,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[p("showFoldingControls.always","Always show the folding controls."),p("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),p("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:p("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:de(new Vt(110,"showUnused",!0,{description:p("showUnused","Controls fading out of unused code.")})),showDeprecated:de(new Vt(138,"showDeprecated",!0,{description:p("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:de(new oxe),snippetSuggestions:de(new ti(111,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[p("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),p("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),p("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),p("snippetSuggestions.none","Do not show snippet suggestions.")],description:p("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:de(new xxe),smoothScrolling:de(new Vt(113,"smoothScrolling",!1,{description:p("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:de(new gn(116,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:de(new Sxe),inlineSuggest:de(new yxe),inlineCompletionsAccessibilityVerbose:de(new Vt(147,"inlineCompletionsAccessibilityVerbose",!1,{description:p("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:de(new gn(118,"suggestFontSize",0,0,1e3,{markdownDescription:p("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:de(new gn(119,"suggestLineHeight",0,0,1e3,{markdownDescription:p("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:de(new Vt(120,"suggestOnTriggerCharacters",!0,{description:p("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:de(new ti(121,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[p("suggestSelection.first","Always select the first suggestion."),p("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),p("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:p("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:de(new ti(122,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[p("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),p("tabCompletion.off","Disable tab completions."),p("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:p("tabCompletion","Enables tab completions.")})),tabIndex:de(new gn(123,"tabIndex",0,-1,1073741824)),unicodeHighlight:de(new vxe),unusualLineTerminators:de(new ti(125,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[p("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),p("unusualLineTerminators.off","Unusual line terminators are ignored."),p("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:p("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:de(new Vt(126,"useShadowDOM",!0)),useTabStops:de(new Vt(127,"useTabStops",!0,{description:p("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordBreak:de(new ti(128,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[p("wordBreak.normal","Use the default line break rule."),p("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:p("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSeparators:de(new Ks(129,"wordSeparators",Fq,{description:p("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:de(new ti(130,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[p("wordWrap.off","Lines will never wrap."),p("wordWrap.on","Lines will wrap at the viewport width."),p({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),p({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:p({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:de(new Ks(131,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:de(new Ks(132,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:de(new gn(133,"wordWrapColumn",80,1,1073741824,{markdownDescription:p({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:de(new ti(134,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:de(new ti(135,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:de(new XSe),defaultColorDecorators:de(new Vt(145,"defaultColorDecorators",!1,{markdownDescription:p("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:de(new fxe),tabFocusMode:de(new Vt(142,"tabFocusMode",!1,{markdownDescription:p("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:de(new l_),wrappingInfo:de(new kxe),wrappingIndent:de(new Txe),wrappingStrategy:de(new ixe)};class Nxe{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?H_.isErrorNoTelemetry(e)?new H_(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const Uq=new Nxe;function ut(i){ql(i)||Uq.onUnexpectedError(i)}function Ii(i){ql(i)||Uq.onUnexpectedExternalError(i)}function u8(i){if(i instanceof Error){const{name:e,message:t}=i,n=i.stacktrace||i.stack;return{$isError:!0,name:e,message:t,stack:n,noTelemetry:H_.isErrorNoTelemetry(i)}}return i}const _T="Canceled";function ql(i){return i instanceof pf?!0:i instanceof Error&&i.name===_T&&i.message===_T}class pf extends Error{constructor(){super(_T),this.name=this.message}}function Axe(){const i=new Error(_T);return i.name=i.message,i}function ia(i){return i?new Error(`Illegal argument: ${i}`):new Error("Illegal argument")}function x3(i){return i?new Error(`Illegal state: ${i}`):new Error("Illegal state")}class Pxe extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class H_ extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof H_)return e;const t=new H_;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}}class Ti extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,Ti.prototype)}}function Fh(i){const e=this;let t=!1,n;return function(){return t||(t=!0,n=i.apply(e,arguments)),n}}function T3(i){return typeof i.dispose=="function"&&i.dispose.length===0}function an(i){if(St.is(i)){const e=[];for(const t of i)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(i)?[]:i}else if(i)return i.dispose(),i}function Pa(...i){return st(()=>an(i))}function st(i){return{dispose:Fh(()=>{i()})}}class ae{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{an(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?ae.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}deleteAndLeak(e){e&&this._toDispose.has(e)&&this._toDispose.delete(e)}}ae.DISABLE_DISPOSED_WARNING=!1;class q{constructor(){this._store=new ae,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}q.None=Object.freeze({dispose(){}});class vr{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}}class Mxe{constructor(e){this._disposable=e,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}}class Oxe{constructor(e){this.object=e}dispose(){}}class k3{constructor(){this._store=new Map,this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{an(this._store.values())}finally{this._store.clear()}}get(e){return this._store.get(e)}set(e,t,n=!1){var r;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||(r=this._store.get(e))===null||r===void 0||r.dispose(),this._store.set(e,t)}deleteAndDispose(e){var t;(t=this._store.get(e))===null||t===void 0||t.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}const Fxe=globalThis.performance&&typeof globalThis.performance.now=="function";class qr{static create(e){return new qr(e)}constructor(e){this._now=Fxe&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}var Re;(function(i){i.None=()=>q.None;function e(F,W){return u(F,()=>{},0,void 0,!0,void 0,W)}i.defer=e;function t(F){return(W,X=null,oe)=>{let we=!1,ke;return ke=F(Ee=>{if(!we)return ke?ke.dispose():we=!0,W.call(X,Ee)},null,oe),we&&ke.dispose(),ke}}i.once=t;function n(F,W,X){return c((oe,we=null,ke)=>F(Ee=>oe.call(we,W(Ee)),null,ke),X)}i.map=n;function r(F,W,X){return c((oe,we=null,ke)=>F(Ee=>{W(Ee),oe.call(we,Ee)},null,ke),X)}i.forEach=r;function s(F,W,X){return c((oe,we=null,ke)=>F(Ee=>W(Ee)&&oe.call(we,Ee),null,ke),X)}i.filter=s;function o(F){return F}i.signal=o;function a(...F){return(W,X=null,oe)=>{const we=Pa(...F.map(ke=>ke(Ee=>W.call(X,Ee))));return d(we,oe)}}i.any=a;function l(F,W,X,oe){let we=X;return n(F,ke=>(we=W(we,ke),we),oe)}i.reduce=l;function c(F,W){let X;const oe={onWillAddFirstListener(){X=F(we.fire,we)},onDidRemoveLastListener(){X==null||X.dispose()}},we=new H(oe);return W==null||W.add(we),we.event}function d(F,W){return W instanceof Array?W.push(F):W&&W.add(F),F}function u(F,W,X=100,oe=!1,we=!1,ke,Ee){let Le,qe,Ue,Oe=0,be;const un={leakWarningThreshold:ke,onWillAddFirstListener(){Le=F(_e=>{Oe++,qe=W(qe,_e),oe&&!Ue&&(he.fire(qe),qe=void 0),be=()=>{const pe=qe;qe=void 0,Ue=void 0,(!oe||Oe>1)&&he.fire(pe),Oe=0},typeof X=="number"?(clearTimeout(Ue),Ue=setTimeout(be,X)):Ue===void 0&&(Ue=0,queueMicrotask(be))})},onWillRemoveListener(){we&&Oe>0&&(be==null||be())},onDidRemoveLastListener(){be=void 0,Le.dispose()}},he=new H(un);return Ee==null||Ee.add(he),he.event}i.debounce=u;function h(F,W=0,X){return i.debounce(F,(oe,we)=>oe?(oe.push(we),oe):[we],W,void 0,!0,void 0,X)}i.accumulate=h;function f(F,W=(oe,we)=>oe===we,X){let oe=!0,we;return s(F,ke=>{const Ee=oe||!W(ke,we);return oe=!1,we=ke,Ee},X)}i.latch=f;function g(F,W,X){return[i.filter(F,W,X),i.filter(F,oe=>!W(oe),X)]}i.split=g;function m(F,W=!1,X=[],oe){let we=X.slice(),ke=F(qe=>{we?we.push(qe):Le.fire(qe)});oe&&oe.add(ke);const Ee=()=>{we==null||we.forEach(qe=>Le.fire(qe)),we=null},Le=new H({onWillAddFirstListener(){ke||(ke=F(qe=>Le.fire(qe)),oe&&oe.add(ke))},onDidAddFirstListener(){we&&(W?setTimeout(Ee):Ee())},onDidRemoveLastListener(){ke&&ke.dispose(),ke=null}});return oe&&oe.add(Le),Le.event}i.buffer=m;function y(F,W){return(oe,we,ke)=>{const Ee=W(new v);return F(function(Le){const qe=Ee.evaluate(Le);qe!==b&&oe.call(we,qe)},void 0,ke)}}i.chain=y;const b=Symbol("HaltChainable");class v{constructor(){this.steps=[]}map(W){return this.steps.push(W),this}forEach(W){return this.steps.push(X=>(W(X),X)),this}filter(W){return this.steps.push(X=>W(X)?X:b),this}reduce(W,X){let oe=X;return this.steps.push(we=>(oe=W(oe,we),oe)),this}latch(W=(X,oe)=>X===oe){let X=!0,oe;return this.steps.push(we=>{const ke=X||!W(we,oe);return X=!1,oe=we,ke?we:b}),this}evaluate(W){for(const X of this.steps)if(W=X(W),W===b)break;return W}}function C(F,W,X=oe=>oe){const oe=(...Le)=>Ee.fire(X(...Le)),we=()=>F.on(W,oe),ke=()=>F.removeListener(W,oe),Ee=new H({onWillAddFirstListener:we,onDidRemoveLastListener:ke});return Ee.event}i.fromNodeEventEmitter=C;function w(F,W,X=oe=>oe){const oe=(...Le)=>Ee.fire(X(...Le)),we=()=>F.addEventListener(W,oe),ke=()=>F.removeEventListener(W,oe),Ee=new H({onWillAddFirstListener:we,onDidRemoveLastListener:ke});return Ee.event}i.fromDOMEventEmitter=w;function S(F){return new Promise(W=>t(F)(W))}i.toPromise=S;function L(F){const W=new H;return F.then(X=>{W.fire(X)},()=>{W.fire(void 0)}).finally(()=>{W.dispose()}),W.event}i.fromPromise=L;function T(F,W){return W(void 0),F(X=>W(X))}i.runAndSubscribe=T;function I(F,W){let X=null;function oe(ke){X==null||X.dispose(),X=new ae,W(ke,X)}oe(void 0);const we=F(ke=>oe(ke));return st(()=>{we.dispose(),X==null||X.dispose()})}i.runAndSubscribeWithStore=I;class R{constructor(W,X){this._observable=W,this._counter=0,this._hasChanged=!1;const oe={onWillAddFirstListener:()=>{W.addObserver(this)},onDidRemoveLastListener:()=>{W.removeObserver(this)}};this.emitter=new H(oe),X&&X.add(this.emitter)}beginUpdate(W){this._counter++}handlePossibleChange(W){}handleChange(W,X){this._hasChanged=!0}endUpdate(W){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function B(F,W){return new R(F,W).emitter.event}i.fromObservable=B;function V(F){return W=>{let X=0,oe=!1;const we={beginUpdate(){X++},endUpdate(){X--,X===0&&(F.reportChanges(),oe&&(oe=!1,W()))},handlePossibleChange(){},handleChange(){oe=!0}};return F.addObserver(we),F.reportChanges(),{dispose(){F.removeObserver(we)}}}}i.fromObservableLight=V})(Re||(Re={}));class U_{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${U_._idPool++}`,U_.all.add(this)}start(e){this._stopWatch=new qr,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}}U_.all=new Set;U_._idPool=0;let Bxe=-1;class Wxe{constructor(e,t=Math.random().toString(18).slice(2,5)){this.threshold=e,this.name=t,this._warnCountdown=0}dispose(){var e;(e=this._stacks)===null||e===void 0||e.clear()}check(e,t){const n=this.threshold;if(n<=0||t<n)return;this._stacks||(this._stacks=new Map);const r=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,r+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let s,o=0;for(const[a,l]of this._stacks)(!s||o<l)&&(s=a,o=l);console.warn(`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${o}):`),console.warn(s)}return()=>{const s=this._stacks.get(e.value)||0;this._stacks.set(e.value,s-1)}}}class L3{static create(){var e;return new L3((e=new Error().stack)!==null&&e!==void 0?e:"")}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class PR{constructor(e){this.value=e}}const Vxe=2;let H=class{constructor(e){var t,n,r,s,o;this._size=0,this._options=e,this._leakageMon=!((t=this._options)===null||t===void 0)&&t.leakWarningThreshold?new Wxe((r=(n=this._options)===null||n===void 0?void 0:n.leakWarningThreshold)!==null&&r!==void 0?r:Bxe):void 0,this._perfMon=!((s=this._options)===null||s===void 0)&&s._profName?new U_(this._options._profName):void 0,this._deliveryQueue=(o=this._options)===null||o===void 0?void 0:o.deliveryQueue}dispose(){var e,t,n,r;this._disposed||(this._disposed=!0,((e=this._deliveryQueue)===null||e===void 0?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(n=(t=this._options)===null||t===void 0?void 0:t.onDidRemoveLastListener)===null||n===void 0||n.call(t),(r=this._leakageMon)===null||r===void 0||r.dispose())}get event(){var e;return(e=this._event)!==null&&e!==void 0||(this._event=(t,n,r)=>{var s,o,a,l,c;if(this._leakageMon&&this._size>this._leakageMon.threshold*3)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),q.None;if(this._disposed)return q.None;n&&(t=t.bind(n));const d=new PR(t);let u;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(d.stack=L3.create(),u=this._leakageMon.check(d.stack,this._size+1)),this._listeners?this._listeners instanceof PR?((c=this._deliveryQueue)!==null&&c!==void 0||(this._deliveryQueue=new jq),this._listeners=[this._listeners,d]):this._listeners.push(d):((o=(s=this._options)===null||s===void 0?void 0:s.onWillAddFirstListener)===null||o===void 0||o.call(s,this),this._listeners=d,(l=(a=this._options)===null||a===void 0?void 0:a.onDidAddFirstListener)===null||l===void 0||l.call(a,this)),this._size++;const h=st(()=>{u==null||u(),this._removeListener(d)});return r instanceof ae?r.add(h):Array.isArray(r)&&r.push(h),h}),this._event}_removeListener(e){var t,n,r,s;if((n=(t=this._options)===null||t===void 0?void 0:t.onWillRemoveListener)===null||n===void 0||n.call(t,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(s=(r=this._options)===null||r===void 0?void 0:r.onDidRemoveLastListener)===null||s===void 0||s.call(r,this),this._size=0;return}const o=this._listeners,a=o.indexOf(e);if(a===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,o[a]=void 0;const l=this._deliveryQueue.current===this;if(this._size*Vxe<=o.length){let c=0;for(let d=0;d<o.length;d++)o[d]?o[c++]=o[d]:l&&(this._deliveryQueue.end--,c<this._deliveryQueue.i&&this._deliveryQueue.i--);o.length=c}}_deliver(e,t){var n;if(!e)return;const r=((n=this._options)===null||n===void 0?void 0:n.onListenerError)||ut;if(!r){e.value(t);return}try{e.value(t)}catch(s){r(s)}}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,n,r,s;if(!((t=this._deliveryQueue)===null||t===void 0)&&t.current&&(this._deliverQueue(this._deliveryQueue),(n=this._perfMon)===null||n===void 0||n.stop()),(r=this._perfMon)===null||r===void 0||r.start(this._size),this._listeners)if(this._listeners instanceof PR)this._deliver(this._listeners,e);else{const o=this._deliveryQueue;o.enqueue(this,e,this._listeners.length),this._deliverQueue(o)}(s=this._perfMon)===null||s===void 0||s.stop()}hasListeners(){return this._size>0}};const Hxe=()=>new jq;class jq{constructor(){this.i=-1,this.end=0}enqueue(e,t,n){this.i=0,this.end=n,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class Ug extends H{constructor(e){super(e),this._isPaused=0,this._eventQueue=new ps,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class zq extends Ug{constructor(e){var t;super(e),this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class Uxe extends H{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e==null?void 0:e.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}}class jxe{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new H({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),st(Fh(()=>{this.hasListeners&&this.unhook(t);const r=this.events.indexOf(t);this.events.splice(r,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){e.listener&&e.listener.dispose(),e.listener=null}dispose(){this.emitter.dispose()}}class D3{constructor(){this.buffers=[]}wrapEvent(e){return(t,n,r)=>e(s=>{const o=this.buffers[this.buffers.length-1];o?o.push(()=>t.call(n,s)):t.call(n,s)},void 0,r)}bufferEvents(e){const t=[];this.buffers.push(t);const n=e();return this.buffers.pop(),t.forEach(r=>r()),n}}class h8{constructor(){this.listening=!1,this.inputEvent=Re.None,this.inputEventListener=q.None,this.emitter=new H({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const $q=Object.freeze(function(i,e){const t=setTimeout(i.bind(e),0);return{dispose(){clearTimeout(t)}}});var xt;(function(i){function e(t){return t===i.None||t===i.Cancelled||t instanceof dx?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}i.isCancellationToken=e,i.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Re.None}),i.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:$q})})(xt||(xt={}));class dx{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?$q:(this._emitter||(this._emitter=new H),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}let vi=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new dx),this._token}cancel(){this._token?this._token instanceof dx&&this._token.cancel():this._token=xt.Cancelled}dispose(e=!1){var t;e&&this.cancel(),(t=this._parentListener)===null||t===void 0||t.dispose(),this._token?this._token instanceof dx&&this._token.dispose():this._token=xt.None}};class I3{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const ux=new I3,T2=new I3,k2=new I3,Kq=new Array(230),zxe=Object.create(null),$xe=Object.create(null),R3=[];for(let i=0;i<=193;i++)R3[i]=-1;(function(){const i="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",i,i],[1,1,"Hyper",0,i,0,i,i,i],[1,2,"Super",0,i,0,i,i,i],[1,3,"Fn",0,i,0,i,i,i],[1,4,"FnLock",0,i,0,i,i,i],[1,5,"Suspend",0,i,0,i,i,i],[1,6,"Resume",0,i,0,i,i,i],[1,7,"Turbo",0,i,0,i,i,i],[1,8,"Sleep",0,i,0,"VK_SLEEP",i,i],[1,9,"WakeUp",0,i,0,i,i,i],[0,10,"KeyA",31,"A",65,"VK_A",i,i],[0,11,"KeyB",32,"B",66,"VK_B",i,i],[0,12,"KeyC",33,"C",67,"VK_C",i,i],[0,13,"KeyD",34,"D",68,"VK_D",i,i],[0,14,"KeyE",35,"E",69,"VK_E",i,i],[0,15,"KeyF",36,"F",70,"VK_F",i,i],[0,16,"KeyG",37,"G",71,"VK_G",i,i],[0,17,"KeyH",38,"H",72,"VK_H",i,i],[0,18,"KeyI",39,"I",73,"VK_I",i,i],[0,19,"KeyJ",40,"J",74,"VK_J",i,i],[0,20,"KeyK",41,"K",75,"VK_K",i,i],[0,21,"KeyL",42,"L",76,"VK_L",i,i],[0,22,"KeyM",43,"M",77,"VK_M",i,i],[0,23,"KeyN",44,"N",78,"VK_N",i,i],[0,24,"KeyO",45,"O",79,"VK_O",i,i],[0,25,"KeyP",46,"P",80,"VK_P",i,i],[0,26,"KeyQ",47,"Q",81,"VK_Q",i,i],[0,27,"KeyR",48,"R",82,"VK_R",i,i],[0,28,"KeyS",49,"S",83,"VK_S",i,i],[0,29,"KeyT",50,"T",84,"VK_T",i,i],[0,30,"KeyU",51,"U",85,"VK_U",i,i],[0,31,"KeyV",52,"V",86,"VK_V",i,i],[0,32,"KeyW",53,"W",87,"VK_W",i,i],[0,33,"KeyX",54,"X",88,"VK_X",i,i],[0,34,"KeyY",55,"Y",89,"VK_Y",i,i],[0,35,"KeyZ",56,"Z",90,"VK_Z",i,i],[0,36,"Digit1",22,"1",49,"VK_1",i,i],[0,37,"Digit2",23,"2",50,"VK_2",i,i],[0,38,"Digit3",24,"3",51,"VK_3",i,i],[0,39,"Digit4",25,"4",52,"VK_4",i,i],[0,40,"Digit5",26,"5",53,"VK_5",i,i],[0,41,"Digit6",27,"6",54,"VK_6",i,i],[0,42,"Digit7",28,"7",55,"VK_7",i,i],[0,43,"Digit8",29,"8",56,"VK_8",i,i],[0,44,"Digit9",30,"9",57,"VK_9",i,i],[0,45,"Digit0",21,"0",48,"VK_0",i,i],[1,46,"Enter",3,"Enter",13,"VK_RETURN",i,i],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",i,i],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",i,i],[1,49,"Tab",2,"Tab",9,"VK_TAB",i,i],[1,50,"Space",10,"Space",32,"VK_SPACE",i,i],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,i,0,i,i,i],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",i,i],[1,64,"F1",59,"F1",112,"VK_F1",i,i],[1,65,"F2",60,"F2",113,"VK_F2",i,i],[1,66,"F3",61,"F3",114,"VK_F3",i,i],[1,67,"F4",62,"F4",115,"VK_F4",i,i],[1,68,"F5",63,"F5",116,"VK_F5",i,i],[1,69,"F6",64,"F6",117,"VK_F6",i,i],[1,70,"F7",65,"F7",118,"VK_F7",i,i],[1,71,"F8",66,"F8",119,"VK_F8",i,i],[1,72,"F9",67,"F9",120,"VK_F9",i,i],[1,73,"F10",68,"F10",121,"VK_F10",i,i],[1,74,"F11",69,"F11",122,"VK_F11",i,i],[1,75,"F12",70,"F12",123,"VK_F12",i,i],[1,76,"PrintScreen",0,i,0,i,i,i],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",i,i],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",i,i],[1,79,"Insert",19,"Insert",45,"VK_INSERT",i,i],[1,80,"Home",14,"Home",36,"VK_HOME",i,i],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",i,i],[1,82,"Delete",20,"Delete",46,"VK_DELETE",i,i],[1,83,"End",13,"End",35,"VK_END",i,i],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",i,i],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",i],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",i],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",i],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",i],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",i,i],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",i,i],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",i,i],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",i,i],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",i,i],[1,94,"NumpadEnter",3,i,0,i,i,i],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",i,i],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",i,i],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",i,i],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",i,i],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",i,i],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",i,i],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",i,i],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",i,i],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",i,i],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",i,i],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",i,i],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",i,i],[1,107,"ContextMenu",58,"ContextMenu",93,i,i,i],[1,108,"Power",0,i,0,i,i,i],[1,109,"NumpadEqual",0,i,0,i,i,i],[1,110,"F13",71,"F13",124,"VK_F13",i,i],[1,111,"F14",72,"F14",125,"VK_F14",i,i],[1,112,"F15",73,"F15",126,"VK_F15",i,i],[1,113,"F16",74,"F16",127,"VK_F16",i,i],[1,114,"F17",75,"F17",128,"VK_F17",i,i],[1,115,"F18",76,"F18",129,"VK_F18",i,i],[1,116,"F19",77,"F19",130,"VK_F19",i,i],[1,117,"F20",78,"F20",131,"VK_F20",i,i],[1,118,"F21",79,"F21",132,"VK_F21",i,i],[1,119,"F22",80,"F22",133,"VK_F22",i,i],[1,120,"F23",81,"F23",134,"VK_F23",i,i],[1,121,"F24",82,"F24",135,"VK_F24",i,i],[1,122,"Open",0,i,0,i,i,i],[1,123,"Help",0,i,0,i,i,i],[1,124,"Select",0,i,0,i,i,i],[1,125,"Again",0,i,0,i,i,i],[1,126,"Undo",0,i,0,i,i,i],[1,127,"Cut",0,i,0,i,i,i],[1,128,"Copy",0,i,0,i,i,i],[1,129,"Paste",0,i,0,i,i,i],[1,130,"Find",0,i,0,i,i,i],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",i,i],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",i,i],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",i,i],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",i,i],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",i,i],[1,136,"KanaMode",0,i,0,i,i,i],[0,137,"IntlYen",0,i,0,i,i,i],[1,138,"Convert",0,i,0,i,i,i],[1,139,"NonConvert",0,i,0,i,i,i],[1,140,"Lang1",0,i,0,i,i,i],[1,141,"Lang2",0,i,0,i,i,i],[1,142,"Lang3",0,i,0,i,i,i],[1,143,"Lang4",0,i,0,i,i,i],[1,144,"Lang5",0,i,0,i,i,i],[1,145,"Abort",0,i,0,i,i,i],[1,146,"Props",0,i,0,i,i,i],[1,147,"NumpadParenLeft",0,i,0,i,i,i],[1,148,"NumpadParenRight",0,i,0,i,i,i],[1,149,"NumpadBackspace",0,i,0,i,i,i],[1,150,"NumpadMemoryStore",0,i,0,i,i,i],[1,151,"NumpadMemoryRecall",0,i,0,i,i,i],[1,152,"NumpadMemoryClear",0,i,0,i,i,i],[1,153,"NumpadMemoryAdd",0,i,0,i,i,i],[1,154,"NumpadMemorySubtract",0,i,0,i,i,i],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",i,i],[1,156,"NumpadClearEntry",0,i,0,i,i,i],[1,0,i,5,"Ctrl",17,"VK_CONTROL",i,i],[1,0,i,4,"Shift",16,"VK_SHIFT",i,i],[1,0,i,6,"Alt",18,"VK_MENU",i,i],[1,0,i,57,"Meta",91,"VK_COMMAND",i,i],[1,157,"ControlLeft",5,i,0,"VK_LCONTROL",i,i],[1,158,"ShiftLeft",4,i,0,"VK_LSHIFT",i,i],[1,159,"AltLeft",6,i,0,"VK_LMENU",i,i],[1,160,"MetaLeft",57,i,0,"VK_LWIN",i,i],[1,161,"ControlRight",5,i,0,"VK_RCONTROL",i,i],[1,162,"ShiftRight",4,i,0,"VK_RSHIFT",i,i],[1,163,"AltRight",6,i,0,"VK_RMENU",i,i],[1,164,"MetaRight",57,i,0,"VK_RWIN",i,i],[1,165,"BrightnessUp",0,i,0,i,i,i],[1,166,"BrightnessDown",0,i,0,i,i,i],[1,167,"MediaPlay",0,i,0,i,i,i],[1,168,"MediaRecord",0,i,0,i,i,i],[1,169,"MediaFastForward",0,i,0,i,i,i],[1,170,"MediaRewind",0,i,0,i,i,i],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",i,i],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",i,i],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",i,i],[1,174,"Eject",0,i,0,i,i,i],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",i,i],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",i,i],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",i,i],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",i,i],[1,179,"LaunchApp1",0,i,0,"VK_MEDIA_LAUNCH_APP1",i,i],[1,180,"SelectTask",0,i,0,i,i,i],[1,181,"LaunchScreenSaver",0,i,0,i,i,i],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",i,i],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",i,i],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",i,i],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",i,i],[1,186,"BrowserStop",0,i,0,"VK_BROWSER_STOP",i,i],[1,187,"BrowserRefresh",0,i,0,"VK_BROWSER_REFRESH",i,i],[1,188,"BrowserFavorites",0,i,0,"VK_BROWSER_FAVORITES",i,i],[1,189,"ZoomToggle",0,i,0,i,i,i],[1,190,"MailReply",0,i,0,i,i,i],[1,191,"MailForward",0,i,0,i,i,i],[1,192,"MailSend",0,i,0,i,i,i],[1,0,i,114,"KeyInComposition",229,i,i,i],[1,0,i,116,"ABNT_C2",194,"VK_ABNT_C2",i,i],[1,0,i,96,"OEM_8",223,"VK_OEM_8",i,i],[1,0,i,0,i,0,"VK_KANA",i,i],[1,0,i,0,i,0,"VK_HANGUL",i,i],[1,0,i,0,i,0,"VK_JUNJA",i,i],[1,0,i,0,i,0,"VK_FINAL",i,i],[1,0,i,0,i,0,"VK_HANJA",i,i],[1,0,i,0,i,0,"VK_KANJI",i,i],[1,0,i,0,i,0,"VK_CONVERT",i,i],[1,0,i,0,i,0,"VK_NONCONVERT",i,i],[1,0,i,0,i,0,"VK_ACCEPT",i,i],[1,0,i,0,i,0,"VK_MODECHANGE",i,i],[1,0,i,0,i,0,"VK_SELECT",i,i],[1,0,i,0,i,0,"VK_PRINT",i,i],[1,0,i,0,i,0,"VK_EXECUTE",i,i],[1,0,i,0,i,0,"VK_SNAPSHOT",i,i],[1,0,i,0,i,0,"VK_HELP",i,i],[1,0,i,0,i,0,"VK_APPS",i,i],[1,0,i,0,i,0,"VK_PROCESSKEY",i,i],[1,0,i,0,i,0,"VK_PACKET",i,i],[1,0,i,0,i,0,"VK_DBE_SBCSCHAR",i,i],[1,0,i,0,i,0,"VK_DBE_DBCSCHAR",i,i],[1,0,i,0,i,0,"VK_ATTN",i,i],[1,0,i,0,i,0,"VK_CRSEL",i,i],[1,0,i,0,i,0,"VK_EXSEL",i,i],[1,0,i,0,i,0,"VK_EREOF",i,i],[1,0,i,0,i,0,"VK_PLAY",i,i],[1,0,i,0,i,0,"VK_ZOOM",i,i],[1,0,i,0,i,0,"VK_NONAME",i,i],[1,0,i,0,i,0,"VK_PA1",i,i],[1,0,i,0,i,0,"VK_OEM_CLEAR",i,i]],t=[],n=[];for(const r of e){const[s,o,a,l,c,d,u,h,f]=r;if(n[o]||(n[o]=!0,zxe[a]=o,$xe[a.toLowerCase()]=o,s&&(R3[o]=l)),!t[l]){if(t[l]=!0,!c)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);ux.define(l,c),T2.define(l,h||c),k2.define(l,f||h||c)}d&&(Kq[d]=l)}})();var Md;(function(i){function e(a){return ux.keyCodeToStr(a)}i.toString=e;function t(a){return ux.strToKeyCode(a)}i.fromString=t;function n(a){return T2.keyCodeToStr(a)}i.toUserSettingsUS=n;function r(a){return k2.keyCodeToStr(a)}i.toUserSettingsGeneral=r;function s(a){return T2.strToKeyCode(a)||k2.strToKeyCode(a)}i.fromUserSettings=s;function o(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return ux.keyCodeToStr(a)}i.toElectronAccelerator=o})(Md||(Md={}));function Oi(i,e){const t=(e&65535)<<16>>>0;return(i|t)>>>0}let d_;if(typeof Aa.vscode<"u"&&typeof Aa.vscode.process<"u"){const i=Aa.vscode.process;d_={get platform(){return i.platform},get arch(){return i.arch},get env(){return i.env},cwd(){return i.cwd()}}}else typeof process<"u"?d_={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:d_={get platform(){return Ar?"win32":Ot?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const bT=d_.cwd,qq=d_.env,Kxe=d_.platform,qxe=65,Gxe=97,Zxe=90,Xxe=122,bh=46,Qr=47,go=92,Du=58,Yxe=63;class Gq extends Error{constructor(e,t,n){let r;typeof t=="string"&&t.indexOf("not ")===0?(r="must not be",t=t.replace(/^not /,"")):r="must be";const s=e.indexOf(".")!==-1?"property":"argument";let o=`The "${e}" ${s} ${r} of type ${t}`;o+=`. Received type ${typeof n}`,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function Qxe(i,e){if(i===null||typeof i!="object")throw new Gq(e,"Object",i)}function Qi(i,e){if(typeof i!="string")throw new Gq(e,"string",i)}const mf=Kxe==="win32";function ln(i){return i===Qr||i===go}function L2(i){return i===Qr}function Iu(i){return i>=qxe&&i<=Zxe||i>=Gxe&&i<=Xxe}function vT(i,e,t,n){let r="",s=0,o=-1,a=0,l=0;for(let c=0;c<=i.length;++c){if(c<i.length)l=i.charCodeAt(c);else{if(n(l))break;l=Qr}if(n(l)){if(!(o===c-1||a===1))if(a===2){if(r.length<2||s!==2||r.charCodeAt(r.length-1)!==bh||r.charCodeAt(r.length-2)!==bh){if(r.length>2){const d=r.lastIndexOf(t);d===-1?(r="",s=0):(r=r.slice(0,d),s=r.length-1-r.lastIndexOf(t)),o=c,a=0;continue}else if(r.length!==0){r="",s=0,o=c,a=0;continue}}e&&(r+=r.length>0?`${t}..`:"..",s=2)}else r.length>0?r+=`${t}${i.slice(o+1,c)}`:r=i.slice(o+1,c),s=c-o-1;o=c,a=0}else l===bh&&a!==-1?++a:a=-1}return r}function Zq(i,e){Qxe(e,"pathObject");const t=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${n}`:`${t}${i}${n}`:n}const Xs={resolve(...i){let e="",t="",n=!1;for(let r=i.length-1;r>=-1;r--){let s;if(r>=0){if(s=i[r],Qi(s,"path"),s.length===0)continue}else e.length===0?s=bT():(s=qq[`=${e}`]||bT(),(s===void 0||s.slice(0,2).toLowerCase()!==e.toLowerCase()&&s.charCodeAt(2)===go)&&(s=`${e}\\`));const o=s.length;let a=0,l="",c=!1;const d=s.charCodeAt(0);if(o===1)ln(d)&&(a=1,c=!0);else if(ln(d))if(c=!0,ln(s.charCodeAt(1))){let u=2,h=u;for(;u<o&&!ln(s.charCodeAt(u));)u++;if(u<o&&u!==h){const f=s.slice(h,u);for(h=u;u<o&&ln(s.charCodeAt(u));)u++;if(u<o&&u!==h){for(h=u;u<o&&!ln(s.charCodeAt(u));)u++;(u===o||u!==h)&&(l=`\\\\${f}\\${s.slice(h,u)}`,a=u)}}}else a=1;else Iu(d)&&s.charCodeAt(1)===Du&&(l=s.slice(0,2),a=2,o>2&&ln(s.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${s.slice(a)}\\${t}`,n=c,c&&e.length>0)break}return t=vT(t,!n,"\\",ln),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(i){Qi(i,"path");const e=i.length;if(e===0)return".";let t=0,n,r=!1;const s=i.charCodeAt(0);if(e===1)return L2(s)?"\\":i;if(ln(s))if(r=!0,ln(i.charCodeAt(1))){let a=2,l=a;for(;a<e&&!ln(i.charCodeAt(a));)a++;if(a<e&&a!==l){const c=i.slice(l,a);for(l=a;a<e&&ln(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!ln(i.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${i.slice(l)}\\`;a!==l&&(n=`\\\\${c}\\${i.slice(l,a)}`,t=a)}}}else t=1;else Iu(s)&&i.charCodeAt(1)===Du&&(n=i.slice(0,2),t=2,e>2&&ln(i.charCodeAt(2))&&(r=!0,t=3));let o=t<e?vT(i.slice(t),!r,"\\",ln):"";return o.length===0&&!r&&(o="."),o.length>0&&ln(i.charCodeAt(e-1))&&(o+="\\"),n===void 0?r?`\\${o}`:o:r?`${n}\\${o}`:`${n}${o}`},isAbsolute(i){Qi(i,"path");const e=i.length;if(e===0)return!1;const t=i.charCodeAt(0);return ln(t)||e>2&&Iu(t)&&i.charCodeAt(1)===Du&&ln(i.charCodeAt(2))},join(...i){if(i.length===0)return".";let e,t;for(let s=0;s<i.length;++s){const o=i[s];Qi(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let n=!0,r=0;if(typeof t=="string"&&ln(t.charCodeAt(0))){++r;const s=t.length;s>1&&ln(t.charCodeAt(1))&&(++r,s>2&&(ln(t.charCodeAt(2))?++r:n=!1))}if(n){for(;r<e.length&&ln(e.charCodeAt(r));)r++;r>=2&&(e=`\\${e.slice(r)}`)}return Xs.normalize(e)},relative(i,e){if(Qi(i,"from"),Qi(e,"to"),i===e)return"";const t=Xs.resolve(i),n=Xs.resolve(e);if(t===n||(i=t.toLowerCase(),e=n.toLowerCase(),i===e))return"";let r=0;for(;r<i.length&&i.charCodeAt(r)===go;)r++;let s=i.length;for(;s-1>r&&i.charCodeAt(s-1)===go;)s--;const o=s-r;let a=0;for(;a<e.length&&e.charCodeAt(a)===go;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===go;)l--;const c=l-a,d=o<c?o:c;let u=-1,h=0;for(;h<d;h++){const g=i.charCodeAt(r+h);if(g!==e.charCodeAt(a+h))break;g===go&&(u=h)}if(h!==d){if(u===-1)return n}else{if(c>d){if(e.charCodeAt(a+h)===go)return n.slice(a+h+1);if(h===2)return n.slice(a+h)}o>d&&(i.charCodeAt(r+h)===go?u=h:h===2&&(u=3)),u===-1&&(u=0)}let f="";for(h=r+u+1;h<=s;++h)(h===s||i.charCodeAt(h)===go)&&(f+=f.length===0?"..":"\\..");return a+=u,f.length>0?`${f}${n.slice(a,l)}`:(n.charCodeAt(a)===go&&++a,n.slice(a,l))},toNamespacedPath(i){if(typeof i!="string"||i.length===0)return i;const e=Xs.resolve(i);if(e.length<=2)return i;if(e.charCodeAt(0)===go){if(e.charCodeAt(1)===go){const t=e.charCodeAt(2);if(t!==Yxe&&t!==bh)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Iu(e.charCodeAt(0))&&e.charCodeAt(1)===Du&&e.charCodeAt(2)===go)return`\\\\?\\${e}`;return i},dirname(i){Qi(i,"path");const e=i.length;if(e===0)return".";let t=-1,n=0;const r=i.charCodeAt(0);if(e===1)return ln(r)?i:".";if(ln(r)){if(t=n=1,ln(i.charCodeAt(1))){let a=2,l=a;for(;a<e&&!ln(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&ln(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!ln(i.charCodeAt(a));)a++;if(a===e)return i;a!==l&&(t=n=a+1)}}}}else Iu(r)&&i.charCodeAt(1)===Du&&(t=e>2&&ln(i.charCodeAt(2))?3:2,n=t);let s=-1,o=!0;for(let a=e-1;a>=n;--a)if(ln(i.charCodeAt(a))){if(!o){s=a;break}}else o=!1;if(s===-1){if(t===-1)return".";s=t}return i.slice(0,s)},basename(i,e){e!==void 0&&Qi(e,"ext"),Qi(i,"path");let t=0,n=-1,r=!0,s;if(i.length>=2&&Iu(i.charCodeAt(0))&&i.charCodeAt(1)===Du&&(t=2),e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let o=e.length-1,a=-1;for(s=i.length-1;s>=t;--s){const l=i.charCodeAt(s);if(ln(l)){if(!r){t=s+1;break}}else a===-1&&(r=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(s=i.length-1;s>=t;--s)if(ln(i.charCodeAt(s))){if(!r){t=s+1;break}}else n===-1&&(r=!1,n=s+1);return n===-1?"":i.slice(t,n)},extname(i){Qi(i,"path");let e=0,t=-1,n=0,r=-1,s=!0,o=0;i.length>=2&&i.charCodeAt(1)===Du&&Iu(i.charCodeAt(0))&&(e=n=2);for(let a=i.length-1;a>=e;--a){const l=i.charCodeAt(a);if(ln(l)){if(!s){n=a+1;break}continue}r===-1&&(s=!1,r=a+1),l===bh?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||r===-1||o===0||o===1&&t===r-1&&t===n+1?"":i.slice(t,r)},format:Zq.bind(null,"\\"),parse(i){Qi(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.length;let n=0,r=i.charCodeAt(0);if(t===1)return ln(r)?(e.root=e.dir=i,e):(e.base=e.name=i,e);if(ln(r)){if(n=1,ln(i.charCodeAt(1))){let u=2,h=u;for(;u<t&&!ln(i.charCodeAt(u));)u++;if(u<t&&u!==h){for(h=u;u<t&&ln(i.charCodeAt(u));)u++;if(u<t&&u!==h){for(h=u;u<t&&!ln(i.charCodeAt(u));)u++;u===t?n=u:u!==h&&(n=u+1)}}}}else if(Iu(r)&&i.charCodeAt(1)===Du){if(t<=2)return e.root=e.dir=i,e;if(n=2,ln(i.charCodeAt(2))){if(t===3)return e.root=e.dir=i,e;n=3}}n>0&&(e.root=i.slice(0,n));let s=-1,o=n,a=-1,l=!0,c=i.length-1,d=0;for(;c>=n;--c){if(r=i.charCodeAt(c),ln(r)){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),r===bh?s===-1?s=c:d!==1&&(d=1):s!==-1&&(d=-1)}return a!==-1&&(s===-1||d===0||d===1&&s===a-1&&s===o+1?e.base=e.name=i.slice(o,a):(e.name=i.slice(o,s),e.base=i.slice(o,a),e.ext=i.slice(s,a))),o>0&&o!==n?e.dir=i.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},Jxe=(()=>{if(mf){const i=/\\/g;return()=>{const e=bT().replace(i,"/");return e.slice(e.indexOf("/"))}}return()=>bT()})(),Pi={resolve(...i){let e="",t=!1;for(let n=i.length-1;n>=-1&&!t;n--){const r=n>=0?i[n]:Jxe();Qi(r,"path"),r.length!==0&&(e=`${r}/${e}`,t=r.charCodeAt(0)===Qr)}return e=vT(e,!t,"/",L2),t?`/${e}`:e.length>0?e:"."},normalize(i){if(Qi(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===Qr,t=i.charCodeAt(i.length-1)===Qr;return i=vT(i,!e,"/",L2),i.length===0?e?"/":t?"./":".":(t&&(i+="/"),e?`/${i}`:i)},isAbsolute(i){return Qi(i,"path"),i.length>0&&i.charCodeAt(0)===Qr},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){const n=i[t];Qi(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":Pi.normalize(e)},relative(i,e){if(Qi(i,"from"),Qi(e,"to"),i===e||(i=Pi.resolve(i),e=Pi.resolve(e),i===e))return"";const t=1,n=i.length,r=n-t,s=1,o=e.length-s,a=r<o?r:o;let l=-1,c=0;for(;c<a;c++){const u=i.charCodeAt(t+c);if(u!==e.charCodeAt(s+c))break;u===Qr&&(l=c)}if(c===a)if(o>a){if(e.charCodeAt(s+c)===Qr)return e.slice(s+c+1);if(c===0)return e.slice(s+c)}else r>a&&(i.charCodeAt(t+c)===Qr?l=c:c===0&&(l=0));let d="";for(c=t+l+1;c<=n;++c)(c===n||i.charCodeAt(c)===Qr)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(s+l)}`},toNamespacedPath(i){return i},dirname(i){if(Qi(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===Qr;let t=-1,n=!0;for(let r=i.length-1;r>=1;--r)if(i.charCodeAt(r)===Qr){if(!n){t=r;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":i.slice(0,t)},basename(i,e){e!==void 0&&Qi(e,"ext"),Qi(i,"path");let t=0,n=-1,r=!0,s;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let o=e.length-1,a=-1;for(s=i.length-1;s>=0;--s){const l=i.charCodeAt(s);if(l===Qr){if(!r){t=s+1;break}}else a===-1&&(r=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(s=i.length-1;s>=0;--s)if(i.charCodeAt(s)===Qr){if(!r){t=s+1;break}}else n===-1&&(r=!1,n=s+1);return n===-1?"":i.slice(t,n)},extname(i){Qi(i,"path");let e=-1,t=0,n=-1,r=!0,s=0;for(let o=i.length-1;o>=0;--o){const a=i.charCodeAt(o);if(a===Qr){if(!r){t=o+1;break}continue}n===-1&&(r=!1,n=o+1),a===bh?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===t+1?"":i.slice(e,n)},format:Zq.bind(null,"/"),parse(i){Qi(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.charCodeAt(0)===Qr;let n;t?(e.root="/",n=1):n=0;let r=-1,s=0,o=-1,a=!0,l=i.length-1,c=0;for(;l>=n;--l){const d=i.charCodeAt(l);if(d===Qr){if(!a){s=l+1;break}continue}o===-1&&(a=!1,o=l+1),d===bh?r===-1?r=l:c!==1&&(c=1):r!==-1&&(c=-1)}if(o!==-1){const d=s===0&&t?1:s;r===-1||c===0||c===1&&r===o-1&&r===s+1?e.base=e.name=i.slice(d,o):(e.name=i.slice(d,r),e.base=i.slice(d,o),e.ext=i.slice(r,o))}return s>0?e.dir=i.slice(0,s-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Pi.win32=Xs.win32=Xs;Pi.posix=Xs.posix=Pi;const Xq=mf?Xs.normalize:Pi.normalize,eTe=mf?Xs.resolve:Pi.resolve,tTe=mf?Xs.relative:Pi.relative,Yq=mf?Xs.dirname:Pi.dirname,vh=mf?Xs.basename:Pi.basename,nTe=mf?Xs.extname:Pi.extname,Ll=mf?Xs.sep:Pi.sep,iTe=/^\w[\w\d+.-]*$/,rTe=/^\//,sTe=/^\/\//;function oTe(i,e){if(!i.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${i.authority}", path: "${i.path}", query: "${i.query}", fragment: "${i.fragment}"}`);if(i.scheme&&!iTe.test(i.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(i.path){if(i.authority){if(!rTe.test(i.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(sTe.test(i.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function aTe(i,e){return!i&&!e?"file":i}function lTe(i,e){switch(i){case"https":case"http":case"file":e?e[0]!==pl&&(e=pl+e):e=pl;break}return e}const pi="",pl="/",cTe=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class Ye{static isUri(e){return e instanceof Ye?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,t,n,r,s,o=!1){typeof e=="object"?(this.scheme=e.scheme||pi,this.authority=e.authority||pi,this.path=e.path||pi,this.query=e.query||pi,this.fragment=e.fragment||pi):(this.scheme=aTe(e,o),this.authority=t||pi,this.path=lTe(this.scheme,n||pi),this.query=r||pi,this.fragment=s||pi,oTe(this,o))}get fsPath(){return yT(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:r,query:s,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=pi),n===void 0?n=this.authority:n===null&&(n=pi),r===void 0?r=this.path:r===null&&(r=pi),s===void 0?s=this.query:s===null&&(s=pi),o===void 0?o=this.fragment:o===null&&(o=pi),t===this.scheme&&n===this.authority&&r===this.path&&s===this.query&&o===this.fragment?this:new nm(t,n,r,s,o)}static parse(e,t=!1){const n=cTe.exec(e);return n?new nm(n[2]||pi,Aw(n[4]||pi),Aw(n[5]||pi),Aw(n[7]||pi),Aw(n[9]||pi),t):new nm(pi,pi,pi,pi,pi)}static file(e){let t=pi;if(Ar&&(e=e.replace(/\\/g,pl)),e[0]===pl&&e[1]===pl){const n=e.indexOf(pl,2);n===-1?(t=e.substring(2),e=pl):(t=e.substring(2,n),e=e.substring(n)||pl)}return new nm("file",t,e,pi,pi)}static from(e,t){return new nm(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Ar&&e.scheme==="file"?n=Ye.file(Xs.join(yT(e,!0),...t)).path:n=Pi.join(e.path,...t),e.with({path:n})}toString(e=!1){return D2(this,e)}toJSON(){return this}static revive(e){var t,n;if(e){if(e instanceof Ye)return e;{const r=new nm(e);return r._formatted=(t=e.external)!==null&&t!==void 0?t:null,r._fsPath=e._sep===Qq&&(n=e.fsPath)!==null&&n!==void 0?n:null,r}}else return e}}const Qq=Ar?1:void 0;let nm=class extends Ye{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=yT(this,!1)),this._fsPath}toString(e=!1){return e?D2(this,!0):(this._formatted||(this._formatted=D2(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Qq),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}};const Jq={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function f8(i,e,t){let n,r=-1;for(let s=0;s<i.length;s++){const o=i.charCodeAt(s);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||e&&o===47||t&&o===91||t&&o===93||t&&o===58)r!==-1&&(n+=encodeURIComponent(i.substring(r,s)),r=-1),n!==void 0&&(n+=i.charAt(s));else{n===void 0&&(n=i.substr(0,s));const a=Jq[o];a!==void 0?(r!==-1&&(n+=encodeURIComponent(i.substring(r,s)),r=-1),n+=a):r===-1&&(r=s)}}return r!==-1&&(n+=encodeURIComponent(i.substring(r))),n!==void 0?n:i}function dTe(i){let e;for(let t=0;t<i.length;t++){const n=i.charCodeAt(t);n===35||n===63?(e===void 0&&(e=i.substr(0,t)),e+=Jq[n]):e!==void 0&&(e+=i[t])}return e!==void 0?e:i}function yT(i,e){let t;return i.authority&&i.path.length>1&&i.scheme==="file"?t=`//${i.authority}${i.path}`:i.path.charCodeAt(0)===47&&(i.path.charCodeAt(1)>=65&&i.path.charCodeAt(1)<=90||i.path.charCodeAt(1)>=97&&i.path.charCodeAt(1)<=122)&&i.path.charCodeAt(2)===58?e?t=i.path.substr(1):t=i.path[1].toLowerCase()+i.path.substr(2):t=i.path,Ar&&(t=t.replace(/\//g,"\\")),t}function D2(i,e){const t=e?dTe:f8;let n="",{scheme:r,authority:s,path:o,query:a,fragment:l}=i;if(r&&(n+=r,n+=":"),(s||r==="file")&&(n+=pl,n+=pl),s){let c=s.indexOf("@");if(c!==-1){const d=s.substr(0,c);s=s.substr(c+1),c=d.lastIndexOf(":"),c===-1?n+=t(d,!1,!1):(n+=t(d.substr(0,c),!1,!1),n+=":",n+=t(d.substr(c+1),!1,!0)),n+="@"}s=s.toLowerCase(),c=s.lastIndexOf(":"),c===-1?n+=t(s,!1,!0):(n+=t(s.substr(0,c),!1,!0),n+=s.substr(c))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const c=o.charCodeAt(1);c>=65&&c<=90&&(o=`/${String.fromCharCode(c+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const c=o.charCodeAt(0);c>=65&&c<=90&&(o=`${String.fromCharCode(c+32)}:${o.substr(2)}`)}n+=t(o,!0,!1)}return a&&(n+="?",n+=t(a,!1,!1)),l&&(n+="#",n+=e?l:f8(l,!1,!1)),n}function eG(i){try{return decodeURIComponent(i)}catch{return i.length>3?i.substr(0,3)+eG(i.substr(3)):i}}const g8=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Aw(i){return i.match(g8)?i.replace(g8,e=>eG(e)):i}let U=class Wf{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new Wf(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return Wf.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return Wf.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return Wf.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const n=e.lineNumber|0,r=t.lineNumber|0;if(n===r){const s=e.column|0,o=t.column|0;return s-o}return n-r}clone(){return new Wf(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new Wf(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}},D=class or{constructor(e,t,n,r){e>n||e===n&&t>r?(this.startLineNumber=n,this.startColumn=r,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=r)}isEmpty(){return or.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return or.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return or.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return or.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return or.plusRange(this,e)}static plusRange(e,t){let n,r,s,o;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,r=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,r=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,r=e.startColumn),t.endLineNumber>e.endLineNumber?(s=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(s=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(s=e.endLineNumber,o=e.endColumn),new or(n,r,s,o)}intersectRanges(e){return or.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,r=e.startColumn,s=e.endLineNumber,o=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,d=t.endColumn;return n<a?(n=a,r=l):n===a&&(r=Math.max(r,l)),s>c?(s=c,o=d):s===c&&(o=Math.min(o,d)),n>s||n===s&&r>o?null:new or(n,r,s,o)}equalsRange(e){return or.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return or.getEndPosition(this)}static getEndPosition(e){return new U(e.endLineNumber,e.endColumn)}getStartPosition(){return or.getStartPosition(this)}static getStartPosition(e){return new U(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new or(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new or(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return or.collapseToStart(this)}static collapseToStart(e){return new or(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return or.collapseToEnd(this)}static collapseToEnd(e){return new or(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new or(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new or(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new or(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const s=e.startLineNumber|0,o=t.startLineNumber|0;if(s===o){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,d=t.endLineNumber|0;if(c===d){const u=e.endColumn|0,h=t.endColumn|0;return u-h}return c-d}return a-l}return s-o}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}},Be=class Ca extends D{constructor(e,t,n,r){super(e,t,n,r),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=r}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Ca.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new Ca(this.startLineNumber,this.startColumn,e,t):new Ca(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new U(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new U(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new Ca(e,t,this.endLineNumber,this.endColumn):new Ca(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new Ca(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new Ca(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new Ca(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new Ca(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,r,s){return s===0?new Ca(e,t,n,r):new Ca(n,r,e,t)}};const I2=Object.create(null);function k(i,e){if(bs(e)){const t=I2[e];if(t===void 0)throw new Error(`${i} references an unknown codicon: ${e}`);e=t}return I2[i]=e,{id:i}}function tG(){return I2}const me={add:k("add",6e4),plus:k("plus",6e4),gistNew:k("gist-new",6e4),repoCreate:k("repo-create",6e4),lightbulb:k("lightbulb",60001),lightBulb:k("light-bulb",60001),repo:k("repo",60002),repoDelete:k("repo-delete",60002),gistFork:k("gist-fork",60003),repoForked:k("repo-forked",60003),gitPullRequest:k("git-pull-request",60004),gitPullRequestAbandoned:k("git-pull-request-abandoned",60004),recordKeys:k("record-keys",60005),keyboard:k("keyboard",60005),tag:k("tag",60006),tagAdd:k("tag-add",60006),tagRemove:k("tag-remove",60006),gitPullRequestLabel:k("git-pull-request-label",60006),person:k("person",60007),personFollow:k("person-follow",60007),personOutline:k("person-outline",60007),personFilled:k("person-filled",60007),gitBranch:k("git-branch",60008),gitBranchCreate:k("git-branch-create",60008),gitBranchDelete:k("git-branch-delete",60008),sourceControl:k("source-control",60008),mirror:k("mirror",60009),mirrorPublic:k("mirror-public",60009),star:k("star",60010),starAdd:k("star-add",60010),starDelete:k("star-delete",60010),starEmpty:k("star-empty",60010),comment:k("comment",60011),commentAdd:k("comment-add",60011),alert:k("alert",60012),warning:k("warning",60012),search:k("search",60013),searchSave:k("search-save",60013),logOut:k("log-out",60014),signOut:k("sign-out",60014),logIn:k("log-in",60015),signIn:k("sign-in",60015),eye:k("eye",60016),eyeUnwatch:k("eye-unwatch",60016),eyeWatch:k("eye-watch",60016),circleFilled:k("circle-filled",60017),primitiveDot:k("primitive-dot",60017),closeDirty:k("close-dirty",60017),debugBreakpoint:k("debug-breakpoint",60017),debugBreakpointDisabled:k("debug-breakpoint-disabled",60017),debugHint:k("debug-hint",60017),primitiveSquare:k("primitive-square",60018),edit:k("edit",60019),pencil:k("pencil",60019),info:k("info",60020),issueOpened:k("issue-opened",60020),gistPrivate:k("gist-private",60021),gitForkPrivate:k("git-fork-private",60021),lock:k("lock",60021),mirrorPrivate:k("mirror-private",60021),close:k("close",60022),removeClose:k("remove-close",60022),x:k("x",60022),repoSync:k("repo-sync",60023),sync:k("sync",60023),clone:k("clone",60024),desktopDownload:k("desktop-download",60024),beaker:k("beaker",60025),microscope:k("microscope",60025),vm:k("vm",60026),deviceDesktop:k("device-desktop",60026),file:k("file",60027),fileText:k("file-text",60027),more:k("more",60028),ellipsis:k("ellipsis",60028),kebabHorizontal:k("kebab-horizontal",60028),mailReply:k("mail-reply",60029),reply:k("reply",60029),organization:k("organization",60030),organizationFilled:k("organization-filled",60030),organizationOutline:k("organization-outline",60030),newFile:k("new-file",60031),fileAdd:k("file-add",60031),newFolder:k("new-folder",60032),fileDirectoryCreate:k("file-directory-create",60032),trash:k("trash",60033),trashcan:k("trashcan",60033),history:k("history",60034),clock:k("clock",60034),folder:k("folder",60035),fileDirectory:k("file-directory",60035),symbolFolder:k("symbol-folder",60035),logoGithub:k("logo-github",60036),markGithub:k("mark-github",60036),github:k("github",60036),terminal:k("terminal",60037),console:k("console",60037),repl:k("repl",60037),zap:k("zap",60038),symbolEvent:k("symbol-event",60038),error:k("error",60039),stop:k("stop",60039),variable:k("variable",60040),symbolVariable:k("symbol-variable",60040),array:k("array",60042),symbolArray:k("symbol-array",60042),symbolModule:k("symbol-module",60043),symbolPackage:k("symbol-package",60043),symbolNamespace:k("symbol-namespace",60043),symbolObject:k("symbol-object",60043),symbolMethod:k("symbol-method",60044),symbolFunction:k("symbol-function",60044),symbolConstructor:k("symbol-constructor",60044),symbolBoolean:k("symbol-boolean",60047),symbolNull:k("symbol-null",60047),symbolNumeric:k("symbol-numeric",60048),symbolNumber:k("symbol-number",60048),symbolStructure:k("symbol-structure",60049),symbolStruct:k("symbol-struct",60049),symbolParameter:k("symbol-parameter",60050),symbolTypeParameter:k("symbol-type-parameter",60050),symbolKey:k("symbol-key",60051),symbolText:k("symbol-text",60051),symbolReference:k("symbol-reference",60052),goToFile:k("go-to-file",60052),symbolEnum:k("symbol-enum",60053),symbolValue:k("symbol-value",60053),symbolRuler:k("symbol-ruler",60054),symbolUnit:k("symbol-unit",60054),activateBreakpoints:k("activate-breakpoints",60055),archive:k("archive",60056),arrowBoth:k("arrow-both",60057),arrowDown:k("arrow-down",60058),arrowLeft:k("arrow-left",60059),arrowRight:k("arrow-right",60060),arrowSmallDown:k("arrow-small-down",60061),arrowSmallLeft:k("arrow-small-left",60062),arrowSmallRight:k("arrow-small-right",60063),arrowSmallUp:k("arrow-small-up",60064),arrowUp:k("arrow-up",60065),bell:k("bell",60066),bold:k("bold",60067),book:k("book",60068),bookmark:k("bookmark",60069),debugBreakpointConditionalUnverified:k("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:k("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:k("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:k("debug-breakpoint-data-unverified",60072),debugBreakpointData:k("debug-breakpoint-data",60073),debugBreakpointDataDisabled:k("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:k("debug-breakpoint-log-unverified",60074),debugBreakpointLog:k("debug-breakpoint-log",60075),debugBreakpointLogDisabled:k("debug-breakpoint-log-disabled",60075),briefcase:k("briefcase",60076),broadcast:k("broadcast",60077),browser:k("browser",60078),bug:k("bug",60079),calendar:k("calendar",60080),caseSensitive:k("case-sensitive",60081),check:k("check",60082),checklist:k("checklist",60083),chevronDown:k("chevron-down",60084),dropDownButton:k("drop-down-button",60084),chevronLeft:k("chevron-left",60085),chevronRight:k("chevron-right",60086),chevronUp:k("chevron-up",60087),chromeClose:k("chrome-close",60088),chromeMaximize:k("chrome-maximize",60089),chromeMinimize:k("chrome-minimize",60090),chromeRestore:k("chrome-restore",60091),circle:k("circle",60092),circleOutline:k("circle-outline",60092),debugBreakpointUnverified:k("debug-breakpoint-unverified",60092),circleSlash:k("circle-slash",60093),circuitBoard:k("circuit-board",60094),clearAll:k("clear-all",60095),clippy:k("clippy",60096),closeAll:k("close-all",60097),cloudDownload:k("cloud-download",60098),cloudUpload:k("cloud-upload",60099),code:k("code",60100),collapseAll:k("collapse-all",60101),colorMode:k("color-mode",60102),commentDiscussion:k("comment-discussion",60103),compareChanges:k("compare-changes",60157),creditCard:k("credit-card",60105),dash:k("dash",60108),dashboard:k("dashboard",60109),database:k("database",60110),debugContinue:k("debug-continue",60111),debugDisconnect:k("debug-disconnect",60112),debugPause:k("debug-pause",60113),debugRestart:k("debug-restart",60114),debugStart:k("debug-start",60115),debugStepInto:k("debug-step-into",60116),debugStepOut:k("debug-step-out",60117),debugStepOver:k("debug-step-over",60118),debugStop:k("debug-stop",60119),debug:k("debug",60120),deviceCameraVideo:k("device-camera-video",60121),deviceCamera:k("device-camera",60122),deviceMobile:k("device-mobile",60123),diffAdded:k("diff-added",60124),diffIgnored:k("diff-ignored",60125),diffModified:k("diff-modified",60126),diffRemoved:k("diff-removed",60127),diffRenamed:k("diff-renamed",60128),diff:k("diff",60129),discard:k("discard",60130),editorLayout:k("editor-layout",60131),emptyWindow:k("empty-window",60132),exclude:k("exclude",60133),extensions:k("extensions",60134),eyeClosed:k("eye-closed",60135),fileBinary:k("file-binary",60136),fileCode:k("file-code",60137),fileMedia:k("file-media",60138),filePdf:k("file-pdf",60139),fileSubmodule:k("file-submodule",60140),fileSymlinkDirectory:k("file-symlink-directory",60141),fileSymlinkFile:k("file-symlink-file",60142),fileZip:k("file-zip",60143),files:k("files",60144),filter:k("filter",60145),flame:k("flame",60146),foldDown:k("fold-down",60147),foldUp:k("fold-up",60148),fold:k("fold",60149),folderActive:k("folder-active",60150),folderOpened:k("folder-opened",60151),gear:k("gear",60152),gift:k("gift",60153),gistSecret:k("gist-secret",60154),gist:k("gist",60155),gitCommit:k("git-commit",60156),gitCompare:k("git-compare",60157),gitMerge:k("git-merge",60158),githubAction:k("github-action",60159),githubAlt:k("github-alt",60160),globe:k("globe",60161),grabber:k("grabber",60162),graph:k("graph",60163),gripper:k("gripper",60164),heart:k("heart",60165),home:k("home",60166),horizontalRule:k("horizontal-rule",60167),hubot:k("hubot",60168),inbox:k("inbox",60169),issueClosed:k("issue-closed",60324),issueReopened:k("issue-reopened",60171),issues:k("issues",60172),italic:k("italic",60173),jersey:k("jersey",60174),json:k("json",60175),bracket:k("bracket",60175),kebabVertical:k("kebab-vertical",60176),key:k("key",60177),law:k("law",60178),lightbulbAutofix:k("lightbulb-autofix",60179),linkExternal:k("link-external",60180),link:k("link",60181),listOrdered:k("list-ordered",60182),listUnordered:k("list-unordered",60183),liveShare:k("live-share",60184),loading:k("loading",60185),location:k("location",60186),mailRead:k("mail-read",60187),mail:k("mail",60188),markdown:k("markdown",60189),megaphone:k("megaphone",60190),mention:k("mention",60191),milestone:k("milestone",60192),gitPullRequestMilestone:k("git-pull-request-milestone",60192),mortarBoard:k("mortar-board",60193),move:k("move",60194),multipleWindows:k("multiple-windows",60195),mute:k("mute",60196),noNewline:k("no-newline",60197),note:k("note",60198),octoface:k("octoface",60199),openPreview:k("open-preview",60200),package:k("package",60201),paintcan:k("paintcan",60202),pin:k("pin",60203),play:k("play",60204),run:k("run",60204),plug:k("plug",60205),preserveCase:k("preserve-case",60206),preview:k("preview",60207),project:k("project",60208),pulse:k("pulse",60209),question:k("question",60210),quote:k("quote",60211),radioTower:k("radio-tower",60212),reactions:k("reactions",60213),references:k("references",60214),refresh:k("refresh",60215),regex:k("regex",60216),remoteExplorer:k("remote-explorer",60217),remote:k("remote",60218),remove:k("remove",60219),replaceAll:k("replace-all",60220),replace:k("replace",60221),repoClone:k("repo-clone",60222),repoForcePush:k("repo-force-push",60223),repoPull:k("repo-pull",60224),repoPush:k("repo-push",60225),report:k("report",60226),requestChanges:k("request-changes",60227),rocket:k("rocket",60228),rootFolderOpened:k("root-folder-opened",60229),rootFolder:k("root-folder",60230),rss:k("rss",60231),ruby:k("ruby",60232),saveAll:k("save-all",60233),saveAs:k("save-as",60234),save:k("save",60235),screenFull:k("screen-full",60236),screenNormal:k("screen-normal",60237),searchStop:k("search-stop",60238),server:k("server",60240),settingsGear:k("settings-gear",60241),settings:k("settings",60242),shield:k("shield",60243),smiley:k("smiley",60244),sortPrecedence:k("sort-precedence",60245),splitHorizontal:k("split-horizontal",60246),splitVertical:k("split-vertical",60247),squirrel:k("squirrel",60248),starFull:k("star-full",60249),starHalf:k("star-half",60250),symbolClass:k("symbol-class",60251),symbolColor:k("symbol-color",60252),symbolCustomColor:k("symbol-customcolor",60252),symbolConstant:k("symbol-constant",60253),symbolEnumMember:k("symbol-enum-member",60254),symbolField:k("symbol-field",60255),symbolFile:k("symbol-file",60256),symbolInterface:k("symbol-interface",60257),symbolKeyword:k("symbol-keyword",60258),symbolMisc:k("symbol-misc",60259),symbolOperator:k("symbol-operator",60260),symbolProperty:k("symbol-property",60261),wrench:k("wrench",60261),wrenchSubaction:k("wrench-subaction",60261),symbolSnippet:k("symbol-snippet",60262),tasklist:k("tasklist",60263),telescope:k("telescope",60264),textSize:k("text-size",60265),threeBars:k("three-bars",60266),thumbsdown:k("thumbsdown",60267),thumbsup:k("thumbsup",60268),tools:k("tools",60269),triangleDown:k("triangle-down",60270),triangleLeft:k("triangle-left",60271),triangleRight:k("triangle-right",60272),triangleUp:k("triangle-up",60273),twitter:k("twitter",60274),unfold:k("unfold",60275),unlock:k("unlock",60276),unmute:k("unmute",60277),unverified:k("unverified",60278),verified:k("verified",60279),versions:k("versions",60280),vmActive:k("vm-active",60281),vmOutline:k("vm-outline",60282),vmRunning:k("vm-running",60283),watch:k("watch",60284),whitespace:k("whitespace",60285),wholeWord:k("whole-word",60286),window:k("window",60287),wordWrap:k("word-wrap",60288),zoomIn:k("zoom-in",60289),zoomOut:k("zoom-out",60290),listFilter:k("list-filter",60291),listFlat:k("list-flat",60292),listSelection:k("list-selection",60293),selection:k("selection",60293),listTree:k("list-tree",60294),debugBreakpointFunctionUnverified:k("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:k("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:k("debug-breakpoint-function-disabled",60296),debugStackframeActive:k("debug-stackframe-active",60297),circleSmallFilled:k("circle-small-filled",60298),debugStackframeDot:k("debug-stackframe-dot",60298),debugStackframe:k("debug-stackframe",60299),debugStackframeFocused:k("debug-stackframe-focused",60299),debugBreakpointUnsupported:k("debug-breakpoint-unsupported",60300),symbolString:k("symbol-string",60301),debugReverseContinue:k("debug-reverse-continue",60302),debugStepBack:k("debug-step-back",60303),debugRestartFrame:k("debug-restart-frame",60304),callIncoming:k("call-incoming",60306),callOutgoing:k("call-outgoing",60307),menu:k("menu",60308),expandAll:k("expand-all",60309),feedback:k("feedback",60310),gitPullRequestReviewer:k("git-pull-request-reviewer",60310),groupByRefType:k("group-by-ref-type",60311),ungroupByRefType:k("ungroup-by-ref-type",60312),account:k("account",60313),gitPullRequestAssignee:k("git-pull-request-assignee",60313),bellDot:k("bell-dot",60314),debugConsole:k("debug-console",60315),library:k("library",60316),output:k("output",60317),runAll:k("run-all",60318),syncIgnored:k("sync-ignored",60319),pinned:k("pinned",60320),githubInverted:k("github-inverted",60321),debugAlt:k("debug-alt",60305),serverProcess:k("server-process",60322),serverEnvironment:k("server-environment",60323),pass:k("pass",60324),stopCircle:k("stop-circle",60325),playCircle:k("play-circle",60326),record:k("record",60327),debugAltSmall:k("debug-alt-small",60328),vmConnect:k("vm-connect",60329),cloud:k("cloud",60330),merge:k("merge",60331),exportIcon:k("export",60332),graphLeft:k("graph-left",60333),magnet:k("magnet",60334),notebook:k("notebook",60335),redo:k("redo",60336),checkAll:k("check-all",60337),pinnedDirty:k("pinned-dirty",60338),passFilled:k("pass-filled",60339),circleLargeFilled:k("circle-large-filled",60340),circleLarge:k("circle-large",60341),circleLargeOutline:k("circle-large-outline",60341),combine:k("combine",60342),gather:k("gather",60342),table:k("table",60343),variableGroup:k("variable-group",60344),typeHierarchy:k("type-hierarchy",60345),typeHierarchySub:k("type-hierarchy-sub",60346),typeHierarchySuper:k("type-hierarchy-super",60347),gitPullRequestCreate:k("git-pull-request-create",60348),runAbove:k("run-above",60349),runBelow:k("run-below",60350),notebookTemplate:k("notebook-template",60351),debugRerun:k("debug-rerun",60352),workspaceTrusted:k("workspace-trusted",60353),workspaceUntrusted:k("workspace-untrusted",60354),workspaceUnspecified:k("workspace-unspecified",60355),terminalCmd:k("terminal-cmd",60356),terminalDebian:k("terminal-debian",60357),terminalLinux:k("terminal-linux",60358),terminalPowershell:k("terminal-powershell",60359),terminalTmux:k("terminal-tmux",60360),terminalUbuntu:k("terminal-ubuntu",60361),terminalBash:k("terminal-bash",60362),arrowSwap:k("arrow-swap",60363),copy:k("copy",60364),personAdd:k("person-add",60365),filterFilled:k("filter-filled",60366),wand:k("wand",60367),debugLineByLine:k("debug-line-by-line",60368),inspect:k("inspect",60369),layers:k("layers",60370),layersDot:k("layers-dot",60371),layersActive:k("layers-active",60372),compass:k("compass",60373),compassDot:k("compass-dot",60374),compassActive:k("compass-active",60375),azure:k("azure",60376),issueDraft:k("issue-draft",60377),gitPullRequestClosed:k("git-pull-request-closed",60378),gitPullRequestDraft:k("git-pull-request-draft",60379),debugAll:k("debug-all",60380),debugCoverage:k("debug-coverage",60381),runErrors:k("run-errors",60382),folderLibrary:k("folder-library",60383),debugContinueSmall:k("debug-continue-small",60384),beakerStop:k("beaker-stop",60385),graphLine:k("graph-line",60386),graphScatter:k("graph-scatter",60387),pieChart:k("pie-chart",60388),bracketDot:k("bracket-dot",60389),bracketError:k("bracket-error",60390),lockSmall:k("lock-small",60391),azureDevops:k("azure-devops",60392),verifiedFilled:k("verified-filled",60393),newLine:k("newline",60394),layout:k("layout",60395),layoutActivitybarLeft:k("layout-activitybar-left",60396),layoutActivitybarRight:k("layout-activitybar-right",60397),layoutPanelLeft:k("layout-panel-left",60398),layoutPanelCenter:k("layout-panel-center",60399),layoutPanelJustify:k("layout-panel-justify",60400),layoutPanelRight:k("layout-panel-right",60401),layoutPanel:k("layout-panel",60402),layoutSidebarLeft:k("layout-sidebar-left",60403),layoutSidebarRight:k("layout-sidebar-right",60404),layoutStatusbar:k("layout-statusbar",60405),layoutMenubar:k("layout-menubar",60406),layoutCentered:k("layout-centered",60407),layoutSidebarRightOff:k("layout-sidebar-right-off",60416),layoutPanelOff:k("layout-panel-off",60417),layoutSidebarLeftOff:k("layout-sidebar-left-off",60418),target:k("target",60408),indent:k("indent",60409),recordSmall:k("record-small",60410),errorSmall:k("error-small",60411),arrowCircleDown:k("arrow-circle-down",60412),arrowCircleLeft:k("arrow-circle-left",60413),arrowCircleRight:k("arrow-circle-right",60414),arrowCircleUp:k("arrow-circle-up",60415),heartFilled:k("heart-filled",60420),map:k("map",60421),mapFilled:k("map-filled",60422),circleSmall:k("circle-small",60423),bellSlash:k("bell-slash",60424),bellSlashDot:k("bell-slash-dot",60425),commentUnresolved:k("comment-unresolved",60426),gitPullRequestGoToChanges:k("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:k("git-pull-request-new-changes",60428),searchFuzzy:k("search-fuzzy",60429),commentDraft:k("comment-draft",60430),send:k("send",60431),sparkle:k("sparkle",60432),insert:k("insert",60433),mic:k("mic",60434),dialogError:k("dialog-error","error"),dialogWarning:k("dialog-warning","warning"),dialogInfo:k("dialog-info","info"),dialogClose:k("dialog-close","close"),treeItemExpanded:k("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:k("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:k("tree-filter-on-type-off","list-selection"),treeFilterClear:k("tree-filter-clear","close"),treeItemLoading:k("tree-item-loading","loading"),menuSelection:k("menu-selection","check"),menuSubmenu:k("menu-submenu","chevron-right"),menuBarMore:k("menubar-more","more"),scrollbarButtonLeft:k("scrollbar-button-left","triangle-left"),scrollbarButtonRight:k("scrollbar-button-right","triangle-right"),scrollbarButtonUp:k("scrollbar-button-up","triangle-up"),scrollbarButtonDown:k("scrollbar-button-down","triangle-down"),toolBarMore:k("toolbar-more","more"),quickInputBack:k("quick-input-back","arrow-left")};var R2=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};let uTe=class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new H,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),st(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){var n;(n=this._factories.get(e))===null||n===void 0||n.dispose();const r=new hTe(this,e,t);return this._factories.set(e,r),st(()=>{const s=this._factories.get(e);!s||s!==r||(this._factories.delete(e),s.dispose())})}getOrCreate(e){return R2(this,void 0,void 0,function*(){const t=this.get(e);if(t)return t;const n=this._factories.get(e);return!n||n.isResolved?null:(yield n.resolve(),this.get(e))})}isResolved(e){if(this.get(e))return!0;const n=this._factories.get(e);return!!(!n||n.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};class hTe extends q{get isResolved(){return this._isResolved}constructor(e,t,n){super(),this._registry=e,this._languageId=t,this._factory=n,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}resolve(){return R2(this,void 0,void 0,function*(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise})}_create(){return R2(this,void 0,void 0,function*(){const e=yield this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))})}}let A0=class{constructor(e,t,n){this.offset=e,this.type=t,this.language=n,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}};class E3{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}}class cD{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}}var P0;(function(i){const e=new Map;e.set(0,me.symbolMethod),e.set(1,me.symbolFunction),e.set(2,me.symbolConstructor),e.set(3,me.symbolField),e.set(4,me.symbolVariable),e.set(5,me.symbolClass),e.set(6,me.symbolStruct),e.set(7,me.symbolInterface),e.set(8,me.symbolModule),e.set(9,me.symbolProperty),e.set(10,me.symbolEvent),e.set(11,me.symbolOperator),e.set(12,me.symbolUnit),e.set(13,me.symbolValue),e.set(15,me.symbolEnum),e.set(14,me.symbolConstant),e.set(15,me.symbolEnum),e.set(16,me.symbolEnumMember),e.set(17,me.symbolKeyword),e.set(27,me.symbolSnippet),e.set(18,me.symbolText),e.set(19,me.symbolColor),e.set(20,me.symbolFile),e.set(21,me.symbolReference),e.set(22,me.symbolCustomColor),e.set(23,me.symbolFolder),e.set(24,me.symbolTypeParameter),e.set(25,me.account),e.set(26,me.issues);function t(s){let o=e.get(s);return o||(console.info("No codicon found for CompletionItemKind "+s),o=me.symbolProperty),o}i.toIcon=t;const n=new Map;n.set("method",0),n.set("function",1),n.set("constructor",2),n.set("field",3),n.set("variable",4),n.set("class",5),n.set("struct",6),n.set("interface",7),n.set("module",8),n.set("property",9),n.set("event",10),n.set("operator",11),n.set("unit",12),n.set("value",13),n.set("constant",14),n.set("enum",15),n.set("enum-member",16),n.set("enumMember",16),n.set("keyword",17),n.set("snippet",27),n.set("text",18),n.set("color",19),n.set("file",20),n.set("reference",21),n.set("customcolor",22),n.set("folder",23),n.set("type-parameter",24),n.set("typeParameter",24),n.set("account",25),n.set("issue",26);function r(s,o){let a=n.get(s);return typeof a>"u"&&!o&&(a=9),a}i.fromString=r})(P0||(P0={}));var Jd;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(Jd||(Jd={}));class nG{constructor(e,t,n,r){this.range=e,this.text=t,this.completionKind=n,this.isSnippetText=r}equals(e){return D.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}}var Oc;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(Oc||(Oc={}));var M0;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(M0||(M0={}));function fTe(i){return i&&Ye.isUri(i.uri)&&D.isIRange(i.range)&&(D.isIRange(i.originSelectionRange)||D.isIRange(i.targetSelectionRange))}const gTe={17:p("Array","array"),16:p("Boolean","boolean"),4:p("Class","class"),13:p("Constant","constant"),8:p("Constructor","constructor"),9:p("Enum","enumeration"),21:p("EnumMember","enumeration member"),23:p("Event","event"),7:p("Field","field"),0:p("File","file"),11:p("Function","function"),10:p("Interface","interface"),19:p("Key","key"),5:p("Method","method"),1:p("Module","module"),2:p("Namespace","namespace"),20:p("Null","null"),15:p("Number","number"),18:p("Object","object"),24:p("Operator","operator"),3:p("Package","package"),6:p("Property","property"),14:p("String","string"),22:p("Struct","struct"),25:p("TypeParameter","type parameter"),12:p("Variable","variable")};function pTe(i,e){return p("symbolAriaLabel","{0} ({1})",i,gTe[e])}var CT;(function(i){const e=new Map;e.set(0,me.symbolFile),e.set(1,me.symbolModule),e.set(2,me.symbolNamespace),e.set(3,me.symbolPackage),e.set(4,me.symbolClass),e.set(5,me.symbolMethod),e.set(6,me.symbolProperty),e.set(7,me.symbolField),e.set(8,me.symbolConstructor),e.set(9,me.symbolEnum),e.set(10,me.symbolInterface),e.set(11,me.symbolFunction),e.set(12,me.symbolVariable),e.set(13,me.symbolConstant),e.set(14,me.symbolString),e.set(15,me.symbolNumber),e.set(16,me.symbolBoolean),e.set(17,me.symbolArray),e.set(18,me.symbolObject),e.set(19,me.symbolKey),e.set(20,me.symbolNull),e.set(21,me.symbolEnumMember),e.set(22,me.symbolStruct),e.set(23,me.symbolEvent),e.set(24,me.symbolOperator),e.set(25,me.symbolTypeParameter);function t(n){let r=e.get(n);return r||(console.info("No codicon found for SymbolKind "+n),r=me.symbolProperty),r}i.toIcon=t})(CT||(CT={}));class ms{static fromValue(e){switch(e){case"comment":return ms.Comment;case"imports":return ms.Imports;case"region":return ms.Region}return new ms(e)}constructor(e){this.value=e}}ms.Comment=new ms("comment");ms.Imports=new ms("imports");ms.Region=new ms("region");var E2;(function(i){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}i.is=e})(E2||(E2={}));var wT;(function(i){i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(wT||(wT={}));class mTe{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const Gn=new uTe;var N2;(function(i){i[i.Unknown=0]="Unknown",i[i.Disabled=1]="Disabled",i[i.Enabled=2]="Enabled"})(N2||(N2={}));var A2;(function(i){i[i.Invoke=1]="Invoke",i[i.Auto=2]="Auto"})(A2||(A2={}));var P2;(function(i){i[i.None=0]="None",i[i.KeepWhitespace=1]="KeepWhitespace",i[i.InsertAsSnippet=4]="InsertAsSnippet"})(P2||(P2={}));var M2;(function(i){i[i.Method=0]="Method",i[i.Function=1]="Function",i[i.Constructor=2]="Constructor",i[i.Field=3]="Field",i[i.Variable=4]="Variable",i[i.Class=5]="Class",i[i.Struct=6]="Struct",i[i.Interface=7]="Interface",i[i.Module=8]="Module",i[i.Property=9]="Property",i[i.Event=10]="Event",i[i.Operator=11]="Operator",i[i.Unit=12]="Unit",i[i.Value=13]="Value",i[i.Constant=14]="Constant",i[i.Enum=15]="Enum",i[i.EnumMember=16]="EnumMember",i[i.Keyword=17]="Keyword",i[i.Text=18]="Text",i[i.Color=19]="Color",i[i.File=20]="File",i[i.Reference=21]="Reference",i[i.Customcolor=22]="Customcolor",i[i.Folder=23]="Folder",i[i.TypeParameter=24]="TypeParameter",i[i.User=25]="User",i[i.Issue=26]="Issue",i[i.Snippet=27]="Snippet"})(M2||(M2={}));var O2;(function(i){i[i.Deprecated=1]="Deprecated"})(O2||(O2={}));var F2;(function(i){i[i.Invoke=0]="Invoke",i[i.TriggerCharacter=1]="TriggerCharacter",i[i.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(F2||(F2={}));var B2;(function(i){i[i.EXACT=0]="EXACT",i[i.ABOVE=1]="ABOVE",i[i.BELOW=2]="BELOW"})(B2||(B2={}));var W2;(function(i){i[i.NotSet=0]="NotSet",i[i.ContentFlush=1]="ContentFlush",i[i.RecoverFromMarkers=2]="RecoverFromMarkers",i[i.Explicit=3]="Explicit",i[i.Paste=4]="Paste",i[i.Undo=5]="Undo",i[i.Redo=6]="Redo"})(W2||(W2={}));var V2;(function(i){i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(V2||(V2={}));var H2;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(H2||(H2={}));var U2;(function(i){i[i.None=0]="None",i[i.Keep=1]="Keep",i[i.Brackets=2]="Brackets",i[i.Advanced=3]="Advanced",i[i.Full=4]="Full"})(U2||(U2={}));var j2;(function(i){i[i.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",i[i.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",i[i.accessibilitySupport=2]="accessibilitySupport",i[i.accessibilityPageSize=3]="accessibilityPageSize",i[i.ariaLabel=4]="ariaLabel",i[i.ariaRequired=5]="ariaRequired",i[i.autoClosingBrackets=6]="autoClosingBrackets",i[i.autoClosingComments=7]="autoClosingComments",i[i.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",i[i.autoClosingDelete=9]="autoClosingDelete",i[i.autoClosingOvertype=10]="autoClosingOvertype",i[i.autoClosingQuotes=11]="autoClosingQuotes",i[i.autoIndent=12]="autoIndent",i[i.automaticLayout=13]="automaticLayout",i[i.autoSurround=14]="autoSurround",i[i.bracketPairColorization=15]="bracketPairColorization",i[i.guides=16]="guides",i[i.codeLens=17]="codeLens",i[i.codeLensFontFamily=18]="codeLensFontFamily",i[i.codeLensFontSize=19]="codeLensFontSize",i[i.colorDecorators=20]="colorDecorators",i[i.colorDecoratorsLimit=21]="colorDecoratorsLimit",i[i.columnSelection=22]="columnSelection",i[i.comments=23]="comments",i[i.contextmenu=24]="contextmenu",i[i.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",i[i.cursorBlinking=26]="cursorBlinking",i[i.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",i[i.cursorStyle=28]="cursorStyle",i[i.cursorSurroundingLines=29]="cursorSurroundingLines",i[i.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",i[i.cursorWidth=31]="cursorWidth",i[i.disableLayerHinting=32]="disableLayerHinting",i[i.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",i[i.domReadOnly=34]="domReadOnly",i[i.dragAndDrop=35]="dragAndDrop",i[i.dropIntoEditor=36]="dropIntoEditor",i[i.emptySelectionClipboard=37]="emptySelectionClipboard",i[i.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",i[i.extraEditorClassName=39]="extraEditorClassName",i[i.fastScrollSensitivity=40]="fastScrollSensitivity",i[i.find=41]="find",i[i.fixedOverflowWidgets=42]="fixedOverflowWidgets",i[i.folding=43]="folding",i[i.foldingStrategy=44]="foldingStrategy",i[i.foldingHighlight=45]="foldingHighlight",i[i.foldingImportsByDefault=46]="foldingImportsByDefault",i[i.foldingMaximumRegions=47]="foldingMaximumRegions",i[i.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",i[i.fontFamily=49]="fontFamily",i[i.fontInfo=50]="fontInfo",i[i.fontLigatures=51]="fontLigatures",i[i.fontSize=52]="fontSize",i[i.fontWeight=53]="fontWeight",i[i.fontVariations=54]="fontVariations",i[i.formatOnPaste=55]="formatOnPaste",i[i.formatOnType=56]="formatOnType",i[i.glyphMargin=57]="glyphMargin",i[i.gotoLocation=58]="gotoLocation",i[i.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",i[i.hover=60]="hover",i[i.inDiffEditor=61]="inDiffEditor",i[i.inlineSuggest=62]="inlineSuggest",i[i.letterSpacing=63]="letterSpacing",i[i.lightbulb=64]="lightbulb",i[i.lineDecorationsWidth=65]="lineDecorationsWidth",i[i.lineHeight=66]="lineHeight",i[i.lineNumbers=67]="lineNumbers",i[i.lineNumbersMinChars=68]="lineNumbersMinChars",i[i.linkedEditing=69]="linkedEditing",i[i.links=70]="links",i[i.matchBrackets=71]="matchBrackets",i[i.minimap=72]="minimap",i[i.mouseStyle=73]="mouseStyle",i[i.mouseWheelScrollSensitivity=74]="mouseWheelScrollSensitivity",i[i.mouseWheelZoom=75]="mouseWheelZoom",i[i.multiCursorMergeOverlapping=76]="multiCursorMergeOverlapping",i[i.multiCursorModifier=77]="multiCursorModifier",i[i.multiCursorPaste=78]="multiCursorPaste",i[i.multiCursorLimit=79]="multiCursorLimit",i[i.occurrencesHighlight=80]="occurrencesHighlight",i[i.overviewRulerBorder=81]="overviewRulerBorder",i[i.overviewRulerLanes=82]="overviewRulerLanes",i[i.padding=83]="padding",i[i.pasteAs=84]="pasteAs",i[i.parameterHints=85]="parameterHints",i[i.peekWidgetDefaultFocus=86]="peekWidgetDefaultFocus",i[i.definitionLinkOpensInPeek=87]="definitionLinkOpensInPeek",i[i.quickSuggestions=88]="quickSuggestions",i[i.quickSuggestionsDelay=89]="quickSuggestionsDelay",i[i.readOnly=90]="readOnly",i[i.readOnlyMessage=91]="readOnlyMessage",i[i.renameOnType=92]="renameOnType",i[i.renderControlCharacters=93]="renderControlCharacters",i[i.renderFinalNewline=94]="renderFinalNewline",i[i.renderLineHighlight=95]="renderLineHighlight",i[i.renderLineHighlightOnlyWhenFocus=96]="renderLineHighlightOnlyWhenFocus",i[i.renderValidationDecorations=97]="renderValidationDecorations",i[i.renderWhitespace=98]="renderWhitespace",i[i.revealHorizontalRightPadding=99]="revealHorizontalRightPadding",i[i.roundedSelection=100]="roundedSelection",i[i.rulers=101]="rulers",i[i.scrollbar=102]="scrollbar",i[i.scrollBeyondLastColumn=103]="scrollBeyondLastColumn",i[i.scrollBeyondLastLine=104]="scrollBeyondLastLine",i[i.scrollPredominantAxis=105]="scrollPredominantAxis",i[i.selectionClipboard=106]="selectionClipboard",i[i.selectionHighlight=107]="selectionHighlight",i[i.selectOnLineNumbers=108]="selectOnLineNumbers",i[i.showFoldingControls=109]="showFoldingControls",i[i.showUnused=110]="showUnused",i[i.snippetSuggestions=111]="snippetSuggestions",i[i.smartSelect=112]="smartSelect",i[i.smoothScrolling=113]="smoothScrolling",i[i.stickyScroll=114]="stickyScroll",i[i.stickyTabStops=115]="stickyTabStops",i[i.stopRenderingLineAfter=116]="stopRenderingLineAfter",i[i.suggest=117]="suggest",i[i.suggestFontSize=118]="suggestFontSize",i[i.suggestLineHeight=119]="suggestLineHeight",i[i.suggestOnTriggerCharacters=120]="suggestOnTriggerCharacters",i[i.suggestSelection=121]="suggestSelection",i[i.tabCompletion=122]="tabCompletion",i[i.tabIndex=123]="tabIndex",i[i.unicodeHighlighting=124]="unicodeHighlighting",i[i.unusualLineTerminators=125]="unusualLineTerminators",i[i.useShadowDOM=126]="useShadowDOM",i[i.useTabStops=127]="useTabStops",i[i.wordBreak=128]="wordBreak",i[i.wordSeparators=129]="wordSeparators",i[i.wordWrap=130]="wordWrap",i[i.wordWrapBreakAfterCharacters=131]="wordWrapBreakAfterCharacters",i[i.wordWrapBreakBeforeCharacters=132]="wordWrapBreakBeforeCharacters",i[i.wordWrapColumn=133]="wordWrapColumn",i[i.wordWrapOverride1=134]="wordWrapOverride1",i[i.wordWrapOverride2=135]="wordWrapOverride2",i[i.wrappingIndent=136]="wrappingIndent",i[i.wrappingStrategy=137]="wrappingStrategy",i[i.showDeprecated=138]="showDeprecated",i[i.inlayHints=139]="inlayHints",i[i.editorClassName=140]="editorClassName",i[i.pixelRatio=141]="pixelRatio",i[i.tabFocusMode=142]="tabFocusMode",i[i.layoutInfo=143]="layoutInfo",i[i.wrappingInfo=144]="wrappingInfo",i[i.defaultColorDecorators=145]="defaultColorDecorators",i[i.colorDecoratorsActivatedOn=146]="colorDecoratorsActivatedOn",i[i.inlineCompletionsAccessibilityVerbose=147]="inlineCompletionsAccessibilityVerbose"})(j2||(j2={}));var z2;(function(i){i[i.TextDefined=0]="TextDefined",i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(z2||(z2={}));var $2;(function(i){i[i.LF=0]="LF",i[i.CRLF=1]="CRLF"})($2||($2={}));var K2;(function(i){i[i.Left=1]="Left",i[i.Right=2]="Right"})(K2||(K2={}));var q2;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(q2||(q2={}));var G2;(function(i){i[i.Both=0]="Both",i[i.Right=1]="Right",i[i.Left=2]="Left",i[i.None=3]="None"})(G2||(G2={}));var Z2;(function(i){i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(Z2||(Z2={}));var X2;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(X2||(X2={}));var Y2;(function(i){i[i.DependsOnKbLayout=-1]="DependsOnKbLayout",i[i.Unknown=0]="Unknown",i[i.Backspace=1]="Backspace",i[i.Tab=2]="Tab",i[i.Enter=3]="Enter",i[i.Shift=4]="Shift",i[i.Ctrl=5]="Ctrl",i[i.Alt=6]="Alt",i[i.PauseBreak=7]="PauseBreak",i[i.CapsLock=8]="CapsLock",i[i.Escape=9]="Escape",i[i.Space=10]="Space",i[i.PageUp=11]="PageUp",i[i.PageDown=12]="PageDown",i[i.End=13]="End",i[i.Home=14]="Home",i[i.LeftArrow=15]="LeftArrow",i[i.UpArrow=16]="UpArrow",i[i.RightArrow=17]="RightArrow",i[i.DownArrow=18]="DownArrow",i[i.Insert=19]="Insert",i[i.Delete=20]="Delete",i[i.Digit0=21]="Digit0",i[i.Digit1=22]="Digit1",i[i.Digit2=23]="Digit2",i[i.Digit3=24]="Digit3",i[i.Digit4=25]="Digit4",i[i.Digit5=26]="Digit5",i[i.Digit6=27]="Digit6",i[i.Digit7=28]="Digit7",i[i.Digit8=29]="Digit8",i[i.Digit9=30]="Digit9",i[i.KeyA=31]="KeyA",i[i.KeyB=32]="KeyB",i[i.KeyC=33]="KeyC",i[i.KeyD=34]="KeyD",i[i.KeyE=35]="KeyE",i[i.KeyF=36]="KeyF",i[i.KeyG=37]="KeyG",i[i.KeyH=38]="KeyH",i[i.KeyI=39]="KeyI",i[i.KeyJ=40]="KeyJ",i[i.KeyK=41]="KeyK",i[i.KeyL=42]="KeyL",i[i.KeyM=43]="KeyM",i[i.KeyN=44]="KeyN",i[i.KeyO=45]="KeyO",i[i.KeyP=46]="KeyP",i[i.KeyQ=47]="KeyQ",i[i.KeyR=48]="KeyR",i[i.KeyS=49]="KeyS",i[i.KeyT=50]="KeyT",i[i.KeyU=51]="KeyU",i[i.KeyV=52]="KeyV",i[i.KeyW=53]="KeyW",i[i.KeyX=54]="KeyX",i[i.KeyY=55]="KeyY",i[i.KeyZ=56]="KeyZ",i[i.Meta=57]="Meta",i[i.ContextMenu=58]="ContextMenu",i[i.F1=59]="F1",i[i.F2=60]="F2",i[i.F3=61]="F3",i[i.F4=62]="F4",i[i.F5=63]="F5",i[i.F6=64]="F6",i[i.F7=65]="F7",i[i.F8=66]="F8",i[i.F9=67]="F9",i[i.F10=68]="F10",i[i.F11=69]="F11",i[i.F12=70]="F12",i[i.F13=71]="F13",i[i.F14=72]="F14",i[i.F15=73]="F15",i[i.F16=74]="F16",i[i.F17=75]="F17",i[i.F18=76]="F18",i[i.F19=77]="F19",i[i.F20=78]="F20",i[i.F21=79]="F21",i[i.F22=80]="F22",i[i.F23=81]="F23",i[i.F24=82]="F24",i[i.NumLock=83]="NumLock",i[i.ScrollLock=84]="ScrollLock",i[i.Semicolon=85]="Semicolon",i[i.Equal=86]="Equal",i[i.Comma=87]="Comma",i[i.Minus=88]="Minus",i[i.Period=89]="Period",i[i.Slash=90]="Slash",i[i.Backquote=91]="Backquote",i[i.BracketLeft=92]="BracketLeft",i[i.Backslash=93]="Backslash",i[i.BracketRight=94]="BracketRight",i[i.Quote=95]="Quote",i[i.OEM_8=96]="OEM_8",i[i.IntlBackslash=97]="IntlBackslash",i[i.Numpad0=98]="Numpad0",i[i.Numpad1=99]="Numpad1",i[i.Numpad2=100]="Numpad2",i[i.Numpad3=101]="Numpad3",i[i.Numpad4=102]="Numpad4",i[i.Numpad5=103]="Numpad5",i[i.Numpad6=104]="Numpad6",i[i.Numpad7=105]="Numpad7",i[i.Numpad8=106]="Numpad8",i[i.Numpad9=107]="Numpad9",i[i.NumpadMultiply=108]="NumpadMultiply",i[i.NumpadAdd=109]="NumpadAdd",i[i.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",i[i.NumpadSubtract=111]="NumpadSubtract",i[i.NumpadDecimal=112]="NumpadDecimal",i[i.NumpadDivide=113]="NumpadDivide",i[i.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",i[i.ABNT_C1=115]="ABNT_C1",i[i.ABNT_C2=116]="ABNT_C2",i[i.AudioVolumeMute=117]="AudioVolumeMute",i[i.AudioVolumeUp=118]="AudioVolumeUp",i[i.AudioVolumeDown=119]="AudioVolumeDown",i[i.BrowserSearch=120]="BrowserSearch",i[i.BrowserHome=121]="BrowserHome",i[i.BrowserBack=122]="BrowserBack",i[i.BrowserForward=123]="BrowserForward",i[i.MediaTrackNext=124]="MediaTrackNext",i[i.MediaTrackPrevious=125]="MediaTrackPrevious",i[i.MediaStop=126]="MediaStop",i[i.MediaPlayPause=127]="MediaPlayPause",i[i.LaunchMediaPlayer=128]="LaunchMediaPlayer",i[i.LaunchMail=129]="LaunchMail",i[i.LaunchApp2=130]="LaunchApp2",i[i.Clear=131]="Clear",i[i.MAX_VALUE=132]="MAX_VALUE"})(Y2||(Y2={}));var Q2;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(Q2||(Q2={}));var J2;(function(i){i[i.Unnecessary=1]="Unnecessary",i[i.Deprecated=2]="Deprecated"})(J2||(J2={}));var eA;(function(i){i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter"})(eA||(eA={}));var tA;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.TEXTAREA=1]="TEXTAREA",i[i.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",i[i.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",i[i.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",i[i.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",i[i.CONTENT_TEXT=6]="CONTENT_TEXT",i[i.CONTENT_EMPTY=7]="CONTENT_EMPTY",i[i.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",i[i.CONTENT_WIDGET=9]="CONTENT_WIDGET",i[i.OVERVIEW_RULER=10]="OVERVIEW_RULER",i[i.SCROLLBAR=11]="SCROLLBAR",i[i.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",i[i.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(tA||(tA={}));var nA;(function(i){i[i.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",i[i.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",i[i.TOP_CENTER=2]="TOP_CENTER"})(nA||(nA={}));var iA;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(iA||(iA={}));var rA;(function(i){i[i.Left=0]="Left",i[i.Right=1]="Right",i[i.None=2]="None",i[i.LeftOfInjectedText=3]="LeftOfInjectedText",i[i.RightOfInjectedText=4]="RightOfInjectedText"})(rA||(rA={}));var sA;(function(i){i[i.Off=0]="Off",i[i.On=1]="On",i[i.Relative=2]="Relative",i[i.Interval=3]="Interval",i[i.Custom=4]="Custom"})(sA||(sA={}));var oA;(function(i){i[i.None=0]="None",i[i.Text=1]="Text",i[i.Blocks=2]="Blocks"})(oA||(oA={}));var aA;(function(i){i[i.Smooth=0]="Smooth",i[i.Immediate=1]="Immediate"})(aA||(aA={}));var lA;(function(i){i[i.Auto=1]="Auto",i[i.Hidden=2]="Hidden",i[i.Visible=3]="Visible"})(lA||(lA={}));var cA;(function(i){i[i.LTR=0]="LTR",i[i.RTL=1]="RTL"})(cA||(cA={}));var dA;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(dA||(dA={}));var uA;(function(i){i[i.File=0]="File",i[i.Module=1]="Module",i[i.Namespace=2]="Namespace",i[i.Package=3]="Package",i[i.Class=4]="Class",i[i.Method=5]="Method",i[i.Property=6]="Property",i[i.Field=7]="Field",i[i.Constructor=8]="Constructor",i[i.Enum=9]="Enum",i[i.Interface=10]="Interface",i[i.Function=11]="Function",i[i.Variable=12]="Variable",i[i.Constant=13]="Constant",i[i.String=14]="String",i[i.Number=15]="Number",i[i.Boolean=16]="Boolean",i[i.Array=17]="Array",i[i.Object=18]="Object",i[i.Key=19]="Key",i[i.Null=20]="Null",i[i.EnumMember=21]="EnumMember",i[i.Struct=22]="Struct",i[i.Event=23]="Event",i[i.Operator=24]="Operator",i[i.TypeParameter=25]="TypeParameter"})(uA||(uA={}));var hA;(function(i){i[i.Deprecated=1]="Deprecated"})(hA||(hA={}));var fA;(function(i){i[i.Hidden=0]="Hidden",i[i.Blink=1]="Blink",i[i.Smooth=2]="Smooth",i[i.Phase=3]="Phase",i[i.Expand=4]="Expand",i[i.Solid=5]="Solid"})(fA||(fA={}));var gA;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(gA||(gA={}));var pA;(function(i){i[i.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",i[i.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",i[i.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",i[i.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(pA||(pA={}));var mA;(function(i){i[i.None=0]="None",i[i.Same=1]="Same",i[i.Indent=2]="Indent",i[i.DeepIndent=3]="DeepIndent"})(mA||(mA={}));let AC=class{static chord(e,t){return Oi(e,t)}};AC.CtrlCmd=2048;AC.Shift=1024;AC.Alt=512;AC.WinCtrl=256;function iG(){return{editor:void 0,languages:void 0,CancellationTokenSource:vi,Emitter:H,KeyCode:Y2,KeyMod:AC,Position:U,Range:D,Selection:Be,SelectionDirection:cA,MarkerSeverity:Q2,MarkerTag:J2,Uri:Ye,Token:A0}}class _Te{constructor(e){this.fn=e,this.lastCache=void 0,this.lastArgKey=void 0}get(e){const t=JSON.stringify(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this.fn(e)),this.lastCache}}class p8{get cachedValues(){return this._map}constructor(e){this.fn=e,this._map=new Map}get(e){if(this._map.has(e))return this._map.get(e);const t=this.fn(e);return this._map.set(e,t),t}}class _f{constructor(e){this.executor=e,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}var j_;function rG(i){return!i||typeof i!="string"?!0:i.trim().length===0}const bTe=/{(\d+)}/g;function jg(i,...e){return e.length===0?i:i.replace(bTe,function(t,n){const r=parseInt(n,10);return isNaN(r)||r<0||r>=e.length?t:e[r]})}function ST(i){return i.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function No(i){return i.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function vTe(i,e=" "){const t=PC(i,e);return sG(t,e)}function PC(i,e){if(!i||!e)return i;const t=e.length;if(t===0||i.length===0)return i;let n=0;for(;i.indexOf(e,n)===n;)n=n+t;return i.substring(n)}function sG(i,e){if(!i||!e)return i;const t=e.length,n=i.length;if(t===0||n===0)return i;let r=n,s=-1;for(;s=i.lastIndexOf(e,r-1),!(s===-1||s+t!==r);){if(s===0)return"";r=s}return i.substring(0,r)}function yTe(i){return i.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function CTe(i){return i.replace(/\*/g,"")}function oG(i,e,t={}){if(!i)throw new Error("Cannot create regex from empty string");e||(i=No(i)),t.wholeWord&&(/\B/.test(i.charAt(0))||(i="\\b"+i),/\B/.test(i.charAt(i.length-1))||(i=i+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(i,n)}function wTe(i){return i.source==="^"||i.source==="^$"||i.source==="$"||i.source==="^\\s*$"?!1:!!(i.exec("")&&i.lastIndex===0)}function Kc(i){return i.split(/\r\n|\r|\n/)}function ns(i){for(let e=0,t=i.length;e<t;e++){const n=i.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function pn(i,e=0,t=i.length){for(let n=e;n<t;n++){const r=i.charCodeAt(n);if(r!==32&&r!==9)return i.substring(e,n)}return i.substring(e,t)}function Dl(i,e=i.length-1){for(let t=e;t>=0;t--){const n=i.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function O0(i,e){return i<e?-1:i>e?1:0}function N3(i,e,t=0,n=i.length,r=0,s=e.length){for(;t<n&&r<s;t++,r++){const l=i.charCodeAt(t),c=e.charCodeAt(r);if(l<c)return-1;if(l>c)return 1}const o=n-t,a=s-r;return o<a?-1:o>a?1:0}function _A(i,e){return MC(i,e,0,i.length,0,e.length)}function MC(i,e,t=0,n=i.length,r=0,s=e.length){for(;t<n&&r<s;t++,r++){let l=i.charCodeAt(t),c=e.charCodeAt(r);if(l===c)continue;if(l>=128||c>=128)return N3(i.toLowerCase(),e.toLowerCase(),t,n,r,s);eh(l)&&(l-=32),eh(c)&&(c-=32);const d=l-c;if(d!==0)return d}const o=n-t,a=s-r;return o<a?-1:o>a?1:0}function Pw(i){return i>=48&&i<=57}function eh(i){return i>=97&&i<=122}function lc(i){return i>=65&&i<=90}function Pm(i,e){return i.length===e.length&&MC(i,e)===0}function A3(i,e){const t=e.length;return e.length>i.length?!1:MC(i,e,0,t)===0}function zg(i,e){const t=Math.min(i.length,e.length);let n;for(n=0;n<t;n++)if(i.charCodeAt(n)!==e.charCodeAt(n))return n;return t}function xT(i,e){const t=Math.min(i.length,e.length);let n;const r=i.length-1,s=e.length-1;for(n=0;n<t;n++)if(i.charCodeAt(r-n)!==e.charCodeAt(s-n))return n;return t}function zi(i){return 55296<=i&&i<=56319}function $g(i){return 56320<=i&&i<=57343}function P3(i,e){return(i-55296<<10)+(e-56320)+65536}function TT(i,e,t){const n=i.charCodeAt(t);if(zi(n)&&t+1<e){const r=i.charCodeAt(t+1);if($g(r))return P3(n,r)}return n}function STe(i,e){const t=i.charCodeAt(e-1);if($g(t)&&e>1){const n=i.charCodeAt(e-2);if(zi(n))return P3(n,t)}return t}class M3{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=STe(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=TT(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class kT{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new M3(e,t)}nextGraphemeLength(){const e=th.getInstance(),t=this._iterator,n=t.offset;let r=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,o=e.getGraphemeBreakType(t.nextCodePoint());if(m8(r,o)){t.setOffset(s);break}r=o}return t.offset-n}prevGraphemeLength(){const e=th.getInstance(),t=this._iterator,n=t.offset;let r=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,o=e.getGraphemeBreakType(t.prevCodePoint());if(m8(o,r)){t.setOffset(s);break}r=o}return n-t.offset}eol(){return this._iterator.eol()}}function O3(i,e){return new kT(i,e).nextGraphemeLength()}function aG(i,e){return new kT(i,e).prevGraphemeLength()}function xTe(i,e){e>0&&$g(i.charCodeAt(e))&&e--;const t=e+O3(i,e);return[t-aG(i,t),t]}let MR;function TTe(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function z_(i){return MR||(MR=TTe()),MR.test(i)}const kTe=/^[\t\n\r\x20-\x7E]*$/;function OC(i){return kTe.test(i)}const lG=/[\u2028\u2029]/;function cG(i){return lG.test(i)}function Bh(i){return i>=11904&&i<=55215||i>=63744&&i<=64255||i>=65281&&i<=65374}function F3(i){return i>=127462&&i<=127487||i===8986||i===8987||i===9200||i===9203||i>=9728&&i<=10175||i===11088||i===11093||i>=127744&&i<=128591||i>=128640&&i<=128764||i>=128992&&i<=129008||i>=129280&&i<=129535||i>=129648&&i<=129782}const LTe=String.fromCharCode(65279);function B3(i){return!!(i&&i.length>0&&i.charCodeAt(0)===65279)}function DTe(i,e=!1){return i?(e&&(i=i.replace(/\\./g,"")),i.toLowerCase()!==i):!1}function dG(i){return i=i%(2*26),i<26?String.fromCharCode(97+i):String.fromCharCode(65+i-26)}function m8(i,e){return i===0?e!==5&&e!==7:i===2&&e===3?!1:i===4||i===2||i===3||e===4||e===2||e===3?!0:!(i===8&&(e===8||e===9||e===11||e===12)||(i===11||i===9)&&(e===9||e===10)||(i===12||i===10)&&e===10||e===5||e===13||e===7||i===1||i===13&&e===14||i===6&&e===6)}class th{static getInstance(){return th._INSTANCE||(th._INSTANCE=new th),th._INSTANCE}constructor(){this._data=ITe()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,n=t.length/3;let r=1;for(;r<=n;)if(e<t[3*r])r=2*r;else if(e>t[3*r+1])r=2*r+1;else return t[3*r+2];return 0}}th._INSTANCE=null;function ITe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function RTe(i,e){if(i===0)return 0;const t=ETe(i,e);if(t!==void 0)return t;const n=new M3(e,i);return n.prevCodePoint(),n.offset}function ETe(i,e){const t=new M3(e,i);let n=t.prevCodePoint();for(;NTe(n)||n===65039||n===8419;){if(t.offset===0)return;n=t.prevCodePoint()}if(!F3(n))return;let r=t.offset;return r>0&&t.prevCodePoint()===8205&&(r=t.offset),r}function NTe(i){return 127995<=i&&i<=127999}const uG=" ";class Kg{static getInstance(e){return j_.cache.get(Array.from(e))}static getLocales(){return j_._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}j_=Kg;Kg.ambiguousCharacterData=new _f(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'));Kg.cache=new _Te(i=>{function e(c){const d=new Map;for(let u=0;u<c.length;u+=2)d.set(c[u],c[u+1]);return d}function t(c,d){const u=new Map(c);for(const[h,f]of d)u.set(h,f);return u}function n(c,d){if(!c)return d;const u=new Map;for(const[h,f]of c)d.has(h)&&u.set(h,f);return u}const r=j_.ambiguousCharacterData.value;let s=i.filter(c=>!c.startsWith("_")&&c in r);s.length===0&&(s=["_default"]);let o;for(const c of s){const d=e(r[c]);o=n(o,d)}const a=e(r._common),l=t(a,o);return new j_(l)});Kg._locales=new _f(()=>Object.keys(j_.ambiguousCharacterData.value).filter(i=>!i.startsWith("_")));class Fc{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(Fc.getRawData())),this._data}static isInvisibleCharacter(e){return Fc.getData().has(e)}static get codePoints(){return Fc.getData()}}Fc._data=void 0;class bA{constructor(){this._zoomFactor=1}getZoomFactor(){return this._zoomFactor}}bA.INSTANCE=new bA;class ATe extends q{constructor(){super(),this._onDidChange=this._register(new H),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(!0),this._mediaQueryList=null,this._handleChange(!1)}_handleChange(e){var t;(t=this._mediaQueryList)===null||t===void 0||t.removeEventListener("change",this._listener),this._mediaQueryList=window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),e&&this._onDidChange.fire()}}class PTe extends q{get value(){return this._value}constructor(){super(),this._onDidChange=this._register(new H),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio();const e=this._register(new ATe);this._register(e.onDidChange(()=>{this._value=this._getPixelRatio(),this._onDidChange.fire(this._value)}))}_getPixelRatio(){const e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}}class MTe{constructor(){this._pixelRatioMonitor=null}_getOrCreatePixelRatioMonitor(){return this._pixelRatioMonitor||(this._pixelRatioMonitor=new PTe),this._pixelRatioMonitor}get value(){return this._getOrCreatePixelRatioMonitor().value}get onDidChange(){return this._getOrCreatePixelRatioMonitor().onDidChange}}function hG(i,e){typeof i=="string"&&(i=window.matchMedia(i)),i.addEventListener("change",e)}const F0=new MTe;function OTe(){return bA.INSTANCE.getZoomFactor()}const $1=navigator.userAgent,aa=$1.indexOf("Firefox")>=0,Cg=$1.indexOf("AppleWebKit")>=0,W3=$1.indexOf("Chrome")>=0,hu=!W3&&$1.indexOf("Safari")>=0,fG=!W3&&!hu&&Cg;$1.indexOf("Electron/")>=0;const _8=$1.indexOf("Android")>=0;let hx=!1;if(window.matchMedia){const i=window.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=window.matchMedia("(display-mode: fullscreen)");hx=i.matches,hG(i,({matches:t})=>{hx&&e.matches||(hx=t)})}function FTe(){return hx}class gG{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=nl(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=nl(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=nl(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=nl(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=nl(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=nl(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=nl(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingLeft(e){const t=nl(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=nl(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=nl(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=nl(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function nl(i){return typeof i=="number"?`${i}px`:i}function tn(i){return new gG(i)}function Ir(i,e){i instanceof gG?(i.setFontFamily(e.getMassagedFontFamily()),i.setFontWeight(e.fontWeight),i.setFontSize(e.fontSize),i.setFontFeatureSettings(e.fontFeatureSettings),i.setFontVariationSettings(e.fontVariationSettings),i.setLineHeight(e.lineHeight),i.setLetterSpacing(e.letterSpacing)):(i.style.fontFamily=e.getMassagedFontFamily(),i.style.fontWeight=e.fontWeight,i.style.fontSize=e.fontSize+"px",i.style.fontFeatureSettings=e.fontFeatureSettings,i.style.fontVariationSettings=e.fontVariationSettings,i.style.lineHeight=e.lineHeight+"px",i.style.letterSpacing=e.letterSpacing+"px")}class BTe{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class V3{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");Ir(t,this._bareFontInfo),e.appendChild(t);const n=document.createElement("div");Ir(n,this._bareFontInfo),n.style.fontWeight="bold",e.appendChild(n);const r=document.createElement("div");Ir(r,this._bareFontInfo),r.style.fontStyle="italic",e.appendChild(r);const s=[];for(const o of this._requests){let a;o.type===0&&(a=t),o.type===2&&(a=n),o.type===1&&(a=r),a.appendChild(document.createElement("br"));const l=document.createElement("span");V3._render(l,o),a.appendChild(l),s.push(l)}this._container=e,this._testElements=s}static _render(e,t){if(t.chr===" "){let n=" ";for(let r=0;r<8;r++)n+=n;e.innerText=n}else{let n=t.chr;for(let r=0;r<8;r++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const n=this._requests[e],r=this._testElements[e];n.fulfill(r.offsetWidth/256)}}}function WTe(i,e){new V3(i,e).read()}const Go=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new H,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(i){i=Math.min(Math.max(-5,i),20),this._zoomLevel!==i&&(this._zoomLevel=i,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},VTe=Ot?1.5:1.35,OR=8;class wg{static createFromValidatedSettings(e,t,n){const r=e.get(49),s=e.get(53),o=e.get(52),a=e.get(51),l=e.get(54),c=e.get(66),d=e.get(63);return wg._create(r,s,o,a,l,c,d,t,n)}static _create(e,t,n,r,s,o,a,l,c){o===0?o=VTe*n:o<OR&&(o=o*n),o=Math.round(o),o<OR&&(o=OR);const d=1+(c?0:Go.getZoomLevel()*.1);return n*=d,o*=d,s===vl.TRANSLATE&&(t==="normal"||t==="bold"?s=vl.OFF:(s=`'wght' ${parseInt(t,10)}`,t="normal")),new wg({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:r,fontVariationSettings:s,lineHeight:o,letterSpacing:a})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=Qs.fontFamily,t=wg._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const HTe=2;class vA extends wg{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=HTe,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}class UTe extends q{constructor(){super(),this._onDidChange=this._register(new H),this.onDidChange=this._onDidChange.event,this._cache=new b8,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(window.clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache=new b8,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=window.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const n of e)n.isTrusted||(t=!0,this._cache.remove(n));t&&this._onDidChange.fire()}readFontInfo(e){if(!this._cache.has(e)){let t=this._actualReadFontInfo(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new vA({pixelRatio:F0.value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}_createRequest(e,t,n,r){const s=new BTe(e,t);return n.push(s),r==null||r.push(s),s}_actualReadFontInfo(e){const t=[],n=[],r=this._createRequest("n",0,t,n),s=this._createRequest("ｍ",0,t,null),o=this._createRequest(" ",0,t,n),a=this._createRequest("0",0,t,n),l=this._createRequest("1",0,t,n),c=this._createRequest("2",0,t,n),d=this._createRequest("3",0,t,n),u=this._createRequest("4",0,t,n),h=this._createRequest("5",0,t,n),f=this._createRequest("6",0,t,n),g=this._createRequest("7",0,t,n),m=this._createRequest("8",0,t,n),y=this._createRequest("9",0,t,n),b=this._createRequest("→",0,t,n),v=this._createRequest("￫",0,t,null),C=this._createRequest("·",0,t,n),w=this._createRequest(String.fromCharCode(11825),0,t,null),S="|/-_ilm%";for(let B=0,V=S.length;B<V;B++)this._createRequest(S.charAt(B),0,t,n),this._createRequest(S.charAt(B),1,t,n),this._createRequest(S.charAt(B),2,t,n);WTe(e,t);const L=Math.max(a.width,l.width,c.width,d.width,u.width,h.width,f.width,g.width,m.width,y.width);let T=e.fontFeatureSettings===Co.OFF;const I=n[0].width;for(let B=1,V=n.length;T&&B<V;B++){const F=I-n[B].width;if(F<-.001||F>.001){T=!1;break}}let R=!0;return T&&v.width!==I&&(R=!1),v.width>b.width&&(R=!1),new vA({pixelRatio:F0.value,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,fontVariationSettings:e.fontVariationSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:T,typicalHalfwidthCharacterWidth:r.width,typicalFullwidthCharacterWidth:s.width,canUseHalfwidthRightwardsArrow:R,spaceWidth:o.width,middotWidth:C.width,wsmiddotWidth:w.width,maxDigitWidth:L},!0)}}class b8{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}const yA=new UTe;var Sl;(function(i){i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=e})(Sl||(Sl={}));const rt=Lt("instantiationService");function jTe(i,e,t){e[Sl.DI_TARGET]===e?e[Sl.DI_DEPENDENCIES].push({id:i,index:t}):(e[Sl.DI_DEPENDENCIES]=[{id:i,index:t}],e[Sl.DI_TARGET]=e)}function Lt(i){if(Sl.serviceIds.has(i))return Sl.serviceIds.get(i);const e=function(t,n,r){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");jTe(e,t,r)};return e.toString=()=>i,Sl.serviceIds.set(i,e),e}const Jt=Lt("codeEditorService"),zn=Lt("modelService"),Vs=Lt("textModelService");var $_=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class vs extends q{constructor(e,t="",n="",r=!0,s){super(),this._onDidChange=this._register(new H),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=r,this._actionCallback=s}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return $_(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}}class K_ extends q{constructor(){super(...arguments),this._onWillRun=this._register(new H),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new H),this.onDidRun=this._onDidRun.event}run(e,t){return $_(this,void 0,void 0,function*(){if(!e.enabled)return;this._onWillRun.fire({action:e});let n;try{yield this.runAction(e,t)}catch(r){n=r}this._onDidRun.fire({action:e,error:n})})}runAction(e,t){return $_(this,void 0,void 0,function*(){yield e.run(t)})}}class rr{constructor(){this.id=rr.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(const n of e)n.length&&(t.length?t=[...t,new rr,...n]:t=n);return t}run(){return $_(this,void 0,void 0,function*(){})}}rr.ID="vs.actions.separator";class q_{get actions(){return this._actions}constructor(e,t,n,r){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=r,this._actions=n}run(){return $_(this,void 0,void 0,function*(){})}}class dD extends vs{constructor(){super(dD.ID,p("submenu.empty","(empty)"),void 0,!1)}}dD.ID="vs.actions.empty";function u_(i){var e,t;return{id:i.id,label:i.label,class:void 0,enabled:(e=i.enabled)!==null&&e!==void 0?e:!0,checked:(t=i.checked)!==null&&t!==void 0?t:!1,run:(...n)=>$_(this,void 0,void 0,function*(){return i.run(...n)}),tooltip:i.label}}var CA;(function(i){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}i.isThemeColor=e})(CA||(CA={}));var Qe;(function(i){i.iconNameSegment="[A-Za-z0-9]+",i.iconNameExpression="[A-Za-z0-9-]+",i.iconModifierExpression="~[A-Za-z]+",i.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${i.iconNameExpression})(${i.iconModifierExpression})?$`);function t(h){const f=e.exec(h.id);if(!f)return t(me.error);const[,g,m]=f,y=["codicon","codicon-"+g];return m&&y.push("codicon-modifier-"+m.substring(1)),y}i.asClassNameArray=t;function n(h){return t(h).join(" ")}i.asClassName=n;function r(h){return"."+t(h).join(".")}i.asCSSSelector=r;function s(h){return h&&typeof h=="object"&&typeof h.id=="string"&&(typeof h.color>"u"||CA.isThemeColor(h.color))}i.isThemeIcon=s;const o=new RegExp(`^\\$\\((${i.iconNameExpression}(?:${i.iconModifierExpression})?)\\)$`);function a(h){const f=o.exec(h);if(!f)return;const[,g]=f;return{id:g}}i.fromString=a;function l(h){return{id:h}}i.fromId=l;function c(h,f){let g=h.id;const m=g.lastIndexOf("~");return m!==-1&&(g=g.substring(0,m)),f&&(g=`${g}~${f}`),{id:g}}i.modify=c;function d(h){const f=h.id.lastIndexOf("~");if(f!==-1)return h.id.substring(f+1)}i.getModifier=d;function u(h,f){var g,m;return h.id===f.id&&((g=h.color)===null||g===void 0?void 0:g.id)===((m=f.color)===null||m===void 0?void 0:m.id)}i.isEqual=u})(Qe||(Qe={}));const oi=Lt("commandService"),Bt=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new H,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(i,e){if(!i)throw new Error("invalid command");if(typeof i=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:i,handler:e})}if(i.description){const o=[];for(const l of i.description.args)o.push(l.constraint);const a=i.handler;i.handler=function(l,...c){return TSe(c,o),a(l,...c)}}const{id:t}=i;let n=this._commands.get(t);n||(n=new ps,this._commands.set(t,n));const r=n.unshift(i),s=st(()=>{r();const o=this._commands.get(t);o!=null&&o.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),s}registerCommandAlias(i,e){return Bt.registerCommand(i,(t,...n)=>t.get(oi).executeCommand(e,...n))}getCommand(i){const e=this._commands.get(i);if(!(!e||e.isEmpty()))return St.first(e)}getCommands(){const i=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&i.set(e,t)}return i}};Bt.registerCommand("noop",()=>{});function FR(...i){switch(i.length){case 1:return p("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",i[0]);case 2:return p("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",i[0],i[1]);case 3:return p("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",i[0],i[1],i[2]);default:return}}const zTe=p("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),$Te=p("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");let Xf=class wA{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw x3(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(FR("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(FR("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(FR("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,n=this._input.substring(this._start,this._current),r={type:19,offset:this._start,lexeme:n};this._errors.push({offset:t,lexeme:n,additionalInfo:e}),this._tokens.push(r)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),n=wA._keywords.get(t);n?this._addToken(n):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(zTe);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,n=!1;for(;;){if(e>=this._input.length){this._current=e,this._error($Te);return}const s=this._input.charCodeAt(e);if(t)t=!1;else if(s===47&&!n){e++;break}else s===91?n=!0:s===92?t=!0:s===93&&(n=!1);e++}for(;e<this._input.length&&wA._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const r=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:r,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}};Xf._regexFlags=new Set(["i","g","s","m","y","u"].map(i=>i.charCodeAt(0)));Xf._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);const Gr=new Map;Gr.set("false",!1);Gr.set("true",!0);Gr.set("isMac",Ot);Gr.set("isLinux",os);Gr.set("isWindows",Ar);Gr.set("isWeb",gf);Gr.set("isMacNative",Ot&&!gf);Gr.set("isEdge",HSe);Gr.set("isFirefox",WSe);Gr.set("isChrome",Oq);Gr.set("isSafari",VSe);const KTe=Object.prototype.hasOwnProperty,qTe={regexParsingWithErrorRecovery:!0},GTe=p("contextkey.parser.error.emptyString","Empty context key expression"),ZTe=p("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),XTe=p("contextkey.parser.error.noInAfterNot","'in' after 'not'."),v8=p("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),YTe=p("contextkey.parser.error.unexpectedToken","Unexpected token"),QTe=p("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),JTe=p("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),eke=p("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");let pG=class tv{constructor(e=qTe){this._config=e,this._scanner=new Xf,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(e===""){this._parsingErrors.push({message:GTe,offset:0,lexeme:"",additionalInfo:ZTe});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const t=this._expr();if(!this._isAtEnd()){const n=this._peek(),r=n.type===17?QTe:void 0;throw this._parsingErrors.push({message:YTe,offset:n.offset,lexeme:Xf.getLexeme(n),additionalInfo:r}),tv._parseError}return t}catch(t){if(t!==tv._parseError)throw t;return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return e.length===1?e[0]:re.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return e.length===1?e[0]:re.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),ys.INSTANCE;case 12:return this._advance(),Os.INSTANCE;case 0:{this._advance();const t=this._expr();return this._consume(1,v8),t==null?void 0:t.negate()}case 17:return this._advance(),Np.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),re.true();case 12:return this._advance(),re.false();case 0:{this._advance();const t=this._expr();return this._consume(1,v8),t}case 17:{const t=e.lexeme;if(this._advance(),this._matchOne(9)){const r=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),r.type!==10)throw this._errExpectedButGot("REGEX",r);const s=r.lexeme,o=s.lastIndexOf("/"),a=o===s.length-1?void 0:this._removeFlagsGY(s.substring(o+1));let l;try{l=new RegExp(s.substring(1,o),a)}catch{throw this._errExpectedButGot("REGEX",r)}return B0.create(t,l)}switch(r.type){case 10:case 19:{const s=[r.lexeme];this._advance();let o=this._peek(),a=0;for(let h=0;h<r.lexeme.length;h++)r.lexeme.charCodeAt(h)===40?a++:r.lexeme.charCodeAt(h)===41&&a--;for(;!this._isAtEnd()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let h=0;h<o.lexeme.length;h++)o.lexeme.charCodeAt(h)===40?a++:r.lexeme.charCodeAt(h)===41&&a--}if(a<0)break;s.push(Xf.getLexeme(o)),this._advance(),o=this._peek()}const l=s.join(""),c=l.lastIndexOf("/"),d=c===l.length-1?void 0:this._removeFlagsGY(l.substring(c+1));let u;try{u=new RegExp(l.substring(1,c),d)}catch{throw this._errExpectedButGot("REGEX",r)}return re.regex(t,u)}case 18:{const s=r.lexeme;this._advance();let o=null;if(!rG(s)){const a=s.indexOf("/"),l=s.lastIndexOf("/");if(a!==l&&a>=0){const c=s.slice(a+1,l),d=s[l+1]==="i"?"i":"";try{o=new RegExp(c,d)}catch{throw this._errExpectedButGot("REGEX",r)}}}if(o===null)throw this._errExpectedButGot("REGEX",r);return B0.create(t,o)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,XTe);const r=this._value();return re.notIn(t,r)}switch(this._peek().type){case 3:{this._advance();const r=this._value();if(this._previous().type===18)return re.equals(t,r);switch(r){case"true":return re.has(t);case"false":return re.not(t);default:return re.equals(t,r)}}case 4:{this._advance();const r=this._value();if(this._previous().type===18)return re.notEquals(t,r);switch(r){case"true":return re.not(t);case"false":return re.has(t);default:return re.notEquals(t,r)}}case 5:return this._advance(),_D.create(t,this._value());case 6:return this._advance(),bD.create(t,this._value());case 7:return this._advance(),pD.create(t,this._value());case 8:return this._advance(),mD.create(t,this._value());case 13:return this._advance(),re.in(t,this._value());default:return re.has(t)}}case 20:throw this._parsingErrors.push({message:JTe,offset:e.offset,lexeme:"",additionalInfo:eke}),tv._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,n){const r=p("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,Xf.getLexeme(t)),s=t.offset,o=Xf.getLexeme(t);return this._parsingErrors.push({message:r,offset:s,lexeme:o,additionalInfo:n}),tv._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}};pG._parseError=new Error;class re{static false(){return ys.INSTANCE}static true(){return Os.INSTANCE}static has(e){return Ep.create(e)}static equals(e,t){return K1.create(e,t)}static notEquals(e,t){return fD.create(e,t)}static regex(e,t){return B0.create(e,t)}static in(e,t){return uD.create(e,t)}static notIn(e,t){return hD.create(e,t)}static not(e){return Np.create(e)}static and(...e){return dg.create(e,null,!0)}static or(...e){return Od.create(e,null,!0)}static deserialize(e){return e==null?void 0:this._parser.parse(e)}}re._parser=new pG({regexParsingWithErrorRecovery:!1});function tke(i,e){const t=i?i.substituteConstants():void 0,n=e?e.substituteConstants():void 0;return!t&&!n?!0:!t||!n?!1:t.equals(n)}function Av(i,e){return i.cmp(e)}class ys{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return Os.INSTANCE}}ys.INSTANCE=new ys;class Os{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return ys.INSTANCE}}Os.INSTANCE=new Os;class Ep{static create(e,t=null){const n=Gr.get(e);return typeof n=="boolean"?n?Os.INSTANCE:ys.INSTANCE:new Ep(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:_G(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Gr.get(this.key);return typeof e=="boolean"?e?Os.INSTANCE:ys.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=Np.create(this.key,this)),this.negated}}class K1{static create(e,t,n=null){if(typeof t=="boolean")return t?Ep.create(e,n):Np.create(e,n);const r=Gr.get(e);return typeof r=="boolean"?t===(r?"true":"false")?Os.INSTANCE:ys.INSTANCE:new K1(e,t,n)}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:Ap(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Gr.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Os.INSTANCE:ys.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=fD.create(this.key,this.value,this)),this.negated}}class uD{static create(e,t){return new uD(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:Ap(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.includes(n):typeof n=="string"&&typeof t=="object"&&t!==null?KTe.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=hD.create(this.key,this.valueKey)),this.negated}}class hD{static create(e,t){return new hD(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=uD.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class fD{static create(e,t,n=null){if(typeof t=="boolean")return t?Np.create(e,n):Ep.create(e,n);const r=Gr.get(e);return typeof r=="boolean"?t===(r?"true":"false")?ys.INSTANCE:Os.INSTANCE:new fD(e,t,n)}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:Ap(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Gr.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?ys.INSTANCE:Os.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=K1.create(this.key,this.value,this)),this.negated}}class Np{static create(e,t=null){const n=Gr.get(e);return typeof n=="boolean"?n?ys.INSTANCE:Os.INSTANCE:new Np(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:_G(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Gr.get(this.key);return typeof e=="boolean"?e?ys.INSTANCE:Os.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Ep.create(this.key,this)),this.negated}}function gD(i,e){if(typeof i=="string"){const t=parseFloat(i);isNaN(t)||(i=t)}return typeof i=="string"||typeof i=="number"?e(i):ys.INSTANCE}class pD{static create(e,t,n=null){return gD(t,r=>new pD(e,r,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:Ap(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=bD.create(this.key,this.value,this)),this.negated}}class mD{static create(e,t,n=null){return gD(t,r=>new mD(e,r,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:Ap(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=_D.create(this.key,this.value,this)),this.negated}}class _D{static create(e,t,n=null){return gD(t,r=>new _D(e,r,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:Ap(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=mD.create(this.key,this.value,this)),this.negated}}class bD{static create(e,t,n=null){return gD(t,r=>new bD(e,r,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:Ap(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=pD.create(this.key,this.value,this)),this.negated}}class B0{static create(e,t){return new B0(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=H3.create(this)),this.negated}}class H3{static create(e){return new H3(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}function mG(i){let e=null;for(let t=0,n=i.length;t<n;t++){const r=i[t].substituteConstants();if(i[t]!==r&&e===null){e=[];for(let s=0;s<t;s++)e[s]=i[s]}e!==null&&(e[t]=r)}return e===null?i:e}class dg{static create(e,t,n){return dg._normalizeArr(e,t,n)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const r=Av(this.expr[t],e.expr[t]);if(r!==0)return r}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=mG(this.expr);return e===this.expr?this:dg.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,n){const r=[];let s=!1;for(const o of e)if(o){if(o.type===1){s=!0;continue}if(o.type===0)return ys.INSTANCE;if(o.type===6){r.push(...o.expr);continue}r.push(o)}if(r.length===0&&s)return Os.INSTANCE;if(r.length!==0){if(r.length===1)return r[0];r.sort(Av);for(let o=1;o<r.length;o++)r[o-1].equals(r[o])&&(r.splice(o,1),o--);if(r.length===1)return r[0];for(;r.length>1;){const o=r[r.length-1];if(o.type!==9)break;r.pop();const a=r.pop(),l=r.length===0,c=Od.create(o.expr.map(d=>dg.create([d,a],null,n)),null,l);c&&(r.push(c),r.sort(Av))}if(r.length===1)return r[0];if(n){for(let o=0;o<r.length;o++)for(let a=o+1;a<r.length;a++)if(r[o].negate().equals(r[a]))return ys.INSTANCE;if(r.length===1)return r[0]}return new dg(r,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=Od.create(e,this,!0)}return this.negated}}class Od{static create(e,t,n){return Od._normalizeArr(e,t,n)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const r=Av(this.expr[t],e.expr[t]);if(r!==0)return r}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=mG(this.expr);return e===this.expr?this:Od.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let r=[],s=!1;if(e){for(let o=0,a=e.length;o<a;o++){const l=e[o];if(l){if(l.type===0){s=!0;continue}if(l.type===1)return Os.INSTANCE;if(l.type===9){r=r.concat(l.expr);continue}r.push(l)}}if(r.length===0&&s)return ys.INSTANCE;r.sort(Av)}if(r.length!==0){if(r.length===1)return r[0];for(let o=1;o<r.length;o++)r[o-1].equals(r[o])&&(r.splice(o,1),o--);if(r.length===1)return r[0];if(n){for(let o=0;o<r.length;o++)for(let a=o+1;a<r.length;a++)if(r[o].negate().equals(r[a]))return Os.INSTANCE;if(r.length===1)return r[0]}return new Od(r,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),r=[];for(const s of C8(t))for(const o of C8(n))r.push(dg.create([s,o],null,!1));e.unshift(Od.create(r,null,!1))}this.negated=Od.create(e,this,!0)}return this.negated}}class Ne extends Ep{static all(){return Ne._info.values()}constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?Ne._info.push(Object.assign(Object.assign({},n),{key:e})):n!==!0&&Ne._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return K1.create(this.key,e)}}Ne._info=[];const ot=Lt("contextKeyService");function _G(i,e){return i<e?-1:i>e?1:0}function Ap(i,e,t,n){return i<t?-1:i>t?1:e<n?-1:e>n?1:0}function SA(i,e){if(i.type===0||e.type===1)return!0;if(i.type===9)return e.type===9?y8(i.expr,e.expr):!1;if(e.type===9){for(const t of e.expr)if(SA(i,t))return!0;return!1}if(i.type===6){if(e.type===6)return y8(e.expr,i.expr);for(const t of i.expr)if(SA(t,e))return!0;return!1}return i.equals(e)}function y8(i,e){let t=0,n=0;for(;t<i.length&&n<e.length;){const r=i[t].cmp(e[n]);if(r<0)return!1;r===0&&t++,n++}return t===i.length}function C8(i){return i.type===9?i.expr:[i]}function xA(i,e){if(typeof i=="number"){if(i===0)return null;const t=(i&65535)>>>0,n=(i&4294901760)>>>16;return n!==0?new BR([Mw(t,e),Mw(n,e)]):new BR([Mw(t,e)])}else{const t=[];for(let n=0;n<i.length;n++)t.push(Mw(i[n],e));return new BR(t)}}function Mw(i,e){const t=!!(i&2048),n=!!(i&256),r=e===2?n:t,s=!!(i&1024),o=!!(i&512),a=e===2?t:n,l=i&255;return new fu(r,s,o,a,l)}class fu{constructor(e,t,n,r,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=r,this.keyCode=s}equals(e){return e instanceof fu&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class BR{constructor(e){if(e.length===0)throw ia("chords");this.chords=e}}class nke{constructor(e,t,n,r,s,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=r,this.keyLabel=s,this.keyAriaLabel=o}}class ike{}function WR(i,e){if(!i)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function vD(i,e="Unreachable"){throw new Error(e)}function W0(i){if(!i()){debugger;i(),ut(new Ti("Assertion Failed"))}}function bG(i,e){let t=0;for(;t<i.length-1;){const n=i[t],r=i[t+1];if(!e(n,r))return!1;t++}return!0}class rke{constructor(){this.data=new Map}add(e,t){WR(bs(e)),WR(gs(t)),WR(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const qn=new rke;class U3{constructor(){this._coreKeybindings=new ps,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(To===1){if(e&&e.win)return e.win}else if(To===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=U3.bindToCurrentPlatform(e),n=new ae;if(t&&t.primary){const r=xA(t.primary,To);r&&n.add(this._registerDefaultKeybinding(r,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let r=0,s=t.secondary.length;r<s;r++){const o=t.secondary[r],a=xA(o,To);a&&n.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-r-1,e.when))}return n}registerCommandAndKeybindingRule(e){return Pa(this.registerKeybindingRule(e),Bt.registerCommand(e))}_registerDefaultKeybinding(e,t,n,r,s,o){const a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:o,weight1:r,weight2:s,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,st(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(oke)),this._cachedMergedKeybindings.slice(0)}}const Fs=new U3,ske={EditorModes:"platform.keybindingsRegistry"};qn.add(ske.EditorModes,Fs);function oke(i,e){if(i.weight1!==e.weight1)return i.weight1-e.weight1;if(i.command&&e.command){if(i.command<e.command)return-1;if(i.command>e.command)return 1}return i.weight2-e.weight2}var ake=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},w8=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},lke=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t},fx;function Mm(i){return i.command!==void 0}function cke(i){return i.submenu!==void 0}class E{constructor(e){if(E._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);E._instances.set(e,this),this.id=e}}E._instances=new Map;E.CommandPalette=new E("CommandPalette");E.DebugBreakpointsContext=new E("DebugBreakpointsContext");E.DebugCallStackContext=new E("DebugCallStackContext");E.DebugConsoleContext=new E("DebugConsoleContext");E.DebugVariablesContext=new E("DebugVariablesContext");E.DebugWatchContext=new E("DebugWatchContext");E.DebugToolBar=new E("DebugToolBar");E.DebugToolBarStop=new E("DebugToolBarStop");E.EditorContext=new E("EditorContext");E.SimpleEditorContext=new E("SimpleEditorContext");E.EditorContent=new E("EditorContent");E.EditorLineNumberContext=new E("EditorLineNumberContext");E.EditorContextCopy=new E("EditorContextCopy");E.EditorContextPeek=new E("EditorContextPeek");E.EditorContextShare=new E("EditorContextShare");E.EditorTitle=new E("EditorTitle");E.EditorTitleRun=new E("EditorTitleRun");E.EditorTitleContext=new E("EditorTitleContext");E.EditorTitleContextShare=new E("EditorTitleContextShare");E.EmptyEditorGroup=new E("EmptyEditorGroup");E.EmptyEditorGroupContext=new E("EmptyEditorGroupContext");E.EditorTabsBarContext=new E("EditorTabsBarContext");E.ExplorerContext=new E("ExplorerContext");E.ExplorerContextShare=new E("ExplorerContextShare");E.ExtensionContext=new E("ExtensionContext");E.GlobalActivity=new E("GlobalActivity");E.CommandCenter=new E("CommandCenter");E.CommandCenterCenter=new E("CommandCenterCenter");E.LayoutControlMenuSubmenu=new E("LayoutControlMenuSubmenu");E.LayoutControlMenu=new E("LayoutControlMenu");E.MenubarMainMenu=new E("MenubarMainMenu");E.MenubarAppearanceMenu=new E("MenubarAppearanceMenu");E.MenubarDebugMenu=new E("MenubarDebugMenu");E.MenubarEditMenu=new E("MenubarEditMenu");E.MenubarCopy=new E("MenubarCopy");E.MenubarFileMenu=new E("MenubarFileMenu");E.MenubarGoMenu=new E("MenubarGoMenu");E.MenubarHelpMenu=new E("MenubarHelpMenu");E.MenubarLayoutMenu=new E("MenubarLayoutMenu");E.MenubarNewBreakpointMenu=new E("MenubarNewBreakpointMenu");E.PanelAlignmentMenu=new E("PanelAlignmentMenu");E.PanelPositionMenu=new E("PanelPositionMenu");E.MenubarPreferencesMenu=new E("MenubarPreferencesMenu");E.MenubarRecentMenu=new E("MenubarRecentMenu");E.MenubarSelectionMenu=new E("MenubarSelectionMenu");E.MenubarShare=new E("MenubarShare");E.MenubarSwitchEditorMenu=new E("MenubarSwitchEditorMenu");E.MenubarSwitchGroupMenu=new E("MenubarSwitchGroupMenu");E.MenubarTerminalMenu=new E("MenubarTerminalMenu");E.MenubarViewMenu=new E("MenubarViewMenu");E.MenubarHomeMenu=new E("MenubarHomeMenu");E.OpenEditorsContext=new E("OpenEditorsContext");E.OpenEditorsContextShare=new E("OpenEditorsContextShare");E.ProblemsPanelContext=new E("ProblemsPanelContext");E.SCMChangeContext=new E("SCMChangeContext");E.SCMResourceContext=new E("SCMResourceContext");E.SCMResourceContextShare=new E("SCMResourceContextShare");E.SCMResourceFolderContext=new E("SCMResourceFolderContext");E.SCMResourceGroupContext=new E("SCMResourceGroupContext");E.SCMSourceControl=new E("SCMSourceControl");E.SCMTitle=new E("SCMTitle");E.SearchContext=new E("SearchContext");E.SearchActionMenu=new E("SearchActionContext");E.StatusBarWindowIndicatorMenu=new E("StatusBarWindowIndicatorMenu");E.StatusBarRemoteIndicatorMenu=new E("StatusBarRemoteIndicatorMenu");E.StickyScrollContext=new E("StickyScrollContext");E.TestItem=new E("TestItem");E.TestItemGutter=new E("TestItemGutter");E.TestMessageContext=new E("TestMessageContext");E.TestMessageContent=new E("TestMessageContent");E.TestPeekElement=new E("TestPeekElement");E.TestPeekTitle=new E("TestPeekTitle");E.TouchBarContext=new E("TouchBarContext");E.TitleBarContext=new E("TitleBarContext");E.TitleBarTitleContext=new E("TitleBarTitleContext");E.TunnelContext=new E("TunnelContext");E.TunnelPrivacy=new E("TunnelPrivacy");E.TunnelProtocol=new E("TunnelProtocol");E.TunnelPortInline=new E("TunnelInline");E.TunnelTitle=new E("TunnelTitle");E.TunnelLocalAddressInline=new E("TunnelLocalAddressInline");E.TunnelOriginInline=new E("TunnelOriginInline");E.ViewItemContext=new E("ViewItemContext");E.ViewContainerTitle=new E("ViewContainerTitle");E.ViewContainerTitleContext=new E("ViewContainerTitleContext");E.ViewTitle=new E("ViewTitle");E.ViewTitleContext=new E("ViewTitleContext");E.CommentEditorActions=new E("CommentEditorActions");E.CommentThreadTitle=new E("CommentThreadTitle");E.CommentThreadActions=new E("CommentThreadActions");E.CommentThreadAdditionalActions=new E("CommentThreadAdditionalActions");E.CommentThreadTitleContext=new E("CommentThreadTitleContext");E.CommentThreadCommentContext=new E("CommentThreadCommentContext");E.CommentTitle=new E("CommentTitle");E.CommentActions=new E("CommentActions");E.InteractiveToolbar=new E("InteractiveToolbar");E.InteractiveCellTitle=new E("InteractiveCellTitle");E.InteractiveCellDelete=new E("InteractiveCellDelete");E.InteractiveCellExecute=new E("InteractiveCellExecute");E.InteractiveInputExecute=new E("InteractiveInputExecute");E.NotebookToolbar=new E("NotebookToolbar");E.NotebookStickyScrollContext=new E("NotebookStickyScrollContext");E.NotebookCellTitle=new E("NotebookCellTitle");E.NotebookCellDelete=new E("NotebookCellDelete");E.NotebookCellInsert=new E("NotebookCellInsert");E.NotebookCellBetween=new E("NotebookCellBetween");E.NotebookCellListTop=new E("NotebookCellTop");E.NotebookCellExecute=new E("NotebookCellExecute");E.NotebookCellExecutePrimary=new E("NotebookCellExecutePrimary");E.NotebookDiffCellInputTitle=new E("NotebookDiffCellInputTitle");E.NotebookDiffCellMetadataTitle=new E("NotebookDiffCellMetadataTitle");E.NotebookDiffCellOutputsTitle=new E("NotebookDiffCellOutputsTitle");E.NotebookOutputToolbar=new E("NotebookOutputToolbar");E.NotebookEditorLayoutConfigure=new E("NotebookEditorLayoutConfigure");E.NotebookKernelSource=new E("NotebookKernelSource");E.BulkEditTitle=new E("BulkEditTitle");E.BulkEditContext=new E("BulkEditContext");E.TimelineItemContext=new E("TimelineItemContext");E.TimelineTitle=new E("TimelineTitle");E.TimelineTitleContext=new E("TimelineTitleContext");E.TimelineFilterSubMenu=new E("TimelineFilterSubMenu");E.AccountsContext=new E("AccountsContext");E.PanelTitle=new E("PanelTitle");E.AuxiliaryBarTitle=new E("AuxiliaryBarTitle");E.TerminalInstanceContext=new E("TerminalInstanceContext");E.TerminalEditorInstanceContext=new E("TerminalEditorInstanceContext");E.TerminalNewDropdownContext=new E("TerminalNewDropdownContext");E.TerminalTabContext=new E("TerminalTabContext");E.TerminalTabEmptyAreaContext=new E("TerminalTabEmptyAreaContext");E.WebviewContext=new E("WebviewContext");E.InlineCompletionsActions=new E("InlineCompletionsActions");E.NewFile=new E("NewFile");E.MergeInput1Toolbar=new E("MergeToolbar1Toolbar");E.MergeInput2Toolbar=new E("MergeToolbar2Toolbar");E.MergeBaseToolbar=new E("MergeBaseToolbar");E.MergeInputResultToolbar=new E("MergeToolbarResultToolbar");E.InlineSuggestionToolbar=new E("InlineSuggestionToolbar");E.ChatContext=new E("ChatContext");E.ChatCodeBlock=new E("ChatCodeblock");E.ChatMessageTitle=new E("ChatMessageTitle");E.ChatExecute=new E("ChatExecute");E.ChatInputSide=new E("ChatInputSide");E.AccessibleView=new E("AccessibleView");const dd=Lt("menuService");class Fd{static for(e){let t=this._all.get(e);return t||(t=new Fd(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const n of e)n instanceof Fd&&t.add(n.id);return t}constructor(e){this.id=e,this.has=t=>t===e}}Fd._all=new Map;const pr=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new Uxe({merge:Fd.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(i){return this._commands.set(i.id,i),this._onDidChangeMenu.fire(Fd.for(E.CommandPalette)),st(()=>{this._commands.delete(i.id)&&this._onDidChangeMenu.fire(Fd.for(E.CommandPalette))})}getCommand(i){return this._commands.get(i)}getCommands(){const i=new Map;return this._commands.forEach((e,t)=>i.set(t,e)),i}appendMenuItem(i,e){let t=this._menuItems.get(i);t||(t=new ps,this._menuItems.set(i,t));const n=t.push(e);return this._onDidChangeMenu.fire(Fd.for(i)),st(()=>{n(),this._onDidChangeMenu.fire(Fd.for(i))})}appendMenuItems(i){const e=new ae;for(const{id:t,item:n}of i)e.add(this.appendMenuItem(t,n));return e}getMenuItems(i){let e;return this._menuItems.has(i)?e=[...this._menuItems.get(i)]:e=[],i===E.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(i){const e=new Set;for(const t of i)Mm(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||i.push({command:t})})}};class V0 extends q_{constructor(e,t,n){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,n,"submenu"),this.item=e,this.hideActions=t}}let Wa=fx=class{static label(e,t){return t!=null&&t.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}constructor(e,t,n,r,s,o){var a,l;this.hideActions=r,this._commandService=o,this.id=e.id,this.label=fx.label(e,n),this.tooltip=(l=typeof e.tooltip=="string"?e.tooltip:(a=e.tooltip)===null||a===void 0?void 0:a.value)!==null&&l!==void 0?l:"",this.enabled=!e.precondition||s.contextMatchesRules(e.precondition),this.checked=void 0;let c;if(e.toggled){const d=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=s.contextMatchesRules(d.condition),this.checked&&d.tooltip&&(this.tooltip=typeof d.tooltip=="string"?d.tooltip:d.tooltip.value),this.checked&&Qe.isThemeIcon(d.icon)&&(c=d.icon),this.checked&&d.title&&(this.label=typeof d.title=="string"?d.title:d.title.value)}c||(c=Qe.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new fx(t,void 0,n,r,s,o):void 0,this._options=n,this.class=c&&Qe.asClassName(c)}run(...e){var t,n;let r=[];return!((t=this._options)===null||t===void 0)&&t.arg&&(r=[...r,this._options.arg]),!((n=this._options)===null||n===void 0)&&n.shouldForwardArgs&&(r=[...r,...e]),this._commandService.executeCommand(this.id,...r)}};Wa=fx=ake([w8(4,ot),w8(5,oi)],Wa);class Bo{constructor(e){this.desc=e}}function Nn(i){const e=new ae,t=new i,n=t.desc,{f1:r,menu:s,keybinding:o,description:a}=n,l=lke(n,["f1","menu","keybinding","description"]);if(e.add(Bt.registerCommand({id:l.id,handler:(c,...d)=>t.run(c,...d),description:a})),Array.isArray(s))for(const c of s)e.add(pr.appendMenuItem(c.id,Object.assign({command:Object.assign(Object.assign({},l),{precondition:c.precondition===null?void 0:l.precondition})},c)));else s&&e.add(pr.appendMenuItem(s.id,Object.assign({command:Object.assign(Object.assign({},l),{precondition:s.precondition===null?void 0:l.precondition})},s)));if(r&&(e.add(pr.appendMenuItem(E.CommandPalette,{command:l,when:l.precondition})),e.add(pr.addCommand(l))),Array.isArray(o))for(const c of o)e.add(Fs.registerKeybindingRule(Object.assign(Object.assign({},c),{id:l.id,when:l.precondition?re.and(l.precondition,c.when):c.when})));else o&&e.add(Fs.registerKeybindingRule(Object.assign(Object.assign({},o),{id:l.id,when:l.precondition?re.and(l.precondition,o.when):o.when})));return e}const Wo=Lt("telemetryService"),Vo=Lt("logService");var Tr;(function(i){i[i.Off=0]="Off",i[i.Trace=1]="Trace",i[i.Debug=2]="Debug",i[i.Info=3]="Info",i[i.Warning=4]="Warning",i[i.Error=5]="Error"})(Tr||(Tr={}));const vG=Tr.Info;class yG extends q{constructor(){super(...arguments),this.level=vG,this._onDidChangeLogLevel=this._register(new H),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==Tr.Off&&this.level<=e}}class dke extends yG{constructor(e=vG,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.checkLogLevel(Tr.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.checkLogLevel(Tr.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.checkLogLevel(Tr.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.checkLogLevel(Tr.Warning)&&(this.useColors?console.log("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.checkLogLevel(Tr.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",e,...t):console.error(e,...t))}dispose(){}}class uke extends yG{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const n of this.loggers)n.trace(e,...t)}debug(e,...t){for(const n of this.loggers)n.debug(e,...t)}info(e,...t){for(const n of this.loggers)n.info(e,...t)}warn(e,...t){for(const n of this.loggers)n.warn(e,...t)}error(e,...t){for(const n of this.loggers)n.error(e,...t)}dispose(){for(const e of this.loggers)e.dispose()}}function hke(i){switch(i){case Tr.Trace:return"trace";case Tr.Debug:return"debug";case Tr.Info:return"info";case Tr.Warning:return"warn";case Tr.Error:return"error";case Tr.Off:return"off"}}new Ne("logLevel",hke(Tr.Info));const j3={clipboard:{writeText:kl||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:kl||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>kl||FTe()?0:navigator.keyboard||hu?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)};function fke(i){if(i.charCode){const t=String.fromCharCode(i.charCode).toUpperCase();return Md.fromString(t)}const e=i.keyCode;if(e===3)return 7;if(aa)switch(e){case 59:return 85;case 60:if(os)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Ot)return 57;break}else if(Cg){if(Ot&&e===93)return 57;if(!Ot&&e===92)return 57}return Kq[e]||0}const gke=Ot?256:2048,pke=512,mke=1024,_ke=Ot?2048:256;class kn{constructor(e){this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState("AltGraph"),this.keyCode=fke(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=gke),this.altKey&&(t|=pke),this.shiftKey&&(t|=mke),this.metaKey&&(t|=_ke),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new fu(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}let S8=!1,yb=null;function bke(i){if(!i.parent||i.parent===i)return null;try{const e=i.location,t=i.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return S8=!0,null}catch{return S8=!0,null}return i.parent}class vke{static getSameOriginWindowChain(){if(!yb){yb=[];let e=window,t;do t=bke(e),t?yb.push({window:e,iframeElement:e.frameElement||null}):yb.push({window:e,iframeElement:null}),e=t;while(e)}return yb.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,r=0;const s=this.getSameOriginWindowChain();for(const o of s){if(n+=o.window.scrollY,r+=o.window.scrollX,o.window===t||!o.iframeElement)break;const a=o.iframeElement.getBoundingClientRect();n+=a.top,r+=a.left}return{top:n,left:r}}}class Qo{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=e.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const t=vke.getPositionOfChildWindowRelativeToAncestorWindow(window,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class qg{constructor(e,t=0,n=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t,e){const r=e,s=e;if(typeof r.wheelDeltaY<"u")this.deltaY=r.wheelDeltaY/120;else if(typeof s.VERTICAL_AXIS<"u"&&s.axis===s.VERTICAL_AXIS)this.deltaY=-s.detail/3;else if(e.type==="wheel"){const o=e;o.deltaMode===o.DOM_DELTA_LINE?aa&&!Ot?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof r.wheelDeltaX<"u")hu&&Ar?this.deltaX=-(r.wheelDeltaX/120):this.deltaX=r.wheelDeltaX/120;else if(typeof s.HORIZONTAL_AXIS<"u"&&s.axis===s.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const o=e;o.deltaMode===o.DOM_DELTA_LINE?aa&&!Ot?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)===null||e===void 0||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)===null||e===void 0||e.stopPropagation()}}/*! @license DOMPurify 3.0.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.5/LICENSE */const{entries:CG,setPrototypeOf:x8,isFrozen:yke,getPrototypeOf:Cke,getOwnPropertyDescriptor:wke}=Object;let{freeze:ro,seal:Fl,create:Ske}=Object,{apply:TA,construct:kA}=typeof Reflect<"u"&&Reflect;TA||(TA=function(e,t,n){return e.apply(t,n)});ro||(ro=function(e){return e});Fl||(Fl=function(e){return e});kA||(kA=function(e,t){return new e(...t)});const xke=Va(Array.prototype.forEach),T8=Va(Array.prototype.pop),Cb=Va(Array.prototype.push),gx=Va(String.prototype.toLowerCase),VR=Va(String.prototype.toString),Tke=Va(String.prototype.match),il=Va(String.prototype.replace),kke=Va(String.prototype.indexOf),Lke=Va(String.prototype.trim),zo=Va(RegExp.prototype.test),wb=Dke(TypeError);function Va(i){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return TA(i,e,n)}}function Dke(i){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return kA(i,t)}}function cn(i,e,t){var n;t=(n=t)!==null&&n!==void 0?n:gx,x8&&x8(i,null);let r=e.length;for(;r--;){let s=e[r];if(typeof s=="string"){const o=t(s);o!==s&&(yke(e)||(e[r]=o),s=o)}i[s]=!0}return i}function im(i){const e=Ske(null);for(const[t,n]of CG(i))e[t]=n;return e}function Ow(i,e){for(;i!==null;){const n=wke(i,e);if(n){if(n.get)return Va(n.get);if(typeof n.value=="function")return Va(n.value)}i=Cke(i)}function t(n){return console.warn("fallback value for",n),null}return t}const k8=ro(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),HR=ro(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),UR=ro(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Ike=ro(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),jR=ro(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Rke=ro(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),L8=ro(["#text"]),D8=ro(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),zR=ro(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),I8=ro(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Fw=ro(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Eke=Fl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Nke=Fl(/<%[\w\W]*|[\w\W]*%>/gm),Ake=Fl(/\${[\w\W]*}/gm),Pke=Fl(/^data-[\-\w.\u00B7-\uFFFF]/),Mke=Fl(/^aria-[\-\w]+$/),wG=Fl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Oke=Fl(/^(?:\w+script|data):/i),Fke=Fl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),SG=Fl(/^html$/i);var R8=Object.freeze({__proto__:null,MUSTACHE_EXPR:Eke,ERB_EXPR:Nke,TMPLIT_EXPR:Ake,DATA_ATTR:Pke,ARIA_ATTR:Mke,IS_ALLOWED_URI:wG,IS_SCRIPT_OR_DATA:Oke,ATTR_WHITESPACE:Fke,DOCTYPE_NAME:SG});const Bke=()=>typeof window>"u"?null:window,Wke=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const s="dompurify"+(n?"#"+n:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function xG(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Bke();const e=mt=>xG(mt);if(e.version="3.0.5",e.removed=[],!i||!i.document||i.document.nodeType!==9)return e.isSupported=!1,e;const t=i.document,n=t.currentScript;let{document:r}=i;const{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:d=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:u,DOMParser:h,trustedTypes:f}=i,g=l.prototype,m=Ow(g,"cloneNode"),y=Ow(g,"nextSibling"),b=Ow(g,"childNodes"),v=Ow(g,"parentNode");if(typeof o=="function"){const mt=r.createElement("template");mt.content&&mt.content.ownerDocument&&(r=mt.content.ownerDocument)}let C,w="";const{implementation:S,createNodeIterator:L,createDocumentFragment:T,getElementsByTagName:I}=r,{importNode:R}=t;let B={};e.isSupported=typeof CG=="function"&&typeof v=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:V,ERB_EXPR:F,TMPLIT_EXPR:W,DATA_ATTR:X,ARIA_ATTR:oe,IS_SCRIPT_OR_DATA:we,ATTR_WHITESPACE:ke}=R8;let{IS_ALLOWED_URI:Ee}=R8,Le=null;const qe=cn({},[...k8,...HR,...UR,...jR,...L8]);let Ue=null;const Oe=cn({},[...D8,...zR,...I8,...Fw]);let be=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),un=null,he=null,_e=!0,pe=!0,Pe=!1,ie=!0,te=!1,Y=!1,De=!1,Je=!1,We=!1,Ge=!1,Tt=!1,pt=!0,Nt=!1;const hn="user-content-";let ne=!0,G=!1,Z={},A=null;const M=cn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let $=null;const j=cn({},["audio","video","img","source","image","track"]);let le=null;const Ie=cn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),je="http://www.w3.org/1998/Math/MathML",Xe="http://www.w3.org/2000/svg",at="http://www.w3.org/1999/xhtml";let lt=at,on=!1,en=null;const nt=cn({},[je,Xe,at],VR);let Bn;const Wn=["application/xhtml+xml","text/html"],ks="text/html";let qt,ai=null;const Ya=r.createElement("form"),Qa=function(J){return J instanceof RegExp||J instanceof Function},Hs=function(J){if(!(ai&&ai===J)){if((!J||typeof J!="object")&&(J={}),J=im(J),Bn=Wn.indexOf(J.PARSER_MEDIA_TYPE)===-1?Bn=ks:Bn=J.PARSER_MEDIA_TYPE,qt=Bn==="application/xhtml+xml"?VR:gx,Le="ALLOWED_TAGS"in J?cn({},J.ALLOWED_TAGS,qt):qe,Ue="ALLOWED_ATTR"in J?cn({},J.ALLOWED_ATTR,qt):Oe,en="ALLOWED_NAMESPACES"in J?cn({},J.ALLOWED_NAMESPACES,VR):nt,le="ADD_URI_SAFE_ATTR"in J?cn(im(Ie),J.ADD_URI_SAFE_ATTR,qt):Ie,$="ADD_DATA_URI_TAGS"in J?cn(im(j),J.ADD_DATA_URI_TAGS,qt):j,A="FORBID_CONTENTS"in J?cn({},J.FORBID_CONTENTS,qt):M,un="FORBID_TAGS"in J?cn({},J.FORBID_TAGS,qt):{},he="FORBID_ATTR"in J?cn({},J.FORBID_ATTR,qt):{},Z="USE_PROFILES"in J?J.USE_PROFILES:!1,_e=J.ALLOW_ARIA_ATTR!==!1,pe=J.ALLOW_DATA_ATTR!==!1,Pe=J.ALLOW_UNKNOWN_PROTOCOLS||!1,ie=J.ALLOW_SELF_CLOSE_IN_ATTR!==!1,te=J.SAFE_FOR_TEMPLATES||!1,Y=J.WHOLE_DOCUMENT||!1,We=J.RETURN_DOM||!1,Ge=J.RETURN_DOM_FRAGMENT||!1,Tt=J.RETURN_TRUSTED_TYPE||!1,Je=J.FORCE_BODY||!1,pt=J.SANITIZE_DOM!==!1,Nt=J.SANITIZE_NAMED_PROPS||!1,ne=J.KEEP_CONTENT!==!1,G=J.IN_PLACE||!1,Ee=J.ALLOWED_URI_REGEXP||wG,lt=J.NAMESPACE||at,be=J.CUSTOM_ELEMENT_HANDLING||{},J.CUSTOM_ELEMENT_HANDLING&&Qa(J.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(be.tagNameCheck=J.CUSTOM_ELEMENT_HANDLING.tagNameCheck),J.CUSTOM_ELEMENT_HANDLING&&Qa(J.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(be.attributeNameCheck=J.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),J.CUSTOM_ELEMENT_HANDLING&&typeof J.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(be.allowCustomizedBuiltInElements=J.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),te&&(pe=!1),Ge&&(We=!0),Z&&(Le=cn({},[...L8]),Ue=[],Z.html===!0&&(cn(Le,k8),cn(Ue,D8)),Z.svg===!0&&(cn(Le,HR),cn(Ue,zR),cn(Ue,Fw)),Z.svgFilters===!0&&(cn(Le,UR),cn(Ue,zR),cn(Ue,Fw)),Z.mathMl===!0&&(cn(Le,jR),cn(Ue,I8),cn(Ue,Fw))),J.ADD_TAGS&&(Le===qe&&(Le=im(Le)),cn(Le,J.ADD_TAGS,qt)),J.ADD_ATTR&&(Ue===Oe&&(Ue=im(Ue)),cn(Ue,J.ADD_ATTR,qt)),J.ADD_URI_SAFE_ATTR&&cn(le,J.ADD_URI_SAFE_ATTR,qt),J.FORBID_CONTENTS&&(A===M&&(A=im(A)),cn(A,J.FORBID_CONTENTS,qt)),ne&&(Le["#text"]=!0),Y&&cn(Le,["html","head","body"]),Le.table&&(cn(Le,["tbody"]),delete un.tbody),J.TRUSTED_TYPES_POLICY){if(typeof J.TRUSTED_TYPES_POLICY.createHTML!="function")throw wb('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof J.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw wb('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');C=J.TRUSTED_TYPES_POLICY,w=C.createHTML("")}else C===void 0&&(C=Wke(f,n)),C!==null&&typeof w=="string"&&(w=C.createHTML(""));ro&&ro(J),ai=J}},ba=cn({},["mi","mo","mn","ms","mtext"]),Ja=cn({},["foreignobject","desc","title","annotation-xml"]),el=cn({},["title","style","font","a","script"]),Ql=cn({},HR);cn(Ql,UR),cn(Ql,Ike);const tl=cn({},jR);cn(tl,Rke);const Df=function(J){let Ve=v(J);(!Ve||!Ve.tagName)&&(Ve={namespaceURI:lt,tagName:"template"});const it=gx(J.tagName),Vn=gx(Ve.tagName);return en[J.namespaceURI]?J.namespaceURI===Xe?Ve.namespaceURI===at?it==="svg":Ve.namespaceURI===je?it==="svg"&&(Vn==="annotation-xml"||ba[Vn]):!!Ql[it]:J.namespaceURI===je?Ve.namespaceURI===at?it==="math":Ve.namespaceURI===Xe?it==="math"&&Ja[Vn]:!!tl[it]:J.namespaceURI===at?Ve.namespaceURI===Xe&&!Ja[Vn]||Ve.namespaceURI===je&&!ba[Vn]?!1:!tl[it]&&(el[it]||!Ql[it]):!!(Bn==="application/xhtml+xml"&&en[J.namespaceURI]):!1},co=function(J){Cb(e.removed,{element:J});try{J.parentNode.removeChild(J)}catch{J.remove()}},gd=function(J,Ve){try{Cb(e.removed,{attribute:Ve.getAttributeNode(J),from:Ve})}catch{Cb(e.removed,{attribute:null,from:Ve})}if(Ve.removeAttribute(J),J==="is"&&!Ue[J])if(We||Ge)try{co(Ve)}catch{}else try{Ve.setAttribute(J,"")}catch{}},pd=function(J){let Ve,it;if(Je)J="<remove></remove>"+J;else{const Ls=Tke(J,/^[\r\n\t ]+/);it=Ls&&Ls[0]}Bn==="application/xhtml+xml"&&lt===at&&(J='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+J+"</body></html>");const Vn=C?C.createHTML(J):J;if(lt===at)try{Ve=new h().parseFromString(Vn,Bn)}catch{}if(!Ve||!Ve.documentElement){Ve=S.createDocument(lt,"template",null);try{Ve.documentElement.innerHTML=on?w:Vn}catch{}}const Gi=Ve.body||Ve.documentElement;return J&&it&&Gi.insertBefore(r.createTextNode(it),Gi.childNodes[0]||null),lt===at?I.call(Ve,Y?"html":"body")[0]:Y?Ve.documentElement:Gi},ku=function(J){return L.call(J.ownerDocument||J,J,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},fb=function(J){return J instanceof u&&(typeof J.nodeName!="string"||typeof J.textContent!="string"||typeof J.removeChild!="function"||!(J.attributes instanceof d)||typeof J.removeAttribute!="function"||typeof J.setAttribute!="function"||typeof J.namespaceURI!="string"||typeof J.insertBefore!="function"||typeof J.hasChildNodes!="function")},Lu=function(J){return typeof a=="object"?J instanceof a:J&&typeof J=="object"&&typeof J.nodeType=="number"&&typeof J.nodeName=="string"},Uo=function(J,Ve,it){B[J]&&xke(B[J],Vn=>{Vn.call(e,Ve,it,ai)})},Xp=function(J){let Ve;if(Uo("beforeSanitizeElements",J,null),fb(J))return co(J),!0;const it=qt(J.nodeName);if(Uo("uponSanitizeElement",J,{tagName:it,allowedTags:Le}),J.hasChildNodes()&&!Lu(J.firstElementChild)&&(!Lu(J.content)||!Lu(J.content.firstElementChild))&&zo(/<[/\w]/g,J.innerHTML)&&zo(/<[/\w]/g,J.textContent))return co(J),!0;if(!Le[it]||un[it]){if(!un[it]&&Qp(it)&&(be.tagNameCheck instanceof RegExp&&zo(be.tagNameCheck,it)||be.tagNameCheck instanceof Function&&be.tagNameCheck(it)))return!1;if(ne&&!A[it]){const Vn=v(J)||J.parentNode,Gi=b(J)||J.childNodes;if(Gi&&Vn){const Ls=Gi.length;for(let Ri=Ls-1;Ri>=0;--Ri)Vn.insertBefore(m(Gi[Ri],!0),y(J))}}return co(J),!0}return J instanceof l&&!Df(J)||(it==="noscript"||it==="noembed"||it==="noframes")&&zo(/<\/no(script|embed|frames)/i,J.innerHTML)?(co(J),!0):(te&&J.nodeType===3&&(Ve=J.textContent,Ve=il(Ve,V," "),Ve=il(Ve,F," "),Ve=il(Ve,W," "),J.textContent!==Ve&&(Cb(e.removed,{element:J.cloneNode()}),J.textContent=Ve)),Uo("afterSanitizeElements",J,null),!1)},Yp=function(J,Ve,it){if(pt&&(Ve==="id"||Ve==="name")&&(it in r||it in Ya))return!1;if(!(pe&&!he[Ve]&&zo(X,Ve))){if(!(_e&&zo(oe,Ve))){if(!Ue[Ve]||he[Ve]){if(!(Qp(J)&&(be.tagNameCheck instanceof RegExp&&zo(be.tagNameCheck,J)||be.tagNameCheck instanceof Function&&be.tagNameCheck(J))&&(be.attributeNameCheck instanceof RegExp&&zo(be.attributeNameCheck,Ve)||be.attributeNameCheck instanceof Function&&be.attributeNameCheck(Ve))||Ve==="is"&&be.allowCustomizedBuiltInElements&&(be.tagNameCheck instanceof RegExp&&zo(be.tagNameCheck,it)||be.tagNameCheck instanceof Function&&be.tagNameCheck(it))))return!1}else if(!le[Ve]){if(!zo(Ee,il(it,ke,""))){if(!((Ve==="src"||Ve==="xlink:href"||Ve==="href")&&J!=="script"&&kke(it,"data:")===0&&$[J])){if(!(Pe&&!zo(we,il(it,ke,"")))){if(it)return!1}}}}}}return!0},Qp=function(J){return J.indexOf("-")>0},Jp=function(J){let Ve,it,Vn,Gi;Uo("beforeSanitizeAttributes",J,null);const{attributes:Ls}=J;if(!Ls)return;const Ri={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ue};for(Gi=Ls.length;Gi--;){Ve=Ls[Gi];const{name:va,namespaceURI:pb}=Ve;if(it=va==="value"?Ve.value:Lke(Ve.value),Vn=qt(va),Ri.attrName=Vn,Ri.attrValue=it,Ri.keepAttr=!0,Ri.forceKeepAttr=void 0,Uo("uponSanitizeAttribute",J,Ri),it=Ri.attrValue,Ri.forceKeepAttr||(gd(va,J),!Ri.keepAttr))continue;if(!ie&&zo(/\/>/i,it)){gd(va,J);continue}te&&(it=il(it,V," "),it=il(it,F," "),it=il(it,W," "));const xw=qt(J.nodeName);if(Yp(xw,Vn,it)){if(Nt&&(Vn==="id"||Vn==="name")&&(gd(va,J),it=hn+it),C&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!pb)switch(f.getAttributeType(xw,Vn)){case"TrustedHTML":{it=C.createHTML(it);break}case"TrustedScriptURL":{it=C.createScriptURL(it);break}}try{pb?J.setAttributeNS(pb,va,it):J.setAttribute(va,it),T8(e.removed)}catch{}}}Uo("afterSanitizeAttributes",J,null)},gb=function mt(J){let Ve;const it=ku(J);for(Uo("beforeSanitizeShadowDOM",J,null);Ve=it.nextNode();)Uo("uponSanitizeShadowNode",Ve,null),!Xp(Ve)&&(Ve.content instanceof s&&mt(Ve.content),Jp(Ve));Uo("afterSanitizeShadowDOM",J,null)};return e.sanitize=function(mt){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ve,it,Vn,Gi;if(on=!mt,on&&(mt="<!-->"),typeof mt!="string"&&!Lu(mt))if(typeof mt.toString=="function"){if(mt=mt.toString(),typeof mt!="string")throw wb("dirty is not a string, aborting")}else throw wb("toString is not a function");if(!e.isSupported)return mt;if(De||Hs(J),e.removed=[],typeof mt=="string"&&(G=!1),G){if(mt.nodeName){const va=qt(mt.nodeName);if(!Le[va]||un[va])throw wb("root node is forbidden and cannot be sanitized in-place")}}else if(mt instanceof a)Ve=pd("<!---->"),it=Ve.ownerDocument.importNode(mt,!0),it.nodeType===1&&it.nodeName==="BODY"||it.nodeName==="HTML"?Ve=it:Ve.appendChild(it);else{if(!We&&!te&&!Y&&mt.indexOf("<")===-1)return C&&Tt?C.createHTML(mt):mt;if(Ve=pd(mt),!Ve)return We?null:Tt?w:""}Ve&&Je&&co(Ve.firstChild);const Ls=ku(G?mt:Ve);for(;Vn=Ls.nextNode();)Xp(Vn)||(Vn.content instanceof s&&gb(Vn.content),Jp(Vn));if(G)return mt;if(We){if(Ge)for(Gi=T.call(Ve.ownerDocument);Ve.firstChild;)Gi.appendChild(Ve.firstChild);else Gi=Ve;return(Ue.shadowroot||Ue.shadowrootmode)&&(Gi=R.call(t,Gi,!0)),Gi}let Ri=Y?Ve.outerHTML:Ve.innerHTML;return Y&&Le["!doctype"]&&Ve.ownerDocument&&Ve.ownerDocument.doctype&&Ve.ownerDocument.doctype.name&&zo(SG,Ve.ownerDocument.doctype.name)&&(Ri="<!DOCTYPE "+Ve.ownerDocument.doctype.name+`>
`+Ri),te&&(Ri=il(Ri,V," "),Ri=il(Ri,F," "),Ri=il(Ri,W," ")),C&&Tt?C.createHTML(Ri):Ri},e.setConfig=function(mt){Hs(mt),De=!0},e.clearConfig=function(){ai=null,De=!1},e.isValidAttribute=function(mt,J,Ve){ai||Hs({});const it=qt(mt),Vn=qt(J);return Yp(it,Vn,Ve)},e.addHook=function(mt,J){typeof J=="function"&&(B[mt]=B[mt]||[],Cb(B[mt],J))},e.removeHook=function(mt){if(B[mt])return T8(B[mt])},e.removeHooks=function(mt){B[mt]&&(B[mt]=[])},e.removeAllHooks=function(){B={}},e}var ud=xG();ud.version;ud.isSupported;const TG=ud.sanitize;ud.setConfig;ud.clearConfig;ud.isValidAttribute;const kG=ud.addHook,LG=ud.removeHook;ud.removeHooks;ud.removeAllHooks;var bt;(function(i){i.inMemory="inmemory",i.vscode="vscode",i.internal="private",i.walkThrough="walkThrough",i.walkThroughSnippet="walkThroughSnippet",i.http="http",i.https="https",i.file="file",i.mailto="mailto",i.untitled="untitled",i.data="data",i.command="command",i.vscodeRemote="vscode-remote",i.vscodeRemoteResource="vscode-remote-resource",i.vscodeManagedRemoteResource="vscode-managed-remote-resource",i.vscodeUserData="vscode-userdata",i.vscodeCustomEditor="vscode-custom-editor",i.vscodeNotebookCell="vscode-notebook-cell",i.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",i.vscodeNotebookCellOutput="vscode-notebook-cell-output",i.vscodeInteractiveInput="vscode-interactive-input",i.vscodeSettings="vscode-settings",i.vscodeWorkspaceTrust="vscode-workspace-trust",i.vscodeTerminal="vscode-terminal",i.vscodeChatSesssion="vscode-chat-editor",i.webviewPanel="webview-panel",i.vscodeWebview="vscode-webview",i.extension="extension",i.vscodeFileResource="vscode-file",i.tmp="tmp",i.vsls="vsls",i.vscodeSourceControl="vscode-scm"})(bt||(bt={}));const Vke="tkn";class Hke{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${bt.vscodeRemoteResource}`}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return ut(a),e}const t=e.authority;let n=this._hosts[t];n&&n.indexOf(":")!==-1&&n.indexOf("[")===-1&&(n=`[${n}]`);const r=this._ports[t],s=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(o+=`&${Vke}=${encodeURIComponent(s)}`),Ye.from({scheme:gf?this._preferredWebSchema:bt.vscodeRemoteResource,authority:`${n}:${r}`,path:this._remoteResourcesPath,query:o})}}const DG=new Hke;class H0{uriToBrowserUri(e){return e.scheme===bt.vscodeRemote?DG.rewrite(e):e.scheme===bt.file&&(kl||MSe&&Aa.origin===`${bt.vscodeFileResource}://${H0.FALLBACK_AUTHORITY}`)?e.with({scheme:bt.vscodeFileResource,authority:e.authority||H0.FALLBACK_AUTHORITY,query:null,fragment:null}):e}}H0.FALLBACK_AUTHORITY="vscode-app";const IG=new H0;var E8;(function(i){const e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);i.CoopAndCoep=Object.freeze(e.get("3"));const t="vscode-coi";function n(s){let o;typeof s=="string"?o=new URL(s).searchParams:s instanceof URL?o=s.searchParams:Ye.isUri(s)&&(o=new URL(s.toString(!0)).searchParams);const a=o==null?void 0:o.get(t);if(a)return e.get(a)}i.getHeadersFromQuery=n;function r(s,o,a){if(!globalThis.crossOriginIsolated)return;const l=o&&a?"3":a?"2":"1";s instanceof URLSearchParams?s.set(t,l):s[t]=l}i.addSearchParam=r})(E8||(E8={}));const{registerWindow:HZe,getWindows:Uke,onDidCreateWindow:UZe}=function(){const i=[],e=new H;return{onDidCreateWindow:e.event,registerWindow(t){i.push(t);const n=new ae;return n.add(st(()=>{const r=i.indexOf(t);r!==-1&&i.splice(r,1)})),e.fire({window:t,disposableStore:n}),n},getWindows(){return i}}}();function _r(i){for(;i.firstChild;)i.firstChild.remove()}function z3(i){var e;return(e=i==null?void 0:i.isConnected)!==null&&e!==void 0?e:!1}class jke{constructor(e,t,n,r){this._node=e,this._type=t,this._handler=n,this._options=r||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function ee(i,e,t,n){return new jke(i,e,t,n)}function RG(i){return function(e){return i(new Qo(e))}}function zke(i){return function(e){return i(new kn(e))}}const bi=function(e,t,n,r){let s=n;return t==="click"||t==="mousedown"?s=RG(n):(t==="keydown"||t==="keypress"||t==="keyup")&&(s=zke(n)),ee(e,t,s,r)},$ke=function(e,t,n){const r=RG(t);return Kke(e,r,n)};function Kke(i,e,t){return ee(i,Ol&&j3.pointerEvents?Ce.POINTER_DOWN:Ce.MOUSE_DOWN,e,t)}let LT,la;class $R{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){ut(e)}}static sort(e,t){return t.priority-e.priority}}(function(){let i=[],e=null,t=!1,n=!1;const r=()=>{for(t=!1,e=i,i=[],n=!0;e.length>0;)e.sort($R.sort),e.shift().execute();n=!1};la=(s,o=0)=>{const a=new $R(s,o);return i.push(a),t||(t=!0,requestAnimationFrame(r)),a},LT=(s,o)=>{if(n){const a=new $R(s,o);return e.push(a),a}else return la(s,o)}})();function yD(i){return i.ownerDocument.defaultView.getComputedStyle(i,null)}function q1(i){var e;const t=i.ownerDocument,n=(e=t.defaultView)===null||e===void 0?void 0:e.window;if(i!==t.body)return new Kt(i.clientWidth,i.clientHeight);if(Ol&&(n!=null&&n.visualViewport))return new Kt(n.visualViewport.width,n.visualViewport.height);if(n!=null&&n.innerWidth&&n.innerHeight)return new Kt(n.innerWidth,n.innerHeight);if(t.body&&t.body.clientWidth&&t.body.clientHeight)return new Kt(t.body.clientWidth,t.body.clientHeight);if(t.documentElement&&t.documentElement.clientWidth&&t.documentElement.clientHeight)return new Kt(t.documentElement.clientWidth,t.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class ci{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){const r=yD(e),s=r?r.getPropertyValue(t):"0";return ci.convertToPixels(e,s)}static getBorderLeftWidth(e){return ci.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return ci.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return ci.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return ci.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return ci.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return ci.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return ci.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return ci.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return ci.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return ci.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return ci.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return ci.getDimension(e,"margin-bottom","marginBottom")}}class Kt{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new Kt(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof Kt?e:new Kt(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}Kt.None=new Kt(0,0);function EG(i){let e=i.offsetParent,t=i.offsetTop,n=i.offsetLeft;for(;(i=i.parentNode)!==null&&i!==i.ownerDocument.body&&i!==i.ownerDocument.documentElement;){t-=i.scrollTop;const r=NG(i)?null:yD(i);r&&(n-=r.direction!=="rtl"?i.scrollLeft:-i.scrollLeft),i===e&&(n+=ci.getBorderLeftWidth(i),t+=ci.getBorderTopWidth(i),t+=i.offsetTop,n+=i.offsetLeft,e=i.offsetParent)}return{left:n,top:t}}function qke(i,e,t){typeof e=="number"&&(i.style.width=`${e}px`),typeof t=="number"&&(i.style.height=`${t}px`)}function Mi(i){var e,t,n,r;const s=i.getBoundingClientRect();return{left:s.left+((t=(e=i.ownerDocument.defaultView)===null||e===void 0?void 0:e.scrollX)!==null&&t!==void 0?t:0),top:s.top+((r=(n=i.ownerDocument.defaultView)===null||n===void 0?void 0:n.scrollY)!==null&&r!==void 0?r:0),width:s.width,height:s.height}}function Gke(i){let e=i,t=1;do{const n=yD(e).zoom;n!=null&&n!=="1"&&(t*=n),e=e.parentElement}while(e!==null&&e!==e.ownerDocument.documentElement);return t}function Es(i){const e=ci.getMarginLeft(i)+ci.getMarginRight(i);return i.offsetWidth+e}function KR(i){const e=ci.getBorderLeftWidth(i)+ci.getBorderRightWidth(i),t=ci.getPaddingLeft(i)+ci.getPaddingRight(i);return i.offsetWidth-e-t}function Zke(i){const e=ci.getBorderTopWidth(i)+ci.getBorderBottomWidth(i),t=ci.getPaddingTop(i)+ci.getPaddingBottom(i);return i.offsetHeight-e-t}function ug(i){const e=ci.getMarginTop(i)+ci.getMarginBottom(i);return i.offsetHeight+e}function Dr(i,e){for(;i;){if(i===e)return!0;i=i.parentNode}return!1}function Xke(i,e,t){for(;i&&i.nodeType===i.ELEMENT_NODE;){if(i.classList.contains(e))return i;if(t){if(typeof t=="string"){if(i.classList.contains(t))return null}else if(i===t)return null}i=i.parentNode}return null}function qR(i,e,t){return!!Xke(i,e,t)}function NG(i){return i&&!!i.host&&!!i.mode}function DT(i){return!!Gg(i)}function Gg(i){for(var e;i.parentNode;){if(i===((e=i.ownerDocument)===null||e===void 0?void 0:e.body))return null;i=i.parentNode}return NG(i)?i:null}function Ma(){let i=CD().activeElement;for(;i!=null&&i.shadowRoot;)i=i.shadowRoot.activeElement;return i}function CD(){var i;return(i=[document,...Uke().map(t=>t.document)].find(t=>t.hasFocus()))!==null&&i!==void 0?i:document}function ca(i=document.getElementsByTagName("head")[0],e){const t=document.createElement("style");return t.type="text/css",t.media="screen",e==null||e(t),i.appendChild(t),t}let GR=null;function AG(){return GR||(GR=ca()),GR}function Yke(i){var e,t;return!((e=i==null?void 0:i.sheet)===null||e===void 0)&&e.rules?i.sheet.rules:!((t=i==null?void 0:i.sheet)===null||t===void 0)&&t.cssRules?i.sheet.cssRules:[]}function LA(i,e,t=AG()){!t||!e||t.sheet.insertRule(i+"{"+e+"}",0)}function N8(i,e=AG()){if(!e)return;const t=Yke(e),n=[];for(let r=0;r<t.length;r++)t[r].selectorText.indexOf(i)!==-1&&n.push(r);for(let r=n.length-1;r>=0;r--)e.sheet.deleteRule(n[r])}function $3(i){return typeof HTMLElement=="object"?i instanceof HTMLElement:i&&typeof i=="object"&&i.nodeType===1&&typeof i.nodeName=="string"}const Ce={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:Cg?"webkitAnimationStart":"animationstart",ANIMATION_END:Cg?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:Cg?"webkitAnimationIteration":"animationiteration"};function Qke(i){const e=i;return!!(e&&typeof e.preventDefault=="function"&&typeof e.stopPropagation=="function")}const _t={stop:(i,e)=>(i.preventDefault(),e&&i.stopPropagation(),i)};function Jke(i){const e=[];for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)e[t]=i.scrollTop,i=i.parentNode;return e}function eLe(i,e){for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)i.scrollTop!==e[t]&&(i.scrollTop=e[t]),i=i.parentNode}class IT extends q{static hasFocusWithin(e){if($3(e)){const t=Gg(e),n=t?t.activeElement:e.ownerDocument.activeElement;return Dr(n,e)}else return Dr(window.document.activeElement,window.document)}constructor(e){super(),this._onDidFocus=this._register(new H),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new H),this.onDidBlur=this._onDidBlur.event;let t=IT.hasFocusWithin(e),n=!1;const r=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},s=()=>{t&&(n=!0,window.setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{IT.hasFocusWithin(e)!==t&&(t?s():r())},this._register(ee(e,Ce.FOCUS,r,!0)),this._register(ee(e,Ce.BLUR,s,!0)),e instanceof HTMLElement&&(this._register(ee(e,Ce.FOCUS_IN,()=>this._refreshStateHandler())),this._register(ee(e,Ce.FOCUS_OUT,()=>this._refreshStateHandler())))}}function qc(i){return new IT(i)}function se(i,...e){if(i.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function PG(i,e){return i.insertBefore(e,i.firstChild),e}function br(i,...e){i.innerText="",se(i,...e)}const tLe=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var U0;(function(i){i.HTML="http://www.w3.org/1999/xhtml",i.SVG="http://www.w3.org/2000/svg"})(U0||(U0={}));function MG(i,e,t,...n){const r=tLe.exec(e);if(!r)throw new Error("Bad use of emmet");const s=r[1]||"div";let o;return i!==U0.HTML?o=document.createElementNS(i,s):o=document.createElement(s),r[3]&&(o.id=r[3]),r[4]&&(o.className=r[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?o[a]=l:a==="selected"?l&&o.setAttribute(a,"true"):o.setAttribute(a,l))}),o.append(...n),o}function ce(i,e,...t){return MG(U0.HTML,i,e,...t)}ce.SVG=function(i,e,...t){return MG(U0.SVG,i,e,...t)};function nLe(i,...e){i?Gs(...e):us(...e)}function Gs(...i){for(const e of i)e.style.display="",e.removeAttribute("aria-hidden")}function us(...i){for(const e of i)e.style.display="none",e.setAttribute("aria-hidden","true")}function A8(i){const e=window.devicePixelRatio*i;return Math.max(1,Math.floor(e))/window.devicePixelRatio}function OG(i){window.open(i,"_blank","noopener")}function iLe(i){const e=()=>{i(),t=la(e)};let t=la(e);return st(()=>t.dispose())}DG.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function Wh(i){return i?`url('${IG.uriToBrowserUri(i).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function P8(i){return`'${i.replace(/'/g,"%27")}'`}function Sg(i,e){if(i!==void 0){const t=i.match(/^\s*var\((.+)\)$/);if(t){const n=t[1].split(",",2);return n.length===2&&(e=Sg(n[1].trim(),e)),`var(${n[0]}, ${e})`}return i}return e}function rLe(i,e=!1){const t=document.createElement("a");return kG("afterSanitizeAttributes",n=>{for(const r of["href","src"])if(n.hasAttribute(r)){const s=n.getAttribute(r);if(r==="href"&&s.startsWith("#"))continue;if(t.href=s,!i.includes(t.protocol.replace(/:$/,""))){if(e&&r==="src"&&t.href.startsWith("data:"))continue;n.removeAttribute(r)}}}),st(()=>{LG("afterSanitizeAttributes")})}const sLe=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);class Hd extends H{constructor(){super(),this._subscriptions=new ae,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(ee(window,"keydown",e=>{if(e.defaultPrevented)return;const t=new kn(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(ee(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(ee(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(ee(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(ee(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(ee(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return Hd.instance||(Hd.instance=new Hd),Hd.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class oLe extends q{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this._register(ee(this.element,Ce.DRAG_ENTER,e=>{this.counter++,this.dragStartTime=e.timeStamp,this.callbacks.onDragEnter(e)})),this._register(ee(this.element,Ce.DRAG_OVER,e=>{var t,n;e.preventDefault(),(n=(t=this.callbacks).onDragOver)===null||n===void 0||n.call(t,e,e.timeStamp-this.dragStartTime)})),this._register(ee(this.element,Ce.DRAG_LEAVE,e=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave(e))})),this._register(ee(this.element,Ce.DRAG_END,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd(e)})),this._register(ee(this.element,Ce.DROP,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop(e)}))}}const aLe=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function dr(i,...e){let t,n;Array.isArray(e[0])?(t={},n=e[0]):(t=e[0]||{},n=e[1]);const r=aLe.exec(i);if(!r||!r.groups)throw new Error("Bad use of h");const s=r.groups.tag||"div",o=document.createElement(s);r.groups.id&&(o.id=r.groups.id);const a=[];if(r.groups.class)for(const c of r.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(o.className=a.join(" "));const l={};if(r.groups.name&&(l[r.groups.name]=o),n)for(const c of n)c instanceof HTMLElement?o.appendChild(c):typeof c=="string"?o.append(c):"root"in c&&(Object.assign(l,c),o.appendChild(c.root));for(const[c,d]of Object.entries(t))if(c!=="className")if(c==="style")for(const[u,h]of Object.entries(d))o.style.setProperty(M8(u),typeof h=="number"?h+"px":""+h);else c==="tabIndex"?o.tabIndex=d:o.setAttribute(M8(c),d.toString());return l.root=o,l}function M8(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class wD{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let n=t.kbExpr;this.precondition&&(n?n=re.and(n,this.precondition):n=this.precondition);const r={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};Fs.registerKeybindingRule(r)}}Bt.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){pr.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class G1 extends wD{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n,r){return this._implementations.push({priority:e,name:t,implementation:n,when:r}),this._implementations.sort((s,o)=>o.priority-s.priority),{dispose:()=>{for(let s=0;s<this._implementations.length;s++)if(this._implementations[s].implementation===n){this._implementations.splice(s,1);return}}}}runCommand(e,t){const n=e.get(Vo),r=e.get(ot);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const s of this._implementations){if(s.when){const a=r.getContext(Ma());if(!s.when.evaluate(a))continue}const o=s.implementation(e,t);if(o)return n.trace(`Command '${this.id}' was handled by '${s.name}'.`),typeof o=="boolean"?void 0:o}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class FG extends wD{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class sr extends wD{static bindToContribution(e){return class extends sr{constructor(n){super(n),this._callback=n.handler}runEditorCommand(n,r,s){const o=e(r);o&&this._callback(o,s)}}}static runEditorCommand(e,t,n,r){const s=e.get(Jt),o=s.getFocusedCodeEditor()||s.getActiveCodeEditor();if(o)return o.invokeWithinContext(a=>{if(a.get(ot).contextMatchesRules(n??void 0))return r(a,o,t)})}runCommand(e,t){return sr.runEditorCommand(e,t,this.precondition,(n,r,s)=>this.runEditorCommand(n,r,s))}}class Me extends sr{static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(r){return r.menuId||(r.menuId=E.EditorContext),r.title||(r.title=e.label),r.when=re.and(e.precondition,r.when),r}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}constructor(e){super(Me.convertOptions(e)),this.label=e.label,this.alias=e.alias}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(Wo).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class BG extends Me{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((n,r)=>r[0]-n[0]),{dispose:()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n][1]===t){this._implementations.splice(n,1);return}}}}run(e,t,n){for(const r of this._implementations){const s=r[1](e,t,n);if(s)return typeof s=="boolean"?void 0:s}}}class Gl extends Bo{run(e,...t){const n=e.get(Jt),r=n.getFocusedCodeEditor()||n.getActiveCodeEditor();if(r)return r.invokeWithinContext(s=>{var o,a;const l=s.get(ot),c=s.get(Vo);if(!l.contextMatchesRules((o=this.desc.precondition)!==null&&o!==void 0?o:void 0)){c.debug("[EditorAction2] NOT running command because its precondition is FALSE",this.desc.id,(a=this.desc.precondition)===null||a===void 0?void 0:a.serialize());return}return this.runEditorCommand(s,r,...t)})}}function hd(i,e){Bt.registerCommand(i,function(t,...n){const r=t.get(rt),[s,o]=n;dn(Ye.isUri(s)),dn(U.isIPosition(o));const a=t.get(zn).getModel(s);if(a){const l=U.lift(o);return r.invokeFunction(e,a,l,...n.slice(2))}return t.get(Vs).createModelReference(s).then(l=>new Promise((c,d)=>{try{const u=r.invokeFunction(e,l.object.textEditorModel,U.lift(o),n.slice(2));c(u)}catch(u){d(u)}}).finally(()=>{l.dispose()}))})}function ye(i){return Zo.INSTANCE.registerEditorCommand(i),i}function ue(i){const e=new i;return Zo.INSTANCE.registerEditorAction(e),e}function WG(i){return Zo.INSTANCE.registerEditorAction(i),i}function lLe(i){Zo.INSTANCE.registerEditorAction(i)}function $t(i,e,t){Zo.INSTANCE.registerEditorContribution(i,e,t)}var h_;(function(i){function e(o){return Zo.INSTANCE.getEditorCommand(o)}i.getEditorCommand=e;function t(){return Zo.INSTANCE.getEditorActions()}i.getEditorActions=t;function n(){return Zo.INSTANCE.getEditorContributions()}i.getEditorContributions=n;function r(o){return Zo.INSTANCE.getEditorContributions().filter(a=>o.indexOf(a.id)>=0)}i.getSomeEditorContributions=r;function s(){return Zo.INSTANCE.getDiffEditorContributions()}i.getDiffEditorContributions=s})(h_||(h_={}));const cLe={EditorCommonContributions:"editor.contributions"};class Zo{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,n){this.editorContributions.push({id:e,ctor:t,instantiation:n})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}Zo.INSTANCE=new Zo;qn.add(cLe.EditorCommonContributions,Zo.INSTANCE);function FC(i){return i.register(),i}const VG=FC(new G1({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:E.MenubarEditMenu,group:"1_do",title:p({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:E.CommandPalette,group:"",title:p("undo","Undo"),order:1}]}));FC(new FG(VG,{id:"default:undo",precondition:void 0}));const HG=FC(new G1({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:E.MenubarEditMenu,group:"1_do",title:p({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:E.CommandPalette,group:"",title:p("redo","Redo"),order:1}]}));FC(new FG(HG,{id:"default:redo",precondition:void 0}));const dLe=FC(new G1({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:E.MenubarSelectionMenu,group:"1_basic",title:p({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:E.CommandPalette,group:"",title:p("selectAll","Select All"),order:1}]})),UG=Symbol("MicrotaskDelay");var $o=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},nv=globalThis&&globalThis.__asyncValues||function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=i[s]&&function(o){return new Promise(function(a,l){o=i[s](o),r(a,l,o.done,o.value)})}}function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}};function DA(i){return!!i&&typeof i.then=="function"}function Ui(i){const e=new vi,t=i(e.token),n=new Promise((r,s)=>{const o=e.token.onCancellationRequested(()=>{o.dispose(),e.dispose(),s(new pf)});Promise.resolve(t).then(a=>{o.dispose(),e.dispose(),r(a)},a=>{o.dispose(),e.dispose(),s(a)})});return new class{cancel(){e.cancel()}then(r,s){return n.then(r,s)}catch(r){return this.then(void 0,r)}finally(r){return n.finally(r)}}}function SD(i,e,t){return new Promise((n,r)=>{const s=e.onCancellationRequested(()=>{s.dispose(),n(t)});i.then(n,r).finally(()=>s.dispose())})}class uLe{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{if(this.queuedPromise=null,this.isDisposed)return;const n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(r=>{this.activePromise=null,t(r)},r=>{this.activePromise=null,n(r)})})}dispose(){this.isDisposed=!0}}const hLe=(i,e)=>{let t=!0;const n=setTimeout(()=>{t=!1,e()},i);return{isTriggered:()=>t,dispose:()=>{clearTimeout(n),t=!1}}},fLe=i=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,i())}),{isTriggered:()=>e,dispose:()=>{e=!1}}};class Ha{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((r,s)=>{this.doResolve=r,this.doReject=s}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const r=this.task;return this.task=null,r()}}));const n=()=>{var r;this.deferred=null,(r=this.doResolve)===null||r===void 0||r.call(this,null)};return this.deferred=t===UG?fLe(n):hLe(t,n),this.completionPromise}isTriggered(){var e;return!!(!((e=this.deferred)===null||e===void 0)&&e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.doReject)===null||e===void 0||e.call(this,new pf),this.completionPromise=null)}cancelTimeout(){var e;(e=this.deferred)===null||e===void 0||e.dispose(),this.deferred=null}dispose(){this.cancel()}}class jG{constructor(e){this.delayer=new Ha(e),this.throttler=new uLe}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}function Vh(i,e){return e?new Promise((t,n)=>{const r=setTimeout(()=>{s.dispose(),t()},i),s=e.onCancellationRequested(()=>{clearTimeout(r),s.dispose(),n(new pf)})}):Ui(t=>Vh(i,t))}function Hh(i,e=0,t){const n=setTimeout(()=>{i(),t&&r.dispose()},e),r=st(()=>{clearTimeout(n),t==null||t.deleteAndLeak(r)});return t==null||t.add(r),r}function zG(i,e=n=>!!n,t=null){let n=0;const r=i.length,s=()=>{if(n>=r)return Promise.resolve(t);const o=i[n++];return Promise.resolve(o()).then(l=>e(l)?Promise.resolve(l):s())};return s()}class za{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class BC{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}class fn{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;(e=this.runner)===null||e===void 0||e.call(this)}}let Ud;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?Ud=i=>{Pq(()=>{if(e)return;const t=Date.now()+15;i(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,t-Date.now())}}))});let e=!1;return{dispose(){e||(e=!0)}}}:Ud=(i,e)=>{const t=requestIdleCallback(i,typeof e=="number"?{timeout:e}:void 0);let n=!1;return{dispose(){n||(n=!0,cancelIdleCallback(t))}}}})();class px{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=Ud(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class xD{get isRejected(){var e;return((e=this.outcome)===null||e===void 0?void 0:e.outcome)===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new pf)}}var IA;(function(i){function e(n){return $o(this,void 0,void 0,function*(){let r;const s=yield Promise.all(n.map(o=>o.then(a=>a,a=>{r||(r=a)})));if(typeof r<"u")throw r;return s})}i.settled=e;function t(n){return new Promise((r,s)=>$o(this,void 0,void 0,function*(){try{yield n(r,s)}catch(o){s(o)}}))}i.withAsyncBody=t})(IA||(IA={}));class xi{static fromArray(e){return new xi(t=>{t.emitMany(e)})}static fromPromise(e){return new xi(t=>$o(this,void 0,void 0,function*(){t.emitMany(yield e)}))}static fromPromises(e){return new xi(t=>$o(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>$o(this,void 0,void 0,function*(){return t.emitOne(yield n)})))}))}static merge(e){return new xi(t=>$o(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>{var r,s,o;return $o(this,void 0,void 0,function*(){var a,l,c,d;try{for(r=!0,s=nv(n);o=yield s.next(),a=o.done,!a;r=!0){d=o.value,r=!1;const u=d;t.emitOne(u)}}catch(u){l={error:u}}finally{try{!r&&!a&&(c=s.return)&&(yield c.call(s))}finally{if(l)throw l.error}}})}))}))}constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new H,queueMicrotask(()=>$o(this,void 0,void 0,function*(){const t={emitOne:n=>this.emitOne(n),emitMany:n=>this.emitMany(n),reject:n=>this.reject(n)};try{yield Promise.resolve(e(t)),this.resolve()}catch(n){this.reject(n)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}}))}[Symbol.asyncIterator](){let e=0;return{next:()=>$o(this,void 0,void 0,function*(){do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};yield Re.toPromise(this._onStateChanged.event)}while(!0)})}}static map(e,t){return new xi(n=>$o(this,void 0,void 0,function*(){var r,s,o,a;try{for(var l=!0,c=nv(e),d;d=yield c.next(),r=d.done,!r;l=!0){a=d.value,l=!1;const u=a;n.emitOne(t(u))}}catch(u){s={error:u}}finally{try{!l&&!r&&(o=c.return)&&(yield o.call(c))}finally{if(s)throw s.error}}}))}map(e){return xi.map(this,e)}static filter(e,t){return new xi(n=>$o(this,void 0,void 0,function*(){var r,s,o,a;try{for(var l=!0,c=nv(e),d;d=yield c.next(),r=d.done,!r;l=!0){a=d.value,l=!1;const u=a;t(u)&&n.emitOne(u)}}catch(u){s={error:u}}finally{try{!l&&!r&&(o=c.return)&&(yield o.call(c))}finally{if(s)throw s.error}}}))}filter(e){return xi.filter(this,e)}static coalesce(e){return xi.filter(e,t=>!!t)}coalesce(){return xi.coalesce(this)}static toPromise(e){var t,n,r,s,o,a,l;return $o(this,void 0,void 0,function*(){const c=[];try{for(t=!0,n=nv(e);r=yield n.next(),s=r.done,!s;t=!0){l=r.value,t=!1;const d=l;c.push(d)}}catch(d){o={error:d}}finally{try{!t&&!s&&(a=n.return)&&(yield a.call(n))}finally{if(o)throw o.error}}return c})}toPromise(){return xi.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}}xi.EMPTY=xi.fromArray([]);class gLe extends xi{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}}function pLe(i){const e=new vi,t=i(e.token);return new gLe(e,n=>$o(this,void 0,void 0,function*(){var r,s,o,a;const l=e.token.onCancellationRequested(()=>{l.dispose(),e.dispose(),n.reject(new pf)});try{try{for(var c=!0,d=nv(t),u;u=yield d.next(),r=u.done,!r;c=!0){a=u.value,c=!1;const h=a;if(e.token.isCancellationRequested)return;n.emitOne(h)}}catch(h){s={error:h}}finally{try{!c&&!r&&(o=d.return)&&(yield o.call(d))}finally{if(s)throw s.error}}l.dispose(),e.dispose()}catch(h){l.dispose(),e.dispose(),n.reject(h)}}))}const mLe="$initialize";let O8=!1;function RA(i){gf&&(O8||(O8=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(i.message))}class _Le{constructor(e,t,n,r){this.vsWorker=e,this.req=t,this.method=n,this.args=r,this.type=0}}class F8{constructor(e,t,n,r){this.vsWorker=e,this.seq=t,this.res=n,this.err=r,this.type=1}}class bLe{constructor(e,t,n,r){this.vsWorker=e,this.req=t,this.eventName=n,this.arg=r,this.type=2}}class vLe{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3}}class yLe{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class CLe{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const n=String(++this._lastSentReq);return new Promise((r,s)=>{this._pendingReplies[n]={resolve:r,reject:s},this._send(new _Le(this._workerId,n,e,t))})}listen(e,t){let n=null;const r=new H({onWillAddFirstListener:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,r),this._send(new bLe(this._workerId,n,e,t))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(n),this._send(new yLe(this._workerId,n)),n=null}});return r.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.method,e.args).then(r=>{this._send(new F8(this._workerId,t,r,void 0))},r=>{r.detail instanceof Error&&(r.detail=u8(r.detail)),this._send(new F8(this._workerId,t,void 0,u8(r)))})}_handleSubscribeEventMessage(e){const t=e.req,n=this._handler.handleEvent(e.eventName,e.arg)(r=>{this._send(new vLe(this._workerId,t,r))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===0)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class wLe extends q{constructor(e,t,n){super();let r=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",d=>{this._protocol.handleMessage(d)},d=>{r==null||r(d)})),this._protocol=new CLe({sendMessage:(d,u)=>{this._worker.postMessage(d,u)},handleMessage:(d,u)=>{if(typeof n[d]!="function")return Promise.reject(new Error("Missing method "+d+" on main thread host."));try{return Promise.resolve(n[d].apply(n,u))}catch(h){return Promise.reject(h)}},handleEvent:(d,u)=>{if(KG(d)){const h=n[d].call(n,u);if(typeof h!="function")throw new Error(`Missing dynamic event ${d} on main thread host.`);return h}if($G(d)){const h=n[d];if(typeof h!="function")throw new Error(`Missing event ${d} on main thread host.`);return h}throw new Error(`Malformed event name ${d}`)}}),this._protocol.setWorkerId(this._worker.getId());let s=null;const o=globalThis.require;typeof o<"u"&&typeof o.getConfig=="function"?s=o.getConfig():typeof globalThis.requirejs<"u"&&(s=globalThis.requirejs.s.contexts._.config);const a=y3(n);this._onModuleLoaded=this._protocol.sendMessage(mLe,[this._worker.getId(),JSON.parse(JSON.stringify(s)),t,a]);const l=(d,u)=>this._request(d,u),c=(d,u)=>this._protocol.listen(d,u);this._lazyProxy=new Promise((d,u)=>{r=u,this._onModuleLoaded.then(h=>{d(SLe(h,l,c))},h=>{u(h),this._onError("Worker failed to load "+t,h)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((n,r)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(n,r)},r)})}_onError(e,t){console.error(e),console.info(t)}}function $G(i){return i[0]==="o"&&i[1]==="n"&&lc(i.charCodeAt(2))}function KG(i){return/^onDynamic/.test(i)&&lc(i.charCodeAt(9))}function SLe(i,e,t){const n=o=>function(){const a=Array.prototype.slice.call(arguments,0);return e(o,a)},r=o=>function(a){return t(o,a)},s={};for(const o of i){if(KG(o)){s[o]=r(o);continue}if($G(o)){s[o]=t(o,void 0);continue}s[o]=n(o)}return s}function vu(i,e){var t;const n=globalThis.MonacoEnvironment;if(n!=null&&n.createTrustedTypesPolicy)try{return n.createTrustedTypesPolicy(i,e)}catch(r){ut(r);return}try{return(t=window.trustedTypes)===null||t===void 0?void 0:t.createPolicy(i,e)}catch(r){ut(r);return}}const B8=vu("defaultWorkerFactory",{createScriptURL:i=>i});function xLe(i){const e=globalThis.MonacoEnvironment;if(e){if(typeof e.getWorker=="function")return e.getWorker("workerMain.js",i);if(typeof e.getWorkerUrl=="function"){const t=e.getWorkerUrl("workerMain.js",i);return new Worker(B8?B8.createScriptURL(t):t,{name:i})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function TLe(i){return typeof i.then=="function"}class kLe{constructor(e,t,n,r,s){this.id=t,this.label=n;const o=xLe(n);TLe(o)?this.worker=o:this.worker=Promise.resolve(o),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(l){r(l.data)},a.onmessageerror=s,typeof a.addEventListener=="function"&&a.addEventListener("error",s)})}getId(){return this.id}postMessage(e,t){var n;(n=this.worker)===null||n===void 0||n.then(r=>{try{r.postMessage(e,t)}catch(s){ut(s),ut(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:s}))}})}dispose(){var e;(e=this.worker)===null||e===void 0||e.then(t=>t.terminate()),this.worker=null}}class TD{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,n){const r=++TD.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new kLe(e,r,this._label||"anonymous"+r,t,s=>{RA(s),this._webWorkerFailedBeforeError=s,n(s)})}}TD.LAST_WORKER_ID=0;var ki;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(ki||(ki={}));class ZR{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const n=e.findTokenIndexAtOffset(t-2),r=e.getStandardTokenType(n);return this.isOK(r)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){const r=String.fromCharCode(n);if(!this.open.includes(r)&&!this.close.includes(r))return r}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class LLe{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)Sb(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),Sb(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),Sb(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),Sb(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&Sb(this.autoClosingPairsCloseSingleChar,t.close,t)}}function Sb(i,e,t){i.has(e)?i.get(e).push(t):i.set(e,[t])}function kD(i,e){const t=i.getCount(),n=i.findTokenIndexAtOffset(e),r=i.getLanguageId(n);let s=n;for(;s+1<t&&i.getLanguageId(s+1)===r;)s++;let o=n;for(;o>0&&i.getLanguageId(o-1)===r;)o--;return new DLe(i,r,o,s+1,i.getStartOffset(o),i.getEndOffset(s))}class DLe{constructor(e,t,n,r,s,o){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=r,this.firstCharOffset=s,this._lastCharOffset=o}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}function nc(i){return(i&3)!==0}class G_{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new ZR(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new ZR({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new ZR({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:G_.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:G_.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}}G_.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`;G_.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;const W8=typeof Buffer<"u";let XR;class LD{static wrap(e){return W8&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new LD(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return W8?this.buffer.toString():(XR||(XR=new TextDecoder),XR.decode(this.buffer))}}function ILe(i,e){return i[e+0]<<0>>>0|i[e+1]<<8>>>0}function RLe(i,e,t){i[t+0]=e&255,e=e>>>8,i[t+1]=e&255}function cl(i,e){return i[e]*Math.pow(2,24)+i[e+1]*Math.pow(2,16)+i[e+2]*Math.pow(2,8)+i[e+3]}function dl(i,e,t){i[t+3]=e,e=e>>>8,i[t+2]=e,e=e>>>8,i[t+1]=e,e=e>>>8,i[t]=e}function V8(i,e){return i[e]}function H8(i,e,t){i[t]=e}let YR;function qG(){return YR||(YR=new TextDecoder("UTF-16LE")),YR}let QR;function ELe(){return QR||(QR=new TextDecoder("UTF-16BE")),QR}let JR;function GG(){return JR||(JR=Mq()?qG():ELe()),JR}function NLe(i,e,t){const n=new Uint16Array(i.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?ALe(i,e,t):qG().decode(n)}function ALe(i,e,t){const n=[];let r=0;for(let s=0;s<t;s++){const o=ILe(i,e);e+=2,n[r++]=String.fromCharCode(o)}return n.join("")}class Z1{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return GG().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||zi(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}class RT{constructor(e,t,n,r,s,o){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=r,this.forwardRegex=s,this.reversedRegex=o,this._openSet=RT._toSet(this.open),this._closeSet=RT._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}function PLe(i){const e=i.length;i=i.map(o=>[o[0].toLowerCase(),o[1].toLowerCase()]);const t=[];for(let o=0;o<e;o++)t[o]=o;const n=(o,a)=>{const[l,c]=o,[d,u]=a;return l===d||l===u||c===d||c===u},r=(o,a)=>{const l=Math.min(o,a),c=Math.max(o,a);for(let d=0;d<e;d++)t[d]===c&&(t[d]=l)};for(let o=0;o<e;o++){const a=i[o];for(let l=o+1;l<e;l++){const c=i[l];n(a,c)&&r(t[o],t[l])}}const s=[];for(let o=0;o<e;o++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===o){const[d,u]=i[c];a.push(d),l.push(u)}a.length>0&&s.push({open:a,close:l})}return s}class MLe{constructor(e,t){this._richEditBracketsBrand=void 0;const n=PLe(t);this.brackets=n.map((r,s)=>new RT(e,s,r.open,r.close,OLe(r.open,r.close,n,s),FLe(r.open,r.close,n,s))),this.forwardRegex=BLe(this.brackets),this.reversedRegex=WLe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const r of this.brackets){for(const s of r.open)this.textIsBracket[s]=r,this.textIsOpenBracket[s]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,s.length);for(const s of r.close)this.textIsBracket[s]=r,this.textIsOpenBracket[s]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,s.length)}}}function ZG(i,e,t,n){for(let r=0,s=e.length;r<s;r++){if(r===t)continue;const o=e[r];for(const a of o.open)a.indexOf(i)>=0&&n.push(a);for(const a of o.close)a.indexOf(i)>=0&&n.push(a)}}function XG(i,e){return i.length-e.length}function DD(i){if(i.length<=1)return i;const e=[],t=new Set;for(const n of i)t.has(n)||(e.push(n),t.add(n));return e}function OLe(i,e,t,n){let r=[];r=r.concat(i),r=r.concat(e);for(let s=0,o=r.length;s<o;s++)ZG(r[s],t,n,r);return r=DD(r),r.sort(XG),r.reverse(),ID(r)}function FLe(i,e,t,n){let r=[];r=r.concat(i),r=r.concat(e);for(let s=0,o=r.length;s<o;s++)ZG(r[s],t,n,r);return r=DD(r),r.sort(XG),r.reverse(),ID(r.map(K3))}function BLe(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=DD(e),ID(e)}function WLe(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=DD(e),ID(e.map(K3))}function VLe(i){const e=/^[\w ]+$/.test(i);return i=No(i),e?`\\b${i}\\b`:i}function ID(i){const e=`(${i.map(VLe).join(")|(")})`;return oG(e,!0)}const K3=function(){function i(n){const r=new Uint16Array(n.length);let s=0;for(let o=n.length-1;o>=0;o--)r[s++]=n.charCodeAt(o);return GG().decode(r)}let e=null,t=null;return function(r){return e!==r&&(e=r,t=i(e)),t}}();class wa{static _findPrevBracketInText(e,t,n,r){const s=n.match(e);if(!s)return null;const o=n.length-(s.index||0),a=s[0].length,l=r+o;return new D(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,r,s){const a=K3(n).substring(n.length-s,n.length-r);return this._findPrevBracketInText(e,t,a,r)}static findNextBracketInText(e,t,n,r){const s=n.match(e);if(!s)return null;const o=s.index||0,a=s[0].length;if(a===0)return null;const l=r+o;return new D(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,r,s){const o=n.substring(r,s);return this.findNextBracketInText(e,t,o,r)}}class HLe{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const r=n.charAt(n.length-1);e.push(r)}return Mh(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const r=t.findTokenIndexAtOffset(n-1);if(nc(t.getStandardTokenType(r)))return null;const s=this._richEditBrackets.reversedRegex,o=t.getLineContent().substring(0,n-1)+e,a=wa.findPrevBracketInRange(s,1,o,0,o.length);if(!a)return null;const l=o.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const d=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(d)?{matchOpenBracket:l}:null}}function Bw(i){return i.global&&(i.lastIndex=0),!0}class ULe{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&Bw(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&Bw(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&Bw(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&Bw(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class Om{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const n=Om._createOpenBracketRegExp(t[0]),r=Om._createCloseBracketRegExp(t[1]);n&&r&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:r})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,r){if(e>=3)for(let s=0,o=this._regExpRules.length;s<o;s++){const a=this._regExpRules[s];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:r},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&n.length>0&&r.length>0)for(let s=0,o=this._brackets.length;s<o;s++){const a=this._brackets[s];if(a.openRegExp.test(n)&&a.closeRegExp.test(r))return{indentAction:ki.IndentOutdent}}if(e>=2&&n.length>0){for(let s=0,o=this._brackets.length;s<o;s++)if(this._brackets[s].openRegExp.test(n))return{indentAction:ki.Indent}}return null}static _createOpenBracketRegExp(e){let t=No(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",Om._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=No(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,Om._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return ut(t),null}}}const Et=Lt("configurationService");function EA(i,e){const t=Object.create(null);for(const n in i)YG(t,n,i[n],e);return t}function YG(i,e,t,n){const r=e.split("."),s=r.pop();let o=i;for(let a=0;a<r.length;a++){const l=r[a];let c=o[l];switch(typeof c){case"undefined":c=o[l]=Object.create(null);break;case"object":break;default:n(`Ignoring ${e} as ${r.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}o=c}if(typeof o=="object"&&o!==null)try{o[s]=t}catch{n(`Ignoring ${e} as ${r.join(".")} is ${JSON.stringify(o)}`)}else n(`Ignoring ${e} as ${r.join(".")} is ${JSON.stringify(o)}`)}function jLe(i,e){const t=e.split(".");QG(i,t)}function QG(i,e){const t=e.shift();if(e.length===0){delete i[t];return}if(Object.keys(i).indexOf(t)!==-1){const n=i[t];typeof n=="object"&&!Array.isArray(n)&&(QG(n,e),Object.keys(n).length===0&&delete i[t])}}function U8(i,e,t){function n(o,a){let l=o;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const r=e.split("."),s=n(i,r);return typeof s>"u"?t:s}function zLe(i){return i.replace(/[\[\]]/g,"")}const Fn=Lt("languageService");class cc{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}const JG=[];function Wt(i,e,t){e instanceof cc||(e=new cc(e,[],!!t)),JG.push([i,e])}function j8(){return JG}const ui=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),RD={JSONContribution:"base.contributions.json"};function $Le(i){return i.length>0&&i.charAt(i.length-1)==="#"?i.substring(0,i.length-1):i}class KLe{constructor(){this._onDidChangeSchema=new H,this.schemasById={}}registerSchema(e,t){this.schemasById[$Le(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const qLe=new KLe;qn.add(RD.JSONContribution,qLe);const Zl={Configuration:"base.contributions.configuration"},xb="vscode://schemas/settings/resourceLanguage",z8=qn.as(RD.JSONContribution);class GLe{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new H,this._onDidUpdateConfiguration=new H,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:p("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},z8.registerSchema(xb,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=new Set;this.doRegisterConfigurations(e,t,n),z8.registerSchema(xb,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){var n;const r=[];for(const{overrides:s,source:o}of e)for(const a in s)if(t.add(a),Uh.test(a)){const l=this.configurationDefaultsOverrides.get(a),c=(n=l==null?void 0:l.valuesSources)!==null&&n!==void 0?n:new Map;if(o)for(const f of Object.keys(s[a]))c.set(f,o);const d=Object.assign(Object.assign({},(l==null?void 0:l.value)||{}),s[a]);this.configurationDefaultsOverrides.set(a,{source:o,value:d,valuesSources:c});const u=zLe(a),h={type:"object",default:d,description:p("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",u),$ref:xb,defaultDefaultValue:d,source:bs(o)?void 0:o,defaultValueSource:o};r.push(...ET(a)),this.configurationProperties[a]=h,this.defaultLanguageConfigurationOverridesNode.properties[a]=h}else{this.configurationDefaultsOverrides.set(a,{value:s[a],source:o});const l=this.configurationProperties[a];l&&(this.updatePropertyDefaultValue(a,l),this.updateSchema(a,l))}this.doRegisterOverrideIdentifiers(r)}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,n){e.forEach(r=>{this.validateAndRegisterProperties(r,t,r.extensionInfo,r.restrictedProperties,void 0,n),this.configurationContributors.push(r),this.registerJSONConfiguration(r)})}validateAndRegisterProperties(e,t=!0,n,r,s=3,o){var a;s=yo(e.scope)?s:e.scope;const l=e.properties;if(l)for(const d in l){const u=l[d];if(t&&YLe(d,u)){delete l[d];continue}if(u.source=n,u.defaultDefaultValue=l[d].default,this.updatePropertyDefaultValue(d,u),Uh.test(d)?u.scope=void 0:(u.scope=yo(u.scope)?s:u.scope,u.restricted=yo(u.restricted)?!!(r!=null&&r.includes(d)):u.restricted),l[d].hasOwnProperty("included")&&!l[d].included){this.excludedConfigurationProperties[d]=l[d],delete l[d];continue}else this.configurationProperties[d]=l[d],!((a=l[d].policy)===null||a===void 0)&&a.name&&this.policyConfigurations.set(l[d].policy.name,d);!l[d].deprecationMessage&&l[d].markdownDeprecationMessage&&(l[d].deprecationMessage=l[d].markdownDeprecationMessage),o.add(d)}const c=e.allOf;if(c)for(const d of c)this.validateAndRegisterProperties(d,t,n,r,s,o)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=n=>{const r=n.properties;if(r)for(const o in r)this.updateSchema(o,r[o]);const s=n.allOf;s==null||s.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:p("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:p("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:xb};this.updatePropertyDefaultValue(t,n)}}registerOverridePropertyPatternKey(){p("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),p("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const n=this.configurationDefaultsOverrides.get(e);let r=n==null?void 0:n.value,s=n==null?void 0:n.source;Zs(r)&&(r=t.defaultDefaultValue,s=void 0),Zs(r)&&(r=XLe(t.type)),t.default=r,t.defaultValueSource=s}}const eZ="\\[([^\\]]+)\\]",$8=new RegExp(eZ,"g"),ZLe=`^(${eZ})+$`,Uh=new RegExp(ZLe);function ET(i){const e=[];if(Uh.test(i)){let t=$8.exec(i);for(;t!=null&&t.length;){const n=t[1].trim();n&&e.push(n),t=$8.exec(i)}}return Mh(e)}function XLe(i){switch(Array.isArray(i)?i[0]:i){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const mx=new GLe;qn.add(Zl.Configuration,mx);function YLe(i,e){var t,n,r,s;return i.trim()?Uh.test(i)?p("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",i):mx.getConfigurationProperties()[i]!==void 0?p("config.property.duplicate","Cannot register '{0}'. This property is already registered.",i):!((t=e.policy)===null||t===void 0)&&t.name&&mx.getPolicyConfigurations().get((n=e.policy)===null||n===void 0?void 0:n.name)!==void 0?p("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",i,(r=e.policy)===null||r===void 0?void 0:r.name,mx.getPolicyConfigurations().get((s=e.policy)===null||s===void 0?void 0:s.name)):null:p("config.property.empty","Cannot register an empty property")}const QLe={ModesRegistry:"editor.modesRegistry"};class JLe{constructor(){this._onDidChangeLanguages=new H,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}const Z_=new JLe;qn.add(QLe.ModesRegistry,Z_);const Eo="plaintext",eDe=".txt";Z_.registerLanguage({id:Eo,extensions:[eDe],aliases:[p("plainText.alias","Plain Text"),"text"],mimetypes:[ui.text]});qn.as(Zl.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class tDe{constructor(e,t){this.languageId=e;const n=t.brackets?K8(t.brackets):[],r=new p8(a=>{const l=new Set;return{info:new nDe(this,a,l),closing:l}}),s=new p8(a=>{const l=new Set,c=new Set;return{info:new iDe(this,a,l,c),opening:l,openingColorized:c}});for(const[a,l]of n){const c=r.get(a),d=s.get(l);c.closing.add(d.info),d.opening.add(c.info)}const o=t.colorizedBracketPairs?K8(t.colorizedBracketPairs):n.filter(a=>!(a[0]==="<"&&a[1]===">"));for(const[a,l]of o){const c=r.get(a),d=s.get(l);c.closing.add(d.info),d.openingColorized.add(c.info),d.opening.add(c.info)}this._openingBrackets=new Map([...r.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...s.cachedValues].map(([a,l])=>[a,l.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}}function K8(i){return i.filter(([e,t])=>e!==""&&t!=="")}class tZ{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class nDe extends tZ{constructor(e,t,n){super(e,t),this.openedBrackets=n,this.isOpeningBracket=!0}}class iDe extends tZ{constructor(e,t,n,r){super(e,t),this.openingBrackets=n,this.openingColorizedBrackets=r,this.isOpeningBracket=!1}closes(e){return e.config!==this.config?!1:this.openingBrackets.has(e)}closesColorized(e){return e.config!==this.config?!1:this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}var rDe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},q8=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class eE{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const wn=Lt("languageConfigurationService");let NA=class extends q{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new lDe),this.onDidChangeEmitter=this._register(new H),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const n=new Set(Object.values(AA));this._register(this.configurationService.onDidChangeConfiguration(r=>{const s=r.change.keys.some(a=>n.has(a)),o=r.change.overrides.filter(([a,l])=>l.some(c=>n.has(c))).map(([a])=>a);if(s)this.configurations.clear(),this.onDidChangeEmitter.fire(new eE(void 0));else for(const a of o)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new eE(a)))})),this._register(this._registry.onDidChange(r=>{this.configurations.delete(r.languageId),this.onDidChangeEmitter.fire(new eE(r.languageId))}))}register(e,t,n){return this._registry.register(e,t,n)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=sDe(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};NA=rDe([q8(0,Et),q8(1,Fn)],NA);function sDe(i,e,t,n){let r=e.getLanguageConfiguration(i);if(!r){if(!n.isRegisteredLanguageId(i))return new g_(i,{});r=new g_(i,{})}const s=oDe(r.languageId,t),o=iZ([r.underlyingConfig,s]);return new g_(r.languageId,o)}const AA={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function oDe(i,e){const t=e.getValue(AA.brackets,{overrideIdentifier:i}),n=e.getValue(AA.colorizedBracketPairs,{overrideIdentifier:i});return{brackets:G8(t),colorizedBracketPairs:G8(n)}}function G8(i){if(Array.isArray(i))return i.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function nZ(i,e,t){const n=i.getLineContent(e);let r=pn(n);return r.length>t-1&&(r=r.substring(0,t-1)),r}function f_(i,e,t){i.tokenization.forceTokenization(e);const n=i.tokenization.getLineTokens(e),r=typeof t>"u"?i.getLineMaxColumn(e)-1:t-1;return kD(n,r)}class aDe{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const n=new Z8(e,t,++this._order);return this._entries.push(n),this._resolved=null,st(()=>{for(let r=0;r<this._entries.length;r++)if(this._entries[r]===n){this._entries.splice(r,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new g_(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(Z8.cmp),iZ(this._entries.map(e=>e.configuration)))}}function iZ(i){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of i)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class Z8{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class X8{constructor(e){this.languageId=e}}class lDe extends q{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new H),this.onDidChange=this._onDidChange.event,this._register(this.register(Eo,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,n=0){let r=this._entries.get(e);r||(r=new aDe(e),this._entries.set(e,r));const s=r.register(t,n);return this._onDidChange.fire(new X8(e)),st(()=>{s.dispose(),this._onDidChange.fire(new X8(e))})}getLanguageConfiguration(e){const t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}}class g_{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new Om(this.underlyingConfig):null,this.comments=g_._handleComments(this.underlyingConfig),this.characterPair=new G_(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||S3,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new ULe(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new tDe(e,this.underlyingConfig)}getWordDefinition(){return Bq(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new MLe(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new HLe(this.brackets)),this._electricCharacter}onEnter(e,t,n,r){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,r):null}getAutoClosingPairs(){return new LLe(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){const[r,s]=t.blockComment;n.blockCommentStartToken=r,n.blockCommentEndToken=s}return n}}Wt(wn,NA,1);class Fu{constructor(e,t,n,r){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=r}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}function rZ(i){return ED(i,0)}function ED(i,e){switch(typeof i){case"object":return i===null?jd(349,e):Array.isArray(i)?dDe(i,e):uDe(i,e);case"string":return q3(i,e);case"boolean":return cDe(i,e);case"number":return jd(i,e);case"undefined":return jd(937,e);default:return jd(617,e)}}function jd(i,e){return(e<<5)-e+i|0}function cDe(i,e){return jd(i?433:863,e)}function q3(i,e){e=jd(149417,e);for(let t=0,n=i.length;t<n;t++)e=jd(i.charCodeAt(t),e);return e}function dDe(i,e){return e=jd(104579,e),i.reduce((t,n)=>ED(n,t),e)}function uDe(i,e){return e=jd(181387,e),Object.keys(i).sort().reduce((t,n)=>(t=q3(n,t),ED(i[n],t)),e)}function tE(i,e,t=32){const n=t-e,r=~((1<<n)-1);return(i<<e|(r&i)>>>n)>>>0}function Y8(i,e=0,t=i.byteLength,n=0){for(let r=0;r<t;r++)i[e+r]=n}function hDe(i,e,t="0"){for(;i.length<e;)i=t+i;return i}function Tb(i,e=32){return i instanceof ArrayBuffer?Array.from(new Uint8Array(i)).map(t=>t.toString(16).padStart(2,"0")).join(""):hDe((i>>>0).toString(16),e/4)}class ND{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const n=this._buff;let r=this._buffLen,s=this._leftoverHighSurrogate,o,a;for(s!==0?(o=s,a=-1,s=0):(o=e.charCodeAt(0),a=0);;){let l=o;if(zi(o))if(a+1<t){const c=e.charCodeAt(a+1);$g(c)?(a++,l=P3(o,c)):l=65533}else{s=o;break}else $g(o)&&(l=65533);if(r=this._push(n,r,l),a++,a<t)o=e.charCodeAt(a);else break}this._buffLen=r,this._leftoverHighSurrogate=s}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),Tb(this._h0)+Tb(this._h1)+Tb(this._h2)+Tb(this._h3)+Tb(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,Y8(this._buff,this._buffLen),this._buffLen>56&&(this._step(),Y8(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=ND._bigBlock32,t=this._buffDV;for(let u=0;u<64;u+=4)e.setUint32(u,t.getUint32(u,!1),!1);for(let u=64;u<320;u+=4)e.setUint32(u,tE(e.getUint32(u-12,!1)^e.getUint32(u-32,!1)^e.getUint32(u-56,!1)^e.getUint32(u-64,!1),1),!1);let n=this._h0,r=this._h1,s=this._h2,o=this._h3,a=this._h4,l,c,d;for(let u=0;u<80;u++)u<20?(l=r&s|~r&o,c=1518500249):u<40?(l=r^s^o,c=1859775393):u<60?(l=r&s|r&o|s&o,c=2400959708):(l=r^s^o,c=3395469782),d=tE(n,5)+l+a+c+e.getUint32(u*4,!1)&4294967295,a=o,o=s,s=tE(r,30),r=n,n=d;this._h0=this._h0+n&4294967295,this._h1=this._h1+r&4294967295,this._h2=this._h2+s&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}}ND._bigBlock32=new DataView(new ArrayBuffer(320));class Q8{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,r=e.length;n<r;n++)t[n]=e.charCodeAt(n);return t}}function fDe(i,e,t){return new fc(new Q8(i),new Q8(e)).ComputeDiff(t).changes}class rm{static Assert(e,t){if(!e)throw new Error(t)}}class sm{static Copy(e,t,n,r,s){for(let o=0;o<s;o++)n[r+o]=e[t+o]}static Copy2(e,t,n,r,s){for(let o=0;o<s;o++)n[r+o]=e[t+o]}}class J8{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Fu(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class fc{constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[r,s,o]=fc._getElements(e),[a,l,c]=fc._getElements(t);this._hasStrings=o&&c,this._originalStringElements=r,this._originalElementsOrHash=s,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(fc._isStringArray(t)){const n=new Int32Array(t.length);for(let r=0,s=t.length;r<s;r++)n[r]=q3(t[r],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const n=fc._getStrictElement(this._originalSequence,e),r=fc._getStrictElement(this._modifiedSequence,t);return n===r}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,r,s){const o=[!1];let a=this.ComputeDiffRecursive(e,t,n,r,o);return s&&(a=this.PrettifyChanges(a)),{quitEarly:o[0],changes:a}}ComputeDiffRecursive(e,t,n,r,s){for(s[0]=!1;e<=t&&n<=r&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&r>=n&&this.ElementsAreEqual(t,r);)t--,r--;if(e>t||n>r){let u;return n<=r?(rm.Assert(e===t+1,"originalStart should only be one more than originalEnd"),u=[new Fu(e,0,n,r-n+1)]):e<=t?(rm.Assert(n===r+1,"modifiedStart should only be one more than modifiedEnd"),u=[new Fu(e,t-e+1,n,0)]):(rm.Assert(e===t+1,"originalStart should only be one more than originalEnd"),rm.Assert(n===r+1,"modifiedStart should only be one more than modifiedEnd"),u=[]),u}const o=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,r,o,a,s),c=o[0],d=a[0];if(l!==null)return l;if(!s[0]){const u=this.ComputeDiffRecursive(e,c,n,d,s);let h=[];return s[0]?h=[new Fu(c+1,t-(c+1)+1,d+1,r-(d+1)+1)]:h=this.ComputeDiffRecursive(c+1,t,d+1,r,s),this.ConcatenateChanges(u,h)}return[new Fu(e,t-e+1,n,r-n+1)]}WALKTRACE(e,t,n,r,s,o,a,l,c,d,u,h,f,g,m,y,b,v){let C=null,w=null,S=new J8,L=t,T=n,I=f[0]-y[0]-r,R=-1073741824,B=this.m_forwardHistory.length-1;do{const V=I+e;V===L||V<T&&c[V-1]<c[V+1]?(u=c[V+1],g=u-I-r,u<R&&S.MarkNextChange(),R=u,S.AddModifiedElement(u+1,g),I=V+1-e):(u=c[V-1]+1,g=u-I-r,u<R&&S.MarkNextChange(),R=u-1,S.AddOriginalElement(u,g+1),I=V-1-e),B>=0&&(c=this.m_forwardHistory[B],e=c[0],L=1,T=c.length-1)}while(--B>=-1);if(C=S.getReverseChanges(),v[0]){let V=f[0]+1,F=y[0]+1;if(C!==null&&C.length>0){const W=C[C.length-1];V=Math.max(V,W.getOriginalEnd()),F=Math.max(F,W.getModifiedEnd())}w=[new Fu(V,h-V+1,F,m-F+1)]}else{S=new J8,L=o,T=a,I=f[0]-y[0]-l,R=1073741824,B=b?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const V=I+s;V===L||V<T&&d[V-1]>=d[V+1]?(u=d[V+1]-1,g=u-I-l,u>R&&S.MarkNextChange(),R=u+1,S.AddOriginalElement(u+1,g+1),I=V+1-s):(u=d[V-1],g=u-I-l,u>R&&S.MarkNextChange(),R=u,S.AddModifiedElement(u+1,g+1),I=V-1-s),B>=0&&(d=this.m_reverseHistory[B],s=d[0],L=1,T=d.length-1)}while(--B>=-1);w=S.getChanges()}return this.ConcatenateChanges(C,w)}ComputeRecursionPoint(e,t,n,r,s,o,a){let l=0,c=0,d=0,u=0,h=0,f=0;e--,n--,s[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const g=t-e+(r-n),m=g+1,y=new Int32Array(m),b=new Int32Array(m),v=r-n,C=t-e,w=e-n,S=t-r,T=(C-v)%2===0;y[v]=e,b[C]=t,a[0]=!1;for(let I=1;I<=g/2+1;I++){let R=0,B=0;d=this.ClipDiagonalBound(v-I,I,v,m),u=this.ClipDiagonalBound(v+I,I,v,m);for(let F=d;F<=u;F+=2){F===d||F<u&&y[F-1]<y[F+1]?l=y[F+1]:l=y[F-1]+1,c=l-(F-v)-w;const W=l;for(;l<t&&c<r&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(y[F]=l,l+c>R+B&&(R=l,B=c),!T&&Math.abs(F-C)<=I-1&&l>=b[F])return s[0]=l,o[0]=c,W<=b[F]&&1447>0&&I<=1447+1?this.WALKTRACE(v,d,u,w,C,h,f,S,y,b,l,t,s,c,r,o,T,a):null}const V=(R-e+(B-n)-I)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(R,V))return a[0]=!0,s[0]=R,o[0]=B,V>0&&1447>0&&I<=1447+1?this.WALKTRACE(v,d,u,w,C,h,f,S,y,b,l,t,s,c,r,o,T,a):(e++,n++,[new Fu(e,t-e+1,n,r-n+1)]);h=this.ClipDiagonalBound(C-I,I,C,m),f=this.ClipDiagonalBound(C+I,I,C,m);for(let F=h;F<=f;F+=2){F===h||F<f&&b[F-1]>=b[F+1]?l=b[F+1]-1:l=b[F-1],c=l-(F-C)-S;const W=l;for(;l>e&&c>n&&this.ElementsAreEqual(l,c);)l--,c--;if(b[F]=l,T&&Math.abs(F-v)<=I&&l<=y[F])return s[0]=l,o[0]=c,W>=y[F]&&1447>0&&I<=1447+1?this.WALKTRACE(v,d,u,w,C,h,f,S,y,b,l,t,s,c,r,o,T,a):null}if(I<=1447){let F=new Int32Array(u-d+2);F[0]=v-d+1,sm.Copy2(y,d,F,1,u-d+1),this.m_forwardHistory.push(F),F=new Int32Array(f-h+2),F[0]=C-h+1,sm.Copy2(b,h,F,1,f-h+1),this.m_reverseHistory.push(F)}}return this.WALKTRACE(v,d,u,w,C,h,f,S,y,b,l,t,s,c,r,o,T,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],r=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,s=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,o=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<r&&n.modifiedStart+n.modifiedLength<s&&(!o||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const c=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!c)break;n.originalStart++,n.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const n=e[t];let r=0,s=0;if(t>0){const u=e[t-1];r=u.originalStart+u.originalLength,s=u.modifiedStart+u.modifiedLength}const o=n.originalLength>0,a=n.modifiedLength>0;let l=0,c=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let u=1;;u++){const h=n.originalStart-u,f=n.modifiedStart-u;if(h<r||f<s||o&&!this.OriginalElementsAreEqual(h,h+n.originalLength)||a&&!this.ModifiedElementsAreEqual(f,f+n.modifiedLength))break;const m=(h===r&&f===s?5:0)+this._boundaryScore(h,n.originalLength,f,n.modifiedLength);m>c&&(c=m,l=u)}n.originalStart-=l,n.modifiedStart-=l;const d=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],d)){e[t-1]=d[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const r=e[t-1],s=e[t],o=s.originalStart-r.originalStart-r.originalLength,a=r.originalStart,l=s.originalStart+s.originalLength,c=l-a,d=r.modifiedStart,u=s.modifiedStart+s.modifiedLength,h=u-d;if(o<5&&c<20&&h<20){const f=this._findBetterContiguousSequence(a,c,d,h,o);if(f){const[g,m]=f;(g!==r.originalStart+r.originalLength||m!==r.modifiedStart+r.modifiedLength)&&(r.originalLength=g-r.originalStart,r.modifiedLength=m-r.modifiedStart,s.originalStart=g+o,s.modifiedStart=m+o,s.originalLength=l-s.originalStart,s.modifiedLength=u-s.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,r,s){if(t<s||r<s)return null;const o=e+t-s+1,a=n+r-s+1;let l=0,c=0,d=0;for(let u=e;u<o;u++)for(let h=n;h<a;h++){const f=this._contiguousSequenceScore(u,h,s);f>0&&f>l&&(l=f,c=u,d=h)}return l>0?[c,d]:null}_contiguousSequenceScore(e,t,n){let r=0;for(let s=0;s<n;s++){if(!this.ElementsAreEqual(e+s,t+s))return 0;r+=this._originalStringElements[e+s].length}return r}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,r){const s=this._OriginalRegionIsBoundary(e,t)?1:0,o=this._ModifiedRegionIsBoundary(n,r)?1:0;return s+o}ConcatenateChanges(e,t){const n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const r=new Array(e.length+t.length-1);return sm.Copy(e,0,r,0,e.length-1),r[e.length-1]=n[0],sm.Copy(t,1,r,e.length,t.length-1),r}else{const r=new Array(e.length+t.length);return sm.Copy(e,0,r,0,e.length),sm.Copy(t,0,r,e.length,t.length),r}}ChangesOverlap(e,t,n){if(rm.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),rm.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const r=e.originalStart;let s=e.originalLength;const o=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(s=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new Fu(r,s,o,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,r){if(e>=0&&e<r)return e;const s=n,o=r-n-1,a=t%2===0;if(e<0){const l=s%2===0;return a===l?0:1}else{const l=o%2===0;return a===l?r-1:r-2}}}function NT(i){return i<0?0:i>255?255:i|0}function om(i){return i<0?0:i>4294967295?4294967295:i|0}class gDe{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=om(e);const n=this.values,r=this.prefixSum,s=t.length;return s===0?!1:(this.values=new Uint32Array(n.length+s),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+s),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(r.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=om(e),t=om(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=om(e),t=om(t);const n=this.values,r=this.prefixSum;if(e>=n.length)return!1;const s=n.length-e;return t>=s&&(t=s),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(r.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=om(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,r=0,s=0,o=0;for(;t<=n;)if(r=t+(n-t)/2|0,s=this.prefixSum[r],o=s-this.values[r],e<o)n=r-1;else if(e>=s)t=r+1;else break;return new sZ(r,e-o)}}class pDe{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new sZ(t,e-n)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=oD(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const n=this._values[e],r=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=r+n;for(let s=0;s<n;s++)this._indexBySum[r+s]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class sZ{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class mDe{constructor(e,t,n,r){this._uri=e,this._lines=t,this._eol=n,this._versionId=r,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new U(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let r=0;r<t;r++)n[r]=this._lines[r].length+e;this._lineStarts=new gDe(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const n=Kc(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);const r=new Uint32Array(n.length-1);for(let s=1;s<n.length;s++)this._lines.splice(e.lineNumber+s-1,0,n[s]),r[s-1]=n[s].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,r)}}class X1{constructor(e){const t=NT(e);this._defaultValue=t,this._asciiMap=X1._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const n=NT(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class AT{constructor(){this._actual=new X1(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}clear(){return this._actual.clear()}}class _De{constructor(e,t,n){const r=new Uint8Array(e*t);for(let s=0,o=e*t;s<o;s++)r[s]=n;this._data=r,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}}class bDe{constructor(e){let t=0,n=0;for(let s=0,o=e.length;s<o;s++){const[a,l,c]=e[s];l>t&&(t=l),a>n&&(n=a),c>n&&(n=c)}t++,n++;const r=new _De(n,t,0);for(let s=0,o=e.length;s<o;s++){const[a,l,c]=e[s];r.set(a,l,c)}this._states=r,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let nE=null;function vDe(){return nE===null&&(nE=new bDe([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),nE}let kb=null;function yDe(){if(kb===null){kb=new X1(0);const i=` 	<>'"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…`;for(let t=0;t<i.length;t++)kb.set(i.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)kb.set(e.charCodeAt(t),2)}return kb}class PT{static _createLink(e,t,n,r,s){let o=s-1;do{const a=t.charCodeAt(o);if(e.get(a)!==2)break;o--}while(o>r);if(r>0){const a=t.charCodeAt(r-1),l=t.charCodeAt(o);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&o--}return{range:{startLineNumber:n,startColumn:r+1,endLineNumber:n,endColumn:o+2},url:t.substring(r,o+1)}}static computeLinks(e,t=vDe()){const n=yDe(),r=[];for(let s=1,o=e.getLineCount();s<=o;s++){const a=e.getLineContent(s),l=a.length;let c=0,d=0,u=0,h=1,f=!1,g=!1,m=!1,y=!1;for(;c<l;){let b=!1;const v=a.charCodeAt(c);if(h===13){let C;switch(v){case 40:f=!0,C=0;break;case 41:C=f?0:1;break;case 91:m=!0,g=!0,C=0;break;case 93:m=!1,C=g?0:1;break;case 123:y=!0,C=0;break;case 125:C=y?0:1;break;case 39:case 34:case 96:u===v?C=1:u===39||u===34||u===96?C=0:C=1;break;case 42:C=u===42?1:0;break;case 124:C=u===124?1:0;break;case 32:C=m?0:1;break;default:C=n.get(v)}C===1&&(r.push(PT._createLink(n,a,s,d,c)),b=!0)}else if(h===12){let C;v===91?(g=!0,C=0):C=n.get(v),C===1?b=!0:h=13}else h=t.nextState(h,v),h===0&&(b=!0);b&&(h=1,f=!1,g=!1,y=!1,d=c+1,u=v),c++}h===13&&r.push(PT._createLink(n,a,s,d,l))}return r}}function CDe(i){return!i||typeof i.getLineCount!="function"||typeof i.getLineContent!="function"?[]:PT.computeLinks(i)}class PA{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,n,r,s){if(e&&t){const o=this.doNavigateValueSet(t,s);if(o)return{range:e,value:o}}if(n&&r){const o=this.doNavigateValueSet(r,s);if(o)return{range:n,value:o}}return null}doNavigateValueSet(e,t){const n=this.numberReplace(e,t);return n!==null?n:this.textReplace(e,t)}numberReplace(e,t){const n=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let r=Number(e);const s=parseFloat(e);return!isNaN(r)&&!isNaN(s)&&r===s?r===0&&!t?null:(r=Math.floor(r*n),r+=t?n:-n,String(r/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let r=null;for(let s=0,o=e.length;r===null&&s<o;s++)r=this.valueSetReplace(e[s],t,n);return r}valueSetReplace(e,t,n){let r=e.indexOf(t);return r>=0?(r+=n?1:-1,r<0?r=e.length-1:r%=e.length,e[r]):null}}PA.INSTANCE=new PA;class wDe extends X1{constructor(e){super(0);for(let t=0,n=e.length;t<n;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}}function SDe(i){const e={};return t=>(e.hasOwnProperty(t)||(e[t]=i(t)),e[t])}const da=SDe(i=>new wDe(i));var Ao;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(Ao||(Ao={}));var p_;(function(i){i[i.Left=1]="Left",i[i.Right=2]="Right"})(p_||(p_={}));var Js;(function(i){i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter"})(Js||(Js={}));var xl;(function(i){i[i.Both=0]="Both",i[i.Right=1]="Right",i[i.Left=2]="Left",i[i.None=3]="None"})(xl||(xl={}));class _x{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&Ro(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class j0{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}function xDe(i){return i&&typeof i.read=="function"}class iE{constructor(e,t,n,r,s,o){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=r,this.isAutoWhitespaceEdit=s,this._isTracked=o}}class TDe{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}class kDe{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}}function LDe(i){return!i.isTooLargeForSyncing()&&!i.isForSimpleWidget}const DDe=999;class Vf{constructor(e,t,n,r){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=r}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=IDe(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=oG(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new TDe(t,this.wordSeparators?da(this.wordSeparators):null,n?this.searchString:null)}}function IDe(i){if(!i||i.length===0)return!1;for(let e=0,t=i.length;e<t;e++){const n=i.charCodeAt(e);if(n===10)return!0;if(n===92){if(e++,e>=t)break;const r=i.charCodeAt(e);if(r===110||r===114||r===87)return!0}}return!1}function Yf(i,e,t){if(!t)return new j0(i,null);const n=[];for(let r=0,s=e.length;r<s;r++)n[r]=e[r];return new j0(i,n)}class e6{constructor(e){const t=[];let n=0;for(let r=0,s=e.length;r<s;r++)e.charCodeAt(r)===10&&(t[n++]=r);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,r=t.length-1;if(r===-1||e<=t[0])return 0;for(;n<r;){const s=n+((r-n)/2>>0);t[s]>=e?r=s-1:t[s+1]>=e?(n=s,r=s):n=s+1}return n+1}}class Ww{static findMatches(e,t,n,r,s){const o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,n,new Fm(o.wordSeparators,o.regex),r,s):this._doFindMatchesLineByLine(e,n,o,r,s):[]}static _getMultilineMatchRange(e,t,n,r,s,o){let a,l=0;r?(l=r.findLineFeedCountBeforeOffset(s),a=t+s+l):a=t+s;let c;if(r){const f=r.findLineFeedCountBeforeOffset(s+o.length)-l;c=a+o.length+f}else c=a+o.length;const d=e.getPositionAt(a),u=e.getPositionAt(c);return new D(d.lineNumber,d.column,u.lineNumber,u.column)}static _doFindMatchesMultiline(e,t,n,r,s){const o=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new e6(a):null,c=[];let d=0,u;for(n.reset(0);u=n.next(a);)if(c[d++]=Yf(this._getMultilineMatchRange(e,o,a,l,u.index,u[0]),u,r),d>=s)return c;return c}static _doFindMatchesLineByLine(e,t,n,r,s){const o=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,c,t.startLineNumber,t.startColumn-1,a,o,r,s),o}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,o,r,s);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<s;c++)a=this._findMatchesInLine(n,e.getLineContent(c),c,0,a,o,r,s);if(a<s){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,c,t.endLineNumber,0,a,o,r,s)}return o}static _findMatchesInLine(e,t,n,r,s,o,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,f=h.length,g=t.length;let m=-f;for(;(m=t.indexOf(h,m+f))!==-1;)if((!c||G3(c,t,g,m,f))&&(o[s++]=new j0(new D(n,m+1+r,n,m+1+f+r),null),s>=l))return s;return s}const d=new Fm(e.wordSeparators,e.regex);let u;d.reset(0);do if(u=d.next(t),u&&(o[s++]=Yf(new D(n,u.index+1+r,n,u.index+1+u[0].length+r),u,a),s>=l))return s;while(u);return s}static findNextMatch(e,t,n,r){const s=t.parseSearchRequest();if(!s)return null;const o=new Fm(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindNextMatchMultiline(e,n,o,r):this._doFindNextMatchLineByLine(e,n,o,r)}static _doFindNextMatchMultiline(e,t,n,r){const s=new U(t.lineNumber,1),o=e.getOffsetAt(s),a=e.getLineCount(),l=e.getValueInRange(new D(s.lineNumber,s.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new e6(l):null;n.reset(t.column-1);const d=n.next(l);return d?Yf(this._getMultilineMatchRange(e,o,l,c,d.index,d[0]),d,r):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new U(1,1),n,r):null}static _doFindNextMatchLineByLine(e,t,n,r){const s=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o),l=this._findFirstMatchInLine(n,a,o,t.column,r);if(l)return l;for(let c=1;c<=s;c++){const d=(o+c-1)%s,u=e.getLineContent(d+1),h=this._findFirstMatchInLine(n,u,d+1,1,r);if(h)return h}return null}static _findFirstMatchInLine(e,t,n,r,s){e.reset(r-1);const o=e.next(t);return o?Yf(new D(n,o.index+1,n,o.index+1+o[0].length),o,s):null}static findPreviousMatch(e,t,n,r){const s=t.parseSearchRequest();if(!s)return null;const o=new Fm(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindPreviousMatchMultiline(e,n,o,r):this._doFindPreviousMatchLineByLine(e,n,o,r)}static _doFindPreviousMatchMultiline(e,t,n,r){const s=this._doFindMatchesMultiline(e,new D(1,1,t.lineNumber,t.column),n,r,10*DDe);if(s.length>0)return s[s.length-1];const o=e.getLineCount();return t.lineNumber!==o||t.column!==e.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(e,new U(o,e.getLineMaxColumn(o)),n,r):null}static _doFindPreviousMatchLineByLine(e,t,n,r){const s=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,o,r);if(l)return l;for(let c=1;c<=s;c++){const d=(s+o-c-1)%s,u=e.getLineContent(d+1),h=this._findLastMatchInLine(n,u,d+1,r);if(h)return h}return null}static _findLastMatchInLine(e,t,n,r){let s=null,o;for(e.reset(0);o=e.next(t);)s=Yf(new D(n,o.index+1,n,o.index+1+o[0].length),o,r);return s}}function RDe(i,e,t,n,r){if(n===0)return!0;const s=e.charCodeAt(n-1);if(i.get(s)!==0||s===13||s===10)return!0;if(r>0){const o=e.charCodeAt(n);if(i.get(o)!==0)return!0}return!1}function EDe(i,e,t,n,r){if(n+r===t)return!0;const s=e.charCodeAt(n+r);if(i.get(s)!==0||s===13||s===10)return!0;if(r>0){const o=e.charCodeAt(n+r-1);if(i.get(o)!==0)return!0}return!1}function G3(i,e,t,n,r){return RDe(i,e,t,n,r)&&EDe(i,e,t,n,r)}class Fm{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;const r=n.index,s=n[0].length;if(r===this._prevMatchStartIndex&&s===this._prevMatchLength){if(s===0){TT(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=r,this._prevMatchLength=s,!this._wordSeparators||G3(this._wordSeparators,e,t,r,s))return n}while(n);return null}}class Z3{static computeUnicodeHighlights(e,t,n){const r=n?n.startLineNumber:1,s=n?n.endLineNumber:e.getLineCount(),o=new t6(t),a=o.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${NDe(Array.from(a))}`,"g");const c=new Fm(null,l),d=[];let u=!1,h,f=0,g=0,m=0;e:for(let y=r,b=s;y<=b;y++){const v=e.getLineContent(y),C=v.length;c.reset(0);do if(h=c.next(v),h){let w=h.index,S=h.index+h[0].length;if(w>0){const R=v.charCodeAt(w-1);zi(R)&&w--}if(S+1<C){const R=v.charCodeAt(S-1);zi(R)&&S++}const L=v.substring(w,S);let T=N0(w+1,S3,v,0);T&&T.endColumn<=w+1&&(T=null);const I=o.shouldHighlightNonBasicASCII(L,T?T.word:null);if(I!==0){I===3?f++:I===2?g++:I===1?m++:vD();const R=1e3;if(d.length>=R){u=!0;break e}d.push(new D(y,w+1,y,S+1))}}while(h)}return{ranges:d,hasMore:u,ambiguousCharacterCount:f,invisibleCharacterCount:g,nonBasicAsciiCharacterCount:m}}static computeUnicodeHighlightReason(e,t){const n=new t6(t);switch(n.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const s=e.codePointAt(0),o=n.ambiguousCharacters.getPrimaryConfusable(s),a=Kg.getLocales().filter(l=>!Kg.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(s));return{kind:0,confusableWith:String.fromCodePoint(o),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}function NDe(i,e){return`[${No(i.map(n=>String.fromCodePoint(n)).join(""))}]`}class t6{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=Kg.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of Fc.codePoints)n6(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const n=e.codePointAt(0);if(this.allowedCodePoints.has(n))return 0;if(this.options.nonBasicASCII)return 1;let r=!1,s=!1;if(t)for(const o of t){const a=o.codePointAt(0),l=OC(o);r=r||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!Fc.isInvisibleCharacter(a)&&(s=!0)}return!r&&s?0:this.options.invisibleCharacters&&!n6(e)&&Fc.isInvisibleCharacter(n)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(n)?3:0}}function n6(i){return i===" "||i===`
`||i==="	"}class bx{constructor(e,t,n){this.changes=e,this.moves=t,this.hitTimeout=n}}class oZ{constructor(e,t){this.lineRangeMapping=e,this.changes=t}}class kt{static addRange(e,t){let n=0;for(;n<t.length&&t[n].endExclusive<e.start;)n++;let r=n;for(;r<t.length&&t[r].start<=e.endExclusive;)r++;if(n===r)t.splice(n,0,e);else{const s=Math.min(e.start,t[n].start),o=Math.max(e.endExclusive,t[r-1].endExclusive);t.splice(n,r-n,new kt(s,o))}}static tryCreate(e,t){if(!(e>t))return new kt(e,t)}static ofLength(e){return new kt(0,e)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new Ti(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new kt(this.start+e,this.endExclusive+e)}deltaStart(e){return new kt(this.start+e,this.endExclusive)}deltaEnd(e){return new kt(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new kt(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(t<=n)return new kt(t,n)}slice(e){return e.slice(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new Ti(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new Ti(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}}class X3{constructor(){this._sortedRanges=[]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let n=t;for(;n<this._sortedRanges.length&&this._sortedRanges[n].start<=e.endExclusive;)n++;if(t===n)this._sortedRanges.splice(t,0,e);else{const r=Math.min(e.start,this._sortedRanges[t].start),s=Math.max(e.endExclusive,this._sortedRanges[n-1].endExclusive);this._sortedRanges.splice(t,n-t,new kt(r,s))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){const t=new X3;for(const n of this._sortedRanges){const r=n.intersect(e);r&&t.addRange(r)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}}function MT(i,e,t){const n=ADe(i,e);if(n!==-1)return i[n]}function ADe(i,e,t=i.length-1){for(let n=t;n>=0;n--){const r=i[n];if(e(r))return n}return-1}function z0(i,e){const t=$0(i,e);return t===-1?void 0:i[t]}function $0(i,e,t=0,n=i.length){let r=t,s=n;for(;r<s;){const o=Math.floor((r+s)/2);e(i[o])?r=o+1:s=o}return r-1}function PDe(i,e){const t=K0(i,e);return t===i.length?void 0:i[t]}function K0(i,e,t=0,n=i.length){let r=t,s=n;for(;r<s;){const o=Math.floor((r+s)/2);e(i[o])?s=o:r=o+1}return r}class WC{constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(WC.assertInvariants){if(this._prevFindLastPredicate){for(const n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}const t=$0(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,t===-1?void 0:this._array[t]}}WC.assertInvariants=!1;function aZ(i,e){if(i.length===0)return;let t=i[0];for(let n=1;n<i.length;n++){const r=i[n];e(r,t)>0&&(t=r)}return t}function MDe(i,e){if(i.length===0)return;let t=i[0];for(let n=1;n<i.length;n++){const r=i[n];e(r,t)>=0&&(t=r)}return t}function ODe(i,e){return aZ(i,(t,n)=>-e(t,n))}function FDe(i,e){if(i.length===0)return-1;let t=0;for(let n=1;n<i.length;n++){const r=i[n];e(r,i[t])>0&&(t=n)}return t}function BDe(i,e){for(const t of i){const n=e(t);if(n!==void 0)return n}}let It=class Bu{static fromRange(e){return new Bu(e.startLineNumber,e.endLineNumber)}static joinMany(e){if(e.length===0)return[];let t=new gc(e[0].slice());for(let n=1;n<e.length;n++)t=t.getUnion(new gc(e[n].slice()));return t.ranges}static ofLength(e,t){return new Bu(e,e+t)}static deserialize(e){return new Bu(e[0],e[1])}constructor(e,t){if(e>t)throw new Ti(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new Bu(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new Bu(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new Bu(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=n)return new Bu(t,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new D(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new D(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new kt(this.startLineNumber-1,this.endLineNumberExclusive-1)}};class gc{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;const t=K0(this._normalizedRanges,r=>r.endLineNumberExclusive>=e.startLineNumber),n=$0(this._normalizedRanges,r=>r.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)this._normalizedRanges.splice(t,0,e);else if(t===n-1){const r=this._normalizedRanges[t];this._normalizedRanges[t]=r.join(e)}else{const r=this._normalizedRanges[t].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(t,n-t,r)}}contains(e){const t=z0(this._normalizedRanges,n=>n.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;const t=[];let n=0,r=0,s=null;for(;n<this._normalizedRanges.length||r<e._normalizedRanges.length;){let o=null;if(n<this._normalizedRanges.length&&r<e._normalizedRanges.length){const a=this._normalizedRanges[n],l=e._normalizedRanges[r];a.startLineNumber<l.startLineNumber?(o=a,n++):(o=l,r++)}else n<this._normalizedRanges.length?(o=this._normalizedRanges[n],n++):(o=e._normalizedRanges[r],r++);s===null?s=o:s.endLineNumberExclusive>=o.startLineNumber?s=new It(s.startLineNumber,Math.max(s.endLineNumberExclusive,o.endLineNumberExclusive)):(t.push(s),s=o)}return s!==null&&t.push(s),new gc(t)}subtractFrom(e){const t=K0(this._normalizedRanges,o=>o.endLineNumberExclusive>=e.startLineNumber),n=$0(this._normalizedRanges,o=>o.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)return new gc([e]);const r=[];let s=e.startLineNumber;for(let o=t;o<n;o++){const a=this._normalizedRanges[o];a.startLineNumber>s&&r.push(new It(s,a.startLineNumber)),s=a.endLineNumberExclusive}return s<e.endLineNumberExclusive&&r.push(new It(s,e.endLineNumberExclusive)),new gc(r)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){const t=[];let n=0,r=0;for(;n<this._normalizedRanges.length&&r<e._normalizedRanges.length;){const s=this._normalizedRanges[n],o=e._normalizedRanges[r],a=s.intersect(o);a&&!a.isEmpty&&t.push(a),s.endLineNumberExclusive<o.endLineNumberExclusive?n++:r++}return new gc(t)}getWithDelta(e){return new gc(this._normalizedRanges.map(t=>t.delta(e)))}}class Gc{static inverse(e,t,n){const r=[];let s=1,o=1;for(const l of e){const c=new ua(new It(s,l.original.startLineNumber),new It(o,l.modified.startLineNumber),void 0);c.modified.isEmpty||r.push(c),s=l.original.endLineNumberExclusive,o=l.modified.endLineNumberExclusive}const a=new ua(new It(s,t+1),new It(o,n+1),void 0);return a.modified.isEmpty||r.push(a),r}constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new Gc(this.modified,this.original)}join(e){return new Gc(this.original.join(e.original),this.modified.join(e.modified))}}class ua extends Gc{constructor(e,t,n){super(e,t),this.innerChanges=n}flip(){var e;return new ua(this.modified,this.original,(e=this.innerChanges)===null||e===void 0?void 0:e.map(t=>t.flip()))}}class jh{constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new jh(this.modifiedRange,this.originalRange)}}const WDe=3;class VDe{computeDiff(e,t,n){var r;const o=new jDe(e,t,{maxComputationTime:n.maxComputationTimeMs,shouldIgnoreTrimWhitespace:n.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),a=[];let l=null;for(const c of o.changes){let d;c.originalEndLineNumber===0?d=new It(c.originalStartLineNumber+1,c.originalStartLineNumber+1):d=new It(c.originalStartLineNumber,c.originalEndLineNumber+1);let u;c.modifiedEndLineNumber===0?u=new It(c.modifiedStartLineNumber+1,c.modifiedStartLineNumber+1):u=new It(c.modifiedStartLineNumber,c.modifiedEndLineNumber+1);let h=new ua(d,u,(r=c.charChanges)===null||r===void 0?void 0:r.map(f=>new jh(new D(f.originalStartLineNumber,f.originalStartColumn,f.originalEndLineNumber,f.originalEndColumn),new D(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn))));l&&(l.modified.endLineNumberExclusive===h.modified.startLineNumber||l.original.endLineNumberExclusive===h.original.startLineNumber)&&(h=new ua(l.original.join(h.original),l.modified.join(h.modified),l.innerChanges&&h.innerChanges?l.innerChanges.concat(h.innerChanges):void 0),a.pop()),a.push(h),l=h}return W0(()=>bG(a,(c,d)=>d.original.startLineNumber-c.original.endLineNumberExclusive===d.modified.startLineNumber-c.modified.endLineNumberExclusive&&c.original.endLineNumberExclusive<d.original.startLineNumber&&c.modified.endLineNumberExclusive<d.modified.startLineNumber)),new bx(a,[],o.quitEarly)}}function lZ(i,e,t,n){return new fc(i,e,t).ComputeDiff(n)}let i6=class{constructor(e){const t=[],n=[];for(let r=0,s=e.length;r<s;r++)t[r]=MA(e[r],1),n[r]=OA(e[r],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const r=[],s=[],o=[];let a=0;for(let l=t;l<=n;l++){const c=this.lines[l],d=e?this._startColumns[l]:1,u=e?this._endColumns[l]:c.length+1;for(let h=d;h<u;h++)r[a]=c.charCodeAt(h-1),s[a]=l+1,o[a]=h,a++;!e&&l<n&&(r[a]=10,s[a]=l+1,o[a]=c.length+1,a++)}return new HDe(r,s,o)}};class HDe{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}}class m_{constructor(e,t,n,r,s,o,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=r,this.modifiedStartLineNumber=s,this.modifiedStartColumn=o,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,n){const r=t.getStartLineNumber(e.originalStart),s=t.getStartColumn(e.originalStart),o=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=n.getStartLineNumber(e.modifiedStart),c=n.getStartColumn(e.modifiedStart),d=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),u=n.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new m_(r,s,o,a,l,c,d,u)}}function UDe(i){if(i.length<=1)return i;const e=[i[0]];let t=e[0];for(let n=1,r=i.length;n<r;n++){const s=i[n],o=s.originalStart-(t.originalStart+t.originalLength),a=s.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(o,a)<WDe?(t.originalLength=s.originalStart+s.originalLength-t.originalStart,t.modifiedLength=s.modifiedStart+s.modifiedLength-t.modifiedStart):(e.push(s),t=s)}return e}class Pv{constructor(e,t,n,r,s){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=r,this.charChanges=s}static createFromDiffResult(e,t,n,r,s,o,a){let l,c,d,u,h;if(t.originalLength===0?(l=n.getStartLineNumber(t.originalStart)-1,c=0):(l=n.getStartLineNumber(t.originalStart),c=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(d=r.getStartLineNumber(t.modifiedStart)-1,u=0):(d=r.getStartLineNumber(t.modifiedStart),u=r.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),o&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&s()){const f=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),g=r.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(f.getElements().length>0&&g.getElements().length>0){let m=lZ(f,g,s,!0).changes;a&&(m=UDe(m)),h=[];for(let y=0,b=m.length;y<b;y++)h.push(m_.createFromDiffChange(m[y],f,g))}}return new Pv(l,c,d,u,h)}}class jDe{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new i6(e),this.modified=new i6(t),this.continueLineDiff=r6(n.maxComputationTime),this.continueCharDiff=r6(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=lZ(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(Pv.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}const r=[];let s=0,o=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,d=c?c.originalStart:this.originalLines.length,u=c?c.modifiedStart:this.modifiedLines.length;for(;s<d&&o<u;){const h=this.originalLines[s],f=this.modifiedLines[o];if(h!==f){{let g=MA(h,1),m=MA(f,1);for(;g>1&&m>1;){const y=h.charCodeAt(g-2),b=f.charCodeAt(m-2);if(y!==b)break;g--,m--}(g>1||m>1)&&this._pushTrimWhitespaceCharChange(r,s+1,1,g,o+1,1,m)}{let g=OA(h,1),m=OA(f,1);const y=h.length+1,b=f.length+1;for(;g<y&&m<b;){const v=h.charCodeAt(g-1),C=h.charCodeAt(m-1);if(v!==C)break;g++,m++}(g<y||m<b)&&this._pushTrimWhitespaceCharChange(r,s+1,g,y,o+1,m,b)}}s++,o++}c&&(r.push(Pv.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),s+=c.originalLength,o+=c.modifiedLength)}return{quitEarly:n,changes:r}}_pushTrimWhitespaceCharChange(e,t,n,r,s,o,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,r,s,o,a))return;let l;this.shouldComputeCharChanges&&(l=[new m_(t,n,t,r,s,o,s,a)]),e.push(new Pv(t,t,s,s,l))}_mergeTrimWhitespaceCharChange(e,t,n,r,s,o,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber===t&&c.modifiedEndLineNumber===s?(this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new m_(t,n,t,r,s,o,s,a)),!0):c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===s?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=s,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new m_(t,n,t,r,s,o,s,a)),!0):!1}}function MA(i,e){const t=ns(i);return t===-1?e:t+1}function OA(i,e){const t=Dl(i);return t===-1?e:t+2}function r6(i){if(i===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<i}class eu{static trivial(e,t){return new eu([new ur(kt.ofLength(e.length),kt.ofLength(t.length))],!1)}static trivialTimedOut(e,t){return new eu([new ur(kt.ofLength(e.length),kt.ofLength(t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}class ur{static invert(e,t){const n=[];return xq(e,(r,s)=>{n.push(ur.fromOffsetPairs(r?r.getEndExclusives():wc.zero,s?s.getStarts():new wc(t,(r?r.seq2Range.endExclusive-r.seq1Range.endExclusive:0)+t)))}),n}static fromOffsetPairs(e,t){return new ur(new kt(e.offset1,t.offset1),new kt(e.offset2,t.offset2))}constructor(e,t){this.seq1Range=e,this.seq2Range=t}swap(){return new ur(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new ur(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new ur(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new ur(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new ur(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersect(e){const t=this.seq1Range.intersect(e.seq1Range),n=this.seq2Range.intersect(e.seq2Range);if(!(!t||!n))return new ur(t,n)}getStarts(){return new wc(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new wc(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}class wc{constructor(e,t){this.offset1=e,this.offset2=t}toString(){return`${this.offset1} <-> ${this.offset2}`}}wc.zero=new wc(0,0);wc.max=new wc(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);class q0{isValid(){return!0}}q0.instance=new q0;class zDe{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new Ti("timeout must be positive")}isValid(){if(!(Date.now()-this.startTime<this.timeout)&&this.valid){this.valid=!1;debugger}return this.valid}}class rE{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,n){this.array[e+t*this.width]=n}}function FA(i){return i===32||i===9}class X_{static getKey(e){let t=this.chrKeys.get(e);return t===void 0&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}constructor(e,t,n){this.range=e,this.lines=t,this.source=n,this.histogram=[];let r=0;for(let s=e.startLineNumber-1;s<e.endLineNumberExclusive-1;s++){const o=t[s];for(let l=0;l<o.length;l++){r++;const c=o[l],d=X_.getKey(c);this.histogram[d]=(this.histogram[d]||0)+1}r++;const a=X_.getKey(`
`);this.histogram[a]=(this.histogram[a]||0)+1}this.totalCount=r}computeSimilarity(e){var t,n;let r=0;const s=Math.max(this.histogram.length,e.histogram.length);for(let o=0;o<s;o++)r+=Math.abs(((t=this.histogram[o])!==null&&t!==void 0?t:0)-((n=e.histogram[o])!==null&&n!==void 0?n:0));return 1-r/(this.totalCount+e.totalCount)}}X_.chrKeys=new Map;class $De{compute(e,t,n=q0.instance,r){if(e.length===0||t.length===0)return eu.trivial(e,t);const s=new rE(e.length,t.length),o=new rE(e.length,t.length),a=new rE(e.length,t.length);for(let g=0;g<e.length;g++)for(let m=0;m<t.length;m++){if(!n.isValid())return eu.trivialTimedOut(e,t);const y=g===0?0:s.get(g-1,m),b=m===0?0:s.get(g,m-1);let v;e.getElement(g)===t.getElement(m)?(g===0||m===0?v=0:v=s.get(g-1,m-1),g>0&&m>0&&o.get(g-1,m-1)===3&&(v+=a.get(g-1,m-1)),v+=r?r(g,m):1):v=-1;const C=Math.max(y,b,v);if(C===v){const w=g>0&&m>0?a.get(g-1,m-1):0;a.set(g,m,w+1),o.set(g,m,3)}else C===y?(a.set(g,m,0),o.set(g,m,1)):C===b&&(a.set(g,m,0),o.set(g,m,2));s.set(g,m,C)}const l=[];let c=e.length,d=t.length;function u(g,m){(g+1!==c||m+1!==d)&&l.push(new ur(new kt(g+1,c),new kt(m+1,d))),c=g,d=m}let h=e.length-1,f=t.length-1;for(;h>=0&&f>=0;)o.get(h,f)===3?(u(h,f),h--,f--):o.get(h,f)===1?h--:f--;return u(-1,-1),l.reverse(),new eu(l,!1)}}class cZ{compute(e,t,n=q0.instance){if(e.length===0||t.length===0)return eu.trivial(e,t);const r=e,s=t;function o(m,y){for(;m<r.length&&y<s.length&&r.getElement(m)===s.getElement(y);)m++,y++;return m}let a=0;const l=new KDe;l.set(0,o(0,0));const c=new qDe;c.set(0,l.get(0)===0?null:new s6(null,0,0,l.get(0)));let d=0;e:for(;;){if(a++,!n.isValid())return eu.trivialTimedOut(r,s);const m=-Math.min(a,s.length+a%2),y=Math.min(a,r.length+a%2);for(d=m;d<=y;d+=2){const b=d===y?-1:l.get(d+1),v=d===m?-1:l.get(d-1)+1,C=Math.min(Math.max(b,v),r.length),w=C-d;if(C>r.length||w>s.length)continue;const S=o(C,w);l.set(d,S);const L=C===b?c.get(d+1):c.get(d-1);if(c.set(d,S!==C?new s6(L,C,w,S-C):L),l.get(d)===r.length&&l.get(d)-d===s.length)break e}}let u=c.get(d);const h=[];let f=r.length,g=s.length;for(;;){const m=u?u.x+u.length:0,y=u?u.y+u.length:0;if((m!==f||y!==g)&&h.push(new ur(new kt(m,f),new kt(y,g))),!u)break;f=u.x,g=u.y,u=u.prev}return h.reverse(),new eu(h,!1)}}class s6{constructor(e,t,n,r){this.prev=e,this.x=t,this.y=n,this.length=r}}class KDe{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){const n=this.negativeArr;this.negativeArr=new Int32Array(n.length*2),this.negativeArr.set(n)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const n=this.positiveArr;this.positiveArr=new Int32Array(n.length*2),this.positiveArr.set(n)}this.positiveArr[e]=t}}}class qDe{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}var o6,a6;class GDe{constructor(e,t){this.uri=e,this.value=t}}function ZDe(i){return Array.isArray(i)}class Hr{constructor(e,t){if(this[o6]="ResourceMap",e instanceof Hr)this.map=new Map(e.map),this.toKey=t??Hr.defaultToKey;else if(ZDe(e)){this.map=new Map,this.toKey=t??Hr.defaultToKey;for(const[n,r]of e)this.set(n,r)}else this.map=new Map,this.toKey=e??Hr.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new GDe(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))===null||t===void 0?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[n,r]of this.map)e(r.value,r.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(o6=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}}Hr.defaultToKey=i=>i.toString();class XDe{constructor(){this[a6]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let r=this._map.get(e);if(r)r.value=t,n!==0&&this.touch(r,n);else{switch(r={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(r);break;case 1:this.addItemFirst(r);break;case 2:this.addItemLast(r);break;default:this.addItemLast(r);break}this._map.set(e,r),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:n.key,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return r}values(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:n.value,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return r}entries(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:[n.key,n.value],done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return r}[(a6=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const n=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(n.previous=r,r.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const n=e.next,r=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=r,r.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}class bf extends XDe{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}class YDe{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(const[t,n]of e)this.set(t,n)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){const t=this._m1.get(e);return t===void 0?!1:(this._m1.delete(e),this._m2.delete(t),!0)}keys(){return this._m1.keys()}values(){return this._m1.values()}}class Y3{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);n&&n.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}class OT{constructor(e,t,n){this.lines=e,this.considerWhitespaceChanges=n,this.elements=[],this.firstCharOffsetByLine=[],this.additionalOffsetByLine=[];let r=!1;t.start>0&&t.endExclusive>=e.length&&(t=new kt(t.start-1,t.endExclusive),r=!0),this.lineRange=t,this.firstCharOffsetByLine[0]=0;for(let s=this.lineRange.start;s<this.lineRange.endExclusive;s++){let o=e[s],a=0;if(r)a=o.length,o="",r=!1;else if(!n){const l=o.trimStart();a=o.length-l.length,o=l.trimEnd()}this.additionalOffsetByLine.push(a);for(let l=0;l<o.length;l++)this.elements.push(o.charCodeAt(l));s<e.length-1&&(this.elements.push(`
`.charCodeAt(0)),this.firstCharOffsetByLine[s-this.lineRange.start+1]=this.elements.length)}this.additionalOffsetByLine.push(0)}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new kt(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(t=>String.fromCharCode(t)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=c6(e>0?this.elements[e-1]:-1),n=c6(e<this.elements.length?this.elements[e]:-1);if(t===6&&n===7)return 0;let r=0;return t!==n&&(r+=10,t===0&&n===1&&(r+=1)),r+=l6(t),r+=l6(n),r}translateOffset(e){if(this.lineRange.isEmpty)return new U(this.lineRange.start+1,1);const t=$0(this.firstCharOffsetByLine,n=>n<=e);return new U(this.lineRange.start+t+1,e-this.firstCharOffsetByLine[t]+this.additionalOffsetByLine[t]+1)}translateRange(e){return D.fromPositions(this.translateOffset(e.start),this.translateOffset(e.endExclusive))}findWordContaining(e){if(e<0||e>=this.elements.length||!sE(this.elements[e]))return;let t=e;for(;t>0&&sE(this.elements[t-1]);)t--;let n=e;for(;n<this.elements.length&&sE(this.elements[n]);)n++;return new kt(t,n)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){var t,n;const r=(t=z0(this.firstCharOffsetByLine,o=>o<=e.start))!==null&&t!==void 0?t:0,s=(n=PDe(this.firstCharOffsetByLine,o=>e.endExclusive<=o))!==null&&n!==void 0?n:this.elements.length;return new kt(r,s)}}function sE(i){return i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57}const QDe={0:0,1:0,2:0,3:10,4:2,5:3,6:10,7:10};function l6(i){return QDe[i]}function c6(i){return i===10?7:i===13?6:FA(i)?5:i>=97&&i<=122?0:i>=65&&i<=90?1:i>=48&&i<=57?2:i===-1?3:4}function JDe(i,e,t,n,r,s){let{moves:o,excludedChanges:a}=eIe(i,e,t,s);if(!s.isValid())return[];const l=i.filter(d=>!a.has(d)),c=tIe(l,n,r,e,t,s);return w2(o,c),o=nIe(o),o=o.filter(d=>d.original.toOffsetRange().slice(e).map(h=>h.trim()).join(`
`).length>=10),o=iIe(i,o),o}function eIe(i,e,t,n){const r=[],s=i.filter(l=>l.modified.isEmpty&&l.original.length>=3).map(l=>new X_(l.original,e,l)),o=new Set(i.filter(l=>l.original.isEmpty&&l.modified.length>=3).map(l=>new X_(l.modified,t,l))),a=new Set;for(const l of s){let c=-1,d;for(const u of o){const h=l.computeSimilarity(u);h>c&&(c=h,d=u)}if(c>.9&&d&&(o.delete(d),r.push(new Gc(l.range,d.range)),a.add(l.source),a.add(d.source)),!n.isValid())return{moves:r,excludedChanges:a}}return{moves:r,excludedChanges:a}}function tIe(i,e,t,n,r,s){const o=[],a=new Y3;for(const h of i)for(let f=h.original.startLineNumber;f<h.original.endLineNumberExclusive-2;f++){const g=`${e[f-1]}:${e[f+1-1]}:${e[f+2-1]}`;a.add(g,{range:new It(f,f+3)})}const l=[];i.sort(na(h=>h.modified.startLineNumber,Qd));for(const h of i){let f=[];for(let g=h.modified.startLineNumber;g<h.modified.endLineNumberExclusive-2;g++){const m=`${t[g-1]}:${t[g+1-1]}:${t[g+2-1]}`,y=new It(g,g+3),b=[];a.forEach(m,({range:v})=>{for(const w of f)if(w.originalLineRange.endLineNumberExclusive+1===v.endLineNumberExclusive&&w.modifiedLineRange.endLineNumberExclusive+1===y.endLineNumberExclusive){w.originalLineRange=new It(w.originalLineRange.startLineNumber,v.endLineNumberExclusive),w.modifiedLineRange=new It(w.modifiedLineRange.startLineNumber,y.endLineNumberExclusive),b.push(w);return}const C={modifiedLineRange:y,originalLineRange:v};l.push(C),b.push(C)}),f=b}if(!s.isValid())return[]}l.sort(Dq(na(h=>h.modifiedLineRange.length,Qd)));const c=new gc,d=new gc;for(const h of l){const f=h.modifiedLineRange.startLineNumber-h.originalLineRange.startLineNumber,g=c.subtractFrom(h.modifiedLineRange),m=d.subtractFrom(h.originalLineRange).getWithDelta(f),y=g.getIntersection(m);for(const b of y.ranges){if(b.length<3)continue;const v=b,C=b.delta(-f);o.push(new Gc(C,v)),c.addRange(v),d.addRange(C)}}o.sort(na(h=>h.original.startLineNumber,Qd));const u=new WC(i);for(let h=0;h<o.length;h++){const f=o[h],g=u.findLastMonotonous(L=>L.original.startLineNumber<=f.original.startLineNumber),m=z0(i,L=>L.modified.startLineNumber<=f.modified.startLineNumber),y=Math.max(f.original.startLineNumber-g.original.startLineNumber,f.modified.startLineNumber-m.modified.startLineNumber),b=u.findLastMonotonous(L=>L.original.startLineNumber<f.original.endLineNumberExclusive),v=z0(i,L=>L.modified.startLineNumber<f.modified.endLineNumberExclusive),C=Math.max(b.original.endLineNumberExclusive-f.original.endLineNumberExclusive,v.modified.endLineNumberExclusive-f.modified.endLineNumberExclusive);let w;for(w=0;w<y;w++){const L=f.original.startLineNumber-w-1,T=f.modified.startLineNumber-w-1;if(L>n.length||T>r.length||c.contains(T)||d.contains(L)||!d6(n[L-1],r[T-1],s))break}w>0&&(d.addRange(new It(f.original.startLineNumber-w,f.original.startLineNumber)),c.addRange(new It(f.modified.startLineNumber-w,f.modified.startLineNumber)));let S;for(S=0;S<C;S++){const L=f.original.endLineNumberExclusive+S,T=f.modified.endLineNumberExclusive+S;if(L>n.length||T>r.length||c.contains(T)||d.contains(L)||!d6(n[L-1],r[T-1],s))break}S>0&&(d.addRange(new It(f.original.endLineNumberExclusive,f.original.endLineNumberExclusive+S)),c.addRange(new It(f.modified.endLineNumberExclusive,f.modified.endLineNumberExclusive+S))),(w>0||S>0)&&(o[h]=new Gc(new It(f.original.startLineNumber-w,f.original.endLineNumberExclusive+S),new It(f.modified.startLineNumber-w,f.modified.endLineNumberExclusive+S)))}return o}function d6(i,e,t){if(i.trim()===e.trim())return!0;if(i.length>300&&e.length>300)return!1;const r=new cZ().compute(new OT([i],new kt(0,1),!1),new OT([e],new kt(0,1),!1),t);let s=0;const o=ur.invert(r.diffs,i.length);for(const d of o)d.seq1Range.forEach(u=>{FA(i.charCodeAt(u))||s++});function a(d){let u=0;for(let h=0;h<i.length;h++)FA(d.charCodeAt(h))||u++;return u}const l=a(i.length>e.length?i:e);return s/l>.6&&l>10}function nIe(i){if(i.length===0)return i;i.sort(na(t=>t.original.startLineNumber,Qd));const e=[i[0]];for(let t=1;t<i.length;t++){const n=e[e.length-1],r=i[t],s=r.original.startLineNumber-n.original.endLineNumberExclusive,o=r.modified.startLineNumber-n.modified.endLineNumberExclusive;if(s>=0&&o>=0&&s+o<=2){e[e.length-1]=n.join(r);continue}e.push(r)}return e}function iIe(i,e){const t=new WC(i);return e=e.filter(n=>{const r=t.findLastMonotonous(a=>a.original.endLineNumberExclusive<n.original.endLineNumberExclusive)||new Gc(new It(1,1),new It(1,1)),s=z0(i,a=>a.modified.endLineNumberExclusive<n.modified.endLineNumberExclusive);return r!==s}),e}function BA(i,e,t){let n=t;return n=rIe(i,e,n),n=sIe(i,e,n),n}function rIe(i,e,t){if(t.length===0)return t;const n=[];n.push(t[0]);for(let s=1;s<t.length;s++){const o=n[n.length-1];let a=t[s];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=a.seq1Range.start-o.seq1Range.endExclusive;let c;for(c=1;c<=l&&!(i.getElement(a.seq1Range.start-c)!==i.getElement(a.seq1Range.endExclusive-c)||e.getElement(a.seq2Range.start-c)!==e.getElement(a.seq2Range.endExclusive-c));c++);if(c--,c===l){n[n.length-1]=new ur(new kt(o.seq1Range.start,a.seq1Range.endExclusive-l),new kt(o.seq2Range.start,a.seq2Range.endExclusive-l));continue}a=a.delta(-c)}n.push(a)}const r=[];for(let s=0;s<n.length-1;s++){const o=n[s+1];let a=n[s];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=o.seq1Range.start-a.seq1Range.endExclusive;let c;for(c=0;c<l&&!(!i.isStronglyEqual(a.seq1Range.start+c,a.seq1Range.endExclusive+c)||!e.isStronglyEqual(a.seq2Range.start+c,a.seq2Range.endExclusive+c));c++);if(c===l){n[s+1]=new ur(new kt(a.seq1Range.start+l,o.seq1Range.endExclusive),new kt(a.seq2Range.start+l,o.seq2Range.endExclusive));continue}c>0&&(a=a.delta(c))}r.push(a)}return n.length>0&&r.push(n[n.length-1]),r}function sIe(i,e,t){if(!i.getBoundaryScore||!e.getBoundaryScore)return t;for(let n=0;n<t.length;n++){const r=n>0?t[n-1]:void 0,s=t[n],o=n+1<t.length?t[n+1]:void 0,a=new kt(r?r.seq1Range.start+1:0,o?o.seq1Range.endExclusive-1:i.length),l=new kt(r?r.seq2Range.start+1:0,o?o.seq2Range.endExclusive-1:e.length);s.seq1Range.isEmpty?t[n]=u6(s,i,e,a,l):s.seq2Range.isEmpty&&(t[n]=u6(s.swap(),e,i,l,a).swap())}return t}function u6(i,e,t,n,r){let o=1;for(;i.seq1Range.start-o>=n.start&&i.seq2Range.start-o>=r.start&&t.isStronglyEqual(i.seq2Range.start-o,i.seq2Range.endExclusive-o)&&o<100;)o++;o--;let a=0;for(;i.seq1Range.start+a<n.endExclusive&&i.seq2Range.endExclusive+a<r.endExclusive&&t.isStronglyEqual(i.seq2Range.start+a,i.seq2Range.endExclusive+a)&&a<100;)a++;if(o===0&&a===0)return i;let l=0,c=-1;for(let d=-o;d<=a;d++){const u=i.seq2Range.start+d,h=i.seq2Range.endExclusive+d,f=i.seq1Range.start+d,g=e.getBoundaryScore(f)+t.getBoundaryScore(u)+t.getBoundaryScore(h);g>c&&(c=g,l=d)}return i.delta(l)}function oIe(i,e,t){const n=[];for(const r of t){const s=n[n.length-1];if(!s){n.push(r);continue}r.seq1Range.start-s.seq1Range.endExclusive<=2||r.seq2Range.start-s.seq2Range.endExclusive<=2?n[n.length-1]=new ur(s.seq1Range.join(r.seq1Range),s.seq2Range.join(r.seq2Range)):n.push(r)}return n}function aIe(i,e,t){const n=[];let r;function s(){if(!r)return;const a=r.s1Range.length-r.deleted;r.s2Range.length-r.added,Math.max(r.deleted,r.added)+(r.count-1)>a&&n.push(new ur(r.s1Range,r.s2Range)),r=void 0}for(const a of t){let l=function(f,g){var m,y,b,v;if(!r||!r.s1Range.containsRange(f)||!r.s2Range.containsRange(g))if(r&&!(r.s1Range.endExclusive<f.start&&r.s2Range.endExclusive<g.start)){const S=kt.tryCreate(r.s1Range.endExclusive,f.start),L=kt.tryCreate(r.s2Range.endExclusive,g.start);r.deleted+=(m=S==null?void 0:S.length)!==null&&m!==void 0?m:0,r.added+=(y=L==null?void 0:L.length)!==null&&y!==void 0?y:0,r.s1Range=r.s1Range.join(f),r.s2Range=r.s2Range.join(g)}else s(),r={added:0,deleted:0,count:0,s1Range:f,s2Range:g};const C=f.intersect(a.seq1Range),w=g.intersect(a.seq2Range);r.count++,r.deleted+=(b=C==null?void 0:C.length)!==null&&b!==void 0?b:0,r.added+=(v=w==null?void 0:w.length)!==null&&v!==void 0?v:0};const c=i.findWordContaining(a.seq1Range.start-1),d=e.findWordContaining(a.seq2Range.start-1),u=i.findWordContaining(a.seq1Range.endExclusive),h=e.findWordContaining(a.seq2Range.endExclusive);c&&u&&d&&h&&c.equals(u)&&d.equals(h)?l(c,d):(c&&d&&l(c,d),u&&h&&l(u,h))}return s(),lIe(t,n)}function lIe(i,e){const t=[];for(;i.length>0||e.length>0;){const n=i[0],r=e[0];let s;n&&(!r||n.seq1Range.start<r.seq1Range.start)?s=i.shift():s=e.shift(),t.length>0&&t[t.length-1].seq1Range.endExclusive>=s.seq1Range.start?t[t.length-1]=t[t.length-1].join(s):t.push(s)}return t}function cIe(i,e,t){let n=t;if(n.length===0)return n;let r=0,s;do{s=!1;const o=[n[0]];for(let a=1;a<n.length;a++){let d=function(h,f){const g=new kt(c.seq1Range.endExclusive,l.seq1Range.start);return i.getText(g).replace(/\s/g,"").length<=4&&(h.seq1Range.length+h.seq2Range.length>5||f.seq1Range.length+f.seq2Range.length>5)};const l=n[a],c=o[o.length-1];d(c,l)?(s=!0,o[o.length-1]=o[o.length-1].join(l)):o.push(l)}n=o}while(r++<10&&s);return n}function dIe(i,e,t){let n=t;if(n.length===0)return n;let r=0,s;do{s=!1;const a=[n[0]];for(let l=1;l<n.length;l++){let u=function(f,g){const m=new kt(d.seq1Range.endExclusive,c.seq1Range.start);if(i.countLinesIn(m)>5||m.length>500)return!1;const b=i.getText(m).trim();if(b.length>20||b.split(/\r\n|\r|\n/).length>1)return!1;const v=i.countLinesIn(f.seq1Range),C=f.seq1Range.length,w=e.countLinesIn(f.seq2Range),S=f.seq2Range.length,L=i.countLinesIn(g.seq1Range),T=g.seq1Range.length,I=e.countLinesIn(g.seq2Range),R=g.seq2Range.length,B=2*40+50;function V(F){return Math.min(F,B)}return Math.pow(Math.pow(V(v*40+C),1.5)+Math.pow(V(w*40+S),1.5),1.5)+Math.pow(Math.pow(V(L*40+T),1.5)+Math.pow(V(I*40+R),1.5),1.5)>Math.pow(Math.pow(B,1.5),1.5)*1.3};const c=n[l],d=a[a.length-1];u(d,c)?(s=!0,a[a.length-1]=a[a.length-1].join(c)):a.push(c)}n=a}while(r++<10&&s);const o=[];return ySe(n,(a,l,c)=>{let d=l;function u(b){return b.length>0&&b.trim().length<=3&&l.seq1Range.length+l.seq2Range.length>100}const h=i.extendToFullLines(l.seq1Range),f=i.getText(new kt(h.start,l.seq1Range.start));u(f)&&(d=d.deltaStart(-f.length));const g=i.getText(new kt(l.seq1Range.endExclusive,h.endExclusive));u(g)&&(d=d.deltaEnd(g.length));const m=ur.fromOffsetPairs(a?a.getEndExclusives():wc.zero,c?c.getStarts():wc.max),y=d.intersect(m);o.push(y)}),o}class h6{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){const t=e===0?0:f6(this.lines[e-1]),n=e===this.lines.length?0:f6(this.lines[e]);return 1e3-(t+n)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}}function f6(i){let e=0;for(;e<i.length&&(i.charCodeAt(e)===32||i.charCodeAt(e)===9);)e++;return e}class dZ{constructor(){this.dynamicProgrammingDiffing=new $De,this.myersDiffingAlgorithm=new cZ}computeDiff(e,t,n){if(e.length<=1&&fi(e,t,(S,L)=>S===L))return new bx([],[],!1);if(e.length===1&&e[0].length===0||t.length===1&&t[0].length===0)return new bx([new ua(new It(1,e.length+1),new It(1,t.length+1),[new jh(new D(1,1,e.length,e[0].length+1),new D(1,1,t.length,t[0].length+1))])],[],!1);const r=n.maxComputationTimeMs===0?q0.instance:new zDe(n.maxComputationTimeMs),s=!n.ignoreTrimWhitespace,o=new Map;function a(S){let L=o.get(S);return L===void 0&&(L=o.size,o.set(S,L)),L}const l=e.map(S=>a(S.trim())),c=t.map(S=>a(S.trim())),d=new h6(l,e),u=new h6(c,t),h=(()=>d.length+u.length<1700?this.dynamicProgrammingDiffing.compute(d,u,r,(S,L)=>e[S]===t[L]?t[L].length===0?.1:1+Math.log(1+t[L].length):.99):this.myersDiffingAlgorithm.compute(d,u))();let f=h.diffs,g=h.hitTimeout;f=BA(d,u,f),f=cIe(d,u,f);const m=[],y=S=>{if(s)for(let L=0;L<S;L++){const T=b+L,I=v+L;if(e[T]!==t[I]){const R=this.refineDiff(e,t,new ur(new kt(T,T+1),new kt(I,I+1)),r,s);for(const B of R.mappings)m.push(B);R.hitTimeout&&(g=!0)}}};let b=0,v=0;for(const S of f){W0(()=>S.seq1Range.start-b===S.seq2Range.start-v);const L=S.seq1Range.start-b;y(L),b=S.seq1Range.endExclusive,v=S.seq2Range.endExclusive;const T=this.refineDiff(e,t,S,r,s);T.hitTimeout&&(g=!0);for(const I of T.mappings)m.push(I)}y(e.length-b);const C=g6(m,e,t);let w=[];return n.computeMoves&&(w=this.computeMoves(C,e,t,l,c,r,s)),W0(()=>{function S(T,I){if(T.lineNumber<1||T.lineNumber>I.length)return!1;const R=I[T.lineNumber-1];return!(T.column<1||T.column>R.length+1)}function L(T,I){return!(T.startLineNumber<1||T.startLineNumber>I.length+1||T.endLineNumberExclusive<1||T.endLineNumberExclusive>I.length+1)}for(const T of C){if(!T.innerChanges)return!1;for(const I of T.innerChanges)if(!(S(I.modifiedRange.getStartPosition(),t)&&S(I.modifiedRange.getEndPosition(),t)&&S(I.originalRange.getStartPosition(),e)&&S(I.originalRange.getEndPosition(),e)))return!1;if(!L(T.modified,t)||!L(T.original,e))return!1}return!0}),new bx(C,w,g)}computeMoves(e,t,n,r,s,o,a){return JDe(e,t,n,r,s,o).map(d=>{const u=this.refineDiff(t,n,new ur(d.original.toOffsetRange(),d.modified.toOffsetRange()),o,a),h=g6(u.mappings,t,n,!0);return new oZ(d,h)})}refineDiff(e,t,n,r,s){const o=new OT(e,n.seq1Range,s),a=new OT(t,n.seq2Range,s),l=o.length+a.length<500?this.dynamicProgrammingDiffing.compute(o,a,r):this.myersDiffingAlgorithm.compute(o,a,r);let c=l.diffs;return c=BA(o,a,c),c=aIe(o,a,c),c=oIe(o,a,c),c=dIe(o,a,c),{mappings:c.map(u=>new jh(o.translateRange(u.seq1Range),a.translateRange(u.seq2Range))),hitTimeout:l.hitTimeout}}}function g6(i,e,t,n=!1){const r=[];for(const s of Sq(i.map(o=>uIe(o,e,t)),(o,a)=>o.original.overlapOrTouch(a.original)||o.modified.overlapOrTouch(a.modified))){const o=s[0],a=s[s.length-1];r.push(new ua(o.original.join(a.original),o.modified.join(a.modified),s.map(l=>l.innerChanges[0])))}return W0(()=>!n&&r.length>0&&r[0].original.startLineNumber!==r[0].modified.startLineNumber?!1:bG(r,(s,o)=>o.original.startLineNumber-s.original.endLineNumberExclusive===o.modified.startLineNumber-s.modified.endLineNumberExclusive&&s.original.endLineNumberExclusive<o.original.startLineNumber&&s.modified.endLineNumberExclusive<o.modified.startLineNumber)),r}function uIe(i,e,t){let n=0,r=0;i.modifiedRange.endColumn===1&&i.originalRange.endColumn===1&&i.originalRange.startLineNumber+n<=i.originalRange.endLineNumber&&i.modifiedRange.startLineNumber+n<=i.modifiedRange.endLineNumber&&(r=-1),i.modifiedRange.startColumn-1>=t[i.modifiedRange.startLineNumber-1].length&&i.originalRange.startColumn-1>=e[i.originalRange.startLineNumber-1].length&&i.originalRange.startLineNumber<=i.originalRange.endLineNumber+r&&i.modifiedRange.startLineNumber<=i.modifiedRange.endLineNumber+r&&(n=1);const s=new It(i.originalRange.startLineNumber+n,i.originalRange.endLineNumber+1+r),o=new It(i.modifiedRange.startLineNumber+n,i.modifiedRange.endLineNumber+1+r);return new ua(s,o,[i])}const p6={getLegacy:()=>new VDe,getDefault:()=>new dZ};function yh(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}class Mt{constructor(e,t,n,r=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=yh(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class xa{constructor(e,t,n,r){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=yh(Math.max(Math.min(1,t),0),3),this.l=yh(Math.max(Math.min(1,n),0),3),this.a=yh(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,r=e.b/255,s=e.a,o=Math.max(t,n,r),a=Math.min(t,n,r);let l=0,c=0;const d=(a+o)/2,u=o-a;if(u>0){switch(c=Math.min(d<=.5?u/(2*d):u/(2-2*d),1),o){case t:l=(n-r)/u+(n<r?6:0);break;case n:l=(r-t)/u+2;break;case r:l=(t-n)/u+4;break}l*=60,l=Math.round(l)}return new xa(l,c,d,s)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:r,a:s}=e;let o,a,l;if(n===0)o=a=l=r;else{const c=r<.5?r*(1+n):r+n-r*n,d=2*r-c;o=xa._hue2rgb(d,c,t+1/3),a=xa._hue2rgb(d,c,t),l=xa._hue2rgb(d,c,t-1/3)}return new Mt(Math.round(o*255),Math.round(a*255),Math.round(l*255),s)}}class Sc{constructor(e,t,n,r){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=yh(Math.max(Math.min(1,t),0),3),this.v=yh(Math.max(Math.min(1,n),0),3),this.a=yh(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,r=e.b/255,s=Math.max(t,n,r),o=Math.min(t,n,r),a=s-o,l=s===0?0:a/s;let c;return a===0?c=0:s===t?c=((n-r)/a%6+6)%6:s===n?c=(r-t)/a+2:c=(t-n)/a+4,new Sc(Math.round(c*60),l,s,e.a)}static toRGBA(e){const{h:t,s:n,v:r,a:s}=e,o=r*n,a=o*(1-Math.abs(t/60%2-1)),l=r-o;let[c,d,u]=[0,0,0];return t<60?(c=o,d=a):t<120?(c=a,d=o):t<180?(d=o,u=a):t<240?(d=a,u=o):t<300?(c=a,u=o):t<=360&&(c=o,u=a),c=Math.round((c+l)*255),d=Math.round((d+l)*255),u=Math.round((u+l)*255),new Mt(c,d,u,s)}}class K{static fromHex(e){return K.Format.CSS.parseHex(e)||K.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}get hsla(){return this._hsla?this._hsla:xa.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Sc.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof Mt)this.rgba=e;else if(e instanceof xa)this._hsla=e,this.rgba=xa.toRGBA(e);else if(e instanceof Sc)this._hsva=e,this.rgba=Sc.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&Mt.equals(this.rgba,e.rgba)&&xa.equals(this.hsla,e.hsla)&&Sc.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=K._relativeLuminanceForComponent(this.rgba.r),t=K._relativeLuminanceForComponent(this.rgba.g),n=K._relativeLuminanceForComponent(this.rgba.b),r=.2126*e+.7152*t+.0722*n;return yh(r,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new K(new xa(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new K(new xa(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:r,a:s}=this.rgba;return new K(new Mt(t,n,r,s*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new K(new Mt(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:n,b:r,a:s}=this.rgba;return new K(new Mt(e.rgba.r-s*(e.rgba.r-t),e.rgba.g-s*(e.rgba.g-n),e.rgba.b-s*(e.rgba.b-r),1))}toString(){return this._toString||(this._toString=K.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const r=e.getRelativeLuminance(),s=t.getRelativeLuminance();return n=n*(s-r)/s,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const r=e.getRelativeLuminance(),s=t.getRelativeLuminance();return n=n*(r-s)/r,e.darken(n)}}K.white=new K(new Mt(255,255,255,1));K.black=new K(new Mt(0,0,0,1));K.red=new K(new Mt(255,0,0,1));K.blue=new K(new Mt(0,0,255,1));K.green=new K(new Mt(0,255,0,1));K.cyan=new K(new Mt(0,255,255,1));K.lightgrey=new K(new Mt(211,211,211,1));K.transparent=new K(new Mt(0,0,0,0));(function(i){(function(e){(function(t){function n(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:i.Format.CSS.formatRGBA(f)}t.formatRGB=n;function r(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}t.formatRGBA=r;function s(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:i.Format.CSS.formatHSLA(f)}t.formatHSL=s;function o(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(f){const g=f.toString(16);return g.length!==2?"0"+g:g}function l(f){return`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}`}t.formatHex=l;function c(f,g=!1){return g&&f.rgba.a===1?i.Format.CSS.formatHex(f):`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}${a(Math.round(f.rgba.a*255))}`}t.formatHexA=c;function d(f){return f.isOpaque()?i.Format.CSS.formatHex(f):i.Format.CSS.formatRGBA(f)}t.format=d;function u(f){const g=f.length;if(g===0||f.charCodeAt(0)!==35)return null;if(g===7){const m=16*h(f.charCodeAt(1))+h(f.charCodeAt(2)),y=16*h(f.charCodeAt(3))+h(f.charCodeAt(4)),b=16*h(f.charCodeAt(5))+h(f.charCodeAt(6));return new i(new Mt(m,y,b,1))}if(g===9){const m=16*h(f.charCodeAt(1))+h(f.charCodeAt(2)),y=16*h(f.charCodeAt(3))+h(f.charCodeAt(4)),b=16*h(f.charCodeAt(5))+h(f.charCodeAt(6)),v=16*h(f.charCodeAt(7))+h(f.charCodeAt(8));return new i(new Mt(m,y,b,v/255))}if(g===4){const m=h(f.charCodeAt(1)),y=h(f.charCodeAt(2)),b=h(f.charCodeAt(3));return new i(new Mt(16*m+m,16*y+y,16*b+b))}if(g===5){const m=h(f.charCodeAt(1)),y=h(f.charCodeAt(2)),b=h(f.charCodeAt(3)),v=h(f.charCodeAt(4));return new i(new Mt(16*m+m,16*y+y,16*b+b,(16*v+v)/255))}return null}t.parseHex=u;function h(f){switch(f){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(i.Format||(i.Format={}))})(K||(K={}));function uZ(i){const e=[];for(const t of i){const n=Number(t);(n||n===0&&t.replace(/\s/g,"")!=="")&&e.push(n)}return e}function Q3(i,e,t,n){return{red:i/255,blue:t/255,green:e/255,alpha:n}}function Lb(i,e){const t=e.index,n=e[0].length;if(!t)return;const r=i.positionAt(t);return{startLineNumber:r.lineNumber,startColumn:r.column,endLineNumber:r.lineNumber,endColumn:r.column+n}}function hIe(i,e){if(!i)return;const t=K.Format.CSS.parseHex(e);if(t)return{range:i,color:Q3(t.rgba.r,t.rgba.g,t.rgba.b,t.rgba.a)}}function m6(i,e,t){if(!i||e.length!==1)return;const r=e[0].values(),s=uZ(r);return{range:i,color:Q3(s[0],s[1],s[2],t?s[3]:1)}}function _6(i,e,t){if(!i||e.length!==1)return;const r=e[0].values(),s=uZ(r),o=new K(new xa(s[0],s[1]/100,s[2]/100,t?s[3]:1));return{range:i,color:Q3(o.rgba.r,o.rgba.g,o.rgba.b,o.rgba.a)}}function Db(i,e){return typeof i=="string"?[...i.matchAll(e)]:i.findMatches(e)}function fIe(i){const e=[],n=Db(i,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(n.length>0)for(const r of n){const s=r.filter(c=>c!==void 0),o=s[1],a=s[2];if(!a)continue;let l;if(o==="rgb"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;l=m6(Lb(i,r),Db(a,c),!1)}else if(o==="rgba"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=m6(Lb(i,r),Db(a,c),!0)}else if(o==="hsl"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;l=_6(Lb(i,r),Db(a,c),!1)}else if(o==="hsla"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=_6(Lb(i,r),Db(a,c),!0)}else o==="#"&&(l=hIe(Lb(i,r),o+a));l&&e.push(l)}return e}function gIe(i){return!i||typeof i.getValue!="function"||typeof i.positionAt!="function"?[]:fIe(i)}var Ru=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class pIe extends mDe{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){const t=[];for(let n=0;n<this._lines.length;n++){const r=this._lines[n],s=this.offsetAt(new U(n+1,1)),o=r.matchAll(e);for(const a of o)(a.index||a.index===0)&&(a.index=a.index+s),t.push(a)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const n=N0(e.column,Bq(t),this._lines[e.lineNumber-1],0);return n?new D(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){const t=this._lines,n=this._wordenize.bind(this);let r=0,s="",o=0,a=[];return{*[Symbol.iterator](){for(;;)if(o<a.length){const l=s.substring(a[o].start,a[o].end);o+=1,yield l}else if(r<t.length)s=t[r],a=n(s,e),o=0,r+=1;else break}}}getLineWords(e,t){const n=this._lines[e-1],r=this._wordenize(n,t),s=[];for(const o of r)s.push({word:n.substring(o.start,o.end),startColumn:o.start+1,endColumn:o.end+1});return s}_wordenize(e,t){const n=[];let r;for(t.lastIndex=0;(r=t.exec(e))&&r[0].length!==0;)n.push({start:r.index,end:r.index+r[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,n=e.startLineNumber-1,r=e.endLineNumber-1,s=[];s.push(this._lines[n].substring(e.startColumn-1));for(let o=n+1;o<r;o++)s.push(this._lines[o]);return s.push(this._lines[r].substring(0,e.endColumn-1)),s.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!U.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,r=!1;if(t<1)t=1,n=1,r=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,r=!0;else{const s=this._lines[t-1].length+1;n<1?(n=1,r=!0):n>s&&(n=s,r=!0)}return r?{lineNumber:t,column:n}:e}}class Ch{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new pIe(Ye.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}computeUnicodeHighlights(e,t,n){return Ru(this,void 0,void 0,function*(){const r=this._getModel(e);return r?Z3.computeUnicodeHighlights(r,t,n):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}})}computeDiff(e,t,n,r){return Ru(this,void 0,void 0,function*(){const s=this._getModel(e),o=this._getModel(t);return!s||!o?null:Ch.computeDiff(s,o,n,r)})}static computeDiff(e,t,n,r){const s=r==="advanced"?p6.getDefault():p6.getLegacy(),o=e.getLinesContent(),a=t.getLinesContent(),l=s.computeDiff(o,a,n),c=l.changes.length>0?!1:this._modelsAreIdentical(e,t);function d(u){return u.map(h=>{var f;return[h.original.startLineNumber,h.original.endLineNumberExclusive,h.modified.startLineNumber,h.modified.endLineNumberExclusive,(f=h.innerChanges)===null||f===void 0?void 0:f.map(g=>[g.originalRange.startLineNumber,g.originalRange.startColumn,g.originalRange.endLineNumber,g.originalRange.endColumn,g.modifiedRange.startLineNumber,g.modifiedRange.startColumn,g.modifiedRange.endLineNumber,g.modifiedRange.endColumn])]})}return{identical:c,quitEarly:l.hitTimeout,changes:d(l.changes),moves:l.moves.map(u=>[u.lineRangeMapping.original.startLineNumber,u.lineRangeMapping.original.endLineNumberExclusive,u.lineRangeMapping.modified.startLineNumber,u.lineRangeMapping.modified.endLineNumberExclusive,d(u.changes)])}}static _modelsAreIdentical(e,t){const n=e.getLineCount(),r=t.getLineCount();if(n!==r)return!1;for(let s=1;s<=n;s++){const o=e.getLineContent(s),a=t.getLineContent(s);if(o!==a)return!1}return!0}computeMoreMinimalEdits(e,t,n){return Ru(this,void 0,void 0,function*(){const r=this._getModel(e);if(!r)return t;const s=[];let o;t=t.slice(0).sort((l,c)=>{if(l.range&&c.range)return D.compareRangesUsingStarts(l.range,c.range);const d=l.range?0:1,u=c.range?0:1;return d-u});let a=0;for(let l=1;l<t.length;l++)D.getEndPosition(t[a].range).equals(D.getStartPosition(t[l].range))?(t[a].range=D.fromPositions(D.getStartPosition(t[a].range),D.getEndPosition(t[l].range)),t[a].text+=t[l].text):(a++,t[a]=t[l]);t.length=a+1;for(let{range:l,text:c,eol:d}of t){if(typeof d=="number"&&(o=d),D.isEmpty(l)&&!c)continue;const u=r.getValueInRange(l);if(c=c.replace(/\r\n|\n|\r/g,r.eol),u===c)continue;if(Math.max(c.length,u.length)>Ch._diffLimit){s.push({range:l,text:c});continue}const h=fDe(u,c,n),f=r.offsetAt(D.lift(l).getStartPosition());for(const g of h){const m=r.positionAt(f+g.originalStart),y=r.positionAt(f+g.originalStart+g.originalLength),b={text:c.substr(g.modifiedStart,g.modifiedLength),range:{startLineNumber:m.lineNumber,startColumn:m.column,endLineNumber:y.lineNumber,endColumn:y.column}};r.getValueInRange(b.range)!==b.text&&s.push(b)}}return typeof o=="number"&&s.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),s})}computeLinks(e){return Ru(this,void 0,void 0,function*(){const t=this._getModel(e);return t?CDe(t):null})}computeDefaultDocumentColors(e){return Ru(this,void 0,void 0,function*(){const t=this._getModel(e);return t?gIe(t):null})}textualSuggest(e,t,n,r){return Ru(this,void 0,void 0,function*(){const s=new qr,o=new RegExp(n,r),a=new Set;e:for(const l of e){const c=this._getModel(l);if(c){for(const d of c.words(o))if(!(d===t||!isNaN(Number(d)))&&(a.add(d),a.size>Ch._suggestionsLimit))break e}}return{words:Array.from(a),duration:s.elapsed()}})}computeWordRanges(e,t,n,r){return Ru(this,void 0,void 0,function*(){const s=this._getModel(e);if(!s)return Object.create(null);const o=new RegExp(n,r),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const c=s.getLineWords(l,o);for(const d of c){if(!isNaN(Number(d.word)))continue;let u=a[d.word];u||(u=[],a[d.word]=u),u.push({startLineNumber:l,startColumn:d.startColumn,endLineNumber:l,endColumn:d.endColumn})}}return a})}navigateValueSet(e,t,n,r,s){return Ru(this,void 0,void 0,function*(){const o=this._getModel(e);if(!o)return null;const a=new RegExp(r,s);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=o.getValueInRange(t),c=o.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;const d=o.getValueInRange(c);return PA.INSTANCE.navigateValueSet(t,l,c,d,n)})}loadForeignModule(e,t,n){const o={host:ISe(n,(a,l)=>this._host.fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(o,t),Promise.resolve(y3(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(n){return Promise.reject(n)}}}Ch._diffLimit=1e5;Ch._suggestionsLimit=1e4;typeof importScripts=="function"&&(globalThis.monaco=iG());const J3=Lt("textResourceConfigurationService"),hZ=Lt("textResourcePropertiesService"),Fe=Lt("ILanguageFeaturesService");var mIe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Ib=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},FT=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const b6=60*1e3,v6=5*60*1e3;function Qf(i,e){const t=i.getModel(e);return!(!t||t.isTooLargeForSyncing())}let WA=class extends q{constructor(e,t,n,r,s){super(),this._modelService=e,this._workerManager=this._register(new bIe(this._modelService,r)),this._logService=n,this._register(s.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(o,a)=>Qf(this._modelService,o.uri)?this._workerManager.withWorker().then(l=>l.computeLinks(o.uri)).then(l=>l&&{links:l}):Promise.resolve({links:[]})})),this._register(s.completionProvider.register("*",new _Ie(this._workerManager,t,this._modelService,r)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return Qf(this._modelService,e)}computedUnicodeHighlights(e,t,n){return this._workerManager.withWorker().then(r=>r.computedUnicodeHighlights(e,t,n))}computeDiff(e,t,n,r){return FT(this,void 0,void 0,function*(){const s=yield this._workerManager.withWorker().then(l=>l.computeDiff(e,t,n,r));if(!s)return null;return{identical:s.identical,quitEarly:s.quitEarly,changes:a(s.changes),moves:s.moves.map(l=>new oZ(new Gc(new It(l[0],l[1]),new It(l[2],l[3])),a(l[4])))};function a(l){return l.map(c=>{var d;return new ua(new It(c[0],c[1]),new It(c[2],c[3]),(d=c[4])===null||d===void 0?void 0:d.map(u=>new jh(new D(u[0],u[1],u[2],u[3]),new D(u[4],u[5],u[6],u[7]))))})}})}computeMoreMinimalEdits(e,t,n=!1){if(zr(t)){if(!Qf(this._modelService,e))return Promise.resolve(t);const r=qr.create(),s=this._workerManager.withWorker().then(o=>o.computeMoreMinimalEdits(e,t,n));return s.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),r.elapsed())),Promise.race([s,Vh(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return Qf(this._modelService,e)}navigateValueSet(e,t,n){return this._workerManager.withWorker().then(r=>r.navigateValueSet(e,t,n))}canComputeWordRanges(e){return Qf(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(n=>n.computeWordRanges(e,t))}};WA=mIe([Ib(0,zn),Ib(1,J3),Ib(2,Vo),Ib(3,wn),Ib(4,Fe)],WA);class _Ie{constructor(e,t,n,r){this.languageConfigurationService=r,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}provideCompletionItems(e,t){return FT(this,void 0,void 0,function*(){const n=this._configurationService.getValue(e.uri,t,"editor");if(!n.wordBasedSuggestions)return;const r=[];if(n.wordBasedSuggestionsMode==="currentDocument")Qf(this._modelService,e.uri)&&r.push(e.uri);else for(const u of this._modelService.getModels())Qf(this._modelService,u.uri)&&(u===e?r.unshift(u.uri):(n.wordBasedSuggestionsMode==="allDocuments"||u.getLanguageId()===e.getLanguageId())&&r.push(u.uri));if(r.length===0)return;const s=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),o=e.getWordAtPosition(t),a=o?new D(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn):D.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),d=yield(yield this._workerManager.withWorker()).textualSuggest(r,o==null?void 0:o.word,s);if(d)return{duration:d.duration,suggestions:d.words.map(u=>({kind:18,label:u,insertText:u,range:{insert:l,replace:a}}))}})}}class bIe extends q{constructor(e,t){super(),this.languageConfigurationService=t,this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new BC).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(v6/2)),this._register(this._modelService.onModelRemoved(r=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>v6&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new e5(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)}}class vIe extends q{constructor(e,t,n){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){const r=new BC;r.cancelAndSet(()=>this._checkStopModelSync(),Math.round(b6/2)),this._register(r)}}dispose(){for(const e in this._syncedModels)an(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const n of e){const r=n.toString();this._syncedModels[r]||this._beginModelSync(n,t),this._syncedModels[r]&&(this._syncedModelsLastUsedTime[r]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>b6&&t.push(n);for(const n of t)this._stopModelSync(n)}_beginModelSync(e,t){const n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;const r=e.toString();this._proxy.acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});const s=new ae;s.add(n.onDidChangeContent(o=>{this._proxy.acceptModelChanged(r.toString(),o)})),s.add(n.onWillDispose(()=>{this._stopModelSync(r)})),s.add(st(()=>{this._proxy.acceptRemovedModel(r)})),this._syncedModels[r]=s}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],an(t)}}class y6{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class oE{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}class e5 extends q{constructor(e,t,n,r){super(),this.languageConfigurationService=r,this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new TD(n),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new wLe(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new oE(this)))}catch(e){RA(e),this._worker=new y6(new Ch(new oE(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(RA(e),this._worker=new y6(new Ch(new oE(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new vIe(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,t=!1){return FT(this,void 0,void 0,function*(){return this._disposed?Promise.reject(Axe()):this._getProxy().then(n=>(this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n))})}computedUnicodeHighlights(e,t,n){return this._withSyncedResources([e]).then(r=>r.computeUnicodeHighlights(e.toString(),t,n))}computeDiff(e,t,n,r){return this._withSyncedResources([e,t],!0).then(s=>s.computeDiff(e.toString(),t.toString(),n,r))}computeMoreMinimalEdits(e,t,n){return this._withSyncedResources([e]).then(r=>r.computeMoreMinimalEdits(e.toString(),t,n))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}computeDefaultDocumentColors(e){return this._withSyncedResources([e]).then(t=>t.computeDefaultDocumentColors(e.toString()))}textualSuggest(e,t,n){return FT(this,void 0,void 0,function*(){const r=yield this._withSyncedResources(e),s=n.source,o=n.flags;return r.textualSuggest(e.map(a=>a.toString()),t,s,o)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(n=>{const r=this._modelService.getModel(e);if(!r)return Promise.resolve(null);const s=this.languageConfigurationService.getLanguageConfiguration(r.getLanguageId()).getWordDefinition(),o=s.source,a=s.flags;return n.computeWordRanges(e.toString(),t,o,a)})}navigateValueSet(e,t,n){return this._withSyncedResources([e]).then(r=>{const s=this._modelService.getModel(e);if(!s)return null;const o=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId()).getWordDefinition(),a=o.source,l=o.flags;return r.navigateValueSet(e.toString(),t,n,a,l)})}dispose(){super.dispose(),this._disposed=!0}}function yIe(i,e,t){return new CIe(i,e,t)}class CIe extends e5{constructor(e,t,n){super(e,n.keepIdleModels||!1,n.label,t),this._foreignModuleId=n.moduleId,this._foreignModuleCreateData=n.createData||null,this._foreignModuleHost=n.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(n){return Promise.reject(n)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?y3(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(n=>{this._foreignModuleCreateData=null;const r=(a,l)=>e.fmr(a,l),s=(a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)},o={};for(const a of n)o[a]=s(a,r);return o})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}}const VC={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"},Y_=new class{clone(){return this}equals(i){return this===i}};function t5(i,e){return new E3([new A0(0,"",i)],e)}function AD(i,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(i<<0|0|0|32768|2<<24)>>>0,new cD(t,e===null?Y_:e)}class kr{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e);const r=this.getFontStyle(e);return r&1&&(n+=" mtki"),r&2&&(n+=" mtkb"),r&4&&(n+=" mtku"),r&8&&(n+=" mtks"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),r=this.getFontStyle(e);let s=`color: ${t[n]};`;r&1&&(s+="font-style: italic;"),r&2&&(s+="font-weight: bold;");let o="";return r&4&&(o+=" underline"),r&8&&(o+=" line-through"),o&&(s+=`text-decoration:${o};`),s}static getPresentationFromMetadata(e){const t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:!!(n&1),bold:!!(n&2),underline:!!(n&4),strikethrough:!!(n&8)}}}class $i{static createEmpty(e,t){const n=$i.defaultTokenMetadata,r=new Uint32Array(2);return r[0]=e.length,r[1]=n,new $i(r,e,t)}constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=n}equals(e){return e instanceof $i?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const r=t<<1,s=r+(n<<1);for(let o=r;o<s;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],n=kr.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return kr.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return kr.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return kr.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[(e<<1)+1];return kr.getInlineStyleFromMetadata(n,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return kr.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return $i.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new n5(this,e,t,n)}static convertToEndOffset(e,t){const r=(e.length>>>1)-1;for(let s=0;s<r;s++)e[s<<1]=e[s+1<<1];e[r<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,r=(e.length>>>1)-1;for(;n<r;){const s=n+Math.floor((r-n)/2),o=e[s<<1];if(o===t)return s+1;o<t?n=s+1:o>t&&(r=s)}return n}withInserted(e){if(e.length===0)return this;let t=0,n=0,r="";const s=new Array;let o=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){r+=this._text.substring(o,a);const c=this._tokens[(t<<1)+1];s.push(r.length,c),t++,o=a}else if(l){if(l.offset>o){r+=this._text.substring(o,l.offset);const c=this._tokens[(t<<1)+1];s.push(r.length,c),o=l.offset}r+=l.text,s.push(r.length,l.tokenMetadata),n++}else break}return new $i(new Uint32Array(s),r,this._languageIdCodec)}}$i.defaultTokenMetadata=(32768|2<<24)>>>0;class n5{constructor(e,t,n,r){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=r,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let s=this._firstTokenIndex,o=e.getCount();s<o&&!(e.getStartOffset(s)>=n);s++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof n5?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}class Ys{constructor(e,t,n,r){this.startColumn=e,this.endColumn=t,this.className=n,this.type=r,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length,r=t.length;if(n!==r)return!1;for(let s=0;s<n;s++)if(!Ys._equals(e[s],t[s]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;const r=t+1,s=n+1,o=n-t,a=[];let l=0;for(const c of e)c.endColumn<=r||c.startColumn>=s||(a[l++]=new Ys(Math.max(1,c.startColumn-r+1),Math.min(o+1,c.endColumn-r+1),c.className,c.type));return a}static filter(e,t,n,r){if(e.length===0)return[];const s=[];let o=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.range;if(d.endLineNumber<t||d.startLineNumber>t||d.isEmpty()&&(c.type===0||c.type===3))continue;const u=d.startLineNumber===t?d.startColumn:n,h=d.endLineNumber===t?d.endColumn:r;s[o++]=new Ys(u,h,c.inlineClassName,c.type)}return s}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const n=Ys._typeCompare(e.type,t.type);return n!==0?n:e.className!==t.className?e.className<t.className?-1:1:0}}class C6{constructor(e,t,n,r){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=r}}class BT{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,r=e.length;n<r;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let r=0;for(;r+1<this.count&&this.stopOffsets[r]===this.stopOffsets[r+1];)r++;n.push(new C6(t,this.stopOffsets[r],this.classNames.join(" "),BT._metadata(this.metadata))),t=this.stopOffsets[r]+1,this.stopOffsets.splice(0,r+1),this.classNames.splice(0,r+1),this.metadata.splice(0,r+1),this.count-=r+1}return this.count>0&&t<e&&(n.push(new C6(t,e-1,this.classNames.join(" "),BT._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let r=0;r<this.count;r++)if(this.stopOffsets[r]>=e){this.stopOffsets.splice(r,0,e),this.classNames.splice(r,0,t),this.metadata.splice(r,0,n);break}this.count++}}class wIe{static normalize(e,t){if(t.length===0)return[];const n=[],r=new BT;let s=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];let c=l.startColumn,d=l.endColumn;const u=l.className,h=l.type===1?2:l.type===2?4:0;if(c>1){const m=e.charCodeAt(c-2);zi(m)&&c--}if(d>1){const m=e.charCodeAt(d-2);zi(m)&&d--}const f=c-1,g=d-2;s=r.consumeLowerThan(f,s,n),r.count===0&&(s=f),r.insert(g,u,h)}return r.consumeLowerThan(1073741824,s,n),n}}class tr{constructor(e,t,n,r){this.endIndex=e,this.type=t,this.metadata=n,this.containsRTL=r,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class fZ{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class vf{constructor(e,t,n,r,s,o,a,l,c,d,u,h,f,g,m,y,b,v,C){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=r,this.isBasicASCII=s,this.containsRTL=o,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(Ys.compare),this.tabSize=d,this.startVisibleColumn=u,this.spaceWidth=h,this.stopRenderingLineAfter=m,this.renderWhitespace=y==="all"?4:y==="boundary"?1:y==="selection"?2:y==="trailing"?3:0,this.renderControlCharacters=b,this.fontLigatures=v,this.selectionsOnLine=C&&C.sort((L,T)=>L.startOffset<T.startOffset?-1:1);const w=Math.abs(g-h),S=Math.abs(f-h);w<S?(this.renderSpaceWidth=g,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=f,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&Ys.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class gZ{constructor(e,t){this.partIndex=e,this.charIndex=t}}class dc{static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,n,r){const s=(t<<16|n<<0)>>>0;this._data[e-1]=s,this._horizontalOffset[e-1]=r}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=dc.getPartIndex(t),r=dc.getCharIndex(t);return new gZ(n,r)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;const r=(e<<16|n<<0)>>>0;let s=0,o=this.length-1;for(;s+1<o;){const m=s+o>>>1,y=this._data[m];if(y===r)return m;y>r?o=m:s=m}if(s===o)return s;const a=this._data[s],l=this._data[o];if(a===r)return s;if(l===r)return o;const c=dc.getPartIndex(a),d=dc.getCharIndex(a),u=dc.getPartIndex(l);let h;c!==u?h=t:h=dc.getCharIndex(l);const f=n-d,g=h-n;return f<=g?s:o}}class VA{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}}function HC(i,e){if(i.lineContent.length===0){if(i.lineDecorations.length>0){e.appendString("<span>");let t=0,n=0,r=0;for(const o of i.lineDecorations)(o.type===1||o.type===2)&&(e.appendString('<span class="'),e.appendString(o.className),e.appendString('"></span>'),o.type===1&&(r|=1,t++),o.type===2&&(r|=2,n++));e.appendString("</span>");const s=new dc(1,t+n);return s.setColumnInfo(1,t,0,0),new VA(s,!1,r)}return e.appendString("<span><span></span></span>"),new VA(new dc(0,0),!1,0)}return EIe(TIe(i),e)}class SIe{constructor(e,t,n,r){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=r}}function PD(i){const e=new Z1(1e4),t=HC(i,e);return new SIe(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class xIe{constructor(e,t,n,r,s,o,a,l,c,d,u,h,f,g,m,y){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=r,this.isOverflowing=s,this.overflowingCharCount=o,this.parts=a,this.containsForeignElements=l,this.fauxIndentLength=c,this.tabSize=d,this.startVisibleColumn=u,this.containsRTL=h,this.spaceWidth=f,this.renderSpaceCharCode=g,this.renderWhitespace=m,this.renderControlCharacters=y}}function TIe(i){const e=i.lineContent;let t,n,r;i.stopRenderingLineAfter!==-1&&i.stopRenderingLineAfter<e.length?(t=!0,n=e.length-i.stopRenderingLineAfter,r=i.stopRenderingLineAfter):(t=!1,n=0,r=e.length);let s=kIe(e,i.containsRTL,i.lineTokens,i.fauxIndentLength,r);i.renderControlCharacters&&!i.isBasicASCII&&(s=DIe(e,s)),(i.renderWhitespace===4||i.renderWhitespace===1||i.renderWhitespace===2&&i.selectionsOnLine||i.renderWhitespace===3&&!i.continuesWithWrappedLine)&&(s=IIe(i,e,r,s));let o=0;if(i.lineDecorations.length>0){for(let a=0,l=i.lineDecorations.length;a<l;a++){const c=i.lineDecorations[a];c.type===3||c.type===1?o|=1:c.type===2&&(o|=2)}s=RIe(e,r,s,i.lineDecorations)}return i.containsRTL||(s=LIe(e,s,!i.isBasicASCII||i.fontLigatures)),new xIe(i.useMonospaceOptimizations,i.canUseHalfwidthRightwardsArrow,e,r,t,n,s,o,i.fauxIndentLength,i.tabSize,i.startVisibleColumn,i.containsRTL,i.spaceWidth,i.renderSpaceCharCode,i.renderWhitespace,i.renderControlCharacters)}function kIe(i,e,t,n,r){const s=[];let o=0;n>0&&(s[o++]=new tr(n,"",0,!1));let a=n;for(let l=0,c=t.getCount();l<c;l++){const d=t.getEndOffset(l);if(d<=n)continue;const u=t.getClassName(l);if(d>=r){const f=e?z_(i.substring(a,r)):!1;s[o++]=new tr(r,u,0,f);break}const h=e?z_(i.substring(a,d)):!1;s[o++]=new tr(d,u,0,h),a=d}return s}function LIe(i,e,t){let n=0;const r=[];let s=0;if(t)for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex;if(n+50<c){const d=l.type,u=l.metadata,h=l.containsRTL;let f=-1,g=n;for(let m=n;m<c;m++)i.charCodeAt(m)===32&&(f=m),f!==-1&&m-g>=50&&(r[s++]=new tr(f+1,d,u,h),g=f+1,f=-1);g!==c&&(r[s++]=new tr(c,d,u,h))}else r[s++]=l;n=c}else for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex,d=c-n;if(d>50){const u=l.type,h=l.metadata,f=l.containsRTL,g=Math.ceil(d/50);for(let m=1;m<g;m++){const y=n+m*50;r[s++]=new tr(y,u,h,f)}r[s++]=new tr(c,u,h,f)}else r[s++]=l;n=c}return r}function pZ(i){return i<32?i!==9:i===127||i>=8234&&i<=8238||i>=8294&&i<=8297||i>=8206&&i<=8207||i===1564}function DIe(i,e){const t=[];let n=new tr(0,"",0,!1),r=0;for(const s of e){const o=s.endIndex;for(;r<o;r++){const a=i.charCodeAt(r);pZ(a)&&(r>n.endIndex&&(n=new tr(r,s.type,s.metadata,s.containsRTL),t.push(n)),n=new tr(r+1,"mtkcontrol",s.metadata,!1),t.push(n))}r>n.endIndex&&(n=new tr(o,s.type,s.metadata,s.containsRTL),t.push(n))}return t}function IIe(i,e,t,n){const r=i.continuesWithWrappedLine,s=i.fauxIndentLength,o=i.tabSize,a=i.startVisibleColumn,l=i.useMonospaceOptimizations,c=i.selectionsOnLine,d=i.renderWhitespace===1,u=i.renderWhitespace===3,h=i.renderSpaceWidth!==i.spaceWidth,f=[];let g=0,m=0,y=n[m].type,b=n[m].containsRTL,v=n[m].endIndex;const C=n.length;let w=!1,S=ns(e),L;S===-1?(w=!0,S=t,L=t):L=Dl(e);let T=!1,I=0,R=c&&c[I],B=a%o;for(let F=s;F<t;F++){const W=e.charCodeAt(F);R&&F>=R.endOffset&&(I++,R=c&&c[I]);let X;if(F<S||F>L)X=!0;else if(W===9)X=!0;else if(W===32)if(d)if(T)X=!0;else{const oe=F+1<t?e.charCodeAt(F+1):0;X=oe===32||oe===9}else X=!0;else X=!1;if(X&&c&&(X=!!R&&R.startOffset<=F&&R.endOffset>F),X&&u&&(X=w||F>L),X&&b&&F>=S&&F<=L&&(X=!1),T){if(!X||!l&&B>=o){if(h){const oe=g>0?f[g-1].endIndex:s;for(let we=oe+1;we<=F;we++)f[g++]=new tr(we,"mtkw",1,!1)}else f[g++]=new tr(F,"mtkw",1,!1);B=B%o}}else(F===v||X&&F>s)&&(f[g++]=new tr(F,y,0,b),B=B%o);for(W===9?B=o:Bh(W)?B+=2:B++,T=X;F===v&&(m++,m<C);)y=n[m].type,b=n[m].containsRTL,v=n[m].endIndex}let V=!1;if(T)if(r&&d){const F=t>0?e.charCodeAt(t-1):0,W=t>1?e.charCodeAt(t-2):0;F===32&&W!==32&&W!==9||(V=!0)}else V=!0;if(V)if(h){const F=g>0?f[g-1].endIndex:s;for(let W=F+1;W<=t;W++)f[g++]=new tr(W,"mtkw",1,!1)}else f[g++]=new tr(t,"mtkw",1,!1);else f[g++]=new tr(t,y,0,b);return f}function RIe(i,e,t,n){n.sort(Ys.compare);const r=wIe.normalize(i,n),s=r.length;let o=0;const a=[];let l=0,c=0;for(let u=0,h=t.length;u<h;u++){const f=t[u],g=f.endIndex,m=f.type,y=f.metadata,b=f.containsRTL;for(;o<s&&r[o].startOffset<g;){const v=r[o];if(v.startOffset>c&&(c=v.startOffset,a[l++]=new tr(c,m,y,b)),v.endOffset+1<=g)c=v.endOffset+1,a[l++]=new tr(c,m+" "+v.className,y|v.metadata,b),o++;else{c=g,a[l++]=new tr(c,m+" "+v.className,y|v.metadata,b);break}}g>c&&(c=g,a[l++]=new tr(c,m,y,b))}const d=t[t.length-1].endIndex;if(o<s&&r[o].startOffset===d)for(;o<s&&r[o].startOffset===d;){const u=r[o];a[l++]=new tr(c,u.className,u.metadata,!1),o++}return a}function EIe(i,e){const t=i.fontIsMonospace,n=i.canUseHalfwidthRightwardsArrow,r=i.containsForeignElements,s=i.lineContent,o=i.len,a=i.isOverflowing,l=i.overflowingCharCount,c=i.parts,d=i.fauxIndentLength,u=i.tabSize,h=i.startVisibleColumn,f=i.containsRTL,g=i.spaceWidth,m=i.renderSpaceCharCode,y=i.renderWhitespace,b=i.renderControlCharacters,v=new dc(o+1,c.length);let C=!1,w=0,S=h,L=0,T=0,I=0;f?e.appendString('<span dir="ltr">'):e.appendString("<span>");for(let R=0,B=c.length;R<B;R++){const V=c[R],F=V.endIndex,W=V.type,X=V.containsRTL,oe=y!==0&&V.isWhitespace(),we=oe&&!t&&(W==="mtkw"||!r),ke=w===F&&V.isPseudoAfter();if(L=0,e.appendString("<span "),X&&e.appendString('style="unicode-bidi:isolate" '),e.appendString('class="'),e.appendString(we?"mtkz":W),e.appendASCIICharCode(34),oe){let Ee=0;{let Le=w,qe=S;for(;Le<F;Le++){const Oe=(s.charCodeAt(Le)===9?u-qe%u:1)|0;Ee+=Oe,Le>=d&&(qe+=Oe)}}for(we&&(e.appendString(' style="width:'),e.appendString(String(g*Ee)),e.appendString('px"')),e.appendASCIICharCode(62);w<F;w++){v.setColumnInfo(w+1,R-I,L,T),I=0;const Le=s.charCodeAt(w);let qe,Ue;if(Le===9){qe=u-S%u|0,Ue=qe,!n||Ue>1?e.appendCharCode(8594):e.appendCharCode(65515);for(let Oe=2;Oe<=Ue;Oe++)e.appendCharCode(160)}else qe=2,Ue=1,e.appendCharCode(m),e.appendCharCode(8204);L+=qe,T+=Ue,w>=d&&(S+=Ue)}}else for(e.appendASCIICharCode(62);w<F;w++){v.setColumnInfo(w+1,R-I,L,T),I=0;const Ee=s.charCodeAt(w);let Le=1,qe=1;switch(Ee){case 9:Le=u-S%u,qe=Le;for(let Ue=1;Ue<=Le;Ue++)e.appendCharCode(160);break;case 32:e.appendCharCode(160);break;case 60:e.appendString("&lt;");break;case 62:e.appendString("&gt;");break;case 38:e.appendString("&amp;");break;case 0:b?e.appendCharCode(9216):e.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.appendCharCode(65533);break;default:Bh(Ee)&&qe++,b&&Ee<32?e.appendCharCode(9216+Ee):b&&Ee===127?e.appendCharCode(9249):b&&pZ(Ee)?(e.appendString("[U+"),e.appendString(NIe(Ee)),e.appendString("]"),Le=8,qe=Le):e.appendCharCode(Ee)}L+=Le,T+=qe,w>=d&&(S+=qe)}ke?I++:I=0,w>=o&&!C&&V.isPseudoAfter()&&(C=!0,v.setColumnInfo(w+1,R,L,T)),e.appendString("</span>")}return C||v.setColumnInfo(o+1,c.length-1,L,T),a&&(e.appendString('<span class="mtkoverflow">'),e.appendString(p("showMore","Show more ({0})",AIe(l))),e.appendString("</span>")),e.appendString("</span>"),new VA(v,f,r)}function NIe(i){return i.toString(16).toUpperCase().padStart(4,"0")}function AIe(i){return i<1024?p("overflow.chars","{0} chars",i):i<1024*1024?`${(i/1024).toFixed(1)} KB`:`${(i/1024/1024).toFixed(1)} MB`}class w6{constructor(e,t,n,r){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=n|0,this.height=r|0}}class PIe{constructor(e,t){this.tabSize=e,this.data=t}}class i5{constructor(e,t,n,r,s,o,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=r,this.startVisibleColumn=s,this.tokens=o,this.inlineDecorations=a}}class Po{constructor(e,t,n,r,s,o,a,l,c,d){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=r,this.isBasicASCII=Po.isBasicASCII(n,o),this.containsRTL=Po.containsRTL(n,this.isBasicASCII,s),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=d}static isBasicASCII(e,t){return t?OC(e):!0}static containsRTL(e,t,n){return!t&&n?z_(e):!1}}class Mv{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}}class MIe{constructor(e,t,n,r){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=r}toInlineDecoration(e){return new Mv(new D(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class mZ{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class G0{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static compareByRenderingProps(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}static equals(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&fi(e.data,t.data)}static equalsArr(e,t){return fi(e,t,G0.equals)}}function OIe(i){return Array.isArray(i)}function FIe(i){return!OIe(i)}function _Z(i){return typeof i=="string"}function S6(i){return!_Z(i)}function xm(i){return!i}function wh(i,e){return i.ignoreCase&&e?e.toLowerCase():e}function x6(i){return i.replace(/[&<>'"_]/g,"-")}function BIe(i,e){console.log(`${i.languageId}: ${e}`)}function In(i,e){return new Error(`${i.languageId}: ${e}`)}function qu(i,e,t,n,r){const s=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let o=null;return e.replace(s,function(a,l,c,d,u,h,f,g,m){return xm(c)?xm(d)?!xm(u)&&u<n.length?wh(i,n[u]):!xm(f)&&i&&typeof i[f]=="string"?i[f]:(o===null&&(o=r.split("."),o.unshift(r)),!xm(h)&&h<o.length?wh(i,o[h]):""):wh(i,t):"$"})}function Vw(i,e){let t=e;for(;t&&t.length>0;){const n=i.tokenizer[t];if(n)return n;const r=t.lastIndexOf(".");r<0?t=null:t=t.substr(0,r)}return null}function WIe(i,e){let t=e;for(;t&&t.length>0;){if(i.stateNames[t])return!0;const r=t.lastIndexOf(".");r<0?t=null:t=t.substr(0,r)}return!1}var VIe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},HIe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},HA;const bZ=5;class Z0{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new __(e,t);let n=__.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let r=this._entries[n];return r||(r=new __(e,t),this._entries[n]=r,r)}}Z0._INSTANCE=new Z0(bZ);class __{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return __._equals(this,e)}push(e){return Z0.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return Z0.create(this.parent,e)}}class Bm{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new Bm(this.languageId,this.state)}}class Gu{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(t!==null)return new Ov(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new Ov(e,t);const n=__.getStackElementId(e);let r=this._entries[n];return r||(r=new Ov(e,null),this._entries[n]=r,r)}}Gu._INSTANCE=new Gu(bZ);class Ov{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:Gu.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof Ov)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}class UIe{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new A0(e,t,this._languageId)))}nestedLanguageTokenize(e,t,n,r){const s=n.languageId,o=n.state,a=Gn.get(s);if(!a)return this.enterLanguage(s),this.emit(r,""),o;const l=a.tokenize(e,t,o);if(r!==0)for(const c of l.tokens)this._tokens.push(new A0(c.offset+r,c.type,c.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new E3(this._tokens,e)}}class WT{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const n=this._theme.match(this._currentLanguageId,t)|1024;this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){const r=e!==null?e.length:0,s=t.length,o=n!==null?n.length:0;if(r===0&&s===0&&o===0)return new Uint32Array(0);if(r===0&&s===0)return n;if(s===0&&o===0)return e;const a=new Uint32Array(r+s+o);e!==null&&a.set(e);for(let l=0;l<s;l++)a[r+l]=t[l];return n!==null&&a.set(n,r+s),a}nestedLanguageTokenize(e,t,n,r){const s=n.languageId,o=n.state,a=Gn.get(s);if(!a)return this.enterLanguage(s),this.emit(r,""),o;const l=a.tokenizeEncoded(e,t,o);if(r!==0)for(let c=0,d=l.tokens.length;c<d;c+=2)l.tokens[c]+=r;return this._prependTokens=WT._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new cD(WT._merge(this._prependTokens,this._tokens,null),e)}}let X0=HA=class extends q{constructor(e,t,n,r,s){super(),this._configurationService=s,this._languageService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=r,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let o=!1;this._register(Gn.onDidChange(a=>{if(o)return;let l=!1;for(let c=0,d=a.changedLanguages.length;c<d;c++){const u=a.changedLanguages[c];if(this._embeddedLanguages[u]){l=!0;break}}l&&(o=!0,Gn.handleChange([this._languageId]),o=!1)})),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))}))}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const n=Gn.get(t);if(n){if(n instanceof HA){const r=n.getLoadStatus();r.loaded===!1&&e.push(r.promise)}continue}Gn.isResolved(t)||e.push(Gn.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=Z0.create(null,this._lexer.start);return Gu.create(e,null)}tokenize(e,t,n){if(e.length>=this._maxTokenizationLineLength)return t5(this._languageId,n);const r=new UIe,s=this._tokenize(e,t,n,r);return r.finalize(s)}tokenizeEncoded(e,t,n){if(e.length>=this._maxTokenizationLineLength)return AD(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),n);const r=new WT(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),s=this._tokenize(e,t,n,r);return r.finalize(s)}_tokenize(e,t,n,r){return n.embeddedLanguageData?this._nestedTokenize(e,t,n,0,r):this._myTokenize(e,t,n,0,r)}_findLeavingNestedLanguageOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=Vw(this._lexer,t.stack.state),!n))throw In(this._lexer,"tokenizer state is not defined: "+t.stack.state);let r=-1,s=!1;for(const o of n){if(!S6(o.action)||o.action.nextEmbedded!=="@pop")continue;s=!0;let a=o.regex;const l=o.regex.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const d=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),d)}const c=e.search(a);c===-1||c!==0&&o.matchOnlyAtLineStart||(r===-1||c<r)&&(r=c)}if(!s)throw In(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return r}_nestedTokenize(e,t,n,r,s){const o=this._findLeavingNestedLanguageOffset(e,n);if(o===-1){const c=s.nestedLanguageTokenize(e,t,n.embeddedLanguageData,r);return Gu.create(n.stack,new Bm(n.embeddedLanguageData.languageId,c))}const a=e.substring(0,o);a.length>0&&s.nestedLanguageTokenize(a,!1,n.embeddedLanguageData,r);const l=e.substring(o);return this._myTokenize(l,t,n,r+o,s)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,r,s){s.enterLanguage(this._languageId);const o=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=n.embeddedLanguageData,d=n.stack,u=0,h=null,f=!0;for(;f||u<l;){const g=u,m=d.depth,y=h?h.groups.length:0,b=d.state;let v=null,C=null,w=null,S=null,L=null;if(h){v=h.matches;const R=h.groups.shift();C=R.matched,w=R.action,S=h.rule,h.groups.length===0&&(h=null)}else{if(!f&&u>=l)break;f=!1;let R=this._lexer.tokenizer[b];if(!R&&(R=Vw(this._lexer,b),!R))throw In(this._lexer,"tokenizer state is not defined: "+b);const B=a.substr(u);for(const V of R)if((u===0||!V.matchOnlyAtLineStart)&&(v=B.match(V.regex),v)){C=v[0],w=V.action;break}}if(v||(v=[""],C=""),w||(u<l&&(v=[a.charAt(u)],C=v[0]),w=this._lexer.defaultToken),C===null)break;for(u+=C.length;FIe(w)&&S6(w)&&w.test;)w=w.test(C,v,b,u===l);let T=null;if(typeof w=="string"||Array.isArray(w))T=w;else if(w.group)T=w.group;else if(w.token!==null&&w.token!==void 0){if(w.tokenSubst?T=qu(this._lexer,w.token,C,v,b):T=w.token,w.nextEmbedded)if(w.nextEmbedded==="@pop"){if(!c)throw In(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw In(this._lexer,"cannot enter embedded language from within an embedded language");L=qu(this._lexer,w.nextEmbedded,C,v,b)}if(w.goBack&&(u=Math.max(0,u-w.goBack)),w.switchTo&&typeof w.switchTo=="string"){let R=qu(this._lexer,w.switchTo,C,v,b);if(R[0]==="@"&&(R=R.substr(1)),Vw(this._lexer,R))d=d.switchTo(R);else throw In(this._lexer,"trying to switch to a state '"+R+"' that is undefined in rule: "+this._safeRuleName(S))}else{if(w.transform&&typeof w.transform=="function")throw In(this._lexer,"action.transform not supported");if(w.next)if(w.next==="@push"){if(d.depth>=this._lexer.maxStack)throw In(this._lexer,"maximum tokenizer stack size reached: ["+d.state+","+d.parent.state+",...]");d=d.push(b)}else if(w.next==="@pop"){if(d.depth<=1)throw In(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(S));d=d.pop()}else if(w.next==="@popall")d=d.popall();else{let R=qu(this._lexer,w.next,C,v,b);if(R[0]==="@"&&(R=R.substr(1)),Vw(this._lexer,R))d=d.push(R);else throw In(this._lexer,"trying to set a next state '"+R+"' that is undefined in rule: "+this._safeRuleName(S))}}w.log&&typeof w.log=="string"&&BIe(this._lexer,this._lexer.languageId+": "+qu(this._lexer,w.log,C,v,b))}if(T===null)throw In(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(S));const I=R=>{const B=this._languageService.getLanguageIdByLanguageName(R)||this._languageService.getLanguageIdByMimeType(R)||R,V=this._getNestedEmbeddedLanguageData(B);if(u<l){const F=e.substr(u);return this._nestedTokenize(F,t,Gu.create(d,V),r+u,s)}else return Gu.create(d,V)};if(Array.isArray(T)){if(h&&h.groups.length>0)throw In(this._lexer,"groups cannot be nested: "+this._safeRuleName(S));if(v.length!==T.length+1)throw In(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(S));let R=0;for(let B=1;B<v.length;B++)R+=v[B].length;if(R!==C.length)throw In(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(S));h={rule:S,matches:v,groups:[]};for(let B=0;B<T.length;B++)h.groups[B]={action:T[B],matched:v[B+1]};u-=C.length;continue}else{if(T==="@rematch"&&(u-=C.length,C="",v=null,T="",L!==null))return I(L);if(C.length===0){if(l===0||m!==d.depth||b!==d.state||(h?h.groups.length:0)!==y)continue;throw In(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(S))}let R=null;if(_Z(T)&&T.indexOf("@brackets")===0){const B=T.substr(9),V=jIe(this._lexer,C);if(!V)throw In(this._lexer,"@brackets token returned but no bracket defined as: "+C);R=x6(V.token+B)}else{const B=T===""?"":T+this._lexer.tokenPostfix;R=x6(B)}g<o&&s.emit(g+r,R)}if(L!==null)return I(L)}return Gu.create(d,c)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new Bm(e,Y_);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),Gn.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=Gn.get(e);return t?new Bm(e,t.getInitialState()):new Bm(e,Y_)}};X0=HA=VIe([HIe(4,Et)],X0);function jIe(i,e){if(!e)return null;e=wh(i,e);const t=i.brackets;for(const n of t){if(n.open===e)return{token:n.token,bracketType:1};if(n.close===e)return{token:n.token,bracketType:-1}}return null}var zIe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const aE=vu("standaloneColorizer",{createHTML:i=>i});class r5{static colorizeElement(e,t,n,r){r=r||{};const s=r.theme||"vs",o=r.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(o)||o;e.setTheme(s);const l=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+s;const c=d=>{var u;const h=(u=aE==null?void 0:aE.createHTML(d))!==null&&u!==void 0?u:d;n.innerHTML=h};return this.colorize(t,l||"",a,r).then(c,d=>console.error(d))}static colorize(e,t,n,r){return zIe(this,void 0,void 0,function*(){const s=e.languageIdCodec;let o=4;r&&typeof r.tabSize=="number"&&(o=r.tabSize),B3(t)&&(t=t.substr(1));const a=Kc(t);if(!e.isRegisteredLanguageId(n))return T6(a,o,s);const l=yield Gn.getOrCreate(n);return l?$Ie(a,o,l,s):T6(a,o,s)})}static colorizeLine(e,t,n,r,s=4){const o=Po.isBasicASCII(e,t),a=Po.containsRTL(e,o,n);return PD(new vf(!1,!0,e,!1,o,a,0,r,[],s,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,n=4){const r=e.getLineContent(t);e.tokenization.forceTokenization(t);const o=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(r,e.mightContainNonBasicASCII(),e.mightContainRTL(),o,n)}}function $Ie(i,e,t,n){return new Promise((r,s)=>{const o=()=>{const a=KIe(i,e,t,n);if(t instanceof X0){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(o,s);return}}r(a)};o()})}function T6(i,e,t){let n=[];const s=new Uint32Array(2);s[0]=0,s[1]=33587200;for(let o=0,a=i.length;o<a;o++){const l=i[o];s[0]=l.length;const c=new $i(s,l,t),d=Po.isBasicASCII(l,!0),u=Po.containsRTL(l,d,!0),h=PD(new vf(!1,!0,l,!1,d,u,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(h.html),n.push("<br/>")}return n.join("")}function KIe(i,e,t,n){let r=[],s=t.getInitialState();for(let o=0,a=i.length;o<a;o++){const l=i[o],c=t.tokenizeEncoded(l,!0,s);$i.convertToEndOffset(c.tokens,l.length);const d=new $i(c.tokens,l,n),u=Po.isBasicASCII(l,!0),h=Po.containsRTL(l,u,!0),f=PD(new vf(!1,!0,l,!1,u,h,0,d.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));r=r.concat(f.html),r.push("<br/>"),s=c.endState}return r.join("")}const k6=2e4;let Jf,vx,UA,yx,jA;function qIe(i){Jf=document.createElement("div"),Jf.className="monaco-aria-container";const e=()=>{const n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),Jf.appendChild(n),n};vx=e(),UA=e();const t=()=>{const n=document.createElement("div");return n.className="monaco-status",n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),Jf.appendChild(n),n};yx=t(),jA=t(),i.appendChild(Jf)}function jr(i){Jf&&(vx.textContent!==i?(_r(UA),VT(vx,i)):(_r(vx),VT(UA,i)))}function zh(i){Jf&&(yx.textContent!==i?(_r(jA),VT(yx,i)):(_r(yx),VT(jA,i)))}function VT(i,e){_r(i),e.length>k6&&(e=e.substr(0,k6)),i.textContent=e,i.style.visibility="hidden",i.style.visibility="visible"}const s5=Lt("markerDecorationsService");var GIe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},ZIe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Y0=class{constructor(e,t){}dispose(){}};Y0.ID="editor.contrib.markerDecorations";Y0=GIe([ZIe(1,s5)],Y0);$t(Y0.ID,Y0,0);class vZ extends q{constructor(e,t){super(),this._onDidChange=this._register(new H),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null;const t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()};let n=!1,r=!1;const s=()=>{if(n&&!r)try{n=!1,r=!0,t()}finally{requestAnimationFrame(()=>{r=!1,s()})}};this._resizeObserver=new ResizeObserver(o=>{e=o&&o[0]&&o[0].contentRect?o[0].contentRect:null,n=!0,s()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,r=0;t?(n=t.width,r=t.height):this._referenceDomElement&&(n=this._referenceDomElement.clientWidth,r=this._referenceDomElement.clientHeight),n=Math.max(5,n),r=Math.max(5,r),(this._width!==n||this._height!==r)&&(this._width=n,this._height=r,e&&this._onDidChange.fire())}}class Sh{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=Sh._read(e,this.key),n=s=>Sh._read(e,s),r=(s,o)=>Sh._write(e,s,o);this.migrate(t,n,r)}static _read(e,t){if(typeof e>"u")return;const n=t.indexOf(".");if(n>=0){const r=t.substring(0,n);return this._read(e[r],t.substring(n+1))}return e[t]}static _write(e,t,n){const r=t.indexOf(".");if(r>=0){const s=t.substring(0,r);e[s]=e[s]||{},this._write(e[s],t.substring(r+1),n);return}e[t]=n}}Sh.items=[];function yf(i,e){Sh.items.push(new Sh(i,e))}function ga(i,e){yf(i,(t,n,r)=>{if(typeof t<"u"){for(const[s,o]of e)if(t===s){r(i,o);return}}})}function XIe(i){Sh.items.forEach(e=>e.apply(i))}ga("wordWrap",[[!0,"on"],[!1,"off"]]);ga("lineNumbers",[[!0,"on"],[!1,"off"]]);ga("cursorBlinking",[["visible","solid"]]);ga("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);ga("renderLineHighlight",[[!0,"line"],[!1,"none"]]);ga("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);ga("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);ga("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);ga("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);ga("autoIndent",[[!1,"advanced"],[!0,"full"]]);ga("matchBrackets",[[!0,"always"],[!1,"never"]]);ga("renderFinalNewline",[[!0,"on"],[!1,"off"]]);ga("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);yf("autoClosingBrackets",(i,e,t)=>{i===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});yf("renderIndentGuides",(i,e,t)=>{typeof i<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!i))});yf("highlightActiveIndentGuide",(i,e,t)=>{typeof i<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!i))});const YIe={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};yf("suggest.filteredTypes",(i,e,t)=>{if(i&&typeof i=="object"){for(const n of Object.entries(YIe))i[n[0]]===!1&&typeof e(`suggest.${n[1]}`)>"u"&&t(`suggest.${n[1]}`,!1);t("suggest.filteredTypes",void 0)}});yf("quickSuggestions",(i,e,t)=>{if(typeof i=="boolean"){const n=i?"on":"off";t("quickSuggestions",{comments:n,strings:n,other:n})}});yf("experimental.stickyScroll.enabled",(i,e,t)=>{typeof i=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",i))});yf("experimental.stickyScroll.maxLineCount",(i,e,t)=>{typeof i=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",i))});class QIe{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new H,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}}const Q_=new QIe,yu=Lt("accessibilityService"),UC=new Ne("accessibilityModeEnabled",!1);var JIe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},eRe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let zA=class extends q{constructor(e,t,n,r){super(),this._accessibilityService=r,this._onDidChange=this._register(new H),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new H),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new Hq,this.isSimpleWidget=e,this._containerObserver=this._register(new vZ(n,t.dimension)),this._rawOptions=L6(t),this._validatedOptions=Zu.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(Go.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(Q_.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(yA.onDidChange(()=>this._recomputeOptions())),this._register(F0.onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=Zu.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=wg.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),n=this._readFontInfo(t),r={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:n,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:Q_.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return Zu.computeOptions(this._validatedOptions,r)}_readEnvConfiguration(){return{extraEditorClassName:nRe(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:Cg||aa,pixelRatio:F0.value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return yA.readFontInfo(e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=L6(e);Zu.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=Zu.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=tRe(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}};zA=JIe([eRe(3,yu)],zA);function tRe(i){let e=0;for(;i;)i=Math.floor(i/10),e++;return e||1}function nRe(){let i="";return!hu&&!fG&&(i+="no-user-select "),hu&&(i+="no-minimap-shadow ",i+="enable-user-select "),Ot&&(i+="mac "),i}class iRe{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class rRe{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class Zu{static validateOptions(e){const t=new iRe;for(const n of Am){const r=n.name==="_never_"?void 0:e[n.name];t._write(n.id,n.validate(r))}return t}static computeOptions(e,t){const n=new rRe;for(const r of Am)n._write(r.id,r.compute(t,n,e._read(r.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?fi(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Zu._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){const n=[];let r=!1;for(const s of Am){const o=!Zu._deepEquals(e._read(s.id),t._read(s.id));n[s.id]=o,o&&(r=!0)}return r?new Vq(n):null}static applyUpdate(e,t){let n=!1;for(const r of Am)if(t.hasOwnProperty(r.name)){const s=r.applyUpdate(e[r.name],t[r.name]);e[r.name]=s.newValue,n=n||s.didChange}return n}}function L6(i){const e=Rd(i);return XIe(e),e}function Ci(i,e,t){let n=null,r=null;if(typeof t.value=="function"?(n="value",r=t.value,r.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",r=t.get),!r)throw new Error("not supported");const s=`$memoize$${e}`;t[n]=function(...o){return this.hasOwnProperty(s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!1,value:r.apply(this,o)}),this[s]}}var sRe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},yn;(function(i){i.Tap="-monaco-gesturetap",i.Change="-monaco-gesturechange",i.Start="-monaco-gesturestart",i.End="-monaco-gesturesend",i.Contextmenu="-monaco-gesturecontextmenu"})(yn||(yn={}));class vn extends q{constructor(){super(),this.dispatched=!1,this.targets=new ps,this.ignoreTargets=new ps,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(ee(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register(ee(document,"touchend",e=>this.onTouchEnd(e))),this._register(ee(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){if(!vn.isTouchDevice())return q.None;vn.INSTANCE||(vn.INSTANCE=new vn);const t=vn.INSTANCE.targets.push(e);return st(t)}static ignoreTarget(e){if(!vn.isTouchDevice())return q.None;vn.INSTANCE||(vn.INSTANCE=new vn);const t=vn.INSTANCE.ignoreTargets.push(e);return st(t)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,r=e.targetTouches.length;n<r;n++){const s=e.targetTouches.item(n);this.activeTouches[s.identifier]={id:s.identifier,initialTarget:s.target,initialTimeStamp:t,initialPageX:s.pageX,initialPageY:s.pageY,rollingTimestamps:[t],rollingPageX:[s.pageX],rollingPageY:[s.pageY]};const o=this.newGestureEvent(yn.Start,s.target);o.pageX=s.pageX,o.pageY=s.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){const t=Date.now(),n=Object.keys(this.activeTouches).length;for(let r=0,s=e.changedTouches.length;r<s;r++){const o=e.changedTouches.item(r);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("move of an UNKNOWN touch",o);continue}const a=this.activeTouches[o.identifier],l=Date.now()-a.initialTimeStamp;if(l<vn.HOLD_DELAY&&Math.abs(a.initialPageX-jo(a.rollingPageX))<30&&Math.abs(a.initialPageY-jo(a.rollingPageY))<30){const c=this.newGestureEvent(yn.Tap,a.initialTarget);c.pageX=jo(a.rollingPageX),c.pageY=jo(a.rollingPageY),this.dispatchEvent(c)}else if(l>=vn.HOLD_DELAY&&Math.abs(a.initialPageX-jo(a.rollingPageX))<30&&Math.abs(a.initialPageY-jo(a.rollingPageY))<30){const c=this.newGestureEvent(yn.Contextmenu,a.initialTarget);c.pageX=jo(a.rollingPageX),c.pageY=jo(a.rollingPageY),this.dispatchEvent(c)}else if(n===1){const c=jo(a.rollingPageX),d=jo(a.rollingPageY),u=jo(a.rollingTimestamps)-a.rollingTimestamps[0],h=c-a.rollingPageX[0],f=d-a.rollingPageY[0],g=[...this.targets].filter(m=>a.initialTarget instanceof Node&&m.contains(a.initialTarget));this.inertia(g,t,Math.abs(h)/u,h>0?1:-1,c,Math.abs(f)/u,f>0?1:-1,d)}this.dispatchEvent(this.newGestureEvent(yn.End,a.initialTarget)),delete this.activeTouches[o.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===yn.Tap){const t=new Date().getTime();let n=0;t-this._lastSetTapCountTime>vn.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===yn.Change||e.type===yn.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const t of this.ignoreTargets)if(t.contains(e.initialTarget))return;for(const t of this.targets)t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)}}inertia(e,t,n,r,s,o,a,l){this.handle=la(()=>{const c=Date.now(),d=c-t;let u=0,h=0,f=!0;n+=vn.SCROLL_FRICTION*d,o+=vn.SCROLL_FRICTION*d,n>0&&(f=!1,u=r*n*d),o>0&&(f=!1,h=a*o*d);const g=this.newGestureEvent(yn.Change);g.translationX=u,g.translationY=h,e.forEach(m=>m.dispatchEvent(g)),f||this.inertia(e,c,n,r,s+u,o,a,l+h)})}onTouchMove(e){const t=Date.now();for(let n=0,r=e.changedTouches.length;n<r;n++){const s=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("end of an UNKNOWN touch",s);continue}const o=this.activeTouches[s.identifier],a=this.newGestureEvent(yn.Change,o.initialTarget);a.translationX=s.pageX-jo(o.rollingPageX),a.translationY=s.pageY-jo(o.rollingPageY),a.pageX=s.pageX,a.pageY=s.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(s.pageX),o.rollingPageY.push(s.pageY),o.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}vn.SCROLL_FRICTION=-.005;vn.HOLD_DELAY=700;vn.CLEAR_TAP_COUNT_TIME=400;sRe([Ci],vn,"isTouchDevice",null);class Y1{constructor(){this._hooks=new ae,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,n,r,s){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=r,this._onStopCallback=s;let o=e;try{e.setPointerCapture(t),this._hooks.add(st(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{o=window}this._hooks.add(ee(o,Ce.POINTER_MOVE,a=>{if(a.buttons!==n){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(ee(o,Ce.POINTER_UP,a=>this.stopMonitoring(!0)))}}function o5(i){return`--vscode-${i.replace(/\./g,"-")}`}function Ae(i){return`var(${o5(i)})`}function oRe(i,e){return`var(${o5(i)}, ${e})`}const yZ={ColorContribution:"base.contributions.colors"};class aRe{constructor(){this._onDidChangeSchema=new H,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,r=!1,s){const o={id:e,description:n,defaults:t,needsTransparency:r,deprecationMessage:s};this.colorsById[e]=o;const a={type:"string",description:n,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return s&&(a.deprecationMessage=s),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n&&n.defaults){const r=n.defaults[t.type];return sl(r,t)}}getColorSchema(){return this.colorSchema}toString(){const e=(t,n)=>{const r=t.indexOf(".")===-1?0:1,s=n.indexOf(".")===-1?0:1;return r!==s?r-s:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const MD=new aRe;qn.add(yZ.ColorContribution,MD);function P(i,e,t,n,r){return MD.registerColor(i,e,t,n,r)}const fe=P("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},p("foreground","Overall foreground color. This color is only used if not overridden by a component."));P("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},p("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));const lRe=P("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},p("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));P("descriptionForeground",{light:"#717171",dark:ze(fe,.7),hcDark:ze(fe,.7),hcLight:ze(fe,.7)},p("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const nh=P("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},p("iconForeground","The default color for icons in the workbench.")),ko=P("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},p("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),Rt=P("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},p("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Rn=P("contrastActiveBorder",{light:null,dark:null,hcDark:ko,hcLight:ko},p("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));P("selection.background",{light:null,dark:null,hcDark:null,hcLight:null},p("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));P("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:K.black,hcLight:"#292929"},p("textSeparatorForeground","Color for text separators."));const cRe=P("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},p("textLinkForeground","Foreground color for links in text."));P("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},p("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));P("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#D7BA7D",hcLight:"#292929"},p("textPreformatForeground","Foreground color for preformatted text segments."));P("textBlockQuote.background",{light:"#7f7f7f1a",dark:"#7f7f7f1a",hcDark:null,hcLight:"#F2F2F2"},p("textBlockQuoteBackground","Background color for block quotes in text."));P("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:K.white,hcLight:"#292929"},p("textBlockQuoteBorder","Border color for block quotes in text."));P("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:K.black,hcLight:"#F2F2F2"},p("textCodeBlockBackground","Background color for code blocks in text."));const xc=P("widget.shadow",{dark:ze(K.black,.36),light:ze(K.black,.16),hcDark:null,hcLight:null},p("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),a5=P("widget.border",{dark:null,light:null,hcDark:Rt,hcLight:Rt},p("widgetBorder","Border color of widgets such as find/replace inside the editor.")),CZ=P("input.background",{dark:"#3C3C3C",light:K.white,hcDark:K.black,hcLight:K.white},p("inputBoxBackground","Input box background.")),wZ=P("input.foreground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("inputBoxForeground","Input box foreground.")),SZ=P("input.border",{dark:null,light:null,hcDark:Rt,hcLight:Rt},p("inputBoxBorder","Input box border.")),l5=P("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:Rt,hcLight:Rt},p("inputBoxActiveOptionBorder","Border color of activated options in input fields."));P("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},p("inputOption.hoverBackground","Background color of activated options in input fields."));const hg=P("inputOption.activeBackground",{dark:ze(ko,.4),light:ze(ko,.2),hcDark:K.transparent,hcLight:K.transparent},p("inputOption.activeBackground","Background hover color of options in input fields.")),c5=P("inputOption.activeForeground",{dark:K.white,light:K.black,hcDark:fe,hcLight:fe},p("inputOption.activeForeground","Foreground color of activated options in input fields."));P("input.placeholderForeground",{light:ze(fe,.5),dark:ze(fe,.5),hcDark:ze(fe,.7),hcLight:ze(fe,.7)},p("inputPlaceholderForeground","Input box foreground color for placeholder text."));const dRe=P("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:K.black,hcLight:K.white},p("inputValidationInfoBackground","Input validation background color for information severity.")),uRe=P("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:fe},p("inputValidationInfoForeground","Input validation foreground color for information severity.")),hRe=P("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:Rt,hcLight:Rt},p("inputValidationInfoBorder","Input validation border color for information severity.")),fRe=P("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:K.black,hcLight:K.white},p("inputValidationWarningBackground","Input validation background color for warning severity.")),gRe=P("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:fe},p("inputValidationWarningForeground","Input validation foreground color for warning severity.")),pRe=P("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:Rt,hcLight:Rt},p("inputValidationWarningBorder","Input validation border color for warning severity.")),mRe=P("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:K.black,hcLight:K.white},p("inputValidationErrorBackground","Input validation background color for error severity.")),_Re=P("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:fe},p("inputValidationErrorForeground","Input validation foreground color for error severity.")),bRe=P("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:Rt,hcLight:Rt},p("inputValidationErrorBorder","Input validation border color for error severity.")),Tc=P("dropdown.background",{dark:"#3C3C3C",light:K.white,hcDark:K.black,hcLight:K.white},p("dropdownBackground","Dropdown background.")),vRe=P("dropdown.listBackground",{dark:null,light:null,hcDark:K.black,hcLight:K.white},p("dropdownListBackground","Dropdown list background.")),zd=P("dropdown.foreground",{dark:"#F0F0F0",light:fe,hcDark:K.white,hcLight:fe},p("dropdownForeground","Dropdown foreground.")),Wm=P("dropdown.border",{dark:Tc,light:"#CECECE",hcDark:Rt,hcLight:Rt},p("dropdownBorder","Dropdown border.")),iv=P("button.foreground",{dark:K.white,light:K.white,hcDark:K.white,hcLight:K.white},p("buttonForeground","Button foreground color.")),yRe=P("button.separator",{dark:ze(iv,.4),light:ze(iv,.4),hcDark:ze(iv,.4),hcLight:ze(iv,.4)},p("buttonSeparator","Button separator color.")),rv=P("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},p("buttonBackground","Button background color.")),CRe=P("button.hoverBackground",{dark:Il(rv,.2),light:Pp(rv,.2),hcDark:rv,hcLight:rv},p("buttonHoverBackground","Button background color when hovering.")),wRe=P("button.border",{dark:Rt,light:Rt,hcDark:Rt,hcLight:Rt},p("buttonBorder","Button border color.")),SRe=P("button.secondaryForeground",{dark:K.white,light:K.white,hcDark:K.white,hcLight:fe},p("buttonSecondaryForeground","Secondary button foreground color.")),$A=P("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:K.white},p("buttonSecondaryBackground","Secondary button background color.")),xRe=P("button.secondaryHoverBackground",{dark:Il($A,.2),light:Pp($A,.2),hcDark:null,hcLight:null},p("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),Cx=P("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:K.black,hcLight:"#0F4A85"},p("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),TRe=P("badge.foreground",{dark:K.white,light:"#333",hcDark:K.white,hcLight:K.white},p("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),kRe=P("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},p("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),sv=P("scrollbarSlider.background",{dark:K.fromHex("#797979").transparent(.4),light:K.fromHex("#646464").transparent(.4),hcDark:ze(Rt,.6),hcLight:ze(Rt,.4)},p("scrollbarSliderBackground","Scrollbar slider background color.")),ov=P("scrollbarSlider.hoverBackground",{dark:K.fromHex("#646464").transparent(.7),light:K.fromHex("#646464").transparent(.7),hcDark:ze(Rt,.8),hcLight:ze(Rt,.8)},p("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),av=P("scrollbarSlider.activeBackground",{dark:K.fromHex("#BFBFBF").transparent(.4),light:K.fromHex("#000000").transparent(.6),hcDark:Rt,hcLight:Rt},p("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),LRe=P("progressBar.background",{dark:K.fromHex("#0E70C0"),light:K.fromHex("#0E70C0"),hcDark:Rt,hcLight:Rt},p("progressBarBackground","Background color of the progress bar that can show for long running operations."));P("editorError.background",{dark:null,light:null,hcDark:null,hcLight:null},p("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const kc=P("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},p("editorError.foreground","Foreground color of error squigglies in the editor.")),DRe=P("editorError.border",{dark:null,light:null,hcDark:K.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},p("errorBorder","If set, color of double underlines for errors in the editor."));P("editorWarning.background",{dark:null,light:null,hcDark:null,hcLight:null},p("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const Lo=P("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},p("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),Q0=P("editorWarning.border",{dark:null,light:null,hcDark:K.fromHex("#FFCC00").transparent(.8),hcLight:K.fromHex("#FFCC00").transparent(.8)},p("warningBorder","If set, color of double underlines for warnings in the editor."));P("editorInfo.background",{dark:null,light:null,hcDark:null,hcLight:null},p("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const Ms=P("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},p("editorInfo.foreground","Foreground color of info squigglies in the editor.")),J0=P("editorInfo.border",{dark:null,light:null,hcDark:K.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},p("infoBorder","If set, color of double underlines for infos in the editor.")),IRe=P("editorHint.foreground",{dark:K.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},p("editorHint.foreground","Foreground color of hint squigglies in the editor."));P("editorHint.border",{dark:null,light:null,hcDark:K.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},p("hintBorder","If set, color of double underlines for hints in the editor."));P("sash.hoverBorder",{dark:ko,light:ko,hcDark:ko,hcLight:ko},p("sashActiveBorder","Border color of active sashes."));const Ki=P("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:K.black,hcLight:K.white},p("editorBackground","Editor background color.")),La=P("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:K.white,hcLight:fe},p("editorForeground","Editor default foreground color."));P("editorStickyScroll.background",{light:Ki,dark:Ki,hcDark:Ki,hcLight:Ki},p("editorStickyScrollBackground","Sticky scroll background color for the editor"));P("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:K.fromHex("#0F4A85").transparent(.1)},p("editorStickyScrollHoverBackground","Sticky scroll on hover background color for the editor"));const si=P("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:K.white},p("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),Lc=P("editorWidget.foreground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),Dc=P("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:Rt,hcLight:Rt},p("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),RRe=P("editorWidget.resizeBorder",{light:null,dark:null,hcDark:null,hcLight:null},p("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),D6=P("quickInput.background",{dark:si,light:si,hcDark:si,hcLight:si},p("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),ERe=P("quickInput.foreground",{dark:Lc,light:Lc,hcDark:Lc,hcLight:Lc},p("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),NRe=P("quickInputTitle.background",{dark:new K(new Mt(255,255,255,.105)),light:new K(new Mt(0,0,0,.06)),hcDark:"#000000",hcLight:K.white},p("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),xZ=P("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:K.white,hcLight:"#0F4A85"},p("pickerGroupForeground","Quick picker color for grouping labels.")),ARe=P("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:K.white,hcLight:"#0F4A85"},p("pickerGroupBorder","Quick picker color for grouping borders.")),PRe=P("keybindingLabel.background",{dark:new K(new Mt(128,128,128,.17)),light:new K(new Mt(221,221,221,.4)),hcDark:K.transparent,hcLight:K.transparent},p("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),MRe=P("keybindingLabel.foreground",{dark:K.fromHex("#CCCCCC"),light:K.fromHex("#555555"),hcDark:K.white,hcLight:fe},p("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),ORe=P("keybindingLabel.border",{dark:new K(new Mt(51,51,51,.6)),light:new K(new Mt(204,204,204,.4)),hcDark:new K(new Mt(111,195,223)),hcLight:Rt},p("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),FRe=P("keybindingLabel.bottomBorder",{dark:new K(new Mt(68,68,68,.6)),light:new K(new Mt(187,187,187,.4)),hcDark:new K(new Mt(111,195,223)),hcLight:fe},p("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),ih=P("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},p("editorSelectionBackground","Color of the editor selection.")),BRe=P("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:K.white},p("editorSelectionForeground","Color of the selected text for high contrast.")),TZ=P("editor.inactiveSelectionBackground",{light:ze(ih,.5),dark:ze(ih,.5),hcDark:ze(ih,.7),hcLight:ze(ih,.5)},p("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),d5=P("editor.selectionHighlightBackground",{light:M6(ih,Ki,.3,.6),dark:M6(ih,Ki,.3,.6),hcDark:null,hcLight:null},p("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);P("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:Rn,hcLight:Rn},p("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));const WRe=P("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},p("editorFindMatch","Color of the current search match.")),Ic=P("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},p("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),VRe=P("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},p("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),HRe=P("editor.findMatchBorder",{light:null,dark:null,hcDark:Rn,hcLight:Rn},p("editorFindMatchBorder","Border color of the current search match.")),rh=P("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:Rn,hcLight:Rn},p("findMatchHighlightBorder","Border color of the other search matches.")),URe=P("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:ze(Rn,.4),hcLight:ze(Rn,.4)},p("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);P("searchEditor.findMatchBackground",{light:ze(Ic,.66),dark:ze(Ic,.66),hcDark:Ic,hcLight:Ic},p("searchEditor.queryMatch","Color of the Search Editor query matches."));P("searchEditor.findMatchBorder",{light:ze(rh,.66),dark:ze(rh,.66),hcDark:rh,hcLight:rh},p("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));P("search.resultsInfoForeground",{light:fe,dark:ze(fe,.65),hcDark:fe,hcLight:fe},p("search.resultsInfoForeground","Color of the text in the search viewlet's completion message."));P("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},p("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const HT=P("editorHoverWidget.background",{light:si,dark:si,hcDark:si,hcLight:si},p("hoverBackground","Background color of the editor hover."));P("editorHoverWidget.foreground",{light:Lc,dark:Lc,hcDark:Lc,hcLight:Lc},p("hoverForeground","Foreground color of the editor hover."));const jRe=P("editorHoverWidget.border",{light:Dc,dark:Dc,hcDark:Dc,hcLight:Dc},p("hoverBorder","Border color of the editor hover."));P("editorHoverWidget.statusBarBackground",{dark:Il(HT,.2),light:Pp(HT,.05),hcDark:si,hcLight:si},p("statusBarBackground","Background color of the editor hover status bar."));const zRe=P("editorLink.activeForeground",{dark:"#4E94CE",light:K.blue,hcDark:K.cyan,hcLight:"#292929"},p("activeLinkForeground","Color of active links.")),$d=P("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:K.white,hcLight:K.black},p("editorInlayHintForeground","Foreground color of inline hints")),Kd=P("editorInlayHint.background",{dark:ze(Cx,.1),light:ze(Cx,.1),hcDark:ze(K.white,.1),hcLight:ze(Cx,.1)},p("editorInlayHintBackground","Background color of inline hints")),$Re=P("editorInlayHint.typeForeground",{dark:$d,light:$d,hcDark:$d,hcLight:$d},p("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),KRe=P("editorInlayHint.typeBackground",{dark:Kd,light:Kd,hcDark:Kd,hcLight:Kd},p("editorInlayHintBackgroundTypes","Background color of inline hints for types")),qRe=P("editorInlayHint.parameterForeground",{dark:$d,light:$d,hcDark:$d,hcLight:$d},p("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),GRe=P("editorInlayHint.parameterBackground",{dark:Kd,light:Kd,hcDark:Kd,hcLight:Kd},p("editorInlayHintBackgroundParameter","Background color of inline hints for parameters"));P("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},p("editorLightBulbForeground","The color used for the lightbulb actions icon."));P("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},p("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon."));const KA=new K(new Mt(155,185,85,.2)),qA=new K(new Mt(255,0,0,.2)),ZRe=P("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},p("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),XRe=P("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},p("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);P("diffEditor.insertedLineBackground",{dark:KA,light:KA,hcDark:null,hcLight:null},p("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0);P("diffEditor.removedLineBackground",{dark:qA,light:qA,hcDark:null,hcLight:null},p("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);P("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},p("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted."));P("diffEditorGutter.removedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},p("diffEditorRemovedLineGutter","Background color for the margin where lines got removed."));const YRe=P("diffEditorOverview.insertedForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),QRe=P("diffEditorOverview.removedForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content."));P("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},p("diffEditorInsertedOutline","Outline color for the text that got inserted."));P("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},p("diffEditorRemovedOutline","Outline color for text that got removed."));P("diffEditor.border",{dark:null,light:null,hcDark:Rt,hcLight:Rt},p("diffEditorBorder","Border color between the two text editors."));P("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},p("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."));P("diffEditor.unchangedRegionBackground",{dark:"#3e3e3e",light:"#e4e4e4",hcDark:null,hcLight:null},p("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor."));P("diffEditor.unchangedRegionForeground",{dark:"#a3a2a2",light:"#4d4c4c",hcDark:null,hcLight:null},p("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor."));P("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},p("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor."));const JRe=P("list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},p("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),eEe=P("list.focusForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),tEe=P("list.focusOutline",{dark:ko,light:ko,hcDark:Rn,hcLight:Rn},p("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),nEe=P("list.focusAndSelectionOutline",{dark:null,light:null,hcDark:null,hcLight:null},p("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),qd=P("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:K.fromHex("#0F4A85").transparent(.1)},p("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Rc=P("list.activeSelectionForeground",{dark:K.white,light:K.white,hcDark:null,hcLight:null},p("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),lv=P("list.activeSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),iEe=P("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:K.fromHex("#0F4A85").transparent(.1)},p("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),rEe=P("list.inactiveSelectionForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),sEe=P("list.inactiveSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),oEe=P("list.inactiveFocusBackground",{dark:null,light:null,hcDark:null,hcLight:null},p("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),aEe=P("list.inactiveFocusOutline",{dark:null,light:null,hcDark:null,hcLight:null},p("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),kZ=P("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:K.white.transparent(.1),hcLight:K.fromHex("#0F4A85").transparent(.1)},p("listHoverBackground","List/Tree background when hovering over items using the mouse.")),LZ=P("list.hoverForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),lEe=P("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},p("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),Da=P("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:ko,hcLight:ko},p("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),Hw=P("list.focusHighlightForeground",{dark:Da,light:BEe(qd,Da,"#BBE7FF"),hcDark:Da,hcLight:Da},p("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));P("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},p("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));P("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},p("listErrorForeground","Foreground color of list items containing errors."));P("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},p("listWarningForeground","Foreground color of list items containing warnings."));const cEe=P("listFilterWidget.background",{light:Pp(si,0),dark:Il(si,0),hcDark:si,hcLight:si},p("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),dEe=P("listFilterWidget.outline",{dark:K.transparent,light:K.transparent,hcDark:"#f38518",hcLight:"#007ACC"},p("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),uEe=P("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:Rt,hcLight:Rt},p("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),hEe=P("listFilterWidget.shadow",{dark:xc,light:xc,hcDark:xc,hcLight:xc},p("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees."));P("list.filterMatchBackground",{dark:Ic,light:Ic,hcDark:null,hcLight:null},p("listFilterMatchHighlight","Background color of the filtered match."));P("list.filterMatchBorder",{dark:rh,light:rh,hcDark:Rt,hcLight:Rn},p("listFilterMatchHighlightBorder","Border color of the filtered match."));const cv=P("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},p("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),fEe=P("tree.inactiveIndentGuidesStroke",{dark:ze(cv,.4),light:ze(cv,.4),hcDark:ze(cv,.4),hcLight:ze(cv,.4)},p("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),gEe=P("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},p("tableColumnsBorder","Table border color between columns.")),pEe=P("tree.tableOddRowsBackground",{dark:ze(fe,.04),light:ze(fe,.04),hcDark:null,hcLight:null},p("tableOddRowsBackgroundColor","Background color for odd table rows."));P("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},p("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized. "));const mEe=P("checkbox.background",{dark:Tc,light:Tc,hcDark:Tc,hcLight:Tc},p("checkbox.background","Background color of checkbox widget."));P("checkbox.selectBackground",{dark:si,light:si,hcDark:si,hcLight:si},p("checkbox.select.background","Background color of checkbox widget when the element it's in is selected."));const _Ee=P("checkbox.foreground",{dark:zd,light:zd,hcDark:zd,hcLight:zd},p("checkbox.foreground","Foreground color of checkbox widget.")),bEe=P("checkbox.border",{dark:Wm,light:Wm,hcDark:Wm,hcLight:Wm},p("checkbox.border","Border color of checkbox widget."));P("checkbox.selectBorder",{dark:nh,light:nh,hcDark:nh,hcLight:nh},p("checkbox.select.border","Border color of checkbox widget when the element it's in is selected."));const I6=P("quickInput.list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},"",void 0,p("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),fg=P("quickInputList.focusForeground",{dark:Rc,light:Rc,hcDark:Rc,hcLight:Rc},p("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),Vm=P("quickInputList.focusIconForeground",{dark:lv,light:lv,hcDark:lv,hcLight:lv},p("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),gg=P("quickInputList.focusBackground",{dark:ey(I6,qd),light:ey(I6,qd),hcDark:null,hcLight:null},p("quickInput.listFocusBackground","Quick picker background color for the focused item.")),vEe=P("menu.border",{dark:null,light:null,hcDark:Rt,hcLight:Rt},p("menuBorder","Border color of menus.")),yEe=P("menu.foreground",{dark:zd,light:zd,hcDark:zd,hcLight:zd},p("menuForeground","Foreground color of menu items.")),CEe=P("menu.background",{dark:Tc,light:Tc,hcDark:Tc,hcLight:Tc},p("menuBackground","Background color of menu items.")),wEe=P("menu.selectionForeground",{dark:Rc,light:Rc,hcDark:Rc,hcLight:Rc},p("menuSelectionForeground","Foreground color of the selected menu item in menus.")),SEe=P("menu.selectionBackground",{dark:qd,light:qd,hcDark:qd,hcLight:qd},p("menuSelectionBackground","Background color of the selected menu item in menus.")),xEe=P("menu.selectionBorder",{dark:null,light:null,hcDark:Rn,hcLight:Rn},p("menuSelectionBorder","Border color of the selected menu item in menus.")),TEe=P("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:Rt,hcLight:Rt},p("menuSeparatorBackground","Color of a separator menu item in menus.")),GA=P("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},p("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));P("toolbar.hoverOutline",{dark:null,light:null,hcDark:Rn,hcLight:Rn},p("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));P("toolbar.activeBackground",{dark:Il(GA,.1),light:Pp(GA,.1),hcDark:null,hcLight:null},p("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));P("editor.snippetTabstopHighlightBackground",{dark:new K(new Mt(124,124,124,.3)),light:new K(new Mt(10,50,100,.2)),hcDark:new K(new Mt(124,124,124,.3)),hcLight:new K(new Mt(10,50,100,.2))},p("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));P("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hcDark:null,hcLight:null},p("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));P("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},p("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));P("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new K(new Mt(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},p("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));const kEe=P("breadcrumb.foreground",{light:ze(fe,.8),dark:ze(fe,.8),hcDark:ze(fe,.8),hcLight:ze(fe,.8)},p("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),LEe=P("breadcrumb.background",{light:Ki,dark:Ki,hcDark:Ki,hcLight:Ki},p("breadcrumbsBackground","Background color of breadcrumb items.")),R6=P("breadcrumb.focusForeground",{light:Pp(fe,.2),dark:Il(fe,.1),hcDark:Il(fe,.1),hcLight:Il(fe,.1)},p("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),DEe=P("breadcrumb.activeSelectionForeground",{light:Pp(fe,.2),dark:Il(fe,.1),hcDark:Il(fe,.1),hcLight:Il(fe,.1)},p("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));P("breadcrumbPicker.background",{light:si,dark:si,hcDark:si,hcLight:si},p("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const DZ=.5,E6=K.fromHex("#40C8AE").transparent(DZ),N6=K.fromHex("#40A6FF").transparent(DZ),A6=K.fromHex("#606060").transparent(.4),Ia=.4,J_=1,Hm=P("merge.currentHeaderBackground",{dark:E6,light:E6,hcDark:null,hcLight:null},p("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);P("merge.currentContentBackground",{dark:ze(Hm,Ia),light:ze(Hm,Ia),hcDark:ze(Hm,Ia),hcLight:ze(Hm,Ia)},p("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const Um=P("merge.incomingHeaderBackground",{dark:N6,light:N6,hcDark:null,hcLight:null},p("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);P("merge.incomingContentBackground",{dark:ze(Um,Ia),light:ze(Um,Ia),hcDark:ze(Um,Ia),hcLight:ze(Um,Ia)},p("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const jm=P("merge.commonHeaderBackground",{dark:A6,light:A6,hcDark:null,hcLight:null},p("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);P("merge.commonContentBackground",{dark:ze(jm,Ia),light:ze(jm,Ia),hcDark:ze(jm,Ia),hcLight:ze(jm,Ia)},p("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const e1=P("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},p("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));P("editorOverviewRuler.currentContentForeground",{dark:ze(Hm,J_),light:ze(Hm,J_),hcDark:e1,hcLight:e1},p("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));P("editorOverviewRuler.incomingContentForeground",{dark:ze(Um,J_),light:ze(Um,J_),hcDark:e1,hcLight:e1},p("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));P("editorOverviewRuler.commonContentForeground",{dark:ze(jm,J_),light:ze(jm,J_),hcDark:e1,hcLight:e1},p("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));const u5=P("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:""},p("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),dv=P("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},p("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),zm=P("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},p("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),OD=P("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},p("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),P6=P("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},p("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),IEe=P("minimap.infoHighlight",{dark:Ms,light:Ms,hcDark:J0,hcLight:J0},p("minimapInfo","Minimap marker color for infos.")),REe=P("minimap.warningHighlight",{dark:Lo,light:Lo,hcDark:Q0,hcLight:Q0},p("overviewRuleWarning","Minimap marker color for warnings.")),EEe=P("minimap.errorHighlight",{dark:new K(new Mt(255,18,18,.7)),light:new K(new Mt(255,18,18,.7)),hcDark:new K(new Mt(255,50,50,1)),hcLight:"#B5200D"},p("minimapError","Minimap marker color for errors.")),NEe=P("minimap.background",{dark:null,light:null,hcDark:null,hcLight:null},p("minimapBackground","Minimap background color.")),AEe=P("minimap.foregroundOpacity",{dark:K.fromHex("#000f"),light:K.fromHex("#000f"),hcDark:K.fromHex("#000f"),hcLight:K.fromHex("#000f")},p("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));P("minimapSlider.background",{light:ze(sv,.5),dark:ze(sv,.5),hcDark:ze(sv,.5),hcLight:ze(sv,.5)},p("minimapSliderBackground","Minimap slider background color."));P("minimapSlider.hoverBackground",{light:ze(ov,.5),dark:ze(ov,.5),hcDark:ze(ov,.5),hcLight:ze(ov,.5)},p("minimapSliderHoverBackground","Minimap slider background color when hovering."));P("minimapSlider.activeBackground",{light:ze(av,.5),dark:ze(av,.5),hcDark:ze(av,.5),hcLight:ze(av,.5)},p("minimapSliderActiveBackground","Minimap slider background color when clicked on."));const PEe=P("problemsErrorIcon.foreground",{dark:kc,light:kc,hcDark:kc,hcLight:kc},p("problemsErrorIconForeground","The color used for the problems error icon.")),MEe=P("problemsWarningIcon.foreground",{dark:Lo,light:Lo,hcDark:Lo,hcLight:Lo},p("problemsWarningIconForeground","The color used for the problems warning icon.")),OEe=P("problemsInfoIcon.foreground",{dark:Ms,light:Ms,hcDark:Ms,hcLight:Ms},p("problemsInfoIconForeground","The color used for the problems info icon."));P("charts.foreground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("chartsForeground","The foreground color used in charts."));P("charts.lines",{dark:ze(fe,.5),light:ze(fe,.5),hcDark:ze(fe,.5),hcLight:ze(fe,.5)},p("chartsLines","The color used for horizontal lines in charts."));P("charts.red",{dark:kc,light:kc,hcDark:kc,hcLight:kc},p("chartsRed","The red color used in chart visualizations."));P("charts.blue",{dark:Ms,light:Ms,hcDark:Ms,hcLight:Ms},p("chartsBlue","The blue color used in chart visualizations."));P("charts.yellow",{dark:Lo,light:Lo,hcDark:Lo,hcLight:Lo},p("chartsYellow","The yellow color used in chart visualizations."));P("charts.orange",{dark:zm,light:zm,hcDark:zm,hcLight:zm},p("chartsOrange","The orange color used in chart visualizations."));P("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},p("chartsGreen","The green color used in chart visualizations."));P("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},p("chartsPurple","The purple color used in chart visualizations."));function FEe(i,e){var t,n,r,s;switch(i.op){case 0:return(t=sl(i.value,e))===null||t===void 0?void 0:t.darken(i.factor);case 1:return(n=sl(i.value,e))===null||n===void 0?void 0:n.lighten(i.factor);case 2:return(r=sl(i.value,e))===null||r===void 0?void 0:r.transparent(i.factor);case 3:{const o=sl(i.background,e);return o?(s=sl(i.value,e))===null||s===void 0?void 0:s.makeOpaque(o):sl(i.value,e)}case 4:for(const o of i.values){const a=sl(o,e);if(a)return a}return;case 6:return sl(e.defines(i.if)?i.then:i.else,e);case 5:{const o=sl(i.value,e);if(!o)return;const a=sl(i.background,e);return a?o.isDarkerThan(a)?K.getLighterColor(o,a,i.factor).transparent(i.transparency):K.getDarkerColor(o,a,i.factor).transparent(i.transparency):o.transparent(i.factor*i.transparency)}default:throw vD()}}function Pp(i,e){return{op:0,value:i,factor:e}}function Il(i,e){return{op:1,value:i,factor:e}}function ze(i,e){return{op:2,value:i,factor:e}}function ey(...i){return{op:4,values:i}}function BEe(i,e,t){return{op:6,if:i,then:e,else:t}}function M6(i,e,t,n){return{op:5,value:i,background:e,factor:t,transparency:n}}function sl(i,e){if(i!==null){if(typeof i=="string")return i[0]==="#"?K.fromHex(i):e.getColor(i);if(i instanceof K)return i;if(typeof i=="object")return FEe(i,e)}}const IZ="vscode://schemas/workbench-colors",RZ=qn.as(RD.JSONContribution);RZ.registerSchema(IZ,MD.getColorSchema());const O6=new fn(()=>RZ.notifySchemaChanged(IZ),200);MD.onDidChangeSchema(()=>{O6.isScheduled()||O6.schedule()});class FD{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new EZ(this.x-window.scrollX,this.y-window.scrollY)}}class EZ{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new FD(this.clientX+window.scrollX,this.clientY+window.scrollY)}}class WEe{constructor(e,t,n,r){this.x=e,this.y=t,this.width=n,this.height=r,this._editorPagePositionBrand=void 0}}class VEe{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function h5(i){const e=Mi(i);return new WEe(e.left,e.top,e.width,e.height)}function f5(i,e,t){const n=e.width/i.offsetWidth,r=e.height/i.offsetHeight,s=(t.x-e.x)/n,o=(t.y-e.y)/r;return new VEe(s,o)}class $h extends Qo{constructor(e,t,n){super(e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new FD(this.posx,this.posy),this.editorPos=h5(n),this.relativePos=f5(n,this.editorPos,this.pos)}}class HEe{constructor(e){this._editorViewDomNode=e}_create(e){return new $h(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return ee(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return ee(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return ee(e,Ce.MOUSE_DOWN,n=>{t(this._create(n))})}onPointerDown(e,t){return ee(e,Ce.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onMouseLeave(e,t){return ee(e,Ce.MOUSE_LEAVE,n=>{t(this._create(n))})}onMouseMove(e,t){return ee(e,"mousemove",n=>t(this._create(n)))}}class UEe{constructor(e){this._editorViewDomNode=e}_create(e){return new $h(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return ee(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return ee(e,Ce.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onPointerLeave(e,t){return ee(e,Ce.POINTER_LEAVE,n=>{t(this._create(n))})}onPointerMove(e,t){return ee(e,"pointermove",n=>t(this._create(n)))}}class jEe extends q{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new Y1),this._keydownListener=null}startMonitoring(e,t,n,r,s){this._keydownListener=bi(e.ownerDocument,"keydown",o=>{o.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,o.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,n,o=>{r(new $h(o,!0,this._editorViewDomNode))},o=>{this._keydownListener.dispose(),s(o)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}class jC{constructor(e){this._editor=e,this._instanceId=++jC._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new fn(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let n=this._rules.get(t);if(!n){const r=this._counter++;n=new zEe(t,`dyn-rule-${this._instanceId}-${r}`,DT(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,n)}return n}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}}jC._idPool=0;class zEe{constructor(e,t,n,r){this.key=e,this.className=t,this.properties=r,this._referenceCount=0,this._styleElement=ca(n),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let n=`.${e} {`;for(const r in t){const s=t[r];let o;typeof s=="object"?o=Ae(s.id):o=s;const a=$Ee(r);n+=`
	${a}: ${o};`}return n+=`
}`,n}dispose(){this._styleElement.remove()}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function $Ee(i){return i.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}class zC extends q{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,r=e.length;n<r;n++){const s=e[n];switch(s.type){case 0:this.onCompositionStart(s)&&(t=!0);break;case 1:this.onCompositionEnd(s)&&(t=!0);break;case 2:this.onConfigurationChanged(s)&&(t=!0);break;case 3:this.onCursorStateChanged(s)&&(t=!0);break;case 4:this.onDecorationsChanged(s)&&(t=!0);break;case 5:this.onFlushed(s)&&(t=!0);break;case 6:this.onFocusChanged(s)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(s)&&(t=!0);break;case 8:this.onLineMappingChanged(s)&&(t=!0);break;case 9:this.onLinesChanged(s)&&(t=!0);break;case 10:this.onLinesDeleted(s)&&(t=!0);break;case 11:this.onLinesInserted(s)&&(t=!0);break;case 12:this.onRevealRangeRequest(s)&&(t=!0);break;case 13:this.onScrollChanged(s)&&(t=!0);break;case 15:this.onTokensChanged(s)&&(t=!0);break;case 14:this.onThemeChanged(s)&&(t=!0);break;case 16:this.onTokensColorsChanged(s)&&(t=!0);break;case 17:this.onZonesChanged(s)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(s)}}t&&(this._shouldRender=!0)}}class ao extends zC{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class Zc{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const n=[];let r=0;for(;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[r++]=this.read(e)),e=e.parentElement;const s=new Uint8Array(r);for(let o=0;o<r;o++)s[o]=n[r-o-1];return s}}class KEe{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class qEe extends KEe{constructor(e,t,n){super(e,t),this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class GEe{constructor(e,t,n,r){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n,this.continuesOnNextLine=r}}class BD{static from(e){const t=new Array(e.length);for(let n=0,r=e.length;n<r;n++){const s=e[n];t[n]=new BD(s.left,s.width)}return t}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}}class xg{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class ZEe{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class F6{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class wx{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,r,s){const o=this._createRange();try{return o.setStart(e,t),o.setEnd(n,r),o.getClientRects()}catch{return null}finally{this._detachRange(o,s)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(xg.compare);const t=[];let n=0,r=e[0];for(let s=1,o=e.length;s<o;s++){const a=e[s];r.left+r.width+.9>=a.left?r.width=Math.max(r.width,a.left+a.width-r.left):(t[n++]=r,r=a)}return t[n++]=r,t}static _createHorizontalRangesFromClientRects(e,t,n){if(!e||e.length===0)return null;const r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s];r[s]=new xg(Math.max(0,(a.left-t)/n),a.width/n)}return this._mergeAdjacentRanges(r)}static readHorizontalRanges(e,t,n,r,s,o){const l=e.children.length-1;if(0>l)return null;if(t=Math.min(l,Math.max(0,t)),r=Math.min(l,Math.max(0,r)),t===r&&n===s&&n===0&&!e.children[t].firstChild){const h=e.children[t].getClientRects();return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(h,o.clientRectDeltaLeft,o.clientRectScale)}t!==r&&r>0&&s===0&&(r--,s=1073741824);let c=e.children[t].firstChild,d=e.children[r].firstChild;if((!c||!d)&&(!c&&n===0&&t>0&&(c=e.children[t-1].firstChild,n=1073741824),!d&&s===0&&r>0&&(d=e.children[r-1].firstChild,s=1073741824)),!c||!d)return null;n=Math.min(c.textContent.length,Math.max(0,n)),s=Math.min(d.textContent.length,Math.max(0,s));const u=this._readClientRects(c,n,d,s,o.endNode);return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(u,o.clientRectDeltaLeft,o.clientRectScale)}}var Jo;(function(i){i.DARK="dark",i.LIGHT="light",i.HIGH_CONTRAST_DARK="hcDark",i.HIGH_CONTRAST_LIGHT="hcLight"})(Jo||(Jo={}));function Rl(i){return i===Jo.HIGH_CONTRAST_DARK||i===Jo.HIGH_CONTRAST_LIGHT}function t1(i){return i===Jo.DARK||i===Jo.HIGH_CONTRAST_DARK}const XEe=function(){return kl?!0:!(os||aa||hu)}();let b_=!0;class B6{constructor(e,t){this.themeType=t;const n=e.options,r=n.get(50);n.get(38)==="off"?this.renderWhitespace=n.get(98):this.renderWhitespace="none",this.renderControlCharacters=n.get(93),this.spaceWidth=r.spaceWidth,this.middotWidth=r.middotWidth,this.wsmiddotWidth=r.wsmiddotWidth,this.useMonospaceOptimizations=r.isMonospace&&!n.get(33),this.canUseHalfwidthRightwardsArrow=r.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(66),this.stopRenderingLineAfter=n.get(116),this.fontLigatures=n.get(51)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class pc{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=tn(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return Rl(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,r){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const s=n.getViewLineRenderingData(e),o=this._options,a=Ys.filter(s.inlineDecorations,e,s.minColumn,s.maxColumn);let l=null;if(Rl(o.themeType)||this._options.renderWhitespace==="selection"){const h=n.selections;for(const f of h){if(f.endLineNumber<e||f.startLineNumber>e)continue;const g=f.startLineNumber===e?f.startColumn:s.minColumn,m=f.endLineNumber===e?f.endColumn:s.maxColumn;g<m&&(Rl(o.themeType)&&a.push(new Ys(g,m,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(l||(l=[]),l.push(new fZ(g-1,m-1))))}}const c=new vf(o.useMonospaceOptimizations,o.canUseHalfwidthRightwardsArrow,s.content,s.continuesWithWrappedLine,s.isBasicASCII,s.containsRTL,s.minColumn-1,s.tokens,a,s.tabSize,s.startVisibleColumn,o.spaceWidth,o.middotWidth,o.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==Co.OFF,l);if(this._renderedViewLine&&this._renderedViewLine.input.equals(c))return!1;r.appendString('<div style="top:'),r.appendString(String(t)),r.appendString("px;height:"),r.appendString(String(this._options.lineHeight)),r.appendString('px;" class="'),r.appendString(pc.CLASS_NAME),r.appendString('">');const d=HC(c,r);r.appendString("</div>");let u=null;return b_&&XEe&&s.isBasicASCII&&o.useMonospaceOptimizations&&d.containsForeignElements===0&&(u=new Uw(this._renderedViewLine?this._renderedViewLine.domNode:null,c,d.characterMapping)),u||(u=AZ(this._renderedViewLine?this._renderedViewLine.domNode:null,c,d.characterMapping,d.containsRTL,d.containsForeignElements)),this._renderedViewLine=u,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof Uw:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof Uw?this._renderedViewLine.monospaceAssumptionsAreValid():b_}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof Uw&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,r){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));const s=this._renderedViewLine.input.stopRenderingLineAfter;if(s!==-1&&t>s+1&&n>s+1)return new F6(!0,[new xg(this.getWidth(r),0)]);s!==-1&&t>s+1&&(t=s+1),s!==-1&&n>s+1&&(n=s+1);const o=this._renderedViewLine.getVisibleRangesForRange(e,t,n,r);return o&&o.length>0?new F6(!1,o):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}}pc.CLASS_NAME="view-line";class Uw{constructor(e,t,n){this._cachedWidth=-1,this.domNode=e,this.input=t;const r=Math.floor(t.lineContent.length/300);if(r>0){this._keyColumnPixelOffsetCache=new Float32Array(r);for(let s=0;s<r;s++)this._keyColumnPixelOffsetCache[s]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){const t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return b_;if(this.input.lineContent.length<300){const e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),b_=!1)}return b_}toSlowRenderedLine(){return AZ(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,r){const s=this._getColumnPixelOffset(e,t,r),o=this._getColumnPixelOffset(e,n,r);return[new xg(s,o-s)]}_getColumnPixelOffset(e,t,n){if(t<=300){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const r=Math.floor((t-1)/300)-1,s=(r+1)*300+1;let o=-1;if(this._keyColumnPixelOffsetCache&&(o=this._keyColumnPixelOffsetCache[r],o===-1&&(o=this._actualReadPixelOffset(e,s,n),this._keyColumnPixelOffsetCache[r]=o)),o===-1){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const a=this._characterMapping.getHorizontalOffset(s),l=this._characterMapping.getHorizontalOffset(t);return o+this._charWidth*(l-a)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,n){if(!this.domNode)return-1;const r=this._characterMapping.getDomPosition(t),s=wx.readHorizontalRanges(this._getReadingTarget(this.domNode),r.partIndex,r.charIndex,r.partIndex,r.charIndex,n);return!s||s.length===0?-1:s[0].left}getColumnOfNodeOffset(e,t){return g5(this._characterMapping,e,t)}}class NZ{constructor(e,t,n,r,s){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=s,this._cachedWidth=-1,this._pixelOffsetCache=null,!r||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let o=0,a=this._characterMapping.length;o<=a;o++)this._pixelOffsetCache[o]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,r){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const s=this._readPixelOffset(this.domNode,e,t,r);if(s===-1)return null;const o=this._readPixelOffset(this.domNode,e,n,r);return o===-1?null:[new xg(s,o-s)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,r)}_readVisibleRangesForRange(e,t,n,r,s){if(n===r){const o=this._readPixelOffset(e,t,n,s);return o===-1?null:[new xg(o,0)]}else return this._readRawVisibleRangesForRange(e,n,r,s)}_readPixelOffset(e,t,n,r){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(r);const s=this._getReadingTarget(e);return s.firstChild?(r.markDidDomLayout(),s.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const s=this._pixelOffsetCache[n];if(s!==-1)return s;const o=this._actualReadPixelOffset(e,t,n,r);return this._pixelOffsetCache[n]=o,o}return this._actualReadPixelOffset(e,t,n,r)}_actualReadPixelOffset(e,t,n,r){if(this._characterMapping.length===0){const l=wx.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,r);return!l||l.length===0?-1:l[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(r);const s=this._characterMapping.getDomPosition(n),o=wx.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,s.partIndex,s.charIndex,r);if(!o||o.length===0)return-1;const a=o[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(n),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,n,r){if(t===1&&n===this._characterMapping.length)return[new xg(0,this.getWidth(r))];const s=this._characterMapping.getDomPosition(t),o=this._characterMapping.getDomPosition(n);return wx.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,o.partIndex,o.charIndex,r)}getColumnOfNodeOffset(e,t){return g5(this._characterMapping,e,t)}}class YEe extends NZ{_readVisibleRangesForRange(e,t,n,r,s){const o=super._readVisibleRangesForRange(e,t,n,r,s);if(!o||o.length===0||n===r||n===1&&r===this._characterMapping.length)return o;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,r,s);if(a!==-1){const l=o[o.length-1];l.left<a&&(l.width=a-l.left)}}return o}}const AZ=function(){return Cg?QEe:JEe}();function QEe(i,e,t,n,r){return new YEe(i,e,t,n,r)}function JEe(i,e,t,n,r){return new NZ(i,e,t,n,r)}function g5(i,e,t){const n=e.textContent.length;let r=-1;for(;e;)e=e.previousSibling,r++;return i.getColumn(new gZ(r,t),n)}class Wi{static _nextVisibleColumn(e,t,n){return e===9?Wi.nextRenderTabStop(t,n):Bh(e)||F3(e)?t+2:t+1}static visibleColumnFromColumn(e,t,n){const r=Math.min(t-1,e.length),s=e.substring(0,r),o=new kT(s);let a=0;for(;!o.eol();){const l=TT(s,r,o.offset);o.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,n)}return a}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const r=e.length,s=new kT(e);let o=0,a=1;for(;!s.eol();){const l=TT(e,r,s.offset);s.nextGraphemeLength();const c=this._nextVisibleColumn(l,o,n),d=s.offset+1;if(c>=t){const u=t-o;return c-t<u?d:a}o=c,a=d}return r+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}class ty{static whitespaceVisibleColumn(e,t,n){const r=e.length;let s=0,o=-1,a=-1;for(let l=0;l<r;l++){if(l===t)return[o,a,s];switch(s%n===0&&(o=l,a=s),e.charCodeAt(l)){case 32:s+=1;break;case 9:s=Wi.nextRenderTabStop(s,n);break;default:return[-1,-1,-1]}}return t===r?[o,a,s]:[-1,-1,-1]}static atomicPosition(e,t,n,r){const s=e.length,[o,a,l]=ty.whitespaceVisibleColumn(e,t,n);if(l===-1)return-1;let c;switch(r){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%n===0)return t;c=l%n<=n/2;break}if(c){if(o===-1)return-1;let h=a;for(let f=o;f<s;++f){if(h===a+n)return o;switch(e.charCodeAt(f)){case 32:h+=1;break;case 9:h=Wi.nextRenderTabStop(h,n);break;default:return-1}}return h===a+n?o:-1}const d=Wi.nextRenderTabStop(l,n);let u=l;for(let h=t;h<s;h++){if(u===d)return h;switch(e.charCodeAt(h)){case 32:u+=1;break;case 9:u=Wi.nextRenderTabStop(u,n);break;default:return-1}}return u===d?s:-1}}class Wu{constructor(e=null){this.hitTarget=e,this.type=0}}class PZ{constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n,this.type=1}}var eg;(function(i){function e(t,n,r){const s=t.getPositionFromDOMInfo(n,r);return s?new PZ(s,n,null):new Wu(n)}i.createFromDOMInfo=e})(eg||(eg={}));class eNe{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class es{static _deduceRage(e,t=null){return!t&&e?new D(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,n){return{type:0,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,n,r,s,o){return{type:e,element:t,mouseColumn:n,position:r,range:s,detail:o}}static createViewZone(e,t,n,r,s){return{type:e,element:t,mouseColumn:n,position:r,range:this._deduceRage(r),detail:s}}static createContentText(e,t,n,r,s){return{type:6,element:e,mouseColumn:t,position:n,range:this._deduceRage(n,r),detail:s}}static createContentEmpty(e,t,n,r){return{type:7,element:e,mouseColumn:t,position:n,range:this._deduceRage(n),detail:r}}static createContentWidget(e,t,n){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createScrollbar(e,t,n){return{type:11,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createOverlayWidget(e,t,n){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createOutsideEditor(e,t,n,r){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:n,outsideDistance:r}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class uo{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowGuard(e){return e.length>=1&&e[0]===3}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}}class n1{constructor(e,t,n){this.viewModel=e.viewModel;const r=e.configuration.options;this.layoutInfo=r.get(143),this.viewDomNode=t.viewDomNode,this.lineHeight=r.get(66),this.stickyTabStops=r.get(115),this.typicalHalfwidthCharacterWidth=r.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return n1.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){const r=n.verticalOffset+n.height/2,s=e.viewModel.getLineCount();let o=null,a,l=null;return n.afterLineNumber!==s&&(l=new U(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(o=new U(n.afterLineNumber,e.viewModel.getLineMaxColumn(n.afterLineNumber))),l===null?a=o:o===null?a=l:t<r?a=o:a=l,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:o,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const r=this._context.viewModel.getLineCount(),s=this._context.viewModel.getLineMaxColumn(r);return{range:new D(r,s,r,s),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.viewModel.getLineMaxColumn(t);return{range:new D(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return n1._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class tNe{constructor(e,t,n,r){this.editorPos=t,this.pos=n,this.relativePos=r,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,wr._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class p5 extends tNe{constructor(e,t,n,r,s){super(e,t,n,r),this._ctx=e,s?(this.target=s,this.targetPath=Zc.collect(s,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?Wi.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return es.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return es.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,n,r){return es.createMargin(e,this.target,this._getMouseColumn(t),t,n,r)}fulfillViewZone(e,t,n){return es.createViewZone(e,this.target,this._getMouseColumn(t),t,n)}fulfillContentText(e,t,n){return es.createContentText(this.target,this._getMouseColumn(e),e,t,n)}fulfillContentEmpty(e,t){return es.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return es.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return es.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return es.createOverlayWidget(this.target,this._getMouseColumn(),e)}withTarget(e){return new p5(this._ctx,this.editorPos,this.pos,this.relativePos,e)}}const W6={isAfterLines:!0};function lE(i){return{isAfterLines:!1,horizontalDistanceToText:i}}class wr{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,n=Zc.collect(t,this._viewHelper.viewDomNode);return!!(uo.isChildOfContentWidgets(n)||uo.isChildOfOverflowingContentWidgets(n)||uo.isChildOfOverlayWidgets(n))}createMouseTarget(e,t,n,r,s){const o=new n1(this._context,this._viewHelper,e),a=new p5(o,t,n,r,s);try{const l=wr._createMouseTarget(o,a,!1);if(l.type===6&&o.stickyTabStops&&l.position!==null){const c=wr._snapToSoftTabBoundary(l.position,o.viewModel),d=D.fromPositions(c,c).plusRange(l.range);return a.fulfillContentText(c,d,l.detail)}return l}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t,n){if(t.target===null){if(n)return t.fulfillUnknown();const o=wr._doHitTest(e,t);return o.type===1?wr.createMouseTargetFromHitTestPosition(e,t,o.spanNode,o.position,o.injectedText):this._createMouseTarget(e,t.withTarget(o.hitTarget),!0)}const r=t;let s=null;return!uo.isChildOfOverflowGuard(t.targetPath)&&!uo.isChildOfOverflowingContentWidgets(t.targetPath)&&(s=s||t.fulfillUnknown()),s=s||wr._hitTestContentWidget(e,r),s=s||wr._hitTestOverlayWidget(e,r),s=s||wr._hitTestMinimap(e,r),s=s||wr._hitTestScrollbarSlider(e,r),s=s||wr._hitTestViewZone(e,r),s=s||wr._hitTestMargin(e,r),s=s||wr._hitTestViewCursor(e,r),s=s||wr._hitTestTextArea(e,r),s=s||wr._hitTestViewLines(e,r,n),s=s||wr._hitTestScrollbar(e,r),s||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(uo.isChildOfContentWidgets(t.targetPath)||uo.isChildOfOverflowingContentWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillContentWidget(n):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(uo.isChildOfOverlayWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillOverlayWidget(n):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const n=e.lastRenderData.lastViewCursorsRenderData;for(const r of n)if(t.target===r.domNode)return t.fulfillContentText(r.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const n=e.lastRenderData.lastViewCursorsRenderData,r=t.mouseContentHorizontalOffset,s=t.mouseVerticalOffset;for(const o of n){if(r<o.contentLeft||r>o.contentLeft+o.width)continue;const a=e.getVerticalOffsetForLineNumber(o.position.lineNumber);if(a<=s&&s<=a+o.height)return t.fulfillContentText(o.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){const r=t.isInContentArea?8:5;return t.fulfillViewZone(r,n.position,n)}return null}static _hitTestTextArea(e,t){return uo.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),r=n.range.getStartPosition();let s=Math.abs(t.relativePos.x);const o={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:s};return s-=e.layoutInfo.glyphMarginLeft,s<=e.layoutInfo.glyphMarginWidth?t.fulfillMargin(2,r,n.range,o):(s-=e.layoutInfo.glyphMarginWidth,s<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,r,n.range,o):(s-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,r,n.range,o)))}return null}static _hitTestViewLines(e,t,n){if(!uo.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new U(1,1),W6);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const s=e.viewModel.getLineCount(),o=e.viewModel.getLineMaxColumn(s);return t.fulfillContentEmpty(new U(s,o),W6)}if(n){if(uo.isStrictChildOfViewLines(t.targetPath)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(s)===0){const a=e.getLineWidth(s),l=lE(t.mouseContentHorizontalOffset-a);return t.fulfillContentEmpty(new U(s,1),l)}const o=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>=o){const a=lE(t.mouseContentHorizontalOffset-o),l=new U(s,e.viewModel.getLineMaxColumn(s));return t.fulfillContentEmpty(l,a)}}return t.fulfillUnknown()}const r=wr._doHitTest(e,t);return r.type===1?wr.createMouseTargetFromHitTestPosition(e,t,r.spanNode,r.position,r.injectedText):this._createMouseTarget(e,t.withTarget(r.hitTarget),!0)}static _hitTestMinimap(e,t){if(uo.isChildOfMinimap(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new U(n,r))}return null}static _hitTestScrollbarSlider(e,t){if(uo.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const r=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(r);return t.fulfillScrollbar(new U(r,s))}}return null}static _hitTestScrollbar(e,t){if(uo.isChildOfScrollableElement(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new U(n,r))}return null}getMouseColumn(e){const t=this._context.configuration.options,n=t.get(143),r=this._context.viewLayout.getCurrentScrollLeft()+e.x-n.contentLeft;return wr._getMouseColumn(r,t.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,r,s){const o=r.lineNumber,a=r.column,l=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>l){const b=lE(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(r,b)}const c=e.visibleRangeForPosition(o,a);if(!c)return t.fulfillUnknown(r);const d=c.left;if(Math.abs(t.mouseContentHorizontalOffset-d)<1)return t.fulfillContentText(r,null,{mightBeForeignElement:!!s,injectedText:s});const u=[];if(u.push({offset:c.left,column:a}),a>1){const b=e.visibleRangeForPosition(o,a-1);b&&u.push({offset:b.left,column:a-1})}const h=e.viewModel.getLineMaxColumn(o);if(a<h){const b=e.visibleRangeForPosition(o,a+1);b&&u.push({offset:b.left,column:a+1})}u.sort((b,v)=>b.offset-v.offset);const f=t.pos.toClientCoordinates(),g=n.getBoundingClientRect(),m=g.left<=f.clientX&&f.clientX<=g.right;let y=null;for(let b=1;b<u.length;b++){const v=u[b-1],C=u[b];if(v.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=C.offset){y=new D(o,v.column,o,C.column);const w=Math.abs(v.offset-t.mouseContentHorizontalOffset),S=Math.abs(C.offset-t.mouseContentHorizontalOffset);r=w<S?new U(o,v.column):new U(o,C.column);break}}return t.fulfillContentText(r,y,{mightBeForeignElement:!m||!!s,injectedText:s})}static _doHitTestWithCaretRangeFromPoint(e,t){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.getVerticalOffsetForLineNumber(n),s=r+e.lineHeight;if(!(n===e.viewModel.getLineCount()&&t.mouseVerticalOffset>s)){const a=Math.floor((r+s)/2);let l=t.pos.y+(a-t.mouseVerticalOffset);l<=t.editorPos.y&&(l=t.editorPos.y+1),l>=t.editorPos.y+t.editorPos.height&&(l=t.editorPos.y+t.editorPos.height-1);const c=new FD(t.pos.x,l),d=this._actualDoHitTestWithCaretRangeFromPoint(e,c.toClientCoordinates());if(d.type===1)return d}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const n=Gg(e.viewDomNode);let r;if(n?typeof n.caretRangeFromPoint>"u"?r=nNe(n,t.clientX,t.clientY):r=n.caretRangeFromPoint(t.clientX,t.clientY):r=e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY),!r||!r.startContainer)return new Wu;const s=r.startContainer;if(s.nodeType===s.TEXT_NODE){const o=s.parentNode,a=o?o.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===pc.CLASS_NAME?eg.createFromDOMInfo(e,o,r.startOffset):new Wu(s.parentNode)}else if(s.nodeType===s.ELEMENT_NODE){const o=s.parentNode,a=o?o.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===pc.CLASS_NAME?eg.createFromDOMInfo(e,s,s.textContent.length):new Wu(s)}return new Wu}static _doHitTestWithCaretPositionFromPoint(e,t){const n=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const r=n.offsetNode.parentNode,s=r?r.parentNode:null,o=s?s.parentNode:null;return(o&&o.nodeType===o.ELEMENT_NODE?o.className:null)===pc.CLASS_NAME?eg.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new Wu(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const r=n.offsetNode.parentNode,s=r&&r.nodeType===r.ELEMENT_NODE?r.className:null,o=r?r.parentNode:null,a=o&&o.nodeType===o.ELEMENT_NODE?o.className:null;if(s===pc.CLASS_NAME){const l=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(l)return eg.createFromDOMInfo(e,l,0)}else if(a===pc.CLASS_NAME)return eg.createFromDOMInfo(e,n.offsetNode,0)}return new Wu(n.offsetNode)}static _snapToSoftTabBoundary(e,t){const n=t.getLineContent(e.lineNumber),{tabSize:r}=t.model.getOptions(),s=ty.atomicPosition(n,e.column-1,r,2);return s!==-1?new U(e.lineNumber,s+1):e}static _doHitTest(e,t){let n=new Wu;if(typeof e.viewDomNode.ownerDocument.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),n.type===1){const r=e.viewModel.getInjectedTextAt(n.position),s=e.viewModel.normalizePosition(n.position,2);(r||!s.equals(n.position))&&(n=new PZ(s,n.spanNode,r))}return n}}function nNe(i,e,t){const n=document.createRange();let r=i.elementFromPoint(e,t);if(r!==null){for(;r&&r.firstChild&&r.firstChild.nodeType!==r.firstChild.TEXT_NODE&&r.lastChild&&r.lastChild.firstChild;)r=r.lastChild;const s=r.getBoundingClientRect(),o=window.getComputedStyle(r,null).getPropertyValue("font-style"),a=window.getComputedStyle(r,null).getPropertyValue("font-variant"),l=window.getComputedStyle(r,null).getPropertyValue("font-weight"),c=window.getComputedStyle(r,null).getPropertyValue("font-size"),d=window.getComputedStyle(r,null).getPropertyValue("line-height"),u=window.getComputedStyle(r,null).getPropertyValue("font-family"),h=`${o} ${a} ${l} ${c}/${d} ${u}`,f=r.innerText;let g=s.left,m=0,y;if(e>s.left+s.width)m=f.length;else{const b=pg.getInstance();for(let v=0;v<f.length+1;v++){if(y=b.getCharWidth(f.charAt(v),h)/2,g+=y,e<g){m=v;break}g+=y}}n.setStart(r.firstChild,m),n.setEnd(r.firstChild,m)}return n}class pg{static getInstance(){return pg._INSTANCE||(pg._INSTANCE=new pg),pg._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const n=e+t;if(this._cache[n])return this._cache[n];const r=this._canvas.getContext("2d");r.font=t;const o=r.measureText(e).width;return this._cache[n]=o,o}}pg._INSTANCE=null;let $a=class extends q{onclick(e,t){this._register(ee(e,Ce.CLICK,n=>t(new Qo(n))))}onmousedown(e,t){this._register(ee(e,Ce.MOUSE_DOWN,n=>t(new Qo(n))))}onmouseover(e,t){this._register(ee(e,Ce.MOUSE_OVER,n=>t(new Qo(n))))}onmouseleave(e,t){this._register(ee(e,Ce.MOUSE_LEAVE,n=>t(new Qo(n))))}onkeydown(e,t){this._register(ee(e,Ce.KEY_DOWN,n=>t(new kn(n))))}onkeyup(e,t){this._register(ee(e,Ce.KEY_UP,n=>t(new kn(n))))}oninput(e,t){this._register(ee(e,Ce.INPUT,t))}onblur(e,t){this._register(ee(e,Ce.BLUR,t))}onfocus(e,t){this._register(ee(e,Ce.FOCUS,t))}ignoreGesture(e){return vn.ignoreTarget(e)}};const i1=11;class iNe extends $a{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...Qe.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=i1+"px",this.domNode.style.height=i1+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new Y1),this._register(bi(this.bgDomNode,Ce.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(bi(this.domNode,Ce.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new BC),this._pointerdownScheduleRepeatTimer=this._register(new za)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24)};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class rNe extends q{constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new za)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)===null||e===void 0||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)===null||t===void 0||t.setClassName(this._invisibleClassName+(e?" fade":"")))}}const sNe=140;class MZ extends $a{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new rNe(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new Y1),this._shouldRender=!0,this.domNode=tn(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(ee(this.domNode.domNode,Ce.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new iNe(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,r){this.slider=tn(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof r=="number"&&this.slider.setHeight(r),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(ee(this.slider.domNode,Ce.POINTER_DOWN,s=>{s.button===0&&(s.preventDefault(),this._sliderPointerDown(s))})),this.onclick(this.slider.domNode,s=>{s.leftButton&&s.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),r=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),s=this._sliderPointerPosition(e);n<=s&&s<=r?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,n=e.offsetY;else{const s=Mi(this.domNode.domNode);t=e.pageX-s.left,n=e.pageY-s.top}const r=this._pointerDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(r):this._scrollbarState.getDesiredScrollPositionFromOffset(r)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),r=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,s=>{const o=this._sliderOrthogonalPointerPosition(s),a=Math.abs(o-n);if(Ar&&a>sNe){this._setDesiredScrollPositionNow(r.getScrollPosition());return}const c=this._sliderPointerPosition(s)-t;this._setDesiredScrollPositionNow(r.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const oNe=20;class r1{constructor(e,t,n,r,s,o){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=r,this._scrollSize=s,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new r1(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,r,s){const o=Math.max(0,n-e),a=Math.max(0,o-2*t),l=r>0&&r>n;if(!l)return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(oNe,Math.floor(n*a/r))),d=(a-c)/(r-n),u=s*d;return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:d,computedSliderPosition:Math.round(u)}}_refreshComputedValues(){const e=r1._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class aNe extends MZ{constructor(e,t,n){const r=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new r1(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,r.width,r.scrollWidth,s.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const o=(t.arrowSize-i1)/2,a=(t.horizontalScrollbarSize-i1)/2;this._createArrow({className:"scra",icon:me.scrollbarButtonLeft,top:a,left:o,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new qg(null,1,0))}),this._createArrow({className:"scra",icon:me.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:o,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new qg(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class lNe extends MZ{constructor(e,t,n){const r=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new r1(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,r.height,r.scrollHeight,s.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const o=(t.arrowSize-i1)/2,a=(t.verticalScrollbarSize-i1)/2;this._createArrow({className:"scra",icon:me.scrollbarButtonUp,top:o,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new qg(null,0,1))}),this._createArrow({className:"scra",icon:me.scrollbarButtonDown,top:void 0,left:a,bottom:o,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new qg(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class UT{constructor(e,t,n,r,s,o,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,n=n|0,r=r|0,s=s|0,o=o|0,a=a|0),this.rawScrollLeft=r,this.rawScrollTop=a,t<0&&(t=0),r+t>n&&(r=n-t),r<0&&(r=0),s<0&&(s=0),a+s>o&&(a=o-s),a<0&&(a=0),this.width=t,this.scrollWidth=n,this.scrollLeft=r,this.height=s,this.scrollHeight=o,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new UT(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new UT(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,r=this.scrollWidth!==e.scrollWidth,s=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:r,scrollLeftChanged:s,heightChanged:o,scrollHeightChanged:a,scrollTopChanged:l}}}class $C extends q{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new H),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new UT(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var n;const r=this._state.withScrollDimensions(e,t);this._setState(r,!!this._smoothScrolling),(n=this._smoothScrolling)===null||n===void 0||n.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let r;t?r=new ny(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):r=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=r}else{const n=this._state.withScrollPosition(e);this._smoothScrolling=ny.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}class V6{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}}function cE(i,e){const t=e-i;return function(n){return i+t*uNe(n)}}function cNe(i,e,t){return function(n){return n<t?i(n/t):e((n-t)/(1-t))}}class ny{constructor(e,t,n,r){this.from=e,this.to=t,this.duration=r,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let s,o;return e<t?(s=e+.75*n,o=t-.75*n):(s=e-.75*n,o=t+.75*n),cNe(cE(e,s),cE(o,t),.33)}return cE(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const n=this.scrollLeft(t),r=this.scrollTop(t);return new V6(n,r,!1)}return new V6(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return ny.start(e,t,n)}static start(e,t,n){n=n+10;const r=Date.now()-10;return new ny(e,t,r,n)}}function dNe(i){return Math.pow(i,3)}function uNe(i){return 1-dNe(1-i)}const hNe=500,H6=50;class fNe{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}}class jT{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,r=this._rear;do{const s=r===this._front?e:Math.pow(2,-n);if(e-=s,t+=this._memory[r].score*s,r===this._front)break;r=(this._capacity+r-1)%this._capacity,n++}while(!0);return t<=.5}acceptStandardWheelEvent(e){const t=window.devicePixelRatio/OTe();Ar||os?this.accept(Date.now(),e.deltaX/t,e.deltaY/t):this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,n){const r=new fNe(e,t,n);r.score=this._computeScore(r),this._front===-1&&this._rear===-1?(this._memory[0]=r,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=r)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}jT.INSTANCE=new jT;class m5 extends $a{get options(){return this._options}constructor(e,t,n){super(),this._onScroll=this._register(new H),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new H),e.style.overflow="hidden",this._options=gNe(t),this._scrollable=n,this._register(this._scrollable.onScroll(s=>{this._onWillScroll.fire(s),this._onDidScroll(s),this._onScroll.fire(s)}));const r={onMouseWheel:s=>this._onMouseWheel(s),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new lNe(this._scrollable,this._options,r)),this._horizontalScrollbar=this._register(new aNe(this._scrollable,this._options,r)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=tn(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=tn(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=tn(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,s=>this._onMouseOver(s)),this.onmouseleave(this._listenOnDomNode,s=>this._onMouseLeave(s)),this._hideTimeout=this._register(new za),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=an(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Ot&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new qg(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=an(this._mouseWheelToDispose),e)){const n=r=>{this._onMouseWheel(new qg(r))};this._mouseWheelToDispose.push(ee(this._listenOnDomNode,Ce.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){var t;if(!((t=e.browserEvent)===null||t===void 0)&&t.defaultPrevented)return;const n=jT.INSTANCE;n.acceptStandardWheelEvent(e);let r=!1;if(e.deltaY||e.deltaX){let o=e.deltaY*this._options.mouseWheelScrollSensitivity,a=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&a+o===0?a=o=0:Math.abs(o)>=Math.abs(a)?a=0:o=0),this._options.flipAxes&&([o,a]=[a,o]);const l=!Ot&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||l)&&!a&&(a=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(a=a*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);const c=this._scrollable.getFutureScrollPosition();let d={};if(o){const u=H6*o,h=c.scrollTop-(u<0?Math.floor(u):Math.ceil(u));this._verticalScrollbar.writeScrollPosition(d,h)}if(a){const u=H6*a,h=c.scrollLeft-(u<0?Math.floor(u):Math.ceil(u));this._horizontalScrollbar.writeScrollPosition(d,h)}d=this._scrollable.validateScrollPosition(d),(c.scrollLeft!==d.scrollLeft||c.scrollTop!==d.scrollTop)&&(this._options.mouseWheelSmoothScroll&&n.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),r=!0)}let s=r;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,r=n?" left":"",s=t?" top":"",o=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${r}`),this._topShadowDomNode.setClassName(`shadow${s}`),this._topLeftShadowDomNode.setClassName(`shadow${o}${s}${r}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),hNe)}}class OZ extends m5{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new $C({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:r=>la(r)});super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class _5 extends m5{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class KC extends m5{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new $C({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:r=>la(r)});super(e,t,n),this._register(n),this._element=e,this._register(this.onScroll(r=>{r.scrollTopChanged&&(this._element.scrollTop=r.scrollTop),r.scrollLeftChanged&&(this._element.scrollLeft=r.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function gNe(i){const e={lazyRender:typeof i.lazyRender<"u"?i.lazyRender:!1,className:typeof i.className<"u"?i.className:"",useShadows:typeof i.useShadows<"u"?i.useShadows:!0,handleMouseWheel:typeof i.handleMouseWheel<"u"?i.handleMouseWheel:!0,flipAxes:typeof i.flipAxes<"u"?i.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof i.consumeMouseWheelIfScrollbarIsNeeded<"u"?i.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof i.alwaysConsumeMouseWheel<"u"?i.alwaysConsumeMouseWheel:!1,scrollYToX:typeof i.scrollYToX<"u"?i.scrollYToX:!1,mouseWheelScrollSensitivity:typeof i.mouseWheelScrollSensitivity<"u"?i.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof i.fastScrollSensitivity<"u"?i.fastScrollSensitivity:5,scrollPredominantAxis:typeof i.scrollPredominantAxis<"u"?i.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof i.mouseWheelSmoothScroll<"u"?i.mouseWheelSmoothScroll:!0,arrowSize:typeof i.arrowSize<"u"?i.arrowSize:11,listenOnDomNode:typeof i.listenOnDomNode<"u"?i.listenOnDomNode:null,horizontal:typeof i.horizontal<"u"?i.horizontal:1,horizontalScrollbarSize:typeof i.horizontalScrollbarSize<"u"?i.horizontalScrollbarSize:10,horizontalSliderSize:typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:0,horizontalHasArrows:typeof i.horizontalHasArrows<"u"?i.horizontalHasArrows:!1,vertical:typeof i.vertical<"u"?i.vertical:1,verticalScrollbarSize:typeof i.verticalScrollbarSize<"u"?i.verticalScrollbarSize:10,verticalHasArrows:typeof i.verticalHasArrows<"u"?i.verticalHasArrows:!1,verticalSliderSize:typeof i.verticalSliderSize<"u"?i.verticalSliderSize:0,scrollByPage:typeof i.scrollByPage<"u"?i.scrollByPage:!1};return e.horizontalSliderSize=typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof i.verticalSliderSize<"u"?i.verticalSliderSize:e.verticalScrollbarSize,Ot&&(e.className+=" mac"),e}class b5 extends zC{constructor(e,t,n){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new wr(this._context,n),this._mouseDownOperation=this._register(new pNe(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(o,a)=>this._createMouseTarget(o,a),o=>this._getMouseColumn(o))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(143).height;const r=new HEe(this.viewHelper.viewDomNode);this._register(r.onContextMenu(this.viewHelper.viewDomNode,o=>this._onContextMenu(o,!0))),this._register(r.onMouseMove(this.viewHelper.viewDomNode,o=>{this._onMouseMove(o),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=ee(this.viewHelper.viewDomNode.ownerDocument,"mousemove",a=>{this.viewHelper.viewDomNode.contains(a.target)||this._onMouseLeave(new $h(a,!1,this.viewHelper.viewDomNode))}))})),this._register(r.onMouseUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(r.onMouseLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o)));let s=0;this._register(r.onPointerDown(this.viewHelper.viewDomNode,(o,a)=>{s=a})),this._register(ee(this.viewHelper.viewDomNode,Ce.POINTER_UP,o=>{this._mouseDownOperation.onPointerUp()})),this._register(r.onMouseDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o,s))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=jT.INSTANCE;let t=0,n=Go.getZoomLevel(),r=!1,s=0;const o=l=>{if(this.viewController.emitMouseWheel(l),!this._context.configuration.options.get(75))return;const c=new qg(l);if(e.acceptStandardWheelEvent(c),e.isPhysicalMouseWheel()){if(a(l)){const d=Go.getZoomLevel(),u=c.deltaY>0?1:-1;Go.setZoomLevel(d+u),c.preventDefault(),c.stopPropagation()}}else Date.now()-t>50&&(n=Go.getZoomLevel(),r=a(l),s=0),t=Date.now(),s+=c.deltaY,r&&(Go.setZoomLevel(n+s/5),c.preventDefault(),c.stopPropagation())};this._register(ee(this.viewHelper.viewDomNode,Ce.MOUSE_WHEEL,o,{capture:!0,passive:!1}));function a(l){return Ot?(l.metaKey||l.ctrlKey)&&!l.shiftKey&&!l.altKey:l.ctrlKey&&!l.metaKey&&!l.shiftKey&&!l.altKey}}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(143)){const t=this._context.configuration.options.get(143).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const r=new EZ(e,t).toPageCoordinates(),s=h5(this.viewHelper.viewDomNode);if(r.y<s.y||r.y>s.y+s.height||r.x<s.x||r.x>s.x+s.width)return null;const o=f5(this.viewHelper.viewDomNode,s,r);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),s,r,o,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){const r=Gg(this.viewHelper.viewDomNode);r&&(n=r.elementsFromPoint(e.posx,e.posy).find(s=>this.viewHelper.viewDomNode.contains(s)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const n=this._createMouseTarget(e,!0),r=n.type===6||n.type===7,s=n.type===2||n.type===3||n.type===4,o=n.type===3,a=this._context.configuration.options.get(108),l=n.type===8||n.type===5,c=n.type===9;let d=e.leftButton||e.middleButton;Ot&&e.leftButton&&e.ctrlKey&&(d=!1);const u=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(d&&(r||o&&a))u(),this._mouseDownOperation.start(n.type,e,t);else if(s)e.preventDefault();else if(l){const h=n.detail;d&&this.viewHelper.shouldSuppressMouseDownOnViewZone(h.viewZoneId)&&(u(),this._mouseDownOperation.start(n.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(n.detail)&&(u(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:n})}}class pNe extends q{constructor(e,t,n,r,s,o){super(),this._context=e,this._viewController=t,this._viewHelper=n,this._mouseTargetFactory=r,this._createMouseTarget=s,this._getMouseColumn=o,this._mouseMoveMonitor=this._register(new jEe(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new mNe(this._context,this._viewHelper,this._mouseTargetFactory,(a,l,c)=>this._dispatchMouse(a,l,c))),this._mouseState=new WD,this._currentSelection=new Be(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):t.type===13&&(t.outsidePosition==="above"||t.outsidePosition==="below")?this._topBottomDragScrolling.start(t,e):(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)))}start(e,t,n){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const r=this._findMousePosition(t,!0);if(!r||!r.position)return;this._mouseState.trySetCount(t.detail,r.position),t.detail=this._mouseState.count;const s=this._context.configuration.options;if(!s.get(90)&&s.get(35)&&!s.get(22)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&r.type===6&&r.position&&this._currentSelection.containsPosition(r.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,o=>this._onMouseDownThenMove(o),o=>{const a=this._findMousePosition(this._lastMouseEvent,!1);o&&o instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(r,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,o=>this._onMouseDownThenMove(o),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,n=this._context.viewModel,r=this._context.viewLayout,s=this._getMouseColumn(e);if(e.posy<t.y){const a=t.y-e.posy,l=Math.max(r.getCurrentScrollTop()-a,0),c=n1.getZoneAtCoord(this._context,l);if(c){const u=this._helpPositionJumpOverViewZone(c);if(u)return es.createOutsideEditor(s,u,"above",a)}const d=r.getLineNumberAtVerticalOffset(l);return es.createOutsideEditor(s,new U(d,1),"above",a)}if(e.posy>t.y+t.height){const a=e.posy-t.y-t.height,l=r.getCurrentScrollTop()+e.relativePos.y,c=n1.getZoneAtCoord(this._context,l);if(c){const u=this._helpPositionJumpOverViewZone(c);if(u)return es.createOutsideEditor(s,u,"below",a)}const d=r.getLineNumberAtVerticalOffset(l);return es.createOutsideEditor(s,new U(d,n.getLineMaxColumn(d)),"below",a)}const o=r.getLineNumberAtVerticalOffset(r.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){const a=t.x-e.posx;return es.createOutsideEditor(s,new U(o,1),"left",a)}if(e.posx>t.x+t.width){const a=e.posx-t.x-t.width;return es.createOutsideEditor(s,new U(o,n.getLineMaxColumn(o)),"right",a)}return null}_findMousePosition(e,t){const n=this._getPositionOutsideEditor(e);if(n)return n;const r=this._createMouseTarget(e,t);if(!r.position)return null;if(r.type===8||r.type===5){const o=this._helpPositionJumpOverViewZone(r.detail);if(o)return es.createViewZone(r.type,r.element,r.mouseColumn,o,r.detail)}return r}_helpPositionJumpOverViewZone(e){const t=new U(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,r=e.positionAfter;return n&&r?n.isBefore(t)?n:r:null}_dispatchMouse(e,t,n){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:n,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}class mNe extends q{constructor(e,t,n,r){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=n,this._dispatchMouse=r,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new _Ne(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class _Ne extends q{constructor(e,t,n,r,s,o){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=n,this._dispatchMouse=r,this._position=s,this._mouseEvent=o,this._lastTime=Date.now(),this._animationFrameDisposable=la(()=>this._execute())}dispose(){this._animationFrameDisposable.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){const e=this._context.configuration.options.get(66),t=this._context.configuration.options.get(143).height/e,n=this._position.outsideDistance/e;return n<=1.5?Math.max(30,t*(1+n)):n<=3?Math.max(60,t*(2+n)):Math.max(200,t*(7+n))}_execute(){const e=this._context.configuration.options.get(66),t=this._getScrollSpeed(),n=this._tick(),r=t*(n/1e3)*e,s=this._position.outsidePosition==="above"?-r:r;this._context.viewModel.viewLayout.deltaScrollNow(0,s),this._viewHelper.renderNow();const o=this._context.viewLayout.getLinesViewportData(),a=this._position.outsidePosition==="above"?o.startLineNumber:o.endLineNumber;let l;{const c=h5(this._viewHelper.viewDomNode),d=this._context.configuration.options.get(143).horizontalScrollbarHeight,u=new FD(this._mouseEvent.pos.x,c.y+c.height-d-.1),h=f5(this._viewHelper.viewDomNode,c,u);l=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),c,u,h,null)}(!l.position||l.position.lineNumber!==a)&&(this._position.outsidePosition==="above"?l=es.createOutsideEditor(this._position.mouseColumn,new U(a,1),"above",this._position.outsideDistance):l=es.createOutsideEditor(this._position.mouseColumn,new U(a,this._context.viewModel.getLineMaxColumn(a)),"below",this._position.outsideDistance)),this._dispatchMouse(l,!0,2),this._animationFrameDisposable=la(()=>this._execute())}}class WD{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const n=new Date().getTime();n-this._lastSetMouseDownCountTime>WD.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}WD.CLEAR_MOUSE_DOWN_COUNT_TIME=400;class Dt{get event(){return this.emitter.event}constructor(e,t,n){const r=s=>this.emitter.fire(s);this.emitter=new H({onWillAddFirstListener:()=>e.addEventListener(t,r,n),onDidRemoveLastListener:()=>e.removeEventListener(t,r,n)})}dispose(){this.emitter.dispose()}}var sh;(function(i){const e={total:0,min:Number.MAX_VALUE,max:0},t=Object.assign({},e),n=Object.assign({},e),r=Object.assign({},e);let s=0;const o={keydown:0,input:0,render:0};function a(){b(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),o.keydown=1,queueMicrotask(l)}i.onKeyDown=a;function l(){o.keydown===1&&(performance.mark("keydown/end"),o.keydown=2)}function c(){performance.mark("input/start"),o.input=1,y()}i.onBeforeInput=c;function d(){o.input===0&&c(),queueMicrotask(u)}i.onInput=d;function u(){o.input===1&&(performance.mark("input/end"),o.input=2)}function h(){b()}i.onKeyUp=h;function f(){b()}i.onSelectionChange=f;function g(){o.keydown===2&&o.input===2&&o.render===0&&(performance.mark("render/start"),o.render=1,queueMicrotask(m),y())}i.onRenderStart=g;function m(){o.render===1&&(performance.mark("render/end"),o.render=2)}function y(){setTimeout(b)}function b(){o.keydown===2&&o.input===2&&o.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),v("keydown",e),v("input",t),v("render",n),v("inputlatency",r),s++,C())}function v(T,I){const R=performance.getEntriesByName(T)[0].duration;I.total+=R,I.min=Math.min(I.min,R),I.max=Math.max(I.max,R)}function C(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),o.keydown=0,o.input=0,o.render=0}function w(){if(s===0)return;const T={keydown:S(e),input:S(t),render:S(n),total:S(r),sampleCount:s};return L(e),L(t),L(n),L(r),s=0,T}i.getAndClearMeasurements=w;function S(T){return{average:T.total/s,max:T.max,min:T.min}}function L(T){T.total=0,T.min=Number.MAX_VALUE,T.max=0}})(sh||(sh={}));class cr{constructor(e,t,n,r,s){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selection=r,this.newlineCountBeforeSelection=s}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const n=e.getValue(),r=e.getSelectionStart(),s=e.getSelectionEnd();let o;if(t){const a=n.substring(0,r),l=t.value.substring(0,t.selectionStart);a===l&&(o=t.newlineCountBeforeSelection)}return new cr(n,r,s,null,o)}collapseSelection(){return this.selectionStart===this.value.length?this:new cr(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){var t,n,r,s,o,a,l,c;if(e<=this.selectionStart){const h=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition((n=(t=this.selection)===null||t===void 0?void 0:t.getStartPosition())!==null&&n!==void 0?n:null,h,-1)}if(e>=this.selectionEnd){const h=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition((s=(r=this.selection)===null||r===void 0?void 0:r.getEndPosition())!==null&&s!==void 0?s:null,h,1)}const d=this.value.substring(this.selectionStart,e);if(d.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition((a=(o=this.selection)===null||o===void 0?void 0:o.getStartPosition())!==null&&a!==void 0?a:null,d,1);const u=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition((c=(l=this.selection)===null||l===void 0?void 0:l.getEndPosition())!==null&&c!==void 0?c:null,u,-1)}_finishDeduceEditorPosition(e,t,n){let r=0,s=-1;for(;(s=t.indexOf(`
`,s+1))!==-1;)r++;return[e,n*t.length,r]}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const r=Math.min(zg(e.value,t.value),e.selectionStart,t.selectionStart),s=Math.min(xT(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(r,e.value.length-s);const o=t.value.substring(r,t.value.length-s),a=e.selectionStart-r,l=e.selectionEnd-r,c=t.selectionStart-r,d=t.selectionEnd-r;if(c===d){const h=e.selectionStart-r;return{text:o,replacePrevCharCnt:h,replaceNextCharCnt:0,positionDelta:0}}const u=l-a;return{text:o,replacePrevCharCnt:u,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const n=Math.min(zg(e.value,t.value),e.selectionEnd),r=Math.min(xT(e.value,t.value),e.value.length-e.selectionEnd),s=e.value.substring(n,e.value.length-r),o=t.value.substring(n,t.value.length-r);e.selectionStart-n;const a=e.selectionEnd-n;t.selectionStart-n;const l=t.selectionEnd-n;return{text:o,replacePrevCharCnt:a,replaceNextCharCnt:s.length-a,positionDelta:l-o.length}}}cr.EMPTY=new cr("",0,0,null,void 0);class $m{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const n=e*t,r=n+1,s=n+t;return new D(r,1,s+1,1)}static fromEditorSelection(e,t,n,r){const o=$m._getPageOfLine(t.startLineNumber,n),a=$m._getRangeForPage(o,n),l=$m._getPageOfLine(t.endLineNumber,n),c=$m._getRangeForPage(l,n);let d=a.intersectRanges(new D(1,1,t.startLineNumber,t.startColumn));if(r&&e.getValueLengthInRange(d,1)>500){const b=e.modifyPosition(d.getEndPosition(),-500);d=D.fromPositions(b,d.getEndPosition())}const u=e.getValueInRange(d,1),h=e.getLineCount(),f=e.getLineMaxColumn(h);let g=c.intersectRanges(new D(t.endLineNumber,t.endColumn,h,f));if(r&&e.getValueLengthInRange(g,1)>500){const b=e.modifyPosition(g.getStartPosition(),500);g=D.fromPositions(g.getStartPosition(),b)}const m=e.getValueInRange(g,1);let y;if(o===l||o+1===l)y=e.getValueInRange(t,1);else{const b=a.intersectRanges(t),v=c.intersectRanges(t);y=e.getValueInRange(b,1)+String.fromCharCode(8230)+e.getValueInRange(v,1)}return r&&y.length>2*500&&(y=y.substring(0,500)+String.fromCharCode(8230)+y.substring(y.length-500,y.length)),new cr(u+y+m,u.length,u.length+y.length,t,d.endLineNumber-d.startLineNumber)}}var zT;(function(i){i.Tap="-monaco-textarea-synthetic-tap"})(zT||(zT={}));const ZA={forceCopyWithSyntaxHighlighting:!1};class iy{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}iy.INSTANCE=new iy;class bNe{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}class vNe extends q{get textAreaState(){return this._textAreaState}constructor(e,t,n,r){super(),this._host=e,this._textArea=t,this._OS=n,this._browser=r,this._onFocus=this._register(new H),this.onFocus=this._onFocus.event,this._onBlur=this._register(new H),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new H),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new H),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new H),this.onCut=this._onCut.event,this._onPaste=this._register(new H),this.onPaste=this._onPaste.event,this._onType=this._register(new H),this.onType=this._onType.event,this._onCompositionStart=this._register(new H),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new H),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new H),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new H),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new fn(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new fn(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=cr.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null;let s=null;this._register(this._textArea.onKeyDown(o=>{const a=new kn(o);(a.keyCode===114||this._currentComposition&&a.keyCode===1)&&a.stopPropagation(),a.equals(9)&&a.preventDefault(),s=a,this._onKeyDown.fire(a)})),this._register(this._textArea.onKeyUp(o=>{const a=new kn(o);this._onKeyUp.fire(a)})),this._register(this._textArea.onCompositionStart(o=>{const a=new bNe;if(this._currentComposition){this._currentComposition=a;return}if(this._currentComposition=a,this._OS===2&&s&&s.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===o.data&&(s.code==="ArrowRight"||s.code==="ArrowLeft")){a.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:o.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:o.data});return}this._onCompositionStart.fire({data:o.data})})),this._register(this._textArea.onCompositionUpdate(o=>{const a=this._currentComposition;if(!a)return;if(this._browser.isAndroid){const c=cr.readFromTextArea(this._textArea,this._textAreaState),d=cr.deduceAndroidCompositionInput(this._textAreaState,c);this._textAreaState=c,this._onType.fire(d),this._onCompositionUpdate.fire(o);return}const l=a.handleCompositionUpdate(o.data);this._textAreaState=cr.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(l),this._onCompositionUpdate.fire(o)})),this._register(this._textArea.onCompositionEnd(o=>{const a=this._currentComposition;if(!a)return;if(this._currentComposition=null,this._browser.isAndroid){const c=cr.readFromTextArea(this._textArea,this._textAreaState),d=cr.deduceAndroidCompositionInput(this._textAreaState,c);this._textAreaState=c,this._onType.fire(d),this._onCompositionEnd.fire();return}const l=a.handleCompositionUpdate(o.data);this._textAreaState=cr.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(l),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(o=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const a=cr.readFromTextArea(this._textArea,this._textAreaState),l=cr.deduceInput(this._textAreaState,a,this._OS===2);l.replacePrevCharCnt===0&&l.text.length===1&&(zi(l.text.charCodeAt(0))||l.text.charCodeAt(0)===127)||(this._textAreaState=a,(l.text!==""||l.replacePrevCharCnt!==0||l.replaceNextCharCnt!==0||l.positionDelta!==0)&&this._onType.fire(l))})),this._register(this._textArea.onCut(o=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(o),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(o=>{this._ensureClipboardGetsEditorSelection(o)})),this._register(this._textArea.onPaste(o=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),o.preventDefault(),!o.clipboardData)return;let[a,l]=XA.getTextData(o.clipboardData);a&&(l=l||iy.INSTANCE.get(a),this._onPaste.fire({text:a,metadata:l}))})),this._register(this._textArea.onFocus(()=>{const o=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!o&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return ee(this._textArea.ownerDocument,"selectionchange",t=>{if(sh.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const n=Date.now(),r=n-e;if(e=n,r<5)return;const s=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),s<100||!this._textAreaState.selection)return;const o=this._textArea.getValue();if(this._textAreaState.value!==o)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),d=this._host.deduceModelPosition(c[0],c[1],c[2]),u=this._textAreaState.deduceEditorPosition(l),h=this._host.deduceModelPosition(u[0],u[1],u[2]),f=new Be(d.lineNumber,d.column,h.lineNumber,h.column);this._onSelectionChangeRequest.fire(f)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._currentComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent())}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};iy.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,n),e.preventDefault(),e.clipboardData&&XA.setTextData(e.clipboardData,t.text,t.html,n)}}const XA={getTextData(i){const e=i.getData(ui.text);let t=null;const n=i.getData("vscode-editor-data");if(typeof n=="string")try{t=JSON.parse(n),t.version!==1&&(t=null)}catch{}return e.length===0&&t===null&&i.files.length>0?[Array.prototype.slice.call(i.files,0).map(s=>s.name).join(`
`),null]:[e,t]},setTextData(i,e,t,n){i.setData(ui.text,e),typeof t=="string"&&i.setData("text/html",t),i.setData("vscode-editor-data",JSON.stringify(n))}};class yNe extends q{get ownerDocument(){return this._actual.ownerDocument}constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new Dt(this._actual,"keydown")).event,this.onKeyUp=this._register(new Dt(this._actual,"keyup")).event,this.onCompositionStart=this._register(new Dt(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new Dt(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new Dt(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new Dt(this._actual,"beforeinput")).event,this.onInput=this._register(new Dt(this._actual,"input")).event,this.onCut=this._register(new Dt(this._actual,"cut")).event,this.onCopy=this._register(new Dt(this._actual,"copy")).event,this.onPaste=this._register(new Dt(this._actual,"paste")).event,this.onFocus=this._register(new Dt(this._actual,"focus")).event,this.onBlur=this._register(new Dt(this._actual,"blur")).event,this._onSyntheticTap=this._register(new H),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>sh.onKeyDown())),this._register(this.onBeforeInput(()=>sh.onBeforeInput())),this._register(this.onInput(()=>sh.onInput())),this._register(this.onKeyUp(()=>sh.onKeyUp())),this._register(ee(this._actual,zT.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=Gg(this._actual);return e?e.activeElement===this._actual:z3(this._actual)?this._actual.ownerDocument.activeElement===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const n=this._actual;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,n){const r=this._actual;let s=null;const o=Gg(r);o?s=o.activeElement:s=r.ownerDocument.activeElement;const a=s===r,l=r.selectionStart,c=r.selectionEnd;if(a&&l===t&&c===n){aa&&window.parent!==window&&r.focus();return}if(a){this.setIgnoreSelectionChangeTime("setSelectionRange"),r.setSelectionRange(t,n),aa&&window.parent!==window&&r.focus();return}try{const d=Jke(r);this.setIgnoreSelectionChangeTime("setSelectionRange"),r.focus(),r.setSelectionRange(t,n),eLe(r,d)}catch{}}}class CNe extends b5{constructor(e,t,n){super(e,t,n),this._register(vn.addTarget(this.viewHelper.linesContentDomNode)),this._register(ee(this.viewHelper.linesContentDomNode,yn.Tap,s=>this.onTap(s))),this._register(ee(this.viewHelper.linesContentDomNode,yn.Change,s=>this.onChange(s))),this._register(ee(this.viewHelper.linesContentDomNode,yn.Contextmenu,s=>this._onContextMenu(new $h(s,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(ee(this.viewHelper.linesContentDomNode,"pointerdown",s=>{const o=s.pointerType;if(o==="mouse"){this._lastPointerType="mouse";return}else o==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const r=new UEe(this.viewHelper.viewDomNode);this._register(r.onPointerMove(this.viewHelper.viewDomNode,s=>this._onMouseMove(s))),this._register(r.onPointerUp(this.viewHelper.viewDomNode,s=>this._onMouseUp(s))),this._register(r.onPointerLeave(this.viewHelper.viewDomNode,s=>this._onMouseLeave(s))),this._register(r.onPointerDown(this.viewHelper.viewDomNode,(s,o)=>this._onMouseDown(s,o)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new $h(e,!1,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:t.type===6&&t.detail.injectedText!==null})}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}}class wNe extends b5{constructor(e,t,n){super(e,t,n),this._register(vn.addTarget(this.viewHelper.linesContentDomNode)),this._register(ee(this.viewHelper.linesContentDomNode,yn.Tap,r=>this.onTap(r))),this._register(ee(this.viewHelper.linesContentDomNode,yn.Change,r=>this.onChange(r))),this._register(ee(this.viewHelper.linesContentDomNode,yn.Contextmenu,r=>this._onContextMenu(new $h(r,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new $h(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const n=document.createEvent("CustomEvent");n.initEvent(zT.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class SNe extends q{constructor(e,t,n){super(),Ol&&j3.pointerEvents?this.handler=this._register(new CNe(e,t,n)):window.TouchEvent?this.handler=this._register(new wNe(e,t,n)):this.handler=this._register(new b5(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class Mp extends zC{}const qi=Lt("themeService");function Zn(i){return{id:i}}function YA(i){switch(i){case Jo.DARK:return"vs-dark";case Jo.HIGH_CONTRAST_DARK:return"hc-black";case Jo.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const FZ={ThemingContribution:"base.contributions.theming"};class xNe{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new H}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),st(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}const BZ=new xNe;qn.add(FZ.ThemingContribution,BZ);function Ka(i){return BZ.onColorThemeChange(i)}class TNe extends q{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}const WZ=P("editor.lineHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},p("lineHighlight","Background color for the highlight of line at the cursor position.")),U6=P("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:Rt},p("lineHighlightBorderBox","Background color for the border around the line at the cursor position."));P("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},p("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);P("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:Rn,hcLight:Rn},p("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0);P("editor.symbolHighlightBackground",{dark:Ic,light:Ic,hcDark:null,hcLight:null},p("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0);P("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:Rn,hcLight:Rn},p("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0);const VZ=P("editorCursor.foreground",{dark:"#AEAFAD",light:K.black,hcDark:K.white,hcLight:"#0F4A85"},p("caret","Color of the editor cursor.")),kNe=P("editorCursor.background",null,p("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),Gd=P("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},p("editorWhitespaces","Color of whitespace characters in the editor.")),LNe=P("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:K.white,hcLight:"#292929"},p("editorLineNumbers","Color of editor line numbers.")),jw=P("editorIndentGuide.background",{dark:Gd,light:Gd,hcDark:Gd,hcLight:Gd},p("editorIndentGuides","Color of the editor indentation guides."),!1,p("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),zw=P("editorIndentGuide.activeBackground",{dark:Gd,light:Gd,hcDark:Gd,hcLight:Gd},p("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,p("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),qC=P("editorIndentGuide.background1",{dark:jw,light:jw,hcDark:jw,hcLight:jw},p("editorIndentGuides1","Color of the editor indentation guides (1).")),DNe=P("editorIndentGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorIndentGuides2","Color of the editor indentation guides (2).")),INe=P("editorIndentGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorIndentGuides3","Color of the editor indentation guides (3).")),RNe=P("editorIndentGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorIndentGuides4","Color of the editor indentation guides (4).")),ENe=P("editorIndentGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorIndentGuides5","Color of the editor indentation guides (5).")),NNe=P("editorIndentGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorIndentGuides6","Color of the editor indentation guides (6).")),GC=P("editorIndentGuide.activeBackground1",{dark:zw,light:zw,hcDark:zw,hcLight:zw},p("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),ANe=P("editorIndentGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),PNe=P("editorIndentGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),MNe=P("editorIndentGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),ONe=P("editorIndentGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),FNe=P("editorIndentGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),$w=P("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:Rn,hcLight:Rn},p("editorActiveLineNumber","Color of editor active line number"),!1,p("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));P("editorLineNumber.activeForeground",{dark:$w,light:$w,hcDark:$w,hcLight:$w},p("editorActiveLineNumber","Color of editor active line number"));const BNe=P("editorLineNumber.dimmedForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."));P("editorRuler.foreground",{dark:"#5A5A5A",light:K.lightgrey,hcDark:K.white,hcLight:"#292929"},p("editorRuler","Color of the editor rulers."));P("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},p("editorCodeLensForeground","Foreground color of editor CodeLens"));P("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},p("editorBracketMatchBackground","Background color behind matching brackets"));P("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:Rt,hcLight:Rt},p("editorBracketMatchBorder","Color for matching brackets boxes"));const WNe=P("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},p("editorOverviewRulerBorder","Color of the overview ruler border.")),VNe=P("editorOverviewRuler.background",null,p("editorOverviewRulerBackground","Background color of the editor overview ruler."));P("editorGutter.background",{dark:Ki,light:Ki,hcDark:Ki,hcLight:Ki},p("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers."));P("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:K.fromHex("#fff").transparent(.8),hcLight:Rt},p("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor."));const HNe=P("editorUnnecessaryCode.opacity",{dark:K.fromHex("#000a"),light:K.fromHex("#0007"),hcDark:null,hcLight:null},p("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));P("editorGhostText.border",{dark:null,light:null,hcDark:K.fromHex("#fff").transparent(.8),hcLight:K.fromHex("#292929").transparent(.8)},p("editorGhostTextBorder","Border color of ghost text in the editor."));P("editorGhostText.foreground",{dark:K.fromHex("#ffffff56"),light:K.fromHex("#0007"),hcDark:null,hcLight:null},p("editorGhostTextForeground","Foreground color of the ghost text in the editor."));P("editorGhostText.background",{dark:null,light:null,hcDark:null,hcLight:null},p("editorGhostTextBackground","Background color of the ghost text in the editor."));const Kw=new K(new Mt(0,122,204,.6)),HZ=P("editorOverviewRuler.rangeHighlightForeground",{dark:Kw,light:Kw,hcDark:Kw,hcLight:Kw},p("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),UNe=P("editorOverviewRuler.errorForeground",{dark:new K(new Mt(255,18,18,.7)),light:new K(new Mt(255,18,18,.7)),hcDark:new K(new Mt(255,50,50,1)),hcLight:"#B5200D"},p("overviewRuleError","Overview ruler marker color for errors.")),jNe=P("editorOverviewRuler.warningForeground",{dark:Lo,light:Lo,hcDark:Q0,hcLight:Q0},p("overviewRuleWarning","Overview ruler marker color for warnings.")),zNe=P("editorOverviewRuler.infoForeground",{dark:Ms,light:Ms,hcDark:J0,hcLight:J0},p("overviewRuleInfo","Overview ruler marker color for infos.")),UZ=P("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},p("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),jZ=P("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},p("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),zZ=P("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},p("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),$Z=P("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),KZ=P("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),qZ=P("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),$Ne=P("editorBracketHighlight.unexpectedBracket.foreground",{dark:new K(new Mt(255,18,18,.8)),light:new K(new Mt(255,18,18,.8)),hcDark:new K(new Mt(255,50,50,1)),hcLight:""},p("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),KNe=P("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),qNe=P("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),GNe=P("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),ZNe=P("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),XNe=P("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),YNe=P("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),QNe=P("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),JNe=P("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),e2e=P("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),t2e=P("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),n2e=P("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),i2e=P("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));P("editorUnicodeHighlight.border",{dark:"#BD9B03",light:"#CEA33D",hcDark:"#ff0000",hcLight:"#CEA33D"},p("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));P("editorUnicodeHighlight.background",{dark:"#bd9b0326",light:"#cea33d14",hcDark:"#00000000",hcLight:"#cea33d14"},p("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));Ka((i,e)=>{const t=i.getColor(Ki),n=i.getColor(WZ),r=n&&!n.isTransparent()?n:t;r&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${r}; }`)});class ZC extends Mp{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new U(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(66);const t=e.get(67);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(94);const n=e.get(143);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new U(e,1));if(t.column!==1)return"";const n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(this._renderLineNumbers===2){const r=Math.abs(this._lastCursorModelPosition.lineNumber-n);return r===0?'<span class="relative-current-line-number">'+n+"</span>":String(r)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===n||n%10===0?String(n):"":String(n)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=os?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,s=this._context.viewModel.getLineCount(),o=[];for(let a=n;a<=r;a++){const l=a-n,c=this._getLineRenderLineNumber(a);if(!c){o[l]="";continue}let d="";if(a===s&&this._context.viewModel.getLineLength(a)===0){if(this._renderFinalNewline==="off"){o[l]="";continue}this._renderFinalNewline==="dimmed"&&(d=" dimmed-line-number")}a===this._activeLineNumber&&(d=" active-line-number"),o[l]=`<div class="${ZC.CLASS_NAME}${t}${d}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${c}</div>`}this._renderResult=o}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}ZC.CLASS_NAME="line-numbers";Ka((i,e)=>{const t=i.getColor(LNe),n=i.getColor(BNe);n?e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${n}; }`):t&&e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${t.transparent(.4)}; }`)});class Zg extends ao{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(143);this._canUseLayerHinting=!t.get(32),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=tn(document.createElement("div")),this._domNode.setClassName(Zg.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=tn(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(Zg.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(143);return this._canUseLayerHinting=!t.get(32),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}}Zg.CLASS_NAME="glyph-margin";Zg.OUTER_CLASS_NAME="margin";const v_="monaco-mouse-cursor-text";class r2e{constructor(){this._onDidChange=new H,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}const Fv=new r2e,bn=Lt("keybindingService");var s2e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},o2e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class a2e{constructor(e,t,n,r,s){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=n,this.widthOfHiddenLineTextBefore=r,this.distanceToModelLineEnd=s,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new U(this.modelLineNumber,this.distanceToModelLineStart+1),n=new U(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const dE=aa;let QA=class extends ao{constructor(e,t,n,r){super(e),this._keybindingService=r,this._primaryCursorPosition=new U(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=n,this._scrollLeft=0,this._scrollTop=0;const s=this._context.configuration.options,o=s.get(143);this._setAccessibilityOptions(s),this._contentLeft=o.contentLeft,this._contentWidth=o.contentWidth,this._contentHeight=o.height,this._fontInfo=s.get(50),this._lineHeight=s.get(66),this._emptySelectionClipboard=s.get(37),this._copyWithSyntaxHighlighting=s.get(25),this._visibleTextArea=null,this._selections=[new Be(1,1,1,1)],this._modelSelections=[new Be(1,1,1,1)],this._lastRenderPosition=null,this.textArea=tn(document.createElement("textarea")),Zc.write(this.textArea,6),this.textArea.setClassName(`inputarea ${v_}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:a}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${a*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(s)),this.textArea.setAttribute("aria-required",s.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(s.get(123))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",p("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",s.get(90)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=tn(document.createElement("div")),this.textAreaCover.setPosition("absolute");const l={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:u=>this._context.viewModel.getLineMaxColumn(u),getValueInRange:(u,h)=>this._context.viewModel.getValueInRange(u,h),getValueLengthInRange:(u,h)=>this._context.viewModel.getValueLengthInRange(u,h),modifyPosition:(u,h)=>this._context.viewModel.modifyPosition(u,h)},c={getDataToCopy:()=>{const u=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,Ar),h=this._context.viewModel.model.getEOL(),f=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),g=Array.isArray(u)?u:null,m=Array.isArray(u)?u.join(h):u;let y,b=null;if(ZA.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&m.length<65536){const v=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);v&&(y=v.html,b=v.mode)}return{isFromEmptySelection:f,multicursorText:g,text:m,html:y,mode:b}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){const u=this._selections[0];if(Ot&&u.isEmpty()){const f=u.getStartPosition();let g=this._getWordBeforePosition(f);if(g.length===0&&(g=this._getCharacterBeforePosition(f)),g.length>0)return new cr(g,g.length,g.length,D.fromPositions(f),0)}const h=500;if(Ot&&!u.isEmpty()&&l.getValueLengthInRange(u,0)<h){const f=l.getValueInRange(u,0);return new cr(f,0,f.length,u,0)}if(hu&&!u.isEmpty()){const f="vscode-placeholder";return new cr(f,0,f.length,null,void 0)}return cr.EMPTY}if(_8){const u=this._selections[0];if(u.isEmpty()){const h=u.getStartPosition(),[f,g]=this._getAndroidWordAtPosition(h);if(f.length>0)return new cr(f,g,g,D.fromPositions(h),0)}return cr.EMPTY}return $m.fromEditorSelection(l,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(u,h,f)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(u,h,f)},d=this._register(new yNe(this.textArea.domNode));this._textAreaInput=this._register(new vNe(c,d,To,{isAndroid:_8,isChrome:W3,isFirefox:aa,isSafari:hu})),this._register(this._textAreaInput.onKeyDown(u=>{this._viewController.emitKeyDown(u)})),this._register(this._textAreaInput.onKeyUp(u=>{this._viewController.emitKeyUp(u)})),this._register(this._textAreaInput.onPaste(u=>{let h=!1,f=null,g=null;u.metadata&&(h=this._emptySelectionClipboard&&!!u.metadata.isFromEmptySelection,f=typeof u.metadata.multicursorText<"u"?u.metadata.multicursorText:null,g=u.metadata.mode),this._viewController.paste(u.text,h,f,g)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(u=>{u.replacePrevCharCnt||u.replaceNextCharCnt||u.positionDelta?this._viewController.compositionType(u.text,u.replacePrevCharCnt,u.replaceNextCharCnt,u.positionDelta):this._viewController.type(u.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(u=>{this._viewController.setSelection(u)})),this._register(this._textAreaInput.onCompositionStart(u=>{const h=this.textArea.domNode,f=this._modelSelections[0],{distanceToModelLineStart:g,widthOfHiddenTextBefore:m}=(()=>{const b=h.value.substring(0,Math.min(h.selectionStart,h.selectionEnd)),v=b.lastIndexOf(`
`),C=b.substring(v+1),w=C.lastIndexOf("	"),S=C.length-w-1,L=f.getStartPosition(),T=Math.min(L.column-1,S),I=L.column-1-T,R=C.substring(0,C.length-T),{tabSize:B}=this._context.viewModel.model.getOptions(),V=l2e(this.textArea.domNode.ownerDocument,R,this._fontInfo,B);return{distanceToModelLineStart:I,widthOfHiddenTextBefore:V}})(),{distanceToModelLineEnd:y}=(()=>{const b=h.value.substring(Math.max(h.selectionStart,h.selectionEnd)),v=b.indexOf(`
`),C=v===-1?b:b.substring(0,v),w=C.indexOf("	"),S=w===-1?C.length:C.length-w-1,L=f.getEndPosition(),T=Math.min(this._context.viewModel.model.getLineMaxColumn(L.lineNumber)-L.column,S);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(L.lineNumber)-L.column-T}})();this._context.viewModel.revealRange("keyboard",!0,D.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new a2e(this._context,f.startLineNumber,g,m,y),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${v_} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(u=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${v_}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(Fv.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent(e){this._textAreaInput.writeScreenReaderContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',n=this._context.viewModel.getLineContent(e.lineNumber),r=da(t);let s=!0,o=e.column,a=!0,l=e.column,c=0;for(;c<50&&(s||a);){if(s&&o<=1&&(s=!1),s){const d=n.charCodeAt(o-2);r.get(d)!==0?s=!1:o--}if(a&&l>n.length&&(a=!1),a){const d=n.charCodeAt(l-1);r.get(d)!==0?a=!1:l++}c++}return[n.substring(o-1,l-1),e.column-o]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),n=da(this._context.configuration.options.get(129));let r=e.column,s=0;for(;r>1;){const o=t.charCodeAt(r-2);if(n.get(o)!==0||s>50)return t.substring(r-1,e.column-1);s++,r--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const n=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!zi(n.charCodeAt(0)))return n}return""}_getAriaLabel(e){var t,n,r;if(e.get(2)===1){const o=(t=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode"))===null||t===void 0?void 0:t.getAriaLabel(),a=(n=this._keybindingService.lookupKeybinding("workbench.action.showCommands"))===null||n===void 0?void 0:n.getAriaLabel(),l=(r=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings"))===null||r===void 0?void 0:r.getAriaLabel(),c=p("accessibilityModeOff","The editor is not accessible at this time.");return o?p("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",c,o):a?p("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",c,a):l?p("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",c,l):c}return e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===Kl.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const r=e.get(143).wrappingColumn;if(r!==-1&&this._accessibilitySupport!==1){const s=e.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(r*s.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=dE?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(143);this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(50),this._lineHeight=t.get(66),this._emptySelectionClipboard=t.get(37),this._copyWithSyntaxHighlighting=t.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:r}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${r*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(123))),(e.hasChanged(34)||e.hasChanged(90))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!Fv.enabled||e.get(34)&&e.get(90)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){var t;this._primaryCursorPosition=new U(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),(t=this._visibleTextArea)===null||t===void 0||t.prepareRender(e)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){var e;if(this._visibleTextArea){const r=this._visibleTextArea.visibleTextareaStart,s=this._visibleTextArea.visibleTextareaEnd,o=this._visibleTextArea.startPosition,a=this._visibleTextArea.endPosition;if(o&&a&&r&&s&&s.left>=this._scrollLeft&&r.left<=this._scrollLeft+this._contentWidth){const l=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,c=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let d=this._visibleTextArea.widthOfHiddenLineTextBefore,u=this._contentLeft+r.left-this._scrollLeft,h=s.left-r.left+1;if(u<this._contentLeft){const v=this._contentLeft-u;u+=v,d+=v,h-=v}h>this._contentWidth&&(h=this._contentWidth);const f=this._context.viewModel.getViewLineData(o.lineNumber),g=f.tokens.findTokenIndexAtOffset(o.column-1),m=f.tokens.findTokenIndexAtOffset(a.column-1),y=g===m,b=this._visibleTextArea.definePresentation(y?f.tokens.getPresentation(g):null);this.textArea.domNode.scrollTop=c*this._lineHeight,this.textArea.domNode.scrollLeft=d,this._doRender({lastRenderPosition:null,top:l,left:u,width:h,height:this._lineHeight,useCover:!1,color:(Gn.getColorMap()||[])[b.foreground],italic:b.italic,bold:b.bold,underline:b.underline,strikethrough:b.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const t=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(t<this._contentLeft||t>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const n=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(n<0||n>this._contentHeight){this._renderAtTopLeft();return}if(Ot){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:n,left:this._textAreaWrapping?this._contentLeft:t,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const r=(e=this._textAreaInput.textAreaState.newlineCountBeforeSelection)!==null&&e!==void 0?e:this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=r*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:n,left:this._textAreaWrapping?this._contentLeft:t,width:this._textAreaWidth,height:dE?0:1,useCover:!1})}_newlinecount(e){let t=0,n=-1;do{if(n=e.indexOf(`
`,n+1),n===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:dE?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,n=this.textAreaCover;Ir(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?K.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),n.setTop(e.useCover?e.top:0),n.setLeft(e.useCover?e.left:0),n.setWidth(e.useCover?e.width:0),n.setHeight(e.useCover?e.height:0);const r=this._context.configuration.options;r.get(57)?n.setClassName("monaco-editor-background textAreaCover "+Zg.OUTER_CLASS_NAME):r.get(67).renderType!==0?n.setClassName("monaco-editor-background textAreaCover "+ZC.CLASS_NAME):n.setClassName("monaco-editor-background textAreaCover")}};QA=s2e([o2e(3,bn)],QA);function l2e(i,e,t,n){if(e.length===0)return 0;const r=i.createElement("div");r.style.position="absolute",r.style.top="-50000px",r.style.width="50000px";const s=i.createElement("span");Ir(s,t),s.style.whiteSpace="pre",s.style.tabSize=`${n*t.spaceWidth}px`,s.append(e),r.appendChild(s),i.body.appendChild(r);const o=s.offsetWidth;return i.body.removeChild(r),o}function c2e(i,e,t){let n=0;for(let s=0;s<i.length;s++)i.charAt(s)==="	"?n=Wi.nextIndentTabStop(n,e):n++;let r="";if(!t){const s=Math.floor(n/e);n=n%e;for(let o=0;o<s;o++)r+="	"}for(let s=0;s<n;s++)r+=" ";return r}function $T(i,e,t){let n=ns(i);return n===-1&&(n=i.length),c2e(i.substring(0,n),e,t)+i.substring(n)}const d2e=()=>!0,u2e=()=>!1,h2e=i=>i===" "||i==="	";class am{static shouldRecreate(e){return e.hasChanged(143)||e.hasChanged(129)||e.hasChanged(37)||e.hasChanged(76)||e.hasChanged(78)||e.hasChanged(79)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(9)||e.hasChanged(10)||e.hasChanged(14)||e.hasChanged(127)||e.hasChanged(50)||e.hasChanged(90)}constructor(e,t,n,r){var s;this.languageConfigurationService=r,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const o=n.options,a=o.get(143),l=o.get(50);this.readOnly=o.get(90),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=o.get(115),this.lineHeight=l.lineHeight,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(a.height/this.lineHeight)-2),this.useTabStops=o.get(127),this.wordSeparators=o.get(129),this.emptySelectionClipboard=o.get(37),this.copyWithSyntaxHighlighting=o.get(25),this.multiCursorMergeOverlapping=o.get(76),this.multiCursorPaste=o.get(78),this.multiCursorLimit=o.get(79),this.autoClosingBrackets=o.get(6),this.autoClosingComments=o.get(7),this.autoClosingQuotes=o.get(11),this.autoClosingDelete=o.get(9),this.autoClosingOvertype=o.get(10),this.autoSurround=o.get(14),this.autoIndent=o.get(12),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const c=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(c)for(const u of c)this.surroundingPairs[u.open]=u.close;const d=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=(s=d==null?void 0:d.blockCommentStartToken)!==null&&s!==void 0?s:null}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)===null||e===void 0?void 0:e.getElectricCharacters();if(t)for(const n of t)this._electricChars[n]=!0}return this._electricChars}onElectricCharacter(e,t,n){const r=kD(t,n-1),s=this.languageConfigurationService.getLanguageConfiguration(r.languageId).electricCharacter;return s?s.onElectricCharacter(e,r,n-r.firstCharOffset):null}normalizeIndentation(e){return $T(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,n){switch(t){case"beforeWhitespace":return h2e;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,n);case"always":return d2e;case"never":return u2e}}_getLanguageDefinedShouldAutoClose(e,t){const n=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return r=>n.indexOf(r)!==-1}visibleColumnFromColumn(e,t){return Wi.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,n){const r=Wi.columnFromVisibleColumn(e.getLineContent(t),n,this.tabSize),s=e.getLineMinColumn(t);if(r<s)return s;const o=e.getLineMaxColumn(t);return r>o?o:r}}let Ht=class GZ{static fromModelState(e){return new f2e(e)}static fromViewState(e){return new g2e(e)}static fromModelSelection(e){const t=Be.liftSelection(e),n=new hr(D.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return GZ.fromModelState(n)}static fromModelSelections(e){const t=[];for(let n=0,r=e.length;n<r;n++)t[n]=this.fromModelSelection(e[n]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}};class f2e{constructor(e){this.modelState=e,this.viewState=null}}class g2e{constructor(e){this.modelState=null,this.viewState=e}}class hr{constructor(e,t,n,r,s){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=n,this.position=r,this.leftoverVisibleColumns=s,this._singleCursorStateBrand=void 0,this.selection=hr._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,r){return e?new hr(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new U(t,n),r):new hr(new D(t,n,t,n),0,r,new U(t,n),r)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?Be.fromPositions(e.getStartPosition(),t):Be.fromPositions(e.getEndPosition(),t)}}class Ds{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}function Vu(i){return i==="'"||i==='"'||i==="`"}class tg{static columnSelect(e,t,n,r,s,o){const a=Math.abs(s-n)+1,l=n>s,c=r>o,d=r<o,u=[];for(let h=0;h<a;h++){const f=n+(l?-h:h),g=e.columnFromVisibleColumn(t,f,r),m=e.columnFromVisibleColumn(t,f,o),y=e.visibleColumnFromColumn(t,new U(f,g)),b=e.visibleColumnFromColumn(t,new U(f,m));d&&(y>o||b<r)||c&&(b>r||y<o)||u.push(new hr(new D(f,g,f,g),0,0,new U(f,m),0))}if(u.length===0)for(let h=0;h<a;h++){const f=n+(l?-h:h),g=t.getLineMaxColumn(f);u.push(new hr(new D(f,g,f,g),0,0,new U(f,g),0))}return{viewStates:u,reversed:l,fromLineNumber:n,fromVisualColumn:r,toLineNumber:s,toVisualColumn:o}}static columnSelectLeft(e,t,n){let r=n.toViewVisualColumn;return r>0&&r--,tg.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,r)}static columnSelectRight(e,t,n){let r=0;const s=Math.min(n.fromViewLineNumber,n.toViewLineNumber),o=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let l=s;l<=o;l++){const c=t.getLineMaxColumn(l),d=e.visibleColumnFromColumn(t,new U(l,c));r=Math.max(r,d)}let a=n.toViewVisualColumn;return a<r&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,r){const s=r?e.pageSize:1,o=Math.max(1,n.toViewLineNumber-s);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}static columnSelectDown(e,t,n,r){const s=r?e.pageSize:1,o=Math.min(t.getLineCount(),n.toViewLineNumber+s);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}}class Sr{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return Be.fromPositions(r.getEndPosition())}}class p2e{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return Be.fromRange(r,0)}}class qw{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return Be.fromPositions(r.getStartPosition())}}class Sx{constructor(e,t,n,r,s=!1){this._range=e,this._text=t,this._columnDeltaOffset=r,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=s}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return Be.fromPositions(r.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class v5{constructor(e,t,n,r=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=r,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class uE{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}class rn{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-aG(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new U(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const r=e.getLineMinColumn(t.lineNumber),s=e.getLineContent(t.lineNumber),o=ty.atomicPosition(s,t.column-1,n,0);if(o!==-1&&o+1>=r)return new U(t.lineNumber,o+1)}return this.leftPosition(e,t)}static left(e,t,n){const r=e.stickyTabStops?rn.leftPositionAtomicSoftTabs(t,n,e.tabSize):rn.leftPosition(t,n);return new uE(r.lineNumber,r.column,0)}static moveLeft(e,t,n,r,s){let o,a;if(n.hasSelection()&&!r)o=n.selection.startLineNumber,a=n.selection.startColumn;else{const l=n.position.delta(void 0,-(s-1)),c=t.normalizePosition(rn.clipPositionColumn(l,t),0),d=rn.left(e,t,c);o=d.lineNumber,a=d.column}return n.move(r,o,a,0)}static clipPositionColumn(e,t){return new U(e.lineNumber,rn.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+O3(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new U(t,n)}static rightPositionAtomicSoftTabs(e,t,n,r,s){if(n<e.getLineIndentColumn(t)){const o=e.getLineContent(t),a=ty.atomicPosition(o,n-1,r,1);if(a!==-1)return new U(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const r=e.stickyTabStops?rn.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):rn.rightPosition(t,n.lineNumber,n.column);return new uE(r.lineNumber,r.column,0)}static moveRight(e,t,n,r,s){let o,a;if(n.hasSelection()&&!r)o=n.selection.endLineNumber,a=n.selection.endColumn;else{const l=n.position.delta(void 0,s-1),c=t.normalizePosition(rn.clipPositionColumn(l,t),1),d=rn.right(e,t,c);o=d.lineNumber,a=d.column}return n.move(r,o,a,0)}static vertical(e,t,n,r,s,o,a,l){const c=Wi.visibleColumnFromColumn(t.getLineContent(n),r,e.tabSize)+s,d=t.getLineCount(),u=n===1&&r===1,h=n===d&&r===t.getLineMaxColumn(n),f=o<n?u:h;if(n=o,n<1?(n=1,a?r=t.getLineMinColumn(n):r=Math.min(t.getLineMaxColumn(n),r)):n>d?(n=d,a?r=t.getLineMaxColumn(n):r=Math.min(t.getLineMaxColumn(n),r)):r=e.columnFromVisibleColumn(t,n,c),f?s=0:s=c-Wi.visibleColumnFromColumn(t.getLineContent(n),r,e.tabSize),l!==void 0){const g=new U(n,r),m=t.normalizePosition(g,l);s=s+(r-m.column),n=m.lineNumber,r=m.column}return new uE(n,r,s)}static down(e,t,n,r,s,o,a){return this.vertical(e,t,n,r,s,n+o,a,4)}static moveDown(e,t,n,r,s){let o,a;n.hasSelection()&&!r?(o=n.selection.endLineNumber,a=n.selection.endColumn):(o=n.position.lineNumber,a=n.position.column);let l=0,c;do if(c=rn.down(e,t,o+l,a,n.leftoverVisibleColumns,s,!0),t.normalizePosition(new U(c.lineNumber,c.column),2).lineNumber>o)break;while(l++<10&&o+l<t.getLineCount());return n.move(r,c.lineNumber,c.column,c.leftoverVisibleColumns)}static translateDown(e,t,n){const r=n.selection,s=rn.down(e,t,r.selectionStartLineNumber,r.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),o=rn.down(e,t,r.positionLineNumber,r.positionColumn,n.leftoverVisibleColumns,1,!1);return new hr(new D(s.lineNumber,s.column,s.lineNumber,s.column),0,s.leftoverVisibleColumns,new U(o.lineNumber,o.column),o.leftoverVisibleColumns)}static up(e,t,n,r,s,o,a){return this.vertical(e,t,n,r,s,n-o,a,3)}static moveUp(e,t,n,r,s){let o,a;n.hasSelection()&&!r?(o=n.selection.startLineNumber,a=n.selection.startColumn):(o=n.position.lineNumber,a=n.position.column);const l=rn.up(e,t,o,a,n.leftoverVisibleColumns,s,!0);return n.move(r,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,n){const r=n.selection,s=rn.up(e,t,r.selectionStartLineNumber,r.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),o=rn.up(e,t,r.positionLineNumber,r.positionColumn,n.leftoverVisibleColumns,1,!1);return new hr(new D(s.lineNumber,s.column,s.lineNumber,s.column),0,s.leftoverVisibleColumns,new U(o.lineNumber,o.column),o.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,r){let s=n.position.lineNumber;for(;s>1&&this._isBlankLine(t,s);)s--;for(;s>1&&!this._isBlankLine(t,s);)s--;return n.move(r,s,t.getLineMinColumn(s),0)}static moveToNextBlankLine(e,t,n,r){const s=t.getLineCount();let o=n.position.lineNumber;for(;o<s&&this._isBlankLine(t,o);)o++;for(;o<s&&!this._isBlankLine(t,o);)o++;return n.move(r,o,t.getLineMinColumn(o),0)}static moveToBeginningOfLine(e,t,n,r){const s=n.position.lineNumber,o=t.getLineMinColumn(s),a=t.getLineFirstNonWhitespaceColumn(s)||o;let l;return n.position.column===a?l=o:l=a,n.move(r,s,l,0)}static moveToEndOfLine(e,t,n,r,s){const o=n.position.lineNumber,a=t.getLineMaxColumn(o);return n.move(r,o,a,s?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,r){return n.move(r,1,1,0)}static moveToEndOfBuffer(e,t,n,r){const s=t.getLineCount(),o=t.getLineMaxColumn(s);return n.move(r,s,o,0)}}class Xg{static deleteRight(e,t,n,r){const s=[];let o=e!==3;for(let a=0,l=r.length;a<l;a++){const c=r[a];let d=c;if(d.isEmpty()){const u=c.getPosition(),h=rn.right(t,n,u);d=new D(h.lineNumber,h.column,u.lineNumber,u.column)}if(d.isEmpty()){s[a]=null;continue}d.startLineNumber!==d.endLineNumber&&(o=!0),s[a]=new Sr(d,"")}return[o,s]}static isAutoClosingPairDelete(e,t,n,r,s,o,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let l=0,c=o.length;l<c;l++){const d=o[l],u=d.getPosition();if(!d.isEmpty())return!1;const h=s.getLineContent(u.lineNumber);if(u.column<2||u.column>=h.length+1)return!1;const f=h.charAt(u.column-2),g=r.get(f);if(!g)return!1;if(Vu(f)){if(n==="never")return!1}else if(t==="never")return!1;const m=h.charAt(u.column-1);let y=!1;for(const b of g)b.open===f&&b.close===m&&(y=!0);if(!y)return!1;if(e==="auto"){let b=!1;for(let v=0,C=a.length;v<C;v++){const w=a[v];if(u.lineNumber===w.startLineNumber&&u.column===w.startColumn){b=!0;break}}if(!b)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){const r=[];for(let s=0,o=n.length;s<o;s++){const a=n[s].getPosition(),l=new D(a.lineNumber,a.column-1,a.lineNumber,a.column+1);r[s]=new Sr(l,"")}return[!0,r]}static deleteLeft(e,t,n,r,s){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,r,s))return this._runAutoClosingPairDelete(t,n,r);const o=[];let a=e!==2;for(let l=0,c=r.length;l<c;l++){const d=Xg.getDeleteRange(r[l],n,t);if(d.isEmpty()){o[l]=null;continue}d.startLineNumber!==d.endLineNumber&&(a=!0),o[l]=new Sr(d,"")}return[a,o]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const r=e.getPosition();if(n.useTabStops&&r.column>1){const s=t.getLineContent(r.lineNumber),o=ns(s),a=o===-1?s.length+1:o+1;if(r.column<=a){const l=n.visibleColumnFromColumn(t,r),c=Wi.prevIndentTabStop(l,n.indentSize),d=n.columnFromVisibleColumn(t,r.lineNumber,c);return new D(r.lineNumber,d,r.lineNumber,r.column)}}return D.fromPositions(Xg.getPositionAfterDeleteLeft(r,t),r)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=RTe(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){const n=e.lineNumber-1;return new U(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){const r=[];let s=null;n.sort((o,a)=>U.compare(o.getStartPosition(),a.getEndPosition()));for(let o=0,a=n.length;o<a;o++){const l=n[o];if(l.isEmpty())if(e.emptySelectionClipboard){const c=l.getPosition();let d,u,h,f;c.lineNumber<t.getLineCount()?(d=c.lineNumber,u=1,h=c.lineNumber+1,f=1):c.lineNumber>1&&(s==null?void 0:s.endLineNumber)!==c.lineNumber?(d=c.lineNumber-1,u=t.getLineMaxColumn(c.lineNumber-1),h=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber)):(d=c.lineNumber,u=1,h=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber));const g=new D(d,u,h,f);s=g,g.isEmpty()?r[o]=null:r[o]=new Sr(g,"")}else r[o]=null;else r[o]=new Sr(l,"")}return new Ds(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class Yt{static _createWord(e,t,n,r,s){return{start:r,end:s,wordType:t,nextCharClass:n}}static _findPreviousWordOnLine(e,t,n){const r=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(r,e,n)}static _doFindPreviousWordOnLine(e,t,n){let r=0;for(let s=n.column-2;s>=0;s--){const o=e.charCodeAt(s),a=t.get(o);if(a===0){if(r===2)return this._createWord(e,r,a,s+1,this._findEndOfWord(e,t,r,s+1));r=1}else if(a===2){if(r===1)return this._createWord(e,r,a,s+1,this._findEndOfWord(e,t,r,s+1));r=2}else if(a===1&&r!==0)return this._createWord(e,r,a,s+1,this._findEndOfWord(e,t,r,s+1))}return r!==0?this._createWord(e,r,1,0,this._findEndOfWord(e,t,r,0)):null}static _findEndOfWord(e,t,n,r){const s=e.length;for(let o=r;o<s;o++){const a=e.charCodeAt(o),l=t.get(a);if(l===1||n===1&&l===2||n===2&&l===0)return o}return s}static _findNextWordOnLine(e,t,n){const r=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(r,e,n)}static _doFindNextWordOnLine(e,t,n){let r=0;const s=e.length;for(let o=n.column-1;o<s;o++){const a=e.charCodeAt(o),l=t.get(a);if(l===0){if(r===2)return this._createWord(e,r,l,this._findStartOfWord(e,t,r,o-1),o);r=1}else if(l===2){if(r===1)return this._createWord(e,r,l,this._findStartOfWord(e,t,r,o-1),o);r=2}else if(l===1&&r!==0)return this._createWord(e,r,l,this._findStartOfWord(e,t,r,o-1),o)}return r!==0?this._createWord(e,r,1,this._findStartOfWord(e,t,r,s-1),s):null}static _findStartOfWord(e,t,n,r){for(let s=r;s>=0;s--){const o=e.charCodeAt(s),a=t.get(o);if(a===1||n===1&&a===2||n===2&&a===0)return s+1}return 0}static moveWordLeft(e,t,n,r){let s=n.lineNumber,o=n.column;o===1&&s>1&&(s=s-1,o=t.getLineMaxColumn(s));let a=Yt._findPreviousWordOnLine(e,t,new U(s,o));if(r===0)return new U(s,a?a.start+1:1);if(r===1)return a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=Yt._findPreviousWordOnLine(e,t,new U(s,a.start+1))),new U(s,a?a.start+1:1);if(r===3){for(;a&&a.wordType===2;)a=Yt._findPreviousWordOnLine(e,t,new U(s,a.start+1));return new U(s,a?a.start+1:1)}return a&&o<=a.end+1&&(a=Yt._findPreviousWordOnLine(e,t,new U(s,a.start+1))),new U(s,a?a.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,r=e.getLineMaxColumn(n);if(t.column===1)return n>1?new U(n-1,e.getLineMaxColumn(n-1)):t;const s=e.getLineContent(n);for(let o=t.column-1;o>1;o--){const a=s.charCodeAt(o-2),l=s.charCodeAt(o-1);if(a===95&&l!==95)return new U(n,o);if(a===45&&l!==45)return new U(n,o);if((eh(a)||Pw(a))&&lc(l))return new U(n,o);if(lc(a)&&lc(l)&&o+1<r){const c=s.charCodeAt(o);if(eh(c)||Pw(c))return new U(n,o)}}return new U(n,1)}static moveWordRight(e,t,n,r){let s=n.lineNumber,o=n.column,a=!1;o===t.getLineMaxColumn(s)&&s<t.getLineCount()&&(a=!0,s=s+1,o=1);let l=Yt._findNextWordOnLine(e,t,new U(s,o));if(r===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=Yt._findNextWordOnLine(e,t,new U(s,l.end+1))),l?o=l.end+1:o=t.getLineMaxColumn(s);else if(r===3){for(a&&(o=0);l&&(l.wordType===2||l.start+1<=o);)l=Yt._findNextWordOnLine(e,t,new U(s,l.end+1));l?o=l.start+1:o=t.getLineMaxColumn(s)}else l&&!a&&o>=l.start+1&&(l=Yt._findNextWordOnLine(e,t,new U(s,l.end+1))),l?o=l.start+1:o=t.getLineMaxColumn(s);return new U(s,o)}static _moveWordPartRight(e,t){const n=t.lineNumber,r=e.getLineMaxColumn(n);if(t.column===r)return n<e.getLineCount()?new U(n+1,1):t;const s=e.getLineContent(n);for(let o=t.column+1;o<r;o++){const a=s.charCodeAt(o-2),l=s.charCodeAt(o-1);if(a!==95&&l===95)return new U(n,o);if(a!==45&&l===45)return new U(n,o);if((eh(a)||Pw(a))&&lc(l))return new U(n,o);if(lc(a)&&lc(l)&&o+1<r){const c=s.charCodeAt(o);if(eh(c)||Pw(c))return new U(n,o)}}return new U(n,r)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),r=t.column-2,s=Dl(n,r);return s+1<r?new D(t.lineNumber,s+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,r=e.model,s=e.selection,o=e.whitespaceHeuristics;if(!s.isEmpty())return s;if(Xg.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const u=e.selection.getPosition();return new D(u.lineNumber,u.column-1,u.lineNumber,u.column+1)}const a=new U(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(o){const u=this._deleteWordLeftWhitespace(r,a);if(u)return u}let d=Yt._findPreviousWordOnLine(n,r,a);return t===0?d?c=d.start+1:c>1?c=1:(l--,c=r.getLineMaxColumn(l)):(d&&c<=d.end+1&&(d=Yt._findPreviousWordOnLine(n,r,new U(l,d.start+1))),d?c=d.end+1:c>1?c=1:(l--,c=r.getLineMaxColumn(l))),new D(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const r=new U(n.positionLineNumber,n.positionColumn),s=this._deleteInsideWordWhitespace(t,r);return s||this._deleteInsideWordDetermineDeleteRange(e,t,r)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),r=n.length;if(r===0)return null;let s=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,s))return null;let o=Math.min(t.column-1,r-1);if(!this._charAtIsWhitespace(n,o))return null;for(;s>0&&this._charAtIsWhitespace(n,s-1);)s--;for(;o+1<r&&this._charAtIsWhitespace(n,o+1);)o++;return new D(t.lineNumber,s+1,t.lineNumber,o+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const r=t.getLineContent(n.lineNumber),s=r.length;if(s===0)return n.lineNumber>1?new D(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new D(n.lineNumber,1,n.lineNumber+1,1):new D(n.lineNumber,1,n.lineNumber,1);const o=u=>u.start+1<=n.column&&n.column<=u.end+1,a=(u,h)=>(u=Math.min(u,n.column),h=Math.max(h,n.column),new D(n.lineNumber,u,n.lineNumber,h)),l=u=>{let h=u.start+1,f=u.end+1,g=!1;for(;f-1<s&&this._charAtIsWhitespace(r,f-1);)g=!0,f++;if(!g)for(;h>1&&this._charAtIsWhitespace(r,h-2);)h--;return a(h,f)},c=Yt._findPreviousWordOnLine(e,t,n);if(c&&o(c))return l(c);const d=Yt._findNextWordOnLine(e,t,n);return d&&o(d)?l(d):c&&d?a(c.end+1,d.start+1):c?a(c.start+1,c.end+1):d?a(d.start+1,d.end+1):a(1,s+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),r=Yt._moveWordPartLeft(e,n);return new D(n.lineNumber,n.column,r.lineNumber,r.column)}static _findFirstNonWhitespaceChar(e,t){const n=e.length;for(let r=t;r<n;r++){const s=e.charAt(r);if(s!==" "&&s!=="	")return r}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),r=t.column-1,s=this._findFirstNonWhitespaceChar(n,r);return r+1<s?new D(t.lineNumber,t.column,t.lineNumber,s+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,r=e.model,s=e.selection,o=e.whitespaceHeuristics;if(!s.isEmpty())return s;const a=new U(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,c=a.column;const d=r.getLineCount(),u=r.getLineMaxColumn(l);if(l===d&&c===u)return null;if(o){const f=this._deleteWordRightWhitespace(r,a);if(f)return f}let h=Yt._findNextWordOnLine(n,r,a);return t===2?h?c=h.end+1:c<u||l===d?c=u:(l++,h=Yt._findNextWordOnLine(n,r,new U(l,1)),h?c=h.start+1:c=r.getLineMaxColumn(l)):(h&&c>=h.start+1&&(h=Yt._findNextWordOnLine(n,r,new U(l,h.end+1))),h?c=h.start+1:c<u||l===d?c=u:(l++,h=Yt._findNextWordOnLine(n,r,new U(l,1)),h?c=h.start+1:c=r.getLineMaxColumn(l))),new D(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),r=Yt._moveWordPartRight(e,n);return new D(n.lineNumber,n.column,r.lineNumber,r.column)}static _createWordAtPosition(e,t,n){const r=new D(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(r),startColumn:r.startColumn,endColumn:r.endColumn}}static getWordAtPosition(e,t,n){const r=da(t),s=Yt._findPreviousWordOnLine(r,e,n);if(s&&s.wordType===1&&s.start<=n.column-1&&n.column-1<=s.end)return Yt._createWordAtPosition(e,n.lineNumber,s);const o=Yt._findNextWordOnLine(r,e,n);return o&&o.wordType===1&&o.start<=n.column-1&&n.column-1<=o.end?Yt._createWordAtPosition(e,n.lineNumber,o):null}static word(e,t,n,r,s){const o=da(e.wordSeparators),a=Yt._findPreviousWordOnLine(o,t,s),l=Yt._findNextWordOnLine(o,t,s);if(!r){let f,g;return a&&a.wordType===1&&a.start<=s.column-1&&s.column-1<=a.end?(f=a.start+1,g=a.end+1):l&&l.wordType===1&&l.start<=s.column-1&&s.column-1<=l.end?(f=l.start+1,g=l.end+1):(a?f=a.end+1:f=1,l?g=l.start+1:g=t.getLineMaxColumn(s.lineNumber)),new hr(new D(s.lineNumber,f,s.lineNumber,g),1,0,new U(s.lineNumber,g),0)}let c,d;a&&a.wordType===1&&a.start<s.column-1&&s.column-1<a.end?(c=a.start+1,d=a.end+1):l&&l.wordType===1&&l.start<s.column-1&&s.column-1<l.end?(c=l.start+1,d=l.end+1):(c=s.column,d=s.column);const u=s.lineNumber;let h;if(n.selectionStart.containsPosition(s))h=n.selectionStart.endColumn;else if(s.isBeforeOrEqual(n.selectionStart.getStartPosition())){h=c;const f=new U(u,h);n.selectionStart.containsPosition(f)&&(h=n.selectionStart.endColumn)}else{h=d;const f=new U(u,h);n.selectionStart.containsPosition(f)&&(h=n.selectionStart.startColumn)}return n.move(!0,u,h,0)}}class VD extends Yt{static deleteWordPartLeft(e){const t=Gw([Yt.deleteWordLeft(e,0),Yt.deleteWordLeft(e,2),Yt._deleteWordPartLeft(e.model,e.selection)]);return t.sort(D.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=Gw([Yt.deleteWordRight(e,0),Yt.deleteWordRight(e,2),Yt._deleteWordPartRight(e.model,e.selection)]);return t.sort(D.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,n){const r=Gw([Yt.moveWordLeft(e,t,n,0),Yt.moveWordLeft(e,t,n,2),Yt._moveWordPartLeft(t,n)]);return r.sort(U.compare),r[2]}static moveWordPartRight(e,t,n){const r=Gw([Yt.moveWordRight(e,t,n,0),Yt.moveWordRight(e,t,n,2),Yt._moveWordPartRight(t,n)]);return r.sort(U.compare),r[0]}}function Gw(i){return i.filter(e=>!!e)}class ar{static addCursorDown(e,t,n){const r=[];let s=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];r[s++]=new Ht(l.modelState,l.viewState),n?r[s++]=Ht.fromModelState(rn.translateDown(e.cursorConfig,e.model,l.modelState)):r[s++]=Ht.fromViewState(rn.translateDown(e.cursorConfig,e,l.viewState))}return r}static addCursorUp(e,t,n){const r=[];let s=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];r[s++]=new Ht(l.modelState,l.viewState),n?r[s++]=Ht.fromModelState(rn.translateUp(e.cursorConfig,e.model,l.modelState)):r[s++]=Ht.fromViewState(rn.translateUp(e.cursorConfig,e,l.viewState))}return r}static moveToBeginningOfLine(e,t,n){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];r[s]=this._moveToLineStart(e,a,n)}return r}static _moveToLineStart(e,t,n){const r=t.viewState.position.column,s=t.modelState.position.column,o=r===s,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!o&&!(r===l)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return Ht.fromViewState(rn.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return Ht.fromModelState(rn.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,r){const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=this._moveToLineEnd(e,l,n,r)}return s}static _moveToLineEnd(e,t,n,r){const s=t.viewState.position,o=e.getLineMaxColumn(s.lineNumber),a=s.column===o,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),d=o-s.column===c-l.column;return a||d?this._moveToLineEndByModel(e,t,n,r):this._moveToLineEndByView(e,t,n,r)}static _moveToLineEndByView(e,t,n,r){return Ht.fromViewState(rn.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,r))}static _moveToLineEndByModel(e,t,n,r){return Ht.fromModelState(rn.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,r))}static expandLineSelection(e,t){const n=[];for(let r=0,s=t.length;r<s;r++){const o=t[r],a=o.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=o.modelState.selection.endLineNumber,d;c===l?d=e.model.getLineMaxColumn(l):(c++,d=1),n[r]=Ht.fromModelState(new hr(new D(a,1,a,1),0,0,new U(c,d),0))}return n}static moveToBeginningOfBuffer(e,t,n){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];r[s]=Ht.fromModelState(rn.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return r}static moveToEndOfBuffer(e,t,n){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];r[s]=Ht.fromModelState(rn.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return r}static selectAll(e,t){const n=e.model.getLineCount(),r=e.model.getLineMaxColumn(n);return Ht.fromModelState(new hr(new D(1,1,1,1),0,0,new U(n,r),0))}static line(e,t,n,r,s){const o=e.model.validatePosition(r),a=s?e.coordinatesConverter.validateViewPosition(new U(s.lineNumber,s.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);if(!n){const c=e.model.getLineCount();let d=o.lineNumber+1,u=1;return d>c&&(d=c,u=e.model.getLineMaxColumn(d)),Ht.fromModelState(new hr(new D(o.lineNumber,1,d,u),2,0,new U(d,u),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(o.lineNumber<l)return Ht.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(o.lineNumber>l){const c=e.getLineCount();let d=a.lineNumber+1,u=1;return d>c&&(d=c,u=e.getLineMaxColumn(d)),Ht.fromViewState(t.viewState.move(!0,d,u,0))}else{const c=t.modelState.selectionStart.getEndPosition();return Ht.fromModelState(t.modelState.move(!0,c.lineNumber,c.column,0))}}static word(e,t,n,r){const s=e.model.validatePosition(r);return Ht.fromModelState(Yt.word(e.cursorConfig,e.model,t.modelState,n,s))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new Ht(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,r=t.viewState.position.column;return Ht.fromViewState(new hr(new D(n,r,n,r),0,0,new U(n,r),0))}static moveTo(e,t,n,r,s){if(n){if(t.modelState.selectionStartKind===1)return this.word(e,t,n,r);if(t.modelState.selectionStartKind===2)return this.line(e,t,n,r,s)}const o=e.model.validatePosition(r),a=s?e.coordinatesConverter.validateViewPosition(new U(s.lineNumber,s.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);return Ht.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,r,s,o){switch(n){case 0:return o===4?this._moveHalfLineLeft(e,t,r):this._moveLeft(e,t,r,s);case 1:return o===4?this._moveHalfLineRight(e,t,r):this._moveRight(e,t,r,s);case 2:return o===2?this._moveUpByViewLines(e,t,r,s):this._moveUpByModelLines(e,t,r,s);case 3:return o===2?this._moveDownByViewLines(e,t,r,s):this._moveDownByModelLines(e,t,r,s);case 4:return o===2?t.map(a=>Ht.fromViewState(rn.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,r))):t.map(a=>Ht.fromModelState(rn.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,r)));case 5:return o===2?t.map(a=>Ht.fromViewState(rn.moveToNextBlankLine(e.cursorConfig,e,a.viewState,r))):t.map(a=>Ht.fromModelState(rn.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,r)));case 6:return this._moveToViewMinColumn(e,t,r);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,r);case 8:return this._moveToViewCenterColumn(e,t,r);case 9:return this._moveToViewMaxColumn(e,t,r);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,r);default:return null}}static viewportMove(e,t,n,r,s){const o=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(o);switch(n){case 11:{const l=this._firstLineNumberInRange(e.model,a,s),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],r,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,s),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],r,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],r,l,c)]}case 14:{const l=[];for(let c=0,d=t.length;c<d;c++){const u=t[c];l[c]=this.findPositionInViewportIfOutside(e,u,o,r)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,n,r){const s=t.viewState.position.lineNumber;if(n.startLineNumber<=s&&s<=n.endLineNumber-1)return new Ht(t.modelState,t.viewState);{let o;s>n.endLineNumber-1?o=n.endLineNumber-1:s<n.startLineNumber?o=n.startLineNumber:o=s;const a=rn.vertical(e.cursorConfig,e,s,t.viewState.position.column,t.viewState.leftoverVisibleColumns,o,!1);return Ht.fromViewState(t.viewState.move(r,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let r=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(r)&&r++,Math.min(t.endLineNumber,r+n-1)}static _lastLineNumberInRange(e,t,n){let r=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(r)&&r++,Math.max(r,t.endLineNumber-n+1)}static _moveLeft(e,t,n,r){return t.map(s=>Ht.fromViewState(rn.moveLeft(e.cursorConfig,e,s.viewState,n,r)))}static _moveHalfLineLeft(e,t,n){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);r[s]=Ht.fromViewState(rn.moveLeft(e.cursorConfig,e,a.viewState,n,c))}return r}static _moveRight(e,t,n,r){return t.map(s=>Ht.fromViewState(rn.moveRight(e.cursorConfig,e,s.viewState,n,r)))}static _moveHalfLineRight(e,t,n){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);r[s]=Ht.fromViewState(rn.moveRight(e.cursorConfig,e,a.viewState,n,c))}return r}static _moveDownByViewLines(e,t,n,r){const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=Ht.fromViewState(rn.moveDown(e.cursorConfig,e,l.viewState,n,r))}return s}static _moveDownByModelLines(e,t,n,r){const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=Ht.fromModelState(rn.moveDown(e.cursorConfig,e.model,l.modelState,n,r))}return s}static _moveUpByViewLines(e,t,n,r){const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=Ht.fromViewState(rn.moveUp(e.cursorConfig,e,l.viewState,n,r))}return s}static _moveUpByModelLines(e,t,n,r){const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=Ht.fromModelState(rn.moveUp(e.cursorConfig,e.model,l.modelState,n,r))}return s}static _moveToViewPosition(e,t,n,r,s){return Ht.fromViewState(t.viewState.move(n,r,s,0))}static _moveToModelPosition(e,t,n,r,s){return Ht.fromModelState(t.modelState.move(n,r,s,0))}static _moveToViewMinColumn(e,t,n){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);r[s]=this._moveToViewPosition(e,a,n,l,c)}return r}static _moveToViewFirstNonWhitespaceColumn(e,t,n){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);r[s]=this._moveToViewPosition(e,a,n,l,c)}return r}static _moveToViewCenterColumn(e,t,n){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);r[s]=this._moveToViewPosition(e,a,n,l,c)}return r}static _moveToViewMaxColumn(e,t,n){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);r[s]=this._moveToViewPosition(e,a,n,l,c)}return r}static _moveToViewLastNonWhitespaceColumn(e,t,n){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);r[s]=this._moveToViewPosition(e,a,n,l,c)}return r}}var KT;(function(i){const e=function(n){if(!gs(n))return!1;const r=n;return!(!bs(r.to)||!Zs(r.select)&&!Iq(r.select)||!Zs(r.by)&&!bs(r.by)||!Zs(r.value)&&!Oh(r.value))};i.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},i.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(n){if(!n.to)return null;let r;switch(n.to){case i.RawDirection.Left:r=0;break;case i.RawDirection.Right:r=1;break;case i.RawDirection.Up:r=2;break;case i.RawDirection.Down:r=3;break;case i.RawDirection.PrevBlankLine:r=4;break;case i.RawDirection.NextBlankLine:r=5;break;case i.RawDirection.WrappedLineStart:r=6;break;case i.RawDirection.WrappedLineFirstNonWhitespaceCharacter:r=7;break;case i.RawDirection.WrappedLineColumnCenter:r=8;break;case i.RawDirection.WrappedLineEnd:r=9;break;case i.RawDirection.WrappedLineLastNonWhitespaceCharacter:r=10;break;case i.RawDirection.ViewPortTop:r=11;break;case i.RawDirection.ViewPortBottom:r=13;break;case i.RawDirection.ViewPortCenter:r=12;break;case i.RawDirection.ViewPortIfOutside:r=14;break;default:return null}let s=0;switch(n.by){case i.RawUnit.Line:s=1;break;case i.RawUnit.WrappedLine:s=2;break;case i.RawUnit.Character:s=3;break;case i.RawUnit.HalfLine:s=4;break}return{direction:r,unit:s,select:!!n.select,value:n.value||1}}i.parse=t})(KT||(KT={}));function y_(i,e,t,n){const r=f_(e,t.startLineNumber,t.startColumn),s=n.getLanguageConfiguration(r.languageId);if(!s)return null;const o=r.getLineContent(),a=o.substr(0,t.startColumn-1-r.firstCharOffset);let l;t.isEmpty()?l=o.substr(t.startColumn-1-r.firstCharOffset):l=f_(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-r.firstCharOffset);let c="";if(t.startLineNumber>1&&r.firstCharOffset===0){const m=f_(e,t.startLineNumber-1);m.languageId===r.languageId&&(c=m.getLineContent())}const d=s.onEnter(i,c,a,l);if(!d)return null;const u=d.indentAction;let h=d.appendText;const f=d.removeText||0;h?u===ki.Indent&&(h="	"+h):u===ki.Indent||u===ki.IndentOutdent?h="	":h="";let g=nZ(e,t.startLineNumber,t.startColumn);return f&&(g=g.substring(0,g.length-f)),{indentAction:u,appendText:h,removeText:f,indentation:g}}var m2e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},_2e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},xx;const hE=Object.create(null);function If(i,e){if(e<=0)return"";hE[i]||(hE[i]=["",i]);const t=hE[i];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+i;return t[e]}let Xo=xx=class{static unshiftIndent(e,t,n,r,s){const o=Wi.visibleColumnFromColumn(e,t,n);if(s){const a=If(" ",r),c=Wi.prevIndentTabStop(o,r)/r;return If(a,c)}else{const a="	",c=Wi.prevRenderTabStop(o,n)/n;return If(a,c)}}static shiftIndent(e,t,n,r,s){const o=Wi.visibleColumnFromColumn(e,t,n);if(s){const a=If(" ",r),c=Wi.nextIndentTabStop(o,r)/r;return If(a,c)}else{const a="	",c=Wi.nextRenderTabStop(o,n)/n;return If(a,c)}}constructor(e,t,n){this._languageConfigurationService=n,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){const n=this._selection.startLineNumber;let r=this._selection.endLineNumber;this._selection.endColumn===1&&n!==r&&(r=r-1);const{tabSize:s,indentSize:o,insertSpaces:a}=this._opts,l=n===r;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,d=0;for(let u=n;u<=r;u++,c=d){d=0;const h=e.getLineContent(u);let f=ns(h);if(this._opts.isUnshift&&(h.length===0||f===0)||!l&&!this._opts.isUnshift&&h.length===0)continue;if(f===-1&&(f=h.length),u>1&&Wi.visibleColumnFromColumn(h,f+1,s)%o!==0&&e.tokenization.isCheapToTokenize(u-1)){const y=y_(this._opts.autoIndent,e,new D(u-1,e.getLineMaxColumn(u-1),u-1,e.getLineMaxColumn(u-1)),this._languageConfigurationService);if(y){if(d=c,y.appendText)for(let b=0,v=y.appendText.length;b<v&&d<o&&y.appendText.charCodeAt(b)===32;b++)d++;y.removeText&&(d=Math.max(0,d-y.removeText));for(let b=0;b<d&&!(f===0||h.charCodeAt(f-1)!==32);b++)f--}}if(this._opts.isUnshift&&f===0)continue;let g;this._opts.isUnshift?g=xx.unshiftIndent(h,f+1,s,o,a):g=xx.shiftIndent(h,f+1,s,o,a),this._addEditOperation(t,new D(u,1,u,f+1),g),u===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=f+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?If(" ",o):"	";for(let d=n;d<=r;d++){const u=e.getLineContent(d);let h=ns(u);if(!(this._opts.isUnshift&&(u.length===0||h===0))&&!(!l&&!this._opts.isUnshift&&u.length===0)&&(h===-1&&(h=u.length),!(this._opts.isUnshift&&h===0)))if(this._opts.isUnshift){h=Math.min(h,o);for(let f=0;f<h;f++)if(u.charCodeAt(f)===9){h=f+1;break}this._addEditOperation(t,new D(d,1,d,h+1),"")}else this._addEditOperation(t,new D(d,1,d,1),c),d===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const r=t.getInverseEditOperations()[0];return new Be(r.range.endLineNumber,r.range.endColumn,r.range.endLineNumber,r.range.endColumn)}const n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const r=this._selection.startColumn;return n.startColumn<=r?n:n.getDirection()===0?new Be(n.startLineNumber,r,n.endLineNumber,n.endColumn):new Be(n.endLineNumber,n.endColumn,n.startLineNumber,r)}return n}};Xo=xx=m2e([_2e(2,wn)],Xo);class b2e{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new D(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new D(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const n=t.getInverseEditOperations(),r=n[0].range,s=n[1].range;return new Be(r.endLineNumber,r.endColumn,s.endLineNumber,s.endColumn-this._charAfterSelection.length)}}class v2e{constructor(e,t,n){this._position=e,this._text=t,this._charAfter=n}getEditOperations(e,t){t.addTrackedEditOperation(new D(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return new Be(r.endLineNumber,r.startColumn,r.endLineNumber,r.endColumn-this._charAfter.length)}}function y2e(i,e,t){const n=i.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let r,s=-1;for(r=e-1;r>=1;r--){if(i.tokenization.getLanguageIdAtPosition(r,0)!==n)return s;const o=i.getLineContent(r);if(t.shouldIgnore(o)||/^\s+$/.test(o)||o===""){s=r;continue}return r}}return-1}function HD(i,e,t,n=!0,r){if(i<4)return null;const s=r.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!s)return null;if(t<=1)return{indentation:"",action:null};for(let l=t-1;l>0&&e.getLineContent(l)==="";l--)if(l===1)return{indentation:"",action:null};const o=y2e(e,t,s);if(o<0)return null;if(o<1)return{indentation:"",action:null};const a=e.getLineContent(o);if(s.shouldIncrease(a)||s.shouldIndentNextLine(a))return{indentation:pn(a),action:ki.Indent,line:o};if(s.shouldDecrease(a))return{indentation:pn(a),action:null,line:o};{if(o===1)return{indentation:pn(e.getLineContent(o)),action:null,line:o};const l=o-1,c=s.getIndentMetadata(e.getLineContent(l));if(!(c&3)&&c&4){let d=0;for(let u=l-1;u>0;u--)if(!s.shouldIndentNextLine(e.getLineContent(u))){d=u;break}return{indentation:pn(e.getLineContent(d+1)),action:null,line:d+1}}if(n)return{indentation:pn(e.getLineContent(o)),action:null,line:o};for(let d=o;d>0;d--){const u=e.getLineContent(d);if(s.shouldIncrease(u))return{indentation:pn(u),action:ki.Indent,line:d};if(s.shouldIndentNextLine(u)){let h=0;for(let f=d-1;f>0;f--)if(!s.shouldIndentNextLine(e.getLineContent(d))){h=f;break}return{indentation:pn(e.getLineContent(h+1)),action:null,line:h+1}}else if(s.shouldDecrease(u))return{indentation:pn(u),action:null,line:d}}return{indentation:pn(e.getLineContent(1)),action:null,line:1}}}function Bv(i,e,t,n,r,s){if(i<4)return null;const o=s.getLanguageConfiguration(t);if(!o)return null;const a=s.getLanguageConfiguration(t).indentRulesSupport;if(!a)return null;const l=HD(i,e,n,void 0,s),c=e.getLineContent(n);if(l){const d=l.line;if(d!==void 0){let u=!0;for(let h=d;h<n-1;h++)if(!/^\s*$/.test(e.getLineContent(h))){u=!1;break}if(u){const h=o.onEnter(i,"",e.getLineContent(d),"");if(h){let f=pn(e.getLineContent(d));return h.removeText&&(f=f.substring(0,f.length-h.removeText)),h.indentAction===ki.Indent||h.indentAction===ki.IndentOutdent?f=r.shiftIndent(f):h.indentAction===ki.Outdent&&(f=r.unshiftIndent(f)),a.shouldDecrease(c)&&(f=r.unshiftIndent(f)),h.appendText&&(f+=h.appendText),pn(f)}}}return a.shouldDecrease(c)?l.action===ki.Indent?l.indentation:r.unshiftIndent(l.indentation):l.action===ki.Indent?r.shiftIndent(l.indentation):l.indentation}return null}function C2e(i,e,t,n,r){if(i<4)return null;e.tokenization.forceTokenization(t.startLineNumber);const s=e.tokenization.getLineTokens(t.startLineNumber),o=kD(s,t.startColumn-1),a=o.getLineContent();let l=!1,c;o.firstCharOffset>0&&s.getLanguageId(0)!==o.languageId?(l=!0,c=a.substr(0,t.startColumn-1-o.firstCharOffset)):c=s.getLineContent().substring(0,t.startColumn-1);let d;t.isEmpty()?d=a.substr(t.startColumn-1-o.firstCharOffset):d=f_(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-o.firstCharOffset);const u=r.getLanguageConfiguration(o.languageId).indentRulesSupport;if(!u)return null;const h=c,f=pn(c),g={tokenization:{getLineTokens:v=>e.tokenization.getLineTokens(v),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(v,C)=>e.getLanguageIdAtPosition(v,C)},getLineContent:v=>v===t.startLineNumber?h:e.getLineContent(v)},m=pn(s.getLineContent()),y=HD(i,g,t.startLineNumber+1,void 0,r);if(!y){const v=l?m:f;return{beforeEnter:v,afterEnter:v}}let b=l?m:y.indentation;return y.action===ki.Indent&&(b=n.shiftIndent(b)),u.shouldDecrease(d)&&(b=n.unshiftIndent(b)),{beforeEnter:l?m:f,afterEnter:b}}function w2e(i,e,t,n,r,s){if(i<4)return null;const o=f_(e,t.startLineNumber,t.startColumn);if(o.firstCharOffset)return null;const a=s.getLanguageConfiguration(o.languageId).indentRulesSupport;if(!a)return null;const l=o.getLineContent(),c=l.substr(0,t.startColumn-1-o.firstCharOffset);let d;if(t.isEmpty()?d=l.substr(t.startColumn-1-o.firstCharOffset):d=f_(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-o.firstCharOffset),!a.shouldDecrease(c+d)&&a.shouldDecrease(c+n+d)){const u=HD(i,e,t.startLineNumber,!1,s);if(!u)return null;let h=u.indentation;return u.action!==ki.Indent&&(h=r.unshiftIndent(h)),h}return null}function ZZ(i,e,t){const n=t.getLanguageConfiguration(i.getLanguageId()).indentRulesSupport;return!n||e<1||e>i.getLineCount()?null:n.getIndentMetadata(i.getLineContent(e))}class $n{static indent(e,t,n){if(t===null||n===null)return[];const r=[];for(let s=0,o=n.length;s<o;s++)r[s]=new Xo(n[s],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return r}static outdent(e,t,n){const r=[];for(let s=0,o=n.length;s<o;s++)r[s]=new Xo(n[s],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return r}static shiftIndent(e,t,n){return n=n||1,Xo.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,n){return n=n||1,Xo.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,n,r){const s=[];for(let o=0,a=n.length;o<a;o++)s[o]=new Sr(n[o],r[o]);return new Ds(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,r,s){const o=[];for(let a=0,l=n.length;a<l;a++){const c=n[a],d=c.getPosition();if(s&&!c.isEmpty()&&(s=!1),s&&r.indexOf(`
`)!==r.length-1&&(s=!1),s){const u=new D(d.lineNumber,1,d.lineNumber,1);o[a]=new v5(u,r,c,!0)}else o[a]=new Sr(c,r)}return new Ds(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,n,r,s){if(r||t.length===1)return null;if(s&&s.length===t.length)return s;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substr(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substr(0,n.length-1));const o=Kc(n);if(o.length===t.length)return o}return null}static paste(e,t,n,r,s,o){const a=this._distributePasteToCursors(e,n,r,s,o);return a?(n=n.sort(D.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,r,s)}static _goodIndentForLine(e,t,n){let r=null,s="";const o=HD(e.autoIndent,t,n,!1,e.languageConfigurationService);if(o)r=o.action,s=o.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){const d=t.getLineContent(a);if(Dl(d)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=y_(e.autoIndent,t,new D(a,l,a,l),e.languageConfigurationService);c&&(s=c.indentation+c.appendText)}return r&&(r===ki.Indent&&(s=$n.shiftIndent(e,s)),r===ki.Outdent&&(s=$n.unshiftIndent(e,s)),s=e.normalizeIndentation(s)),s||null}static _replaceJumpToNextIndent(e,t,n,r){let s="";const o=n.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,o),l=e.indentSize,c=l-a%l;for(let d=0;d<c;d++)s+=" "}else s="	";return new Sr(n,s,r)}static tab(e,t,n){const r=[];for(let s=0,o=n.length;s<o;s++){const a=n[s];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";const d=e.normalizeIndentation(c);if(!l.startsWith(d)){r[s]=new Sr(new D(a.startLineNumber,1,a.startLineNumber,l.length+1),d,!0);continue}}r[s]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){r[s]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}r[s]=new Xo(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return r}static compositionType(e,t,n,r,s,o,a,l){const c=r.map(d=>this._compositionType(n,d,s,o,a,l));return new Ds(4,c,{shouldPushStackElementBefore:Zw(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,r,s,o){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-r),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+s),d=new D(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(d)===n&&o===0?null:new Sx(d,n,0,o)}static _typeCommand(e,t,n){return n?new qw(e,t,!0):new Sr(e,t,!0)}static _enter(e,t,n,r){if(e.autoIndent===0)return $n._typeCommand(r,`
`,n);if(!t.tokenization.isCheapToTokenize(r.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(r.startLineNumber),c=pn(l).substring(0,r.startColumn-1);return $n._typeCommand(r,`
`+e.normalizeIndentation(c),n)}const s=y_(e.autoIndent,t,r,e.languageConfigurationService);if(s){if(s.indentAction===ki.None)return $n._typeCommand(r,`
`+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===ki.Indent)return $n._typeCommand(r,`
`+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===ki.IndentOutdent){const l=e.normalizeIndentation(s.indentation),c=e.normalizeIndentation(s.indentation+s.appendText),d=`
`+c+`
`+l;return n?new qw(r,d,!0):new Sx(r,d,-1,c.length-l.length,!0)}else if(s.indentAction===ki.Outdent){const l=$n.unshiftIndent(e,s.indentation);return $n._typeCommand(r,`
`+e.normalizeIndentation(l+s.appendText),n)}}const o=t.getLineContent(r.startLineNumber),a=pn(o).substring(0,r.startColumn-1);if(e.autoIndent>=4){const l=C2e(e.autoIndent,t,r,{unshiftIndent:c=>$n.unshiftIndent(e,c),shiftIndent:c=>$n.shiftIndent(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,r.getEndPosition());const d=r.endColumn,u=t.getLineContent(r.endLineNumber),h=ns(u);if(h>=0?r=r.setEndPosition(r.endLineNumber,Math.max(r.endColumn,h+1)):r=r.setEndPosition(r.endLineNumber,t.getLineMaxColumn(r.endLineNumber)),n)return new qw(r,`
`+e.normalizeIndentation(l.afterEnter),!0);{let f=0;return d<=h+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),f=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new Sx(r,`
`+e.normalizeIndentation(l.afterEnter),0,f,!0)}}}return $n._typeCommand(r,`
`+e.normalizeIndentation(a),n)}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let r=0,s=n.length;r<s;r++)if(!t.tokenization.isCheapToTokenize(n[r].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,n,r){const s=nZ(t,n.startLineNumber,n.startColumn),o=w2e(e.autoIndent,t,n,r,{shiftIndent:a=>$n.shiftIndent(e,a),unshiftIndent:a=>$n.unshiftIndent(e,a)},e.languageConfigurationService);if(o===null)return null;if(o!==e.normalizeIndentation(s)){const a=t.getLineFirstNonWhitespaceColumn(n.startLineNumber);return a===0?$n._typeCommand(new D(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(o)+r,!1):$n._typeCommand(new D(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(o)+t.getLineContent(n.startLineNumber).substring(a-1,n.startColumn-1)+r,!1)}return null}static _isAutoClosingOvertype(e,t,n,r,s){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(s))return!1;for(let o=0,a=n.length;o<a;o++){const l=n[o];if(!l.isEmpty())return!1;const c=l.getPosition(),d=t.getLineContent(c.lineNumber);if(d.charAt(c.column-1)!==s)return!1;const h=Vu(s);if((c.column>2?d.charCodeAt(c.column-2):0)===92&&h)return!1;if(e.autoClosingOvertype==="auto"){let g=!1;for(let m=0,y=r.length;m<y;m++){const b=r[m];if(c.lineNumber===b.startLineNumber&&c.column===b.startColumn){g=!0;break}}if(!g)return!1}}return!0}static _runAutoClosingOvertype(e,t,n,r,s){const o=[];for(let a=0,l=r.length;a<l;a++){const d=r[a].getPosition(),u=new D(d.lineNumber,d.column,d.lineNumber,d.column+1);o[a]=new Sr(u,s)}return new Ds(4,o,{shouldPushStackElementBefore:Zw(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),r=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],s=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],o=r.some(l=>t.startsWith(l.open)),a=s.some(l=>t.startsWith(l.close));return!o&&a}static _findAutoClosingPairOpen(e,t,n,r){const s=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(r);if(!s)return null;let o=null;for(const a of s)if(o===null||a.open.length>o.open.length){let l=!0;for(const c of n)if(t.getValueInRange(new D(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+r!==a.open){l=!1;break}l&&(o=a)}return o}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const n=t.close.charAt(t.close.length-1),r=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let s=null;for(const o of r)o.open!==t.open&&t.open.includes(o.open)&&t.close.endsWith(o.close)&&(!s||o.open.length>s.open.length)&&(s=o);return s}static _getAutoClosingPairClose(e,t,n,r,s){for(const g of n)if(!g.isEmpty())return null;const o=n.map(g=>{const m=g.getPosition();return s?{lineNumber:m.lineNumber,beforeColumn:m.column-r.length,afterColumn:m.column}:{lineNumber:m.lineNumber,beforeColumn:m.column,afterColumn:m.column}}),a=this._findAutoClosingPairOpen(e,t,o.map(g=>new U(g.lineNumber,g.beforeColumn)),r);if(!a)return null;let l,c;if(Vu(r)?(l=e.autoClosingQuotes,c=e.shouldAutoCloseBefore.quote):(e.blockCommentStartToken?a.open.includes(e.blockCommentStartToken):!1)?(l=e.autoClosingComments,c=e.shouldAutoCloseBefore.comment):(l=e.autoClosingBrackets,c=e.shouldAutoCloseBefore.bracket),l==="never")return null;const u=this._findContainedAutoClosingPair(e,a),h=u?u.close:"";let f=!0;for(const g of o){const{lineNumber:m,beforeColumn:y,afterColumn:b}=g,v=t.getLineContent(m),C=v.substring(0,y-1),w=v.substring(b-1);if(w.startsWith(h)||(f=!1),w.length>0){const I=w.charAt(0);if(!$n._isBeforeClosingBrace(e,w)&&!c(I))return null}if(a.open.length===1&&(r==="'"||r==='"')&&l!=="always"){const I=da(e.wordSeparators);if(C.length>0){const R=C.charCodeAt(C.length-1);if(I.get(R)===0)return null}}if(!t.tokenization.isCheapToTokenize(m))return null;t.tokenization.forceTokenization(m);const S=t.tokenization.getLineTokens(m),L=kD(S,y-1);if(!a.shouldAutoClose(L,y-L.firstCharOffset))return null;const T=a.findNeutralCharacter();if(T){const I=t.tokenization.getTokenTypeIfInsertingCharacter(m,y,T);if(!a.isOK(I))return null}}return f?a.close.substring(0,a.close.length-h.length):a.close}static _runAutoClosingOpenCharType(e,t,n,r,s,o,a){const l=[];for(let c=0,d=r.length;c<d;c++){const u=r[c];l[c]=new XZ(u,s,!o,a)}return new Ds(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return Vu(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,n,r){if(!$n._shouldSurroundChar(e,r)||!e.surroundingPairs.hasOwnProperty(r))return!1;const s=Vu(r);for(const o of n){if(o.isEmpty())return!1;let a=!0;for(let l=o.startLineNumber;l<=o.endLineNumber;l++){const c=t.getLineContent(l),d=l===o.startLineNumber?o.startColumn-1:0,u=l===o.endLineNumber?o.endColumn-1:c.length,h=c.substring(d,u);if(/[^ \t]/.test(h)){a=!1;break}}if(a)return!1;if(s&&o.startLineNumber===o.endLineNumber&&o.startColumn+1===o.endColumn){const l=t.getValueInRange(o);if(Vu(l))return!1}}return!0}static _runSurroundSelectionType(e,t,n,r,s){const o=[];for(let a=0,l=r.length;a<l;a++){const c=r[a],d=t.surroundingPairs[s];o[a]=new b2e(c,s,d)}return new Ds(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.tokenization.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,r,s){if(!t.electricChars.hasOwnProperty(s)||!r.isEmpty())return null;const o=r.getPosition();n.tokenization.forceTokenization(o.lineNumber);const a=n.tokenization.getLineTokens(o.lineNumber);let l;try{l=t.onElectricCharacter(s,a,o.column)}catch(c){return ut(c),null}if(!l)return null;if(l.matchOpenBracket){const c=(a.getLineContent()+s).lastIndexOf(l.matchOpenBracket)+1,d=n.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:o.lineNumber,column:c},500);if(d){if(d.startLineNumber===o.lineNumber)return null;const u=n.getLineContent(d.startLineNumber),h=pn(u),f=t.normalizeIndentation(h),g=n.getLineContent(o.lineNumber),m=n.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,y=g.substring(m-1,o.column-1),b=f+y+s,v=new D(o.lineNumber,1,o.lineNumber,o.column),C=new Sr(v,b);return new Ds(fE(b,e),[C],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,n,r,s,o){if(!r)return null;let a=null;for(const u of r)if(a===null)a=u.insertedText;else if(a!==u.insertedText)return null;if(!a||a.length!==1)return null;const l=a;let c=!1;for(const u of r)if(u.deletedText.length!==0){c=!0;break}if(c){if(!$n._shouldSurroundChar(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const u=Vu(l);for(const g of r)if(g.deletedSelectionStart!==0||g.deletedSelectionEnd!==g.deletedText.length||/^[ \t]+$/.test(g.deletedText)||u&&Vu(g.deletedText))return null;const h=[];for(const g of s){if(!g.isEmpty())return null;h.push(g.getPosition())}if(h.length!==r.length)return null;const f=[];for(let g=0,m=h.length;g<m;g++)f.push(new v2e(h[g],r[g].deletedText,t.surroundingPairs[l]));return new Ds(4,f,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(t,n,s,o,l)){const u=s.map(h=>new Sr(new D(h.positionLineNumber,h.positionColumn,h.positionLineNumber,h.positionColumn+1),"",!1));return new Ds(4,u,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const d=this._getAutoClosingPairClose(t,n,s,l,!0);return d!==null?this._runAutoClosingOpenCharType(e,t,n,s,l,!0,d):null}static typeWithInterceptors(e,t,n,r,s,o,a){if(!e&&a===`
`){const d=[];for(let u=0,h=s.length;u<h;u++)d[u]=$n._enter(n,r,!1,s[u]);return new Ds(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(n,r,s)){const d=[];let u=!1;for(let h=0,f=s.length;h<f;h++)if(d[h]=this._runAutoIndentType(n,r,s[h],a),!d[h]){u=!0;break}if(!u)return new Ds(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(n,r,s,o,a))return this._runAutoClosingOvertype(t,n,r,s,a);if(!e){const d=this._getAutoClosingPairClose(n,r,s,a,!1);if(d)return this._runAutoClosingOpenCharType(t,n,r,s,a,!1,d)}if(!e&&this._isSurroundSelectionType(n,r,s,a))return this._runSurroundSelectionType(t,n,r,s,a);if(!e&&this._isTypeInterceptorElectricChar(n,r,s)){const d=this._typeInterceptorElectricChar(t,n,r,s[0],a);if(d)return d}const l=[];for(let d=0,u=s.length;d<u;d++)l[d]=new Sr(s[d],a);const c=fE(a,t);return new Ds(c,l,{shouldPushStackElementBefore:Zw(t,c),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,n,r,s){const o=[];for(let l=0,c=r.length;l<c;l++)o[l]=new Sr(r[l],s);const a=fE(s,e);return new Ds(a,o,{shouldPushStackElementBefore:Zw(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];const r=[];for(let s=0,o=n.length;s<o;s++){let a=n[s].positionLineNumber;if(a===1)r[s]=new qw(new D(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);r[s]=this._enter(e,t,!1,new D(a,l,a,l))}}return r}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];const r=[];for(let s=0,o=n.length;s<o;s++){const a=n[s].positionLineNumber,l=t.getLineMaxColumn(a);r[s]=this._enter(e,t,!1,new D(a,l,a,l))}return r}static lineBreakInsert(e,t,n){const r=[];for(let s=0,o=n.length;s<o;s++)r[s]=this._enter(e,t,!0,n[s]);return r}}class XZ extends Sx{constructor(e,t,n,r){super(e,(n?t:"")+r,0,-r.length),this._openCharacter=t,this._closeCharacter=r,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new D(r.startLineNumber,r.endColumn-this._closeCharacter.length,r.endLineNumber,r.endColumn),this.enclosingRange=new D(r.startLineNumber,r.endColumn-this._openCharacter.length-this._closeCharacter.length,r.endLineNumber,r.endColumn),super.computeCursorState(e,t)}}class S2e{constructor(e,t,n,r,s,o){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=n,this.insertedText=r,this.insertedSelectionStart=s,this.insertedSelectionEnd=o}}function fE(i,e){return i===" "?e===5||e===6?6:5:4}function Zw(i,e){return z6(i)&&!z6(e)?!0:i===5?!1:j6(i)!==j6(e)}function j6(i){return i===6||i===5?"space":i}function z6(i){return i===4||i===5||i===6}var N;(function(i){i.editorSimpleInput=new Ne("editorSimpleInput",!1,!0),i.editorTextFocus=new Ne("editorTextFocus",!1,p("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),i.focus=new Ne("editorFocus",!1,p("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),i.textInputFocus=new Ne("textInputFocus",!1,p("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),i.readOnly=new Ne("editorReadonly",!1,p("editorReadonly","Whether the editor is read-only")),i.inDiffEditor=new Ne("inDiffEditor",!1,p("inDiffEditor","Whether the context is a diff editor")),i.isEmbeddedDiffEditor=new Ne("isEmbeddedDiffEditor",!1,p("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),i.comparingMovedCode=new Ne("comparingMovedCode",!1,p("comparingMovedCode","Whether a moved code block is selected for comparison")),i.accessibleDiffViewerVisible=new Ne("accessibleDiffViewerVisible",!1,p("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),i.diffEditorRenderSideBySideInlineBreakpointReached=new Ne("diffEditorRenderSideBySideInlineBreakpointReached",!1,p("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),i.columnSelection=new Ne("editorColumnSelection",!1,p("editorColumnSelection","Whether `editor.columnSelection` is enabled")),i.writable=i.readOnly.toNegated(),i.hasNonEmptySelection=new Ne("editorHasSelection",!1,p("editorHasSelection","Whether the editor has text selected")),i.hasOnlyEmptySelection=i.hasNonEmptySelection.toNegated(),i.hasMultipleSelections=new Ne("editorHasMultipleSelections",!1,p("editorHasMultipleSelections","Whether the editor has multiple selections")),i.hasSingleSelection=i.hasMultipleSelections.toNegated(),i.tabMovesFocus=new Ne("editorTabMovesFocus",!1,p("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),i.tabDoesNotMoveFocus=i.tabMovesFocus.toNegated(),i.isInWalkThroughSnippet=new Ne("isInEmbeddedEditor",!1,!0),i.canUndo=new Ne("canUndo",!1,!0),i.canRedo=new Ne("canRedo",!1,!0),i.hoverVisible=new Ne("editorHoverVisible",!1,p("editorHoverVisible","Whether the editor hover is visible")),i.hoverFocused=new Ne("editorHoverFocused",!1,p("editorHoverFocused","Whether the editor hover is focused")),i.stickyScrollFocused=new Ne("stickyScrollFocused",!1,p("stickyScrollFocused","Whether the sticky scroll is focused")),i.stickyScrollVisible=new Ne("stickyScrollVisible",!1,p("stickyScrollVisible","Whether the sticky scroll is visible")),i.standaloneColorPickerVisible=new Ne("standaloneColorPickerVisible",!1,p("standaloneColorPickerVisible","Whether the standalone color picker is visible")),i.standaloneColorPickerFocused=new Ne("standaloneColorPickerFocused",!1,p("standaloneColorPickerFocused","Whether the standalone color picker is focused")),i.inCompositeEditor=new Ne("inCompositeEditor",void 0,p("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),i.notInCompositeEditor=i.inCompositeEditor.toNegated(),i.languageId=new Ne("editorLangId","",p("editorLangId","The language identifier of the editor")),i.hasCompletionItemProvider=new Ne("editorHasCompletionItemProvider",!1,p("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),i.hasCodeActionsProvider=new Ne("editorHasCodeActionsProvider",!1,p("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),i.hasCodeLensProvider=new Ne("editorHasCodeLensProvider",!1,p("editorHasCodeLensProvider","Whether the editor has a code lens provider")),i.hasDefinitionProvider=new Ne("editorHasDefinitionProvider",!1,p("editorHasDefinitionProvider","Whether the editor has a definition provider")),i.hasDeclarationProvider=new Ne("editorHasDeclarationProvider",!1,p("editorHasDeclarationProvider","Whether the editor has a declaration provider")),i.hasImplementationProvider=new Ne("editorHasImplementationProvider",!1,p("editorHasImplementationProvider","Whether the editor has an implementation provider")),i.hasTypeDefinitionProvider=new Ne("editorHasTypeDefinitionProvider",!1,p("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),i.hasHoverProvider=new Ne("editorHasHoverProvider",!1,p("editorHasHoverProvider","Whether the editor has a hover provider")),i.hasDocumentHighlightProvider=new Ne("editorHasDocumentHighlightProvider",!1,p("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),i.hasDocumentSymbolProvider=new Ne("editorHasDocumentSymbolProvider",!1,p("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),i.hasReferenceProvider=new Ne("editorHasReferenceProvider",!1,p("editorHasReferenceProvider","Whether the editor has a reference provider")),i.hasRenameProvider=new Ne("editorHasRenameProvider",!1,p("editorHasRenameProvider","Whether the editor has a rename provider")),i.hasSignatureHelpProvider=new Ne("editorHasSignatureHelpProvider",!1,p("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),i.hasInlayHintsProvider=new Ne("editorHasInlayHintsProvider",!1,p("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),i.hasDocumentFormattingProvider=new Ne("editorHasDocumentFormattingProvider",!1,p("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),i.hasDocumentSelectionFormattingProvider=new Ne("editorHasDocumentSelectionFormattingProvider",!1,p("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),i.hasMultipleDocumentFormattingProvider=new Ne("editorHasMultipleDocumentFormattingProvider",!1,p("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),i.hasMultipleDocumentSelectionFormattingProvider=new Ne("editorHasMultipleDocumentSelectionFormattingProvider",!1,p("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(N||(N={}));const Gt=0;class ni extends sr{runEditorCommand(e,t,n){const r=t._getViewModel();r&&this.runCoreEditorCommand(r,n||{})}}var Cr;(function(i){const e=function(n){if(!gs(n))return!1;const r=n;return!(!bs(r.to)||!Zs(r.by)&&!bs(r.by)||!Zs(r.value)&&!Oh(r.value)||!Zs(r.revealCursor)&&!Iq(r.revealCursor))};i.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},i.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function t(n){let r;switch(n.to){case i.RawDirection.Up:r=1;break;case i.RawDirection.Right:r=2;break;case i.RawDirection.Down:r=3;break;case i.RawDirection.Left:r=4;break;default:return null}let s;switch(n.by){case i.RawUnit.Line:s=1;break;case i.RawUnit.WrappedLine:s=2;break;case i.RawUnit.Page:s=3;break;case i.RawUnit.HalfPage:s=4;break;case i.RawUnit.Editor:s=5;break;case i.RawUnit.Column:s=6;break;default:s=2}const o=Math.floor(n.value||1),a=!!n.revealCursor;return{direction:r,unit:s,value:o,revealCursor:a,select:!!n.select}}i.parse=t})(Cr||(Cr={}));var Km;(function(i){const e=function(t){if(!gs(t))return!1;const n=t;return!(!Oh(n.lineNumber)&&!bs(n.lineNumber)||!Zs(n.at)&&!bs(n.at))};i.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},i.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(Km||(Km={}));class JA{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{const r=t.get(Jt).getFocusedCodeEditor();return r&&r.hasTextFocus()?this._runEditorCommand(t,r,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{const r=Ma();return r&&["input","textarea"].indexOf(r.tagName.toLowerCase())>=0?(this.runDOMCommand(r),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{const r=t.get(Jt).getActiveCodeEditor();return r?(r.focus(),this._runEditorCommand(t,r,n)):!1})}_runEditorCommand(e,t,n){const r=this.runEditorCommand(e,t,n);return r||!0}}var Zi;(function(i){class e extends ni{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,C){if(!C.position)return;v.model.pushStackElement(),v.setCursorStates(C.source,3,[ar.moveTo(v,v.getPrimaryCursorState(),this._inSelectionMode,C.position,C.viewPosition)])&&C.revealType!==2&&v.revealPrimaryCursor(C.source,!0,!0)}}i.MoveTo=ye(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),i.MoveToSelect=ye(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends ni{runCoreEditorCommand(v,C){v.model.pushStackElement();const w=this._getColumnSelectResult(v,v.getPrimaryCursorState(),v.getCursorColumnSelectData(),C);w!==null&&(v.setCursorStates(C.source,3,w.viewStates.map(S=>Ht.fromViewState(S))),v.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:w.fromLineNumber,fromViewVisualColumn:w.fromVisualColumn,toViewLineNumber:w.toLineNumber,toViewVisualColumn:w.toVisualColumn}),w.reversed?v.revealTopMostCursor(C.source):v.revealBottomMostCursor(C.source))}}i.ColumnSelect=ye(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(b,v,C,w){if(typeof w.position>"u"||typeof w.viewPosition>"u"||typeof w.mouseColumn>"u")return null;const S=b.model.validatePosition(w.position),L=b.coordinatesConverter.validateViewPosition(new U(w.viewPosition.lineNumber,w.viewPosition.column),S),T=w.doColumnSelect?C.fromViewLineNumber:L.lineNumber,I=w.doColumnSelect?C.fromViewVisualColumn:w.mouseColumn-1;return tg.columnSelect(b.cursorConfig,b,T,I,L.lineNumber,w.mouseColumn-1)}}),i.CursorColumnSelectLeft=ye(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(b,v,C,w){return tg.columnSelectLeft(b.cursorConfig,b,C)}}),i.CursorColumnSelectRight=ye(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(b,v,C,w){return tg.columnSelectRight(b.cursorConfig,b,C)}});class n extends t{constructor(v){super(v),this._isPaged=v.isPaged}_getColumnSelectResult(v,C,w,S){return tg.columnSelectUp(v.cursorConfig,v,w,this._isPaged)}}i.CursorColumnSelectUp=ye(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:3600,linux:{primary:0}}})),i.CursorColumnSelectPageUp=ye(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:3595,linux:{primary:0}}}));class r extends t{constructor(v){super(v),this._isPaged=v.isPaged}_getColumnSelectResult(v,C,w,S){return tg.columnSelectDown(v.cursorConfig,v,w,this._isPaged)}}i.CursorColumnSelectDown=ye(new r({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:3602,linux:{primary:0}}})),i.CursorColumnSelectPageDown=ye(new r({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:3596,linux:{primary:0}}}));class s extends ni{constructor(){super({id:"cursorMove",precondition:void 0,description:KT.description})}runCoreEditorCommand(v,C){const w=KT.parse(C);w&&this._runCursorMove(v,C.source,w)}_runCursorMove(v,C,w){v.model.pushStackElement(),v.setCursorStates(C,3,s._move(v,v.getCursorStates(),w)),v.revealPrimaryCursor(C,!0)}static _move(v,C,w){const S=w.select,L=w.value;switch(w.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return ar.simpleMove(v,C,w.direction,S,L,w.unit);case 11:case 13:case 12:case 14:return ar.viewportMove(v,C,w.direction,S,L);default:return null}}}i.CursorMoveImpl=s,i.CursorMove=ye(new s);class o extends ni{constructor(v){super(v),this._staticArgs=v.args}runCoreEditorCommand(v,C){let w=this._staticArgs;this._staticArgs.value===-1&&(w={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:C.pageSize||v.cursorConfig.pageSize}),v.model.pushStackElement(),v.setCursorStates(C.source,3,ar.simpleMove(v,v.getCursorStates(),w.direction,w.select,w.value,w.unit)),v.revealPrimaryCursor(C.source,!0)}}i.CursorLeft=ye(new o({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),i.CursorLeftSelect=ye(new o({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:1039}})),i.CursorRight=ye(new o({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),i.CursorRightSelect=ye(new o({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:1041}})),i.CursorUp=ye(new o({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),i.CursorUpSelect=ye(new o({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),i.CursorPageUp=ye(new o({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:11}})),i.CursorPageUpSelect=ye(new o({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:1035}})),i.CursorDown=ye(new o({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),i.CursorDownSelect=ye(new o({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),i.CursorPageDown=ye(new o({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:12}})),i.CursorPageDownSelect=ye(new o({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:1036}})),i.CreateCursor=ye(new class extends ni{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(b,v){if(!v.position)return;let C;v.wholeLine?C=ar.line(b,b.getPrimaryCursorState(),!1,v.position,v.viewPosition):C=ar.moveTo(b,b.getPrimaryCursorState(),!1,v.position,v.viewPosition);const w=b.getCursorStates();if(w.length>1){const S=C.modelState?C.modelState.position:null,L=C.viewState?C.viewState.position:null;for(let T=0,I=w.length;T<I;T++){const R=w[T];if(!(S&&!R.modelState.selection.containsPosition(S))&&!(L&&!R.viewState.selection.containsPosition(L))){w.splice(T,1),b.model.pushStackElement(),b.setCursorStates(v.source,3,w);return}}}w.push(C),b.model.pushStackElement(),b.setCursorStates(v.source,3,w)}}),i.LastCursorMoveToSelect=ye(new class extends ni{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(b,v){if(!v.position)return;const C=b.getLastAddedCursorIndex(),w=b.getCursorStates(),S=w.slice(0);S[C]=ar.moveTo(b,w[C],!0,v.position,v.viewPosition),b.model.pushStackElement(),b.setCursorStates(v.source,3,S)}});class a extends ni{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,C){v.model.pushStackElement(),v.setCursorStates(C.source,3,ar.moveToBeginningOfLine(v,v.getCursorStates(),this._inSelectionMode)),v.revealPrimaryCursor(C.source,!0)}}i.CursorHome=ye(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),i.CursorHomeSelect=ye(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends ni{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,C){v.model.pushStackElement(),v.setCursorStates(C.source,3,this._exec(v.getCursorStates())),v.revealPrimaryCursor(C.source,!0)}_exec(v){const C=[];for(let w=0,S=v.length;w<S;w++){const L=v[w],T=L.modelState.position.lineNumber;C[w]=Ht.fromModelState(L.modelState.move(this._inSelectionMode,T,1,0))}return C}}i.CursorLineStart=ye(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:0,mac:{primary:287}}})),i.CursorLineStartSelect=ye(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends ni{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,C){v.model.pushStackElement(),v.setCursorStates(C.source,3,ar.moveToEndOfLine(v,v.getCursorStates(),this._inSelectionMode,C.sticky||!1)),v.revealPrimaryCursor(C.source,!0)}}i.CursorEnd=ye(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Gt,kbExpr:N.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:p("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),i.CursorEndSelect=ye(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Gt,kbExpr:N.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:p("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class d extends ni{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,C){v.model.pushStackElement(),v.setCursorStates(C.source,3,this._exec(v,v.getCursorStates())),v.revealPrimaryCursor(C.source,!0)}_exec(v,C){const w=[];for(let S=0,L=C.length;S<L;S++){const T=C[S],I=T.modelState.position.lineNumber,R=v.model.getLineMaxColumn(I);w[S]=Ht.fromModelState(T.modelState.move(this._inSelectionMode,I,R,0))}return w}}i.CursorLineEnd=ye(new d({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:0,mac:{primary:291}}})),i.CursorLineEndSelect=ye(new d({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:0,mac:{primary:1315}}}));class u extends ni{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,C){v.model.pushStackElement(),v.setCursorStates(C.source,3,ar.moveToBeginningOfBuffer(v,v.getCursorStates(),this._inSelectionMode)),v.revealPrimaryCursor(C.source,!0)}}i.CursorTop=ye(new u({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:2062,mac:{primary:2064}}})),i.CursorTopSelect=ye(new u({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:3086,mac:{primary:3088}}}));class h extends ni{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,C){v.model.pushStackElement(),v.setCursorStates(C.source,3,ar.moveToEndOfBuffer(v,v.getCursorStates(),this._inSelectionMode)),v.revealPrimaryCursor(C.source,!0)}}i.CursorBottom=ye(new h({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:2061,mac:{primary:2066}}})),i.CursorBottomSelect=ye(new h({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:3085,mac:{primary:3090}}}));class f extends ni{constructor(){super({id:"editorScroll",precondition:void 0,description:Cr.description})}determineScrollMethod(v){const C=[6],w=[1,2,3,4,5,6],S=[4,2],L=[1,3];return C.includes(v.unit)&&S.includes(v.direction)?this._runHorizontalEditorScroll.bind(this):w.includes(v.unit)&&L.includes(v.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(v,C){const w=Cr.parse(C);if(!w)return;const S=this.determineScrollMethod(w);S&&S(v,C.source,w)}_runVerticalEditorScroll(v,C,w){const S=this._computeDesiredScrollTop(v,w);if(w.revealCursor){const L=v.getCompletelyVisibleViewRangeAtScrollTop(S);v.setCursorStates(C,3,[ar.findPositionInViewportIfOutside(v,v.getPrimaryCursorState(),L,w.select)])}v.viewLayout.setScrollPosition({scrollTop:S},0)}_computeDesiredScrollTop(v,C){if(C.unit===1){const L=v.viewLayout.getFutureViewport(),T=v.getCompletelyVisibleViewRangeAtScrollTop(L.top),I=v.coordinatesConverter.convertViewRangeToModelRange(T);let R;C.direction===1?R=Math.max(1,I.startLineNumber-C.value):R=Math.min(v.model.getLineCount(),I.startLineNumber+C.value);const B=v.coordinatesConverter.convertModelPositionToViewPosition(new U(R,1));return v.viewLayout.getVerticalOffsetForLineNumber(B.lineNumber)}if(C.unit===5){let L=0;return C.direction===3&&(L=v.model.getLineCount()-v.cursorConfig.pageSize),v.viewLayout.getVerticalOffsetForLineNumber(L)}let w;C.unit===3?w=v.cursorConfig.pageSize*C.value:C.unit===4?w=Math.round(v.cursorConfig.pageSize/2)*C.value:w=C.value;const S=(C.direction===1?-1:1)*w;return v.viewLayout.getCurrentScrollTop()+S*v.cursorConfig.lineHeight}_runHorizontalEditorScroll(v,C,w){const S=this._computeDesiredScrollLeft(v,w);v.viewLayout.setScrollPosition({scrollLeft:S},0)}_computeDesiredScrollLeft(v,C){const w=(C.direction===4?-1:1)*C.value;return v.viewLayout.getCurrentScrollLeft()+w*v.cursorConfig.typicalHalfwidthCharacterWidth}}i.EditorScrollImpl=f,i.EditorScroll=ye(new f),i.ScrollLineUp=ye(new class extends ni{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(b,v){i.EditorScroll.runCoreEditorCommand(b,{to:Cr.RawDirection.Up,by:Cr.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:v.source})}}),i.ScrollPageUp=ye(new class extends ni{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(b,v){i.EditorScroll.runCoreEditorCommand(b,{to:Cr.RawDirection.Up,by:Cr.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:v.source})}}),i.ScrollEditorTop=ye(new class extends ni{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus}})}runCoreEditorCommand(b,v){i.EditorScroll.runCoreEditorCommand(b,{to:Cr.RawDirection.Up,by:Cr.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:v.source})}}),i.ScrollLineDown=ye(new class extends ni{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(b,v){i.EditorScroll.runCoreEditorCommand(b,{to:Cr.RawDirection.Down,by:Cr.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:v.source})}}),i.ScrollPageDown=ye(new class extends ni{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(b,v){i.EditorScroll.runCoreEditorCommand(b,{to:Cr.RawDirection.Down,by:Cr.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:v.source})}}),i.ScrollEditorBottom=ye(new class extends ni{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus}})}runCoreEditorCommand(b,v){i.EditorScroll.runCoreEditorCommand(b,{to:Cr.RawDirection.Down,by:Cr.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:v.source})}}),i.ScrollLeft=ye(new class extends ni{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus}})}runCoreEditorCommand(b,v){i.EditorScroll.runCoreEditorCommand(b,{to:Cr.RawDirection.Left,by:Cr.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:v.source})}}),i.ScrollRight=ye(new class extends ni{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus}})}runCoreEditorCommand(b,v){i.EditorScroll.runCoreEditorCommand(b,{to:Cr.RawDirection.Right,by:Cr.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:v.source})}});class g extends ni{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,C){C.position&&(v.model.pushStackElement(),v.setCursorStates(C.source,3,[ar.word(v,v.getPrimaryCursorState(),this._inSelectionMode,C.position)]),C.revealType!==2&&v.revealPrimaryCursor(C.source,!0,!0))}}i.WordSelect=ye(new g({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),i.WordSelectDrag=ye(new g({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),i.LastCursorWordSelect=ye(new class extends ni{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(b,v){if(!v.position)return;const C=b.getLastAddedCursorIndex(),w=b.getCursorStates(),S=w.slice(0),L=w[C];S[C]=ar.word(b,L,L.modelState.hasSelection(),v.position),b.model.pushStackElement(),b.setCursorStates(v.source,3,S)}});class m extends ni{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,C){C.position&&(v.model.pushStackElement(),v.setCursorStates(C.source,3,[ar.line(v,v.getPrimaryCursorState(),this._inSelectionMode,C.position,C.viewPosition)]),C.revealType!==2&&v.revealPrimaryCursor(C.source,!1,!0))}}i.LineSelect=ye(new m({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),i.LineSelectDrag=ye(new m({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class y extends ni{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,C){if(!C.position)return;const w=v.getLastAddedCursorIndex(),S=v.getCursorStates(),L=S.slice(0);L[w]=ar.line(v,S[w],this._inSelectionMode,C.position,C.viewPosition),v.model.pushStackElement(),v.setCursorStates(C.source,3,L)}}i.LastCursorLineSelect=ye(new y({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),i.LastCursorLineSelectDrag=ye(new y({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),i.CancelSelection=ye(new class extends ni{constructor(){super({id:"cancelSelection",precondition:N.hasNonEmptySelection,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(b,v){b.model.pushStackElement(),b.setCursorStates(v.source,3,[ar.cancelSelection(b,b.getPrimaryCursorState())]),b.revealPrimaryCursor(v.source,!0)}}),i.RemoveSecondaryCursors=ye(new class extends ni{constructor(){super({id:"removeSecondaryCursors",precondition:N.hasMultipleSelections,kbOpts:{weight:Gt+1,kbExpr:N.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(b,v){b.model.pushStackElement(),b.setCursorStates(v.source,3,[b.getPrimaryCursorState()]),b.revealPrimaryCursor(v.source,!0),zh(p("removedCursor","Removed secondary cursors"))}}),i.RevealLine=ye(new class extends ni{constructor(){super({id:"revealLine",precondition:void 0,description:Km.description})}runCoreEditorCommand(b,v){const C=v,w=C.lineNumber||0;let S=typeof w=="number"?w+1:parseInt(w)+1;S<1&&(S=1);const L=b.model.getLineCount();S>L&&(S=L);const T=new D(S,1,S,b.model.getLineMaxColumn(S));let I=0;if(C.at)switch(C.at){case Km.RawAtArgument.Top:I=3;break;case Km.RawAtArgument.Center:I=1;break;case Km.RawAtArgument.Bottom:I=4;break}const R=b.coordinatesConverter.convertModelRangeToViewRange(T);b.revealRange(v.source,!1,R,I,0)}}),i.SelectAll=new class extends JA{constructor(){super(dLe)}runDOMCommand(b){aa&&(b.focus(),b.select()),b.ownerDocument.execCommand("selectAll")}runEditorCommand(b,v,C){const w=v._getViewModel();w&&this.runCoreEditorCommand(w,C)}runCoreEditorCommand(b,v){b.model.pushStackElement(),b.setCursorStates("keyboard",3,[ar.selectAll(b,b.getPrimaryCursorState())])}},i.SetSelection=ye(new class extends ni{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(b,v){v.selection&&(b.model.pushStackElement(),b.setCursorStates(v.source,3,[Ht.fromModelSelection(v.selection)]))}})})(Zi||(Zi={}));const x2e=re.and(N.textInputFocus,N.columnSelection);function Q1(i,e){Fs.registerKeybindingRule({id:i,primary:e,when:x2e,weight:Gt+1})}Q1(Zi.CursorColumnSelectLeft.id,1039);Q1(Zi.CursorColumnSelectRight.id,1041);Q1(Zi.CursorColumnSelectUp.id,1040);Q1(Zi.CursorColumnSelectPageUp.id,1035);Q1(Zi.CursorColumnSelectDown.id,1042);Q1(Zi.CursorColumnSelectPageDown.id,1036);function $6(i){return i.register(),i}var C_;(function(i){class e extends sr{runEditorCommand(n,r,s){const o=r._getViewModel();o&&this.runCoreEditingCommand(r,o,s||{})}}i.CoreEditingCommand=e,i.LineBreakInsert=ye(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:N.writable,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,n,r){t.pushUndoStop(),t.executeCommands(this.id,$n.lineBreakInsert(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection)))}}),i.Outdent=ye(new class extends e{constructor(){super({id:"outdent",precondition:N.writable,kbOpts:{weight:Gt,kbExpr:re.and(N.editorTextFocus,N.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,n,r){t.pushUndoStop(),t.executeCommands(this.id,$n.outdent(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),i.Tab=ye(new class extends e{constructor(){super({id:"tab",precondition:N.writable,kbOpts:{weight:Gt,kbExpr:re.and(N.editorTextFocus,N.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,n,r){t.pushUndoStop(),t.executeCommands(this.id,$n.tab(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),i.DeleteLeft=ye(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,n,r){const[s,o]=Xg.deleteLeft(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection),n.getCursorAutoClosedCharacters());s&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(2)}}),i.DeleteRight=ye(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:Gt,kbExpr:N.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,n,r){const[s,o]=Xg.deleteRight(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection));s&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(3)}}),i.Undo=new class extends JA{constructor(){super(VG)}runDOMCommand(t){t.ownerDocument.execCommand("undo")}runEditorCommand(t,n,r){if(!(!n.hasModel()||n.getOption(90)===!0))return n.getModel().undo()}},i.Redo=new class extends JA{constructor(){super(HG)}runDOMCommand(t){t.ownerDocument.execCommand("redo")}runEditorCommand(t,n,r){if(!(!n.hasModel()||n.getOption(90)===!0))return n.getModel().redo()}}})(C_||(C_={}));class K6 extends wD{constructor(e,t,n){super({id:e,precondition:void 0,description:n}),this._handlerId=t}runCommand(e,t){const n=e.get(Jt).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}}function Op(i,e){$6(new K6("default:"+i,i)),$6(new K6(i,i,e))}Op("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});Op("replacePreviousChar");Op("compositionType");Op("compositionStart");Op("compositionEnd");Op("paste");Op("cut");class T2e{constructor(e,t,n,r){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=r}paste(e,t,n,r){this.commandDelegate.paste(e,t,n,r)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,r){this.commandDelegate.compositionType(e,t,n,r)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Zi.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new U(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(77)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(77)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,n=os&&t.get(106),r=t.get(22);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):r?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){Zi.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){Zi.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,n){e=this._validateViewColumn(e),Zi.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),Zi.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){Zi.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){Zi.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){Zi.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){Zi.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){Zi.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){Zi.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){Zi.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){Zi.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){Zi.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class UD{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var t;(t=this.onKeyDown)===null||t===void 0||t.call(this,e)}emitKeyUp(e){var t;(t=this.onKeyUp)===null||t===void 0||t.call(this,e)}emitContextMenu(e){var t;(t=this.onContextMenu)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;(t=this.onMouseMove)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;(t=this.onMouseLeave)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;(t=this.onMouseDown)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;(t=this.onMouseUp)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;(t=this.onMouseDrag)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;(t=this.onMouseDrop)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;(e=this.onMouseDropCanceled)===null||e===void 0||e.call(this)}emitMouseWheel(e){var t;(t=this.onMouseWheel)===null||t===void 0||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return UD.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const n=Object.assign({},e);return n.position&&(n.position=t.convertViewPositionToModelPosition(n.position)),n.range&&(n.range=t.convertViewRangeToModelRange(n.range)),(n.type===5||n.type===8)&&(n.detail=this.convertViewToModelViewZoneData(n.detail,t)),n}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new U(e.afterLineNumber,1)).lineNumber}}}class YZ{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Ti("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const n=this.getStartLineNumber(),r=this.getEndLineNumber();if(t<n){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>r)return null;let s=0,o=0;for(let l=n;l<=r;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(o===0?(s=c,o=1):o++)}if(e<n){let l=0;t<n?l=t-e+1:l=n-e,this._rendLineNumberStart-=l}return this._lines.splice(s,o)}onLinesChanged(e,t){const n=e+t-1;if(this.getCount()===0)return!1;const r=this.getStartLineNumber(),s=this.getEndLineNumber();let o=!1;for(let a=e;a<=n;a++)a>=r&&a<=s&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),o=!0);return o}onLinesInserted(e,t){if(this.getCount()===0)return null;const n=t-e+1,r=this.getStartLineNumber(),s=this.getEndLineNumber();if(e<=r)return this._rendLineNumberStart+=n,null;if(e>s)return null;if(n+e>s)return this._lines.splice(e-this._rendLineNumberStart,s-e+1);const o=[];for(let u=0;u<n;u++)o[u]=this._createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-n),d=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=l.concat(o).concat(c),d}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),n=this.getEndLineNumber();let r=!1;for(let s=0,o=e.length;s<o;s++){const a=e[s];if(a.toLineNumber<t||a.fromLineNumber>n)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(n,a.toLineNumber);for(let d=l;d<=c;d++){const u=d-this._rendLineNumberStart;this._lines[u].onTokensChanged(),r=!0}}return r}}class QZ{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new YZ(()=>this._host.createVisibleLine())}_createDomNode(){const e=tn(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(143)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,r=t.length;n<r;n++){const s=t[n].getDomNode();s&&this.domNode.domNode.removeChild(s)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,r=t.length;n<r;n++){const s=t[n].getDomNode();s&&this.domNode.domNode.removeChild(s)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),n=new Bd(this.domNode.domNode,this._host,e),r={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},s=n.render(r,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(s.rendLineNumberStart,s.lines)}}class Bd{constructor(e,t,n){this.domNode=e,this.host=t,this.viewportData=n}render(e,t,n,r){const s={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(s.rendLineNumberStart+s.linesLength-1<t||n<s.rendLineNumberStart){s.rendLineNumberStart=t,s.linesLength=n-t+1,s.lines=[];for(let o=t;o<=n;o++)s.lines[o-t]=this.host.createVisibleLine();return this._finishRendering(s,!0,r),s}if(this._renderUntouchedLines(s,Math.max(t-s.rendLineNumberStart,0),Math.min(n-s.rendLineNumberStart,s.linesLength-1),r,t),s.rendLineNumberStart>t){const o=t,a=Math.min(n,s.rendLineNumberStart-1);o<=a&&(this._insertLinesBefore(s,o,a,r,t),s.linesLength+=a-o+1)}else if(s.rendLineNumberStart<t){const o=Math.min(s.linesLength,t-s.rendLineNumberStart);o>0&&(this._removeLinesBefore(s,o),s.linesLength-=o)}if(s.rendLineNumberStart=t,s.rendLineNumberStart+s.linesLength-1<n){const o=s.rendLineNumberStart+s.linesLength,a=n;o<=a&&(this._insertLinesAfter(s,o,a,r,t),s.linesLength+=a-o+1)}else if(s.rendLineNumberStart+s.linesLength-1>n){const o=Math.max(0,n-s.rendLineNumberStart+1),l=s.linesLength-1-o+1;l>0&&(this._removeLinesAfter(s,l),s.linesLength-=l)}return this._finishRendering(s,!1,r),s}_renderUntouchedLines(e,t,n,r,s){const o=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=n;l++){const c=o+l;a[l].layoutLine(c,r[c-s])}}_insertLinesBefore(e,t,n,r,s){const o=[];let a=0;for(let l=t;l<=n;l++)o[a++]=this.host.createVisibleLine();e.lines=o.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){const r=e.lines[n].getDomNode();r&&this.domNode.removeChild(r)}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,r,s){const o=[];let a=0;for(let l=t;l<=n;l++)o[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(o)}_removeLinesAfter(e,t){const n=e.linesLength-t;for(let r=0;r<t;r++){const s=e.lines[n+r].getDomNode();s&&this.domNode.removeChild(s)}e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,r){Bd._ttPolicy&&(n=Bd._ttPolicy.createHTML(n));const s=this.domNode.lastChild;t||!s?this.domNode.innerHTML=n:s.insertAdjacentHTML("afterend",n);let o=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];r[a]&&(l.setDomNode(o),o=o.previousSibling)}}_finishRenderingInvalidLines(e,t,n){const r=document.createElement("div");Bd._ttPolicy&&(t=Bd._ttPolicy.createHTML(t)),r.innerHTML=t;for(let s=0;s<e.linesLength;s++){const o=e.lines[s];if(n[s]){const a=r.firstChild,l=o.getDomNode();l.parentNode.replaceChild(a,l),o.setDomNode(a)}}}_finishRendering(e,t,n){const r=Bd._sb,s=e.linesLength,o=e.lines,a=e.rendLineNumberStart,l=[];{r.reset();let c=!1;for(let d=0;d<s;d++){const u=o[d];l[d]=!1,!(u.getDomNode()||!u.renderLine(d+a,n[d],this.viewportData,r))&&(l[d]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,r.build(),l)}{r.reset();let c=!1;const d=[];for(let u=0;u<s;u++){const h=o[u];d[u]=!1,!(l[u]||!h.renderLine(u+a,n[u],this.viewportData,r))&&(d[u]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,r.build(),d)}}}Bd._ttPolicy=vu("editorViewLayer",{createHTML:i=>i});Bd._sb=new Z1(1e5);class JZ extends ao{constructor(e){super(e),this._visibleLines=new QZ(this),this.domNode=this._visibleLines.domNode;const n=this._context.configuration.options.get(50);Ir(this.domNode,n),this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new k2e(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let o=t;o<=n;o++)this._visibleLines.getVisibleLine(o).onConfigurationChanged(e);const s=this._context.configuration.options.get(50);return Ir(this.domNode,s),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,r=t.length;n<r;n++){const s=t[n];s.prepareRender(e),s.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class k2e{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(66),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=tn(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(66)}renderLine(e,t,n,r){let s="";for(let o=0,a=this._dynamicOverlays.length;o<a;o++){const l=this._dynamicOverlays[o];s+=l.render(n.startLineNumber,e)}return this._renderedContent===s?!1:(this._renderedContent=s,r.appendString('<div style="position:absolute;top:'),r.appendString(String(t)),r.appendString("px;width:100%;height:"),r.appendString(String(this._lineHeight)),r.appendString('px;">'),r.appendString(s),r.appendString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}class L2e extends JZ{constructor(e){super(e);const n=this._context.configuration.options.get(143);this._contentWidth=n.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const n=this._context.configuration.options.get(143);return this._contentWidth=n.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class D2e extends JZ{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(143);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),Ir(this.domNode,t.get(50))}onConfigurationChanged(e){const t=this._context.configuration.options;Ir(this.domNode,t.get(50));const n=t.get(143);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class I2e extends ao{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=tn(document.createElement("div")),Zc.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=tn(document.createElement("div")),Zc.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){const e=Object.keys(this._widgets);for(const t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){const t=new R2e(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n,r,s){this._widgets[e.getId()].setPosition(t,n,r,s),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t];delete this._widgets[t];const r=n.domNode.domNode;r.parentNode.removeChild(r),r.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].render(e)}}class R2e{constructor(e,t,n){this._primaryAnchor=new Rb(null,null),this._secondaryAnchor=new Rb(null,null),this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=tn(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const r=this._context.configuration.options,s=r.get(143);this._fixedOverflowWidgets=r.get(42),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,this._lineHeight=r.get(66),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(66),e.hasChanged(143)){const n=t.get(143);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,n){this._affinity=e,this._primaryAnchor=r(t,this._context.viewModel,this._affinity),this._secondaryAnchor=r(n,this._context.viewModel,this._affinity);function r(s,o,a){if(!s)return new Rb(null,null);const l=o.model.validatePosition(s);if(o.coordinatesConverter.modelPositionIsVisible(l)){const c=o.coordinatesConverter.convertModelPositionToViewPosition(l,a??void 0);return new Rb(s,c)}return new Rb(s,null)}}_getMaxWidth(){const e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?(t==null?void 0:t.innerWidth)||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}setPosition(e,t,n,r){this._setPosition(r,e,t),this._preference=n,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,n,r){const s=e.top,o=s,a=e.top+e.height,l=r.viewportHeight-a,c=s-n,d=o>=n,u=a,h=l>=n;let f=e.left;return f+t>r.scrollLeft+r.viewportWidth&&(f=r.scrollLeft+r.viewportWidth-t),f<r.scrollLeft&&(f=r.scrollLeft),{fitsAbove:d,aboveTop:c,fitsBelow:h,belowTop:u,left:f}}_layoutHorizontalSegmentInPage(e,t,n,r){var s;const l=Math.max(15,t.left-r),c=Math.min(t.left+t.width+r,e.width-15),u=this._viewDomNode.domNode.ownerDocument.defaultView;let h=t.left+n-((s=u==null?void 0:u.scrollX)!==null&&s!==void 0?s:0);if(h+r>c){const f=h-(c-r);h-=f,n-=f}if(h<l){const f=h-l;h-=f,n-=f}return[n,h]}_layoutBoxInPage(e,t,n,r){var s,o;const a=e.top-n,l=e.top+e.height,c=Mi(this._viewDomNode.domNode),d=this._viewDomNode.domNode.ownerDocument,u=d.defaultView,h=c.top+a-((s=u==null?void 0:u.scrollY)!==null&&s!==void 0?s:0),f=c.top+l-((o=u==null?void 0:u.scrollY)!==null&&o!==void 0?o:0),g=q1(d.body),[m,y]=this._layoutHorizontalSegmentInPage(g,c,e.left-r.scrollLeft+this._contentLeft,t),b=22,v=22,C=h>=b,w=f+n<=g.height-v;return this._fixedOverflowWidgets?{fitsAbove:C,aboveTop:Math.max(h,b),fitsBelow:w,belowTop:f,left:y}:{fitsAbove:C,aboveTop:a,fitsBelow:w,belowTop:l,left:m}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new Eb(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){var t,n;const r=a(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),s=((t=this._secondaryAnchor.viewPosition)===null||t===void 0?void 0:t.lineNumber)===((n=this._primaryAnchor.viewPosition)===null||n===void 0?void 0:n.lineNumber)?this._secondaryAnchor.viewPosition:null,o=a(s,this._affinity,this._lineHeight);return{primary:r,secondary:o};function a(l,c,d){if(!l)return null;const u=e.visibleRangeForPosition(l);if(!u)return null;const h=l.column===1&&c===3?0:u.left,f=e.getVerticalOffsetForLineNumber(l.lineNumber)-e.scrollTop;return new q6(f,h,d)}}_reduceAnchorCoordinates(e,t,n){if(!t)return e;const r=this._context.configuration.options.get(50);let s=t.left;return s<e.left?s=Math.max(s,e.left-n+r.typicalFullwidthCharacterWidth):s=Math.min(s,e.left+n-r.typicalFullwidthCharacterWidth),new q6(e.top,s,e.height)}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const{primary:t,secondary:n}=this._getAnchorsCoordinates(e);if(!t)return null;if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let o=null;if(typeof this._actual.beforeRender=="function"&&(o=gE(this._actual.beforeRender,this._actual)),o)this._cachedDomNodeOffsetWidth=o.width,this._cachedDomNodeOffsetHeight=o.height;else{const l=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(l.width),this._cachedDomNodeOffsetHeight=Math.round(l.height)}}const r=this._reduceAnchorCoordinates(t,n,this._cachedDomNodeOffsetWidth);let s;this.allowEditorOverflow?s=this._layoutBoxInPage(r,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):s=this._layoutBoxInViewport(r,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let o=1;o<=2;o++)for(const a of this._preference)if(a===1){if(!s)return null;if(o===2||s.fitsAbove)return{coordinate:new Eb(s.aboveTop,s.left),position:1}}else if(a===2){if(!s)return null;if(o===2||s.fitsBelow)return{coordinate:new Eb(s.belowTop,s.left),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new Eb(r.top,r.left)),position:0}:{coordinate:new Eb(r.top,r.left),position:0};return null}onBeforeRender(e){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&gE(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&gE(this._actual.afterRender,this._actual,this._renderData.position)}}class Rb{constructor(e,t){this.modelPosition=e,this.viewPosition=t}}class Eb{constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}}class q6{constructor(e,t,n){this.top=e,this.left=t,this.height=n,this._anchorCoordinateBrand=void 0}}function gE(i,e,...t){try{return i.call(e,...t)}catch{return null}}class eX extends Mp{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(143);this._lineHeight=t.get(66),this._renderLineHighlight=t.get(95),this._renderLineHighlightOnlyWhenFocus=t.get(96),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new Be(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=this._selections.map(r=>r.positionLineNumber);t.sort((r,s)=>r-s),fi(this._cursorLineNumbers,t)||(this._cursorLineNumbers=t,e=!0);const n=this._selections.every(r=>r.isEmpty());return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(143);return this._lineHeight=t.get(66),this._renderLineHighlight=t.get(95),this._renderLineHighlightOnlyWhenFocus=t.get(96),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=this._renderOne(e),n=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,s=this._cursorLineNumbers.length;let o=0;const a=[];for(let l=n;l<=r;l++){const c=l-n;for(;o<s&&this._cursorLineNumbers[o]<l;)o++;o<s&&this._cursorLineNumbers[o]===l?a[c]=t:a[c]=""}this._renderData=a}render(e,t){if(!this._renderData)return"";const n=t-e;return n>=this._renderData.length?"":this._renderData[n]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class E2e extends eX{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class N2e extends eX{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}Ka((i,e)=>{const t=i.getColor(WZ);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||i.defines(U6)){const n=i.getColor(U6);n&&(e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${n}; }`),Rl(i.type)&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});class A2e extends Mp{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(66),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(66),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let n=[],r=0;for(let l=0,c=t.length;l<c;l++){const d=t[l];d.options.className&&(n[r++]=d)}n=n.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const d=l.options.className,u=c.options.className;return d<u?-1:d>u?1:D.compareRangesUsingStarts(l.range,c.range)});const s=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=[];for(let l=s;l<=o;l++){const c=l-s;a[c]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){const r=String(this._lineHeight),s=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber;for(let a=0,l=t.length;a<l;a++){const c=t[a];if(!c.options.isWholeLine)continue;const d='<div class="cdr '+c.options.className+'" style="left:0;width:100%;height:'+r+'px;"></div>',u=Math.max(c.range.startLineNumber,s),h=Math.min(c.range.endLineNumber,o);for(let f=u;f<=h;f++){const g=f-s;n[g]+=d}}}_renderNormalDecorations(e,t,n){var r;const s=String(this._lineHeight),o=e.visibleRange.startLineNumber;let a=null,l=!1,c=null,d=!1;for(let u=0,h=t.length;u<h;u++){const f=t[u];if(f.options.isWholeLine)continue;const g=f.options.className,m=!!f.options.showIfCollapsed;let y=f.range;if(m&&y.endColumn===1&&y.endLineNumber!==y.startLineNumber&&(y=new D(y.startLineNumber,y.startColumn,y.endLineNumber-1,this._context.viewModel.getLineMaxColumn(y.endLineNumber-1))),a===g&&l===m&&D.areIntersectingOrTouching(c,y)){c=D.plusRange(c,y);continue}a!==null&&this._renderNormalDecoration(e,c,a,d,l,s,o,n),a=g,l=m,c=y,d=(r=f.options.shouldFillLineOnLineBreak)!==null&&r!==void 0?r:!1}a!==null&&this._renderNormalDecoration(e,c,a,d,l,s,o,n)}_renderNormalDecoration(e,t,n,r,s,o,a,l){const c=e.linesVisibleRangesForRange(t,n==="findMatch");if(c)for(let d=0,u=c.length;d<u;d++){const h=c[d];if(h.outsideRenderedLine)continue;const f=h.lineNumber-a;if(s&&h.ranges.length===1){const g=h.ranges[0];if(g.width<this._typicalHalfwidthCharacterWidth){const m=Math.round(g.left+g.width/2),y=Math.max(0,Math.round(m-this._typicalHalfwidthCharacterWidth/2));h.ranges[0]=new BD(y,this._typicalHalfwidthCharacterWidth)}}for(let g=0,m=h.ranges.length;g<m;g++){const y=r&&h.continuesOnNextLine&&m===1,b=h.ranges[g],v='<div class="cdr '+n+'" style="left:'+String(b.left)+(y?"px;width:100%;height:":"px;width:"+String(b.width)+"px;height:")+o+'px;"></div>';l[f]+=v}}}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class P2e extends ao{constructor(e,t,n,r){super(e);const s=this._context.configuration.options,o=s.get(102),a=s.get(74),l=s.get(40),c=s.get(105),d={listenOnDomNode:n.domNode,className:"editor-scrollable "+YA(e.theme.type),useShadows:!1,lazyRender:!0,vertical:o.vertical,horizontal:o.horizontal,verticalHasArrows:o.verticalHasArrows,horizontalHasArrows:o.horizontalHasArrows,verticalScrollbarSize:o.verticalScrollbarSize,verticalSliderSize:o.verticalSliderSize,horizontalScrollbarSize:o.horizontalScrollbarSize,horizontalSliderSize:o.horizontalSliderSize,handleMouseWheel:o.handleMouseWheel,alwaysConsumeMouseWheel:o.alwaysConsumeMouseWheel,arrowSize:o.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:o.scrollByPage};this.scrollbar=this._register(new _5(t.domNode,d,this._context.viewLayout.getScrollable())),Zc.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=tn(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const u=(h,f,g)=>{const m={};if(f){const y=h.scrollTop;y&&(m.scrollTop=this._context.viewLayout.getCurrentScrollTop()+y,h.scrollTop=0)}if(g){const y=h.scrollLeft;y&&(m.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+y,h.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(m,1)};this._register(ee(n.domNode,"scroll",h=>u(n.domNode,!0,!0))),this._register(ee(t.domNode,"scroll",h=>u(t.domNode,!0,!1))),this._register(ee(r.domNode,"scroll",h=>u(r.domNode,!0,!1))),this._register(ee(this.scrollbarDomNode.domNode,"scroll",h=>u(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(143);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(72).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(102)||e.hasChanged(74)||e.hasChanged(40)){const t=this._context.configuration.options,n=t.get(102),r=t.get(74),s=t.get(40),o=t.get(105),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:r,fastScrollSensitivity:s,scrollPredominantAxis:o};this.scrollbar.updateOptions(a)}return e.hasChanged(143)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+YA(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}class tX extends q{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}function jD(i,e){let t=0,n=0;const r=i.length;for(;n<r;){const s=i.charCodeAt(n);if(s===32)t++;else if(s===9)t=t-t%e+e;else break;n++}return n===r?-1:t}var Tg;(function(i){i[i.Disabled=0]="Disabled",i[i.EnabledForActive=1]="EnabledForActive",i[i.Enabled=2]="Enabled"})(Tg||(Tg={}));class mg{constructor(e,t,n,r,s,o){if(this.visibleColumn=e,this.column=t,this.className=n,this.horizontalLine=r,this.forWrappedLinesAfterColumn=s,this.forWrappedLinesBeforeOrAtColumn=o,e!==-1==(t!==-1))throw new Error}}class Wv{constructor(e,t){this.top=e,this.endColumn=t}}class M2e extends tX{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return jD(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,n){this.assertNotDisposed();const r=this.textModel.getLineCount();if(e<1||e>r)throw new Ti("Illegal value for lineNumber");const s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(s&&s.offSide);let a=-2,l=-1,c=-2,d=-1;const u=T=>{if(a!==-1&&(a===-2||a>T-1)){a=-1,l=-1;for(let I=T-2;I>=0;I--){const R=this._computeIndentLevel(I);if(R>=0){a=I,l=R;break}}}if(c===-2){c=-1,d=-1;for(let I=T;I<r;I++){const R=this._computeIndentLevel(I);if(R>=0){c=I,d=R;break}}}};let h=-2,f=-1,g=-2,m=-1;const y=T=>{if(h===-2){h=-1,f=-1;for(let I=T-2;I>=0;I--){const R=this._computeIndentLevel(I);if(R>=0){h=I,f=R;break}}}if(g!==-1&&(g===-2||g<T-1)){g=-1,m=-1;for(let I=T;I<r;I++){const R=this._computeIndentLevel(I);if(R>=0){g=I,m=R;break}}}};let b=0,v=!0,C=0,w=!0,S=0,L=0;for(let T=0;v||w;T++){const I=e-T,R=e+T;T>1&&(I<1||I<t)&&(v=!1),T>1&&(R>r||R>n)&&(w=!1),T>5e4&&(v=!1,w=!1);let B=-1;if(v&&I>=1){const F=this._computeIndentLevel(I-1);F>=0?(c=I-1,d=F,B=Math.ceil(F/this.textModel.getOptions().indentSize)):(u(I),B=this._getIndentLevelForWhitespaceLine(o,l,d))}let V=-1;if(w&&R<=r){const F=this._computeIndentLevel(R-1);F>=0?(h=R-1,f=F,V=Math.ceil(F/this.textModel.getOptions().indentSize)):(y(R),V=this._getIndentLevelForWhitespaceLine(o,f,m))}if(T===0){L=B;continue}if(T===1){if(R<=r&&V>=0&&L+1===V){v=!1,b=R,C=R,S=V;continue}if(I>=1&&B>=0&&B-1===L){w=!1,b=I,C=I,S=B;continue}if(b=e,C=e,S=L,S===0)return{startLineNumber:b,endLineNumber:C,indent:S}}v&&(B>=S?b=I:v=!1),w&&(V>=S?C=R:w=!1)}return{startLineNumber:b,endLineNumber:C,indent:S}}getLinesBracketGuides(e,t,n,r){var s;const o=[];for(let h=e;h<=t;h++)o.push([]);const a=!0,l=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new D(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let c;if(n&&l.length>0){const h=(e<=n.lineNumber&&n.lineNumber<=t?l:this.textModel.bracketPairs.getBracketPairsInRange(D.fromPositions(n)).toArray()).filter(f=>D.strictContainsPosition(f.range,n));c=(s=MT(h,f=>a))===null||s===void 0?void 0:s.range}const d=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,u=new nX;for(const h of l){if(!h.closingBracketRange)continue;const f=c&&h.range.equalsRange(c);if(!f&&!r.includeInactive)continue;const g=u.getInlineClassName(h.nestingLevel,h.nestingLevelOfEqualBracketType,d)+(r.highlightActive&&f?" "+u.activeClassName:""),m=h.openingBracketRange.getStartPosition(),y=h.closingBracketRange.getStartPosition(),b=r.horizontalGuides===Tg.Enabled||r.horizontalGuides===Tg.EnabledForActive&&f;if(h.range.startLineNumber===h.range.endLineNumber){b&&o[h.range.startLineNumber-e].push(new mg(-1,h.openingBracketRange.getEndPosition().column,g,new Wv(!1,y.column),-1,-1));continue}const v=this.getVisibleColumnFromPosition(y),C=this.getVisibleColumnFromPosition(h.openingBracketRange.getStartPosition()),w=Math.min(C,v,h.minVisibleColumnIndentation+1);let S=!1;ns(this.textModel.getLineContent(h.closingBracketRange.startLineNumber))<h.closingBracketRange.startColumn-1&&(S=!0);const I=Math.max(m.lineNumber,e),R=Math.min(y.lineNumber,t),B=S?1:0;for(let V=I;V<R+B;V++)o[V-e].push(new mg(w,-1,g,null,V===m.lineNumber?m.column:-1,V===y.lineNumber?y.column:-1));b&&(m.lineNumber>=e&&C>w&&o[m.lineNumber-e].push(new mg(w,-1,g,new Wv(!1,m.column),-1,-1)),y.lineNumber<=t&&v>w&&o[y.lineNumber-e].push(new mg(w,-1,g,new Wv(!S,y.column),-1,-1)))}for(const h of o)h.sort((f,g)=>f.visibleColumn-g.visibleColumn);return o}getVisibleColumnFromPosition(e){return Wi.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const r=this.textModel.getOptions(),s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(s&&s.offSide),a=new Array(t-e+1);let l=-2,c=-1,d=-2,u=-1;for(let h=e;h<=t;h++){const f=h-e,g=this._computeIndentLevel(h-1);if(g>=0){l=h-1,c=g,a[f]=Math.ceil(g/r.indentSize);continue}if(l===-2){l=-1,c=-1;for(let m=h-2;m>=0;m--){const y=this._computeIndentLevel(m);if(y>=0){l=m,c=y;break}}}if(d!==-1&&(d===-2||d<h-1)){d=-1,u=-1;for(let m=h;m<n;m++){const y=this._computeIndentLevel(m);if(y>=0){d=m,u=y;break}}}a[f]=this._getIndentLevelForWhitespaceLine(o,c,u)}return a}_getIndentLevelForWhitespaceLine(e,t,n){const r=this.textModel.getOptions();return t===-1||n===-1?0:t<n?1+Math.floor(t/r.indentSize):t===n||e?Math.ceil(n/r.indentSize):1+Math.floor(n/r.indentSize)}}class nX{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}class O2e extends Mp{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,n=t.get(144),r=t.get(50);this._lineHeight=t.get(66),this._spaceWidth=r.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*r.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(144),r=t.get(50);return this._lineHeight=t.get(66),this._spaceWidth=r.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*r.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),!0}onCursorStateChanged(e){var t;const r=e.selections[0].getPosition();return!((t=this._primaryPosition)===null||t===void 0)&&t.equals(r)?!1:(this._primaryPosition=r,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,n,r,s;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const o=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,c=this._lineHeight,d=this._primaryPosition,u=this.getGuidesByLine(o,Math.min(a+1,this._context.viewModel.getLineCount()),d),h=[];for(let f=o;f<=a;f++){const g=f-o,m=u[g];let y="";const b=(n=(t=e.visibleRangeForPosition(new U(f,1)))===null||t===void 0?void 0:t.left)!==null&&n!==void 0?n:0;for(const v of m){const C=v.column===-1?b+(v.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new U(f,v.column)).left;if(C>l||this._maxIndentLeft>0&&C>this._maxIndentLeft)break;const w=v.horizontalLine?v.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",S=v.horizontalLine?((s=(r=e.visibleRangeForPosition(new U(f,v.horizontalLine.endColumn)))===null||r===void 0?void 0:r.left)!==null&&s!==void 0?s:C+this._spaceWidth)-C:this._spaceWidth;y+=`<div class="core-guide ${v.className} ${w}" style="left:${C}px;height:${c}px;width:${S}px"></div>`}h[g]=y}this._renderResult=h}getGuidesByLine(e,t,n){const r=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?Tg.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?Tg.EnabledForActive:Tg.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,s=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let o=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&n){const u=this._context.viewModel.getActiveIndentGuide(n.lineNumber,e,t);o=u.startLineNumber,a=u.endLineNumber,l=u.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),d=[];for(let u=e;u<=t;u++){const h=new Array;d.push(h);const f=r?r[u-e]:[],g=new uu(f),m=s?s[u-e]:0;for(let y=1;y<=m;y++){const b=(y-1)*c+1,v=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||f.length===0)&&o<=u&&u<=a&&y===l;h.push(...g.takeWhile(w=>w.visibleColumn<b)||[]);const C=g.peek();(!C||C.visibleColumn!==b||C.horizontalLine)&&h.push(new mg(b,-1,`core-guide-indent lvl-${(y-1)%30}`+(v?" indent-active":""),null,-1,-1))}h.push(...g.takeWhile(y=>!0)||[])}return d}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}function lm(i){if(!(i&&i.isTransparent()))return i}Ka((i,e)=>{const t=[{bracketColor:UZ,guideColor:KNe,guideColorActive:QNe},{bracketColor:jZ,guideColor:qNe,guideColorActive:JNe},{bracketColor:zZ,guideColor:GNe,guideColorActive:e2e},{bracketColor:$Z,guideColor:ZNe,guideColorActive:t2e},{bracketColor:KZ,guideColor:XNe,guideColorActive:n2e},{bracketColor:qZ,guideColor:YNe,guideColorActive:i2e}],n=new nX,r=[{indentColor:qC,indentColorActive:GC},{indentColor:DNe,indentColorActive:ANe},{indentColor:INe,indentColorActive:PNe},{indentColor:RNe,indentColorActive:MNe},{indentColor:ENe,indentColorActive:ONe},{indentColor:NNe,indentColorActive:FNe}],s=t.map(a=>{var l,c;const d=i.getColor(a.bracketColor),u=i.getColor(a.guideColor),h=i.getColor(a.guideColorActive),f=lm((l=lm(u))!==null&&l!==void 0?l:d==null?void 0:d.transparent(.3)),g=lm((c=lm(h))!==null&&c!==void 0?c:d);if(!(!f||!g))return{guideColor:f,guideColorActive:g}}).filter(R0),o=r.map(a=>{const l=i.getColor(a.indentColor),c=i.getColor(a.indentColorActive),d=lm(l),u=lm(c);if(!(!d||!u))return{indentColor:d,indentColorActive:u}}).filter(R0);if(s.length>0){for(let a=0;a<30;a++){const l=s[a%s.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${n.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${n.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${n.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(o.length>0){for(let a=0;a<30;a++){const l=o[a%o.length];e.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${a} { --indent-color: ${l.indentColor}; --indent-color-active: ${l.indentColorActive}; }`)}e.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),e.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});class pE{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class F2e{constructor(){this._currentVisibleRange=new D(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class B2e{constructor(e,t,n,r,s,o,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=n,this.endColumn=r,this.startScrollTop=s,this.stopScrollTop=o,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}class W2e{constructor(e,t,n,r,s){this.minimalReveal=e,this.selections=t,this.startScrollTop=n,this.stopScrollTop=r,this.scrollType=s,this.type="selections";let o=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){const d=t[l];o=Math.min(o,d.startLineNumber),a=Math.max(a,d.endLineNumber)}this.minLineNumber=o,this.maxLineNumber=a}}class zD extends ao{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new QZ(this),this.domNode=this._visibleLines.domNode;const n=this._context.configuration,r=this._context.configuration.options,s=r.get(50),o=r.get(144);this._lineHeight=r.get(66),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._isViewportWrapping=o.isViewportWrapping,this._revealHorizontalRightPadding=r.get(99),this._cursorSurroundingLines=r.get(29),this._cursorSurroundingLinesStyle=r.get(30),this._canUseLayerHinting=!r.get(32),this._viewLineOptions=new B6(n,this._context.theme.type),Zc.write(this.domNode,7),this.domNode.setClassName(`view-lines ${v_}`),Ir(this.domNode,s),this._maxLineWidth=0,this._asyncUpdateLineWidths=new fn(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new fn(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new F2e,this._horizontalRevealRequest=null,this._stickyScrollEnabled=r.get(114).enabled,this._maxNumberStickyLines=r.get(114).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new pc(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(144)&&(this._maxLineWidth=0);const t=this._context.configuration.options,n=t.get(50),r=t.get(144);return this._lineHeight=t.get(66),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=t.get(99),this._cursorSurroundingLines=t.get(29),this._cursorSurroundingLinesStyle=t.get(30),this._canUseLayerHinting=!t.get(32),this._stickyScrollEnabled=t.get(114).enabled,this._maxNumberStickyLines=t.get(114).maxLineCount,Ir(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(143)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new B6(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const n=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let s=n;s<=r;s++)this._visibleLines.getVisibleLine(s).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let r=!1;for(let s=t;s<=n;s++)r=this._visibleLines.getVisibleLine(s).onSelectionChanged()||r;return r}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=t;r<=n;r++)this._visibleLines.getVisibleLine(r).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new B2e(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new W2e(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const s=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(n,s),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const n=this._getViewLineDomNode(e);if(n===null)return null;const r=this._getLineNumberFor(n);if(r===-1||r<1||r>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(r)===1)return new U(r,1);const s=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();if(r<s||r>o)return null;let a=this._visibleLines.getVisibleLine(r).getColumnOfNodeOffset(e,t);const l=this._context.viewModel.getLineMinColumn(r);return a<l&&(a=l),new U(r,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===pc.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=t;r<=n;r++){const s=this._visibleLines.getVisibleLine(r);if(e===s.getDomNode())return r}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();if(e<t||e>n)return-1;const r=new pE(this.domNode.domNode,this._textRangeRestingSpot),s=this._visibleLines.getVisibleLine(e).getWidth(r);return this._updateLineWidthsSlowIfDomDidLayout(r),s}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const n=e.endLineNumber,r=D.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!r)return null;const s=[];let o=0;const a=new pE(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new U(r.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();for(let u=r.startLineNumber;u<=r.endLineNumber;u++){if(u<c||u>d)continue;const h=u===r.startLineNumber?r.startColumn:1,f=u!==r.endLineNumber,g=f?this._context.viewModel.getLineMaxColumn(u):r.endColumn,m=this._visibleLines.getVisibleLine(u).getVisibleRangesForRange(u,h,g,a);if(m){if(t&&u<n){const y=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new U(u+1,1)).lineNumber,y!==l&&(m.ranges[m.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}s[o++]=new GEe(m.outsideRenderedLine,u,BD.from(m.ranges),f)}}return this._updateLineWidthsSlowIfDomDidLayout(a),o===0?null:s}_visibleRangesForLineRange(e,t,n){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;const r=new pE(this.domNode.domNode,this._textRangeRestingSpot),s=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,r);return this._updateLineWidthsSlowIfDomDidLayout(r),s}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new ZEe(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let r=1,s=!0;for(let o=t;o<=n;o++){const a=this._visibleLines.getVisibleLine(o);if(e&&!a.getWidthIsFast()){s=!1;continue}r=Math.max(r,a.getWidth(null))}return s&&t===1&&n===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(r),s}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const n=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let s=n;s<=r;s++){const o=this._visibleLines.getVisibleLine(s);if(o.needsMonospaceFontCheck()){const a=o.getWidth(null);a>t&&(t=a,e=s)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let s=n;s<=r;s++)this._visibleLines.getVisibleLine(s).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const r=this._computeScrollLeftToReveal(n);r&&(this._isViewportWrapping||this._ensureMaxLineWidth(r.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:r.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),os&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const n=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let s=n;s<=r;s++)if(this._visibleLines.getVisibleLine(s).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,r,s,o){const a=e.top,l=e.height,c=a+l;let d,u,h;if(s&&s.length>0){let b=s[0].startLineNumber,v=s[0].endLineNumber;for(let C=1,w=s.length;C<w;C++){const S=s[C];b=Math.min(b,S.startLineNumber),v=Math.max(v,S.endLineNumber)}d=!1,u=this._context.viewLayout.getVerticalOffsetForLineNumber(b),h=this._context.viewLayout.getVerticalOffsetForLineNumber(v)+this._lineHeight}else if(r)d=!0,u=this._context.viewLayout.getVerticalOffsetForLineNumber(r.startLineNumber),h=this._context.viewLayout.getVerticalOffsetForLineNumber(r.endLineNumber)+this._lineHeight;else return-1;const f=(t==="mouse"||n)&&this._cursorSurroundingLinesStyle==="default";let g=0,m=0;if(f)n||(g=this._lineHeight);else{const b=Math.min(l/this._lineHeight/2,this._cursorSurroundingLines);this._stickyScrollEnabled?g=Math.max(b,this._maxNumberStickyLines)*this._lineHeight:g=b*this._lineHeight,m=Math.max(0,b-1)*this._lineHeight}n||(o===0||o===4)&&(m+=this._lineHeight),u-=g,h+=m;let y;if(h-u>l){if(!d)return-1;y=u}else if(o===5||o===6)if(o===6&&a<=u&&h<=c)y=a;else{const b=Math.max(5*this._lineHeight,l*.2),v=u-b,C=h-l;y=Math.max(C,v)}else if(o===1||o===2)if(o===2&&a<=u&&h<=c)y=a;else{const b=(u+h)/2;y=Math.max(0,b-l/2)}else y=this._computeMinimumScrolling(a,c,u,h,o===3,o===4);return y}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),n=this._context.configuration.options.get(143),r=t.left,s=r+t.width-n.verticalScrollbarWidth;let o=1073741824,a=0;if(e.type==="range"){const c=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!c)return null;for(const d of c.ranges)o=Math.min(o,Math.round(d.left)),a=Math.max(a,Math.round(d.left+d.width))}else for(const c of e.selections){if(c.startLineNumber!==c.endLineNumber)return null;const d=this._visibleRangesForLineRange(c.startLineNumber,c.startColumn,c.endColumn);if(!d)return null;for(const u of d.ranges)o=Math.min(o,Math.round(u.left)),a=Math.max(a,Math.round(u.left+u.width))}return e.minimalReveal||(o=Math.max(0,o-zD.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),e.type==="selections"&&a-o>t.width?null:{scrollLeft:this._computeMinimumScrolling(r,s,o,a),maxHorizontalOffset:a}}_computeMinimumScrolling(e,t,n,r,s,o){e=e|0,t=t|0,n=n|0,r=r|0,s=!!s,o=!!o;const a=t-e;if(r-n<a){if(s)return n;if(o)return Math.max(0,r-a);if(n<e)return n;if(r>t)return Math.max(0,r-a)}else return n;return e}}zD.HORIZONTAL_EXTRA_PX=30;class eP{constructor(e,t,n,r){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(n),this.zIndex=r??0}}class V2e{constructor(e,t){this.className=e,this.zIndex=t}}class H2e{constructor(){this.decorations=[]}add(e){this.decorations.push(e)}getDecorations(){return this.decorations}}class iX extends Mp{_render(e,t,n){const r=[];for(let a=e;a<=t;a++){const l=a-e;r[l]=new H2e}if(n.length===0)return r;n.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let s=null,o=0;for(let a=0,l=n.length;a<l;a++){const c=n[a],d=c.className,u=c.zIndex;let h=Math.max(c.startLineNumber,e)-e;const f=Math.min(c.endLineNumber,t)-e;s===d?(h=Math.max(o+1,h),o=Math.max(o,f)):(s=d,o=f);for(let g=h;g<=o;g++)r[g].add(new V2e(d,u))}return r}}class U2e extends ao{constructor(e){super(e),this._widgets={},this._context=e;const t=this._context.configuration.options,n=t.get(143);this.domNode=tn(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(66),this._glyphMargin=t.get(57),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._glyphMarginDecorationLaneCount=n.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(143);return this._lineHeight=t.get(66),this._glyphMargin=t.get(57),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._glyphMarginDecorationLaneCount=n.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){const t=tn(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference.lane===t.lane&&n.preference.zIndex===t.zIndex&&D.equalsRange(n.preference.range,t.range)?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){var t;const n=e.getId();if(this._widgets[n]){const s=this._widgets[n].domNode.domNode;delete this._widgets[n],(t=s.parentNode)===null||t===void 0||t.removeChild(s),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){var n,r,s;const o=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.getDecorationsInViewport();for(const c of l){const d=c.options.glyphMarginClassName;if(!d)continue;const u=Math.max(c.range.startLineNumber,o),h=Math.min(c.range.endLineNumber,a),f=Math.min((r=(n=c.options.glyphMargin)===null||n===void 0?void 0:n.position)!==null&&r!==void 0?r:1,this._glyphMarginDecorationLaneCount),g=(s=c.options.zIndex)!==null&&s!==void 0?s:0;for(let m=u;m<=h;m++)t.push(new j2e(m,f,g,d))}}_collectWidgetBasedGlyphRenderRequest(e,t){const n=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(const s of Object.values(this._widgets)){const o=s.preference.range;if(o.endLineNumber<n||o.startLineNumber>r)continue;const a=Math.max(o.startLineNumber,n),l=Math.min(s.preference.lane,this._glyphMarginDecorationLaneCount);t.push(new z2e(a,l,s.preference.zIndex,s))}}_collectSortedGlyphRenderRequests(e){const t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((n,r)=>n.lineNumber===r.lineNumber?n.lane===r.lane?n.zIndex===r.zIndex?r.type===n.type?n.type===0&&r.type===0?n.className<r.className?-1:1:0:r.type-n.type:r.zIndex-n.zIndex:n.lane-r.lane:n.lineNumber-r.lineNumber),t}prepareRender(e){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(const r of Object.values(this._widgets))r.renderInfo=null;const t=new uu(this._collectSortedGlyphRenderRequests(e)),n=[];for(;t.length>0;){const r=t.peek();if(!r)break;const s=t.takeWhile(a=>a.lineNumber===r.lineNumber&&a.lane===r.lane);if(!s||s.length===0)break;const o=s[0];if(o.type===0){const a=[];for(const l of s){if(l.zIndex!==o.zIndex||l.type!==o.type)break;(a.length===0||a[a.length-1]!==l.className)&&a.push(l.className)}n.push(o.accept(a.join(" ")))}else o.widget.renderInfo={lineNumber:o.lineNumber,lane:o.lane}}this._decorationGlyphsToRender=n}render(e){if(!this._glyphMargin){for(const n of Object.values(this._widgets))n.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;){const n=this._managedDomNodes.pop();n==null||n.domNode.remove()}return}const t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const n of Object.values(this._widgets))if(!n.renderInfo)n.domNode.setDisplay("none");else{const r=e.viewportData.relativeVerticalOffset[n.renderInfo.lineNumber-e.viewportData.startLineNumber],s=this._glyphMarginLeft+(n.renderInfo.lane-1)*this._lineHeight;n.domNode.setDisplay("block"),n.domNode.setTop(r),n.domNode.setLeft(s),n.domNode.setWidth(t),n.domNode.setHeight(this._lineHeight)}for(let n=0;n<this._decorationGlyphsToRender.length;n++){const r=this._decorationGlyphsToRender[n],s=e.viewportData.relativeVerticalOffset[r.lineNumber-e.viewportData.startLineNumber],o=this._glyphMarginLeft+(r.lane-1)*this._lineHeight;let a;n<this._managedDomNodes.length?a=this._managedDomNodes[n]:(a=tn(document.createElement("div")),this._managedDomNodes.push(a),this.domNode.appendChild(a)),a.setClassName("cgmr codicon "+r.combinedClassName),a.setPosition("absolute"),a.setTop(s),a.setLeft(o),a.setWidth(t),a.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;){const n=this._managedDomNodes.pop();n==null||n.domNode.remove()}}}class j2e{constructor(e,t,n,r){this.lineNumber=e,this.lane=t,this.zIndex=n,this.className=r,this.type=0}accept(e){return new $2e(this.lineNumber,this.lane,e)}}class z2e{constructor(e,t,n,r){this.lineNumber=e,this.lane=t,this.zIndex=n,this.widget=r,this.type=1}}class $2e{constructor(e,t,n){this.lineNumber=e,this.lane=t,this.combinedClassName=n}}class K2e extends iX{constructor(e){super(),this._context=e;const n=this._context.configuration.options.get(143);this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const n=this._context.configuration.options.get(143);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let r=0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.options.linesDecorationsClassName,c=a.options.zIndex;l&&(n[r++]=new eP(a.range.startLineNumber,a.range.endLineNumber,l,c));const d=a.options.firstLineDecorationClassName;d&&(n[r++]=new eP(a.range.startLineNumber,a.range.startLineNumber,d,c))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r=this._render(t,n,this._getDecorations(e)),s=this._decorationsLeft.toString(),o=this._decorationsWidth.toString(),a='" style="left:'+s+"px;width:"+o+'px;"></div>',l=[];for(let c=t;c<=n;c++){const d=c-t,u=r[d].getDecorations();let h="";for(const f of u)h+='<div class="cldr '+f.className+a;l[d]=h}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class q2e extends iX{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let r=0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.options.marginClassName,c=a.options.zIndex;l&&(n[r++]=new eP(a.range.startLineNumber,a.range.endLineNumber,l,c))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r=this._render(t,n,this._getDecorations(e)),s=[];for(let o=t;o<=n;o++){const a=o-t,l=r[a].getDecorations();let c="";for(const d of l)c+='<div class="cmdr '+d.className+'" style=""></div>';s[a]=c}this._renderResult=s}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class ea{constructor(e,t,n,r){this._rgba8Brand=void 0,this.r=ea._clamp(e),this.g=ea._clamp(t),this.b=ea._clamp(n),this.a=ea._clamp(r)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}ea.Empty=new ea(0,0,0,0);class XC extends q{static getInstance(){return this._INSTANCE||(this._INSTANCE=new XC),this._INSTANCE}constructor(){super(),this._onDidChange=new H,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Gn.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){const e=Gn.getColorMap();if(!e){this._colors=[ea.Empty],this._backgroundIsLight=!0;return}this._colors=[ea.Empty];for(let n=1;n<e.length;n++){const r=e[n].rgba;this._colors[n]=new ea(r.r,r.g,r.b,Math.round(r.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}XC._INSTANCE=null;const G2e=(()=>{const i=[];for(let e=32;e<=126;e++)i.push(e);return i.push(65533),i})(),Z2e=(i,e)=>(i-=32,i<0||i>96?e<=2?(i+96)%96:96-1:i);class ry{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=ry.soften(e,12/15),this.charDataLight=ry.soften(e,50/60)}static soften(e,t){const n=new Uint8ClampedArray(e.length);for(let r=0,s=e.length;r<s;r++)n[r]=NT(e[r]*t);return n}renderChar(e,t,n,r,s,o,a,l,c,d,u){const h=1*this.scale,f=2*this.scale,g=u?1:f;if(t+h>e.width||n+g>e.height){console.warn("bad render request outside image data");return}const m=d?this.charDataLight:this.charDataNormal,y=Z2e(r,c),b=e.width*4,v=a.r,C=a.g,w=a.b,S=s.r-v,L=s.g-C,T=s.b-w,I=Math.max(o,l),R=e.data;let B=y*h*f,V=n*b+t*4;for(let F=0;F<g;F++){let W=V;for(let X=0;X<h;X++){const oe=m[B++]/255*(o/255);R[W++]=v+S*oe,R[W++]=C+L*oe,R[W++]=w+T*oe,R[W++]=I}V+=b}}blockRenderChar(e,t,n,r,s,o,a,l){const c=1*this.scale,d=2*this.scale,u=l?1:d;if(t+c>e.width||n+u>e.height){console.warn("bad render request outside image data");return}const h=e.width*4,f=.5*(s/255),g=o.r,m=o.g,y=o.b,b=r.r-g,v=r.g-m,C=r.b-y,w=g+b*f,S=m+v*f,L=y+C*f,T=Math.max(s,a),I=e.data;let R=n*h+t*4;for(let B=0;B<u;B++){let V=R;for(let F=0;F<c;F++)I[V++]=w,I[V++]=S,I[V++]=L,I[V++]=T;R+=h}}}const G6={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},Z6=i=>{const e=new Uint8ClampedArray(i.length/2);for(let t=0;t<i.length;t+=2)e[t>>1]=G6[i[t]]<<4|G6[i[t+1]]&15;return e},X6={1:Fh(()=>Z6("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:Fh(()=>Z6("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class Vv{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return X6[e]?n=new ry(X6[e](),e):n=Vv.createFromSampleData(Vv.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",n.fillStyle="#ffffff",n.font=`bold 16px ${e}`,n.textBaseline="middle";let r=0;for(const s of G2e)n.fillText(String.fromCharCode(s),r,16/2),r+=10;return n.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const r=Vv._downsample(e,t);return new ry(r,t)}static _downsampleChar(e,t,n,r,s){const o=1*s,a=2*s;let l=r,c=0;for(let d=0;d<a;d++){const u=d/a*16,h=(d+1)/a*16;for(let f=0;f<o;f++){const g=f/o*10,m=(f+1)/o*10;let y=0,b=0;for(let C=u;C<h;C++){const w=t+Math.floor(C)*3840,S=1-(C-Math.floor(C));for(let L=g;L<m;L++){const T=1-(L-Math.floor(L)),I=w+Math.floor(L)*4,R=T*S;b+=R,y+=e[I]*e[I+3]/255*R}}const v=y/b;c=Math.max(c,v),n[l++]=NT(v)}}return c}static _downsample(e,t){const n=2*t*1*t,r=n*96,s=new Uint8ClampedArray(r);let o=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,s,o,t)),o+=n,a+=10*4;if(l>0){const c=255/l;for(let d=0;d<r;d++)s[d]*=c}return s}}const X2e=140,Y2e=2;class sy{constructor(e,t,n){const r=e.options,s=r.get(141),o=r.get(143),a=o.minimap,l=r.get(50),c=r.get(72);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=r.get(104),this.paddingTop=r.get(83).top,this.paddingBottom=r.get(83).bottom,this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=s,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=r.get(66),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=o.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=Fh(()=>Vv.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=sy._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=sy._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const n=e.getColor(NEe);return n?new ea(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(AEe);return t?ea._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class Hv{constructor(e,t,n,r,s,o,a,l,c){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=r,this.sliderTop=s,this.sliderHeight=o,this.topPaddingLineCount=a,this.startLineNumber=l,this.endLineNumber=c}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){const t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumber,e.endLineNumber);return t>n?null:[t,n]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,n,r,s,o,a,l,c,d,u){const h=e.pixelRatio,f=e.minimapLineHeight,g=Math.floor(e.canvasInnerHeight/f),m=e.lineHeight;if(e.minimapHeightIsEditorHeight){let L=l*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(L+=Math.max(0,s-e.lineHeight-e.paddingBottom));const T=Math.max(1,Math.floor(s*s/L)),I=Math.max(0,e.minimapHeight-T),R=I/(d-s),B=c*R,V=I>0,F=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),W=Math.floor(e.paddingTop/e.lineHeight);return new Hv(c,d,V,R,B,T,W,1,Math.min(a,F))}let y;if(o&&n!==a){const L=n-t+1;y=Math.floor(L*f/h)}else{const L=s/m;y=Math.floor(L*f/h)}const b=Math.floor(e.paddingTop/m);let v=Math.floor(e.paddingBottom/m);if(e.scrollBeyondLastLine){const L=s/m;v=Math.max(v,L-1)}let C;if(v>0){const L=s/m;C=(b+a+v-L-1)*f/h}else C=Math.max(0,(b+a)*f/h-y);C=Math.min(e.minimapHeight-y,C);const w=C/(d-s),S=c*w;if(g>=b+a+v){const L=C>0;return new Hv(c,d,L,w,S,y,b,1,a)}else{let L;t>1?L=t+b:L=Math.max(1,c/m);let T,I=Math.max(1,Math.floor(L-S*h/f));I<b?(T=b-I+1,I=1):(T=0,I=Math.max(1,I-b)),u&&u.scrollHeight===d&&(u.scrollTop>c&&(I=Math.min(I,u.startLineNumber),T=Math.max(T,u.topPaddingLineCount)),u.scrollTop<c&&(I=Math.max(I,u.startLineNumber),T=Math.min(T,u.topPaddingLineCount)));const R=Math.min(a,I-T+g-1),B=(c-r)/m;let V;return c>=e.paddingTop?V=(t-I+T+B)*f/h:V=c/e.paddingTop*(T+B)*f/h,new Hv(c,d,!0,w,V,y,T,I,R)}}}class qT{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}qT.INVALID=new qT(-1);class Y6{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new YZ(()=>qT.INVALID),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;const n=this._renderedLines._get().lines;for(let r=0,s=n.length;r<s;r++)if(n[r].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class y5{constructor(e,t,n,r){this._backgroundFillData=y5._createBackgroundFillData(t,n,r),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){const r=n.r,s=n.g,o=n.b,a=n.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let d=0;d<t;d++)for(let u=0;u<e;u++)l[c]=r,l[c+1]=s,l[c+2]=o,l[c+3]=a,c+=4;return l}}class oy{static compute(e,t,n){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const{minimapLineCount:r}=l_.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),s=t/r,o=s/2;if(!n||n.minimapLines.length===0){const y=[];if(y[0]=1,r>1){for(let b=0,v=r-1;b<v;b++)y[b]=Math.round(b*s+o);y[r-1]=t}return[new oy(s,y),[]]}const a=n.minimapLines,l=a.length,c=[];let d=0,u=0,h=1;const f=10;let g=[],m=null;for(let y=0;y<r;y++){const b=Math.max(h,Math.round(y*s)),v=Math.max(b,Math.round((y+1)*s));for(;d<l&&a[d]<b;){if(g.length<f){const w=d+1+u;m&&m.type==="deleted"&&m._oldIndex===d-1?m.deleteToLineNumber++:(m={type:"deleted",_oldIndex:d,deleteFromLineNumber:w,deleteToLineNumber:w},g.push(m)),u--}d++}let C;if(d<l&&a[d]<=v)C=a[d],d++;else if(y===0?C=1:y+1===r?C=t:C=Math.round(y*s+o),g.length<f){const w=d+1+u;m&&m.type==="inserted"&&m._i===y-1?m.insertToLineNumber++:(m={type:"inserted",_i:y,insertFromLineNumber:w,insertToLineNumber:w},g.push(m)),u++}c[y]=C,h=C}if(g.length<f)for(;d<l;){const y=d+1+u;m&&m.type==="deleted"&&m._oldIndex===d-1?m.deleteToLineNumber++:(m={type:"deleted",_oldIndex:d,deleteFromLineNumber:y,deleteToLineNumber:y},g.push(m)),u--,d++}else g=[{type:"flush"}];return[new oy(s,c),g]}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let r=this.modelLineToMinimapLine(t)-1;for(;r+1<this.minimapLines.length&&this.minimapLines[r+1]<=t;)r++;if(n===r){const s=this.minimapLines[n];if(s<e||s>t)return null}return[n+1,r+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),r=this.modelLineToMinimapLine(t);return e!==t&&r===n&&(r===this.minimapLines.length?n>1&&n--:r++),[n,r]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let n=this.minimapLines.length,r=0;for(let s=this.minimapLines.length-1;s>=0&&!(this.minimapLines[s]<e.fromLineNumber);s--)this.minimapLines[s]<=e.toLineNumber?(this.minimapLines[s]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,s),r=Math.max(r,s)):this.minimapLines[s]-=t;return[n,r]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}class Q2e extends ao{constructor(e){super(e),this.tokensColorTracker=XC.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new sy(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=oy.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new GT(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new sy(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const n of e.ranges){const r=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);r&&t.push({fromLineNumber:r[0],toLineNumber:r[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));const r={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(r)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,n]=oy.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const r of n)switch(r.type){case"deleted":this._actual.onLinesDeleted(r.deleteFromLineNumber,r.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(r.insertFromLineNumber,r.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){const r=[];for(let s=0,o=t-e+1;s<o;s++)n[s]?r[s]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+s-1]):r[s]=null;return r}return this._context.viewModel.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new Be(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){const s=this._samplingState.minimapLines[e-1],o=this._samplingState.minimapLines[t-1];n=new D(s,1,o,this._context.viewModel.getLineMaxColumn(o))}else n=new D(e,1,t,this._context.viewModel.getLineMaxColumn(t));const r=this._context.viewModel.getMinimapDecorationsInRange(n);if(this._samplingState){const s=[];for(const o of r){if(!o.options.minimap)continue;const a=o.range,l=this._samplingState.modelLineToMinimapLine(a.startLineNumber),c=this._samplingState.modelLineToMinimapLine(a.endLineNumber);s.push(new mZ(new D(l,a.startColumn,c,a.endColumn),o.options))}return s}return r}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new D(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class GT extends q{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(P6),this._domNode=tn(document.createElement("div")),Zc.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=tn(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=tn(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=tn(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=tn(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=tn(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=bi(this._domNode.domNode,Ce.POINTER_DOWN,n=>{if(n.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.button===0&&this._lastRenderData){const c=Mi(this._slider.domNode),d=c.top+c.height/2;this._startSliderDragging(n,d,this._lastRenderData.renderedLayout)}return}const s=this._model.options.minimapLineHeight,o=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.offsetY;let l=Math.floor(o/s)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new Y1,this._sliderPointerDownListener=bi(this._slider.domNode,Ce.POINTER_DOWN,n=>{n.preventDefault(),n.stopPropagation(),n.button===0&&this._lastRenderData&&this._startSliderDragging(n,n.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=vn.addTarget(this._domNode.domNode),this._sliderTouchStartListener=ee(this._domNode.domNode,yn.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=ee(this._domNode.domNode,yn.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=bi(this._domNode.domNode,yn.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n){if(!e.target||!(e.target instanceof Element))return;const r=e.pageX;this._slider.toggleClassName("active",!0);const s=(o,a)=>{const l=Mi(this._domNode.domNode),c=Math.min(Math.abs(a-r),Math.abs(a-l.left),Math.abs(a-l.left-l.width));if(Ar&&c>X2e){this._model.setScrollTop(n.scrollTop);return}const d=o-t;this._model.setScrollTop(n.getDesiredScrollTopFromDelta(d))};e.pageY!==t&&s(e.pageY,r),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>s(o.pageY,o.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new y5(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){var n;return(n=this._lastRenderData)===null||n===void 0||n.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var n;return(n=this._lastRenderData)===null||n===void 0||n.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(P6),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const n=Hv.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(D.compareRangesUsingStarts);const n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((h,f)=>(h.options.zIndex||0)-(f.options.zIndex||0));const{canvasInnerWidth:r,canvasInnerHeight:s}=this._model.options,o=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,r,s);const d=new Q6(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,d,e,o),this._renderDecorationsLineHighlights(c,n,d,e,o);const u=new Q6(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,u,e,o,l,a,r),this._renderDecorationsHighlights(c,n,u,e,o,l,a,r)}}_renderSelectionLineHighlights(e,t,n,r,s){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let o=0,a=0;for(const l of t){const c=r.intersectWithViewport(l);if(!c)continue;const[d,u]=c;for(let g=d;g<=u;g++)n.set(g,!0);const h=r.getYForLineNumber(d,s),f=r.getYForLineNumber(u,s);a>=h||(a>o&&e.fillRect(Ou,o,e.canvas.width,a-o),o=h),a=f}a>o&&e.fillRect(Ou,o,e.canvas.width,a-o)}_renderDecorationsLineHighlights(e,t,n,r,s){const o=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==Js.Inline)continue;const d=r.intersectWithViewport(l.range);if(!d)continue;const[u,h]=d,f=c.getColor(this._theme.value);if(!f||f.isTransparent())continue;let g=o.get(f.toString());g||(g=f.transparent(.5).toString(),o.set(f.toString(),g)),e.fillStyle=g;for(let m=u;m<=h;m++){if(n.has(m))continue;n.set(m,!0);const y=r.getYForLineNumber(u,s);e.fillRect(Ou,y,e.canvas.width,s)}}}_renderSelectionsHighlights(e,t,n,r,s,o,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const d=r.intersectWithViewport(c);if(!d)continue;const[u,h]=d;for(let f=u;f<=h;f++)this.renderDecorationOnLine(e,n,c,this._selectionColor,r,f,s,s,o,a,l)}}_renderDecorationsHighlights(e,t,n,r,s,o,a,l){for(const c of t){const d=c.options.minimap;if(!d)continue;const u=r.intersectWithViewport(c.range);if(!u)continue;const[h,f]=u,g=d.getColor(this._theme.value);if(!(!g||g.isTransparent()))for(let m=h;m<=f;m++)switch(d.position){case Js.Inline:this.renderDecorationOnLine(e,n,c.range,g,r,m,s,s,o,a,l);continue;case Js.Gutter:{const y=r.getYForLineNumber(m,s),b=2;this.renderDecoration(e,g,b,y,Y2e,s);continue}}}}renderDecorationOnLine(e,t,n,r,s,o,a,l,c,d,u){const h=s.getYForLineNumber(o,l);if(h+a<0||h>this._model.options.canvasInnerHeight)return;const{startLineNumber:f,endLineNumber:g}=n,m=f===o?n.startColumn:1,y=g===o?n.endColumn:this._model.getLineMaxColumn(o),b=this.getXOffsetForPosition(t,o,m,c,d,u),v=this.getXOffsetForPosition(t,o,y,c,d,u);this.renderDecoration(e,r,b,h,v-b,a)}getXOffsetForPosition(e,t,n,r,s,o){if(n===1)return Ou;if((n-1)*s>=o)return o;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[Ou];let d=Ou;for(let u=1;u<c.length+1;u++){const h=c.charCodeAt(u-1),f=h===9?r*s:Bh(h)?2*s:s,g=d+f;if(g>=o){l[u]=o;break}l[u]=g,d=g}e.set(t,l)}return n-1<l.length?l[n-1]:o}renderDecoration(e,t,n,r,s,o){e.fillStyle=t&&t.toString()||"",e.fillRect(n,r,s,o)}renderLines(e){const t=e.startLineNumber,n=e.endLineNumber,r=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const oe=this._lastRenderData._get();return new Y6(e,oe.imageData,oe.lines)}const s=this._getBuffer();if(!s)return null;const[o,a,l]=GT._renderUntouchedLines(s,e.topPaddingLineCount,t,n,r,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,n,l),d=this._model.getOptions().tabSize,u=this._model.options.defaultBackgroundColor,h=this._model.options.backgroundColor,f=this._model.options.foregroundAlpha,g=this._model.tokensColorTracker,m=g.backgroundIsLight(),y=this._model.options.renderMinimap,b=this._model.options.charRenderer(),v=this._model.options.fontScale,C=this._model.options.minimapCharWidth,S=(y===1?2:2+1)*v,L=r>S?Math.floor((r-S)/2):0,T=h.a/255,I=new ea(Math.round((h.r-u.r)*T+u.r),Math.round((h.g-u.g)*T+u.g),Math.round((h.b-u.b)*T+u.b),255);let R=e.topPaddingLineCount*r;const B=[];for(let oe=0,we=n-t+1;oe<we;oe++)l[oe]&&GT._renderLine(s,I,h.a,m,y,C,g,f,b,R,L,d,c[oe],v,r),B[oe]=new qT(R),R+=r;const V=o===-1?0:o,W=(a===-1?s.height:a)-V;return this._canvas.domNode.getContext("2d").putImageData(s,0,0,0,V,s.width,W),new Y6(e,s,B)}static _renderUntouchedLines(e,t,n,r,s,o){const a=[];if(!o){for(let R=0,B=r-n+1;R<B;R++)a[R]=!0;return[-1,-1,a]}const l=o._get(),c=l.imageData.data,d=l.rendLineNumberStart,u=l.lines,h=u.length,f=e.width,g=e.data,m=(r-n+1)*s*f*4;let y=-1,b=-1,v=-1,C=-1,w=-1,S=-1,L=t*s;for(let R=n;R<=r;R++){const B=R-n,V=R-d,F=V>=0&&V<h?u[V].dy:-1;if(F===-1){a[B]=!0,L+=s;continue}const W=F*f*4,X=(F+s)*f*4,oe=L*f*4,we=(L+s)*f*4;C===W&&S===oe?(C=X,S=we):(v!==-1&&(g.set(c.subarray(v,C),w),y===-1&&v===0&&v===w&&(y=C),b===-1&&C===m&&v===w&&(b=v)),v=W,C=X,w=oe,S=we),a[B]=!1,L+=s}v!==-1&&(g.set(c.subarray(v,C),w),y===-1&&v===0&&v===w&&(y=C),b===-1&&C===m&&v===w&&(b=v));const T=y===-1?-1:y/(f*4),I=b===-1?-1:b/(f*4);return[T,I,a]}static _renderLine(e,t,n,r,s,o,a,l,c,d,u,h,f,g,m){const y=f.content,b=f.tokens,v=e.width-o,C=m===1;let w=Ou,S=0,L=0;for(let T=0,I=b.getCount();T<I;T++){const R=b.getEndOffset(T),B=b.getForeground(T),V=a.getColor(B);for(;S<R;S++){if(w>v)return;const F=y.charCodeAt(S);if(F===9){const W=h-(S+L)%h;L+=W-1,w+=W*o}else if(F===32)w+=o;else{const W=Bh(F)?2:1;for(let X=0;X<W;X++)if(s===2?c.blockRenderChar(e,w,d+u,V,l,t,n,C):c.renderChar(e,w,d+u,F,V,l,t,n,g,r,C),w+=o,w>v)return}}}}}class Q6{constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let r=0,s=this._endLineNumber-this._startLineNumber+1;r<s;r++)this._values[r]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}class J2e extends ao{constructor(e){super(e);const n=this._context.configuration.options.get(143);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._domNode=tn(document.createElement("div")),Zc.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const n=this._context.configuration.options.get(143);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0}addWidget(e){const t=tn(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference===t?(this._updateMaxMinWidth(),!1):(n.preference=t,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const r=this._widgets[t].domNode.domNode;delete this._widgets[t],r.parentNode.removeChild(r),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){var e,t;let n=0;const r=Object.keys(this._widgets);for(let s=0,o=r.length;s<o;s++){const a=r[s],c=(t=(e=this._widgets[a].widget).getMinContentWidthInPx)===null||t===void 0?void 0:t.call(e);typeof c<"u"&&(n=Math.max(n,c))}this._context.viewLayout.setOverlayWidgetsMinWidth(n)}_renderWidget(e){const t=e.domNode;if(e.preference===null){t.setTop("");return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){const n=t.domNode.clientHeight;t.setTop(this._editorHeight-n-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let n=0,r=t.length;n<r;n++){const s=t[n];this._renderWidget(this._widgets[s])}}}class eAe{constructor(e,t){const n=e.options;this.lineHeight=n.get(66),this.pixelRatio=n.get(141),this.overviewRulerLanes=n.get(82),this.renderBorder=n.get(81);const r=t.getColor(WNe);this.borderColor=r?r.toString():null,this.hideCursor=n.get(59);const s=t.getColor(VZ);this.cursorColor=s?s.transparent(.7).toString():null,this.themeType=t.type;const o=n.get(72),a=o.enabled,l=o.side,c=t.getColor(VNe),d=Gn.getDefaultBackground();c?this.backgroundColor=c:a&&l==="right"?this.backgroundColor=d:this.backgroundColor=null;const h=n.get(143).overviewRuler;this.top=h.top,this.right=h.right,this.domWidth=h.width,this.domHeight=h.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[f,g]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=f,this.w=g}_initLanes(e,t,n){const r=t-e;if(n>=3){const s=Math.floor(r/3),o=Math.floor(r/3),a=r-s-o,l=e,c=l+s,d=l+s+a;return[[0,l,c,l,d,l,c,l],[0,s,a,s+a,o,s+a+o,a+o,s+a+o]]}else if(n===2){const s=Math.floor(r/2),o=r-s,a=e,l=a+s;return[[0,a,a,a,l,a,a,a],[0,s,s,s,o,s+o,s+o,s+o]]}else{const s=e,o=r;return[[0,s,s,s,s,s,s,s],[0,o,o,o,o,o,o,o]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&K.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class tAe extends ao{constructor(e){super(e),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=tn(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Gn.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new eAe(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(U.compare),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return e.affectsOverviewRuler?this._markRenderingIsMaybeNeeded():!1}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return e.scrollHeightChanged?this._markRenderingIsNeeded():!1}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){const e=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(e?K.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}const t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(G0.compareByRenderingProps),this._actualShouldRender===1&&!G0.equalsArr(this._renderedDecorations,t)&&(this._actualShouldRender=2),this._actualShouldRender===1&&!fi(this._renderedCursorPositions,this._cursorPositions,(g,m)=>g.lineNumber===m.lineNumber)&&(this._actualShouldRender=2),this._actualShouldRender===1)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const n=this._settings.canvasWidth,r=this._settings.canvasHeight,s=this._settings.lineHeight,o=this._context.viewLayout,a=this._context.viewLayout.getScrollHeight(),l=r/a,c=6*this._settings.pixelRatio|0,d=c/2|0,u=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(u.fillStyle=K.Format.CSS.formatHexA(e),u.fillRect(0,0,n,r)):(u.clearRect(0,0,n,r),u.fillStyle=K.Format.CSS.formatHexA(e),u.fillRect(0,0,n,r)):u.clearRect(0,0,n,r);const h=this._settings.x,f=this._settings.w;for(const g of t){const m=g.color,y=g.data;u.fillStyle=m;let b=0,v=0,C=0;for(let w=0,S=y.length/3;w<S;w++){const L=y[3*w],T=y[3*w+1],I=y[3*w+2];let R=o.getVerticalOffsetForLineNumber(T)*l|0,B=(o.getVerticalOffsetForLineNumber(I)+s)*l|0;if(B-R<c){let F=(R+B)/2|0;F<d?F=d:F+d>r&&(F=r-d),R=F-d,B=F+d}R>C+1||L!==b?(w!==0&&u.fillRect(h[b],v,f[b],C-v),b=L,v=R,C=B):B>C&&(C=B)}u.fillRect(h[b],v,f[b],C-v)}if(!this._settings.hideCursor&&this._settings.cursorColor){const g=2*this._settings.pixelRatio|0,m=g/2|0,y=this._settings.x[7],b=this._settings.w[7];u.fillStyle=this._settings.cursorColor;let v=-100,C=-100;for(let w=0,S=this._cursorPositions.length;w<S;w++){const L=this._cursorPositions[w];let T=o.getVerticalOffsetForLineNumber(L.lineNumber)*l|0;T<m?T=m:T+m>r&&(T=r-m);const I=T-m,R=I+g;I>C+1?(w!==0&&u.fillRect(y,v,b,C-v),v=I,C=R):R>C&&(C=R)}u.fillRect(y,v,b,C-v)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(u.beginPath(),u.lineWidth=1,u.strokeStyle=this._settings.borderColor,u.moveTo(0,0),u.lineTo(0,r),u.stroke(),u.moveTo(0,0),u.lineTo(n,0),u.stroke())}}class J6{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class rX{constructor(e,t,n,r){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=n,this.color=r,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class nAe{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(rX.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),r=Math.floor(this._outerHeight),s=n/r,o=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){const d=this._zones[l];if(!e){const w=d.getColorZones();if(w){a.push(w);continue}}const u=this._getVerticalOffsetForLine(d.startLineNumber),h=d.heightInLines===0?this._getVerticalOffsetForLine(d.endLineNumber)+t:u+d.heightInLines*t,f=Math.floor(s*u),g=Math.floor(s*h);let m=Math.floor((f+g)/2),y=g-m;y<o&&(y=o),m-y<0&&(m=y),m+y>n&&(m=n-y);const b=d.color;let v=this._color2Id[b];v||(v=++this._lastAssignedId,this._color2Id[b]=v,this._id2Color[v]=b);const C=new J6(m-y,m+y,v);d.setColorZone(C),a.push(C)}return this._colorZonesInvalid=!1,a.sort(J6.compare),a}}class iAe extends zC{constructor(e,t){super(),this._context=e;const n=this._context.configuration.options;this._domNode=tn(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new nAe(r=>this._context.viewLayout.getVerticalOffsetForLineNumber(r)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(66)),this._zoneManager.setPixelRatio(n.get(141)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(66)&&(this._zoneManager.setLineHeight(t.get(66)),this._render()),e.hasChanged(141)&&(this._zoneManager.setPixelRatio(t.get(141)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),r=this._zoneManager.getId2Color(),s=this._domNode.domNode.getContext("2d");return s.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(s,n,r,e),!0}_renderOneLane(e,t,n,r){let s=0,o=0,a=0;for(const l of t){const c=l.colorId,d=l.from,u=l.to;c!==s?(e.fillRect(0,o,r,a-o),s=c,e.fillStyle=n[s],o=d,a=u):a>=d?a=Math.max(a,u):(e.fillRect(0,o,r,a-o),o=d,a=u)}e.fillRect(0,o,r,a-o)}}class rAe extends ao{constructor(e){super(e),this.domNode=tn(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(101),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(101),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:r}=this._context.viewModel.model.getOptions(),s=r;let o=t-e;for(;o>0;){const a=tn(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(s),this.domNode.appendChild(a),this._renderedRulers.push(a),o--}return}let n=e-t;for(;n>0;){const r=this._renderedRulers.pop();this.domNode.removeChild(r),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){const r=this._renderedRulers[t],s=this._rulers[t];r.setBoxShadow(s.color?`1px 0 0 0 ${s.color} inset`:""),r.setHeight(Math.min(e.scrollHeight,1e6)),r.setLeft(s.column*this._typicalHalfwidthCharacterWidth)}}}class sAe extends ao{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const n=this._context.configuration.options.get(102);this._useShadows=n.useShadows,this._domNode=tn(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(143);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const n=this._context.configuration.options.get(102);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}class oAe{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class aAe{constructor(e,t){this.lineNumber=e,this.ranges=t}}function lAe(i){return new oAe(i)}function cAe(i){return new aAe(i.lineNumber,i.ranges.map(lAe))}class li extends Mp{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(66),this._roundedSelection=t.get(100),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(66),this._roundedSelection=t.get(100),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){const r=this._typicalHalfwidthCharacterWidth/4;let s=null,o=null;if(n&&n.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!s&&c<n.length;c++)n[c].lineNumber===a&&(s=n[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=n.length-1;!o&&c>=0;c--)n[c].lineNumber===l&&(o=n[c].ranges[0]);s&&!s.startStyle&&(s=null),o&&!o.startStyle&&(o=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],d=c.left,u=c.left+c.width,h={top:0,bottom:0},f={top:0,bottom:0};if(a>0){const g=t[a-1].ranges[0].left,m=t[a-1].ranges[0].left+t[a-1].ranges[0].width;Xw(d-g)<r?h.top=2:d>g&&(h.top=1),Xw(u-m)<r?f.top=2:g<u&&u<m&&(f.top=1)}else s&&(h.top=s.startStyle.top,f.top=s.endStyle.top);if(a+1<l){const g=t[a+1].ranges[0].left,m=t[a+1].ranges[0].left+t[a+1].ranges[0].width;Xw(d-g)<r?h.bottom=2:g<d&&d<m&&(h.bottom=1),Xw(u-m)<r?f.bottom=2:u<m&&(f.bottom=1)}else o&&(h.bottom=o.startStyle.bottom,f.bottom=o.endStyle.bottom);c.startStyle=h,c.endStyle=f}}_getVisibleRangesWithStyle(e,t,n){const s=(t.linesVisibleRangesForRange(e,!0)||[]).map(cAe);return!this._visibleRangesHaveGaps(s)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,s,n),s}_createSelectionPiece(e,t,n,r,s){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;left:"+r.toString()+"px;width:"+s.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,n,r){if(r.length===0)return;const s=!!r[0].ranges[0].startStyle,o=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),l=r[0].lineNumber,c=r[r.length-1].lineNumber;for(let d=0,u=r.length;d<u;d++){const h=r[d],f=h.lineNumber,g=f-t,m=n&&(f===c||f===l)?a:o,y=n&&f===l?1:0;let b="",v="";for(let C=0,w=h.ranges.length;C<w;C++){const S=h.ranges[C];if(s){const T=S.startStyle,I=S.endStyle;if(T.top===1||T.bottom===1){b+=this._createSelectionPiece(y,m,li.SELECTION_CLASS_NAME,S.left-li.ROUNDED_PIECE_WIDTH,li.ROUNDED_PIECE_WIDTH);let R=li.EDITOR_BACKGROUND_CLASS_NAME;T.top===1&&(R+=" "+li.SELECTION_TOP_RIGHT),T.bottom===1&&(R+=" "+li.SELECTION_BOTTOM_RIGHT),b+=this._createSelectionPiece(y,m,R,S.left-li.ROUNDED_PIECE_WIDTH,li.ROUNDED_PIECE_WIDTH)}if(I.top===1||I.bottom===1){b+=this._createSelectionPiece(y,m,li.SELECTION_CLASS_NAME,S.left+S.width,li.ROUNDED_PIECE_WIDTH);let R=li.EDITOR_BACKGROUND_CLASS_NAME;I.top===1&&(R+=" "+li.SELECTION_TOP_LEFT),I.bottom===1&&(R+=" "+li.SELECTION_BOTTOM_LEFT),b+=this._createSelectionPiece(y,m,R,S.left+S.width,li.ROUNDED_PIECE_WIDTH)}}let L=li.SELECTION_CLASS_NAME;if(s){const T=S.startStyle,I=S.endStyle;T.top===0&&(L+=" "+li.SELECTION_TOP_LEFT),T.bottom===0&&(L+=" "+li.SELECTION_BOTTOM_LEFT),I.top===0&&(L+=" "+li.SELECTION_TOP_RIGHT),I.bottom===0&&(L+=" "+li.SELECTION_BOTTOM_RIGHT)}v+=this._createSelectionPiece(y,m,L,S.left,S.width)}e[g][0]+=b,e[g][1]+=v}}prepareRender(e){const t=[],n=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let o=n;o<=r;o++){const a=o-n;t[a]=["",""]}const s=[];for(let o=0,a=this._selections.length;o<a;o++){const l=this._selections[o];if(l.isEmpty()){s[o]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[o]);s[o]=c,this._actualRenderOneSelection(t,n,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=s,this._renderResult=t.map(([o,a])=>o+a)}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}li.SELECTION_CLASS_NAME="selected-text";li.SELECTION_TOP_LEFT="top-left-radius";li.SELECTION_BOTTOM_LEFT="bottom-left-radius";li.SELECTION_TOP_RIGHT="top-right-radius";li.SELECTION_BOTTOM_RIGHT="bottom-right-radius";li.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";li.ROUNDED_PIECE_WIDTH=10;Ka((i,e)=>{const t=i.getColor(BRe);t&&!t.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${t}; }`)});function Xw(i){return i<0?-i:i}class eW{constructor(e,t,n,r,s,o,a){this.top=e,this.left=t,this.paddingLeft=n,this.width=r,this.height=s,this.textContent=o,this.textContentClassName=a}}class tW{constructor(e){this._context=e;const t=this._context.configuration.options,n=t.get(50);this._cursorStyle=t.get(28),this._lineHeight=t.get(66),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=tn(document.createElement("div")),this._domNode.setClassName(`cursor ${v_}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Ir(this._domNode,n),this._domNode.setDisplay("none"),this._position=new U(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(50);return this._cursorStyle=t.get(28),this._lineHeight=t.get(66),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),Ir(this._domNode,n),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,n=this._context.viewModel.getLineContent(e),[r,s]=xTe(n,t-1);return[new U(e,r+1),n.substring(r,s)]}_prepareRender(e){let t="",n="";const[r,s]=this._getGraphemeAwarePosition();if(this._cursorStyle===fr.Line||this._cursorStyle===fr.LineThin){const h=e.visibleRangeForPosition(r);if(!h||h.outsideRenderedLine)return null;let f;this._cursorStyle===fr.Line?(f=A8(this._lineCursorWidth>0?this._lineCursorWidth:2),f>2&&(t=s,n=this._getTokenClassName(r))):f=A8(1);let g=h.left,m=0;f>=2&&g>=1&&(m=1,g-=m);const y=e.getVerticalOffsetForLineNumber(r.lineNumber)-e.bigNumbersDelta;return new eW(y,g,m,f,this._lineHeight,t,n)}const o=e.linesVisibleRangesForRange(new D(r.lineNumber,r.column,r.lineNumber,r.column+s.length),!1);if(!o||o.length===0)return null;const a=o[0];if(a.outsideRenderedLine||a.ranges.length===0)return null;const l=a.ranges[0],c=s==="	"?this._typicalHalfwidthCharacterWidth:l.width<1?this._typicalHalfwidthCharacterWidth:l.width;this._cursorStyle===fr.Block&&(t=s,n=this._getTokenClassName(r));let d=e.getVerticalOffsetForLineNumber(r.lineNumber)-e.bigNumbersDelta,u=this._lineHeight;return(this._cursorStyle===fr.Underline||this._cursorStyle===fr.UnderlineThin)&&(d+=this._lineHeight-2,u=2),new eW(d,l.left,0,c,u,t,n)}_getTokenClassName(e){const t=this._context.viewModel.getViewLineData(e.lineNumber),n=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(n)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${v_} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class ay extends ao{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(90),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new tW(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=tn(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new za,this._cursorFlatBlinkInterval=new BC,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(90),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,r=this._secondaryCursors.length;n<r;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,n){const r=this._secondaryCursors.length!==t.length||this._cursorSmoothCaretAnimation==="explicit"&&n!==3;if(this._primaryCursor.onCursorPositionChanged(e,r),this._updateBlinking(),this._secondaryCursors.length<t.length){const s=t.length-this._secondaryCursors.length;for(let o=0;o<s;o++){const a=new tW(this._context);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}}else if(this._secondaryCursors.length>t.length){const s=this._secondaryCursors.length-t.length;for(let o=0;o<s;o++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let s=0;s<t.length;s++)this._secondaryCursors[s].onCursorPositionChanged(t[s],r)}onCursorStateChanged(e){const t=[];for(let r=0,s=e.selections.length;r<s;r++)t[r]=e.selections[r].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);const n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=n=>{for(let r=0,s=e.ranges.length;r<s;r++)if(e.ranges[r].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[r].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,n=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},ay.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},ay.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case fr.Line:e+=" cursor-line-style";break;case fr.Block:e+=" cursor-block-style";break;case fr.Underline:e+=" cursor-underline-style";break;case fr.LineThin:e+=" cursor-line-thin-style";break;case fr.BlockOutline:e+=" cursor-block-outline-style";break;case fr.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let n=0;const r=this._primaryCursor.render(e);r&&(t[n++]=r);for(let s=0,o=this._secondaryCursors.length;s<o;s++){const a=this._secondaryCursors[s].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}}ay.BLINK_INTERVAL=500;Ka((i,e)=>{const t=i.getColor(VZ);if(t){let n=i.getColor(kNe);n||(n=t.opposite()),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${t}; border-color: ${t}; color: ${n}; }`),Rl(i.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${n}; border-right: 1px solid ${n}; }`)}});const mE=()=>{throw new Error("Invalid change accessor")};class dAe extends ao{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(143);this._lineHeight=t.get(66),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=tn(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=tn(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const r of e)t.set(r.id,r);let n=!1;return this._context.viewModel.changeWhitespace(r=>{const s=Object.keys(this._zones);for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._zones[l],d=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=d.isInHiddenArea;const u=t.get(l);u&&(u.afterLineNumber!==d.afterViewLineNumber||u.height!==d.heightInPx)&&(r.changeOneWhitespace(l,d.afterViewLineNumber,d.heightInPx),this._safeCallOnComputedHeight(c.delegate,d.heightInPx),n=!0)}}),n}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(143);return this._lineHeight=t.get(66),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(66)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){var t,n;return(n=(t=e.ordinal)!==null&&t!==void 0?t:e.afterColumn)!==null&&n!==void 0?n:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const o=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new U(o,this._context.viewModel.model.getLineMaxColumn(o))}let n;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const r=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),s=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!s,afterViewLineNumber:r.lineNumber,heightInPx:s?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(n=>{const r={addZone:s=>(t=!0,this._addZone(n,s)),removeZone:s=>{s&&(t=this._removeZone(n,s)||t)},layoutZone:s=>{s&&(t=this._layoutZone(n,s)||t)}};uAe(e,r),r.addZone=mE,r.removeZone=mE,r.layoutZone=mE}),t}_addZone(e,t){const n=this._computeWhitespaceProps(t),s={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:tn(t.domNode),marginDomNode:t.marginDomNode?tn(t.marginDomNode):null};return this._safeCallOnComputedHeight(s.delegate,n.heightInPx),s.domNode.setPosition("absolute"),s.domNode.domNode.style.width="100%",s.domNode.setDisplay("none"),s.domNode.setAttribute("monaco-view-zone",s.whitespaceId),this.domNode.appendChild(s.domNode),s.marginDomNode&&(s.marginDomNode.setPosition("absolute"),s.marginDomNode.domNode.style.width="100%",s.marginDomNode.setDisplay("none"),s.marginDomNode.setAttribute("monaco-view-zone",s.whitespaceId),this.marginDomNode.appendChild(s.marginDomNode)),this._zones[s.whitespaceId]=s,this.setShouldRender(),s.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.parentNode.removeChild(n.domNode.domNode),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.parentNode.removeChild(n.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t],r=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=r.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,r.afterViewLineNumber,r.heightInPx),this._safeCallOnComputedHeight(n.delegate,r.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){ut(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){ut(n)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,n={};let r=!1;for(const o of t)this._zones[o.id].isInHiddenArea||(n[o.id]=o,r=!0);const s=Object.keys(this._zones);for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._zones[l];let d=0,u=0,h="none";n.hasOwnProperty(l)?(d=n[l].verticalOffset-e.bigNumbersDelta,u=n[l].height,h="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(n[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(d),c.domNode.setHeight(u),c.domNode.setDisplay(h),c.marginDomNode&&(c.marginDomNode.setTop(d),c.marginDomNode.setHeight(u),c.marginDomNode.setDisplay(h))}r&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function uAe(i,e){try{return i(e)}catch(t){ut(t)}}class hAe{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class fAe{constructor(e,t,n){this.configuration=e,this.theme=new hAe(t),this.viewModel=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}class gAe{constructor(e,t,n,r){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=n,this._model=r,this.visibleRange=new D(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class pAe extends ao{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=tn(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const n=this._context.configuration.options.get(143),r=n.contentWidth-n.verticalScrollbarWidth;this.contentWidth!==r&&(this.contentWidth=r,e=!0);const s=n.contentLeft;return this.contentLeft!==s&&(this.contentLeft=s,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){var t;let n=0;const r=e.getDecorationsInViewport();for(const s of r){if(!s.options.blockClassName)continue;let o=this.blocks[n];o||(o=this.blocks[n]=tn(document.createElement("div")),this.domNode.appendChild(o));let a,l;s.options.blockIsAfterEnd?(a=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!1),l=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0)):(a=e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!0),l=s.range.isEmpty()&&!s.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0));const[c,d,u,h]=(t=s.options.blockPadding)!==null&&t!==void 0?t:[0,0,0,0];o.setClassName("blockDecorations-block "+s.options.blockClassName),o.setLeft(this.contentLeft-h),o.setWidth(this.contentWidth+h+d),o.setTop(a-e.scrollTop-c),o.setHeight(l-a+c+u),n++}for(let s=n;s<this.blocks.length;s++)this.blocks[s].domNode.remove();this.blocks.length=n}}class mAe extends Mp{constructor(e){super(),this._context=e,this._options=new nW(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new nW(this._context.configuration);return this._options.equals(t)?e.hasChanged(143):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber-t+1,s=new Array(r);for(let a=0;a<r;a++)s[a]=!0;const o=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,s);this._renderResult=[];for(let a=e.viewportData.startLineNumber;a<=e.viewportData.endLineNumber;a++){const l=a-e.viewportData.startLineNumber,c=o.data[l];let d=null;if(this._options.renderWhitespace==="selection"){const u=this._selection;for(const h of u){if(h.endLineNumber<a||h.startLineNumber>a)continue;const f=h.startLineNumber===a?h.startColumn:c.minColumn,g=h.endLineNumber===a?h.endColumn:c.maxColumn;f<g&&(d||(d=[]),d.push(new fZ(f-1,g-1)))}}this._renderResult[l]=this._applyRenderWhitespace(e,a,d,c)}}_applyRenderWhitespace(e,t,n,r){if(this._options.renderWhitespace==="selection"&&!n||this._options.renderWhitespace==="trailing"&&r.continuesWithWrappedLine)return"";const s=this._context.theme.getColor(Gd),o=this._options.renderWithSVG,a=r.content,l=this._options.stopRenderingLineAfter===-1?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),c=r.continuesWithWrappedLine,d=r.minColumn-1,u=this._options.renderWhitespace==="boundary",h=this._options.renderWhitespace==="trailing",f=this._options.lineHeight,g=this._options.middotWidth,m=this._options.wsmiddotWidth,y=this._options.spaceWidth,b=Math.abs(m-y),v=Math.abs(g-y),C=b<v?11825:183,w=this._options.canUseHalfwidthRightwardsArrow;let S="",L=!1,T=ns(a),I;T===-1?(L=!0,T=l,I=l):I=Dl(a);let R=0,B=n&&n[R],V=0;for(let F=d;F<l;F++){const W=a.charCodeAt(F);if(B&&F>=B.endOffset&&(R++,B=n&&n[R]),W!==9&&W!==32||h&&!L&&F<=I)continue;if(u&&F>=T&&F<=I&&W===32){const oe=F-1>=0?a.charCodeAt(F-1):0,we=F+1<l?a.charCodeAt(F+1):0;if(oe!==32&&we!==32)continue}if(u&&c&&F===l-1){const oe=F-1>=0?a.charCodeAt(F-1):0;if(W===32&&oe!==32&&oe!==9)continue}if(n&&(!B||B.startOffset>F||B.endOffset<=F))continue;const X=e.visibleRangeForPosition(new U(t,F+1));X&&(o?(V=Math.max(V,X.left),W===9?S+=this._renderArrow(f,y,X.left):S+=`<circle cx="${(X.left+y/2).toFixed(2)}" cy="${(f/2).toFixed(2)}" r="${(y/7).toFixed(2)}" />`):W===9?S+=`<div class="mwh" style="left:${X.left}px;height:${f}px;">${w?String.fromCharCode(65515):String.fromCharCode(8594)}</div>`:S+=`<div class="mwh" style="left:${X.left}px;height:${f}px;">${String.fromCharCode(C)}</div>`)}return o?(V=Math.round(V+y),`<svg style="position:absolute;width:${V}px;height:${f}px" viewBox="0 0 ${V} ${f}" xmlns="http://www.w3.org/2000/svg" fill="${s}">`+S+"</svg>"):S}_renderArrow(e,t,n){const r=t/7,s=t,o=e/2,a=n,l={x:0,y:r/2},c={x:100/125*s,y:l.y},d={x:c.x-.2*c.x,y:c.y+.2*c.x},u={x:d.x+.1*c.x,y:d.y+.1*c.x},h={x:u.x+.35*c.x,y:u.y-.35*c.x},f={x:h.x,y:-h.y},g={x:u.x,y:-u.y},m={x:d.x,y:-d.y},y={x:c.x,y:-c.y},b={x:l.x,y:-l.y};return`<path d="M ${[l,c,d,u,h,f,g,m,y,b].map(w=>`${(a+w.x).toFixed(2)} ${(o+w.y).toFixed(2)}`).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class nW{constructor(e){const t=e.options,n=t.get(50),r=t.get(38);r==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):r==="svg"?(this.renderWhitespace=t.get(98),this.renderWithSVG=!0):(this.renderWhitespace=t.get(98),this.renderWithSVG=!1),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(66),this.stopRenderingLineAfter=t.get(116)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}var _Ae=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},bAe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let tP=class extends zC{constructor(e,t,n,r,s,o,a){super(),this._instantiationService=a,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new Be(1,1,1,1)],this._renderAnimationFrame=null;const l=new T2e(t,r,s,e);this._context=new fAe(t,n,r),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(QA,this._context,l,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=tn(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=tn(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=tn(document.createElement("div")),Zc.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new P2e(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new zD(this._context,this._linesContent),this._viewZones=new dAe(this._context),this._viewParts.push(this._viewZones);const c=new tAe(this._context);this._viewParts.push(c);const d=new sAe(this._context);this._viewParts.push(d);const u=new L2e(this._context);this._viewParts.push(u),u.addDynamicOverlay(new E2e(this._context)),u.addDynamicOverlay(new li(this._context)),u.addDynamicOverlay(new O2e(this._context)),u.addDynamicOverlay(new A2e(this._context)),u.addDynamicOverlay(new mAe(this._context));const h=new D2e(this._context);this._viewParts.push(h),h.addDynamicOverlay(new N2e(this._context)),h.addDynamicOverlay(new q2e(this._context)),h.addDynamicOverlay(new K2e(this._context)),h.addDynamicOverlay(new ZC(this._context)),this._glyphMarginWidgets=new U2e(this._context),this._viewParts.push(this._glyphMarginWidgets);const f=new Zg(this._context);f.getDomNode().appendChild(this._viewZones.marginDomNode),f.getDomNode().appendChild(h.getDomNode()),f.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(f),this._contentWidgets=new I2e(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new ay(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new J2e(this._context),this._viewParts.push(this._overlayWidgets);const g=new rAe(this._context);this._viewParts.push(g);const m=new pAe(this._context);this._viewParts.push(m);const y=new Q2e(this._context);if(this._viewParts.push(y),c){const b=this._scrollbar.getOverviewRulerLayoutInfo();b.parent.insertBefore(c.getDomNode(),b.insertBefore)}this._linesContent.appendChild(u.getDomNode()),this._linesContent.appendChild(g.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(f.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(y.getDomNode()),this._overflowGuardContainer.appendChild(m.domNode),this.domNode.appendChild(this._overflowGuardContainer),o?o.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new SNe(this._context,l,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._shouldRecomputeGlyphMarginLanes&&(this._shouldRecomputeGlyphMarginLanes=!1,this._context.configuration.setGlyphMarginDecorationLaneCount(this._computeGlyphMarginLaneCount())),sh.onRenderStart(),this._renderNow()}_computeGlyphMarginLaneCount(){const e=this._context.viewModel.model;let t=[];t=t.concat(e.getAllMarginDecorations().map(s=>{var o,a;const l=(a=(o=s.options.glyphMargin)===null||o===void 0?void 0:o.position)!==null&&a!==void 0?a:p_.Left;return{range:s.range,lane:l}})),t=t.concat(this._glyphMarginWidgets.getWidgets().map(s=>({range:e.validateRange(s.preference.range),lane:s.preference.lane}))),t.sort((s,o)=>D.compareRangesUsingStarts(s.range,o.range));let n=null,r=null;for(const s of t)if(s.lane===p_.Left&&(!n||D.compareRangesUsingEnds(n,s.range)<0)&&(n=s.range),s.lane===p_.Right&&(!r||D.compareRangesUsingEnds(r,s.range)<0)&&(r=s.range),n&&r){if(n.endLineNumber<r.startLineNumber){n=null;continue}if(r.endLineNumber<n.startLineNumber){r=null;continue}return 2}return 1}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new eNe(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new U(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const t=this._context.configuration.options.get(143);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(140)+" "+YA(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=LT(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){vAe(()=>this._actualRender())}_getViewPartsToRender(){const e=[];let t=0;for(const n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_actualRender(){if(!z3(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const n=new gAe(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const r=new qEe(this._context.viewLayout,n,this._viewLines);for(const s of e)s.prepareRender(r);for(const s of e)s.render(r),s.onDidRender()}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){const n=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),r=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();const s=this._viewLines.visibleRangeForPosition(new U(r.lineNumber,r.column));return s?s.left:-1}getTargetAtClientPoint(e,t){const n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?UD.convertViewToModelMouseTarget(n,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new iAe(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const n of this._viewParts)n.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,n,r,s,o,a,l,c;this._contentWidgets.setWidgetPosition(e.widget,(n=(t=e.position)===null||t===void 0?void 0:t.position)!==null&&n!==void 0?n:null,(s=(r=e.position)===null||r===void 0?void 0:r.secondaryPosition)!==null&&s!==void 0?s:null,(a=(o=e.position)===null||o===void 0?void 0:o.preference)!==null&&a!==void 0?a:null,(c=(l=e.position)===null||l===void 0?void 0:l.positionAffinity)!==null&&c!==void 0?c:null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){const t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};tP=_Ae([bAe(6,rt)],tP);function vAe(i){try{return i()}catch(e){ut(e)}}class sX{constructor(e,t,n,r,s,o){this.id=e,this.label=t,this.alias=n,this._precondition=r,this._run=s,this._contextKeyService=o}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}function Kh(i){let e=0,t=0,n=0,r=0;for(let s=0,o=i.length;s<o;s++){const a=i.charCodeAt(s);a===13?(e===0&&(t=s),e++,s+1<o&&i.charCodeAt(s+1)===10?(r|=2,s++):r|=3,n=s+1):a===10&&(r|=1,e===0&&(t=s),e++,n=s+1)}return e===0&&(t=i.length),[e,t,i.length-n,r]}class iW{constructor(e,t,n,r){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=n,this.isInvalid=r}}class yAe{constructor(e,t,n,r,s,o){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=r,this.nestingLevelOfEqualBracketType=s,this.bracketPairNode=o}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class CAe extends yAe{constructor(e,t,n,r,s,o,a){super(e,t,n,r,s,o),this.minVisibleColumnIndentation=a}}class ly{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}}ly.zero=new ly(0,0);function wAe(i,e,t,n){return i!==t?mi(t-i,n):mi(0,n-e)}const _s=0;function ZT(i){return i===0}const Do=Math.pow(2,26);function mi(i,e){return i*Do+e}function ra(i){const e=i,t=Math.floor(e/Do),n=e-t*Do;return new ly(t,n)}function SAe(i){return Math.floor(i/Do)}function Xn(i,e){let t=i+e;return e>=Do&&(t=t-i%Do),t}function xAe(i,e){return i.reduce((t,n)=>Xn(t,e(n)),_s)}function oX(i,e){return i===e}function cy(i,e){const t=i,n=e;if(n-t<=0)return _s;const s=Math.floor(t/Do),o=Math.floor(n/Do),a=n-o*Do;if(s===o){const l=t-s*Do;return mi(0,a-l)}else return mi(o-s,a)}function w_(i,e){return i<e}function S_(i,e){return i<=e}function uv(i,e){return i>=e}function qm(i){return mi(i.lineNumber-1,i.column-1)}function kg(i,e){const t=i,n=Math.floor(t/Do),r=t-n*Do,s=e,o=Math.floor(s/Do),a=s-o*Do;return new D(n+1,r+1,o+1,a+1)}function TAe(i){const e=Kc(i);return mi(e.length-1,e[e.length-1].length)}class Zd{static fromModelContentChanges(e){return e.map(n=>{const r=D.lift(n.range);return new Zd(qm(r.getStartPosition()),qm(r.getEndPosition()),TAe(n.text))}).reverse()}constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}toString(){return`[${ra(this.startOffset)}...${ra(this.endOffset)}) -> ${ra(this.newLength)}`}}class kAe{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(t=>C5.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):null;return n===null?null:cy(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?mi(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):mi(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=ra(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?mi(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):mi(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(S_(n,e)){this.nextEditIdx++;const r=ra(n),s=ra(this.translateOldToCur(t.endOffsetBeforeObj)),o=r.lineCount-s.lineCount;this.deltaOldToNewLineCount+=o;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=r.columnCount-s.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class C5{static from(e){return new C5(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,n){this.endOffsetBeforeObj=ra(t),this.endOffsetAfterObj=ra(Xn(e,n)),this.offsetObj=ra(e)}}const Tx=[];class Ai{static create(e,t){if(e<=128&&t.length===0){let n=Ai.cache[e];return n||(n=new Ai(e,t),Ai.cache[e]=n),n}return new Ai(e,t)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const n=t.getKey(e);let r=n>>5;if(r===0){const o=1<<n|this.items;return o===this.items?this:Ai.create(o,this.additionalItems)}r--;const s=this.additionalItems.slice(0);for(;s.length<r;)s.push(0);return s[r]|=1<<(n&31),Ai.create(this.items,s)}merge(e){const t=this.items|e.items;if(this.additionalItems===Tx&&e.additionalItems===Tx)return t===this.items?this:t===e.items?e:Ai.create(t,Tx);const n=[];for(let r=0;r<Math.max(this.additionalItems.length,e.additionalItems.length);r++){const s=this.additionalItems[r]||0,o=e.additionalItems[r]||0;n.push(s|o)}return Ai.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}}Ai.cache=new Array(129);Ai.empty=Ai.create(0,Tx);const rW={getKey(i){return i}};class aX{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class w5{get length(){return this._length}constructor(e){this._length=e}}class dy extends w5{static create(e,t,n){let r=e.length;return t&&(r=Xn(r,t.length)),n&&(r=Xn(r,n.length)),new dy(r,e,t,n,t?t.missingOpeningBracketIds:Ai.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,n,r,s){super(e),this.openingBracket=t,this.child=n,this.closingBracket=r,this.missingOpeningBracketIds=s}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new dy(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(Xn(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class Xc extends w5{static create23(e,t,n,r=!1){let s=e.length,o=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(s=Xn(s,t.length),o=o.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");s=Xn(s,n.length),o=o.merge(n.missingOpeningBracketIds)}return r?new LAe(s,e.listHeight+1,e,t,n,o):new uy(s,e.listHeight+1,e,t,n,o)}static getEmpty(){return new DAe(_s,0,[],Ai.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(0,n),n}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let t=this;for(;t.kind===4;){const n=t.childrenLength;if(n===0)throw new Ti;t=t.getChild(n-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let r=1;r<e;r++){const s=this.getChild(r);t=Xn(t,s.length),n=n.merge(s.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,r=e;for(let s=0;s<this.childrenLength;s++){const o=this.getChild(s);o&&(n=Math.min(n,o.computeMinIndentation(r,t)),r=Xn(r,o.length))}return this.cachedMinIndentation=n,n}}class uy extends Xc{get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,n,r,s,o){super(e,t,o),this._item1=n,this._item2=r,this._item3=s}deepClone(){return new uy(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class LAe extends uy{toMutable(){return new uy(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class XT extends Xc{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,n,r){super(e,t,r),this._children=n}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new XT(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class DAe extends XT{toMutable(){return new XT(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const IAe=[];class S5 extends w5{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return IAe}deepClone(){return this}}class ng extends S5{get kind(){return 0}get missingOpeningBracketIds(){return Ai.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=ra(e),r=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,s=SAe(Xn(e,this.length))+1;let o=Number.MAX_SAFE_INTEGER;for(let a=r;a<=s;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const d=Wi.visibleColumnFromColumn(c,l,t.getOptions().tabSize);o=Math.min(o,d)}return o}}class YT extends S5{static create(e,t,n){return new YT(e,t,n)}get kind(){return 1}get missingOpeningBracketIds(){return Ai.getEmpty()}constructor(e,t,n){super(e),this.bracketInfo=t,this.bracketIds=n}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class RAe extends S5{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}let Xu=class{constructor(e,t,n,r,s){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=r,this.astNode=s}};class lX{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new EAe(this.textModel,this.bracketTokens),this._offset=_s,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return mi(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=Xn(this._offset,e);const t=ra(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Xn(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class EAe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const s=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=s.length,s}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const s=this.lineTokens,o=s.getCount();let a=null;if(this.lineTokenOffset<o){const l=s.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<o&&l===s.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=kr.getTokenType(l)===0,d=kr.containsBalancedBrackets(l),u=s.getEndOffset(this.lineTokenOffset);if(d&&c&&this.lineCharOffset<u){const h=s.getLanguageId(this.lineTokenOffset),f=this.line.substring(this.lineCharOffset,u),g=this.bracketTokens.getSingleLanguageBracketTokens(h),m=g.regExpGlobal;if(m){m.lastIndex=0;const y=m.exec(f);y&&(a=g.getToken(y[0]),a&&(this.lineCharOffset+=y.index))}}if(n+=u-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=u}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}const r=wAe(e,t,this.lineIdx,this.lineCharOffset);return new Xu(r,0,-1,Ai.getEmpty(),new ng(r))}}class NAe{constructor(e,t){this.text=e,this._offset=_s,this.idx=0;const n=t.getRegExpStr(),r=n?new RegExp(n+`|
`,"gi"):null,s=[];let o,a=0,l=0,c=0,d=0;const u=[];for(let g=0;g<60;g++)u.push(new Xu(mi(0,g),0,-1,Ai.getEmpty(),new ng(mi(0,g))));const h=[];for(let g=0;g<60;g++)h.push(new Xu(mi(1,g),0,-1,Ai.getEmpty(),new ng(mi(1,g))));if(r)for(r.lastIndex=0;(o=r.exec(e))!==null;){const g=o.index,m=o[0];if(m===`
`)a++,l=g+1;else{if(c!==g){let y;if(d===a){const b=g-c;if(b<u.length)y=u[b];else{const v=mi(0,b);y=new Xu(v,0,-1,Ai.getEmpty(),new ng(v))}}else{const b=a-d,v=g-l;if(b===1&&v<h.length)y=h[v];else{const C=mi(b,v);y=new Xu(C,0,-1,Ai.getEmpty(),new ng(C))}}s.push(y)}s.push(t.getToken(m)),c=g+m.length,d=a}}const f=e.length;if(c!==f){const g=d===a?mi(0,f-c):mi(a-d,f-l);s.push(new Xu(g,0,-1,Ai.getEmpty(),new ng(g)))}this.length=mi(a,f-l),this.tokens=s}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new Pxe}}class x5{static createFromLanguage(e,t){function n(s){return t.getKey(`${s.languageId}:::${s.bracketText}`)}const r=new Map;for(const s of e.bracketsNew.openingBrackets){const o=mi(0,s.bracketText.length),a=n(s),l=Ai.getEmpty().add(a,rW);r.set(s.bracketText,new Xu(o,1,a,l,YT.create(o,s,l)))}for(const s of e.bracketsNew.closingBrackets){const o=mi(0,s.bracketText.length);let a=Ai.getEmpty();const l=s.getOpeningBrackets();for(const c of l)a=a.add(n(c),rW);r.set(s.bracketText,new Xu(o,2,n(l[0]),a,YT.create(o,s,a)))}return new x5(r)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>AAe(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,n]of this.map)if(n.kind===2&&n.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}function AAe(i){let e=No(i);return/^[\w ]+/.test(i)&&(e=`\\b${e}`),/[\w ]+$/.test(i)&&(e=`${e}\\b`),e}class cX{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=x5.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function PAe(i){if(i.length===0)return null;if(i.length===1)return i[0];let e=0;function t(){if(e>=i.length)return null;const o=e,a=i[o].listHeight;for(e++;e<i.length&&i[e].listHeight===a;)e++;return e-o>=2?dX(o===0&&e===i.length?i:i.slice(o,e),!1):i[o]}let n=t(),r=t();if(!r)return n;for(let o=t();o;o=t())sW(n,r)<=sW(r,o)?(n=_E(n,r),r=o):r=_E(r,o);return _E(n,r)}function dX(i,e=!1){if(i.length===0)return null;if(i.length===1)return i[0];let t=i.length;for(;t>3;){const n=t>>1;for(let r=0;r<n;r++){const s=r<<1;i[r]=Xc.create23(i[s],i[s+1],s+3===t?i[s+2]:null,e)}t=n}return Xc.create23(i[0],i[1],t>=3?i[2]:null,e)}function sW(i,e){return Math.abs(i.listHeight-e.listHeight)}function _E(i,e){return i.listHeight===e.listHeight?Xc.create23(i,e,null,!1):i.listHeight>e.listHeight?MAe(i,e):OAe(e,i)}function MAe(i,e){i=i.toMutable();let t=i;const n=[];let r;for(;;){if(e.listHeight===t.listHeight){r=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let s=n.length-1;s>=0;s--){const o=n[s];r?o.childrenLength>=3?r=Xc.create23(o.unappendChild(),r,null,!1):(o.appendChildOfSameHeight(r),r=void 0):o.handleChildrenChanged()}return r?Xc.create23(i,r,null,!1):i}function OAe(i,e){i=i.toMutable();let t=i;const n=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let r=e;for(let s=n.length-1;s>=0;s--){const o=n[s];r?o.childrenLength>=3?r=Xc.create23(r,o.unprependChild(),null,!1):(o.prependChildOfSameHeight(r),r=void 0):o.handleChildrenChanged()}return r?Xc.create23(r,i,null,!1):i}class FAe{constructor(e){this.lastOffset=_s,this.nextNodes=[e],this.offsets=[_s],this.idxs=[]}readLongestNodeAt(e,t){if(w_(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=Nb(this.nextNodes);if(!n)return;const r=Nb(this.offsets);if(w_(e,r))return;if(w_(r,e))if(Xn(r,n.length)<=e)this.nextNodeAfterCurrent();else{const s=bE(n);s!==-1?(this.nextNodes.push(n.getChild(s)),this.offsets.push(r),this.idxs.push(s)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const s=bE(n);if(s===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(s)),this.offsets.push(r),this.idxs.push(s)}}}}nextNodeAfterCurrent(){for(;;){const e=Nb(this.offsets),t=Nb(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const n=Nb(this.nextNodes),r=bE(n,this.idxs[this.idxs.length-1]);if(r!==-1){this.nextNodes.push(n.getChild(r)),this.offsets.push(Xn(e,t.length)),this.idxs[this.idxs.length-1]=r;break}else this.idxs.pop()}}}function bE(i,e=-1){for(;;){if(e++,e>=i.childrenLength)return-1;if(i.getChild(e))return e}}function Nb(i){return i.length>0?i[i.length-1]:void 0}function nP(i,e,t,n){return new BAe(i,e,t,n).parseDocument()}class BAe{constructor(e,t,n,r){if(this.tokenizer=e,this.createImmutableLists=r,this._itemsConstructed=0,this._itemsFromCache=0,n&&r)throw new Error("Not supported");this.oldNodeReader=n?new FAe(n):void 0,this.positionMapper=new kAe(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Ai.getEmpty(),0);return e||(e=Xc.getEmpty()),e}parseList(e,t){const n=[];for(;;){let s=this.tryReadChildFromCache(e);if(!s){const o=this.tokenizer.peek();if(!o||o.kind===2&&o.bracketIds.intersects(e))break;s=this.parseChild(e,t+1)}s.kind===4&&s.childrenLength===0||n.push(s)}return this.oldNodeReader?PAe(n):dX(n,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!ZT(t)){const n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),r=>t!==null&&!w_(r.length,t)?!1:r.canBeReused(e));if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}}parseChild(e,t){this._itemsConstructed++;const n=this.tokenizer.read();switch(n.kind){case 2:return new RAe(n.bracketIds,n.length);case 0:return n.astNode;case 1:{if(t>300)return new ng(n.length);const r=e.merge(n.bracketIds),s=this.parseList(r,t+1),o=this.tokenizer.peek();return o&&o.kind===2&&(o.bracketId===n.bracketId||o.bracketIds.intersects(n.bracketIds))?(this.tokenizer.read(),dy.create(n.astNode,s,o.astNode)):dy.create(n.astNode,s,null)}default:throw new Error("unexpected")}}}function QT(i,e){if(i.length===0)return e;if(e.length===0)return i;const t=new uu(oW(i)),n=oW(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let r=t.dequeue();function s(c){if(c===void 0){const u=t.takeWhile(h=>!0)||[];return r&&u.unshift(r),u}const d=[];for(;r&&!ZT(c);){const[u,h]=r.splitAt(c);d.push(u),c=cy(u.lengthAfter,c),r=h??t.dequeue()}return ZT(c)||d.push(new oh(!1,c,c)),d}const o=[];function a(c,d,u){if(o.length>0&&oX(o[o.length-1].endOffset,c)){const h=o[o.length-1];o[o.length-1]=new Zd(h.startOffset,d,Xn(h.newLength,u))}else o.push({startOffset:c,endOffset:d,newLength:u})}let l=_s;for(const c of n){const d=s(c.lengthBefore);if(c.modified){const u=xAe(d,f=>f.lengthBefore),h=Xn(l,u);a(l,h,c.lengthAfter),l=h}else for(const u of d){const h=l;l=Xn(l,u.lengthBefore),u.modified&&a(h,l,u.lengthAfter)}}return o}class oh{constructor(e,t,n){this.modified=e,this.lengthBefore=t,this.lengthAfter=n}splitAt(e){const t=cy(e,this.lengthAfter);return oX(t,_s)?[this,void 0]:this.modified?[new oh(this.modified,this.lengthBefore,e),new oh(this.modified,_s,t)]:[new oh(this.modified,e,e),new oh(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${ra(this.lengthBefore)} -> ${ra(this.lengthAfter)}`}}function oW(i){const e=[];let t=_s;for(const n of i){const r=cy(t,n.startOffset);ZT(r)||e.push(new oh(!1,r,r));const s=cy(n.startOffset,n.endOffset);e.push(new oh(!0,s,n.newLength)),t=n.endOffset}return e}class WAe extends q{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new H,this.denseKeyProvider=new aX,this.brackets=new cX(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const n=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),r=new NAe(this.textModel.getValue(),n);this.initialAstWithoutTokens=nP(r,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(n=>new Zd(mi(n.fromLineNumber-1,0),mi(n.toLineNumber,0),mi(n.toLineNumber-n.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=Zd.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const n=QT(this.queuedTextEdits,e);this.queuedTextEdits=n,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=QT(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,n){const r=t,s=new lX(this.textModel,this.brackets);return nP(s,e,r,n)}getBracketsInRange(e,t){this.flushQueue();const n=mi(e.startLineNumber-1,e.startColumn-1),r=mi(e.endLineNumber-1,e.endColumn-1);return new Mc(s=>{const o=this.initialAstWithoutTokens||this.astWithTokens;iP(o,_s,o.length,n,r,s,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();const n=qm(e.getStartPosition()),r=qm(e.getEndPosition());return new Mc(s=>{const o=this.initialAstWithoutTokens||this.astWithTokens,a=new VAe(s,t,this.textModel);rP(o,_s,o.length,n,r,a,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return hX(t,_s,t.length,qm(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return uX(t,_s,t.length,qm(e))}}function uX(i,e,t,n){if(i.kind===4||i.kind===2){const r=[];for(const s of i.children)t=Xn(e,s.length),r.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let s=r.length-1;s>=0;s--){const{nodeOffsetStart:o,nodeOffsetEnd:a}=r[s];if(w_(o,n)){const l=uX(i.children[s],o,a,n);if(l)return l}}return null}else{if(i.kind===3)return null;if(i.kind===1){const r=kg(e,t);return{bracketInfo:i.bracketInfo,range:r}}}return null}function hX(i,e,t,n){if(i.kind===4||i.kind===2){for(const r of i.children){if(t=Xn(e,r.length),w_(n,t)){const s=hX(r,e,t,n);if(s)return s}e=t}return null}else{if(i.kind===3)return null;if(i.kind===1){const r=kg(e,t);return{bracketInfo:i.bracketInfo,range:r}}}return null}function iP(i,e,t,n,r,s,o,a,l,c,d=!1){if(o>200)return!0;e:for(;;)switch(i.kind){case 4:{const u=i.childrenLength;for(let h=0;h<u;h++){const f=i.getChild(h);if(f){if(t=Xn(e,f.length),S_(e,r)&&uv(t,n)){if(uv(t,r)){i=f;continue e}if(!iP(f,e,t,n,r,s,o,0,l,c))return!1}e=t}}return!0}case 2:{const u=!c||!i.closingBracket||i.closingBracket.bracketInfo.closesColorized(i.openingBracket.bracketInfo);let h=0;if(l){let g=l.get(i.openingBracket.text);g===void 0&&(g=0),h=g,u&&(g++,l.set(i.openingBracket.text,g))}const f=i.childrenLength;for(let g=0;g<f;g++){const m=i.getChild(g);if(m){if(t=Xn(e,m.length),S_(e,r)&&uv(t,n)){if(uv(t,r)&&m.kind!==1){i=m,u?(o++,a=h+1):a=h;continue e}if((u||m.kind!==1||!i.closingBracket)&&!iP(m,e,t,n,r,s,u?o+1:o,u?h+1:h,l,c,!i.closingBracket))return!1}e=t}}return l==null||l.set(i.openingBracket.text,h),!0}case 3:{const u=kg(e,t);return s(new iW(u,o-1,0,!0))}case 1:{const u=kg(e,t);return s(new iW(u,o-1,a-1,d))}case 0:return!0}}class VAe{constructor(e,t,n){this.push=e,this.includeMinIndentation=t,this.textModel=n}}function rP(i,e,t,n,r,s,o,a){var l;if(o>200)return!0;let c=!0;if(i.kind===2){let d=0;if(a){let f=a.get(i.openingBracket.text);f===void 0&&(f=0),d=f,f++,a.set(i.openingBracket.text,f)}const u=Xn(e,i.openingBracket.length);let h=-1;if(s.includeMinIndentation&&(h=i.computeMinIndentation(e,s.textModel)),c=s.push(new CAe(kg(e,t),kg(e,u),i.closingBracket?kg(Xn(u,((l=i.child)===null||l===void 0?void 0:l.length)||_s),t):void 0,o,d,i,h)),e=u,c&&i.child){const f=i.child;if(t=Xn(e,f.length),S_(e,r)&&uv(t,n)&&(c=rP(f,e,t,n,r,s,o+1,a),!c))return!1}a==null||a.set(i.openingBracket.text,d)}else{let d=e;for(const u of i.children){const h=d;if(d=Xn(d,u.length),S_(h,r)&&S_(n,d)&&(c=rP(u,h,d,n,r,s,o,a),!c))return!1}}return c}class HAe extends q{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new vr),this.onDidChangeEmitter=new H,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange(n=>{var r;(!n.languageId||!((r=this.bracketPairsTree.value)===null||r===void 0)&&r.object.didLanguageChange(n.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}))}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;(e=this.bracketPairsTree.value)===null||e===void 0||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new ae;this.bracketPairsTree.value=UAe(e.add(new WAe(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||Mc.empty}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||Mc.empty}getBracketsInRange(e,t=!1){var n;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((n=this.bracketPairsTree.value)===null||n===void 0?void 0:n.object.getBracketsInRange(e,t))||Mc.empty}findMatchingBracketUp(e,t,n){const r=this.textModel.validatePosition(t),s=this.textModel.getLanguageIdAtPosition(r.lineNumber,r.column);if(this.canBuildAST){const o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew.getClosingBracketInfo(e);if(!o)return null;const a=this.getBracketPairsInRange(D.fromPositions(t,t)).findLast(l=>o.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const o=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!a)return null;const l=a.textIsBracket[o];return l?Yw(this._findMatchingBracketUp(l,r,vE(n))):null}}matchBracket(e,t){if(this.canBuildAST){const n=this.getBracketPairsInRange(D.fromPositions(e,e)).filter(r=>r.closingBracketRange!==void 0&&(r.openingBracketRange.containsPosition(e)||r.closingBracketRange.containsPosition(e))).findLastMaxBy(na(r=>r.openingBracketRange.containsPosition(e)?r.openingBracketRange:r.closingBracketRange,D.compareRangesUsingStarts));return n?[n.openingBracketRange,n.closingBracketRange]:null}else{const n=vE(t);return this._matchBracket(this.textModel.validatePosition(e),n)}}_establishBracketSearchOffsets(e,t,n,r){const s=t.getCount(),o=t.getLanguageId(r);let a=Math.max(0,e.column-1-n.maxBracketLength);for(let c=r-1;c>=0;c--){const d=t.getEndOffset(c);if(d<=a)break;if(nc(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){a=d;break}}let l=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let c=r+1;c<s;c++){const d=t.getStartOffset(c);if(d>=l)break;if(nc(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){l=d;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const n=e.lineNumber,r=this.textModel.tokenization.getLineTokens(n),s=this.textModel.getLineContent(n),o=r.findTokenIndexAtOffset(e.column-1);if(o<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(r.getLanguageId(o)).brackets;if(a&&!nc(r.getStandardTokenType(o))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,r,a,o),d=null;for(;;){const u=wa.findNextBracketInRange(a.forwardRegex,n,s,l,c);if(!u)break;if(u.startColumn<=e.column&&e.column<=u.endColumn){const h=s.substring(u.startColumn-1,u.endColumn-1).toLowerCase(),f=this._matchFoundBracket(u,a.textIsBracket[h],a.textIsOpenBracket[h],t);if(f){if(f instanceof Ed)return null;d=f}}l=u.endColumn-1}if(d)return d}if(o>0&&r.getStartOffset(o)===e.column-1){const l=o-1,c=this.languageConfigurationService.getLanguageConfiguration(r.getLanguageId(l)).brackets;if(c&&!nc(r.getStandardTokenType(l))){const{searchStartOffset:d,searchEndOffset:u}=this._establishBracketSearchOffsets(e,r,c,l),h=wa.findPrevBracketInRange(c.reversedRegex,n,s,d,u);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn){const f=s.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),g=this._matchFoundBracket(h,c.textIsBracket[f],c.textIsOpenBracket[f],t);if(g)return g instanceof Ed?null:g}}}return null}_matchFoundBracket(e,t,n,r){if(!t)return null;const s=n?this._findMatchingBracketDown(t,e.getEndPosition(),r):this._findMatchingBracketUp(t,e.getStartPosition(),r);return s?s instanceof Ed?s:[e,s]:null}_findMatchingBracketUp(e,t,n){const r=e.languageId,s=e.reversedRegex;let o=-1,a=0;const l=(c,d,u,h)=>{for(;;){if(n&&++a%100===0&&!n())return Ed.INSTANCE;const f=wa.findPrevBracketInRange(s,c,d,u,h);if(!f)break;const g=d.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(e.isOpen(g)?o++:e.isClose(g)&&o--,o===0)return f;h=f.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const d=this.textModel.tokenization.getLineTokens(c),u=d.getCount(),h=this.textModel.getLineContent(c);let f=u-1,g=h.length,m=h.length;c===t.lineNumber&&(f=d.findTokenIndexAtOffset(t.column-1),g=t.column-1,m=t.column-1);let y=!0;for(;f>=0;f--){const b=d.getLanguageId(f)===r&&!nc(d.getStandardTokenType(f));if(b)y?g=d.getStartOffset(f):(g=d.getStartOffset(f),m=d.getEndOffset(f));else if(y&&g!==m){const v=l(c,h,g,m);if(v)return v}y=b}if(y&&g!==m){const b=l(c,h,g,m);if(b)return b}}return null}_findMatchingBracketDown(e,t,n){const r=e.languageId,s=e.forwardRegex;let o=1,a=0;const l=(d,u,h,f)=>{for(;;){if(n&&++a%100===0&&!n())return Ed.INSTANCE;const g=wa.findNextBracketInRange(s,d,u,h,f);if(!g)break;const m=u.substring(g.startColumn-1,g.endColumn-1).toLowerCase();if(e.isOpen(m)?o++:e.isClose(m)&&o--,o===0)return g;h=g.endColumn-1}return null},c=this.textModel.getLineCount();for(let d=t.lineNumber;d<=c;d++){const u=this.textModel.tokenization.getLineTokens(d),h=u.getCount(),f=this.textModel.getLineContent(d);let g=0,m=0,y=0;d===t.lineNumber&&(g=u.findTokenIndexAtOffset(t.column-1),m=t.column-1,y=t.column-1);let b=!0;for(;g<h;g++){const v=u.getLanguageId(g)===r&&!nc(u.getStandardTokenType(g));if(v)b||(m=u.getStartOffset(g)),y=u.getEndOffset(g);else if(b&&m!==y){const C=l(d,f,m,y);if(C)return C}b=v}if(b&&m!==y){const v=l(d,f,m,y);if(v)return v}}return null}findPrevBracket(e){var t;const n=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getFirstBracketBefore(n))||null;let r=null,s=null,o=null;for(let a=n.lineNumber;a>=1;a--){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),d=this.textModel.getLineContent(a);let u=c-1,h=d.length,f=d.length;if(a===n.lineNumber){u=l.findTokenIndexAtOffset(n.column-1),h=n.column-1,f=n.column-1;const m=l.getLanguageId(u);r!==m&&(r=m,s=this.languageConfigurationService.getLanguageConfiguration(r).brackets,o=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew)}let g=!0;for(;u>=0;u--){const m=l.getLanguageId(u);if(r!==m){if(s&&o&&g&&h!==f){const b=wa.findPrevBracketInRange(s.reversedRegex,a,d,h,f);if(b)return this._toFoundBracket(o,b);g=!1}r=m,s=this.languageConfigurationService.getLanguageConfiguration(r).brackets,o=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew}const y=!!s&&!nc(l.getStandardTokenType(u));if(y)g?h=l.getStartOffset(u):(h=l.getStartOffset(u),f=l.getEndOffset(u));else if(o&&s&&g&&h!==f){const b=wa.findPrevBracketInRange(s.reversedRegex,a,d,h,f);if(b)return this._toFoundBracket(o,b)}g=y}if(o&&s&&g&&h!==f){const m=wa.findPrevBracketInRange(s.reversedRegex,a,d,h,f);if(m)return this._toFoundBracket(o,m)}}return null}findNextBracket(e){var t;const n=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getFirstBracketAfter(n))||null;const r=this.textModel.getLineCount();let s=null,o=null,a=null;for(let l=n.lineNumber;l<=r;l++){const c=this.textModel.tokenization.getLineTokens(l),d=c.getCount(),u=this.textModel.getLineContent(l);let h=0,f=0,g=0;if(l===n.lineNumber){h=c.findTokenIndexAtOffset(n.column-1),f=n.column-1,g=n.column-1;const y=c.getLanguageId(h);s!==y&&(s=y,o=this.languageConfigurationService.getLanguageConfiguration(s).brackets,a=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew)}let m=!0;for(;h<d;h++){const y=c.getLanguageId(h);if(s!==y){if(a&&o&&m&&f!==g){const v=wa.findNextBracketInRange(o.forwardRegex,l,u,f,g);if(v)return this._toFoundBracket(a,v);m=!1}s=y,o=this.languageConfigurationService.getLanguageConfiguration(s).brackets,a=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew}const b=!!o&&!nc(c.getStandardTokenType(h));if(b)m||(f=c.getStartOffset(h)),g=c.getEndOffset(h);else if(a&&o&&m&&f!==g){const v=wa.findNextBracketInRange(o.forwardRegex,l,u,f,g);if(v)return this._toFoundBracket(a,v)}m=b}if(a&&o&&m&&f!==g){const y=wa.findNextBracketInRange(o.forwardRegex,l,u,f,g);if(y)return this._toFoundBracket(a,y)}}return null}findEnclosingBrackets(e,t){const n=this.textModel.validatePosition(e);if(this.canBuildAST){const f=D.fromPositions(n),g=this.getBracketPairsInRange(D.fromPositions(n,n)).findLast(m=>m.closingBracketRange!==void 0&&m.range.strictContainsRange(f));return g?[g.openingBracketRange,g.closingBracketRange]:null}const r=vE(t),s=this.textModel.getLineCount(),o=new Map;let a=[];const l=(f,g)=>{if(!o.has(f)){const m=[];for(let y=0,b=g?g.brackets.length:0;y<b;y++)m[y]=0;o.set(f,m)}a=o.get(f)};let c=0;const d=(f,g,m,y,b)=>{for(;;){if(r&&++c%100===0&&!r())return Ed.INSTANCE;const v=wa.findNextBracketInRange(f.forwardRegex,g,m,y,b);if(!v)break;const C=m.substring(v.startColumn-1,v.endColumn-1).toLowerCase(),w=f.textIsBracket[C];if(w&&(w.isOpen(C)?a[w.index]++:w.isClose(C)&&a[w.index]--,a[w.index]===-1))return this._matchFoundBracket(v,w,!1,r);y=v.endColumn-1}return null};let u=null,h=null;for(let f=n.lineNumber;f<=s;f++){const g=this.textModel.tokenization.getLineTokens(f),m=g.getCount(),y=this.textModel.getLineContent(f);let b=0,v=0,C=0;if(f===n.lineNumber){b=g.findTokenIndexAtOffset(n.column-1),v=n.column-1,C=n.column-1;const S=g.getLanguageId(b);u!==S&&(u=S,h=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,h))}let w=!0;for(;b<m;b++){const S=g.getLanguageId(b);if(u!==S){if(h&&w&&v!==C){const T=d(h,f,y,v,C);if(T)return Yw(T);w=!1}u=S,h=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,h)}const L=!!h&&!nc(g.getStandardTokenType(b));if(L)w||(v=g.getStartOffset(b)),C=g.getEndOffset(b);else if(h&&w&&v!==C){const T=d(h,f,y,v,C);if(T)return Yw(T)}w=L}if(h&&w&&v!==C){const S=d(h,f,y,v,C);if(S)return Yw(S)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.textModel.getValueInRange(t);n=n.toLowerCase();const r=e.getBracketInfo(n);return r?{range:t,bracketInfo:r}:null}}function UAe(i,e){return{object:i,dispose:()=>e==null?void 0:e.dispose()}}function vE(i){if(typeof i>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=i}}class Ed{constructor(){this._searchCanceledBrand=void 0}}Ed.INSTANCE=new Ed;function Yw(i){return i instanceof Ed?null:i}class jAe extends q{constructor(e){super(),this.textModel=e,this.colorProvider=new fX,this.onDidChangeEmitter=new H,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,n,r){return r?[]:t===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(e,!0).map(o=>({id:`bracket${o.range.toString()}-${o.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(o,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:o.range})).toArray():[]}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new D(1,1,this.textModel.getLineCount(),1),e,t):[]}}class fX{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}Ka((i,e)=>{const t=[UZ,jZ,zZ,$Z,KZ,qZ],n=new fX;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${i.getColor($Ne)}; }`);const r=t.map(s=>i.getColor(s)).filter(s=>!!s).filter(s=>!s.isTransparent());for(let s=0;s<30;s++){const o=r[s%r.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(s)} { color: ${o}; }`)}});function Qw(i){return i.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class xr{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,n,r){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=r}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Qw(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Qw(this.oldText)}")`:`(replace@${this.oldPosition} "${Qw(this.oldText)}" with "${Qw(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const r=t.length;dl(e,r,n),n+=4;for(let s=0;s<r;s++)RLe(e,t.charCodeAt(s),n),n+=2;return n}static _readString(e,t){const n=cl(e,t);return t+=4,NLe(e,t,n)}writeSize(){return 4+4+xr._writeStringSize(this.oldText)+xr._writeStringSize(this.newText)}write(e,t){return dl(e,this.oldPosition,t),t+=4,dl(e,this.newPosition,t),t+=4,t=xr._writeString(e,this.oldText,t),t=xr._writeString(e,this.newText,t),t}static read(e,t,n){const r=cl(e,t);t+=4;const s=cl(e,t);t+=4;const o=xr._readString(e,t);t+=xr._writeStringSize(o);const a=xr._readString(e,t);return t+=xr._writeStringSize(a),n.push(new xr(r,o,s,a)),t}}function zAe(i,e){return i===null||i.length===0?e:new sc(i,e).compress()}class sc{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),r=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(r),r=this._getCurr(++t);continue}if(r===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(r.oldEnd<=n.newPosition){this._acceptCurr(r),r=this._getCurr(++t);continue}if(n.newEnd<=r.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(r.oldPosition<n.newPosition){const[c,d]=sc._splitCurr(r,n.newPosition-r.oldPosition);this._acceptCurr(c),r=d;continue}if(n.newPosition<r.oldPosition){const[c,d]=sc._splitPrev(n,r.oldPosition-n.newPosition);this._acceptPrev(c),n=d;continue}let a,l;if(r.oldEnd===n.newEnd)a=n,l=r,n=this._getPrev(++e),r=this._getCurr(++t);else if(r.oldEnd<n.newEnd){const[c,d]=sc._splitPrev(n,r.oldLength);a=c,l=r,n=d,r=this._getCurr(++t)}else{const[c,d]=sc._splitCurr(r,n.newLength);a=n,l=c,n=this._getPrev(++e),r=d}this._result[this._resultLen++]=new xr(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const s=sc._merge(this._result);return sc._removeNoOps(s)}_acceptCurr(e){this._result[this._resultLen++]=sc._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=sc._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new xr(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new xr(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),r=e.newText.substr(t);return[new xr(e.oldPosition,e.oldText,e.newPosition,n),new xr(e.oldEnd,"",e.newPosition+t,r)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),r=e.oldText.substr(t);return[new xr(e.oldPosition,n,e.newPosition,e.newText),new xr(e.oldPosition+t,r,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let n=0,r=e[0];for(let s=1;s<e.length;s++){const o=e[s];r.oldEnd===o.oldPosition?r=new xr(r.oldPosition,r.oldText+o.oldText,r.newPosition,r.newText+o.newText):(t[n++]=r,r=o)}return t[n++]=r,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let n=0;for(let r=0;r<e.length;r++){const s=e[r];s.oldText!==s.newText&&(t[n++]=s)}return t}}function Eu(i){return i===47||i===92}function gX(i){return i.replace(/[\\/]/g,Pi.sep)}function $Ae(i){return i.indexOf("/")===-1&&(i=gX(i)),/^[a-zA-Z]:(\/|$)/.test(i)&&(i="/"+i),i}function aW(i,e=Pi.sep){if(!i)return"";const t=i.length,n=i.charCodeAt(0);if(Eu(n)){if(Eu(i.charCodeAt(1))&&!Eu(i.charCodeAt(2))){let s=3;const o=s;for(;s<t&&!Eu(i.charCodeAt(s));s++);if(o!==s&&!Eu(i.charCodeAt(s+1))){for(s+=1;s<t;s++)if(Eu(i.charCodeAt(s)))return i.slice(0,s+1).replace(/[\\/]/g,e)}}return e}else if(pX(n)&&i.charCodeAt(1)===58)return Eu(i.charCodeAt(2))?i.slice(0,2)+e:i.slice(0,2);let r=i.indexOf("://");if(r!==-1){for(r+=3;r<t;r++)if(Eu(i.charCodeAt(r)))return i.slice(0,r+1)}return""}function sP(i,e,t,n=Ll){if(i===e)return!0;if(!i||!e||e.length>i.length)return!1;if(t){if(!A3(i,e))return!1;if(e.length===i.length)return!0;let s=e.length;return e.charAt(e.length-1)===n&&s--,i.charAt(s)===n}return e.charAt(e.length-1)!==n&&(e+=n),i.indexOf(e)===0}function pX(i){return i>=65&&i<=90||i>=97&&i<=122}function KAe(i,e=Ar){return e?pX(i.charCodeAt(0))&&i.charCodeAt(1)===58:!1}function ic(i){return yT(i,!0)}class qAe{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:O0(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,n=!1){if(e.scheme===t.scheme){if(e.scheme===bt.file)return sP(ic(e),ic(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(cW(e.authority,t.authority))return sP(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return Ye.joinPath(e,...t)}basenameOrAuthority(e){return ha(e)||e.authority}basename(e){return Pi.basename(e.path)}extname(e){return Pi.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===bt.file?t=Ye.file(Yq(ic(e))).path:(t=Pi.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===bt.file?t=Ye.file(Xq(ic(e))).path:t=Pi.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!cW(e.authority,t.authority))return;if(e.scheme===bt.file){const s=tTe(ic(e),ic(t));return Ar?gX(s):s}let n=e.path||"/";const r=t.path||"/";if(this._ignorePathCasing(e)){let s=0;for(const o=Math.min(n.length,r.length);s<o&&!(n.charCodeAt(s)!==r.charCodeAt(s)&&n.charAt(s).toLowerCase()!==r.charAt(s).toLowerCase());s++);n=r.substr(0,s)+n.substr(s)}return Pi.relative(n,r)}resolvePath(e,t){if(e.scheme===bt.file){const n=Ye.file(eTe(ic(e),t));return e.with({authority:n.authority,path:n.path})}return t=$Ae(t),e.with({path:Pi.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&Pm(e,t)}hasTrailingPathSeparator(e,t=Ll){if(e.scheme===bt.file){const n=ic(e);return n.length>aW(n).length&&n[n.length-1]===t}else{const n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Ll){return dW(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Ll){let n=!1;if(e.scheme===bt.file){const r=ic(e);n=r!==void 0&&r.length===aW(r).length&&r[r.length-1]===t}else{t="/";const r=e.path;n=r.length===1&&r.charCodeAt(r.length-1)===47}return!n&&!dW(e,t)?e.with({path:e.path+"/"}):e}}const En=new qAe(()=>!1),T5=En.isEqual.bind(En);En.isEqualOrParent.bind(En);En.getComparisonKey.bind(En);const GAe=En.basenameOrAuthority.bind(En),ha=En.basename.bind(En),ZAe=En.extname.bind(En),$D=En.dirname.bind(En),XAe=En.joinPath.bind(En),YAe=En.normalizePath.bind(En),QAe=En.relativePath.bind(En),lW=En.resolvePath.bind(En);En.isAbsolutePath.bind(En);const cW=En.isEqualAuthority.bind(En),dW=En.hasTrailingPathSeparator.bind(En);En.removeTrailingPathSeparator.bind(En);En.addTrailingPathSeparator.bind(En);var qh;(function(i){i.META_DATA_LABEL="label",i.META_DATA_DESCRIPTION="description",i.META_DATA_SIZE="size",i.META_DATA_MIME="mime";function e(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,l]=o.split(":");a&&l&&n.set(a,l)});const s=t.path.substring(0,t.path.indexOf(";"));return s&&n.set(i.META_DATA_MIME,s),n}i.parseMetaData=e})(qh||(qh={}));function cm(i){return i.toString()}class Xi{static create(e,t){const n=e.getAlternativeVersionId(),r=oP(e);return new Xi(n,n,r,r,t,t,[])}constructor(e,t,n,r,s,o,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=r,this.beforeCursorState=s,this.afterCursorState=o,this.changes=a}append(e,t,n,r,s){t.length>0&&(this.changes=zAe(this.changes,t)),this.afterEOL=n,this.afterVersionId=r,this.afterCursorState=s}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(dl(e,t?t.length:0,n),n+=4,t)for(const r of t)dl(e,r.selectionStartLineNumber,n),n+=4,dl(e,r.selectionStartColumn,n),n+=4,dl(e,r.positionLineNumber,n),n+=4,dl(e,r.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const r=cl(e,t);t+=4;for(let s=0;s<r;s++){const o=cl(e,t);t+=4;const a=cl(e,t);t+=4;const l=cl(e,t);t+=4;const c=cl(e,t);t+=4,n.push(new Be(o,a,l,c))}return t}serialize(){let e=10+Xi._writeSelectionsSize(this.beforeCursorState)+Xi._writeSelectionsSize(this.afterCursorState)+4;for(const r of this.changes)e+=r.writeSize();const t=new Uint8Array(e);let n=0;dl(t,this.beforeVersionId,n),n+=4,dl(t,this.afterVersionId,n),n+=4,H8(t,this.beforeEOL,n),n+=1,H8(t,this.afterEOL,n),n+=1,n=Xi._writeSelections(t,this.beforeCursorState,n),n=Xi._writeSelections(t,this.afterCursorState,n),dl(t,this.changes.length,n),n+=4;for(const r of this.changes)n=r.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const r=cl(t,n);n+=4;const s=cl(t,n);n+=4;const o=V8(t,n);n+=1;const a=V8(t,n);n+=1;const l=[];n=Xi._readSelections(t,n,l);const c=[];n=Xi._readSelections(t,n,c);const d=cl(t,n);n+=4;const u=[];for(let h=0;h<d;h++)n=xr.read(t,n,u);return new Xi(r,s,o,a,l,c,u)}}class mX{get type(){return 0}get resource(){return Ye.isUri(this.model)?this.model:this.model.uri}constructor(e,t,n,r){this.label=e,this.code=t,this.model=n,this._data=Xi.create(n,r)}toString(){return(this._data instanceof Xi?this._data:Xi.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(Ye.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof Xi}append(e,t,n,r,s){this._data instanceof Xi&&this._data.append(e,t,n,r,s)}close(){this._data instanceof Xi&&(this._data=this._data.serialize())}open(){this._data instanceof Xi||(this._data=Xi.deserialize(this._data))}undo(){if(Ye.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Xi&&(this._data=this._data.serialize());const e=Xi.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(Ye.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Xi&&(this._data=this._data.serialize());const e=Xi.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof Xi&&(this._data=this._data.serialize()),this._data.byteLength+168}}class JAe{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,n){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(const r of this._editStackElementsArr){const s=cm(r.resource);this._editStackElementsMap.set(s,r)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=cm(e);return this._editStackElementsMap.has(t)}setModel(e){const t=cm(Ye.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=cm(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,r,s){const o=cm(e.uri);this._editStackElementsMap.get(o).append(e,t,n,r,s)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=cm(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${ha(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function oP(i){return i.getEOL()===`
`?0:1}function Nd(i){return i?i instanceof mX||i instanceof JAe:!1}class k5{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Nd(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Nd(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const n=this._undoRedoService.getLastElement(this._model.uri);if(Nd(n)&&n.canAppend(this._model))return n;const r=new mX(p("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(r,t),r}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],oP(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n,r){const s=this._getOrCreateEditStackElement(e,r),o=this._model.applyEdits(t,!0),a=k5._computeCursorState(n,o),l=o.map((c,d)=>({index:d,textChange:c.textChange}));return l.sort((c,d)=>c.textChange.oldPosition===d.textChange.oldPosition?c.index-d.index:c.textChange.oldPosition-d.textChange.oldPosition),s.append(this._model,l.map(c=>c.textChange),oP(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return ut(n),null}}}class ePe{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function tPe(i,e,t,n,r){r.spacesDiff=0,r.looksLikeAlignment=!1;let s;for(s=0;s<e&&s<n;s++){const h=i.charCodeAt(s),f=t.charCodeAt(s);if(h!==f)break}let o=0,a=0;for(let h=s;h<e;h++)i.charCodeAt(h)===32?o++:a++;let l=0,c=0;for(let h=s;h<n;h++)t.charCodeAt(h)===32?l++:c++;if(o>0&&a>0||l>0&&c>0)return;const d=Math.abs(a-c),u=Math.abs(o-l);if(d===0){r.spacesDiff=u,u>0&&0<=l-1&&l-1<i.length&&l<t.length&&t.charCodeAt(l)!==32&&i.charCodeAt(l-1)===32&&i.charCodeAt(i.length-1)===44&&(r.looksLikeAlignment=!0);return}if(u%d===0){r.spacesDiff=u/d;return}}function uW(i,e,t){const n=Math.min(i.getLineCount(),1e4);let r=0,s=0,o="",a=0;const l=[2,4,6,8,3,5,7],c=8,d=[0,0,0,0,0,0,0,0,0],u=new ePe;for(let g=1;g<=n;g++){const m=i.getLineLength(g),y=i.getLineContent(g),b=m<=65536;let v=!1,C=0,w=0,S=0;for(let T=0,I=m;T<I;T++){const R=b?y.charCodeAt(T):i.getLineCharCode(g,T);if(R===9)S++;else if(R===32)w++;else{v=!0,C=T;break}}if(!v||(S>0?r++:w>1&&s++,tPe(o,a,y,C,u),u.looksLikeAlignment&&!(t&&e===u.spacesDiff)))continue;const L=u.spacesDiff;L<=c&&d[L]++,o=y,a=C}let h=t;r!==s&&(h=r<s);let f=e;if(h){let g=h?0:.1*n;l.forEach(m=>{const y=d[m];y>g&&(g=y,f=m)}),f===4&&d[4]>0&&d[2]>0&&d[2]>=d[4]/2&&(f=2)}return{insertSpaces:h,tabSize:f}}function Is(i){return(i.metadata&1)>>>0}function Dn(i,e){i.metadata=i.metadata&254|e<<0}function Rr(i){return(i.metadata&2)>>>1===1}function xn(i,e){i.metadata=i.metadata&253|(e?1:0)<<1}function _X(i){return(i.metadata&4)>>>2===1}function hW(i,e){i.metadata=i.metadata&251|(e?1:0)<<2}function bX(i){return(i.metadata&64)>>>6===1}function fW(i,e){i.metadata=i.metadata&191|(e?1:0)<<6}function nPe(i){return(i.metadata&24)>>>3}function gW(i,e){i.metadata=i.metadata&231|e<<3}function iPe(i){return(i.metadata&32)>>>5===1}function pW(i,e){i.metadata=i.metadata&223|(e?1:0)<<5}class vX{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,Dn(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,hW(this,!1),fW(this,!1),gW(this,1),pW(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,xn(this,!1)}reset(e,t,n,r){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=r}setOptions(e){this.options=e;const t=this.options.className;hW(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),fW(this,this.options.glyphMarginClassName!==null),gW(this,this.options.stickiness),pW(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const wt=new vX(null,0,0);wt.parent=wt;wt.left=wt;wt.right=wt;Dn(wt,0);class yE{constructor(){this.root=wt,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,r,s,o){return this.root===wt?[]:uPe(this,e,t,n,r,s,o)}search(e,t,n,r){return this.root===wt?[]:dPe(this,e,t,n,r)}collectNodesFromOwner(e){return lPe(this,e)}collectNodesPostOrder(){return cPe(this)}insert(e){mW(this,e),this._normalizeDeltaIfNecessary()}delete(e){_W(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let r=0;for(;e!==this.root;)e===e.parent.right&&(r+=e.parent.delta),e=e.parent;const s=n.start+r,o=n.end+r;n.setCachedOffsets(s,o,t)}acceptReplace(e,t,n,r){const s=oPe(this,e,e+t);for(let o=0,a=s.length;o<a;o++){const l=s[o];_W(this,l)}this._normalizeDeltaIfNecessary(),aPe(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let o=0,a=s.length;o<a;o++){const l=s[o];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,sPe(l,e,e+t,n,r),l.maxEnd=l.end,mW(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,rPe(this))}}function rPe(i){let e=i.root,t=0;for(;e!==wt;){if(e.left!==wt&&!Rr(e.left)){e=e.left;continue}if(e.right!==wt&&!Rr(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,Gh(e),xn(e,!0),xn(e.left,!1),xn(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}xn(i.root,!1)}function dm(i,e,t,n){return i<t?!0:i>t||n===1?!1:n===2?!0:e}function sPe(i,e,t,n,r){const s=nPe(i),o=s===0||s===2,a=s===1||s===2,l=t-e,c=n,d=Math.min(l,c),u=i.start;let h=!1;const f=i.end;let g=!1;e<=u&&f<=t&&iPe(i)&&(i.start=e,h=!0,i.end=e,g=!0);{const y=r?1:l>0?2:0;!h&&dm(u,o,e,y)&&(h=!0),!g&&dm(f,a,e,y)&&(g=!0)}if(d>0&&!r){const y=l>c?2:0;!h&&dm(u,o,e+d,y)&&(h=!0),!g&&dm(f,a,e+d,y)&&(g=!0)}{const y=r?1:0;!h&&dm(u,o,t,y)&&(i.start=e+c,h=!0),!g&&dm(f,a,t,y)&&(i.end=e+c,g=!0)}const m=c-l;h||(i.start=Math.max(0,u+m)),g||(i.end=Math.max(0,f+m)),i.start>i.end&&(i.end=i.start)}function oPe(i,e,t){let n=i.root,r=0,s=0,o=0,a=0;const l=[];let c=0;for(;n!==wt;){if(Rr(n)){xn(n.left,!1),xn(n.right,!1),n===n.parent.right&&(r-=n.parent.delta),n=n.parent;continue}if(!Rr(n.left)){if(s=r+n.maxEnd,s<e){xn(n,!0);continue}if(n.left!==wt){n=n.left;continue}}if(o=r+n.start,o>t){xn(n,!0);continue}if(a=r+n.end,a>=e&&(n.setCachedOffsets(o,a,0),l[c++]=n),xn(n,!0),n.right!==wt&&!Rr(n.right)){r+=n.delta,n=n.right;continue}}return xn(i.root,!1),l}function aPe(i,e,t,n){let r=i.root,s=0,o=0,a=0;const l=n-(t-e);for(;r!==wt;){if(Rr(r)){xn(r.left,!1),xn(r.right,!1),r===r.parent.right&&(s-=r.parent.delta),Gh(r),r=r.parent;continue}if(!Rr(r.left)){if(o=s+r.maxEnd,o<e){xn(r,!0);continue}if(r.left!==wt){r=r.left;continue}}if(a=s+r.start,a>t){r.start+=l,r.end+=l,r.delta+=l,(r.delta<-1073741824||r.delta>1073741824)&&(i.requestNormalizeDelta=!0),xn(r,!0);continue}if(xn(r,!0),r.right!==wt&&!Rr(r.right)){s+=r.delta,r=r.right;continue}}xn(i.root,!1)}function lPe(i,e){let t=i.root;const n=[];let r=0;for(;t!==wt;){if(Rr(t)){xn(t.left,!1),xn(t.right,!1),t=t.parent;continue}if(t.left!==wt&&!Rr(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[r++]=t),xn(t,!0),t.right!==wt&&!Rr(t.right)){t=t.right;continue}}return xn(i.root,!1),n}function cPe(i){let e=i.root;const t=[];let n=0;for(;e!==wt;){if(Rr(e)){xn(e.left,!1),xn(e.right,!1),e=e.parent;continue}if(e.left!==wt&&!Rr(e.left)){e=e.left;continue}if(e.right!==wt&&!Rr(e.right)){e=e.right;continue}t[n++]=e,xn(e,!0)}return xn(i.root,!1),t}function dPe(i,e,t,n,r){let s=i.root,o=0,a=0,l=0;const c=[];let d=0;for(;s!==wt;){if(Rr(s)){xn(s.left,!1),xn(s.right,!1),s===s.parent.right&&(o-=s.parent.delta),s=s.parent;continue}if(s.left!==wt&&!Rr(s.left)){s=s.left;continue}a=o+s.start,l=o+s.end,s.setCachedOffsets(a,l,n);let u=!0;if(e&&s.ownerId&&s.ownerId!==e&&(u=!1),t&&_X(s)&&(u=!1),r&&!bX(s)&&(u=!1),u&&(c[d++]=s),xn(s,!0),s.right!==wt&&!Rr(s.right)){o+=s.delta,s=s.right;continue}}return xn(i.root,!1),c}function uPe(i,e,t,n,r,s,o){let a=i.root,l=0,c=0,d=0,u=0;const h=[];let f=0;for(;a!==wt;){if(Rr(a)){xn(a.left,!1),xn(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!Rr(a.left)){if(c=l+a.maxEnd,c<e){xn(a,!0);continue}if(a.left!==wt){a=a.left;continue}}if(d=l+a.start,d>t){xn(a,!0);continue}if(u=l+a.end,u>=e){a.setCachedOffsets(d,u,s);let g=!0;n&&a.ownerId&&a.ownerId!==n&&(g=!1),r&&_X(a)&&(g=!1),o&&!bX(a)&&(g=!1),g&&(h[f++]=a)}if(xn(a,!0),a.right!==wt&&!Rr(a.right)){l+=a.delta,a=a.right;continue}}return xn(i.root,!1),h}function mW(i,e){if(i.root===wt)return e.parent=wt,e.left=wt,e.right=wt,Dn(e,0),i.root=e,i.root;hPe(i,e),Hu(e.parent);let t=e;for(;t!==i.root&&Is(t.parent)===1;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;Is(n)===1?(Dn(t.parent,0),Dn(n,0),Dn(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,Uv(i,t)),Dn(t.parent,0),Dn(t.parent.parent,1),jv(i,t.parent.parent))}else{const n=t.parent.parent.left;Is(n)===1?(Dn(t.parent,0),Dn(n,0),Dn(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,jv(i,t)),Dn(t.parent,0),Dn(t.parent.parent,1),Uv(i,t.parent.parent))}return Dn(i.root,0),e}function hPe(i,e){let t=0,n=i.root;const r=e.start,s=e.end;for(;;)if(gPe(r,s,n.start+t,n.end+t)<0)if(n.left===wt){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===wt){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=wt,e.right=wt,Dn(e,1)}function _W(i,e){let t,n;if(e.left===wt?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===wt?(t=e.left,n=e):(n=fPe(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(i.requestNormalizeDelta=!0)),n===i.root){i.root=t,Dn(t,0),e.detach(),CE(),Gh(t),i.root.parent=wt;return}const r=Is(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,Dn(n,Is(e)),e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==wt&&(n.left.parent=n),n.right!==wt&&(n.right.parent=n)),e.detach(),r){Hu(t.parent),n!==e&&(Hu(n),Hu(n.parent)),CE();return}Hu(t),Hu(t.parent),n!==e&&(Hu(n),Hu(n.parent));let s;for(;t!==i.root&&Is(t)===0;)t===t.parent.left?(s=t.parent.right,Is(s)===1&&(Dn(s,0),Dn(t.parent,1),Uv(i,t.parent),s=t.parent.right),Is(s.left)===0&&Is(s.right)===0?(Dn(s,1),t=t.parent):(Is(s.right)===0&&(Dn(s.left,0),Dn(s,1),jv(i,s),s=t.parent.right),Dn(s,Is(t.parent)),Dn(t.parent,0),Dn(s.right,0),Uv(i,t.parent),t=i.root)):(s=t.parent.left,Is(s)===1&&(Dn(s,0),Dn(t.parent,1),jv(i,t.parent),s=t.parent.left),Is(s.left)===0&&Is(s.right)===0?(Dn(s,1),t=t.parent):(Is(s.left)===0&&(Dn(s.right,0),Dn(s,1),Uv(i,s),s=t.parent.left),Dn(s,Is(t.parent)),Dn(t.parent,0),Dn(s.left,0),jv(i,t.parent),t=i.root));Dn(t,0),CE()}function fPe(i){for(;i.left!==wt;)i=i.left;return i}function CE(){wt.parent=wt,wt.delta=0,wt.start=0,wt.end=0}function Uv(i,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==wt&&(t.left.parent=e),t.parent=e.parent,e.parent===wt?i.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Gh(e),Gh(t)}function jv(i,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(i.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==wt&&(t.right.parent=e),t.parent=e.parent,e.parent===wt?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Gh(e),Gh(t)}function yX(i){let e=i.end;if(i.left!==wt){const t=i.left.maxEnd;t>e&&(e=t)}if(i.right!==wt){const t=i.right.maxEnd+i.delta;t>e&&(e=t)}return e}function Gh(i){i.maxEnd=yX(i)}function Hu(i){for(;i!==wt;){const e=yX(i);if(i.maxEnd===e)return;i.maxEnd=e,i=i.parent}}function gPe(i,e,t,n){return i===t?e-n:i-t}class aP{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==ct)return L5(this.right);let e=this;for(;e.parent!==ct&&e.parent.left!==e;)e=e.parent;return e.parent===ct?ct:e.parent}prev(){if(this.left!==ct)return CX(this.left);let e=this;for(;e.parent!==ct&&e.parent.right!==e;)e=e.parent;return e.parent===ct?ct:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const ct=new aP(null,0);ct.parent=ct;ct.left=ct;ct.right=ct;ct.color=0;function L5(i){for(;i.left!==ct;)i=i.left;return i}function CX(i){for(;i.right!==ct;)i=i.right;return i}function D5(i){return i===ct?0:i.size_left+i.piece.length+D5(i.right)}function I5(i){return i===ct?0:i.lf_left+i.piece.lineFeedCnt+I5(i.right)}function wE(){ct.parent=ct}function zv(i,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==ct&&(t.left.parent=e),t.parent=e.parent,e.parent===ct?i.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function $v(i,e){const t=e.left;e.left=t.right,t.right!==ct&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===ct?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function Jw(i,e){let t,n;if(e.left===ct?(n=e,t=n.right):e.right===ct?(n=e,t=n.left):(n=L5(e.right),t=n.right),n===i.root){i.root=t,t.color=0,e.detach(),wE(),i.root.parent=ct;return}const r=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,hv(i,t)):(n.parent===e?t.parent=n:t.parent=n.parent,hv(i,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==ct&&(n.left.parent=n),n.right!==ct&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,hv(i,n)),e.detach(),t.parent.left===t){const o=D5(t),a=I5(t);if(o!==t.parent.size_left||a!==t.parent.lf_left){const l=o-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=o,t.parent.lf_left=a,Td(i,t.parent,l,c)}}if(hv(i,t.parent),r){wE();return}let s;for(;t!==i.root&&t.color===0;)t===t.parent.left?(s=t.parent.right,s.color===1&&(s.color=0,t.parent.color=1,zv(i,t.parent),s=t.parent.right),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.right.color===0&&(s.left.color=0,s.color=1,$v(i,s),s=t.parent.right),s.color=t.parent.color,t.parent.color=0,s.right.color=0,zv(i,t.parent),t=i.root)):(s=t.parent.left,s.color===1&&(s.color=0,t.parent.color=1,$v(i,t.parent),s=t.parent.left),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.left.color===0&&(s.right.color=0,s.color=1,zv(i,s),s=t.parent.left),s.color=t.parent.color,t.parent.color=0,s.left.color=0,$v(i,t.parent),t=i.root));t.color=0,wE()}function bW(i,e){for(hv(i,e);e!==i.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,zv(i,e)),e.parent.color=0,e.parent.parent.color=1,$v(i,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,$v(i,e)),e.parent.color=0,e.parent.parent.color=1,zv(i,e.parent.parent))}i.root.color=0}function Td(i,e,t,n){for(;e!==i.root&&e!==ct;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function hv(i,e){let t=0,n=0;if(e!==i.root){for(;e!==i.root&&e===e.parent.right;)e=e.parent;if(e!==i.root)for(e=e.parent,t=D5(e.left)-e.size_left,n=I5(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==i.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}const md=65535;function wX(i){let e;return i[i.length-1]<65536?e=new Uint16Array(i.length):e=new Uint32Array(i.length),e.set(i,0),e}class pPe{constructor(e,t,n,r,s){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=r,this.isBasicASCII=s}}function kd(i,e=!0){const t=[0];let n=1;for(let r=0,s=i.length;r<s;r++){const o=i.charCodeAt(r);o===13?r+1<s&&i.charCodeAt(r+1)===10?(t[n++]=r+2,r++):t[n++]=r+1:o===10&&(t[n++]=r+1)}return e?wX(t):t}function mPe(i,e){i.length=0,i[0]=0;let t=1,n=0,r=0,s=0,o=!0;for(let l=0,c=e.length;l<c;l++){const d=e.charCodeAt(l);d===13?l+1<c&&e.charCodeAt(l+1)===10?(s++,i[t++]=l+2,l++):(n++,i[t++]=l+1):d===10?(r++,i[t++]=l+1):o&&d!==9&&(d<32||d>126)&&(o=!1)}const a=new pPe(wX(i),n,r,s,o);return i.length=0,a}class Us{constructor(e,t,n,r,s){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=r,this.length=s}}class ig{constructor(e,t){this.buffer=e,this.lineStarts=t}}class _Pe{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==ct&&e.iterate(e.root,n=>(n!==ct&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class bPe{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const n=this._cache;for(let r=0;r<n.length;r++){const s=n[r];if(s.node.parent===null||s.nodeStartOffset>=e){n[r]=null,t=!0;continue}}if(t){const r=[];for(const s of n)s!==null&&r.push(s);this._cache=r}}}class vPe{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new ig("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=ct,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let r=null;for(let s=0,o=e.length;s<o;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=kd(e[s].buffer));const a=new Us(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this._buffers.push(e[s]),r=this.rbInsertRight(r,a)}this._searchCache=new bPe(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=md,n=t-Math.floor(t/3),r=n*2;let s="",o=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),d=c.length;if(o<=n||o+d<r)return s+=c,o+=d,!0;const u=s.replace(/\r\n|\r|\n/g,e);return a.push(new ig(u,kd(u))),s=c,o=d,!0}),o>0){const l=s.replace(/\r\n|\r|\n/g,e);a.push(new ig(l,kd(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new _Pe(this,e)}getOffsetAt(e,t){let n=0,r=this.root;for(;r!==ct;)if(r.left!==ct&&r.lf_left+1>=e)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt+1>=e){n+=r.size_left;const s=this.getAccumulatedValue(r,e-r.lf_left-2);return n+=s+t-1}else e-=r.lf_left+r.piece.lineFeedCnt,n+=r.size_left+r.piece.length,r=r.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0;const r=e;for(;t!==ct;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+s.index,s.index===0){const o=this.getOffsetAt(n+1,1),a=r-o;return new U(n+1,a+1)}return new U(n+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===ct){const s=this.getOffsetAt(n+1,1),o=r-e-s;return new U(n+1,o+1)}else t=t.right;return new U(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const n=this.nodeAt2(e.startLineNumber,e.startColumn),r=this.nodeAt2(e.endLineNumber,e.endColumn),s=this.getValueInRange2(n,r);return t?t!==this._EOL||!this._EOLNormalized?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let n=e.node;const r=this._buffers[n.piece.bufferIndex].buffer,s=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);let o=r.substring(s+e.remainder,s+n.piece.length);for(n=n.next();n!==ct;){const a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){o+=a.substring(l,l+t.remainder);break}else o+=a.substr(l,n.piece.length);n=n.next()}return o}getLinesContent(){const e=[];let t=0,n="",r=!1;return this.iterate(this.root,s=>{if(s===ct)return!0;const o=s.piece;let a=o.length;if(a===0)return!0;const l=this._buffers[o.bufferIndex].buffer,c=this._buffers[o.bufferIndex].lineStarts,d=o.start.line,u=o.end.line;let h=c[d]+o.start.column;if(r&&(l.charCodeAt(h)===10&&(h++,a--),e[t++]=n,n="",r=!1,a===0))return!0;if(d===u)return!this._EOLNormalized&&l.charCodeAt(h+a-1)===13?(r=!0,n+=l.substr(h,a-1)):n+=l.substr(h,a),!0;n+=this._EOLNormalized?l.substring(h,Math.max(h,c[d+1]-this._EOLLength)):l.substring(h,c[d+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let f=d+1;f<u;f++)n=this._EOLNormalized?l.substring(c[f],c[f+1]-this._EOLLength):l.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(c[u]+o.end.column-1)===13?(r=!0,o.end.column===0?t--:n=l.substr(c[u],o.end.column-1)):n=l.substr(c[u],o.end.column),!0}),r&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const n=this._buffers[t.piece.bufferIndex],r=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(r)}else{const t=this._buffers[e.node.piece.bufferIndex],r=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(r)}}getLineCharCode(e,t){const n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,r,s,o,a,l,c,d,u){const h=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),g=this.offsetInBuffer(e.piece.bufferIndex,s),m=this.offsetInBuffer(e.piece.bufferIndex,o);let y;const b={line:0,column:0};let v,C;t._wordSeparators?(v=h.buffer.substring(g,m),C=w=>w+g,t.reset(0)):(v=h.buffer,C=w=>w,t.reset(g));do if(y=t.next(v),y){if(C(y.index)>=m)return d;this.positionInBuffer(e,C(y.index)-f,b);const w=this.getLineFeedCnt(e.piece.bufferIndex,s,b),S=b.line===s.line?b.column-s.column+r:b.column+1,L=S+y[0].length;if(u[d++]=Yf(new D(n+w,S,n+w,L),y,l),C(y.index)+y[0].length>=m||d>=c)return d}while(y);return d}findMatchesLineByLine(e,t,n,r){const s=[];let o=0;const a=new Fm(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let d=this.positionInBuffer(l.node,l.remainder);const u=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,d,u,t,n,r,o,s),s;let h=e.startLineNumber,f=l.node;for(;f!==c.node;){const m=this.getLineFeedCnt(f.piece.bufferIndex,d,f.piece.end);if(m>=1){const b=this._buffers[f.piece.bufferIndex].lineStarts,v=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),C=b[d.line+m],w=h===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(f,a,h,w,d,this.positionInBuffer(f,C-v),t,n,r,o,s),o>=r)return s;h+=m}const y=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const b=this.getLineContent(h).substring(y,e.endColumn-1);return o=this._findMatchesInLine(t,a,b,e.endLineNumber,y,o,s,n,r),s}if(o=this._findMatchesInLine(t,a,this.getLineContent(h).substr(y),h,y,o,s,n,r),o>=r)return s;h++,l=this.nodeAt2(h,1),f=l.node,d=this.positionInBuffer(l.node,l.remainder)}if(h===e.endLineNumber){const m=h===e.startLineNumber?e.startColumn-1:0,y=this.getLineContent(h).substring(m,e.endColumn-1);return o=this._findMatchesInLine(t,a,y,e.endLineNumber,m,o,s,n,r),s}const g=h===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(c.node,a,h,g,d,u,t,n,r,o,s),s}_findMatchesInLine(e,t,n,r,s,o,a,l,c){const d=e.wordSeparators;if(!l&&e.simpleSearch){const h=e.simpleSearch,f=h.length,g=n.length;let m=-f;for(;(m=n.indexOf(h,m+f))!==-1;)if((!d||G3(d,n,g,m,f))&&(a[o++]=new j0(new D(r,m+1+s,r,m+1+f+s),null),o>=c))return o;return o}let u;t.reset(0);do if(u=t.next(n),u&&(a[o++]=Yf(new D(r,u.index+1+s,r,u.index+1+u[0].length+s),u,l),o>=c))return o;while(u);return o}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==ct){const{node:r,remainder:s,nodeStartOffset:o}=this.nodeAt(e),a=r.piece,l=a.bufferIndex,c=this.positionInBuffer(r,s);if(r.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&o+a.length===e&&t.length<md){this.appendToNode(r,t),this.computeBufferMetadata();return}if(o===e)this.insertContentToNodeLeft(t,r),this._searchCache.validate(e);else if(o+r.piece.length>e){const d=[];let u=new Us(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(r,s)===10){const m={line:u.start.line+1,column:0};u=new Us(u.bufferIndex,m,u.end,this.getLineFeedCnt(u.bufferIndex,m,u.end),u.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(r,s-1)===13){const m=this.positionInBuffer(r,s-1);this.deleteNodeTail(r,m),t="\r"+t,r.piece.length===0&&d.push(r)}else this.deleteNodeTail(r,c);else this.deleteNodeTail(r,c);const h=this.createNewPieces(t);u.length>0&&this.rbInsertRight(r,u);let f=r;for(let g=0;g<h.length;g++)f=this.rbInsertRight(f,h[g]);this.deleteNodes(d)}else this.insertContentToNodeRight(t,r)}else{const r=this.createNewPieces(t);let s=this.rbInsertLeft(null,r[0]);for(let o=1;o<r.length;o++)s=this.rbInsertRight(s,r[o])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===ct)return;const n=this.nodeAt(e),r=this.nodeAt(e+t),s=n.node,o=r.node;if(s===o){const h=this.positionInBuffer(s,n.remainder),f=this.positionInBuffer(s,r.remainder);if(n.nodeStartOffset===e){if(t===s.piece.length){const g=s.next();Jw(this,s),this.validateCRLFWithPrevNode(g),this.computeBufferMetadata();return}this.deleteNodeHead(s,f),this._searchCache.validate(e),this.validateCRLFWithPrevNode(s),this.computeBufferMetadata();return}if(n.nodeStartOffset+s.piece.length===e+t){this.deleteNodeTail(s,h),this.validateCRLFWithNextNode(s),this.computeBufferMetadata();return}this.shrinkNode(s,h,f),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(s,n.remainder);this.deleteNodeTail(s,l),this._searchCache.validate(e),s.piece.length===0&&a.push(s);const c=this.positionInBuffer(o,r.remainder);this.deleteNodeHead(o,c),o.piece.length===0&&a.push(o);const d=s.next();for(let h=d;h!==ct&&h!==o;h=h.next())a.push(h);const u=s.piece.length===0?s.prev():s;this.deleteNodes(a),this.validateCRLFWithNextNode(u),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const o=t.piece,a={line:o.start.line+1,column:0},l=new Us(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),o.length-1);t.piece=l,e+=`
`,Td(this,t,-1,-1),t.piece.length===0&&n.push(t)}const r=this.createNewPieces(e);let s=this.rbInsertLeft(t,r[r.length-1]);for(let o=r.length-2;o>=0;o--)s=this.rbInsertLeft(s,r[o]);this.validateCRLFWithPrevNode(s),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const n=this.createNewPieces(e),r=this.rbInsertRight(t,n[0]);let s=r;for(let o=1;o<n.length;o++)s=this.rbInsertRight(s,n[o]);this.validateCRLFWithPrevNode(r)}positionInBuffer(e,t,n){const r=e.piece,s=e.piece.bufferIndex,o=this._buffers[s].lineStarts,l=o[r.start.line]+r.start.column+t;let c=r.start.line,d=r.end.line,u=0,h=0,f=0;for(;c<=d&&(u=c+(d-c)/2|0,f=o[u],u!==d);)if(h=o[u+1],l<f)d=u-1;else if(l>=h)c=u+1;else break;return n?(n.line=u,n.column=l-f,null):{line:u,column:l-f}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;const r=this._buffers[e].lineStarts;if(n.line===r.length-1)return n.line-t.line;const s=r[n.line+1],o=r[n.line]+n.column;if(s>o+1)return n.line-t.line;const a=o-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)Jw(this,e[t])}createNewPieces(e){if(e.length>md){const d=[];for(;e.length>md;){const h=e.charCodeAt(md-1);let f;h===13||h>=55296&&h<=56319?(f=e.substring(0,md-1),e=e.substring(md-1)):(f=e.substring(0,md),e=e.substring(md));const g=kd(f);d.push(new Us(this._buffers.length,{line:0,column:0},{line:g.length-1,column:f.length-g[g.length-1]},g.length-1,f.length)),this._buffers.push(new ig(f,g))}const u=kd(e);return d.push(new Us(this._buffers.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this._buffers.push(new ig(e,u)),d}let t=this._buffers[0].buffer.length;const n=kd(e,!1);let r=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},r=this._lastChangeBufferPos;for(let d=0;d<n.length;d++)n[d]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let d=0;d<n.length;d++)n[d]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const s=this._buffers[0].buffer.length,o=this._buffers[0].lineStarts.length-1,a=s-this._buffers[0].lineStarts[o],l={line:o,column:a},c=new Us(0,r,l,this.getLineFeedCnt(0,r,l),s-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let n=this.root,r="";const s=this._searchCache.get2(e);if(s){n=s.node;const o=this.getAccumulatedValue(n,e-s.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(s.nodeStartLineNumber+n.piece.lineFeedCnt===e)r=a.substring(l+o,l+n.piece.length);else{const c=this.getAccumulatedValue(n,e-s.nodeStartLineNumber);return a.substring(l+o,l+c-t)}}else{let o=0;const a=e;for(;n!==ct;)if(n.left!==ct&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this.getAccumulatedValue(n,e-n.lf_left-1),d=this._buffers[n.piece.bufferIndex].buffer,u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return o+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:o,nodeStartLineNumber:a-(e-1-n.lf_left)}),d.substring(u+l,u+c-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this._buffers[n.piece.bufferIndex].buffer,d=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);r=c.substring(d+l,d+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,o+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==ct;){const o=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return r+=o.substring(l,l+a-t),r}else{const a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);r+=o.substr(a,n.piece.length)}n=n.next()}return r}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==ct;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){const n=e.piece,r=this.positionInBuffer(e,t),s=r.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){const o=this.getLineFeedCnt(e.piece.bufferIndex,n.start,r);if(o!==s)return{index:o,remainder:0}}return{index:s,remainder:r.column}}getAccumulatedValue(e,t){if(t<0)return 0;const n=e.piece,r=this._buffers[n.bufferIndex].lineStarts,s=n.start.line+t+1;return s>n.end.line?r[n.end.line]+n.end.column-r[n.start.line]-n.start.column:r[s]-r[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,r=n.lineFeedCnt,s=this.offsetInBuffer(n.bufferIndex,n.end),o=t,a=this.offsetInBuffer(n.bufferIndex,o),l=this.getLineFeedCnt(n.bufferIndex,n.start,o),c=l-r,d=a-s,u=n.length+d;e.piece=new Us(n.bufferIndex,n.start,o,l,u),Td(this,e,d,c)}deleteNodeHead(e,t){const n=e.piece,r=n.lineFeedCnt,s=this.offsetInBuffer(n.bufferIndex,n.start),o=t,a=this.getLineFeedCnt(n.bufferIndex,o,n.end),l=this.offsetInBuffer(n.bufferIndex,o),c=a-r,d=s-l,u=n.length+d;e.piece=new Us(n.bufferIndex,o,n.end,a,u),Td(this,e,d,c)}shrinkNode(e,t,n){const r=e.piece,s=r.start,o=r.end,a=r.length,l=r.lineFeedCnt,c=t,d=this.getLineFeedCnt(r.bufferIndex,r.start,c),u=this.offsetInBuffer(r.bufferIndex,t)-this.offsetInBuffer(r.bufferIndex,s);e.piece=new Us(r.bufferIndex,r.start,c,d,u),Td(this,e,u-a,d-l);const h=new Us(r.bufferIndex,n,o,this.getLineFeedCnt(r.bufferIndex,n,o),this.offsetInBuffer(r.bufferIndex,o)-this.offsetInBuffer(r.bufferIndex,n)),f=this.rbInsertRight(e,h);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),r=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const s=kd(t,!1);for(let f=0;f<s.length;f++)s[f]+=r;if(n){const f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:r-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1));const o=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[o],l={line:o,column:a},c=e.piece.length+t.length,d=e.piece.lineFeedCnt,u=this.getLineFeedCnt(0,e.piece.start,l),h=u-d;e.piece=new Us(e.piece.bufferIndex,e.piece.start,l,u,c),this._lastChangeBufferPos=l,Td(this,e,t.length,h)}nodeAt(e){let t=this.root;const n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let r=0;for(;t!==ct;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){r+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:r};return this._searchCache.set(s),s}else e-=t.size_left+t.piece.length,r+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,r=0;for(;n!==ct;)if(n.left!==ct&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const s=this.getAccumulatedValue(n,e-n.lf_left-2),o=this.getAccumulatedValue(n,e-n.lf_left-1);return r+=n.size_left,{node:n,remainder:Math.min(s+t-1,o),nodeStartOffset:r}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const s=this.getAccumulatedValue(n,e-n.lf_left-2);if(s+t-1<=n.piece.length)return{node:n,remainder:s+t-1,nodeStartOffset:r};t-=n.piece.length-s;break}else e-=n.lf_left+n.piece.lineFeedCnt,r+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==ct;){if(n.piece.lineFeedCnt>0){const s=this.getAccumulatedValue(n,0),o=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,s),nodeStartOffset:o}}else if(n.piece.length>=t-1){const s=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:s}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const n=this._buffers[e.piece.bufferIndex],r=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(r)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===ct||e.piece.lineFeedCnt===0)return!1;const t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,r=t.start.line,s=n[r]+t.start.column;return r===n.length-1||n[r+1]>s+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(s)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===ct||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const n=[],r=this._buffers[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:r[e.piece.end.line]-r[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Us(e.piece.bufferIndex,e.piece.start,s,a,o),Td(this,e,-1,-1),e.piece.length===0&&n.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,d=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Us(t.piece.bufferIndex,l,t.piece.end,d,c),Td(this,t,-1,-1),t.piece.length===0&&n.push(t);const u=this.createNewPieces(`\r
`);this.rbInsertRight(e,u[0]);for(let h=0;h<n.length;h++)Jw(this,n[h])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)Jw(this,n);else{const r=n.piece,s={line:r.start.line+1,column:0},o=r.length-1,a=this.getLineFeedCnt(r.bufferIndex,s,r.end);n.piece=new Us(r.bufferIndex,s,r.end,a,o),Td(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===ct)return t(ct);const n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===ct)return"";const t=this._buffers[e.piece.bufferIndex],n=e.piece,r=this.offsetInBuffer(n.bufferIndex,n.start),s=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(r,s)}getPieceContent(e){const t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),r=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,r)}rbInsertRight(e,t){const n=new aP(t,1);if(n.left=ct,n.right=ct,n.parent=ct,n.size_left=0,n.lf_left=0,this.root===ct)this.root=n,n.color=0;else if(e.right===ct)e.right=n,n.parent=e;else{const s=L5(e.right);s.left=n,n.parent=s}return bW(this,n),n}rbInsertLeft(e,t){const n=new aP(t,1);if(n.left=ct,n.right=ct,n.parent=ct,n.size_left=0,n.lf_left=0,this.root===ct)this.root=n,n.color=0;else if(e.left===ct)e.left=n,n.parent=e;else{const r=CX(e.left);r.right=n,n.parent=r}return bW(this,n),n}}class x_ extends q{constructor(e,t,n,r,s,o,a){super(),this._onDidChangeContent=this._register(new H),this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=r,this._mightContainUnusualLineTerminators=s,this._pieceTree=new vPe(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const n=e+t,r=this.getPositionAt(e),s=this.getPositionAt(n);return new D(r.lineNumber,r.column,s.lineNumber,s.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const n=this.getOffsetAt(e.startLineNumber,e.startColumn),r=this.getOffsetAt(e.endLineNumber,e.endColumn);let s=0;const o=this._getEndOfLine(t),a=this.getEOL();if(o.length!==a.length){const l=o.length-a.length,c=e.endLineNumber-e.startLineNumber;s=l*c}return r-n+s}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const r=e.startLineNumber,s=e.endLineNumber;for(let o=r;o<=s;o++){const a=this.getLineContent(o),l=o===r?e.startColumn-1:0,c=o===s?e.endColumn-1:a.length;for(let d=l;d<c;d++)zi(a.charCodeAt(d))?(n=n+1,d=d+1):n=n+1}return n+=this._getEndOfLine(t).length*(s-r),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=ns(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Dl(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let r=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,a=!0,l=[];for(let m=0;m<e.length;m++){const y=e[m];a&&y._isTracked&&(a=!1);const b=y.range;if(y.text){let L=!0;o||(L=!OC(y.text),o=L),!r&&L&&(r=z_(y.text)),!s&&L&&(s=cG(y.text))}let v="",C=0,w=0,S=0;if(y.text){let L;[C,w,S,L]=Kh(y.text);const T=this.getEOL();L===0||L===(T===`\r
`?2:1)?v=y.text:v=y.text.replace(/\r\n|\r|\n/g,T)}l[m]={sortIndex:m,identifier:y.identifier||null,range:b,rangeOffset:this.getOffsetAt(b.startLineNumber,b.startColumn),rangeLength:this.getValueLengthInRange(b),text:v,eolCount:C,firstLineLength:w,lastLineLength:S,forceMoveMarkers:!!y.forceMoveMarkers,isAutoWhitespaceEdit:y.isAutoWhitespaceEdit||!1}}l.sort(x_._sortOpsAscending);let c=!1;for(let m=0,y=l.length-1;m<y;m++){const b=l[m].range.getEndPosition(),v=l[m+1].range.getStartPosition();if(v.isBeforeOrEqual(b)){if(v.isBefore(b))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const d=n||t?x_._getInverseEditRanges(l):[],u=[];if(t)for(let m=0;m<l.length;m++){const y=l[m],b=d[m];if(y.isAutoWhitespaceEdit&&y.range.isEmpty())for(let v=b.startLineNumber;v<=b.endLineNumber;v++){let C="";v===b.startLineNumber&&(C=this.getLineContent(y.range.startLineNumber),ns(C)!==-1)||u.push({lineNumber:v,oldContent:C})}}let h=null;if(n){let m=0;h=[];for(let y=0;y<l.length;y++){const b=l[y],v=d[y],C=this.getValueInRange(b.range),w=b.rangeOffset+m;m+=b.text.length-C.length,h[y]={sortIndex:b.sortIndex,identifier:b.identifier,range:v,text:C,textChange:new xr(b.rangeOffset,C,w,b.text)}}c||h.sort((y,b)=>y.sortIndex-b.sortIndex)}this._mightContainRTL=r,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=o;const f=this._doApplyEdits(l);let g=null;if(t&&u.length>0){u.sort((m,y)=>y.lineNumber-m.lineNumber),g=[];for(let m=0,y=u.length;m<y;m++){const b=u[m].lineNumber;if(m>0&&u[m-1].lineNumber===b)continue;const v=u[m].oldContent,C=this.getLineContent(b);C.length===0||C===v||ns(C)!==-1||g.push(b)}}return this._onDidChangeContent.fire(),new kDe(h,f,g)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,r=e[e.length-1].range,s=new D(n.startLineNumber,n.startColumn,r.endLineNumber,r.endColumn);let o=n.startLineNumber,a=n.startColumn;const l=[];for(let f=0,g=e.length;f<g;f++){const m=e[f],y=m.range;t=t||m.forceMoveMarkers,l.push(this.getValueInRange(new D(o,a,y.startLineNumber,y.startColumn))),m.text.length>0&&l.push(m.text),o=y.endLineNumber,a=y.endColumn}const c=l.join(""),[d,u,h]=Kh(c);return{sortIndex:0,identifier:e[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:c,eolCount:d,firstLineLength:u,lastLineLength:h,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(x_._sortOpsDescending);const t=[];for(let n=0;n<e.length;n++){const r=e[n],s=r.range.startLineNumber,o=r.range.startColumn,a=r.range.endLineNumber,l=r.range.endColumn;if(s===a&&o===l&&r.text.length===0)continue;r.text?(this._pieceTree.delete(r.rangeOffset,r.rangeLength),this._pieceTree.insert(r.rangeOffset,r.text,!0)):this._pieceTree.delete(r.rangeOffset,r.rangeLength);const c=new D(s,o,a,l);t.push({range:c,rangeLength:r.rangeLength,text:r.text,rangeOffset:r.rangeOffset,forceMoveMarkers:r.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,r){return this._pieceTree.findMatchesLineByLine(e,t,n,r)}static _getInverseEditRanges(e){const t=[];let n=0,r=0,s=null;for(let o=0,a=e.length;o<a;o++){const l=e[o];let c,d;s?s.range.endLineNumber===l.range.startLineNumber?(c=n,d=r+(l.range.startColumn-s.range.endColumn)):(c=n+(l.range.startLineNumber-s.range.endLineNumber),d=l.range.startColumn):(c=l.range.startLineNumber,d=l.range.startColumn);let u;if(l.text.length>0){const h=l.eolCount+1;h===1?u=new D(c,d,c,d+l.firstLineLength):u=new D(c,d,c+h-1,l.lastLineLength+1)}else u=new D(c,d,c,d);n=u.endLineNumber,r=u.endColumn,t.push(u),s=l}return t}static _sortOpsAscending(e,t){const n=D.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){const n=D.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}}class yPe{constructor(e,t,n,r,s,o,a,l,c){this._chunks=e,this._bom=t,this._cr=n,this._lf=r,this._crlf=s,this._containsRTL=o,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let s=0,o=n.length;s<o;s++){const a=n[s].buffer.replace(/\r\n|\r|\n/g,t),l=kd(a);n[s]=new ig(a,l)}const r=new x_(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:r,disposable:r}}}class SX{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&B3(e)&&(this.BOM=LTe,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=mPe(this._tmpLineStarts,e);this.chunks.push(new ig(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=z_(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=cG(e)))}finish(e=!0){return this._finish(),new yPe(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=kd(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class CPe{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,n){if(e>=this._store.length)return;if(t===0){this.insert(e,n);return}else if(n===0){this.delete(e,t);return}const r=this._store.slice(0,e),s=this._store.slice(e+t),o=wPe(n,this._default);this._store=r.concat(o,s)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const n=[];for(let r=0;r<t;r++)n[r]=this._default;this._store=oD(this._store,e,n)}}function wPe(i,e){const t=[];for(let n=0;n<i;n++)t[n]=e;return t}class SPe{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class lP{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e){n.appendLineTokens(t);return}}this._tokens.push(new SPe(e,[t]))}finalize(){return this._tokens}}class xPe{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new cP(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class TPe extends xPe{constructor(e,t,n,r){super(e,t),this._textModel=n,this._languageIdCodec=r}updateTokensUntilLine(e,t){const n=this._textModel.getLanguageId();for(;;){const r=this.getFirstInvalidLine();if(!r||r.lineNumber>t)break;const s=this._textModel.getLineContent(r.lineNumber),o=Ab(this._languageIdCodec,n,this.tokenizationSupport,s,!0,r.startState);e.add(r.lineNumber,o.tokens),this.store.setEndState(r.lineNumber,o.endState)}}getTokenTypeIfInsertingCharacter(e,t){const n=this.getStartState(e.lineNumber);if(!n)return 0;const r=this._textModel.getLanguageId(),s=this._textModel.getLineContent(e.lineNumber),o=s.substring(0,e.column-1)+t+s.substring(e.column-1),a=Ab(this._languageIdCodec,r,this.tokenizationSupport,o,!0,n),l=new $i(a.tokens,o,this._languageIdCodec);if(l.getCount()===0)return 0;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLineWithEdit(e,t,n){const r=e.lineNumber,s=e.column,o=this.getStartState(r);if(!o)return null;const a=this._textModel.getLineContent(r),l=a.substring(0,s-1)+n+a.substring(s-1+t),c=this._textModel.getLanguageIdAtPosition(r,0),d=Ab(this._languageIdCodec,c,this.tokenizationSupport,l,!0,o);return new $i(d.tokens,l,this._languageIdCodec)}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,n){if(n<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,n),{heuristicTokens:!1};let r=this.guessStartState(t);const s=this._textModel.getLanguageId();for(let o=t;o<=n;o++){const a=this._textModel.getLineContent(o),l=Ab(this._languageIdCodec,s,this.tokenizationSupport,a,!0,r);e.add(o,l.tokens),r=l.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const n=[];let r=null;for(let a=e-1;t>1&&a>=1;a--){const l=this._textModel.getLineFirstNonWhitespaceColumn(a);if(l!==0&&l<t&&(n.push(this._textModel.getLineContent(a)),t=l,r=this.getStartState(a),r))break}r||(r=this.tokenizationSupport.getInitialState()),n.reverse();const s=this._textModel.getLanguageId();let o=r;for(const a of n)o=Ab(this._languageIdCodec,s,this.tokenizationSupport,a,!1,o).endState;return o}}class cP{constructor(e){this.lineCount=e,this._tokenizationStateStore=new kPe,this._invalidEndStatesLineNumbers=new LPe,this._invalidEndStatesLineNumbers.addRange(new kt(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new Ti("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const n=this._tokenizationStateStore.setEndState(e,t);return n&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new kt(e+1,e+2)),n}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new kt(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[n]=Kh(t.text);this.acceptChange(new It(t.range.startLineNumber,t.range.endLineNumber+1),n+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new kt(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;const n=this.getStartState(t,e);if(!n)throw new Ti("Start state must be defined");return{lineNumber:t,startState:n}}}class kPe{constructor(){this._lineEndStates=new CPe(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const n=this._lineEndStates.get(e);return n&&n.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let n=e.length;t>0&&n>0&&(n--,t--),this._lineEndStates.replace(e.startLineNumber,n,t)}}class LPe{constructor(){this._ranges=[]}get min(){return this._ranges.length===0?null:this._ranges[0].start}delete(e){const t=this._ranges.findIndex(n=>n.contains(e));if(t!==-1){const n=this._ranges[t];n.start===e?n.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new kt(e+1,n.endExclusive):n.endExclusive===e+1?this._ranges[t]=new kt(n.start,e):this._ranges.splice(t,1,new kt(n.start,e),new kt(e+1,n.endExclusive))}}addRange(e){kt.addRange(e,this._ranges)}addRangeAndResize(e,t){let n=0;for(;!(n>=this._ranges.length||e.start<=this._ranges[n].endExclusive);)n++;let r=n;for(;!(r>=this._ranges.length||e.endExclusive<this._ranges[r].start);)r++;const s=t-e.length;for(let o=r;o<this._ranges.length;o++)this._ranges[o]=this._ranges[o].delta(s);if(n===r){const o=new kt(e.start,e.start+t);o.isEmpty||this._ranges.splice(n,0,o)}else{const o=Math.min(e.start,this._ranges[n].start),a=Math.max(e.endExclusive,this._ranges[r-1].endExclusive),l=new kt(o,a+s);l.isEmpty?this._ranges.splice(n,r-n):this._ranges.splice(n,r-n,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}}function Ab(i,e,t,n,r,s){let o=null;if(t)try{o=t.tokenizeEncoded(n,r,s.clone())}catch(a){ut(a)}return o||(o=AD(i.encodeLanguageId(e),s)),$i.convertToEndOffset(o.tokens,n.length),o}class DPe{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,Ud(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),n=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?Pq(n):this._beginBackgroundTokenization())};n()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new lP,n=qr.create(!1);do if(n.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){var t;const n=(t=this._tokenizerWithStateStore)===null||t===void 0?void 0:t.getFirstInvalidLine();return n?(this._tokenizerWithStateStore.updateTokensUntilLine(e,n.lineNumber),n.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new It(e,t))}}const Ld=new Uint32Array(0).buffer;class ac{static deleteBeginning(e,t){return e===null||e===Ld?e:ac.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===Ld)return e;const n=Wd(e),r=n[n.length-2];return ac.delete(e,t,r)}static delete(e,t,n){if(e===null||e===Ld||t===n)return e;const r=Wd(e),s=r.length>>>1;if(t===0&&r[r.length-2]===n)return Ld;const o=$i.findIndexInTokensArray(r,t),a=o>0?r[o-1<<1]:0,l=r[o<<1];if(n<l){const f=n-t;for(let g=o;g<s;g++)r[g<<1]-=f;return e}let c,d;a!==t?(r[o<<1]=t,c=o+1<<1,d=t):(c=o<<1,d=a);const u=n-t;for(let f=o+1;f<s;f++){const g=r[f<<1]-u;g>d&&(r[c++]=g,r[c++]=r[(f<<1)+1],d=g)}if(c===r.length)return e;const h=new Uint32Array(c);return h.set(r.subarray(0,c),0),h.buffer}static append(e,t){if(t===Ld)return e;if(e===Ld)return t;if(e===null)return e;if(t===null)return null;const n=Wd(e),r=Wd(t),s=r.length>>>1,o=new Uint32Array(n.length+r.length);o.set(n,0);let a=n.length;const l=n[n.length-2];for(let c=0;c<s;c++)o[a++]=r[c<<1]+l,o[a++]=r[(c<<1)+1];return o.buffer}static insert(e,t,n){if(e===null||e===Ld)return e;const r=Wd(e),s=r.length>>>1;let o=$i.findIndexInTokensArray(r,t);o>0&&r[o-1<<1]===t&&o--;for(let a=o;a<s;a++)r[a<<1]+=n;return e}}function Wd(i){return i instanceof Uint32Array?i:new Uint32Array(i)}class hy{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,n){let r=null;if(t<this._len&&(r=this._lineTokens[t]),r!==null&&r!==Ld)return new $i(Wd(r),n,this._languageIdCodec);const s=new Uint32Array(2);return s[0]=n.length,s[1]=vW(this._languageIdCodec.encodeLanguageId(e)),new $i(s,n,this._languageIdCodec)}static _massageTokens(e,t,n){const r=n?Wd(n):null;if(t===0){let s=!1;if(r&&r.length>1&&(s=kr.getLanguageId(r[1])!==e),!s)return Ld}if(!r||r.length===0){const s=new Uint32Array(2);return s[0]=t,s[1]=vW(e),s.buffer}return r[r.length-2]=t,r.byteOffset===0&&r.byteLength===r.buffer.byteLength?r.buffer:r}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const n=[];for(let r=0;r<t;r++)n[r]=null;this._lineTokens=oD(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,r,s){const o=hy._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,r);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=o,s?!hy._equals(a,o):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const n=Wd(e),r=Wd(t);if(n.length!==r.length)return!1;for(let s=0,o=n.length;s<o;s++)if(n[s]!==r[s])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new U(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=ac.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=ac.deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let r=null;n<this._len&&(r=ac.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=ac.append(this._lineTokens[t],r),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const r=e.lineNumber-1;if(!(r>=this._len)){if(t===0){this._lineTokens[r]=ac.insert(this._lineTokens[r],e.column-1,n);return}this._lineTokens[r]=ac.deleteEnding(this._lineTokens[r],e.column-1),this._lineTokens[r]=ac.insert(this._lineTokens[r],e.column-1,n),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};const n=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];let a=0,l=0,c=!1;for(let d=o.startLineNumber;d<=o.endLineNumber;d++)c?(this.setTokens(t.getLanguageId(),d-1,t.getLineLength(d),o.getLineTokens(d),!1),l=d):this.setTokens(t.getLanguageId(),d-1,t.getLineLength(d),o.getLineTokens(d),!0)&&(c=!0,a=d,l=d);c&&n.push({fromLineNumber:a,toLineNumber:l})}return{changes:n}}}function vW(i){return(i<<0|0|0|32768|2<<24|1024)>>>0}class R5{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const s=t[0].getRange(),o=t[t.length-1].getRange();if(!s||!o)return e;n=e.plusRange(s).plusRange(o)}let r=null;for(let s=0,o=this._pieces.length;s<o;s++){const a=this._pieces[s];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){r=r||{index:s};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(s,1),s--,o--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){r=r||{index:s};continue}const[l,c]=a.split(n);if(l.isEmpty()){r=r||{index:s};continue}c.isEmpty()||(this._pieces.splice(s,1,l,c),s++,o++,r=r||{index:s})}return r=r||{index:this._pieces.length},t.length>0&&(this._pieces=oD(this._pieces,r.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;const n=this._pieces;if(n.length===0)return t;const r=R5._findFirstPieceWithLine(n,e),s=n[r].getLineTokens(e);if(!s)return t;const o=t.getCount(),a=s.getCount();let l=0;const c=[];let d=0,u=0;const h=(f,g)=>{f!==u&&(u=f,c[d++]=f,c[d++]=g)};for(let f=0;f<a;f++){const g=s.getStartCharacter(f),m=s.getEndCharacter(f),y=s.getMetadata(f),b=((y&1?2048:0)|(y&2?4096:0)|(y&4?8192:0)|(y&8?16384:0)|(y&16?16744448:0)|(y&32?4278190080:0))>>>0,v=~b>>>0;for(;l<o&&t.getEndOffset(l)<=g;)h(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<o&&t.getStartOffset(l)<g&&h(g,t.getMetadata(l));l<o&&t.getEndOffset(l)<m;)h(t.getEndOffset(l),t.getMetadata(l)&v|y&b),l++;if(l<o)h(m,t.getMetadata(l)&v|y&b),t.getEndOffset(l)===m&&l++;else{const C=Math.min(Math.max(0,l-1),o-1);h(m,t.getMetadata(C)&v|y&b)}}for(;l<o;)h(t.getEndOffset(l),t.getMetadata(l)),l++;return new $i(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,r=e.length-1;for(;n<r;){let s=n+Math.floor((r-n)/2);if(e[s].endLineNumber<t)n=s+1;else if(e[s].startLineNumber>t)r=s-1;else{for(;s>n&&e[s-1].startLineNumber<=t&&t<=e[s-1].endLineNumber;)s--;return s}}return n}acceptEdit(e,t,n,r,s){for(const o of this._pieces)o.acceptEdit(e,t,n,r,s)}}class JT extends tX{constructor(e,t,n,r,s,o){super(),this._languageService=e,this._languageConfigurationService=t,this._textModel=n,this._bracketPairsTextModelPart=r,this._languageId=s,this._attachedViews=o,this._semanticTokens=new R5(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new H),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new H),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new H),this.onDidChangeTokens=this._onDidChangeTokens.event,this.grammarTokens=this._register(new IPe(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews)),this._register(this._languageConfigurationService.onDidChange(a=>{a.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(this.grammarTokens.onDidChangeTokens(a=>{this._emitModelTokensChangedEvent(a)})),this._register(this.grammarTokens.onDidChangeBackgroundTokenizationState(a=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()}))}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[n,r,s]=Kh(t.text);this._semanticTokens.acceptEdit(t.range,n,r,s,t.text.length>0?t.text.charCodeAt(0):0)}this.grammarTokens.handleDidChangeContent(e)}handleDidChangeAttached(){this.grammarTokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this.grammarTokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new Ti("Illegal value for lineNumber")}get hasTokens(){return this.grammarTokens.hasTokens}resetTokenization(){this.grammarTokens.resetTokenization()}get backgroundTokenizationState(){return this.grammarTokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this.grammarTokens.forceTokenization(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this.grammarTokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this.grammarTokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,n){return this.grammarTokens.getTokenTypeIfInsertingCharacter(e,t,n)}tokenizeLineWithEdit(e,t,n){return this.grammarTokens.tokenizeLineWithEdit(e,t,n)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),n=this._textModel.getLineContent(t.lineNumber),r=this.getLineTokens(t.lineNumber),s=r.findTokenIndexAtOffset(t.column-1),[o,a]=JT._findLanguageBoundaries(r,s),l=N0(t.column,this.getLanguageConfiguration(r.getLanguageId(s)).getWordDefinition(),n.substring(o,a),o);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(s>0&&o===t.column-1){const[c,d]=JT._findLanguageBoundaries(r,s-1),u=N0(t.column,this.getLanguageConfiguration(r.getLanguageId(s-1)).getWordDefinition(),n.substring(c,d),c);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn)return u}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let r=0;for(let o=t;o>=0&&e.getLanguageId(o)===n;o--)r=e.getStartOffset(o);let s=e.getLineContent().length;for(let o=t,a=e.getCount();o<a&&e.getLanguageId(o)===n;o++)s=e.getEndOffset(o);return[r,s]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const n=this._textModel.validatePosition(new U(e,t)),r=this.getLineTokens(n.lineNumber);return r.getLanguageId(r.findTokenIndexAtOffset(n.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;const n={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(n),this.grammarTokens.resetTokenization(),this._onDidChangeLanguage.fire(n),this._onDidChangeLanguageConfiguration.fire({})}}class IPe extends q{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,n,r){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=n,this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new vr),this._tokens=new hy(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new vr),this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new H),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new H),this.onDidChangeTokens=this._onDidChangeTokens.event,this._attachedViewStates=this._register(new k3),this._register(Gn.onDidChange(s=>{const o=this.getLanguageId();s.changedLanguages.indexOf(o)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(r.onDidChangeVisibleRanges(({view:s,state:o})=>{if(o){let a=this._attachedViewStates.get(s);a||(a=new RPe(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(s,a)),a.handleStateChange(o)}else this._attachedViewStates.deleteAndDispose(s)}))}resetTokenization(e=!0){var t;this._tokens.flush(),(t=this._debugBackgroundTokens)===null||t===void 0||t.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new cP(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const n=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const o=Gn.get(this.getLanguageId());if(!o)return[null,null];let a;try{a=o.getInitialState()}catch(l){return ut(l),[null,null]}return[o,a]},[r,s]=n();if(r&&s?this._tokenizer=new TPe(this._textModel.getLineCount(),r,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const o={setTokens:a=>{this.setTokens(a)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;const a=2;this._backgroundTokenizationState=a,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(a,l)=>{var c;if(!this._tokenizer)return;const d=this._tokenizer.store.getFirstInvalidEndStateLineNumber();d!==null&&a>=d&&((c=this._tokenizer)===null||c===void 0||c.store.setEndState(a,l))}};r&&r.createBackgroundTokenizer&&!r.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=r.createBackgroundTokenizer(this._textModel,o)),this._backgroundTokenizer.value||(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new DPe(this._tokenizer,o),this._defaultBackgroundTokenizer.handleChanges()),r!=null&&r.backgroundTokenizerShouldOnlyVerifyTokens&&r.createBackgroundTokenizer?(this._debugBackgroundTokens=new hy(this._languageIdCodec),this._debugBackgroundStates=new cP(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=r.createBackgroundTokenizer(this._textModel,{setTokens:a=>{var l;(l=this._debugBackgroundTokens)===null||l===void 0||l.setMultilineTokens(a,this._textModel)},backgroundTokenizationFinished(){},setEndState:(a,l)=>{var c;(c=this._debugBackgroundStates)===null||c===void 0||c.setEndState(a,l)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){var e;(e=this._defaultBackgroundTokenizer)===null||e===void 0||e.handleChanges()}handleDidChangeContent(e){var t,n,r;if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const s of e.changes){const[o,a]=Kh(s.text);this._tokens.acceptEdit(s.range,o,a),(t=this._debugBackgroundTokens)===null||t===void 0||t.acceptEdit(s.range,o,a)}(n=this._debugBackgroundStates)===null||n===void 0||n.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),(r=this._defaultBackgroundTokenizer)===null||r===void 0||r.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=It.joinMany([...this._attachedViewStates].map(([t,n])=>n.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){var n,r;if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const s=new lP,{heuristicTokens:o}=this._tokenizer.tokenizeHeuristically(s,e,t),a=this.setTokens(s.finalize());if(o)for(const l of a.changes)(n=this._backgroundTokenizer.value)===null||n===void 0||n.requestTokens(l.fromLineNumber,l.toLineNumber+1);(r=this._defaultBackgroundTokenizer)===null||r===void 0||r.checkFinished()}forceTokenization(e){var t,n;const r=new lP;(t=this._tokenizer)===null||t===void 0||t.updateTokensUntilLine(r,e),this.setTokens(r.finalize()),(n=this._defaultBackgroundTokenizer)===null||n===void 0||n.checkFinished()}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){var t;const n=this._textModel.getLineContent(e),r=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,n);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const s=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,n);!r.equals(s)&&(!((t=this._debugBackgroundTokenizer.value)===null||t===void 0)&&t.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return r}getTokenTypeIfInsertingCharacter(e,t,n){if(!this._tokenizer)return 0;const r=this._textModel.validatePosition(new U(e,t));return this.forceTokenization(r.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(r,n)}tokenizeLineWithEdit(e,t,n){if(!this._tokenizer)return null;const r=this._textModel.validatePosition(e);return this.forceTokenization(r.lineNumber),this._tokenizer.tokenizeLineWithEdit(r,t,n)}get hasTokens(){return this._tokens.hasTokens}}class RPe extends q{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new fn(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){fi(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}class EPe{constructor(){this.changeType=1}}class Bl{static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",r=0;for(const s of t)n+=e.substring(r,s.column-1),r=s.column-1,n+=s.options.content;return n+=e.substring(r),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new Bl(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new Bl(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,r)=>n.lineNumber===r.lineNumber?n.column===r.column?n.order-r.order:n.column-r.column:n.lineNumber-r.lineNumber),t}constructor(e,t,n,r,s){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=r,this.order=s}}class yW{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}}class NPe{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class APe{constructor(e,t,n,r){this.changeType=4,this.injectedTexts=r,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class PPe{constructor(){this.changeType=5}}class T_{constructor(e,t,n,r){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=r,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),r=t.versionId,s=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing;return new T_(n,r,s,o)}}class xX{constructor(e){this.changes=e}}class Lg{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=T_.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=Lg._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new Lg(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),r=t.eol,s=t.versionId,o=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,c=e.isEolChange&&t.isEolChange;return{changes:n,eol:r,isEolChange:c,versionId:s,isUndoing:o,isRedoing:a,isFlush:l}}}const KD=Lt("undoRedoService");class TX{constructor(e,t){this.resource=e,this.elements=t}}class s1{constructor(){this.id=s1._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}s1._ID=0;s1.None=new s1;class mc{constructor(){this.id=mc._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}mc._ID=0;mc.None=new mc;var MPe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},SE=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Hf;function OPe(i){const e=new SX;return e.acceptChunk(i),e.finish()}function FPe(i){const e=new SX;let t;for(;typeof(t=i.read())=="string";)e.acceptChunk(t);return e.finish()}function CW(i,e){let t;return typeof i=="string"?t=OPe(i):xDe(i)?t=FPe(i):t=i,t.create(e)}let eS=0;const BPe=999,WPe=1e4;class VPe{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,n=0;do{const r=this._source.read();if(r===null)return this._eos=!0,t===0?null:e.join("");if(r.length>0&&(e[t++]=r,n+=r.length),n>=64*1024)return e.join("")}while(!0)}}const Pb=()=>{throw new Error("Invalid change accessor")};let Yc=Hf=class extends q{static resolveOptions(e,t){if(t.detectIndentation){const n=uW(e,t.tabSize,t.insertSpaces);return new _x({tabSize:n.tabSize,indentSize:"tabSize",insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new _x(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return Pa(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,n,r=null,s,o,a){super(),this._undoRedoService=s,this._languageService=o,this._languageConfigurationService=a,this._onWillDispose=this._register(new H),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new $Pe(f=>this.handleBeforeFireDecorationsChangedEvent(f))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new H),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new H),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new H),this._eventEmitter=this._register(new KPe),this._languageSelectionListener=this._register(new vr),this._deltaDecorationCallCnt=0,this._attachedViews=new qPe,eS++,this.id="$model"+eS,this.isForSimpleWidget=n.isForSimpleWidget,typeof r>"u"||r===null?this._associatedResource=Ye.parse("inmemory://model/"+eS):this._associatedResource=r,this._attachedEditorCount=0;const{textBuffer:l,disposable:c}=CW(e,n.defaultEOL);this._buffer=l,this._bufferDisposable=c,this._options=Hf.resolveOptions(this._buffer,n);const d=typeof t=="string"?t:t.languageId;typeof t!="string"&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new HAe(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new M2e(this,this._languageConfigurationService)),this._decorationProvider=this._register(new jAe(this)),this._tokenizationTextModelPart=new JT(this._languageService,this._languageConfigurationService,this,this._bracketPairs,d,this._attachedViews);const u=this._buffer.getLineCount(),h=this._buffer.getValueLengthInRange(new D(1,1,u,this._buffer.getLineLength(u)+1),0);n.largeFileOptimizations?(this._isTooLargeForTokenization=h>Hf.LARGE_FILE_SIZE_THRESHOLD||u>Hf.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=h>Hf.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=h>Hf._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=dG(eS),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new wW,this._commandManager=new k5(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(d)}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new x_([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=q.None}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new Lg(e,t)))}setValue(e){if(this._assertNotDisposed(),e==null)throw ia();const{textBuffer:t,disposable:n}=CW(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,r,s,o,a,l){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:r}],eol:this._buffer.getEOL(),isEolChange:l,versionId:this.getVersionId(),isUndoing:s,isRedoing:o,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),r=this.getValueLengthInRange(n),s=this.getLineCount(),o=this.getLineMaxColumn(s);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new wW,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new T_([new EPe],this._versionId,!1,!1),this._createContentChanged2(new D(1,1,s,o),0,r,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),r=this.getValueLengthInRange(n),s=this.getLineCount(),o=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new T_([new PPe],this._versionId,!1,!1),this._createContentChanged2(new D(1,1,s,o),0,r,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,r=t.length;n<r;n++){const s=t[n],o=s.range,a=s.cachedAbsoluteStart-s.start,l=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),c=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);s.cachedAbsoluteStart=l,s.cachedAbsoluteEnd=c,s.cachedVersionId=e,s.start=l-a,s.end=c-a,Gh(s)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let r=1;r<=n;r++){const s=this._buffer.getLineLength(r);s>=WPe?t+=s:e+=s}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,n=typeof e.indentSize<"u"?e.indentSize:this._options.originalIndentSize,r=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,s=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new _x({tabSize:t,indentSize:n,insertSpaces:r,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:o});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const n=uW(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),$T(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(lG.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(n=>({range:n.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Ti("Operation would exceed heap memory limits");const n=this.getFullModelRange(),r=this.getValueInRange(n,e);return t?this._buffer.getBOM()+r:r}createSnapshot(e=!1){return new VPe(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),r=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+r:r}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Ti("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Ti("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Ti("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Ti("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Ti("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Ti("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,r=e.startColumn;let s=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),o=Math.floor(typeof r=="number"&&!isNaN(r)?r:1);if(s<1)s=1,o=1;else if(s>t)s=t,o=this.getLineMaxColumn(s);else if(o<=1)o=1;else{const u=this.getLineMaxColumn(s);o>=u&&(o=u)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),d=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,d=1;else if(c>t)c=t,d=this.getLineMaxColumn(c);else if(d<=1)d=1;else{const u=this.getLineMaxColumn(c);d>=u&&(d=u)}return n===s&&r===o&&a===c&&l===d&&e instanceof D&&!(e instanceof Be)?e:new D(s,o,c,d)}_isValidPosition(e,t,n){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const r=this._buffer.getLineCount();if(e>r)return!1;if(t===1)return!0;const s=this.getLineMaxColumn(e);if(t>s)return!1;if(n===1){const o=this._buffer.getLineCharCode(e,t-2);if(zi(o))return!1}return!0}_validatePosition(e,t,n){const r=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),s=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),o=this._buffer.getLineCount();if(r<1)return new U(1,1);if(r>o)return new U(o,this.getLineMaxColumn(o));if(s<=1)return new U(r,1);const a=this.getLineMaxColumn(r);if(s>=a)return new U(r,a);if(n===1){const l=this._buffer.getLineCharCode(r,s-2);if(zi(l))return new U(r,s-1)}return new U(r,s)}validatePosition(e){return this._assertNotDisposed(),e instanceof U&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const n=e.startLineNumber,r=e.startColumn,s=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(n,r,0)||!this._isValidPosition(s,o,0))return!1;if(t===1){const a=r>1?this._buffer.getLineCharCode(n,r-2):0,l=o>1&&o<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,o-2):0,c=zi(a),d=zi(l);return!c&&!d}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof D&&!(e instanceof Be)&&this._isValidRange(e,1))return e;const n=this._validatePosition(e.startLineNumber,e.startColumn,0),r=this._validatePosition(e.endLineNumber,e.endColumn,0),s=n.lineNumber,o=n.column,a=r.lineNumber,l=r.column;{const c=o>1?this._buffer.getLineCharCode(s,o-2):0,d=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,u=zi(c),h=zi(d);return!u&&!h?new D(s,o,a,l):s===a&&o===l?new D(s,o-1,a,l-1):u&&h?new D(s,o-1,a,l+1):u?new D(s,o-1,a,l):new D(s,o,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new D(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,r){return this._buffer.findMatchesLineByLine(e,t,n,r)}findMatches(e,t,n,r,s,o,a=BPe){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(u=>D.isIRange(u))&&(l=t.map(u=>this.validateRange(u)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((u,h)=>u.startLineNumber-h.startLineNumber||u.startColumn-h.startColumn);const c=[];c.push(l.reduce((u,h)=>D.areIntersecting(u,h)?u.plusRange(h):(c.push(u),h)));let d;if(!n&&e.indexOf(`
`)<0){const h=new Vf(e,n,r,s).parseSearchRequest();if(!h)return[];d=f=>this.findMatchesLineByLine(f,h,o,a)}else d=u=>Ww.findMatches(this,new Vf(e,n,r,s),u,o,a);return c.map(d).reduce((u,h)=>u.concat(h),[])}findNextMatch(e,t,n,r,s,o){this._assertNotDisposed();const a=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){const c=new Vf(e,n,r,s).parseSearchRequest();if(!c)return null;const d=this.getLineCount();let u=new D(a.lineNumber,a.column,d,this.getLineMaxColumn(d)),h=this.findMatchesLineByLine(u,c,o,1);return Ww.findNextMatch(this,new Vf(e,n,r,s),a,o),h.length>0||(u=new D(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),h=this.findMatchesLineByLine(u,c,o,1),h.length>0)?h[0]:null}return Ww.findNextMatch(this,new Vf(e,n,r,s),a,o)}findPreviousMatch(e,t,n,r,s,o){this._assertNotDisposed();const a=this.validatePosition(t);return Ww.findPreviousMatch(this,new Vf(e,n,r,s),a,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof iE?e:new iE(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,r=e.length;n<r;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n,r){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n,r)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n,r){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const s=t.map(a=>({range:this.validateRange(a.range),text:a.text}));let o=!0;if(e)for(let a=0,l=e.length;a<l;a++){const c=e[a];let d=!1;for(let u=0,h=s.length;u<h;u++){const f=s[u].range,g=f.startLineNumber>c.endLineNumber,m=c.startLineNumber>f.endLineNumber;if(!g&&!m){d=!0;break}}if(!d){o=!1;break}}if(o)for(let a=0,l=this._trimAutoWhitespaceLines.length;a<l;a++){const c=this._trimAutoWhitespaceLines[a],d=this.getLineMaxColumn(c);let u=!0;for(let h=0,f=s.length;h<f;h++){const g=s[h].range,m=s[h].text;if(!(c<g.startLineNumber||c>g.endLineNumber)&&!(c===g.startLineNumber&&g.startColumn===d&&g.isEmpty()&&m&&m.length>0&&m.charAt(0)===`
`)&&!(c===g.startLineNumber&&g.startColumn===1&&g.isEmpty()&&m&&m.length>0&&m.charAt(m.length-1)===`
`)){u=!1;break}}if(u){const h=new D(c,1,c,d);t.push(new iE(null,h,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n,r)}_applyUndo(e,t,n,r){const s=e.map(o=>{const a=this.getPositionAt(o.newPosition),l=this.getPositionAt(o.newEnd);return{range:new D(a.lineNumber,a.column,l.lineNumber,l.column),text:o.oldText}});this._applyUndoRedoEdits(s,t,!0,!1,n,r)}_applyRedo(e,t,n,r){const s=e.map(o=>{const a=this.getPositionAt(o.oldPosition),l=this.getPositionAt(o.oldEnd);return{range:new D(a.lineNumber,a.column,l.lineNumber,l.column),text:o.newText}});this._applyUndoRedoEdits(s,t,!1,!0,n,r)}_applyUndoRedoEdits(e,t,n,r,s,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=r,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),r=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),s=this._buffer.getLineCount(),o=r.changes;if(this._trimAutoWhitespaceLines=r.trimAutoWhitespaceLineNumbers,o.length!==0){for(let c=0,d=o.length;c<d;c++){const u=o[c];this._decorationsTree.acceptReplace(u.rangeOffset,u.rangeLength,u.text.length,u.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=n;for(let c=0,d=o.length;c<d;c++){const u=o[c],[h]=Kh(u.text);this._onDidChangeDecorations.fire();const f=u.range.startLineNumber,g=u.range.endLineNumber,m=g-f,y=h,b=Math.min(m,y),v=y-m,C=s-l-v+f,w=C,S=C+y,L=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new U(w,1)),this.getOffsetAt(new U(S,this.getLineMaxColumn(S))),0),T=Bl.fromDecorations(L),I=new uu(T);for(let R=b;R>=0;R--){const B=f+R,V=C+R;I.takeFromEndWhile(W=>W.lineNumber>V);const F=I.takeFromEndWhile(W=>W.lineNumber===V);a.push(new yW(B,this.getLineContent(V),F))}if(b<m){const R=f+b;a.push(new NPe(R+1,g))}if(b<y){const R=new uu(T),B=f+b,V=y-b,F=s-l-V+B+1,W=[],X=[];for(let oe=0;oe<V;oe++){const we=F+oe;X[oe]=this.getLineContent(we),R.takeWhile(ke=>ke.lineNumber<we),W[oe]=R.takeWhile(ke=>ke.lineNumber===we)}a.push(new APe(B+1,f+y,X,W))}l+=v}this._emitContentChangedEvent(new T_(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return r.reverseEdits===null?void 0:r.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const n=Array.from(e).map(r=>new yW(r,this.getLineContent(r),this._getInjectedTextInLine(r)));this._onDidChangeInjectedText.fire(new xX(n))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const n={addDecoration:(s,o)=>this._deltaDecorationsImpl(e,[],[{range:s,options:o}])[0],changeDecoration:(s,o)=>{this._changeDecorationImpl(s,o)},changeDecorationOptions:(s,o)=>{this._changeDecorationOptionsImpl(s,xW(o))},removeDecoration:s=>{this._deltaDecorationsImpl(e,[s],[])},deltaDecorations:(s,o)=>s.length===0&&o.length===0?[]:this._deltaDecorationsImpl(e,s,o)};let r=null;try{r=t(n)}catch(s){ut(s)}return n.addDecoration=Pb,n.changeDecoration=Pb,n.changeDecorationOptions=Pb,n.removeDecoration=Pb,n.deltaDecorations=Pb,r}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),ut(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const r=e?this._decorations[e]:null;if(!r)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:SW[n]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(r),delete this._decorations[r.id],null;const s=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),a=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(r),r.reset(this.getVersionId(),o,a,s),r.setOptions(SW[n]),this._decorationsTree.insert(r),r.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,r=t.length;n<r;n++){const s=t[n];this._decorationsTree.delete(s),delete this._decorations[s.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,r=!1,s=!1){const o=this.getLineCount(),a=Math.min(o,Math.max(1,e)),l=Math.min(o,Math.max(1,t)),c=this.getLineMaxColumn(l),d=new D(a,1,l,c),u=this._getDecorationsInRange(d,n,r,s);return w2(u,this._decorationProvider.getDecorationsInRange(d,n,r)),u}getDecorationsInRange(e,t=0,n=!1,r=!1,s=!1){const o=this.validateRange(e),a=this._getDecorationsInRange(o,t,n,s);return w2(a,this._decorationProvider.getDecorationsInRange(o,t,n,r)),a}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),r=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return Bl.fromDecorations(r).filter(s=>s.lineNumber===e)}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,n,r){const s=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),o=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,s,o,t,n,r)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;if(n.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(n.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const r=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),o=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),s,o,r),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const r=!!(n.options.overviewRuler&&n.options.overviewRuler.color),s=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){const o=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.endLineNumber)}if(n.options.before||t.before){const o=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.startLineNumber)}r!==s?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n,r=!1){const s=this.getVersionId(),o=t.length;let a=0;const l=n.length;let c=0;this._onDidChangeDecorations.beginDeferredEmit();try{const d=new Array(l);for(;a<o||c<l;){let u=null;if(a<o){do u=this._decorations[t[a++]];while(!u&&a<o);if(u){if(u.options.after){const h=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.endLineNumber)}if(u.options.before){const h=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.startLineNumber)}this._decorationsTree.delete(u),r||this._onDidChangeDecorations.checkAffectedAndFire(u.options)}}if(c<l){if(!u){const b=++this._lastDecorationId,v=`${this._instanceId};${b}`;u=new vX(v,0,0),this._decorations[v]=u}const h=n[c],f=this._validateRangeRelaxedNoAllocations(h.range),g=xW(h.options),m=this._buffer.getOffsetAt(f.startLineNumber,f.startColumn),y=this._buffer.getOffsetAt(f.endLineNumber,f.endColumn);u.ownerId=e,u.reset(s,m,y,f),u.setOptions(g),u.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.endLineNumber),u.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.startLineNumber),r||this._onDidChangeDecorations.checkAffectedAndFire(g),this._decorationsTree.insert(u),d[c]=u.id,c++}else u&&delete this._decorations[u.id]}return d}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){typeof e=="string"?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return HPe(this.getLineContent(e))+1}};Yc._MODEL_SYNC_LIMIT=50*1024*1024;Yc.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;Yc.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;Yc.LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024;Yc.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Vr.tabSize,indentSize:Vr.indentSize,insertSpaces:Vr.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Vr.trimAutoWhitespace,largeFileOptimizations:Vr.largeFileOptimizations,bracketPairColorizationOptions:Vr.bracketPairColorizationOptions};Yc=Hf=MPe([SE(4,KD),SE(5,Fn),SE(6,wn)],Yc);function HPe(i){let e=0;for(const t of i)if(t===" "||t==="	")e++;else break;return e}function xE(i){return!!(i.options.overviewRuler&&i.options.overviewRuler.color)}function TE(i){return!!i.options.after||!!i.options.before}class wW{constructor(){this._decorationsTree0=new yE,this._decorationsTree1=new yE,this._injectedTextDecorationsTree=new yE}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,r,s,o){const a=e.getVersionId(),l=this._intervalSearch(t,n,r,s,a,o);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,n,r,s,o){const a=this._decorationsTree0.intervalSearch(e,t,n,r,s,o),l=this._decorationsTree1.intervalSearch(e,t,n,r,s,o),c=this._injectedTextDecorationsTree.intervalSearch(e,t,n,r,s,o);return a.concat(l).concat(c)}getInjectedTextInInterval(e,t,n,r){const s=e.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(t,n,r,!1,s,!1);return this._ensureNodesHaveRanges(e,o).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const n=e.getVersionId(),r=this._injectedTextDecorationsTree.search(t,!1,n,!1);return this._ensureNodesHaveRanges(e,r).filter(s=>s.options.showIfCollapsed||!s.range.isEmpty())}getAll(e,t,n,r,s){const o=e.getVersionId(),a=this._search(t,n,r,o,s);return this._ensureNodesHaveRanges(e,a)}_search(e,t,n,r,s){if(n)return this._decorationsTree1.search(e,t,r,s);{const o=this._decorationsTree0.search(e,t,r,s),a=this._decorationsTree1.search(e,t,r,s),l=this._injectedTextDecorationsTree.search(e,t,r,s);return o.concat(a).concat(l)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),r=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(r)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){TE(e)?this._injectedTextDecorationsTree.insert(e):xE(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){TE(e)?this._injectedTextDecorationsTree.delete(e):xE(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){TE(e)?this._injectedTextDecorationsTree.resolveNode(e,t):xE(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,r){this._decorationsTree0.acceptReplace(e,t,n,r),this._decorationsTree1.acceptReplace(e,t,n,r),this._injectedTextDecorationsTree.acceptReplace(e,t,n,r)}}function _d(i){return i.replace(/[^a-z0-9\-_]/gi," ")}class kX{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class UPe extends kX{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:Ao.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const n=e?t.getColor(e.id):null;return n?n.toString():""}}class jPe{constructor(e){var t;this.position=(t=e==null?void 0:e.position)!==null&&t!==void 0?t:p_.Left}}class zPe extends kX{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?K.fromHex(e):t.getColor(e.id)}}class Zh{static from(e){return e instanceof Zh?e:new Zh(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class dt{static register(e){return new dt(e)}static createDynamic(e){return new dt(e)}constructor(e){var t,n,r,s,o,a;this.description=e.description,this.blockClassName=e.blockClassName?_d(e.blockClassName):null,this.blockDoesNotCollapse=(t=e.blockDoesNotCollapse)!==null&&t!==void 0?t:null,this.blockIsAfterEnd=(n=e.blockIsAfterEnd)!==null&&n!==void 0?n:null,this.blockPadding=(r=e.blockPadding)!==null&&r!==void 0?r:null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?_d(e.className):null,this.shouldFillLineOnLineBreak=(s=e.shouldFillLineOnLineBreak)!==null&&s!==void 0?s:null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new UPe(e.overviewRuler):null,this.minimap=e.minimap?new zPe(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new jPe(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?_d(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?_d(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?_d(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?_d(e.marginClassName):null,this.inlineClassName=e.inlineClassName?_d(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?_d(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?_d(e.afterContentClassName):null,this.after=e.after?Zh.from(e.after):null,this.before=e.before?Zh.from(e.before):null,this.hideInCommentTokens=(o=e.hideInCommentTokens)!==null&&o!==void 0?o:!1,this.hideInStringTokens=(a=e.hideInStringTokens)!==null&&a!==void 0?a:!1}}dt.EMPTY=dt.register({description:"empty"});const SW=[dt.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),dt.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),dt.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),dt.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function xW(i){return i instanceof dt?i:dt.createDynamic(i)}class $Pe extends q{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new H),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!e.glyphMarginClassName),this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class KPe extends q{constructor(){super(),this._fastEmitter=this._register(new H),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new H),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}class qPe{constructor(){this._onDidChangeVisibleRanges=new H,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const e=new GPe(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}class GPe{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){const n=e.map(r=>new It(r.startLineNumber,r.endLineNumber+1));this.handleStateChange({visibleLineRanges:n,stabilized:t})}}class ek{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new hr(new D(1,1,1,1),0,0,new U(1,1),0),new hr(new D(1,1,1,1),0,0,new U(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Ht(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?Be.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):Be.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,r){return t.equals(n)?r:e.normalizePosition(t,2)}static _validateViewState(e,t){const n=t.position,r=t.selectionStart.getStartPosition(),s=t.selectionStart.getEndPosition(),o=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,r,n,o),l=this._validatePositionWithCache(e,s,r,a);return n.equals(o)&&r.equals(a)&&s.equals(l)?t:new hr(D.fromPositions(a,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+r.column-a.column,o,t.leftoverVisibleColumns+n.column-o.column)}_setState(e,t,n){if(n&&(n=ek._validateViewState(e.viewModel,n)),t){const r=e.model.validateRange(t.selectionStart),s=t.selectionStart.equalsRange(r)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),a=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new hr(r,t.selectionStartKind,s,o,a)}else{if(!n)return;const r=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),s=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new hr(r,n.selectionStartKind,n.selectionStartLeftoverVisibleColumns,s,n.leftoverVisibleColumns)}if(n){const r=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),s=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new hr(r,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,s,t.leftoverVisibleColumns)}else{const r=e.coordinatesConverter.convertModelPositionToViewPosition(new U(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),s=e.coordinatesConverter.convertModelPositionToViewPosition(new U(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),o=new D(r.lineNumber,r.column,s.lineNumber,s.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new hr(o,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}class TW{constructor(e){this.context=e,this.cursors=[new ek(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return ODe(this.cursors,na(e=>e.viewState.position,U.compare)).viewState.position}getBottomMostViewPosition(){return MDe(this.cursors,na(e=>e.viewState.position,U.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(Ht.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,n=e.length;if(t<n){const r=n-t;for(let s=0;s<r;s++)this._addSecondaryCursor()}else if(t>n){const r=t-n;for(let s=0;s<r;s++)this._removeSecondaryCursor(this.cursors.length-2)}for(let r=0;r<n;r++)this.cursors[r+1].setState(this.context,e[r].modelState,e[r].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new ek(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let n=0,r=e.length;n<r;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort(na(n=>n.selection,D.compareRangesUsingStarts));for(let n=0;n<t.length-1;n++){const r=t[n],s=t[n+1],o=r.selection,a=s.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||o.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(o.getEndPosition()):l=a.getStartPosition().isBefore(o.getEndPosition()),l){const c=r.index<s.index?n:n+1,d=r.index<s.index?n+1:n,u=t[d].index,h=t[c].index,f=t[d].selection,g=t[c].selection;if(!f.equalsSelection(g)){const m=f.plusRange(g),y=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,b=g.selectionStartLineNumber===g.startLineNumber&&g.selectionStartColumn===g.startColumn;let v;u===this.lastAddedCursorIndex?(v=y,this.lastAddedCursorIndex=h):v=b;let C;v?C=new Be(m.startLineNumber,m.startColumn,m.endLineNumber,m.endColumn):C=new Be(m.endLineNumber,m.endColumn,m.startLineNumber,m.startColumn),t[c].selection=C;const w=Ht.fromModelSelection(C);e[h].setState(this.context,w.modelState,w.viewState)}for(const m of t)m.index>u&&m.index--;e.splice(u,1),t.splice(d,1),this._removeSecondaryCursor(u-1),n--}}}}class kW{constructor(e,t,n,r){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=r}}class ZPe{constructor(){this.type=0}}class XPe{constructor(){this.type=1}}class YPe{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class QPe{constructor(e,t,n){this.selections=e,this.modelSelections=t,this.reason=n,this.type=3}}class um{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0)}}class tS{constructor(){this.type=5}}class JPe{constructor(e){this.type=6,this.isFocused=e}}class eMe{constructor(){this.type=7}}class nS{constructor(){this.type=8}}class LX{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}class dP{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class uP{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class kx{constructor(e,t,n,r,s,o,a){this.source=e,this.minimalReveal=t,this.range=n,this.selections=r,this.verticalType=s,this.revealHorizontal=o,this.scrollType=a,this.type=12}}class tMe{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class nMe{constructor(e){this.theme=e,this.type=14}}class iMe{constructor(e){this.type=15,this.ranges=e}}class rMe{constructor(){this.type=16}}let sMe=class{constructor(){this.type=17}};class oMe extends q{constructor(){super(),this._onEvent=this._register(new H),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++){const r=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(r){this._outgoingEvents[t]=r;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new aMe),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}}class aMe{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class E5{constructor(e,t,n,r){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=r,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new E5(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class N5{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new N5(this.oldHasFocus,e.hasFocus)}}class A5{constructor(e,t,n,r,s,o,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=r,this.scrollWidth=s,this.scrollLeft=o,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new A5(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class lMe{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class cMe{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class tk{constructor(e,t,n,r,s,o,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=r,this.source=s,this.reason=o,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length,r=t.length;if(n!==r)return!1;for(let s=0;s<n;s++)if(!e[s].equalsSelection(t[s]))return!1;return!0}isNoOp(){return tk._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new tk(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class dMe{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class uMe{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class hMe{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class fMe{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class gMe{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class pMe{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class mMe{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class _Me extends q{constructor(e,t,n,r){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new kW(this._model,this._viewModel,this._coordinatesConverter,r),this._cursors=new TW(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=an(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new kW(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,r){let s=!1;const o=this.context.cursorConfig.multiCursorLimit;r!==null&&r.length>o&&(r=r.slice(0,o),s=!0);const a=Kv.from(this._model,this);return this._cursors.setStates(r),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,a,s)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,n,r,s,o){const a=this._cursors.getViewPositions();let l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=D.fromPositions(a[0],a[0]),e.emitViewEvent(new kx(t,n,l,c,r,s,o))}saveState(){const e=[],t=this._cursors.getSelections();for(let n=0,r=t.length;n<r;n++){const s=t[n];e.push({inSelectionMode:!s.isEmpty(),selectionStart:{lineNumber:s.selectionStartLineNumber,column:s.selectionStartColumn},position:{lineNumber:s.positionLineNumber,column:s.positionColumn}})}return e}restoreState(e,t){const n=[];for(let r=0,s=t.length;r<s;r++){const o=t[r];let a=1,l=1;o.position&&o.position.lineNumber&&(a=o.position.lineNumber),o.position&&o.position.column&&(l=o.position.column);let c=a,d=l;o.selectionStart&&o.selectionStart.lineNumber&&(c=o.selectionStart.lineNumber),o.selectionStart&&o.selectionStart.column&&(d=o.selectionStart.column),n.push({selectionStartLineNumber:c,selectionStartColumn:d,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,Ht.fromModelSelections(n)),this.revealPrimary(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof xX){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const n=t.rawContentChangedEvent;if(this._knownModelVersionId=n.versionId,this._isHandling)return;const r=n.containsEvent(1);if(this._prevEditOperationType=0,r)this._cursors.dispose(),this._cursors=new TW(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&n.resultingSelection&&n.resultingSelection.length>0){const s=Ht.fromModelSelections(n.resultingSelection);this.setStates(e,"modelChange",n.isUndoing?5:n.isRedoing?6:2,s)&&this.revealPrimary(e,"modelChange",!1,0,!0,0)}else{const s=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Ht.fromModelSelections(s))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,r){this.setStates(e,t,r,Ht.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const n=[],r=[];for(let a=0,l=e.length;a<l;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),r.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const s=this._model.deltaDecorations([],n),o=this._model.deltaDecorations([],r);this._autoClosedActions.push(new LW(this._model,s,o))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=bMe.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const n=[],r=[];for(let s=0;s<e.commands.length;s++){const o=e.commands[s];o instanceof XZ&&o.enclosingRange&&o.closeCharacterRange&&(n.push(o.closeCharacterRange),r.push(o.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,r),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,r,s){const o=Kv.from(this._model,this);if(o.equals(r))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new QPe(l,a,n)),!r||r.cursorState.length!==o.cursorState.length||o.cursorState.some((c,d)=>!c.modelState.equals(r.cursorState[d].modelState))){const c=r?r.cursorState.map(u=>u.modelState.selection):null,d=r?r.modelVersionId:0;e.emitOutgoingEvent(new tk(c,a,d,o.modelVersionId,t||"keyboard",n,s))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let n=0,r=e.length;n<r;n++){const s=e[n];if(!s.text||s.text.indexOf(`
`)>=0)return null;const o=s.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;const a=o[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,d=s.text.length-o[2].length-1,u=s.text.lastIndexOf(c,d-1);if(u===-1)return null;t.push([u,d])}return t}executeEdits(e,t,n,r){let s=null;t==="snippet"&&(s=this._findAutoClosingPairs(n)),s&&(n[0]._isTracked=!0);const o=[],a=[],l=this._model.pushEditOperations(this.getSelections(),n,c=>{if(s)for(let u=0,h=s.length;u<h;u++){const[f,g]=s[u],m=c[u],y=m.range.startLineNumber,b=m.range.startColumn-1+f,v=m.range.startColumn-1+g;o.push(new D(y,v+1,y,v+2)),a.push(new D(y,b+1,y,v+2))}const d=r(c);return d&&(this._isHandling=!0),d});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),o.length>0&&this._pushAutoClosedAction(o,a)}_executeEdit(e,t,n,r=0){if(this.context.cursorConfig.readOnly)return;const s=Kv.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(o){ut(o)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,r,s,!1)&&this.revealPrimary(t,n,!1,0,!0,0)}getAutoClosedCharacters(){return LW.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new qv(this._model,this.getSelections())}endComposition(e,t){const n=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation($n.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,n,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){const r=t.length;let s=0;for(;s<r;){const o=O3(t,s),a=t.substr(s,o);this._executeEditOperation($n.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),s+=o}}else this._executeEditOperation($n.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,r,s,o){if(t.length===0&&n===0&&r===0){if(s!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new Be(c.lineNumber,c.column+s,c.lineNumber,c.column+s)});this.setSelections(e,o,a,0)}return}this._executeEdit(()=>{this._executeEditOperation($n.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,r,s))},e,o)}paste(e,t,n,r,s){this._executeEdit(()=>{this._executeEditOperation($n.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,r||[]))},e,s,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(Xg.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Ds(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new Ds(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}}class Kv{static from(e,t){return new Kv(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class LW{static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){const t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const r=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(r&&(t.push(r),r.startLineNumber!==r.endLineNumber))return!1}t.sort(D.compareRangesUsingStarts),e.sort(D.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}}class bMe{static executeCommands(e,t,n){const r={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},s=this._innerExecuteCommands(r,n);for(let o=0,a=r.trackedRanges.length;o<a;o++)r.model._setTrackedRange(r.trackedRanges[o],null,0);return s}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(n.operations.length===0)return null;const r=n.operations,s=this._getLoserCursorMap(r);if(s.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const o=[];for(let c=0,d=r.length;c<d;c++)s.hasOwnProperty(r[c].identifier.major.toString())||o.push(r[c]);n.hadTrackedEditOperation&&o.length>0&&(o[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,o,c=>{const d=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f]=[];for(const f of c)f.identifier&&d[f.identifier.major].push(f);const u=(f,g)=>f.identifier.minor-g.identifier.minor,h=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f].length>0?(d[f].sort(u),h[f]=t[f].computeCursorState(e.model,{getInverseEditOperations:()=>d[f],getTrackedSelection:g=>{const m=parseInt(g,10),y=e.model._getTrackedRange(e.trackedRanges[m]);return e.trackedRangesDirection[m]===0?new Be(y.startLineNumber,y.startColumn,y.endLineNumber,y.endColumn):new Be(y.endLineNumber,y.endColumn,y.startLineNumber,y.startColumn)}})):h[f]=e.selectionsBefore[f];return h});a||(a=e.selectionsBefore);const l=[];for(const c in s)s.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,d)=>d-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],r=!1;for(let s=0,o=t.length;s<o;s++){const a=t[s];if(a){const l=this._getEditOperationsFromCommand(e,s,a);n=n.concat(l.operations),r=r||l.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:r}}static _getEditOperationsFromCommand(e,t,n){const r=[];let s=0;const o=(u,h,f=!1)=>{D.isEmpty(u)&&h===""||r.push({identifier:{major:t,minor:s++},range:u,text:h,forceMoveMarkers:f,isAutoWhitespaceEdit:n.insertsAutoWhitespace})};let a=!1;const d={addEditOperation:o,addTrackedEditOperation:(u,h,f)=>{a=!0,o(u,h,f)},trackSelection:(u,h)=>{const f=Be.liftSelection(u);let g;if(f.isEmpty())if(typeof h=="boolean")h?g=2:g=3;else{const b=e.model.getLineMaxColumn(f.startLineNumber);f.startColumn===b?g=2:g=3}else g=1;const m=e.trackedRanges.length,y=e.model._setTrackedRange(null,f,g);return e.trackedRanges[m]=y,e.trackedRangesDirection[m]=f.getDirection(),m.toString()}};try{n.getEditOperations(e.model,d)}catch(u){return ut(u),{operations:[],hadTrackedEditOperation:!1}}return{operations:r,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,r)=>-D.compareRangesUsingEnds(n.range,r.range));const t={};for(let n=1;n<e.length;n++){const r=e[n-1],s=e[n];if(D.getStartPosition(r.range).isBefore(D.getEndPosition(s.range))){let o;r.identifier.major>s.identifier.major?o=r.identifier.major:o=s.identifier.major,t[o.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===o&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}}class vMe{constructor(e,t,n){this.text=e,this.startSelection=t,this.endSelection=n}}class qv{static _capture(e,t){const n=[];for(const r of t){if(r.startLineNumber!==r.endLineNumber)return null;n.push(new vMe(e.getLineContent(r.startLineNumber),r.startColumn-1,r.endColumn-1))}return n}constructor(e,t){this._original=qv._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const n=qv._capture(e,t);if(!n||this._original.length!==n.length)return null;const r=[];for(let s=0,o=this._original.length;s<o;s++)r.push(qv._deduceOutcome(this._original[s],n[s]));return r}static _deduceOutcome(e,t){const n=Math.min(e.startSelection,t.startSelection,zg(e.text,t.text)),r=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,xT(e.text,t.text)),s=e.text.substring(n,e.text.length-r),o=t.text.substring(n,t.text.length-r);return new S2e(s,e.startSelection-n,e.endSelection-n,o,t.startSelection-n,t.endSelection-n)}}var yMe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const DW={getInitialState:()=>Y_,tokenizeEncoded:(i,e,t)=>AD(0,t)};function CMe(i,e,t){return yMe(this,void 0,void 0,function*(){if(!t)return IW(e,i.languageIdCodec,DW);const n=yield Gn.getOrCreate(t);return IW(e,i.languageIdCodec,n||DW)})}function wMe(i,e,t,n,r,s,o){let a="<div>",l=n,c=0,d=!0;for(let u=0,h=e.getCount();u<h;u++){const f=e.getEndOffset(u);if(f<=n)continue;let g="";for(;l<f&&l<r;l++){const m=i.charCodeAt(l);switch(m){case 9:{let y=s-(l+c)%s;for(c+=y-1;y>0;)o&&d?(g+="&#160;",d=!1):(g+=" ",d=!0),y--;break}case 60:g+="&lt;",d=!1;break;case 62:g+="&gt;",d=!1;break;case 38:g+="&amp;",d=!1;break;case 0:g+="&#00;",d=!1;break;case 65279:case 8232:case 8233:case 133:g+="�",d=!1;break;case 13:g+="&#8203",d=!1;break;case 32:o&&d?(g+="&#160;",d=!1):(g+=" ",d=!0);break;default:g+=String.fromCharCode(m),d=!1}}if(a+=`<span style="${e.getInlineStyle(u,t)}">${g}</span>`,f>r||l>=r)break}return a+="</div>",a}function IW(i,e,t){let n='<div class="monaco-tokenized-source">';const r=Kc(i);let s=t.getInitialState();for(let o=0,a=r.length;o<a;o++){const l=r[o];o>0&&(n+="<br/>");const c=t.tokenizeEncoded(l,!0,s);$i.convertToEndOffset(c.tokens,l.length);const u=new $i(c.tokens,l,e).inflate();let h=0;for(let f=0,g=u.getCount();f<g;f++){const m=u.getClassName(f),y=u.getEndOffset(f);n+=`<span class="${m}">${ST(l.substring(h,y))}</span>`,h=y}s=c.endState}return n+="</div>",n}class SMe{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,r=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,r)}}class xMe{constructor(e,t,n,r,s){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=r,this.minWidth=s,this.prefixSum=0}}let DX=class hP{constructor(e,t,n,r){this._instanceId=dG(++hP.INSTANCE_COUNT),this._pendingChanges=new SMe,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=r}static findInsertionIndex(e,t,n){let r=0,s=e.length;for(;r<s;){const o=r+s>>>1;t===e[o].afterLineNumber?n<e[o].ordinal?s=o:r=o+1:t<e[o].afterLineNumber?s=o:r=o+1}return r}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(r,s,o,a)=>{t=!0,r=r|0,s=s|0,o=o|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new xMe(l,r,s,o,a)),l},changeOneWhitespace:(r,s,o)=>{t=!0,s=s|0,o=o|0,this._pendingChanges.change({id:r,newAfterLineNumber:s,newHeight:o})},removeWhitespace:r=>{t=!0,this._pendingChanges.remove({id:r})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of n){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const r=new Set;for(const l of n)r.add(l.id);const s=new Map;for(const l of t)s.set(l.id,l);const o=l=>{const c=[];for(const d of l)if(!r.has(d.id)){if(s.has(d.id)){const u=s.get(d.id);d.afterLineNumber=u.newAfterLineNumber,d.height=u.newHeight}c.push(d)}return c},a=o(this._arr).concat(o(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=hP.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,r=t.length;n<r;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const r=this._findWhitespaceIndex(e);if(r!==-1&&(this._arr[r].height!==n&&(this._arr[r].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,r-1)),this._arr[r].afterLineNumber!==t)){const s=this._arr[r];this._removeWhitespace(r),s.afterLineNumber=t,this._insertWhitespace(s)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,r=this._arr.length;n<r;n++){const s=this._arr[n].afterLineNumber;e<=s&&s<=t?this._arr[n].afterLineNumber=e-1:s>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,r=this._arr.length;n<r;n++){const s=this._arr[n].afterLineNumber;e<=s&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let n=0,r=t.length-1;for(;n<=r;){const o=(r-n|0)/2|0,a=n+o|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else r=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const n=this._findLastWhitespaceBeforeLineNumber(e)+1;return n<this._arr.length?n:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let n;e>1?n=this._lineHeight*(e-1):n=0;const r=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return n+r+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;const n=this._lineHeight*e,r=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return n+r+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,n=this._lineHeight;let r=1,s=t;for(;r<s;){const o=(r+s)/2|0,a=this.getVerticalOffsetForLineNumber(o)|0;if(e>=a+n)r=o+1;else{if(e>=a)return o;s=o}}return r>t?t:r}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this._lineHeight,r=this.getLineNumberAtOrAfterVerticalOffset(e)|0,s=this.getVerticalOffsetForLineNumber(r)|0;let o=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(r)|0;const l=this.getWhitespacesCount()|0;let c,d;a===-1?(a=l,d=o+1,c=0):(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let u=s,h=u;const f=5e5;let g=0;s>=f&&(g=Math.floor(s/f)*f,g=Math.floor(g/n)*n,h-=g);const m=[],y=e+(t-e)/2;let b=-1;for(let S=r;S<=o;S++){if(b===-1){const L=u,T=u+n;(L<=y&&y<T||L>y)&&(b=S)}for(u+=n,m[S-r]=h,h+=n;d===S;)h+=c,u+=c,a++,a>=l?d=o+1:(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(u>=t){o=S;break}}b===-1&&(b=o);const v=this.getVerticalOffsetForLineNumber(o)|0;let C=r,w=o;return C<w&&s<e&&C++,C<w&&v+n>t&&w--,{bigNumbersDelta:g,startLineNumber:r,endLineNumber:o,relativeVerticalOffset:m,centeredLineNumber:b,completelyVisibleStartLineNumber:C,completelyVisibleEndLineNumber:w}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n;t>=1?n=this._lineHeight*t:n=0;let r;return e>0?r=this.getWhitespacesAccumulatedHeight(e-1):r=0,n+r+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;const r=this.getVerticalOffsetForWhitespaceIndex(n),s=this.getHeightForWhitespaceIndex(n);if(e>=r+s)return-1;for(;t<n;){const o=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(e>=a+l)t=o+1;else{if(e>=a)return o;n=o}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const r=this.getHeightForWhitespaceIndex(t),s=this.getIdForWhitespaceIndex(t),o=this.getAfterLineNumberForWhitespaceIndex(t);return{id:s,afterLineNumber:o,verticalOffset:n,height:r}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),r=this.getWhitespacesCount()-1;if(n<0)return[];const s=[];for(let o=n;o<=r;o++){const a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(a>=t)break;s.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:a,height:l})}return s}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}};DX.INSTANCE_COUNT=0;const TMe=125;class fv{constructor(e,t,n,r){e=e|0,t=t|0,n=n|0,r=r|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),r<0&&(r=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=r,this.scrollHeight=Math.max(n,r)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class kMe extends q{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new H),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new fv(0,0,0,0),this._scrollable=this._register(new $C({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,r=t.contentHeight!==e.contentHeight;(n||r)&&this._onDidContentSizeChange.fire(new E5(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class LMe extends q{constructor(e,t,n){super(),this._configuration=e;const r=this._configuration.options,s=r.get(143),o=r.get(83);this._linesLayout=new DX(t,r.get(66),o.top,o.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new kMe(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new fv(s.contentWidth,0,s.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(113)?TMe:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(66)&&this._linesLayout.setLineHeight(t.get(66)),e.hasChanged(83)){const n=t.get(83);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(143)){const n=t.get(143),r=n.contentWidth,s=n.height,o=this._scrollable.getScrollDimensions(),a=o.contentWidth;this._scrollable.setScrollDimensions(new fv(r,o.contentWidth,s,this._getContentHeight(r,s,a)))}else this._updateHeight();e.hasChanged(113)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const r=this._configuration.options.get(102);return r.horizontal===2||e>=t?0:r.horizontalScrollbarSize}_getContentHeight(e,t,n){const r=this._configuration.options;let s=this._linesLayout.getLinesTotalHeight();return r.get(104)?s+=Math.max(0,t-r.get(66)-r.get(83).bottom):s+=this._getHorizontalScrollbarHeight(e,n),s}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,r=e.contentWidth;this._scrollable.setScrollDimensions(new fv(t,e.contentWidth,n,this._getContentHeight(t,n,r)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new w6(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new w6(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){const e=this._configuration.options,t=this._maxLineWidth,n=e.get(144),r=e.get(50),s=e.get(143);if(n.isViewportWrapping){const o=e.get(72);return t>s.contentWidth+r.typicalHalfwidthCharacterWidth&&o.enabled&&o.side==="right"?t+s.verticalScrollbarWidth:t}else{const o=e.get(103)*r.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+o+s.verticalScrollbarWidth,a,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){const e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new fv(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),r=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-r,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}class DMe{constructor(e,t,n,r,s){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=r,this._coordinatesConverter=s,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const r=e.range,s=e.options;let o;if(s.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new U(r.startLineNumber,1),0,!1,!0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new U(r.endLineNumber,this.model.getLineMaxColumn(r.endLineNumber)),1);o=new D(a.lineNumber,a.column,l.lineNumber,l.column)}else o=this._coordinatesConverter.convertModelRangeToViewRange(r,1);n=new mZ(o,s),this._decorationsCache[t]=n}return n}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e,t=!1,n=!1){const r=new D(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(r,t,n).inlineDecorations[0]}_getDecorationsInRange(e,t,n){const r=this._linesCollection.getDecorationsInRange(e,this.editorId,mT(this.configuration.options),t,n),s=e.startLineNumber,o=e.endLineNumber,a=[];let l=0;const c=[];for(let d=s;d<=o;d++)c[d-s]=[];for(let d=0,u=r.length;d<u;d++){const h=r[d],f=h.options;if(!P5(this.model,h))continue;const g=this._getOrCreateViewModelDecoration(h),m=g.range;if(a[l++]=g,f.inlineClassName){const y=new Mv(m,f.inlineClassName,f.inlineClassNameAffectsLetterSpacing?3:0),b=Math.max(s,m.startLineNumber),v=Math.min(o,m.endLineNumber);for(let C=b;C<=v;C++)c[C-s].push(y)}if(f.beforeContentClassName&&s<=m.startLineNumber&&m.startLineNumber<=o){const y=new Mv(new D(m.startLineNumber,m.startColumn,m.startLineNumber,m.startColumn),f.beforeContentClassName,1);c[m.startLineNumber-s].push(y)}if(f.afterContentClassName&&s<=m.endLineNumber&&m.endLineNumber<=o){const y=new Mv(new D(m.endLineNumber,m.endColumn,m.endLineNumber,m.endColumn),f.afterContentClassName,2);c[m.endLineNumber-s].push(y)}}return{decorations:a,inlineDecorations:c}}}function P5(i,e){return!(e.options.hideInCommentTokens&&M5(i,e)||e.options.hideInStringTokens&&O5(i,e))}function M5(i,e){return IX(i,e.range,t=>t===1)}function O5(i,e){return IX(i,e.range,t=>t===2)}function IX(i,e,t){for(let n=e.startLineNumber;n<=e.endLineNumber;n++){const r=i.tokenization.getLineTokens(n),s=n===e.startLineNumber,o=n===e.endLineNumber;let a=s?r.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<r.getCount()&&!(o&&r.getStartOffset(a)>e.endColumn-1);){if(!t(r.getStandardTokenType(a)))return!1;a++}}return!0}function kE(i,e){return i===null?e?nk.INSTANCE:ik.INSTANCE:new IMe(i,e)}class IMe{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,n){this._assertVisible();const r=n>0?this._projectionData.breakOffsets[n-1]:0,s=this._projectionData.breakOffsets[n];let o;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((c,d)=>new Bl(0,0,c+1,this._projectionData.injectionOptions[d],0));o=Bl.applyInjectedText(e.getLineContent(t),a).substring(r,s)}else o=e.getValueInRange({startLineNumber:t,startColumn:r+1,endLineNumber:t,endColumn:s+1});return n>0&&(o=RW(this._projectionData.wrappedTextIndentLength)+o),o}getViewLineLength(e,t,n){return this._assertVisible(),this._projectionData.getLineLength(n)}getViewLineMinColumn(e,t,n){return this._assertVisible(),this._projectionData.getMinOutputOffset(n)+1}getViewLineMaxColumn(e,t,n){return this._assertVisible(),this._projectionData.getMaxOutputOffset(n)+1}getViewLineData(e,t,n){const r=new Array;return this.getViewLinesData(e,t,n,1,0,[!0],r),r[0]}getViewLinesData(e,t,n,r,s,o,a){this._assertVisible();const l=this._projectionData,c=l.injectionOffsets,d=l.injectionOptions;let u=null;if(c){u=[];let f=0,g=0;for(let m=0;m<l.getOutputLineCount();m++){const y=new Array;u[m]=y;const b=m>0?l.breakOffsets[m-1]:0,v=l.breakOffsets[m];for(;g<c.length;){const C=d[g].content.length,w=c[g]+f,S=w+C;if(w>v)break;if(b<S){const L=d[g];if(L.inlineClassName){const T=m>0?l.wrappedTextIndentLength:0,I=T+Math.max(w-b,0),R=T+Math.min(S-b,v-b);I!==R&&y.push(new MIe(I,R,L.inlineClassName,L.inlineClassNameAffectsLetterSpacing))}}if(S<=v)f+=C,g++;else break}}}let h;c?h=e.tokenization.getLineTokens(t).withInserted(c.map((f,g)=>({offset:f,text:d[g].content,tokenMetadata:$i.defaultTokenMetadata}))):h=e.tokenization.getLineTokens(t);for(let f=n;f<n+r;f++){const g=s+f-n;if(!o[g]){a[g]=null;continue}a[g]=this._getViewLineData(h,u?u[f]:null,f)}}_getViewLineData(e,t,n){this._assertVisible();const r=this._projectionData,s=n>0?r.wrappedTextIndentLength:0,o=n>0?r.breakOffsets[n-1]:0,a=r.breakOffsets[n],l=e.sliceAndInflate(o,a,s);let c=l.getLineContent();n>0&&(c=RW(r.wrappedTextIndentLength)+c);const d=this._projectionData.getMinOutputOffset(n)+1,u=c.length+1,h=n+1<this.getViewLineCount(),f=n===0?0:r.breakOffsetsVisibleColumn[n-1];return new i5(c,h,d,u,f,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,n=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,n).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const n=this._projectionData.translateToOutputPosition(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n){const r=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,n).toPosition(r)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class nk{constructor(){}isVisible(){return!0}setVisible(e){return e?this:ik.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){const r=e.tokenization.getLineTokens(t),s=r.getLineContent();return new i5(s,!1,1,s.length+1,0,r.inflate(),null)}getViewLinesData(e,t,n,r,s,o,a){if(!o[s]){a[s]=null;return}a[s]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new U(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n){return t}getInjectedTextAt(e,t){return null}}nk.INSTANCE=new nk;class ik{constructor(){}isVisible(){return!1}setVisible(e){return e?nk.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,r,s,o,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}ik.INSTANCE=new ik;const LE=[""];function RW(i){if(i>=LE.length)for(let e=1;e<=i;e++)LE[e]=RMe(e);return LE[i]}function RMe(i){return new Array(i+1).join(" ")}class EMe{constructor(e,t,n,r,s,o,a,l,c,d){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=r,this.fontInfo=s,this.tabSize=o,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this.wordBreak=d,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new AMe(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const n=this.model.getLinesContent(),r=this.model.getInjectedTextDecorations(this._editorId),s=n.length,o=this.createLineBreaksComputer(),a=new uu(Bl.fromDecorations(r));for(let m=0;m<s;m++){const y=a.takeWhile(b=>b.lineNumber===m+1);o.addRequest(n[m],y,t?t[m]:null)}const l=o.finalize(),c=[],d=this.hiddenAreasDecorationIds.map(m=>this.model.getDecorationRange(m)).sort(D.compareRangesUsingStarts);let u=1,h=0,f=-1,g=f+1<d.length?h+1:s+2;for(let m=0;m<s;m++){const y=m+1;y===g&&(f++,u=d[f].startLineNumber,h=d[f].endLineNumber,g=f+1<d.length?h+1:s+2);const b=y>=u&&y<=h,v=kE(l[m],!b);c[m]=v.getViewLineCount(),this.modelLineProjections[m]=v}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new pDe(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(h=>this.model.validateRange(h)),n=NMe(t),r=this.hiddenAreasDecorationIds.map(h=>this.model.getDecorationRange(h)).sort(D.compareRangesUsingStarts);if(n.length===r.length){let h=!1;for(let f=0;f<n.length;f++)if(!n[f].equalsRange(r[f])){h=!0;break}if(!h)return!1}const s=n.map(h=>({range:h,options:dt.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,s);const o=n;let a=1,l=0,c=-1,d=c+1<o.length?l+1:this.modelLineProjections.length+2,u=!1;for(let h=0;h<this.modelLineProjections.length;h++){const f=h+1;f===d&&(c++,a=o[c].startLineNumber,l=o[c].endLineNumber,d=c+1<o.length?l+1:this.modelLineProjections.length+2);let g=!1;if(f>=a&&f<=l?this.modelLineProjections[h].isVisible()&&(this.modelLineProjections[h]=this.modelLineProjections[h].setVisible(!1),g=!0):(u=!0,this.modelLineProjections[h].isVisible()||(this.modelLineProjections[h]=this.modelLineProjections[h].setVisible(!0),g=!0)),g){const m=this.modelLineProjections[h].getViewLineCount();this.projectedModelLineLineCounts.setValue(h,m)}}return u||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,r,s){const o=this.fontInfo.equals(e),a=this.wrappingStrategy===t,l=this.wrappingColumn===n,c=this.wrappingIndent===r,d=this.wordBreak===s;if(o&&a&&l&&c&&d)return!1;const u=o&&a&&!l&&c&&d;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=r,this.wordBreak=s;let h=null;if(u){h=[];for(let f=0,g=this.modelLineProjections.length;f<g;f++)h[f]=this.modelLineProjections[f].getProjectionData()}return this._constructLines(!1,h),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;const r=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,s=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new dP(r,s)}onModelLinesInserted(e,t,n,r){if(!e||e<=this._validModelVersionId)return null;const s=t>2&&!this.modelLineProjections[t-2].isVisible(),o=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],c=[];for(let d=0,u=r.length;d<u;d++){const h=kE(r[d],!s);l.push(h);const f=h.getViewLineCount();a+=f,c[d]=f}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new uP(o,o+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const r=t-1,s=this.modelLineProjections[r].getViewLineCount(),o=this.modelLineProjections[r].isVisible(),a=kE(n,o);this.modelLineProjections[r]=a;const l=this.modelLineProjections[r].getViewLineCount();let c=!1,d=0,u=-1,h=0,f=-1,g=0,m=-1;s>l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+l-1,g=u+1,m=g+(s-l)-1,c=!0):s<l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+s-1,h=u+1,f=h+(l-s)-1,c=!0):(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+l-1),this.projectedModelLineLineCounts.setValue(r,l);const y=d<=u?new LX(d,u-d+1):null,b=h<=f?new uP(h,f):null,v=g<=m?new dP(g,m):null;return[c,y,b,v]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const r=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),o=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.guides.getActiveIndentGuide(r.lineNumber,s.lineNumber,o.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,r=t.remainder;return new EW(n+1,r)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),r=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new U(e.modelLineNumber,r)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),r=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new U(e.modelLineNumber,r)}getViewLineInfosGroupedByModelRanges(e,t){const n=this.getViewLineInfo(e),r=this.getViewLineInfo(t),s=new Array;let o=this.getModelStartPositionOfViewLine(n),a=new Array;for(let l=n.modelLineNumber;l<=r.modelLineNumber;l++){const c=this.modelLineProjections[l-1];if(c.isVisible()){const d=l===n.modelLineNumber?n.modelLineWrappedLineIdx:0,u=l===r.modelLineNumber?r.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let h=d;h<u;h++)a.push(new EW(l,h))}if(!c.isVisible()&&o){const d=new U(l-1,this.model.getLineMaxColumn(l-1)+1),u=D.fromPositions(o,d);s.push(new NW(u,a)),a=[],o=null}else c.isVisible()&&!o&&(o=new U(l,1))}if(o){const l=D.fromPositions(o,this.getModelEndPositionOfViewLine(r));s.push(new NW(l,a))}return s}getViewLinesBracketGuides(e,t,n,r){const s=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,o=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,s,r);for(const d of a.viewLines){const h=c[d.modelLineNumber-l].map(f=>{if(f.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesAfterColumn).lineNumber>=d.modelLineWrappedLineIdx||f.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesBeforeOrAtColumn).lineNumber<d.modelLineWrappedLineIdx)return;if(!f.horizontalLine)return f;let g=-1;if(f.column!==-1){const b=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.column);if(b.lineNumber===d.modelLineWrappedLineIdx)g=b.column;else if(b.lineNumber<d.modelLineWrappedLineIdx)g=this.getMinColumnOfViewLine(d);else if(b.lineNumber>d.modelLineWrappedLineIdx)return}const m=this.convertModelPositionToViewPosition(d.modelLineNumber,f.horizontalLine.endColumn),y=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.horizontalLine.endColumn);return y.lineNumber===d.modelLineWrappedLineIdx?new mg(f.visibleColumn,g,f.className,new Wv(f.horizontalLine.top,m.column),-1,-1):y.lineNumber<d.modelLineWrappedLineIdx||f.visibleColumn!==-1?void 0:new mg(f.visibleColumn,g,f.className,new Wv(f.horizontalLine.top,this.getMaxColumnOfViewLine(d)),-1,-1)});o.push(h.filter(f=>!!f))}}return o}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let s=[];const o=[],a=[],l=n.lineNumber-1,c=r.lineNumber-1;let d=null;for(let g=l;g<=c;g++){const m=this.modelLineProjections[g];if(m.isVisible()){const y=m.getViewLineNumberOfModelPosition(0,g===l?n.column:1),b=m.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(g+1)),v=b-y+1;let C=0;v>1&&m.getViewLineMinColumn(this.model,g+1,b)===1&&(C=y===0?1:2),o.push(v),a.push(C),d===null&&(d=new U(g+1,0))}else d!==null&&(s=s.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,g)),d=null)}d!==null&&(s=s.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,r.lineNumber)),d=null);const u=t-e+1,h=new Array(u);let f=0;for(let g=0,m=s.length;g<m;g++){let y=s[g];const b=Math.min(u-f,o[g]),v=a[g];let C;v===2?C=0:v===1?C=1:C=b;for(let w=0;w<b;w++)w===C&&(y=0),h[f++]=y}return h}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const r=this.projectedModelLineLineCounts.getIndexOf(e-1);let s=e;const o=r.index,a=r.remainder,l=[];for(let c=o,d=this.model.getLineCount();c<d;c++){const u=this.modelLineProjections[c];if(!u.isVisible())continue;const h=c===o?a:0;let f=u.getViewLineCount()-h,g=!1;if(s+f>t&&(g=!0,f=t-s+1),u.getViewLinesData(this.model,c+1,h,f,s-e,n,l),s+=f,g)break}return l}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);const r=this.projectedModelLineLineCounts.getIndexOf(e-1),s=r.index,o=r.remainder,a=this.modelLineProjections[s],l=a.getViewLineMinColumn(this.model,s+1,o),c=a.getViewLineMaxColumn(this.model,s+1,o);t<l&&(t=l),t>c&&(t=c);const d=a.getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new U(s+1,d)).equals(n)?new U(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),r=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new D(n.lineNumber,n.column,r.lineNumber,r.column)}convertViewPositionToModelPosition(e,t){const n=this.getViewLineInfo(e),r=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new U(n.modelLineNumber,r))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new D(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=2,r=!1,s=!1){const o=this.model.validatePosition(new U(e,t)),a=o.lineNumber,l=o.column;let c=a-1,d=!1;if(s)for(;c<this.modelLineProjections.length&&!this.modelLineProjections[c].isVisible();)c++,d=!0;else for(;c>0&&!this.modelLineProjections[c].isVisible();)c--,d=!0;if(c===0&&!this.modelLineProjections[c].isVisible())return new U(r?0:1,1);const u=1+this.projectedModelLineLineCounts.getPrefixSum(c);let h;return d?s?h=this.modelLineProjections[c].getViewPositionOfModelPosition(u,1,n):h=this.modelLineProjections[c].getViewPositionOfModelPosition(u,this.model.getLineMaxColumn(c+1),n):h=this.modelLineProjections[a-1].getViewPositionOfModelPosition(u,l,n),h}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return D.fromPositions(n)}else{const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),r=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new D(n.lineNumber,n.column,r.lineNumber,r.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.modelLineProjections[n].isVisible()){const s=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(s,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(n===0&&!this.modelLineProjections[n].isVisible())return 1;const r=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(r,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n,r,s){const o=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),a=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(a.lineNumber-o.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new D(o.lineNumber,1,a.lineNumber,a.column),t,n,r,s);let l=[];const c=o.lineNumber-1,d=a.lineNumber-1;let u=null;for(let m=c;m<=d;m++)if(this.modelLineProjections[m].isVisible())u===null&&(u=new U(m+1,m===c?o.column:1));else if(u!==null){const b=this.model.getLineMaxColumn(m);l=l.concat(this.model.getDecorationsInRange(new D(u.lineNumber,u.column,m,b),t,n,r)),u=null}u!==null&&(l=l.concat(this.model.getDecorationsInRange(new D(u.lineNumber,u.column,a.lineNumber,a.column),t,n,r)),u=null),l.sort((m,y)=>{const b=D.compareRangesUsingStarts(m.range,y.range);return b===0?m.id<y.id?-1:m.id>y.id?1:0:b});const h=[];let f=0,g=null;for(const m of l){const y=m.id;g!==y&&(g=y,h[f++]=m)}return h}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function NMe(i){if(i.length===0)return[];const e=i.slice();e.sort(D.compareRangesUsingStarts);const t=[];let n=e[0].startLineNumber,r=e[0].endLineNumber;for(let s=1,o=e.length;s<o;s++){const a=e[s];a.startLineNumber>r+1?(t.push(new D(n,1,r,1)),n=a.startLineNumber,r=a.endLineNumber):a.endLineNumber>r&&(r=a.endLineNumber)}return t.push(new D(n,1,r,1)),t}class EW{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}class NW{constructor(e,t){this.modelRange=e,this.viewLines=t}}class AMe{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,n,r){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,n,r)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class PMe{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new MMe(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,r){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,n,r)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new dP(t,n)}onModelLinesInserted(e,t,n,r){return new uP(t,n)}onModelLineChanged(e,t,n){return[!1,new LX(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const n=t-e+1,r=new Array(n);for(let s=0;s<n;s++)r[s]=0;return r}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),n=t.getLineContent();return new i5(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){const r=this.model.getLineCount();e=Math.min(Math.max(1,e),r),t=Math.min(Math.max(1,t),r);const s=[];for(let o=e;o<=t;o++){const a=o-e;s[a]=n[a]?this.getViewLineData(o):null}return s}getDecorationsInRange(e,t,n,r,s){return this.model.getDecorationsInRange(e,t,n,r,s)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class MMe{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}let OMe=class extends q{constructor(e,t,n,r,s,o,a,l,c){if(super(),this.languageConfigurationService=a,this._themeService=l,this._attachedView=c,this.hiddenAreasModel=new BMe,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new oMe,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new am(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new fn(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=F5.create(this.model),this.model.isTooLargeForTokenization())this._lines=new PMe(this.model);else{const d=this._configuration.options,u=d.get(50),h=d.get(137),f=d.get(144),g=d.get(136),m=d.get(128);this._lines=new EMe(this._editorId,this.model,r,s,u,this.model.getOptions().tabSize,h,f.wrappingColumn,g,m)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new _Me(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new LMe(this._configuration,this.getLineCount(),o)),this._register(this.viewLayout.onDidScroll(d=>{d.scrollTopChanged&&this._handleVisibleLinesChanged(),d.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new tMe(d)),this._eventDispatcher.emitOutgoingEvent(new A5(d.oldScrollWidth,d.oldScrollLeft,d.oldScrollHeight,d.oldScrollTop,d.scrollWidth,d.scrollLeft,d.scrollHeight,d.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(d=>{this._eventDispatcher.emitOutgoingEvent(d)})),this._decorations=new DMe(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(d=>{try{const u=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(u,d)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(XC.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new rMe)})),this._register(this._themeService.onDidColorThemeChange(d=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new nMe(d))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new D(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new JPe(e)),this._eventDispatcher.emitOutgoingEvent(new N5(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new ZPe)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new XPe)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new U(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new PW(t,this._viewportStart.startLineDelta)}return new PW(null,0)}_onConfigurationChanged(e,t){const n=this._captureStableViewport(),r=this._configuration.options,s=r.get(50),o=r.get(137),a=r.get(144),l=r.get(136),c=r.get(128);this._lines.setWrappingSettings(s,o,a.wrappingColumn,l,c)&&(e.emitViewEvent(new tS),e.emitViewEvent(new nS),e.emitViewEvent(new um(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(90)&&(this._decorations.reset(),e.emitViewEvent(new um(null))),e.emitViewEvent(new YPe(t)),this.viewLayout.onConfigurationChanged(t),n.recoverViewportStart(this.coordinatesConverter,this.viewLayout),am.shouldRecreate(t)&&(this.cursorConfig=new am(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const n=this._eventDispatcher.beginEmitViewEvents();let r=!1,s=!1;const o=e instanceof Lg?e.rawContentChangedEvent.changes:e.changes,a=e instanceof Lg?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(const u of o)switch(u.changeType){case 4:{for(let h=0;h<u.detail.length;h++){const f=u.detail[h];let g=u.injectedTexts[h];g&&(g=g.filter(m=>!m.ownerId||m.ownerId===this._editorId)),l.addRequest(f,g,null)}break}case 2:{let h=null;u.injectedText&&(h=u.injectedText.filter(f=>!f.ownerId||f.ownerId===this._editorId)),l.addRequest(u.detail,h,null);break}}const c=l.finalize(),d=new uu(c);for(const u of o)switch(u.changeType){case 1:{this._lines.onModelFlushed(),n.emitViewEvent(new tS),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),r=!0;break}case 3:{const h=this._lines.onModelLinesDeleted(a,u.fromLineNumber,u.toLineNumber);h!==null&&(n.emitViewEvent(h),this.viewLayout.onLinesDeleted(h.fromLineNumber,h.toLineNumber)),r=!0;break}case 4:{const h=d.takeCount(u.detail.length),f=this._lines.onModelLinesInserted(a,u.fromLineNumber,u.toLineNumber,h);f!==null&&(n.emitViewEvent(f),this.viewLayout.onLinesInserted(f.fromLineNumber,f.toLineNumber)),r=!0;break}case 2:{const h=d.dequeue(),[f,g,m,y]=this._lines.onModelLineChanged(a,u.lineNumber,h);s=f,g&&n.emitViewEvent(g),m&&(n.emitViewEvent(m),this.viewLayout.onLinesInserted(m.fromLineNumber,m.toLineNumber)),y&&(n.emitViewEvent(y),this.viewLayout.onLinesDeleted(y.fromLineNumber,y.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!r&&s&&(n.emitViewEvent(new nS),n.emitViewEvent(new um(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const n=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(n){const r=this.coordinatesConverter.convertModelPositionToViewPosition(n.getStartPosition()),s=this.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber);this.viewLayout.setScrollPosition({scrollTop:s+this._viewportStart.startLineDelta},1)}}try{const n=this._eventDispatcher.beginEmitViewEvents();e instanceof Lg&&n.emitOutgoingEvent(new gMe(e.contentChangedEvent)),this._cursor.onModelContentChanged(n,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let n=0,r=e.ranges.length;n<r;n++){const s=e.ranges[n],o=this.coordinatesConverter.convertModelPositionToViewPosition(new U(s.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new U(s.toLineNumber,this.model.getLineMaxColumn(s.toLineNumber))).lineNumber;t[n]={fromLineNumber:o,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new iMe(t)),this._eventDispatcher.emitOutgoingEvent(new mMe(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new eMe),this.cursorConfig=new am(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new fMe(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new am(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new hMe(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new tS),t.emitViewEvent(new nS),t.emitViewEvent(new um(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new am(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new pMe(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new um(e)),this._eventDispatcher.emitOutgoingEvent(new uMe(e))}))}setHiddenAreas(e,t){this.hiddenAreasModel.setHiddenAreas(t,e);const n=this.hiddenAreasModel.getMergedRanges();if(n===this.previousHiddenAreas)return;this.previousHiddenAreas=n;const r=this._captureStableViewport();let s=!1;try{const o=this._eventDispatcher.beginEmitViewEvents();s=this._lines.setHiddenAreas(n),s&&(o.emitViewEvent(new tS),o.emitViewEvent(new nS),o.emitViewEvent(new um(null)),this._cursor.onLineMappingChanged(o),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged()),r.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),s&&this._eventDispatcher.emitOutgoingEvent(new cMe)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(143),t=this._configuration.options.get(66),n=Math.max(20,Math.round(e.height/t)),r=this.viewLayout.getLinesViewportData(),s=Math.max(1,r.completelyVisibleStartLineNumber-n),o=Math.min(this.getLineCount(),r.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new D(s,this.getLineMinColumn(s),o,this.getLineMaxColumn(o)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];const r=[];let s=0,o=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,c=t.endColumn;for(let d=0,u=n.length;d<u;d++){const h=n[d].startLineNumber,f=n[d].endLineNumber;f<o||h>l||(o<h&&(r[s++]=new D(o,a,h-1,this.model.getLineMaxColumn(h-1))),o=f+1,a=1)}return(o<l||o===l&&a<c)&&(r[s++]=new D(o,a,l,c)),r}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new D(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,r=t.completelyVisibleEndLineNumber;return new D(n,this.getLineMinColumn(n),r,this.getLineMaxColumn(r))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),r=this.coordinatesConverter.convertViewPositionToModelPosition(new U(n,this.getLineMinColumn(n))),s=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:r,firstPositionDeltaTop:s}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),r=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:r}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,r){return this._lines.getViewLinesBracketGuides(e,t,n,r)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=ns(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Dl(this.getLineContent(e));return t===-1?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const r=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,r)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const n=this.model.mightContainRTL(),r=this.model.mightContainNonBasicASCII(),s=this.getTabSize(),o=this._lines.getViewLineData(e);return o.inlineDecorations&&(t=[...t,...o.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new Po(o.minColumn,o.maxColumn,o.content,o.continuesWithWrappedLine,n,r,o.tokens,t,s,o.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){const r=this._lines.getViewLinesData(e,t,n);return new PIe(this.getTabSize(),r)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,mT(this._configuration.options)),n=new FMe;for(const r of t){const s=r.options,o=s.overviewRuler;if(!o)continue;const a=o.position;if(a===0)continue;const l=o.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(r.range.startLineNumber,r.range.startColumn),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(r.range.endLineNumber,r.range.endColumn);n.accept(l,s.zIndex,c,d,a)}return n.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const n=t.options.overviewRuler;n==null||n.invalidateCachedColor();const r=t.options.minimap;r==null||r.invalidateCachedColor()}}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}getValueLengthInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(n,t)}modifyPosition(e,t){const n=this.coordinatesConverter.convertViewPositionToModelPosition(e);return this.model.modifyPosition(n,t)}deduceModelPositionRelativeToViewPosition(e,t,n){const r=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);const o=this.model.getOffsetAt(r)+t;return this.model.getPositionAt(o)}getPlainTextToCopy(e,t,n){const r=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(D.compareRangesUsingStarts);let s=!1,o=!1;for(const l of e)l.isEmpty()?s=!0:o=!0;if(!o){if(!t)return"";const l=e.map(d=>d.startLineNumber);let c="";for(let d=0;d<l.length;d++)d>0&&l[d-1]===l[d]||(c+=this.model.getLineContent(l[d])+r);return c}if(s&&t){const l=[];let c=0;for(const d of e){const u=d.startLineNumber;d.isEmpty()?u!==c&&l.push(this.model.getLineContent(u)):l.push(this.model.getValueInRange(d,n?2:0)),c=u}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,n?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const n=this.model.getLanguageId();if(n===Eo||e.length!==1)return null;let r=e[0];if(r.isEmpty()){if(!t)return null;const d=r.startLineNumber;r=new D(d,this.model.getLineMinColumn(d),d,this.model.getLineMaxColumn(d))}const s=this._configuration.options.get(50),o=this._getColorMap(),l=/[:;\\\/<>]/.test(s.fontFamily)||s.fontFamily===Qs.fontFamily;let c;return l?c=Qs.fontFamily:(c=s.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${Qs.fontFamily}`),{mode:n,html:`<div style="color: ${o[1]};background-color: ${o[2]};font-family: ${c};font-weight: ${s.fontWeight};font-size: ${s.fontSize}px;line-height: ${s.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(r,o)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,r=e.startColumn,s=e.endLineNumber,o=e.endColumn,a=this.getTabSize();let l="";for(let c=n;c<=s;c++){const d=this.model.tokenization.getLineTokens(c),u=d.getLineContent(),h=c===n?r-1:0,f=c===s?o-1:u.length;u===""?l+="<br>":l+=wMe(u,d.inflate(),t,h,f,a,Ar)}return l}_getColorMap(){const e=Gn.getColorMap(),t=["#000000"];if(e)for(let n=1,r=e.length;n<r;n++)t[n]=K.Format.CSS.formatHex(e[n]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){return this._withViewEventsCollector(r=>this._cursor.setStates(r,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=0){this._withViewEventsCollector(r=>this._cursor.setSelections(r,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new dMe);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(r=>this._cursor.executeEdits(r,e,t,n))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,r,s){this._executeCursorEdit(o=>this._cursor.compositionType(o,e,t,n,r,s))}paste(e,t,n,r){this._executeCursorEdit(s=>this._cursor.paste(s,e,t,n,r))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealPrimaryCursor(e,t,n=!1){this._withViewEventsCollector(r=>this._cursor.revealPrimary(r,e,n,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new D(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(r=>r.emitViewEvent(new kx(e,!1,n,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new D(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(r=>r.emitViewEvent(new kx(e,!1,n,null,0,!0,0)))}revealRange(e,t,n,r,s){this._withViewEventsCollector(o=>o.emitViewEvent(new kx(e,!1,n,null,r,t,s)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new sMe),this._eventDispatcher.emitOutgoingEvent(new lMe))}_withViewEventsCollector(e){try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}};class F5{static create(e){const t=e._setTrackedRange(null,new D(1,1,1,1),1);return new F5(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,n,r,s){this._model=e,this._viewLineNumber=t,this._isValid=n,this._modelTrackedRange=r,this._startLineDelta=s}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const n=e.coordinatesConverter.convertViewPositionToModelPosition(new U(t,e.getLineMinColumn(t))),r=e.model._setTrackedRange(this._modelTrackedRange,new D(n.lineNumber,n.column,n.lineNumber,n.column),1),s=e.viewLayout.getVerticalOffsetForLineNumber(t),o=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=r,this._startLineDelta=o-s}invalidate(){this._isValid=!1}}class FMe{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,r,s){const o=this._asMap[e];if(o){const a=o.data,l=a[a.length-3],c=a[a.length-1];if(l===s&&c+1>=n){r>c&&(a[a.length-1]=r);return}a.push(s,n,r)}else{const a=new G0(e,t,[s,n,r]);this._asMap[e]=a,this.asArray.push(a)}}}class BMe{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){const n=this.hiddenAreas.get(e);n&&AW(n,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce((t,n)=>WMe(t,n),[]);return AW(this.ranges,e)?this.ranges:(this.ranges=e,this.ranges)}}function WMe(i,e){const t=[];let n=0,r=0;for(;n<i.length&&r<e.length;){const s=i[n],o=e[r];if(s.endLineNumber<o.startLineNumber-1)t.push(i[n++]);else if(o.endLineNumber<s.startLineNumber-1)t.push(e[r++]);else{const a=Math.min(s.startLineNumber,o.startLineNumber),l=Math.max(s.endLineNumber,o.endLineNumber);t.push(new D(a,1,l,1)),n++,r++}}for(;n<i.length;)t.push(i[n++]);for(;r<e.length;)t.push(e[r++]);return t}function AW(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(!i[t].equalsRange(e[t]))return!1;return!0}class PW{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const n=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),r=t.getVerticalOffsetForLineNumber(n.lineNumber);t.setScrollPosition({scrollTop:r+this.startLineDelta},1)}}class qD{constructor(...e){this._entries=new Map;for(const[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}get(e){return this._entries.get(e)}}var fy;(function(i){i[i.Ignore=0]="Ignore",i[i.Info=1]="Info",i[i.Warning=2]="Warning",i[i.Error=3]="Error"})(fy||(fy={}));(function(i){const e="error",t="warning",n="warn",r="info",s="ignore";function o(l){return l?Pm(e,l)?i.Error:Pm(t,l)||Pm(n,l)?i.Warning:Pm(r,l)?i.Info:i.Ignore:i.Ignore}i.fromValue=o;function a(l){switch(l){case i.Error:return e;case i.Warning:return t;case i.Info:return r;default:return s}}i.toString=a})(fy||(fy={}));const di=fy;var GD=di;const wi=Lt("notificationService");class VMe{}class Gv{constructor(e,t,n,r,s){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=n,this.breakOffsetsVisibleColumn=r,this.wrappedTextIndentLength=s}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let r=this.breakOffsets[e]-t;return e>0&&(r+=this.wrappedTextIndentLength),r}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let r=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&r>this.injectionOffsets[s];s++)r<this.injectionOffsets[s]+this.injectionOptions[s].content.length?r=this.injectionOffsets[s]:r-=this.injectionOptions[s].content.length;return r}translateToOutputPosition(e,t=2){let n=e;if(this.injectionOffsets!==null)for(let r=0;r<this.injectionOffsets.length&&!(e<this.injectionOffsets[r]||t!==1&&e===this.injectionOffsets[r]);r++)n+=this.injectionOptions[r].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let n=0,r=this.breakOffsets.length-1,s=0,o=0;for(;n<=r;){s=n+(r-n)/2|0;const l=this.breakOffsets[s];if(o=s>0?this.breakOffsets[s-1]:0,t===0)if(e<=o)r=s-1;else if(e>l)n=s+1;else break;else if(e<o)r=s-1;else if(e>=l)n=s+1;else break}let a=e-o;return s>0&&(a+=this.wrappedTextIndentLength),new iS(s,a)}normalizeOutputPosition(e,t,n){if(this.injectionOffsets!==null){const r=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.normalizeOffsetInInputWithInjectionsAroundInjections(r,n);if(s!==r)return this.offsetInInputWithInjectionsToOutputPosition(s,n)}if(n===0){if(e>0&&t===this.getMinOutputOffset(e))return new iS(e-1,this.getMaxOutputOffset(e-1))}else if(n===1){const r=this.getOutputLineCount()-1;if(e<r&&t===this.getMaxOutputOffset(e))return new iS(e+1,this.getMinOutputOffset(e+1))}return new iS(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===2){if(e===n.offsetInInputWithInjections+n.length&&MW(this.injectionOptions[n.injectedTextIndex].cursorStops))return n.offsetInInputWithInjections+n.length;{let r=n.offsetInInputWithInjections;if(OW(this.injectionOptions[n.injectedTextIndex].cursorStops))return r;let s=n.injectedTextIndex-1;for(;s>=0&&this.injectionOffsets[s]===this.injectionOffsets[n.injectedTextIndex]&&!(MW(this.injectionOptions[s].cursorStops)||(r-=this.injectionOptions[s].content.length,OW(this.injectionOptions[s].cursorStops)));)s--;return r}}else if(t===1||t===4){let r=n.offsetInInputWithInjections+n.length,s=n.injectedTextIndex;for(;s+1<this.injectionOffsets.length&&this.injectionOffsets[s+1]===this.injectionOffsets[s];)r+=this.injectionOptions[s+1].content.length,s++;return r}else if(t===0||t===3){let r=n.offsetInInputWithInjections,s=n.injectedTextIndex;for(;s-1>=0&&this.injectionOffsets[s-1]===this.injectionOffsets[s];)r-=this.injectionOptions[s-1].content.length,s--;return r}vD()}getInjectedText(e,t){const n=this.outputPositionToOffsetInInputWithInjections(e,t),r=this.getInjectedTextAtOffset(n);return r?{options:this.injectionOptions[r.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let r=0;for(let s=0;s<t.length;s++){const o=n[s].content.length,a=t[s]+r,l=t[s]+r+o;if(a>e)break;if(e<=l)return{injectedTextIndex:s,offsetInInputWithInjections:a,length:o};r+=o}}}}function MW(i){return i==null?!0:i===xl.Right||i===xl.Both}function OW(i){return i==null?!0:i===xl.Left||i===xl.Both}class iS{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new U(e+this.outputLineIndex,this.outputOffset+1)}}class B5{static create(e){return new B5(e.get(132),e.get(131))}constructor(e,t){this.classifier=new HMe(e,t)}createLineBreaksComputer(e,t,n,r,s){const o=[],a=[],l=[];return{addRequest:(c,d,u)=>{o.push(c),a.push(d),l.push(u)},finalize:()=>{const c=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,d=[];for(let u=0,h=o.length;u<h;u++){const f=a[u],g=l[u];g&&!g.injectionOptions&&!f?d[u]=UMe(this.classifier,g,o[u],t,n,c,r,s):d[u]=jMe(this.classifier,o[u],f,t,n,c,r,s)}return fP.length=0,gP.length=0,d}}}}class HMe extends X1{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let fP=[],gP=[];function UMe(i,e,t,n,r,s,o,a){if(r===-1)return null;const l=t.length;if(l<=1)return null;const c=a==="keepAll",d=e.breakOffsets,u=e.breakOffsetsVisibleColumn,h=RX(t,n,r,s,o),f=r-h,g=fP,m=gP;let y=0,b=0,v=0,C=r;const w=d.length;let S=0;if(S>=0){let L=Math.abs(u[S]-C);for(;S+1<w;){const T=Math.abs(u[S+1]-C);if(T>=L)break;L=T,S++}}for(;S<w;){let L=S<0?0:d[S],T=S<0?0:u[S];b>L&&(L=b,T=v);let I=0,R=0,B=0,V=0;if(T<=C){let W=T,X=L===0?0:t.charCodeAt(L-1),oe=L===0?0:i.get(X),we=!0;for(let ke=L;ke<l;ke++){const Ee=ke,Le=t.charCodeAt(ke);let qe,Ue;if(zi(Le)?(ke++,qe=0,Ue=2):(qe=i.get(Le),Ue=Zv(Le,W,n,s)),Ee>b&&pP(X,oe,Le,qe,c)&&(I=Ee,R=W),W+=Ue,W>C){Ee>b?(B=Ee,V=W-Ue):(B=ke+1,V=W),W-R>f&&(I=0),we=!1;break}X=Le,oe=qe}if(we){y>0&&(g[y]=d[d.length-1],m[y]=u[d.length-1],y++);break}}if(I===0){let W=T,X=t.charCodeAt(L),oe=i.get(X),we=!1;for(let ke=L-1;ke>=b;ke--){const Ee=ke+1,Le=t.charCodeAt(ke);if(Le===9){we=!0;break}let qe,Ue;if($g(Le)?(ke--,qe=0,Ue=2):(qe=i.get(Le),Ue=Bh(Le)?s:1),W<=C){if(B===0&&(B=Ee,V=W),W<=C-f)break;if(pP(Le,qe,X,oe,c)){I=Ee,R=W;break}}W-=Ue,X=Le,oe=qe}if(I!==0){const ke=f-(V-R);if(ke<=n){const Ee=t.charCodeAt(B);let Le;zi(Ee)?Le=2:Le=Zv(Ee,V,n,s),ke-Le<0&&(I=0)}}if(we){S--;continue}}if(I===0&&(I=B,R=V),I<=b){const W=t.charCodeAt(b);zi(W)?(I=b+2,R=v+2):(I=b+1,R=v+Zv(W,v,n,s))}for(b=I,g[y]=I,v=R,m[y]=R,y++,C=R+f;S<0||S<w&&u[S]<R;)S++;let F=Math.abs(u[S]-C);for(;S+1<w;){const W=Math.abs(u[S+1]-C);if(W>=F)break;F=W,S++}}return y===0?null:(g.length=y,m.length=y,fP=e.breakOffsets,gP=e.breakOffsetsVisibleColumn,e.breakOffsets=g,e.breakOffsetsVisibleColumn=m,e.wrappedTextIndentLength=h,e)}function jMe(i,e,t,n,r,s,o,a){const l=Bl.applyInjectedText(e,t);let c,d;if(t&&t.length>0?(c=t.map(R=>R.options),d=t.map(R=>R.column-1)):(c=null,d=null),r===-1)return c?new Gv(d,c,[l.length],[],0):null;const u=l.length;if(u<=1)return c?new Gv(d,c,[l.length],[],0):null;const h=a==="keepAll",f=RX(l,n,r,s,o),g=r-f,m=[],y=[];let b=0,v=0,C=0,w=r,S=l.charCodeAt(0),L=i.get(S),T=Zv(S,0,n,s),I=1;zi(S)&&(T+=1,S=l.charCodeAt(1),L=i.get(S),I++);for(let R=I;R<u;R++){const B=R,V=l.charCodeAt(R);let F,W;zi(V)?(R++,F=0,W=2):(F=i.get(V),W=Zv(V,T,n,s)),pP(S,L,V,F,h)&&(v=B,C=T),T+=W,T>w&&((v===0||T-C>g)&&(v=B,C=T-W),m[b]=v,y[b]=C,b++,w=C+g,v=0),S=V,L=F}return b===0&&(!t||t.length===0)?null:(m[b]=u,y[b]=T,new Gv(d,c,m,y,f))}function Zv(i,e,t,n){return i===9?t-e%t:Bh(i)||i<32?n:1}function FW(i,e){return e-i%e}function pP(i,e,t,n,r){return t!==32&&(e===2&&n!==2||e!==1&&n===1||!r&&e===3&&n!==2||!r&&n===3&&e!==1)}function RX(i,e,t,n,r){let s=0;if(r!==0){const o=ns(i);if(o!==-1){for(let l=0;l<o;l++){const c=i.charCodeAt(l)===9?FW(s,e):1;s+=c}const a=r===3?2:r===2?1:0;for(let l=0;l<a;l++){const c=FW(s,e);s+=c}s+n>t&&(s=0)}}return s}const DE=vu("domLineBreaksComputer",{createHTML:i=>i});class W5{static create(){return new W5}constructor(){}createLineBreaksComputer(e,t,n,r,s){const o=[],a=[];return{addRequest:(l,c,d)=>{o.push(l),a.push(c)},finalize:()=>zMe(o,e,t,n,r,s,a)}}}function zMe(i,e,t,n,r,s,o){var a;function l(R){const B=o[R];if(B){const V=Bl.applyInjectedText(i[R],B),F=B.map(X=>X.options),W=B.map(X=>X.column-1);return new Gv(W,F,[V.length],[],0)}else return null}if(n===-1){const R=[];for(let B=0,V=i.length;B<V;B++)R[B]=l(B);return R}const c=Math.round(n*e.typicalHalfwidthCharacterWidth),u=Math.round(t*(r===3?2:r===2?1:0)),h=Math.ceil(e.spaceWidth*u),f=document.createElement("div");Ir(f,e);const g=new Z1(1e4),m=[],y=[],b=[],v=[],C=[];for(let R=0;R<i.length;R++){const B=Bl.applyInjectedText(i[R],o[R]);let V=0,F=0,W=c;if(r!==0)if(V=ns(B),V===-1)V=0;else{for(let ke=0;ke<V;ke++){const Ee=B.charCodeAt(ke)===9?t-F%t:1;F+=Ee}const we=Math.ceil(e.spaceWidth*F);we+e.typicalFullwidthCharacterWidth>c?(V=0,F=0):W=c-we}const X=B.substr(V),oe=$Me(X,F,t,W,g,h);m[R]=V,y[R]=F,b[R]=X,v[R]=oe[0],C[R]=oe[1]}const w=g.build(),S=(a=DE==null?void 0:DE.createHTML(w))!==null&&a!==void 0?a:w;f.innerHTML=S,f.style.position="absolute",f.style.top="10000",s==="keepAll"?(f.style.wordBreak="keep-all",f.style.overflowWrap="anywhere"):(f.style.wordBreak="inherit",f.style.overflowWrap="break-word"),document.body.appendChild(f);const L=document.createRange(),T=Array.prototype.slice.call(f.children,0),I=[];for(let R=0;R<i.length;R++){const B=T[R],V=KMe(L,B,b[R],v[R]);if(V===null){I[R]=l(R);continue}const F=m[R],W=y[R]+u,X=C[R],oe=[];for(let Le=0,qe=V.length;Le<qe;Le++)oe[Le]=X[V[Le]];if(F!==0)for(let Le=0,qe=V.length;Le<qe;Le++)V[Le]+=F;let we,ke;const Ee=o[R];Ee?(we=Ee.map(Le=>Le.options),ke=Ee.map(Le=>Le.column-1)):(we=null,ke=null),I[R]=new Gv(ke,we,V,oe,W)}return document.body.removeChild(f),I}function $Me(i,e,t,n,r,s){if(s!==0){const h=String(s);r.appendString('<div style="text-indent: -'),r.appendString(h),r.appendString("px; padding-left: "),r.appendString(h),r.appendString("px; box-sizing: border-box; width:")}else r.appendString('<div style="width:');r.appendString(String(n)),r.appendString('px;">');const o=i.length;let a=e,l=0;const c=[],d=[];let u=0<o?i.charCodeAt(0):0;r.appendString("<span>");for(let h=0;h<o;h++){h!==0&&h%16384===0&&r.appendString("</span><span>"),c[h]=l,d[h]=a;const f=u;u=h+1<o?i.charCodeAt(h+1):0;let g=1,m=1;switch(f){case 9:g=t-a%t,m=g;for(let y=1;y<=g;y++)y<g?r.appendCharCode(160):r.appendASCIICharCode(32);break;case 32:u===32?r.appendCharCode(160):r.appendASCIICharCode(32);break;case 60:r.appendString("&lt;");break;case 62:r.appendString("&gt;");break;case 38:r.appendString("&amp;");break;case 0:r.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:r.appendCharCode(65533);break;default:Bh(f)&&m++,f<32?r.appendCharCode(9216+f):r.appendCharCode(f)}l+=g,a+=m}return r.appendString("</span>"),c[i.length]=l,d[i.length]=a,r.appendString("</div>"),[c,d]}function KMe(i,e,t,n){if(t.length<=1)return null;const r=Array.prototype.slice.call(e.children,0),s=[];try{mP(i,r,n,0,null,t.length-1,null,s)}catch(o){return console.log(o),null}return s.length===0?null:(s.push(t.length),s)}function mP(i,e,t,n,r,s,o,a){if(n===s||(r=r||IE(i,e,t[n],t[n+1]),o=o||IE(i,e,t[s],t[s+1]),Math.abs(r[0].top-o[0].top)<=.1))return;if(n+1===s){a.push(s);return}const l=n+(s-n)/2|0,c=IE(i,e,t[l],t[l+1]);mP(i,e,t,n,r,l,c,a),mP(i,e,t,l,c,s,o,a)}function IE(i,e,t,n){return i.setStart(e[t/16384|0].firstChild,t%16384),i.setEnd(e[n/16384|0].firstChild,n%16384),i.getClientRects()}class qMe extends q{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new k3),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,n){this._editor=e,this._instantiationService=n;for(const r of t){if(this._pending.has(r.id)){ut(new Error(`Cannot have two contributions with the same id ${r.id}`));continue}this._pending.set(r.id,r)}this._instantiateSome(0),this._register(Ud(()=>{this._instantiateSome(1)})),this._register(Ud(()=>{this._instantiateSome(2)})),this._register(Ud(()=>{this._instantiateSome(3)},5e3))}saveViewState(){const e={};for(const[t,n]of this._instances)typeof n.saveViewState=="function"&&(e[t]=n.saveViewState());return e}restoreViewState(e){for(const[t,n]of this._instances)typeof n.restoreViewState=="function"&&n.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){this._register(Ud(()=>{this._instantiateSome(1)},50))}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const t=this._findPendingContributionsByInstantiation(e);for(const n of t)this._instantiateById(n.id)}_findPendingContributionsByInstantiation(e){const t=[];for(const[,n]of this._pending)n.instantiation===e&&t.push(n);return t}_instantiateById(e){const t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const n=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,n),typeof n.restoreViewState=="function"&&t.instantiation!==0&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(n){ut(n)}}}}var GMe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},bd=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},ZMe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Uf;let XMe=0,YMe=class{constructor(e,t,n,r,s,o){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=r,this.listenersToRemove=s,this.attachedView=o}dispose(){an(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}},o1=Uf=class extends q{get isSimpleWidget(){return this._configuration.isSimpleWidget}constructor(e,t,n,r,s,o,a,l,c,d,u,h){var f;super(),this.languageConfigurationService=u,this._deliveryQueue=Hxe(),this._contributions=this._register(new qMe),this._onDidDispose=this._register(new H),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new H({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new H({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new H({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new H({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new H({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new H({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new H({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new H({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new H({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new H({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new Xr(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new H({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new BW({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new BW({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new Xr(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new Xr(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new Xr(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new Xr(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new Xr(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new Xr(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new Xr(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new Xr(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new Xr(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new Xr(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new Xr(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new Xr(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new Xr(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new Xr(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new Xr(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new Xr(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new Xr(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new H({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new H({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new H({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new H({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),s.willCreateCodeEditor();const g=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=g.overflowWidgetsDomNode,delete g.overflowWidgetsDomNode,this._id=++XMe,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(n.isSimpleWidget||!1,g,d)),this._register(this._configuration.onDidChange(b=>{this._onDidChangeConfiguration.fire(b);const v=this._configuration.options;if(b.hasChanged(143)){const C=v.get(143);this._onDidLayoutChange.fire(C)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=s,this._commandService=o,this._themeService=l,this._register(new QMe(this,this._contextKeyService)),this._register(new JMe(this,this._contextKeyService,h)),this._instantiationService=r.createChild(new qD([ot,this._contextKeyService])),this._modelData=null,this._focusTracker=new eOe(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let m;Array.isArray(n.contributions)?m=n.contributions:m=h_.getEditorContributions(),this._contributions.initialize(this,m,this._instantiationService);for(const b of h_.getEditorActions()){if(this._actions.has(b.id)){ut(new Error(`Cannot have two actions with the same id ${b.id}`));continue}const v=new sX(b.id,b.label,b.alias,(f=b.precondition)!==null&&f!==void 0?f:void 0,()=>this._instantiationService.invokeFunction(C=>Promise.resolve(b.runEditorCommand(C,this,null))),this._contextKeyService);this._actions.set(v.id,v)}const y=()=>!this._configuration.options.get(90)&&this._configuration.options.get(36).enabled;this._register(new oLe(this._domElement,{onDragEnter:()=>{},onDragOver:b=>{if(!y())return;const v=this.getTargetAtClientPoint(b.clientX,b.clientY);v!=null&&v.position&&this.showDropIndicatorAt(v.position)},onDrop:b=>ZMe(this,void 0,void 0,function*(){if(!y()||(this.removeDropIndicator(),!b.dataTransfer))return;const v=this.getTargetAtClientPoint(b.clientX,b.clientY);v!=null&&v.position&&this._onDropIntoEditor.fire({position:v.position,event:b})}),onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){var t;(t=this._modelData)===null||t===void 0||t.view.writeScreenReaderContent(e)}_createConfiguration(e,t,n){return new zA(e,t,this._domElement,n)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return VC.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?Yt.getWordAtPosition(this._modelData.model,this._configuration.options.get(129),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let n=0;return e&&e.lineEnding&&e.lineEnding===`
`?n=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const n=this.hasTextFocus(),r=this._detachModel();this._attachModel(t),n&&this.hasModel()&&this.focus();const s={oldModelUrl:r?r.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(s),this._postDetachModelCleanup(r),this._contributions.onAfterModelAttached()}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,n,r){const s=e.model.validatePosition({lineNumber:t,column:n}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(o.lineNumber,r)}getTopForLineNumber(e,t=!1){return this._modelData?Uf._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?Uf._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,n,r=!1){const s=e.model.validatePosition({lineNumber:t,column:n}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber,r)}getBottomForLineNumber(e,t=!1){return this._modelData?Uf._getVerticalOffsetAfterPosition(this._modelData,e,1,t):-1}setHiddenAreas(e,t){var n;(n=this._modelData)===null||n===void 0||n.viewModel.setHiddenAreas(e.map(r=>D.lift(r)),t)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return Wi.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!U.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,r){if(!this._modelData)return;if(!D.isIRange(e))throw new Error("Invalid arguments");const s=this._modelData.model.validateRange(e),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(s);this._modelData.viewModel.revealRange("api",n,o,t,r)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,n){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new D(e,1,e,1),t,!1,n)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,r){if(!U.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new D(e.lineNumber,e.column,e.lineNumber,e.column),t,n,r)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const n=Be.isISelection(e),r=D.isIRange(e);if(!n&&!r)throw new Error("Invalid arguments");if(n)this._setSelectionImpl(e,t);else if(r){const s={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(s,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const n=new Be(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[n])}revealLines(e,t,n=0){this._revealLines(e,t,0,n)}revealLinesInCenter(e,t,n=0){this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._revealLines(e,t,2,n)}revealLinesNearTop(e,t,n=0){this._revealLines(e,t,5,n)}_revealLines(e,t,n,r){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new D(e,1,t,1),n,!1,r)}revealRange(e,t=0,n=!1,r=!0){this._revealRange(e,n?1:0,r,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,n,r){if(!D.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(D.lift(e),t,n,r)}setSelections(e,t="api",n=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let r=0,s=e.length;r<s;r++)if(!Be.isISelection(e[r]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}hasPendingScrollAnimation(){return this._modelData?this._modelData.viewModel.viewLayout.hasPendingScrollAnimation():!1}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState(),t=this._modelData.viewModel.saveCursorState(),n=this._modelData.viewModel.saveState();return{cursorState:t,viewState:n,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const n=t.cursorState;Array.isArray(n)?n.length>0&&this._modelData.viewModel.restoreCursorState(n):this._modelData.viewModel.restoreCursorState([n]),this._contributions.restoreViewState(t.contributionsState||{});const r=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(r)}}handleInitialized(){var e;(e=this._getViewModel())===null||e===void 0||e.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions.get(e)||null}trigger(e,t,n){switch(n=n||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const s=n;this._type(e,s.text||"");return}case"replacePreviousChar":{const s=n;this._compositionType(e,s.text||"",s.replaceCharCnt||0,0,0);return}case"compositionType":{const s=n;this._compositionType(e,s.text||"",s.replacePrevCharCnt||0,s.replaceNextCharCnt||0,s.positionDelta||0);return}case"paste":{const s=n;this._paste(e,s.text||"",s.pasteOnNewLine||!1,s.multicursorText||null,s.mode||null);return}case"cut":this._cut(e);return}const r=this.getAction(t);if(r){Promise.resolve(r.run(n)).then(void 0,ut);return}this._modelData&&(this._triggerEditorCommand(e,t,n)||this._triggerCommand(t,n))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,n,r,s){this._modelData&&this._modelData.viewModel.compositionType(t,n,r,s,e)}_paste(e,t,n,r,s){if(!this._modelData||t.length===0)return;const o=this._modelData.viewModel,a=o.getSelection().getStartPosition();o.paste(t,n,r,e);const l=o.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new D(a.lineNumber,a.column,l.lineNumber,l.column),languageId:s})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){const r=h_.getEditorCommand(t);return r?(n=n||{},n.source=e,this._instantiationService.invokeFunction(s=>{Promise.resolve(r.runEditorCommand(s,this,n)).then(void 0,ut)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(90)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(90)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,n){if(!this._modelData||this._configuration.options.get(90))return!1;let r;return n?Array.isArray(n)?r=()=>n:r=n:r=()=>null,this._modelData.viewModel.executeEdits(e,t,r),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new tOe(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,mT(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,mT(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(143)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e){this._configuration.observeContainer(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(n)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(n)}}addGlyphMarginWidget(e){const t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}layoutGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const n=this._glyphMarginWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(n)}}removeGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const n=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(n)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),n=this._configuration.options,r=n.get(143),s=Uf._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),o=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+r.glyphMarginWidth+r.lineNumbersWidth+r.decorationsWidth-this.getScrollLeft();return{top:s,left:o,height:n.get(66)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){Ir(e,this._configuration.options.get(50))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const n=e.onBeforeAttached(),r=new OMe(this._id,this._configuration,e,W5.create(),B5.create(this._configuration.options),a=>la(a),this.languageConfigurationService,this._themeService,n);t.push(e.onWillDispose(()=>this.setModel(null))),t.push(r.onEvent(a=>{switch(a.kind){case 0:this._onDidContentSizeChange.fire(a);break;case 1:this._editorTextFocus.setValue(a.hasFocus);break;case 2:this._onDidScrollChange.fire(a);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(a.reachedMaxCursorCount){const u=this.getOption(79),h=p("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",u);this._notificationService.prompt(GD.Warning,h,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:p("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const l=[];for(let u=0,h=a.selections.length;u<h;u++)l[u]=a.selections[u].getPosition();const c={position:l[0],secondaryPositions:l.slice(1),reason:a.reason,source:a.source};this._onDidChangeCursorPosition.fire(c);const d={selection:a.selections[0],secondarySelections:a.selections.slice(1),modelVersionId:a.modelVersionId,oldSelections:a.oldSelections,oldModelVersionId:a.oldModelVersionId,source:a.source,reason:a.reason};this._onDidChangeCursorSelection.fire(d);break}case 7:this._onDidChangeModelDecorations.fire(a.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(a.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(a.event);break;case 10:this._onDidChangeModelContent.fire(a.event);break;case 11:this._onDidChangeModelOptions.fire(a.event);break;case 12:this._onDidChangeModelTokens.fire(a.event);break}}));const[s,o]=this._createView(r);if(o){this._domElement.appendChild(s.domNode.domNode);let a=Object.keys(this._contentWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];s.addContentWidget(this._contentWidgets[d])}a=Object.keys(this._overlayWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];s.addOverlayWidget(this._overlayWidgets[d])}a=Object.keys(this._glyphMarginWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];s.addGlyphMarginWidget(this._glyphMarginWidgets[d])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new YMe(e,r,s,o,t,n)}_createView(e){let t;this.isSimpleWidget?t={paste:(s,o,a,l)=>{this._paste("keyboard",s,o,a,l)},type:s=>{this._type("keyboard",s)},compositionType:(s,o,a,l)=>{this._compositionType("keyboard",s,o,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(s,o,a,l)=>{const c={text:s,pasteOnNewLine:o,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:s=>{const o={text:s};this._commandService.executeCommand("type",o)},compositionType:(s,o,a,l)=>{if(a||l){const c={text:s,replacePrevCharCnt:o,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:s,replaceCharCnt:o};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const n=new UD(e.coordinatesConverter);return n.onKeyDown=s=>this._onKeyDown.fire(s),n.onKeyUp=s=>this._onKeyUp.fire(s),n.onContextMenu=s=>this._onContextMenu.fire(s),n.onMouseMove=s=>this._onMouseMove.fire(s),n.onMouseLeave=s=>this._onMouseLeave.fire(s),n.onMouseDown=s=>this._onMouseDown.fire(s),n.onMouseUp=s=>this._onMouseUp.fire(s),n.onMouseDrag=s=>this._onMouseDrag.fire(s),n.onMouseDrop=s=>this._onMouseDrop.fire(s),n.onMouseDropCanceled=s=>this._onMouseDropCanceled.fire(s),n.onMouseWheel=s=>this._onMouseWheel.fire(s),[new tP(t,this._configuration,this._themeService.getColorTheme(),e,n,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){e==null||e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const t=[{range:new D(e.lineNumber,e.column,e.lineNumber,e.column),options:Uf.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,t){this._contextKeyService.createKey(e,t)}};o1.dropIntoEditorDecorationOptions=dt.register({description:"workbench-dnd-target",className:"dnd-target"});o1=Uf=GMe([bd(3,rt),bd(4,Jt),bd(5,oi),bd(6,ot),bd(7,qi),bd(8,wi),bd(9,yu),bd(10,wn),bd(11,Fe)],o1);class BW extends q{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new H(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new H(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class Xr extends H{constructor(e,t){super({deliveryQueue:t}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class QMe extends q{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=N.editorSimpleInput.bindTo(t),this._editorFocus=N.focus.bindTo(t),this._textInputFocus=N.textInputFocus.bindTo(t),this._editorTextFocus=N.editorTextFocus.bindTo(t),this._tabMovesFocus=N.tabMovesFocus.bindTo(t),this._editorReadonly=N.readOnly.bindTo(t),this._inDiffEditor=N.inDiffEditor.bindTo(t),this._editorColumnSelection=N.columnSelection.bindTo(t),this._hasMultipleSelections=N.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=N.hasNonEmptySelection.bindTo(t),this._canUndo=N.canUndo.bindTo(t),this._canRedo=N.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(Q_.onDidChangeTabFocus(n=>this._tabMovesFocus.set(n))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._tabMovesFocus.set(Q_.getTabFocusMode()),this._editorReadonly.set(e.get(90)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class JMe extends q{constructor(e,t,n){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=n,this._langId=N.languageId.bindTo(t),this._hasCompletionItemProvider=N.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=N.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=N.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=N.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=N.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=N.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=N.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=N.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=N.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=N.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=N.hasReferenceProvider.bindTo(t),this._hasRenameProvider=N.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=N.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=N.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=N.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=N.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=N.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=N.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=N.isInWalkThroughSnippet.bindTo(t);const r=()=>this._update();this._register(e.onDidChangeModel(r)),this._register(e.onDidChangeModelLanguage(r)),this._register(n.completionProvider.onDidChange(r)),this._register(n.codeActionProvider.onDidChange(r)),this._register(n.codeLensProvider.onDidChange(r)),this._register(n.definitionProvider.onDidChange(r)),this._register(n.declarationProvider.onDidChange(r)),this._register(n.implementationProvider.onDidChange(r)),this._register(n.typeDefinitionProvider.onDidChange(r)),this._register(n.hoverProvider.onDidChange(r)),this._register(n.documentHighlightProvider.onDidChange(r)),this._register(n.documentSymbolProvider.onDidChange(r)),this._register(n.referenceProvider.onDidChange(r)),this._register(n.renameProvider.onDidChange(r)),this._register(n.documentFormattingEditProvider.onDidChange(r)),this._register(n.documentRangeFormattingEditProvider.onDidChange(r)),this._register(n.signatureHelpProvider.onDidChange(r)),this._register(n.inlayHintsProvider.onDidChange(r)),r()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===bt.walkThroughSnippet)})}}class eOe extends q{constructor(e){super(),this._onChange=this._register(new H),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(qc(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}class tOe{get length(){return this._decorationIds.length}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}onDidChange(e,t,n){return this._editor.onDidChangeModelDecorations(r=>{this._isChangingDecorations||e.call(t,r)},n)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const n of this._decorationIds){const r=e.getDecorationRange(n);r&&t.push(r)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}}const nOe=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),iOe=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function RE(i){return nOe+encodeURIComponent(i.toString())+iOe}const rOe=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),sOe=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function oOe(i){return rOe+encodeURIComponent(i.toString())+sOe}Ka((i,e)=>{const t=i.getColor(kc);t&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${RE(t)}") repeat-x bottom left; }`);const n=i.getColor(Lo);n&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${RE(n)}") repeat-x bottom left; }`);const r=i.getColor(Ms);r&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${RE(r)}") repeat-x bottom left; }`);const s=i.getColor(IRe);s&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${oOe(s)}") no-repeat bottom left; }`);const o=i.getColor(HNe);o&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${o.rgba.a}; }`)});var aOe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},lOe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},cOe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};let _P=class extends q{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new H),this._onCodeEditorAdd=this._register(new H),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new H),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new H),this._onDiffEditorAdd=this._register(new H),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new H),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new ps,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(n=>n.removeDecorationsByType(e))))}setModelProperty(e,t,n){const r=e.toString();let s;this._modelProperties.has(r)?s=this._modelProperties.get(r):(s=new Map,this._modelProperties.set(r,s)),s.set(t,n)}getModelProperty(e,t){const n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}openCodeEditor(e,t,n){return cOe(this,void 0,void 0,function*(){for(const r of this._codeEditorOpenHandlers){const s=yield r(e,t,n);if(s!==null)return s}return null})}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return st(t)}};_P=aOe([lOe(0,qi)],_P);var dOe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},WW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},uOe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};let rk=class extends _P{constructor(e,t){super(t),this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler((n,r,s)=>uOe(this,void 0,void 0,function*(){return r?this.doOpenEditor(r,n):null})))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const s=t.resource.scheme;if(s===bt.http||s===bt.https)return OG(t.resource.toString()),e}return null}const r=t.options?t.options.selection:null;if(r)if(typeof r.endLineNumber=="number"&&typeof r.endColumn=="number")e.setSelection(r),e.revealRangeInCenter(r,1);else{const s={lineNumber:r.startLineNumber,column:r.startColumn};e.setPosition(s),e.revealPositionInCenter(s,1)}return e}findModel(e,t){const n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}};rk=dOe([WW(0,ot),WW(1,qi)],rk);Wt(Jt,rk,0);const J1=Lt("layoutService");var EX=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},NX=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let sk=class{get dimension(){return this._dimension||(this._dimension=q1(window.document.body)),this._dimension}get hasContainer(){return!1}get container(){throw new Error("ILayoutService.container is not available in the standalone editor!")}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}constructor(e){this._codeEditorService=e,this.onDidLayout=Re.None,this.offset={top:0,quickPickTop:0}}};sk=EX([NX(0,Jt)],sk);let bP=class extends sk{get hasContainer(){return!1}get container(){return this._container}constructor(e,t){super(t),this._container=e}};bP=EX([NX(1,Jt)],bP);Wt(J1,sk,1);const YC=Lt("dialogService");var hOe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},VW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},rS=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function sS(i){return i.scheme===bt.file?i.fsPath:i.path}let AX=0;class oS{constructor(e,t,n,r,s,o,a){this.id=++AX,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=r,this.groupOrder=s,this.sourceId=o,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class HW{constructor(e,t){this.resourceLabel=e,this.reason=t}}class UW{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,r]of this.elements)(r.reason===0?e:t).push(r.resourceLabel);const n=[];return e.length>0&&n.push(p({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(p({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class fOe{constructor(e,t,n,r,s,o,a){this.id=++AX,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=r,this.groupOrder=s,this.sourceId=o,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,n){this.removedResources||(this.removedResources=new UW),this.removedResources.has(t)||this.removedResources.set(t,new HW(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new UW),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new HW(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class PX{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(const n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let n=0,r=this._past.length;n<r;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new TX(e,t)}restoreSnapshot(e){const t=e.elements.length;let n=!0,r=0,s=-1;for(let a=0,l=this._past.length;a<l;a++,r++){const c=this._past[a];n&&(r>=t||c.id!==e.elements[r])&&(n=!1,s=0),!n&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let o=-1;for(let a=this._future.length-1;a>=0;a--,r++){const l=this._future[a];n&&(r>=t||l.id!==e.elements[r])&&(n=!1,o=a),!n&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}s!==-1&&(this._past=this._past.slice(0,s)),o!==-1&&(this._future=this._future.slice(o+1)),this.versionId++}getElements(){const e=[],t=[];for(const n of this._past)e.push(n.actual);for(const n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class EE{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const MX=new PX("","");MX.locked=!0;let vP=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const n of this._editStacks)t.push(n[1].toString());console.log(t.join(`
`))}pushElement(e,t=s1.None,n=mc.None){if(e.type===0){const r=sS(e.resource),s=this.getUriComparisonKey(e.resource);this._pushElement(new oS(e,r,s,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{const r=new Set,s=[],o=[];for(const a of e.resources){const l=sS(a),c=this.getUriComparisonKey(a);r.has(c)||(r.add(c),s.push(l),o.push(c))}s.length===1?this._pushElement(new oS(e,s[0],o[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new fOe(e,s,o,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){const r=e.resourceLabels[t],s=e.strResources[t];let o;this._editStacks.has(s)?o=this._editStacks.get(s):(o=new PX(r,s),this._editStacks.set(s,o)),o.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const n=this._editStacks.get(t);if(n.hasFutureElements())return null;const r=n.getClosestPastElement();return r?r.actual:null}return null}_splitPastWorkspaceElement(e,t){const n=e.actual.split(),r=new Map;for(const s of n){const o=sS(s.resource),a=this.getUriComparisonKey(s.resource),l=new oS(s,o,a,0,0,0,0);r.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitPastWorkspaceElement(e,r)}}_splitFutureWorkspaceElement(e,t){const n=e.actual.split(),r=new Map;for(const s of n){const o=sS(s.resource),a=this.getUriComparisonKey(s.resource),l=new oS(s,o,a,0,0,0,0);r.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitFutureWorkspaceElement(e,r)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,n){const r=this.getUriComparisonKey(e);this._editStacks.has(r)&&this._editStacks.get(r).setElementsValidFlag(t,n)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new TX(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[r,s]of this._editStacks){const o=s.getClosestPastElement();o&&o.sourceId===e&&(!t||o.sourceOrder>t.sourceOrder)&&(t=o,n=r)}return[t,n]}canUndo(e){if(e instanceof mc){const[,n]=this._findClosestUndoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){ut(e);for(const n of t.strResources)this.removeElements(n);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,r,s){const o=this._acquireLocks(n);let a;try{a=t()}catch(l){return o(),r.dispose(),this._onError(l,e)}return a?a.then(()=>(o(),r.dispose(),s()),l=>(o(),r.dispose(),this._onError(l,e))):(o(),r.dispose(),s())}_invokeWorkspacePrepare(e){return rS(this,void 0,void 0,function*(){if(typeof e.actual.prepareUndoRedo>"u")return q.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?q.None:t})}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(q.None);const n=e.actual.prepareUndoRedo();return n?T3(n)?t(n):n.then(r=>t(r)):t(q.None)}_getAffectedEditStacks(e){const t=[];for(const n of e.strResources)t.push(this._editStacks.get(n)||MX);return new EE(t)}_tryToSplitAndUndo(e,t,n,r){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(r),new aS(this._undo(e,0,!0));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(r),new aS}_checkWorkspaceUndo(e,t,n,r){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,p({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(r&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,p({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of n.editStacks)a.getClosestPastElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndUndo(e,t,null,p({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndUndo(e,t,null,p({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,p({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,n){const r=this._getAffectedEditStacks(t),s=this._checkWorkspaceUndo(e,t,r,!1);return s?s.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,r,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const n=t.getClosestPastElement();if(n){if(n===e){const r=t.getSecondClosestPastElement();if(r&&r.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,t,n,r){return rS(this,void 0,void 0,function*(){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let a;(function(d){d[d.All=0]="All",d[d.This=1]="This",d[d.Cancel=2]="Cancel"})(a||(a={}));const{result:l}=yield this._dialogService.prompt({type:di.Info,message:p("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),buttons:[{label:p({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",n.editStacks.length),run:()=>a.All},{label:p({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>a.This}],cancelButton:{run:()=>a.Cancel}});if(l===a.Cancel)return;if(l===a.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const c=this._checkWorkspaceUndo(e,t,n,!1);if(c)return c.returnValue;r=!0}let s;try{s=yield this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const o=this._checkWorkspaceUndo(e,t,n,!0);if(o)return s.dispose(),o.returnValue;for(const a of n.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),n,s,()=>this._continueUndoInGroup(t.groupId,r))})}_resourceUndo(e,t,n){if(!t.isValid){e.flushAllElements();return}if(e.locked){const r=p({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(r);return}return this._invokeResourcePrepare(t,r=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new EE([e]),r,()=>this._continueUndoInGroup(t.groupId,n))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[r,s]of this._editStacks){const o=s.getClosestPastElement();o&&o.groupId===e&&(!t||o.groupOrder>t.groupOrder)&&(t=o,n=r)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;const[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof mc){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;const r=this._editStacks.get(e),s=r.getClosestPastElement();if(!s)return;if(s.groupId){const[a,l]=this._findClosestUndoElementInGroup(s.groupId);if(s!==a&&l)return this._undo(l,t,n)}if((s.sourceId!==t||s.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,s);try{return s.type===1?this._workspaceUndo(e,s,n):this._resourceUndo(r,s,n)}finally{}}_confirmAndContinueUndo(e,t,n){return rS(this,void 0,void 0,function*(){if((yield this._dialogService.confirm({message:p("confirmDifferentSource","Would you like to undo '{0}'?",n.label),primaryButton:p({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:p("confirmDifferentSource.no","No")})).confirmed)return this._undo(e,t,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[r,s]of this._editStacks){const o=s.getClosestFutureElement();o&&o.sourceId===e&&(!t||o.sourceOrder<t.sourceOrder)&&(t=o,n=r)}return[t,n]}canRedo(e){if(e instanceof mc){const[,n]=this._findClosestRedoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,r){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(r),new aS(this._redo(e));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(r),new aS}_checkWorkspaceRedo(e,t,n,r){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,p({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(r&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,p({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of n.editStacks)a.getClosestFutureElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndRedo(e,t,null,p({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndRedo(e,t,null,p({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,p({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const n=this._getAffectedEditStacks(t),r=this._checkWorkspaceRedo(e,t,n,!1);return r?r.returnValue:this._executeWorkspaceRedo(e,t,n)}_executeWorkspaceRedo(e,t,n){return rS(this,void 0,void 0,function*(){let r;try{r=yield this._invokeWorkspacePrepare(t)}catch(o){return this._onError(o,t)}const s=this._checkWorkspaceRedo(e,t,n,!0);if(s)return r.dispose(),s.returnValue;for(const o of n.editStacks)o.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,r,()=>this._continueRedoInGroup(t.groupId))})}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=p({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new EE([e]),n,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[r,s]of this._editStacks){const o=s.getClosestFutureElement();o&&o.groupId===e&&(!t||o.groupOrder<t.groupOrder)&&(t=o,n=r)}return[t,n]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof mc){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){const[r,s]=this._findClosestRedoElementInGroup(n.groupId);if(n!==r&&s)return this._redo(s)}try{return n.type===1?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}};vP=hOe([VW(0,YC),VW(1,wi)],vP);class aS{constructor(e){this.returnValue=e}}Wt(KD,vP,1);function $s(i,e,t){return Math.min(Math.max(i,e),t)}class OX{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class gOe{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}const V5=Lt("environmentService"),lo=Lt("openerService");function H5(i,e){return Ye.isUri(i)?Pm(i.scheme,e):A3(i,e+":")}function jW(i,...e){return e.some(t=>H5(i,t))}function pOe(i){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(i.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},i=i.with({fragment:""})),{selection:e,uri:i}}var mOe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},zW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const pa=Lt("ILanguageFeatureDebounceService");var ok;(function(i){const e=new WeakMap;let t=0;function n(r){let s=e.get(r);return s===void 0&&(s=++t,e.set(r,s)),s}i.of=n})(ok||(ok={}));class _Oe{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}}class bOe{constructor(e,t,n,r,s,o){this._logService=e,this._name=t,this._registry=n,this._default=r,this._min=s,this._max=o,this._cache=new bf(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,n)=>ED(ok.of(n),t),0)}get(e){const t=this._key(e),n=this._cache.get(t);return n?$s(n.value,this._min,this._max):this.default()}update(e,t){const n=this._key(e);let r=this._cache.get(n);r||(r=new gOe(6),this._cache.set(n,r));const s=$s(r.update(t),this._min,this._max);return H5(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${s}ms`),s}_overall(){const e=new OX;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return $s(e,this._min,this._max)}}let yP=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,n){var r,s,o;const a=(r=n==null?void 0:n.min)!==null&&r!==void 0?r:50,l=(s=n==null?void 0:n.max)!==null&&s!==void 0?s:Math.pow(a,2),c=(o=n==null?void 0:n.key)!==null&&o!==void 0?o:void 0,d=`${ok.of(e)},${a}${c?","+c:""}`;let u=this._data.get(d);return u||(this._isDev?u=new bOe(this._logService,t,e,this._overallAverage()|0||a*1.5,a,l):(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),u=new _Oe(a*1.5)),this._data.set(d,u)),u}_overallAverage(){const e=new OX;for(const t of this._data.values())e.update(t.default());return e.value}};yP=mOe([zW(0,Vo),zW(1,V5)],yP);Wt(pa,yP,1);class Xv{static create(e,t){return new Xv(e,new ak(t))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e&&new D(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber,[r,s,o]=this._tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new Xv(this._startLineNumber,r),new Xv(this._startLineNumber+o,s)]}applyEdit(e,t){const[n,r,s]=Kh(t);this.acceptEdit(e,n,r,s,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,r,s){this._acceptDeleteRange(e),this._acceptInsertText(new U(e.startLineNumber,e.startColumn),t,n,r,s),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){const s=n-t;this._startLineNumber-=s;return}const r=this._tokens.getMaxDeltaLine();if(!(t>=r+1)){if(t<0&&n>=r+1){this._startLineNumber=0,this._tokens.clear();return}if(t<0){const s=-t;this._startLineNumber-=s,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,r,s){if(t===0&&n===0)return;const o=e.lineNumber-this._startLineNumber;if(o<0){this._startLineNumber+=t;return}const a=this._tokens.getMaxDeltaLine();o>=a+1||this._tokens.acceptInsertText(o,e.column-1,t,n,r,s)}}class ak{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),r=this._getEndCharacter(e-1);return new D(0,t+1,n,r+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const r=t+Math.floor((n-t)/2),s=this._getDeltaLine(r);if(s<e)t=r+1;else if(s>e)n=r-1;else{let o=r;for(;o>t&&this._getDeltaLine(o-1)===e;)o--;let a=r;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new $W(this._tokens.subarray(4*o,4*a+4))}}return this._getDeltaLine(t)===e?new $W(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,r){const s=this._tokens,o=this._tokenCount;let a=0,l=!1,c=0;for(let d=0;d<o;d++){const u=4*d,h=s[u],f=s[u+1],g=s[u+2],m=s[u+3];if((h>e||h===e&&g>=t)&&(h<n||h===n&&f<=r))l=!0;else{if(a===0&&(c=h),l){const y=4*a;s[y]=h-c,s[y+1]=f,s[y+2]=g,s[y+3]=m}a++}}return this._tokenCount=a,c}split(e,t,n,r){const s=this._tokens,o=this._tokenCount,a=[],l=[];let c=a,d=0,u=0;for(let h=0;h<o;h++){const f=4*h,g=s[f],m=s[f+1],y=s[f+2],b=s[f+3];if(g>e||g===e&&y>=t){if(g<n||g===n&&m<=r)continue;c!==l&&(c=l,d=0,u=g)}c[d++]=g-u,c[d++]=m,c[d++]=y,c[d++]=b}return[new ak(new Uint32Array(a)),new ak(new Uint32Array(l)),u]}acceptDeleteRange(e,t,n,r,s){const o=this._tokens,a=this._tokenCount,l=r-t;let c=0,d=!1;for(let u=0;u<a;u++){const h=4*u;let f=o[h],g=o[h+1],m=o[h+2];const y=o[h+3];if(f<t||f===t&&m<=n){c++;continue}else if(f===t&&g<n)f===r&&m>s?m-=s-n:m=n;else if(f===t&&g===n)if(f===r&&m>s)m-=s-n;else{d=!0;continue}else if(f<r||f===r&&g<s)if(f===r&&m>s)f=t,g=n,m=g+(m-s);else{d=!0;continue}else if(f>r){if(l===0&&!d){c=a;break}f-=l}else if(f===r&&g>=s)e&&f===0&&(g+=e,m+=e),f-=l,g-=s-n,m-=s-n;else throw new Error("Not possible!");const b=4*c;o[b]=f,o[b+1]=g,o[b+2]=m,o[b+3]=y,c++}this._tokenCount=c}acceptInsertText(e,t,n,r,s,o){const a=n===0&&r===1&&(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122),l=this._tokens,c=this._tokenCount;for(let d=0;d<c;d++){const u=4*d;let h=l[u],f=l[u+1],g=l[u+2];if(!(h<e||h===e&&g<t)){if(h===e&&g===t)if(a)g+=1;else continue;else if(h===e&&f<t&&t<g)n===0?g+=r:g=t;else{if(h===e&&f===t&&a)continue;if(h===e)if(h+=n,n===0)f+=r,g+=r;else{const m=g-f;f=s+(f-t),g=f+m}else h+=n}l[u]=h,l[u+1]=f,l[u+2]=g}}}}class $W{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}var vOe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},NE=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let CP=class{constructor(e,t,n,r){this._legend=e,this._themeService=t,this._languageService=n,this._logService=r,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new Ad}getMetadata(e,t,n){const r=this._languageService.languageIdCodec.encodeLanguageId(n),s=this._hashTable.get(e,t,r);let o;if(s)o=s.metadata,this._logService.getLevel()===Tr.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${kr.getForeground(o)}, fontStyle ${kr.getFontStyle(o).toString(2)}`);else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let u=0;c>0&&u<this._legend.tokenModifiers.length;u++)c&1&&l.push(this._legend.tokenModifiers[u]),c=c>>1;c>0&&this._logService.getLevel()===Tr.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),l.push("not-in-legend"));const d=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,n);if(typeof d>"u")o=2147483647;else{if(o=0,typeof d.italic<"u"){const u=(d.italic?1:0)<<11;o|=u|1}if(typeof d.bold<"u"){const u=(d.bold?2:0)<<11;o|=u|2}if(typeof d.underline<"u"){const u=(d.underline?4:0)<<11;o|=u|4}if(typeof d.strikethrough<"u"){const u=(d.strikethrough?8:0)<<11;o|=u|8}if(d.foreground){const u=d.foreground<<15;o|=u|16}o===0&&(o=2147483647)}}else this._logService.getLevel()===Tr.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),o=2147483647,a="not-in-legend";this._hashTable.add(e,t,r,o),this._logService.getLevel()===Tr.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${a}) / ${t} (${l.join(" ")}): foreground ${kr.getForeground(o)}, fontStyle ${kr.getFontStyle(o).toString(2)}`)}return o}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,console.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,n,r,s){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,console.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${n}: The provided start offset ${r} is outside the previous data (length ${s}).`))}};CP=vOe([NE(1,qi),NE(2,Fn),NE(3,Vo)],CP);function FX(i,e,t){const n=i.data,r=i.data.length/5|0,s=Math.max(Math.ceil(r/1024),400),o=[];let a=0,l=1,c=0;for(;a<r;){const d=a;let u=Math.min(d+s,r);if(u<r){let v=u;for(;v-1>d&&n[5*v]===0;)v--;if(v-1===d){let C=u;for(;C+1<r&&n[5*C]===0;)C++;u=C}else u=v}let h=new Uint32Array((u-d)*4),f=0,g=0,m=0,y=0;for(;a<u;){const v=5*a,C=n[v],w=n[v+1],S=l+C|0,L=C===0?c+w|0:w,T=n[v+2],I=L+T|0,R=n[v+3],B=n[v+4];if(I<=L)e.warnInvalidLengthSemanticTokens(S,L+1);else if(m===S&&y>L)e.warnOverlappingSemanticTokens(S,L+1);else{const V=e.getMetadata(R,B,t);V!==2147483647&&(g===0&&(g=S),h[f]=S-g,h[f+1]=L,h[f+2]=I,h[f+3]=V,f+=4,m=S,y=I)}l=S,c=L,a++}f!==h.length&&(h=h.subarray(0,f));const b=Xv.create(g,h);o.push(b)}return o}class yOe{constructor(e,t,n,r){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=r,this.next=null}}class Ad{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=Ad._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Ad._SIZES.length?2/3*this._currentLength:0),this._elements=[],Ad._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const r=this._hashFunc(e,t,n);let s=this._elements[r];for(;s;){if(s.tokenTypeIndex===e&&s.tokenModifierSet===t&&s.languageId===n)return s;s=s.next}return null}add(e,t,n,r){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const s=this._elements;this._currentLengthIndex++,this._currentLength=Ad._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Ad._SIZES.length?2/3*this._currentLength:0),this._elements=[],Ad._nullOutEntries(this._elements,this._currentLength);for(const o of s){let a=o;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new yOe(e,t,n,r))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}Ad._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];const ZD=Lt("semanticTokensStylingService");var COe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},AE=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let wP=class extends q{constructor(e,t,n){super(),this._themeService=e,this._logService=t,this._languageService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new CP(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};wP=COe([AE(0,qi),AE(1,Vo),AE(2,Fn)],wP);Wt(ZD,wP,1);var KW=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const lS="**",qW="/",Lx="[/\\\\]",Dx="[^/\\\\]",wOe=/\//g;function GW(i,e){switch(i){case 0:return"";case 1:return`${Dx}*?`;default:return`(?:${Lx}|${Dx}+${Lx}${e?`|${Lx}${Dx}+`:""})*?`}}function ZW(i,e){if(!i)return[];const t=[];let n=!1,r=!1,s="";for(const o of i){switch(o){case e:if(!n&&!r){t.push(s),s="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":r=!0;break;case"]":r=!1;break}s+=o}return s&&t.push(s),t}function BX(i){if(!i)return"";let e="";const t=ZW(i,qW);if(t.every(n=>n===lS))e=".*";else{let n=!1;t.forEach((r,s)=>{if(r===lS){if(n)return;e+=GW(2,s===t.length-1)}else{let o=!1,a="",l=!1,c="";for(const d of r){if(d!=="}"&&o){a+=d;continue}if(l&&(d!=="]"||!c)){let u;d==="-"?u=d:(d==="^"||d==="!")&&!c?u="^":d===qW?u="":u=No(d),c+=u;continue}switch(d){case"{":o=!0;continue;case"[":l=!0;continue;case"}":{const h=`(?:${ZW(a,",").map(f=>BX(f)).join("|")})`;e+=h,o=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=Dx;continue;case"*":e+=GW(1);continue;default:e+=No(d)}}s<t.length-1&&(t[s+1]!==lS||s+2<t.length)&&(e+=Lx)}n=r===lS})}return e}const SOe=/^\*\*\/\*\.[\w\.-]+$/,xOe=/^\*\*\/([\w\.-]+)\/?$/,TOe=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,kOe=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,LOe=/^\*\*((\/[\w\.-]+)+)\/?$/,DOe=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,XW=new bf(1e4),YW=function(){return!1},Bc=function(){return null};function U5(i,e){if(!i)return Bc;let t;typeof i!="string"?t=i.pattern:t=i,t=t.trim();const n=`${t}_${!!e.trimForExclusions}`;let r=XW.get(n);if(r)return QW(r,i);let s;return SOe.test(t)?r=IOe(t.substr(4),t):(s=xOe.exec(PE(t,e)))?r=ROe(s[1],t):(e.trimForExclusions?kOe:TOe).test(t)?r=EOe(t,e):(s=LOe.exec(PE(t,e)))?r=JW(s[1].substr(1),t,!0):(s=DOe.exec(PE(t,e)))?r=JW(s[1],t,!1):r=NOe(t),XW.set(n,r),QW(r,i)}function QW(i,e){if(typeof e=="string")return i;const t=function(n,r){return sP(n,e.base,!os)?i(PC(n.substr(e.base.length),Ll),r):null};return t.allBasenames=i.allBasenames,t.allPaths=i.allPaths,t.basenames=i.basenames,t.patterns=i.patterns,t}function PE(i,e){return e.trimForExclusions&&i.endsWith("/**")?i.substr(0,i.length-2):i}function IOe(i,e){return function(t,n){return typeof t=="string"&&t.endsWith(i)?e:null}}function ROe(i,e){const t=`/${i}`,n=`\\${i}`,r=function(o,a){return typeof o!="string"?null:a?a===i?e:null:o===i||o.endsWith(t)||o.endsWith(n)?e:null},s=[i];return r.basenames=s,r.patterns=[e],r.allBasenames=s,r}function EOe(i,e){const t=VX(i.slice(1,-1).split(",").map(a=>U5(a,e)).filter(a=>a!==Bc),i),n=t.length;if(!n)return Bc;if(n===1)return t[0];const r=function(a,l){for(let c=0,d=t.length;c<d;c++)if(t[c](a,l))return i;return null},s=t.find(a=>!!a.allBasenames);s&&(r.allBasenames=s.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(r.allPaths=o),r}function JW(i,e,t){const n=Ll===Pi.sep,r=n?i:i.replace(wOe,Ll),s=Ll+r,o=Pi.sep+i;let a;return t?a=function(l,c){return typeof l=="string"&&(l===r||l.endsWith(s)||!n&&(l===i||l.endsWith(o)))?e:null}:a=function(l,c){return typeof l=="string"&&(l===r||!n&&l===i)?e:null},a.allPaths=[(t?"*/":"./")+i],a}function NOe(i){try{const e=new RegExp(`^${BX(i)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?i:null}}catch{return Bc}}function AOe(i,e,t){return!i||typeof e!="string"?!1:WX(i)(e,void 0,t)}function WX(i,e={}){if(!i)return YW;if(typeof i=="string"||POe(i)){const t=U5(i,e);if(t===Bc)return YW;const n=function(r,s){return!!t(r,s)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return MOe(i,e)}function POe(i){const e=i;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function MOe(i,e){const t=VX(Object.getOwnPropertyNames(i).map(a=>OOe(a,i[a],e)).filter(a=>a!==Bc)),n=t.length;if(!n)return Bc;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];const a=function(d,u){let h;for(let f=0,g=t.length;f<g;f++){const m=t[f](d,u);if(typeof m=="string")return m;DA(m)&&(h||(h=[]),h.push(m))}return h?(()=>KW(this,void 0,void 0,function*(){for(const f of h){const g=yield f;if(typeof g=="string")return g}return null}))():null},l=t.find(d=>!!d.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((d,u)=>u.allPaths?d.concat(u.allPaths):d,[]);return c.length&&(a.allPaths=c),a}const r=function(a,l,c){let d,u;for(let h=0,f=t.length;h<f;h++){const g=t[h];g.requiresSiblings&&c&&(l||(l=vh(a)),d||(d=l.substr(0,l.length-nTe(a).length)));const m=g(a,l,d,c);if(typeof m=="string")return m;DA(m)&&(u||(u=[]),u.push(m))}return u?(()=>KW(this,void 0,void 0,function*(){for(const h of u){const f=yield h;if(typeof f=="string")return f}return null}))():null},s=t.find(a=>!!a.allBasenames);s&&(r.allBasenames=s.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(r.allPaths=o),r}function OOe(i,e,t){if(e===!1)return Bc;const n=U5(i,t);if(n===Bc)return Bc;if(typeof e=="boolean")return n;if(e){const r=e.when;if(typeof r=="string"){const s=(o,a,l,c)=>{if(!c||!n(o,a))return null;const d=r.replace("$(basename)",()=>l),u=c(d);return DA(u)?u.then(h=>h?i:null):u?i:null};return s.requiresSiblings=!0,s}}return n}function VX(i,e){const t=i.filter(a=>!!a.basenames);if(t.length<2)return i;const n=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let r;if(e){r=[];for(let a=0,l=n.length;a<l;a++)r.push(e)}else r=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const s=function(a,l){if(typeof a!="string")return null;if(!l){let d;for(d=a.length;d>0;d--){const u=a.charCodeAt(d-1);if(u===47||u===92)break}l=a.substr(d)}const c=n.indexOf(l);return c!==-1?r[c]:null};s.basenames=n,s.patterns=r,s.allBasenames=n;const o=i.filter(a=>!a.basenames);return o.push(s),o}function HX(i,e,t,n,r,s){if(Array.isArray(i)){let o=0;for(const a of i){const l=HX(a,e,t,n,r,s);if(l===10)return l;l>o&&(o=l)}return o}else{if(typeof i=="string")return n?i==="*"?5:i===t?10:0:0;if(i){const{language:o,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:d}=i;if(!n&&!c)return 0;d&&r&&(e=r);let u=0;if(l)if(l===e.scheme)u=10;else if(l==="*")u=5;else return 0;if(o)if(o===t)u=10;else if(o==="*")u=Math.max(u,5);else return 0;if(d)if(d===s)u=10;else if(d==="*"&&s!==void 0)u=Math.max(u,5);else return 0;if(a){let h;if(typeof a=="string"?h=a:h=Object.assign(Object.assign({},a),{base:Xq(a.base)}),h===e.fsPath||AOe(h,e.fsPath))u=10;else return 0}return u}else return 0}}function UX(i){return typeof i=="string"?!1:Array.isArray(i)?i.every(UX):!!i.exclusive}class eV{constructor(e,t,n,r){this.uri=e,this.languageId=t,this.notebookUri=n,this.notebookType=r}equals(e){var t,n;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&((t=this.notebookUri)===null||t===void 0?void 0:t.toString())===((n=e.notebookUri)===null||n===void 0?void 0:n.toString())}}class ii{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new H,this.onDidChange=this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),st(()=>{if(n){const r=this._entries.indexOf(n);r>=0&&(this._entries.splice(r,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(const n of this._entries)n._score>0&&t.push(n.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,n=>t.push(n.provider)),t}orderedGroups(e){const t=[];let n,r;return this._orderedForEach(e,s=>{n&&r===s._score?n.push(s.provider):(r=s._score,n=[s.provider],t.push(n))}),t}_orderedForEach(e,t){this._updateScores(e);for(const n of this._entries)n._score>0&&t(n)}_updateScores(e){var t,n;const r=(t=this._notebookInfoResolver)===null||t===void 0?void 0:t.call(this,e.uri),s=r?new eV(e.uri,e.getLanguageId(),r.uri,r.type):new eV(e.uri,e.getLanguageId(),void 0,void 0);if(!(!((n=this._lastCandidate)===null||n===void 0)&&n.equals(s))){this._lastCandidate=s;for(const o of this._entries)if(o._score=HX(o.selector,s.uri,s.languageId,LDe(e),s.notebookUri,s.notebookType),UX(o.selector)&&o._score>0){for(const a of this._entries)a._score=0;o._score=1e3;break}this._entries.sort(ii._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:gv(e.selector)&&!gv(t.selector)?1:!gv(e.selector)&&gv(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function gv(i){return typeof i=="string"?!1:Array.isArray(i)?i.some(gv):!!i.isBuiltin}class FOe{constructor(){this.referenceProvider=new ii(this._score.bind(this)),this.renameProvider=new ii(this._score.bind(this)),this.codeActionProvider=new ii(this._score.bind(this)),this.definitionProvider=new ii(this._score.bind(this)),this.typeDefinitionProvider=new ii(this._score.bind(this)),this.declarationProvider=new ii(this._score.bind(this)),this.implementationProvider=new ii(this._score.bind(this)),this.documentSymbolProvider=new ii(this._score.bind(this)),this.inlayHintsProvider=new ii(this._score.bind(this)),this.colorProvider=new ii(this._score.bind(this)),this.codeLensProvider=new ii(this._score.bind(this)),this.documentFormattingEditProvider=new ii(this._score.bind(this)),this.documentRangeFormattingEditProvider=new ii(this._score.bind(this)),this.onTypeFormattingEditProvider=new ii(this._score.bind(this)),this.signatureHelpProvider=new ii(this._score.bind(this)),this.hoverProvider=new ii(this._score.bind(this)),this.documentHighlightProvider=new ii(this._score.bind(this)),this.selectionRangeProvider=new ii(this._score.bind(this)),this.foldingRangeProvider=new ii(this._score.bind(this)),this.linkProvider=new ii(this._score.bind(this)),this.inlineCompletionsProvider=new ii(this._score.bind(this)),this.completionProvider=new ii(this._score.bind(this)),this.linkedEditingRangeProvider=new ii(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new ii(this._score.bind(this)),this.documentSemanticTokensProvider=new ii(this._score.bind(this)),this.documentOnDropEditProvider=new ii(this._score.bind(this)),this.documentPasteEditProvider=new ii(this._score.bind(this))}_score(e){var t;return(t=this._notebookTypeResolver)===null||t===void 0?void 0:t.call(this,e)}}Wt(Fe,FOe,1);const QC=Lt("IWorkspaceEditService");class j5{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(tu.is(t))return tu.lift(t);if(k_.is(t))return k_.lift(t);throw new Error("Unsupported edit")})}}class tu extends j5{static is(e){return e instanceof tu?!0:gs(e)&&Ye.isUri(e.resource)&&gs(e.textEdit)}static lift(e){return e instanceof tu?e:new tu(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,n=void 0,r){super(r),this.resource=e,this.textEdit=t,this.versionId=n}}class k_ extends j5{static is(e){return e instanceof k_?!0:gs(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof k_?e:new k_(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,n={},r){super(r),this.oldResource=e,this.newResource=t,this.options=n}}const Yr={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0},XD=Object.freeze({id:"editor",order:5,type:"object",title:p("editorConfigurationTitle","Editor"),scope:5}),lk=Object.assign(Object.assign({},XD),{properties:{"editor.tabSize":{type:"number",default:Vr.tabSize,minimum:1,markdownDescription:p("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:p("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:Vr.insertSpaces,markdownDescription:p("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:Vr.detectIndentation,markdownDescription:p("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:Vr.trimAutoWhitespace,description:p("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Vr.largeFileOptimizations,description:p("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:p("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[p("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),p("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),p("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:p("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[p("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),p("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),p("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:p("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:p("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:p("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!1,description:p("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:p("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:p("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:p("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:p("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:p("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:p("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:p("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:p("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:Yr.maxComputationTime,description:p("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:Yr.maxFileSize,description:p("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:Yr.renderSideBySide,description:p("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:Yr.renderSideBySideInlineBreakpoint,description:p("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:Yr.useInlineViewWhenSpaceIsLimited,description:p("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:Yr.renderMarginRevertIcon,description:p("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:Yr.ignoreTrimWhitespace,description:p("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:Yr.renderIndicators,description:p("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:Yr.diffCodeLens,description:p("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:Yr.diffWordWrap,markdownEnumDescriptions:[p("wordWrap.off","Lines will never wrap."),p("wordWrap.on","Lines will wrap at the viewport width."),p("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:Yr.diffAlgorithm,markdownEnumDescriptions:[p("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),p("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:Yr.hideUnchangedRegions.enabled,markdownDescription:p("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:Yr.hideUnchangedRegions.revealLineCount,markdownDescription:p("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:Yr.hideUnchangedRegions.minimumLineCount,markdownDescription:p("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:Yr.hideUnchangedRegions.contextLineCount,markdownDescription:p("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:Yr.experimental.showMoves,markdownDescription:p("showMoves","Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:Yr.experimental.showEmptyDecorations,description:p("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")}}});function BOe(i){return typeof i.type<"u"||typeof i.anyOf<"u"}for(const i of Am){const e=i.schema;if(typeof e<"u")if(BOe(e))lk.properties[`editor.${i.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(lk.properties[t]=e[t])}let cS=null;function jX(){return cS===null&&(cS=Object.create(null),Object.keys(lk.properties).forEach(i=>{cS[i]=!0})),cS}function WOe(i){return jX()[`editor.${i}`]||!1}function VOe(i){return jX()[`diffEditor.${i}`]||!1}const HOe=qn.as(Zl.Configuration);HOe.registerConfiguration(lk);class jn{static insert(e,t){return{range:new D(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}function ME(i){return Object.isFrozen(i)?i:LSe(i)}class Br{constructor(e={},t=[],n=[],r){this._contents=e,this._keys=t,this._overrides=n,this.raw=r,this.overrideConfigurations=new Map}get rawConfiguration(){var e;if(!this._rawConfiguration)if(!((e=this.raw)===null||e===void 0)&&e.length){const t=this.raw.map(n=>{if(n instanceof Br)return n;const r=new UOe("");return r.parseRaw(n),r.configurationModel});this._rawConfiguration=t.reduce((n,r)=>r===n?r:n.merge(r),t[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?U8(this.contents,e):this.contents}inspect(e,t){const n=this.rawConfiguration.getValue(e),r=t?this.rawConfiguration.getOverrideValue(e,t):void 0,s=t?this.rawConfiguration.override(t).getValue(e):n;return{value:n,override:r,merged:s}}getOverrideValue(e,t){const n=this.getContentsForOverrideIdentifer(t);return n?e?U8(n,e):n:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){var t,n;const r=Rd(this.contents),s=Rd(this.overrides),o=[...this.keys],a=!((t=this.raw)===null||t===void 0)&&t.length?[...this.raw]:[this];for(const l of e)if(a.push(...!((n=l.raw)===null||n===void 0)&&n.length?l.raw:[l]),!l.isEmpty()){this.mergeContents(r,l.contents);for(const c of l.overrides){const[d]=s.filter(u=>fi(u.identifiers,c.identifiers));d?(this.mergeContents(d.contents,c.contents),d.keys.push(...c.keys),d.keys=Mh(d.keys)):s.push(Rd(c))}for(const c of l.keys)o.indexOf(c)===-1&&o.push(c)}return new Br(r,o,s,a.every(l=>l instanceof Br)?void 0:a)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const n={};for(const r of Mh([...Object.keys(this.contents),...Object.keys(t)])){let s=this.contents[r];const o=t[r];o&&(typeof s=="object"&&typeof o=="object"?(s=Rd(s),this.mergeContents(s,o)):s=o),n[r]=s}return new Br(n,this.keys,this.overrides)}mergeContents(e,t){for(const n of Object.keys(t)){if(n in e&&gs(e[n])&&gs(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=Rd(t[n])}}getContentsForOverrideIdentifer(e){let t=null,n=null;const r=s=>{s&&(n?this.mergeContents(n,s):n=Rd(s))};for(const s of this.overrides)s.identifiers.length===1&&s.identifiers[0]===e?t=s.contents:s.identifiers.includes(e)&&r(s.contents);return r(t),n}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(e,t){this.updateValue(e,t,!0)}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);t!==-1&&(this.keys.splice(t,1),jLe(this.contents,e),Uh.test(e)&&this.overrides.splice(this.overrides.findIndex(n=>fi(n.identifiers,ET(e))),1))}updateValue(e,t,n){YG(this.contents,e,t,r=>console.error(r)),n=n||this.keys.indexOf(e)===-1,n&&this.keys.push(e),Uh.test(e)&&this.overrides.push({identifiers:ET(e),keys:Object.keys(this.contents[e]),contents:EA(this.contents[e],r=>console.error(r))})}}class UOe{constructor(e){this._name=e,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||new Br}parseRaw(e,t){this._raw=e;const{contents:n,keys:r,overrides:s,restricted:o,hasExcludedProperties:a}=this.doParseRaw(e,t);this._configurationModel=new Br(n,r,s,a?[e]:void 0),this._restrictedConfigurations=o||[]}doParseRaw(e,t){const n=qn.as(Zl.Configuration).getConfigurationProperties(),r=this.filter(e,n,!0,t);e=r.raw;const s=EA(e,l=>console.error(`Conflict in settings file ${this._name}: ${l}`)),o=Object.keys(e),a=this.toOverrides(e,l=>console.error(`Conflict in settings file ${this._name}: ${l}`));return{contents:s,keys:o,overrides:a,restricted:r.restricted,hasExcludedProperties:r.hasExcludedProperties}}filter(e,t,n,r){var s,o,a;let l=!1;if(!(r!=null&&r.scopes)&&!(r!=null&&r.skipRestricted)&&!(!((s=r==null?void 0:r.exclude)===null||s===void 0)&&s.length))return{raw:e,restricted:[],hasExcludedProperties:l};const c={},d=[];for(const u in e)if(Uh.test(u)&&n){const h=this.filter(e[u],t,!1,r);c[u]=h.raw,l=l||h.hasExcludedProperties,d.push(...h.restricted)}else{const h=t[u],f=h?typeof h.scope<"u"?h.scope:3:void 0;h!=null&&h.restricted&&d.push(u),!(!((o=r.exclude)===null||o===void 0)&&o.includes(u))&&(!((a=r.include)===null||a===void 0)&&a.includes(u)||(f===void 0||r.scopes===void 0||r.scopes.includes(f))&&!(r.skipRestricted&&(h!=null&&h.restricted)))?c[u]=e[u]:l=!0}return{raw:c,restricted:d,hasExcludedProperties:l}}toOverrides(e,t){const n=[];for(const r of Object.keys(e))if(Uh.test(r)){const s={};for(const o in e[r])s[o]=e[r][o];n.push({identifiers:ET(r),keys:Object.keys(s),contents:EA(s,t)})}return n}}class jOe{constructor(e,t,n,r,s,o,a,l,c,d,u,h,f){this.key=e,this.overrides=t,this._value=n,this.overrideIdentifiers=r,this.defaultConfiguration=s,this.policyConfiguration=o,this.applicationConfiguration=a,this.userConfiguration=l,this.localUserConfiguration=c,this.remoteUserConfiguration=d,this.workspaceConfiguration=u,this.folderConfigurationModel=h,this.memoryConfigurationModel=f}inspect(e,t,n){const r=e.inspect(t,n);return{get value(){return ME(r.value)},get override(){return ME(r.override)},get merged(){return ME(r.merged)}}}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.inspect(this.userConfiguration,this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.userInspectValue.value!==void 0||this.userInspectValue.override!==void 0?{value:this.userInspectValue.value,override:this.userInspectValue.override}:void 0}}class YD{constructor(e,t,n,r,s=new Br,o=new Br,a=new Hr,l=new Br,c=new Hr){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=n,this._localUserConfiguration=r,this._remoteUserConfiguration=s,this._workspaceConfiguration=o,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new Hr,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidatedConfigurationModel(e,t,n).getValue(e)}updateValue(e,t,n={}){let r;n.resource?(r=this._memoryConfigurationByResource.get(n.resource),r||(r=new Br,this._memoryConfigurationByResource.set(n.resource,r))):r=this._memoryConfiguration,t===void 0?r.removeValue(e):r.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,n){const r=this.getConsolidatedConfigurationModel(e,t,n),s=this.getFolderConfigurationModelForResource(t.resource,n),o=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=new Set;for(const l of r.overrides)for(const c of l.identifiers)r.getOverrideValue(e,c)!==void 0&&a.add(c);return new jOe(e,t,r.getValue(e),a.size?[...a]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,n?this._workspaceConfiguration:void 0,s||void 0,o)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,n){let r=this.getConsolidatedConfigurationModelForResource(t,n);return t.overrideIdentifier&&(r=r.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(r=r.merge(this._policyConfiguration)),r}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const r=t.getFolder(e);r&&(n=this.getFolderConsolidatedConfiguration(r.uri)||n);const s=this._memoryConfigurationByResource.get(e);s&&(n=n.merge(s))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),r=this._folderConfigurations.get(e);r?(t=n.merge(r),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const n=t.getFolder(e);if(n)return this._folderConfigurations.get(n.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:n,overrides:r,keys:s}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:r,keys:s}]),e},[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),n=this.parseConfigurationModel(e.policy),r=this.parseConfigurationModel(e.application),s=this.parseConfigurationModel(e.user),o=this.parseConfigurationModel(e.workspace),a=e.folders.reduce((l,c)=>(l.set(Ye.revive(c[0]),this.parseConfigurationModel(c[1])),l),new Hr);return new YD(t,n,r,s,new Br,o,a,new Br,new Hr)}static parseConfigurationModel(e){return new Br(e.contents,e.keys,e.overrides)}}class zOe{constructor(e,t,n,r){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=r,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=".".charCodeAt(0),this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const s of e.keys)this.affectedKeys.add(s);for(const[,s]of e.overrides)for(const o of s)this.affectedKeys.add(o);this._affectsConfigStr=this._marker;for(const s of this.affectedKeys)this._affectsConfigStr+=s+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=YD.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var n;const r=this._marker+e,s=this._affectsConfigStr.indexOf(r);if(s<0)return!1;const o=s+r.length;if(o>=this._affectsConfigStr.length)return!1;const a=this._affectsConfigStr.charCodeAt(o);if(a!==this._markerCode1&&a!==this._markerCode2)return!1;if(t){const l=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(n=this.previous)===null||n===void 0?void 0:n.workspace):void 0,c=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!Ro(l,c)}return!0}}const ck={kind:0},$Oe={kind:1};function KOe(i,e,t){return{kind:2,commandId:i,commandArgs:e,isBubble:t}}class Yv{constructor(e,t,n){var r;this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const s of e){const o=s.command;o&&o.charAt(0)!=="-"&&this._defaultBoundCommands.set(o,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=Yv.handleRemovals([].concat(e).concat(t));for(let s=0,o=this._keybindings.length;s<o;s++){const a=this._keybindings[s];if(a.chords.length===0)continue;const l=(r=a.when)===null||r===void 0?void 0:r.substituteConstants();l&&l.type===0||this._addKeyPress(a.chords[0],a)}}static _isTargetedForRemoval(e,t,n){if(t){for(let r=0;r<t.length;r++)if(t[r]!==e.chords[r])return!1}return!(n&&n.type!==1&&(!e.when||!tke(n,e.when)))}static handleRemovals(e){const t=new Map;for(let r=0,s=e.length;r<s;r++){const o=e[r];if(o.command&&o.command.charAt(0)==="-"){const a=o.command.substring(1);t.has(a)?t.get(a).push(o):t.set(a,[o])}}if(t.size===0)return e;const n=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];if(!o.command||o.command.length===0){n.push(o);continue}if(o.command.charAt(0)==="-")continue;const a=t.get(o.command);if(!a||!o.isDefault){n.push(o);continue}let l=!1;for(const c of a){const d=c.when;if(this._isTargetedForRemoval(o,c.chords,d)){l=!0;break}}if(!l){n.push(o);continue}}return n}_addKeyPress(e,t){const n=this._map.get(e);if(typeof n>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let r=n.length-1;r>=0;r--){const s=n[r];if(s.command===t.command)continue;let o=!0;for(let a=1;a<s.chords.length&&a<t.chords.length;a++)if(s.chords[a]!==t.chords[a]){o=!1;break}o&&Yv.whenIsEntirelyIncluded(s.when,t.when)&&this._removeFromLookupMap(s)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let n=0,r=t.length;n<r;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:SA(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const n=this._lookupMap.get(e);if(typeof n>"u"||n.length===0)return null;if(n.length===1)return n[0];for(let r=n.length-1;r>=0;r--){const s=n[r];if(t.contextMatchesRules(s.when))return s}return n[n.length-1]}resolve(e,t,n){const r=[...t,n];this._log(`| Resolving ${r}`);const s=this._map.get(r[0]);if(s===void 0)return this._log("\\ No keybinding entries."),ck;let o=null;if(r.length<2)o=s;else{o=[];for(let l=0,c=s.length;l<c;l++){const d=s[l];if(r.length>d.chords.length)continue;let u=!0;for(let h=1;h<r.length;h++)if(d.chords[h]!==r[h]){u=!1;break}u&&o.push(d)}}const a=this._findCommand(e,o);return a?r.length<a.chords.length?(this._log(`\\ From ${o.length} keybinding entries, awaiting ${a.chords.length-r.length} more chord(s), when: ${tV(a.when)}, source: ${nV(a)}.`),$Oe):(this._log(`\\ From ${o.length} keybinding entries, matched ${a.command}, when: ${tV(a.when)}, source: ${nV(a)}.`),KOe(a.command,a.commandArgs,a.bubble)):(this._log(`\\ From ${o.length} keybinding entries, no when clauses matched the context.`),ck)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){const r=t[n];if(Yv._contextMatchesRules(e,r.when))return r}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function tV(i){return i?`${i.serialize()}`:"no when condition"}function nV(i){return i.extensionId?i.isBuiltinExtension?`built-in extension ${i.extensionId}`:`user extension ${i.extensionId}`:i.isDefault?"built-in":"user"}const qOe=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class GOe extends q{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Re.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,n,r,s){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=r,this._logService=s,this._onDidUpdateKeybindings=this._register(new H),this._currentChords=[],this._currentChordChecker=new BC,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=Gm.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new za,this._logging=!1}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const n=this.resolveKeyboardEvent(e);if(n.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),ck;const[r]=n.getDispatchChords();if(r===null)return this._log("\\ Keyboard event cannot be dispatched"),ck;const s=this._contextKeyService.getContext(t),o=this._currentChords.map(({keypress:a})=>a);return this._getResolver().resolve(s,o,r)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-e>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw x3("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(p("first.chord","({0}) was pressed. Waiting for second key of chord...",t));break;default:{const n=this._currentChords.map(({label:r})=>r).join(", ");this._currentChordStatusMessage=this._notificationService.status(p("next.chord","({0}) was pressed. Waiting for next key of chord...",n))}}this._scheduleLeaveChordMode(),Fv.enabled&&Fv.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],Fv.enable()}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[r]=n.getSingleModifierDispatchChords();if(r)return this._ignoreSingleModifiers.has(r)?(this._log(`+ Ignoring single modifier ${r} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=Gm.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=Gm.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${r}.`),this._currentSingleModifier=r,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):r===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${r} ${r}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${r}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[s]=n.getChords();return this._ignoreSingleModifiers=new Gm(s),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,n=!1){var r;let s=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let o=null,a=null;if(n){const[u]=e.getSingleModifierDispatchChords();o=u,a=u?[u]:[]}else[o]=e.getDispatchChords(),a=this._currentChords.map(({keypress:u})=>u);if(o===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),s;const l=this._contextKeyService.getContext(t),c=e.getLabel(),d=this._getResolver().resolve(l,a,o);switch(d.kind){case 0:{if(this._logService.trace("KeybindingService#dispatch",c,"[ No matching keybinding ]"),this.inChordMode){const u=this._currentChords.map(({label:h})=>h).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${u}, ${c}".`),this._notificationService.status(p("missing.chord","The key combination ({0}, {1}) is not a command.",u,c),{hideAfter:10*1e3}),this._leaveChordMode(),s=!0}return s}case 1:return this._logService.trace("KeybindingService#dispatch",c,"[ Several keybindings match - more chords needed ]"),s=!0,this._expectAnotherChord(o,c),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),s;case 2:{if(this._logService.trace("KeybindingService#dispatch",c,`[ Will dispatch command ${d.commandId} ]`),d.commandId===null||d.commandId===""){if(this.inChordMode){const u=this._currentChords.map(({label:h})=>h).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${u}, ${c}".`),this._notificationService.status(p("missing.chord","The key combination ({0}, {1}) is not a command.",u,c),{hideAfter:10*1e3}),this._leaveChordMode(),s=!0}}else this.inChordMode&&this._leaveChordMode(),d.isBubble||(s=!0),this._log(`+ Invoking command ${d.commandId}.`),typeof d.commandArgs>"u"?this._commandService.executeCommand(d.commandId).then(void 0,u=>this._notificationService.warn(u)):this._commandService.executeCommand(d.commandId,d.commandArgs).then(void 0,u=>this._notificationService.warn(u)),qOe.test(d.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:d.commandId,from:"keybinding",detail:(r=e.getUserSettingsLabel())!==null&&r!==void 0?r:void 0});return s}}}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}class Gm{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}Gm.EMPTY=new Gm(null);class iV{constructor(e,t,n,r,s,o,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?SP(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=SP(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=r,this.isDefault=s,this.extensionId=o,this.isBuiltinExtension=a}}function SP(i){const e=[];for(let t=0,n=i.length;t<n;t++){const r=i[t];if(!r)return[];e.push(r)}return e}class QD{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=n(a);if(l===null)return null;r[s]=QOe(a,l,this.modifierLabels[e])}return r.join(" ")}}const z5=new QD({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:p({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:p({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:p({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:p({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:p({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:p({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),ZOe=new QD({ctrlKey:p({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:p({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:p({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:p({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:p({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:p({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:p({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:p({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:p({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),XOe=new QD({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),YOe=new QD({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function QOe(i,e,t){if(e===null)return"";const n=[];return i.ctrlKey&&n.push(t.ctrlKey),i.shiftKey&&n.push(t.shiftKey),i.altKey&&n.push(t.altKey),i.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}class JOe extends ike{constructor(e,t){if(super(),t.length===0)throw ia("chords");this._os=e,this._chords=t}getLabel(){return z5.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return ZOe.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:XOe.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return YOe.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new nke(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}}class gy extends JOe{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return Md.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":Md.toString(e.keyCode)}_getElectronAccelerator(e){return Md.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=Md.toUserSettingsUS(e.keyCode);return t&&t.toLowerCase()}_getChordDispatch(e){return gy.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=Md.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=R3[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof fu)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new fu(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const n=SP(e.chords.map(r=>this._toKeyCodeChord(r)));return n.length>0?[new gy(n,t)]:[]}}const a1=Lt("labelService"),zX=Lt("progressService");class nu{constructor(e,t){this.callback=e,this.report=t!=null&&t.async?this._reportAsync.bind(this):this._reportSync.bind(this)}_reportSync(e){this._value=e,this.callback(this._value)}_reportAsync(e){Promise.resolve(this._lastTask).finally(()=>{this._value=e;const t=this.callback(this._value);this._lastTask=Promise.resolve(t).finally(()=>this._lastTask=void 0)})}}nu.None=Object.freeze({report(){}});const Cf=Lt("editorProgressService");class eFe{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}}class tFe{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?N3(e,this._value,0,e.length,this._from,this._to):MC(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class nFe{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const n=this._value.charCodeAt(t);if(!(n===47||this._splitOnBackslash&&n===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?N3(e,this._value,0,e.length,this._from,this._to):MC(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class iFe{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new nFe(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return _A(e,this._value.scheme);if(this._states[this._stateIdx]===2)return _A(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return O0(e,this._value.query);if(this._states[this._stateIdx]===5)return O0(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class dS{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return(t=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get heightRight(){var e,t;return(t=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}}class L_{static forUris(e=()=>!1,t=()=>!1){return new L_(new iFe(e,t))}static forStrings(){return new L_(new eFe)}static forConfigKeys(){return new L_(new tFe)}constructor(e){this._iter=e}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let r;this._root||(this._root=new dS,this._root.segment=n.value());const s=[];for(r=this._root;;){const a=n.cmp(r.segment);if(a>0)r.left||(r.left=new dS,r.left.segment=n.value()),s.push([-1,r]),r=r.left;else if(a<0)r.right||(r.right=new dS,r.right.segment=n.value()),s.push([1,r]),r=r.right;else if(n.hasNext())n.next(),r.mid||(r.mid=new dS,r.mid.segment=n.value()),s.push([0,r]),r=r.mid;else break}const o=r.value;r.value=t,r.key=e;for(let a=s.length-1;a>=0;a--){const l=s[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const d=s[a][0],u=s[a+1][0];if(d===1&&u===1)s[a][1]=l.rotateLeft();else if(d===-1&&u===-1)s[a][1]=l.rotateRight();else if(d===1&&u===-1)l.right=s[a+1][1]=s[a+1][1].rotateRight(),s[a][1]=l.rotateLeft();else if(d===-1&&u===1)l.left=s[a+1][1]=s[a+1][1].rotateLeft(),s[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}return o}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const r=t.cmp(n.segment);if(r>0)n=n.left;else if(r<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var n;const r=this._iter.reset(e),s=[];let o=this._root;for(;o;){const a=r.cmp(o.segment);if(a>0)s.push([-1,o]),o=o.left;else if(a<0)s.push([1,o]),o=o.right;else if(r.hasNext())r.next(),s.push([0,o]),o=o.mid;else break}if(o){if(t?(o.left=void 0,o.mid=void 0,o.right=void 0,o.height=1):(o.key=void 0,o.value=void 0),!o.mid&&!o.value)if(o.left&&o.right){const a=this._min(o.right);if(a.key){const{key:l,value:c,segment:d}=a;this._delete(a.key,!1),o.key=l,o.value=c,o.segment=d}}else{const a=(n=o.left)!==null&&n!==void 0?n:o.right;if(s.length>0){const[l,c]=s[s.length-1];switch(l){case-1:c.left=a;break;case 0:c.mid=a;break;case 1:c.right=a;break}}else this._root=a}for(let a=s.length-1;a>=0;a--){const l=s[a][1];l.updateHeight();const c=l.balanceFactor();if(c>1?(l.right.balanceFactor()>=0||(l.right=l.right.rotateRight()),s[a][1]=l.rotateLeft()):c<-1&&(l.left.balanceFactor()<=0||(l.left=l.left.rotateLeft()),s[a][1]=l.rotateRight()),a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let n=this._root,r;for(;n;){const s=t.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(t.hasNext())t.next(),r=n.value||r,n=n.mid;else break}return n&&n.value||r}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const n=this._iter.reset(e);let r=this._root;for(;r;){const s=n.cmp(r.segment);if(s>0)r=r.left;else if(s<0)r=r.right;else if(n.hasNext())n.next(),r=r.mid;else return r.mid?this._entries(r.mid):t?r.value:void 0}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}const Yg=Lt("contextService");function xP(i){const e=i;return typeof(e==null?void 0:e.id)=="string"&&Ye.isUri(e.uri)}function rFe(i){const e=i;return typeof(e==null?void 0:e.id)=="string"&&!xP(i)&&!lFe(i)}const sFe={id:"ext-dev"},oFe={id:"empty-window"};function aFe(i,e){if(typeof i=="string"||typeof i>"u")return typeof i=="string"?{id:vh(i)}:e?sFe:oFe;const t=i;return t.configuration?{id:t.id,configPath:t.configuration}:t.folders.length===1?{id:t.id,uri:t.folders[0].uri}:{id:t.id}}function lFe(i){const e=i;return typeof(e==null?void 0:e.id)=="string"&&Ye.isUri(e.configPath)}class cFe{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const TP="code-workspace";p("codeWorkspace","Code Workspace");const $X="4064f6ec-cb38-4ad0-af64-ee6467e63c82";function dFe(i){return i.id===$X}var kP;(function(i){i.inspectTokensAction=p("inspectTokens","Developer: Inspect Tokens")})(kP||(kP={}));var dk;(function(i){i.gotoLineActionLabel=p("gotoLineActionLabel","Go to Line/Column...")})(dk||(dk={}));var LP;(function(i){i.helpQuickAccessActionLabel=p("helpQuickAccess","Show all Quick Access Providers")})(LP||(LP={}));var uk;(function(i){i.quickCommandActionLabel=p("quickCommandActionLabel","Command Palette"),i.quickCommandHelp=p("quickCommandActionHelp","Show And Run Commands")})(uk||(uk={}));var py;(function(i){i.quickOutlineActionLabel=p("quickOutlineActionLabel","Go to Symbol..."),i.quickOutlineByCategoryActionLabel=p("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(py||(py={}));var hk;(function(i){i.editorViewAccessibleLabel=p("editorViewAccessibleLabel","Editor content"),i.accessibilityHelpMessage=p("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(hk||(hk={}));var DP;(function(i){i.toggleHighContrast=p("toggleHighContrast","Toggle High Contrast Theme")})(DP||(DP={}));var IP;(function(i){i.bulkEditServiceSummary=p("bulkEditServiceSummary","Made {0} edits in {1} files")})(IP||(IP={}));const KX=Lt("workspaceTrustManagementService"),Cu=Lt("contextViewService"),qa=Lt("contextMenuService");var Or;(function(i){function e(s,o){if(s.start>=o.end||o.start>=s.end)return{start:0,end:0};const a=Math.max(s.start,o.start),l=Math.min(s.end,o.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}i.intersect=e;function t(s){return s.end-s.start<=0}i.isEmpty=t;function n(s,o){return!t(e(s,o))}i.intersects=n;function r(s,o){const a=[],l={start:s.start,end:Math.min(o.start,s.end)},c={start:Math.max(o.end,s.start),end:s.end};return t(l)||a.push(l),t(c)||a.push(c),a}i.relativeComplement=r})(Or||(Or={}));function uFe(i){const e=i;return!!e&&typeof e.x=="number"&&typeof e.y=="number"}var ah;(function(i){i[i.AVOID=0]="AVOID",i[i.ALIGN=1]="ALIGN"})(ah||(ah={}));function Zm(i,e,t){const n=t.mode===ah.ALIGN?t.offset:t.offset+t.size,r=t.mode===ah.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=i-n?n:e<=r?r-e:Math.max(i-e,0):e<=r?r-e:e<=i-n?n:0}class l1 extends q{constructor(e,t){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=q.None,this.toDisposeOnSetContainer=q.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=ce(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,us(this.view),this.setContainer(e,t),this._register(st(()=>this.setContainer(null,1)))}setContainer(e,t){var n;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(n=this.shadowRootHostElement)===null||n===void 0||n.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=t!==1,this.useShadowDOM=t===3,this.useShadowDOM){this.shadowRootHostElement=ce(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const s=document.createElement("style");s.textContent=hFe,this.shadowRoot.appendChild(s),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(ce("slot"))}else this.container.appendChild(this.view);const r=new ae;l1.BUBBLE_UP_EVENTS.forEach(s=>{r.add(bi(this.container,s,o=>{this.onDOMEvent(o,!1)}))}),l1.BUBBLE_DOWN_EVENTS.forEach(s=>{r.add(bi(this.container,s,o=>{this.onDOMEvent(o,!0)},!0))}),this.toDisposeOnSetContainer=r}}show(e){var t,n;this.isVisible()&&this.hide(),_r(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2575",this.view.style.position=this.useFixedPosition?"fixed":"absolute",Gs(this.view),this.toDisposeOnClean=e.render(this.view)||q.None,this.delegate=e,this.doLayout(),(n=(t=this.delegate).focus)===null||n===void 0||n.call(t)}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(Ol&&j3.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if($3(e)){const u=Mi(e),h=Gke(e);t={top:u.top*h,left:u.left*h,width:u.width*h,height:u.height*h}}else uFe(e)?t={top:e.y,left:e.x,width:e.width||1,height:e.height||2}:t={top:e.posy,left:e.posx,width:2,height:2};const n=Es(this.view),r=ug(this.view),s=this.delegate.anchorPosition||0,o=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;if(a===0){const u={offset:t.top-window.pageYOffset,size:t.height,position:s===0?0:1},h={offset:t.left,size:t.width,position:o===0?0:1,mode:ah.ALIGN};l=Zm(window.innerHeight,r,u)+window.pageYOffset,Or.intersects({start:l,end:l+r},{start:u.offset,end:u.offset+u.size})&&(h.mode=ah.AVOID),c=Zm(window.innerWidth,n,h)}else{const u={offset:t.left,size:t.width,position:o===0?0:1},h={offset:t.top,size:t.height,position:s===0?0:1,mode:ah.ALIGN};c=Zm(window.innerWidth,n,u),Or.intersects({start:c,end:c+n},{start:u.offset,end:u.offset+u.size})&&(h.mode=ah.AVOID),l=Zm(window.innerHeight,r,h)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(s===0?"bottom":"top"),this.view.classList.add(o===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const d=Mi(this.container);this.view.style.top=`${l-(this.useFixedPosition?Mi(this.view).top:d.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?Mi(this.view).left:d.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),us(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!Dr(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}l1.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];l1.BUBBLE_DOWN_EVENTS=["click"];const hFe=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var fFe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},gFe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let RP=class extends q{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=q.None,this.container=e.hasContainer?e.container:null,this.contextView=this._register(new l1(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,n){t?(t!==this.container||this.shadowRoot!==n)&&(this.container=t,this.setContainer(t,n?3:2)):this.layoutService.hasContainer&&this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.shadowRoot=n,this.contextView.show(e);const r=st(()=>{this.currentViewDisposable===r&&this.hideContextView()});return this.currentViewDisposable=r,r}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}};RP=fFe([gFe(0,J1)],RP);let c1=[],$5=[],qX=[];function uS(i,e=!1){pFe(i,!1,e)}function pFe(i,e,t){const n=mFe(i,e);c1.push(n),n.userConfigured?qX.push(n):$5.push(n),t&&!n.userConfigured&&c1.forEach(r=>{r.mime===n.mime||r.userConfigured||(n.extension&&r.extension===n.extension&&console.warn(`Overwriting extension <<${n.extension}>> to now point to mime <<${n.mime}>>`),n.filename&&r.filename===n.filename&&console.warn(`Overwriting filename <<${n.filename}>> to now point to mime <<${n.mime}>>`),n.filepattern&&r.filepattern===n.filepattern&&console.warn(`Overwriting filepattern <<${n.filepattern}>> to now point to mime <<${n.mime}>>`),n.firstline&&r.firstline===n.firstline&&console.warn(`Overwriting firstline <<${n.firstline}>> to now point to mime <<${n.mime}>>`))})}function mFe(i,e){return{id:i.id,mime:i.mime,filename:i.filename,extension:i.extension,filepattern:i.filepattern,firstline:i.firstline,userConfigured:e,filenameLowercase:i.filename?i.filename.toLowerCase():void 0,extensionLowercase:i.extension?i.extension.toLowerCase():void 0,filepatternLowercase:i.filepattern?WX(i.filepattern.toLowerCase()):void 0,filepatternOnPath:i.filepattern?i.filepattern.indexOf(Pi.sep)>=0:!1}}function _Fe(){c1=c1.filter(i=>i.userConfigured),$5=[]}function bFe(i,e){return vFe(i,e).map(t=>t.id)}function vFe(i,e){let t;if(i)switch(i.scheme){case bt.file:t=i.fsPath;break;case bt.data:{t=qh.parseMetaData(i).get(qh.META_DATA_LABEL);break}case bt.vscodeNotebookCell:t=void 0;break;default:t=i.path}if(!t)return[{id:"unknown",mime:ui.unknown}];t=t.toLowerCase();const n=vh(t),r=rV(t,n,qX);if(r)return[r,{id:Eo,mime:ui.text}];const s=rV(t,n,$5);if(s)return[s,{id:Eo,mime:ui.text}];if(e){const o=yFe(e);if(o)return[o,{id:Eo,mime:ui.text}]}return[{id:"unknown",mime:ui.unknown}]}function rV(i,e,t){var n;let r,s,o;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){r=l;break}if(l.filepattern&&(!s||l.filepattern.length>s.filepattern.length)){const c=l.filepatternOnPath?i:e;!((n=l.filepatternLowercase)===null||n===void 0)&&n.call(l,c)&&(s=l)}l.extension&&(!o||l.extension.length>o.extension.length)&&e.endsWith(l.extensionLowercase)&&(o=l)}if(r)return r;if(s)return s;if(o)return o}function yFe(i){if(B3(i)&&(i=i.substr(1)),i.length>0)for(let e=c1.length-1;e>=0;e--){const t=c1[e];if(!t.firstline)continue;const n=i.match(t.firstline);if(n&&n.length>0)return t}}const hS=Object.prototype.hasOwnProperty,sV="vs.editor.nullLanguage";class CFe{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(sV,0),this._register(Eo,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||sV}}class my extends q{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new H),this.onDidChange=this._onDidChange.event,my.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new CFe,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(Z_.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){my.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},_Fe();const e=[].concat(Z_.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(r=>{this._lowercaseNameMap[r.toLowerCase()]=n.identifier}),n.mimetypes.forEach(r=>{this._mimeTypesMap[r]=n.identifier})}),qn.as(Zl.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;hS.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let r=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),r=t.mimetypes[0]),r||(r=`text/x-${n}`,e.mimetypes.push(r)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)uS({id:n,mime:r,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)uS({id:n,mime:r,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)uS({id:n,mime:r,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);wTe(l)||uS({id:n,mime:r,firstline:l},this._warnOnOverwrite)}catch(l){console.warn(`[${t.id}]: Invalid regular expression \`${a}\`: `,l)}}e.aliases.push(n);let s=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?s=[null]:s=t.aliases),s!==null)for(const a of s)!a||a.length===0||e.aliases.push(a);const o=s!==null&&s.length>0;if(!(o&&s[0]===null)){const a=(o?s[0]:null)||n;(o||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?hS.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return hS.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&hS.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:bFe(e,t)}}my.instanceCount=0;class _y extends q{constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new H),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new H),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new H({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,_y.instanceCount++,this._registry=this._register(new my(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){_y.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const n=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return kq(n,null)}createById(e){return new oV(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new oV(this.onDidChange,()=>{const n=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(n)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=Eo),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),Gn.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}}_y.instanceCount=0;class oV{constructor(e,t){this._onDidChangeLanguages=e,this._selector=t,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages(()=>this._evaluate())),this._emitter||(this._emitter=new H({onDidRemoveLastListener:()=>{this._dispose()}})),this._emitter.event}_evaluate(){var e;const t=this._selector();t!==this.languageId&&(this.languageId=t,(e=this._emitter)===null||e===void 0||e.fire(this.languageId))}}const by={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:ui.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"};function K5(...i){return function(e,t){for(let n=0,r=i.length;n<r;n++){const s=i[n](e,t);if(s)return s}return null}}GX.bind(void 0,!1);const vy=GX.bind(void 0,!0);function GX(i,e,t){if(!t||t.length<e.length)return null;let n;return i?n=A3(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function ZX(i,e){const t=e.toLowerCase().indexOf(i.toLowerCase());return t===-1?null:[{start:t,end:t+i.length}]}function XX(i,e){return EP(i.toLowerCase(),e.toLowerCase(),0,0)}function EP(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]===e[n]){let r=null;return(r=EP(i,e,t+1,n+1))?Z5({start:n,end:n+1},r):null}return EP(i,e,t,n+1)}function q5(i){return 97<=i&&i<=122}function JD(i){return 65<=i&&i<=90}function G5(i){return 48<=i&&i<=57}function YX(i){return i===32||i===9||i===10||i===13}const QX=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(i=>QX.add(i.charCodeAt(0)));function fk(i){return YX(i)||QX.has(i)}function wFe(i,e){return i===e||fk(i)&&fk(e)}function JX(i){return q5(i)||JD(i)||G5(i)}function Z5(i,e){return e.length===0?e=[i]:i.end===e[0].start?e[0].start=i.start:e.unshift(i),e}function eY(i,e){for(let t=e;t<i.length;t++){const n=i.charCodeAt(t);if(JD(n)||G5(n)||t>0&&!JX(i.charCodeAt(t-1)))return t}return i.length}function NP(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]!==e[n].toLowerCase())return null;{let r=null,s=n+1;for(r=NP(i,e,t+1,n+1);!r&&(s=eY(e,s))<e.length;)r=NP(i,e,t+1,s),s++;return r===null?null:Z5({start:n,end:n+1},r)}}function SFe(i){let e=0,t=0,n=0,r=0,s=0;for(let d=0;d<i.length;d++)s=i.charCodeAt(d),JD(s)&&e++,q5(s)&&t++,JX(s)&&n++,G5(s)&&r++;const o=e/i.length,a=t/i.length,l=n/i.length,c=r/i.length;return{upperPercent:o,lowerPercent:a,alphaPercent:l,numericPercent:c}}function xFe(i){const{upperPercent:e,lowerPercent:t}=i;return t===0&&e>.6}function TFe(i){const{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:r}=i;return t>.2&&e<.8&&n>.6&&r<.2}function kFe(i){let e=0,t=0,n=0,r=0;for(let s=0;s<i.length;s++)n=i.charCodeAt(s),JD(n)&&e++,q5(n)&&t++,YX(n)&&r++;return(e===0||t===0)&&r===0?i.length<=30:e<=5}function tY(i,e){if(!e||(e=e.trim(),e.length===0)||!kFe(i)||e.length>60)return null;const t=SFe(e);if(!TFe(t)){if(!xFe(t))return null;e=e.toLowerCase()}let n=null,r=0;for(i=i.toLowerCase();r<e.length&&(n=NP(i,e,0,r))===null;)r=eY(e,r+1);return n}function LFe(i,e,t=!1){if(!e||e.length===0)return null;let n=null,r=0;for(i=i.toLowerCase(),e=e.toLowerCase();r<e.length&&(n=AP(i,e,0,r,t))===null;)r=nY(e,r+1);return n}function AP(i,e,t,n,r){if(t===i.length)return[];if(n===e.length)return null;if(wFe(i.charCodeAt(t),e.charCodeAt(n))){let s=null,o=n+1;if(s=AP(i,e,t+1,n+1,r),!r)for(;!s&&(o=nY(e,o))<e.length;)s=AP(i,e,t+1,o,r),o++;return s?i.charCodeAt(t)!==e.charCodeAt(n)?s:Z5({start:n,end:n+1},s):null}else return null}function nY(i,e){for(let t=e;t<i.length;t++)if(fk(i.charCodeAt(t))||t>0&&fk(i.charCodeAt(t-1)))return t;return i.length}const DFe=K5(vy,tY,ZX),IFe=K5(vy,tY,XX),aV=new bf(1e4);function lV(i,e,t=!1){if(typeof i!="string"||typeof e!="string")return null;let n=aV.get(i);n||(n=new RegExp(yTe(i),"i"),aV.set(i,n));const r=n.exec(e);return r?[{start:r.index,end:r.index+r[0].length}]:t?IFe(i,e):DFe(i,e)}function RFe(i,e){const t=Qg(i,i.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?JC(t):null}function EFe(i,e,t,n,r,s){const o=Math.min(13,i.length);for(;t<o;t++){const a=Qg(i,e,t,n,r,s,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(a)return a}return[0,s]}function JC(i){if(typeof i>"u")return[];const e=[],t=i[1];for(let n=i.length-1;n>1;n--){const r=i[n]+t,s=e[e.length-1];s&&s.end===r?s.end=r+1:e.push({start:r,end:r+1})}return e}const lh=128;function X5(){const i=[],e=[];for(let t=0;t<=lh;t++)e[t]=0;for(let t=0;t<=lh;t++)i.push(e.slice(0));return i}function iY(i){const e=[];for(let t=0;t<=i;t++)e[t]=0;return e}const rY=iY(2*lh),PP=iY(2*lh),vd=X5(),Rf=X5(),fS=X5();function gS(i,e){if(e<0||e>=i.length)return!1;const t=i.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!F3(t)}}function cV(i,e){if(e<0||e>=i.length)return!1;switch(i.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function Ix(i,e,t){return e[i]!==t[i]}function NFe(i,e,t,n,r,s,o=!1){for(;e<t&&r<s;)i[e]===n[r]&&(o&&(rY[e]=r),e+=1),r+=1;return e===t}var El;(function(i){i.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}i.isDefault=e})(El||(El={}));class eI{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}}eI.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};function Qg(i,e,t,n,r,s,o=eI.default){const a=i.length>lh?lh:i.length,l=n.length>lh?lh:n.length;if(t>=a||s>=l||a-t>l-s||!NFe(e,t,a,r,s,l,!0))return;AFe(a,l,t,s,e,r);let c=1,d=1,u=t,h=s;const f=[!1];for(c=1,u=t;u<a;c++,u++){const v=rY[u],C=PP[u],w=u+1<a?PP[u+1]:l;for(d=v-s+1,h=v;h<w;d++,h++){let S=Number.MIN_SAFE_INTEGER,L=!1;h<=C&&(S=PFe(i,e,u,t,n,r,h,l,s,vd[c-1][d-1]===0,f));let T=0;S!==Number.MAX_SAFE_INTEGER&&(L=!0,T=S+Rf[c-1][d-1]);const I=h>v,R=I?Rf[c][d-1]+(vd[c][d-1]>0?-5:0):0,B=h>v+1&&vd[c][d-1]>0,V=B?Rf[c][d-2]+(vd[c][d-2]>0?-5:0):0;if(B&&(!I||V>=R)&&(!L||V>=T))Rf[c][d]=V,fS[c][d]=3,vd[c][d]=0;else if(I&&(!L||R>=T))Rf[c][d]=R,fS[c][d]=2,vd[c][d]=0;else if(L)Rf[c][d]=T,fS[c][d]=1,vd[c][d]=vd[c-1][d-1]+1;else throw new Error("not possible")}}if(!f[0]&&!o.firstMatchCanBeWeak)return;c--,d--;const g=[Rf[c][d],s];let m=0,y=0;for(;c>=1;){let v=d;do{const C=fS[c][v];if(C===3)v=v-2;else if(C===2)v=v-1;else break}while(v>=1);m>1&&e[t+c-1]===r[s+d-1]&&!Ix(v+s-1,n,r)&&m+1>vd[c][v]&&(v=d),v===d?m++:m=1,y||(y=v),c--,d=v-1,g.push(d)}l===a&&o.boostFullMatch&&(g[0]+=2);const b=y-a;return g[0]-=b,g}function AFe(i,e,t,n,r,s){let o=i-1,a=e-1;for(;o>=t&&a>=n;)r[o]===s[a]&&(PP[o]=a,o--),a--}function PFe(i,e,t,n,r,s,o,a,l,c,d){if(e[t]!==s[o])return Number.MIN_SAFE_INTEGER;let u=1,h=!1;return o===t-n?u=i[t]===r[o]?7:5:Ix(o,r,s)&&(o===0||!Ix(o-1,r,s))?(u=i[t]===r[o]?7:5,h=!0):gS(s,o)&&(o===0||!gS(s,o-1))?u=5:(gS(s,o-1)||cV(s,o-1))&&(u=5,h=!0),u>1&&t===n&&(d[0]=!0),h||(h=Ix(o,r,s)||gS(s,o-1)||cV(s,o-1)),t===n?o>l&&(u-=h?3:5):c?u+=h?2:0:u+=h?0:1,o+1===a&&(u-=h?3:5),u}function MFe(i,e,t,n,r,s,o){return OFe(i,e,t,n,r,s,!0,o)}function OFe(i,e,t,n,r,s,o,a){let l=Qg(i,e,t,n,r,s,a);if(l&&!o)return l;if(i.length>=3){const c=Math.min(7,i.length-1);for(let d=t+1;d<c;d++){const u=FFe(i,d);if(u){const h=Qg(u,u.toLowerCase(),t,n,r,s,a);h&&(h[0]-=3,(!l||h[0]>l[0])&&(l=h))}}}return l}function FFe(i,e){if(e+1>=i.length)return;const t=i[e],n=i[e+1];if(t!==n)return i.slice(0,e)+n+t+i.slice(e+2)}const BFe="$(",Y5=new RegExp(`\\$\\(${Qe.iconNameExpression}(?:${Qe.iconModifierExpression})?\\)`,"g"),WFe=new RegExp(`(\\\\)?${Y5.source}`,"g");function VFe(i){return i.replace(WFe,(e,t)=>t?e:`\\${e}`)}const HFe=new RegExp(`\\\\${Y5.source}`,"g");function UFe(i){return i.replace(HFe,e=>`\\${e}`)}const jFe=new RegExp(`(\\s)?(\\\\)?${Y5.source}(\\s)?`,"g");function Q5(i){return i.indexOf(BFe)===-1?i:i.replace(jFe,(e,t,n,r)=>n?e:t||r||"")}function zFe(i){return i?i.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}const OE=new RegExp(`\\$\\(${Qe.iconNameCharacter}+\\)`,"g");function pv(i){OE.lastIndex=0;let e="";const t=[];let n=0;for(;;){const r=OE.lastIndex,s=OE.exec(i),o=i.substring(r,s==null?void 0:s.index);if(o.length>0){e+=o;for(let a=0;a<o.length;a++)t.push(n)}if(!s)break;n+=s[0].length}return{text:e,iconOffsets:t}}function FE(i,e,t=!1){const{text:n,iconOffsets:r}=e;if(!r||r.length===0)return lV(i,n,t);const s=PC(n," "),o=n.length-s.length,a=lV(i,s,t);if(a)for(const l of a){const c=r[l.start+o]+o;l.start+=c,l.end+=c}return a}class Lr{constructor(e="",t=!1){var n,r,s;if(this.value=e,typeof this.value!="string")throw ia("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(n=t.isTrusted)!==null&&n!==void 0?n:void 0,this.supportThemeIcons=(r=t.supportThemeIcons)!==null&&r!==void 0?r:!1,this.supportHtml=(s=t.supportHtml)!==null&&s!==void 0?s:!1)}appendText(e,t=0){return this.value+=KFe(this.supportThemeIcons?VFe(e):e).replace(/([ \t]+)/g,(n,r)=>"&nbsp;".repeat(r.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=t,this.value+="\n```\n",this}appendLink(e,t,n){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=` "${this._escape(this._escape(n,'"'),")")}"`),this.value+=")",this}_escape(e,t){const n=new RegExp(No(t),"g");return e.replace(n,(r,s)=>e.charAt(s-1)!=="\\"?`\\${r}`:r)}}function d1(i){return xh(i)?!i.value:Array.isArray(i)?i.every(d1):!0}function xh(i){return i instanceof Lr?!0:i&&typeof i=="object"?typeof i.value=="string"&&(typeof i.isTrusted=="boolean"||typeof i.isTrusted=="object"||i.isTrusted===void 0)&&(typeof i.supportThemeIcons=="boolean"||i.supportThemeIcons===void 0):!1}function $Fe(i,e){return i===e?!0:!i||!e?!1:i.value===e.value&&i.isTrusted===e.isTrusted&&i.supportThemeIcons===e.supportThemeIcons&&i.supportHtml===e.supportHtml&&(i.baseUri===e.baseUri||!!i.baseUri&&!!e.baseUri&&T5(Ye.from(i.baseUri),Ye.from(e.baseUri)))}function KFe(i){return i.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function pS(i){return i.replace(/"/g,"&quot;")}function BE(i){return i&&i.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function qFe(i){const e=[],t=i.split("|").map(r=>r.trim());i=t[0];const n=t[1];if(n){const r=/height=(\d+)/.exec(n),s=/width=(\d+)/.exec(n),o=r?r[1]:"",a=s?s[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(o));l&&e.push(`width="${a}"`),c&&e.push(`height="${o}"`)}return{href:i,dimensions:e}}var MP=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function GFe(i,e){bs(e)?i.title=Q5(e):e!=null&&e.markdownNotSupportedFallback?i.title=e.markdownNotSupportedFallback:i.removeAttribute("title")}class ZFe{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}update(e,t,n){var r;return MP(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let s;if(e===void 0||bs(e)||e instanceof HTMLElement)s=e;else if(!E0(e.markdown))s=(r=e.markdown)!==null&&r!==void 0?r:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(p("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new vi;const o=this._cancellationTokenSource.token;if(s=yield e.markdown(o),s===void 0&&(s=e.markdownNotSupportedFallback),this.isDisposed||o.isCancellationRequested)return}this.show(s,t,n)})}show(e,t,n){const r=this._hoverWidget;if(this.hasContent(e)){const s=Object.assign({content:e,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!r},n);this._hoverWidget=this.hoverDelegate.showHover(s,t)}r==null||r.dispose()}hasContent(e){return e?xh(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}}function sY(i,e,t,n){let r,s;const o=(u,h)=>{var f;const g=s!==void 0;u&&(s==null||s.dispose(),s=void 0),h&&(r==null||r.dispose(),r=void 0),g&&((f=i.onDidHideHover)===null||f===void 0||f.call(i))},a=(u,h,f)=>new za(()=>MP(this,void 0,void 0,function*(){(!s||s.isDisposed)&&(s=new ZFe(i,f||e,u>0),yield s.update(t,h,n))}),u),l=()=>{if(r)return;const u=new ae,h=m=>o(!1,m.fromElement===e);u.add(ee(e,Ce.MOUSE_LEAVE,h,!0));const f=()=>o(!0,!0);u.add(ee(e,Ce.MOUSE_DOWN,f,!0));const g={targetElements:[e],dispose:()=>{}};if(i.placement===void 0||i.placement==="mouse"){const m=y=>{g.x=y.x+10,y.target instanceof HTMLElement&&y.target.classList.contains("action-label")&&o(!0,!0)};u.add(ee(e,Ce.MOUSE_MOVE,m,!0))}u.add(a(i.delay,!1,g)),r=u},c=ee(e,Ce.MOUSE_OVER,l,!0);return{show:u=>{o(!1,!0),a(0,u)},hide:()=>{o(!0,!0)},update:(u,h)=>MP(this,void 0,void 0,function*(){t=u,yield s==null?void 0:s.update(t,void 0,h)}),dispose:()=>{c.dispose(),o(!0,!0)}}}function XFe(i,e={}){const t=J5(e);return t.textContent=i,t}function YFe(i,e={}){const t=J5(e);return oY(t,JFe(i,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function J5(i){const e=i.inline?"span":"div",t=document.createElement(e);return i.className&&(t.className=i.className),t}class QFe{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function oY(i,e,t,n){let r;if(e.type===2)r=document.createTextNode(e.content||"");else if(e.type===3)r=document.createElement("b");else if(e.type===4)r=document.createElement("i");else if(e.type===7&&n)r=document.createElement("code");else if(e.type===5&&t){const s=document.createElement("a");t.disposables.add(bi(s,"click",o=>{t.callback(String(e.index),o)})),r=s}else e.type===8?r=document.createElement("br"):e.type===1&&(r=i);r&&i!==r&&i.appendChild(r),r&&Array.isArray(e.children)&&e.children.forEach(s=>{oY(r,s,t,n)})}function JFe(i,e){const t={type:1,children:[]};let n=0,r=t;const s=[],o=new QFe(i);for(;!o.eos();){let a=o.next();const l=a==="\\"&&OP(o.peek(),e)!==0;if(l&&(a=o.next()),!l&&e4e(a,e)&&a===o.peek()){o.advance(),r.type===2&&(r=s.pop());const c=OP(a,e);if(r.type===c||r.type===5&&c===6)r=s.pop();else{const d={type:c,children:[]};c===5&&(d.index=n,n++),r.children.push(d),s.push(r),r=d}}else if(a===`
`)r.type===2&&(r=s.pop()),r.children.push({type:8});else if(r.type!==2){const c={type:2,content:a};r.children.push(c),s.push(r),r=c}else r.content+=a}return r.type===2&&(r=s.pop()),t}function e4e(i,e){return OP(i,e)!==0}function OP(i,e){switch(i){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}const t4e=new RegExp(`(\\\\)?\\$\\((${Qe.iconNameExpression}(?:${Qe.iconModifierExpression})?)\\)`,"g");function Th(i){const e=new Array;let t,n=0,r=0;for(;(t=t4e.exec(i))!==null;){r=t.index||0,n<r&&e.push(i.substring(n,r)),n=(t.index||0)+t[0].length;const[,s,o]=t;e.push(s?`$(${o})`:FP({id:o}))}return n<i.length&&e.push(i.substring(n)),e}function FP(i){const e=ce("span");return e.classList.add(...Qe.asClassNameArray(i)),e}class eB{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const BP=new eB("id#");let Ss={};(function(){function i(e,t){t(Ss)}i.amd=!0,function(e,t){typeof i=="function"&&i.amd?i(["exports"],t):typeof exports=="object"&&typeof module<"u"?t(exports):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(ne,G){for(var Z=0;Z<G.length;Z++){var A=G[Z];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(ne,A.key,A)}}function n(ne,G,Z){return G&&t(ne.prototype,G),Z&&t(ne,Z),Object.defineProperty(ne,"prototype",{writable:!1}),ne}function r(ne,G){if(ne){if(typeof ne=="string")return s(ne,G);var Z=Object.prototype.toString.call(ne).slice(8,-1);if(Z==="Object"&&ne.constructor&&(Z=ne.constructor.name),Z==="Map"||Z==="Set")return Array.from(ne);if(Z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Z))return s(ne,G)}}function s(ne,G){(G==null||G>ne.length)&&(G=ne.length);for(var Z=0,A=new Array(G);Z<G;Z++)A[Z]=ne[Z];return A}function o(ne,G){var Z=typeof Symbol<"u"&&ne[Symbol.iterator]||ne["@@iterator"];if(Z)return(Z=Z.call(ne)).next.bind(Z);if(Array.isArray(ne)||(Z=r(ne))||G&&ne&&typeof ne.length=="number"){Z&&(ne=Z);var A=0;return function(){return A>=ne.length?{done:!0}:{done:!1,value:ne[A++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}e.defaults=a();function l(ne){e.defaults=ne}var c=/[&<>"']/,d=/[&<>"']/g,u=/[<>"']|&(?!#?\w+;)/,h=/[<>"']|&(?!#?\w+;)/g,f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=function(G){return f[G]};function m(ne,G){if(G){if(c.test(ne))return ne.replace(d,g)}else if(u.test(ne))return ne.replace(h,g);return ne}var y=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function b(ne){return ne.replace(y,function(G,Z){return Z=Z.toLowerCase(),Z==="colon"?":":Z.charAt(0)==="#"?Z.charAt(1)==="x"?String.fromCharCode(parseInt(Z.substring(2),16)):String.fromCharCode(+Z.substring(1)):""})}var v=/(^|[^\[])\^/g;function C(ne,G){ne=typeof ne=="string"?ne:ne.source,G=G||"";var Z={replace:function(M,$){return $=$.source||$,$=$.replace(v,"$1"),ne=ne.replace(M,$),Z},getRegex:function(){return new RegExp(ne,G)}};return Z}var w=/[^\w:]/g,S=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function L(ne,G,Z){if(ne){var A;try{A=decodeURIComponent(b(Z)).replace(w,"").toLowerCase()}catch{return null}if(A.indexOf("javascript:")===0||A.indexOf("vbscript:")===0||A.indexOf("data:")===0)return null}G&&!S.test(Z)&&(Z=V(G,Z));try{Z=encodeURI(Z).replace(/%25/g,"%")}catch{return null}return Z}var T={},I=/^[^:]+:\/*[^/]*$/,R=/^([^:]+:)[\s\S]*$/,B=/^([^:]+:\/*[^/]*)[\s\S]*$/;function V(ne,G){T[" "+ne]||(I.test(ne)?T[" "+ne]=ne+"/":T[" "+ne]=oe(ne,"/",!0)),ne=T[" "+ne];var Z=ne.indexOf(":")===-1;return G.substring(0,2)==="//"?Z?G:ne.replace(R,"$1")+G:G.charAt(0)==="/"?Z?G:ne.replace(B,"$1")+G:ne+G}var F={exec:function(){}};function W(ne){for(var G=1,Z,A;G<arguments.length;G++){Z=arguments[G];for(A in Z)Object.prototype.hasOwnProperty.call(Z,A)&&(ne[A]=Z[A])}return ne}function X(ne,G){var Z=ne.replace(/\|/g,function($,j,le){for(var Ie=!1,je=j;--je>=0&&le[je]==="\\";)Ie=!Ie;return Ie?"|":" |"}),A=Z.split(/ \|/),M=0;if(A[0].trim()||A.shift(),A.length>0&&!A[A.length-1].trim()&&A.pop(),A.length>G)A.splice(G);else for(;A.length<G;)A.push("");for(;M<A.length;M++)A[M]=A[M].trim().replace(/\\\|/g,"|");return A}function oe(ne,G,Z){var A=ne.length;if(A===0)return"";for(var M=0;M<A;){var $=ne.charAt(A-M-1);if($===G&&!Z)M++;else if($!==G&&Z)M++;else break}return ne.slice(0,A-M)}function we(ne,G){if(ne.indexOf(G[1])===-1)return-1;for(var Z=ne.length,A=0,M=0;M<Z;M++)if(ne[M]==="\\")M++;else if(ne[M]===G[0])A++;else if(ne[M]===G[1]&&(A--,A<0))return M;return-1}function ke(ne){ne&&ne.sanitize&&!ne.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Ee(ne,G){if(G<1)return"";for(var Z="";G>1;)G&1&&(Z+=ne),G>>=1,ne+=ne;return Z+ne}function Le(ne,G,Z,A){var M=G.href,$=G.title?m(G.title):null,j=ne[1].replace(/\\([\[\]])/g,"$1");if(ne[0].charAt(0)!=="!"){A.state.inLink=!0;var le={type:"link",raw:Z,href:M,title:$,text:j,tokens:A.inlineTokens(j)};return A.state.inLink=!1,le}return{type:"image",raw:Z,href:M,title:$,text:m(j)}}function qe(ne,G){var Z=ne.match(/^(\s+)(?:```)/);if(Z===null)return G;var A=Z[1];return G.split(`
`).map(function(M){var $=M.match(/^\s+/);if($===null)return M;var j=$[0];return j.length>=A.length?M.slice(A.length):M}).join(`
`)}var Ue=function(){function ne(Z){this.options=Z||e.defaults}var G=ne.prototype;return G.space=function(A){var M=this.rules.block.newline.exec(A);if(M&&M[0].length>0)return{type:"space",raw:M[0]}},G.code=function(A){var M=this.rules.block.code.exec(A);if(M){var $=M[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:M[0],codeBlockStyle:"indented",text:this.options.pedantic?$:oe($,`
`)}}},G.fences=function(A){var M=this.rules.block.fences.exec(A);if(M){var $=M[0],j=qe($,M[3]||"");return{type:"code",raw:$,lang:M[2]?M[2].trim():M[2],text:j}}},G.heading=function(A){var M=this.rules.block.heading.exec(A);if(M){var $=M[2].trim();if(/#$/.test($)){var j=oe($,"#");(this.options.pedantic||!j||/ $/.test(j))&&($=j.trim())}return{type:"heading",raw:M[0],depth:M[1].length,text:$,tokens:this.lexer.inline($)}}},G.hr=function(A){var M=this.rules.block.hr.exec(A);if(M)return{type:"hr",raw:M[0]}},G.blockquote=function(A){var M=this.rules.block.blockquote.exec(A);if(M){var $=M[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:M[0],tokens:this.lexer.blockTokens($,[]),text:$}}},G.list=function(A){var M=this.rules.block.list.exec(A);if(M){var $,j,le,Ie,je,Xe,at,lt,on,en,nt,Bn,Wn=M[1].trim(),ks=Wn.length>1,qt={type:"list",raw:"",ordered:ks,start:ks?+Wn.slice(0,-1):"",loose:!1,items:[]};Wn=ks?"\\d{1,9}\\"+Wn.slice(-1):"\\"+Wn,this.options.pedantic&&(Wn=ks?Wn:"[*+-]");for(var ai=new RegExp("^( {0,3}"+Wn+")((?:[	 ][^\\n]*)?(?:\\n|$))");A&&(Bn=!1,!(!(M=ai.exec(A))||this.rules.block.hr.test(A)));){if($=M[0],A=A.substring($.length),lt=M[2].split(`
`,1)[0],on=A.split(`
`,1)[0],this.options.pedantic?(Ie=2,nt=lt.trimLeft()):(Ie=M[2].search(/[^ ]/),Ie=Ie>4?1:Ie,nt=lt.slice(Ie),Ie+=M[1].length),Xe=!1,!lt&&/^ *$/.test(on)&&($+=on+`
`,A=A.substring(on.length+1),Bn=!0),!Bn)for(var Ya=new RegExp("^ {0,"+Math.min(3,Ie-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),Qa=new RegExp("^ {0,"+Math.min(3,Ie-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),Hs=new RegExp("^ {0,"+Math.min(3,Ie-1)+"}(?:```|~~~)"),ba=new RegExp("^ {0,"+Math.min(3,Ie-1)+"}#");A&&(en=A.split(`
`,1)[0],lt=en,this.options.pedantic&&(lt=lt.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(Hs.test(lt)||ba.test(lt)||Ya.test(lt)||Qa.test(A)));){if(lt.search(/[^ ]/)>=Ie||!lt.trim())nt+=`
`+lt.slice(Ie);else if(!Xe)nt+=`
`+lt;else break;!Xe&&!lt.trim()&&(Xe=!0),$+=en+`
`,A=A.substring(en.length+1)}qt.loose||(at?qt.loose=!0:/\n *\n *$/.test($)&&(at=!0)),this.options.gfm&&(j=/^\[[ xX]\] /.exec(nt),j&&(le=j[0]!=="[ ] ",nt=nt.replace(/^\[[ xX]\] +/,""))),qt.items.push({type:"list_item",raw:$,task:!!j,checked:le,loose:!1,text:nt}),qt.raw+=$}qt.items[qt.items.length-1].raw=$.trimRight(),qt.items[qt.items.length-1].text=nt.trimRight(),qt.raw=qt.raw.trimRight();var Ja=qt.items.length;for(je=0;je<Ja;je++){this.lexer.state.top=!1,qt.items[je].tokens=this.lexer.blockTokens(qt.items[je].text,[]);var el=qt.items[je].tokens.filter(function(tl){return tl.type==="space"}),Ql=el.every(function(tl){for(var Df=tl.raw.split(""),co=0,gd=o(Df),pd;!(pd=gd()).done;){var ku=pd.value;if(ku===`
`&&(co+=1),co>1)return!0}return!1});!qt.loose&&el.length&&Ql&&(qt.loose=!0,qt.items[je].loose=!0)}return qt}},G.html=function(A){var M=this.rules.block.html.exec(A);if(M){var $={type:"html",raw:M[0],pre:!this.options.sanitizer&&(M[1]==="pre"||M[1]==="script"||M[1]==="style"),text:M[0]};if(this.options.sanitize){var j=this.options.sanitizer?this.options.sanitizer(M[0]):m(M[0]);$.type="paragraph",$.text=j,$.tokens=this.lexer.inline(j)}return $}},G.def=function(A){var M=this.rules.block.def.exec(A);if(M){M[3]&&(M[3]=M[3].substring(1,M[3].length-1));var $=M[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:$,raw:M[0],href:M[2],title:M[3]}}},G.table=function(A){var M=this.rules.block.table.exec(A);if(M){var $={type:"table",header:X(M[1]).map(function(at){return{text:at}}),align:M[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:M[3]&&M[3].trim()?M[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if($.header.length===$.align.length){$.raw=M[0];var j=$.align.length,le,Ie,je,Xe;for(le=0;le<j;le++)/^ *-+: *$/.test($.align[le])?$.align[le]="right":/^ *:-+: *$/.test($.align[le])?$.align[le]="center":/^ *:-+ *$/.test($.align[le])?$.align[le]="left":$.align[le]=null;for(j=$.rows.length,le=0;le<j;le++)$.rows[le]=X($.rows[le],$.header.length).map(function(at){return{text:at}});for(j=$.header.length,Ie=0;Ie<j;Ie++)$.header[Ie].tokens=this.lexer.inline($.header[Ie].text);for(j=$.rows.length,Ie=0;Ie<j;Ie++)for(Xe=$.rows[Ie],je=0;je<Xe.length;je++)Xe[je].tokens=this.lexer.inline(Xe[je].text);return $}}},G.lheading=function(A){var M=this.rules.block.lheading.exec(A);if(M)return{type:"heading",raw:M[0],depth:M[2].charAt(0)==="="?1:2,text:M[1],tokens:this.lexer.inline(M[1])}},G.paragraph=function(A){var M=this.rules.block.paragraph.exec(A);if(M){var $=M[1].charAt(M[1].length-1)===`
`?M[1].slice(0,-1):M[1];return{type:"paragraph",raw:M[0],text:$,tokens:this.lexer.inline($)}}},G.text=function(A){var M=this.rules.block.text.exec(A);if(M)return{type:"text",raw:M[0],text:M[0],tokens:this.lexer.inline(M[0])}},G.escape=function(A){var M=this.rules.inline.escape.exec(A);if(M)return{type:"escape",raw:M[0],text:m(M[1])}},G.tag=function(A){var M=this.rules.inline.tag.exec(A);if(M)return!this.lexer.state.inLink&&/^<a /i.test(M[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(M[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(M[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(M[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:M[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(M[0]):m(M[0]):M[0]}},G.link=function(A){var M=this.rules.inline.link.exec(A);if(M){var $=M[2].trim();if(!this.options.pedantic&&/^</.test($)){if(!/>$/.test($))return;var j=oe($.slice(0,-1),"\\");if(($.length-j.length)%2===0)return}else{var le=we(M[2],"()");if(le>-1){var Ie=M[0].indexOf("!")===0?5:4,je=Ie+M[1].length+le;M[2]=M[2].substring(0,le),M[0]=M[0].substring(0,je).trim(),M[3]=""}}var Xe=M[2],at="";if(this.options.pedantic){var lt=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(Xe);lt&&(Xe=lt[1],at=lt[3])}else at=M[3]?M[3].slice(1,-1):"";return Xe=Xe.trim(),/^</.test(Xe)&&(this.options.pedantic&&!/>$/.test($)?Xe=Xe.slice(1):Xe=Xe.slice(1,-1)),Le(M,{href:Xe&&Xe.replace(this.rules.inline._escapes,"$1"),title:at&&at.replace(this.rules.inline._escapes,"$1")},M[0],this.lexer)}},G.reflink=function(A,M){var $;if(($=this.rules.inline.reflink.exec(A))||($=this.rules.inline.nolink.exec(A))){var j=($[2]||$[1]).replace(/\s+/g," ");if(j=M[j.toLowerCase()],!j||!j.href){var le=$[0].charAt(0);return{type:"text",raw:le,text:le}}return Le($,j,$[0],this.lexer)}},G.emStrong=function(A,M,$){$===void 0&&($="");var j=this.rules.inline.emStrong.lDelim.exec(A);if(j&&!(j[3]&&$.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var le=j[1]||j[2]||"";if(!le||le&&($===""||this.rules.inline.punctuation.exec($))){var Ie=j[0].length-1,je,Xe,at=Ie,lt=0,on=j[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(on.lastIndex=0,M=M.slice(-1*A.length+Ie);(j=on.exec(M))!=null;)if(je=j[1]||j[2]||j[3]||j[4]||j[5]||j[6],!!je){if(Xe=je.length,j[3]||j[4]){at+=Xe;continue}else if((j[5]||j[6])&&Ie%3&&!((Ie+Xe)%3)){lt+=Xe;continue}if(at-=Xe,!(at>0)){if(Xe=Math.min(Xe,Xe+at+lt),Math.min(Ie,Xe)%2){var en=A.slice(1,Ie+j.index+Xe);return{type:"em",raw:A.slice(0,Ie+j.index+Xe+1),text:en,tokens:this.lexer.inlineTokens(en)}}var nt=A.slice(2,Ie+j.index+Xe-1);return{type:"strong",raw:A.slice(0,Ie+j.index+Xe+1),text:nt,tokens:this.lexer.inlineTokens(nt)}}}}}},G.codespan=function(A){var M=this.rules.inline.code.exec(A);if(M){var $=M[2].replace(/\n/g," "),j=/[^ ]/.test($),le=/^ /.test($)&&/ $/.test($);return j&&le&&($=$.substring(1,$.length-1)),$=m($,!0),{type:"codespan",raw:M[0],text:$}}},G.br=function(A){var M=this.rules.inline.br.exec(A);if(M)return{type:"br",raw:M[0]}},G.del=function(A){var M=this.rules.inline.del.exec(A);if(M)return{type:"del",raw:M[0],text:M[2],tokens:this.lexer.inlineTokens(M[2])}},G.autolink=function(A,M){var $=this.rules.inline.autolink.exec(A);if($){var j,le;return $[2]==="@"?(j=m(this.options.mangle?M($[1]):$[1]),le="mailto:"+j):(j=m($[1]),le=j),{type:"link",raw:$[0],text:j,href:le,tokens:[{type:"text",raw:j,text:j}]}}},G.url=function(A,M){var $;if($=this.rules.inline.url.exec(A)){var j,le;if($[2]==="@")j=m(this.options.mangle?M($[0]):$[0]),le="mailto:"+j;else{var Ie;do Ie=$[0],$[0]=this.rules.inline._backpedal.exec($[0])[0];while(Ie!==$[0]);j=m($[0]),$[1]==="www."?le="http://"+j:le=j}return{type:"link",raw:$[0],text:j,href:le,tokens:[{type:"text",raw:j,text:j}]}}},G.inlineText=function(A,M){var $=this.rules.inline.text.exec(A);if($){var j;return this.lexer.state.inRawBlock?j=this.options.sanitize?this.options.sanitizer?this.options.sanitizer($[0]):m($[0]):$[0]:j=m(this.options.smartypants?M($[0]):$[0]),{type:"text",raw:$[0],text:j}}},ne}(),Oe={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:F,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};Oe._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Oe._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,Oe.def=C(Oe.def).replace("label",Oe._label).replace("title",Oe._title).getRegex(),Oe.bullet=/(?:[*+-]|\d{1,9}[.)])/,Oe.listItemStart=C(/^( *)(bull) */).replace("bull",Oe.bullet).getRegex(),Oe.list=C(Oe.list).replace(/bull/g,Oe.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Oe.def.source+")").getRegex(),Oe._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Oe._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Oe.html=C(Oe.html,"i").replace("comment",Oe._comment).replace("tag",Oe._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Oe.paragraph=C(Oe._paragraph).replace("hr",Oe.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Oe._tag).getRegex(),Oe.blockquote=C(Oe.blockquote).replace("paragraph",Oe.paragraph).getRegex(),Oe.normal=W({},Oe),Oe.gfm=W({},Oe.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Oe.gfm.table=C(Oe.gfm.table).replace("hr",Oe.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Oe._tag).getRegex(),Oe.gfm.paragraph=C(Oe._paragraph).replace("hr",Oe.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Oe.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Oe._tag).getRegex(),Oe.pedantic=W({},Oe.normal,{html:C(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Oe._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:F,paragraph:C(Oe.normal._paragraph).replace("hr",Oe.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Oe.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var be={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:F,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:F,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};be._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",be.punctuation=C(be.punctuation).replace(/punctuation/g,be._punctuation).getRegex(),be.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,be.escapedEmSt=/\\\*|\\_/g,be._comment=C(Oe._comment).replace("(?:-->|$)","-->").getRegex(),be.emStrong.lDelim=C(be.emStrong.lDelim).replace(/punct/g,be._punctuation).getRegex(),be.emStrong.rDelimAst=C(be.emStrong.rDelimAst,"g").replace(/punct/g,be._punctuation).getRegex(),be.emStrong.rDelimUnd=C(be.emStrong.rDelimUnd,"g").replace(/punct/g,be._punctuation).getRegex(),be._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,be._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,be._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,be.autolink=C(be.autolink).replace("scheme",be._scheme).replace("email",be._email).getRegex(),be._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,be.tag=C(be.tag).replace("comment",be._comment).replace("attribute",be._attribute).getRegex(),be._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,be._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,be._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,be.link=C(be.link).replace("label",be._label).replace("href",be._href).replace("title",be._title).getRegex(),be.reflink=C(be.reflink).replace("label",be._label).replace("ref",Oe._label).getRegex(),be.nolink=C(be.nolink).replace("ref",Oe._label).getRegex(),be.reflinkSearch=C(be.reflinkSearch,"g").replace("reflink",be.reflink).replace("nolink",be.nolink).getRegex(),be.normal=W({},be),be.pedantic=W({},be.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:C(/^!?\[(label)\]\((.*?)\)/).replace("label",be._label).getRegex(),reflink:C(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",be._label).getRegex()}),be.gfm=W({},be.normal,{escape:C(be.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),be.gfm.url=C(be.gfm.url,"i").replace("email",be.gfm._extended_email).getRegex(),be.breaks=W({},be.gfm,{br:C(be.br).replace("{2,}","*").getRegex(),text:C(be.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function un(ne){return ne.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function he(ne){var G="",Z,A,M=ne.length;for(Z=0;Z<M;Z++)A=ne.charCodeAt(Z),Math.random()>.5&&(A="x"+A.toString(16)),G+="&#"+A+";";return G}var _e=function(){function ne(Z){this.tokens=[],this.tokens.links=Object.create(null),this.options=Z||e.defaults,this.options.tokenizer=this.options.tokenizer||new Ue,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var A={block:Oe.normal,inline:be.normal};this.options.pedantic?(A.block=Oe.pedantic,A.inline=be.pedantic):this.options.gfm&&(A.block=Oe.gfm,this.options.breaks?A.inline=be.breaks:A.inline=be.gfm),this.tokenizer.rules=A}ne.lex=function(A,M){var $=new ne(M);return $.lex(A)},ne.lexInline=function(A,M){var $=new ne(M);return $.inlineTokens(A)};var G=ne.prototype;return G.lex=function(A){A=A.replace(/\r\n|\r/g,`
`),this.blockTokens(A,this.tokens);for(var M;M=this.inlineQueue.shift();)this.inlineTokens(M.src,M.tokens);return this.tokens},G.blockTokens=function(A,M){var $=this;M===void 0&&(M=[]),this.options.pedantic?A=A.replace(/\t/g,"    ").replace(/^ +$/gm,""):A=A.replace(/^( *)(\t+)/gm,function(at,lt,on){return lt+"    ".repeat(on.length)});for(var j,le,Ie,je;A;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(at){return(j=at.call({lexer:$},A,M))?(A=A.substring(j.raw.length),M.push(j),!0):!1}))){if(j=this.tokenizer.space(A)){A=A.substring(j.raw.length),j.raw.length===1&&M.length>0?M[M.length-1].raw+=`
`:M.push(j);continue}if(j=this.tokenizer.code(A)){A=A.substring(j.raw.length),le=M[M.length-1],le&&(le.type==="paragraph"||le.type==="text")?(le.raw+=`
`+j.raw,le.text+=`
`+j.text,this.inlineQueue[this.inlineQueue.length-1].src=le.text):M.push(j);continue}if(j=this.tokenizer.fences(A)){A=A.substring(j.raw.length),M.push(j);continue}if(j=this.tokenizer.heading(A)){A=A.substring(j.raw.length),M.push(j);continue}if(j=this.tokenizer.hr(A)){A=A.substring(j.raw.length),M.push(j);continue}if(j=this.tokenizer.blockquote(A)){A=A.substring(j.raw.length),M.push(j);continue}if(j=this.tokenizer.list(A)){A=A.substring(j.raw.length),M.push(j);continue}if(j=this.tokenizer.html(A)){A=A.substring(j.raw.length),M.push(j);continue}if(j=this.tokenizer.def(A)){A=A.substring(j.raw.length),le=M[M.length-1],le&&(le.type==="paragraph"||le.type==="text")?(le.raw+=`
`+j.raw,le.text+=`
`+j.raw,this.inlineQueue[this.inlineQueue.length-1].src=le.text):this.tokens.links[j.tag]||(this.tokens.links[j.tag]={href:j.href,title:j.title});continue}if(j=this.tokenizer.table(A)){A=A.substring(j.raw.length),M.push(j);continue}if(j=this.tokenizer.lheading(A)){A=A.substring(j.raw.length),M.push(j);continue}if(Ie=A,this.options.extensions&&this.options.extensions.startBlock&&function(){var at=1/0,lt=A.slice(1),on=void 0;$.options.extensions.startBlock.forEach(function(en){on=en.call({lexer:this},lt),typeof on=="number"&&on>=0&&(at=Math.min(at,on))}),at<1/0&&at>=0&&(Ie=A.substring(0,at+1))}(),this.state.top&&(j=this.tokenizer.paragraph(Ie))){le=M[M.length-1],je&&le.type==="paragraph"?(le.raw+=`
`+j.raw,le.text+=`
`+j.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=le.text):M.push(j),je=Ie.length!==A.length,A=A.substring(j.raw.length);continue}if(j=this.tokenizer.text(A)){A=A.substring(j.raw.length),le=M[M.length-1],le&&le.type==="text"?(le.raw+=`
`+j.raw,le.text+=`
`+j.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=le.text):M.push(j);continue}if(A){var Xe="Infinite loop on byte: "+A.charCodeAt(0);if(this.options.silent){console.error(Xe);break}else throw new Error(Xe)}}return this.state.top=!0,M},G.inline=function(A,M){return M===void 0&&(M=[]),this.inlineQueue.push({src:A,tokens:M}),M},G.inlineTokens=function(A,M){var $=this;M===void 0&&(M=[]);var j,le,Ie,je=A,Xe,at,lt;if(this.tokens.links){var on=Object.keys(this.tokens.links);if(on.length>0)for(;(Xe=this.tokenizer.rules.inline.reflinkSearch.exec(je))!=null;)on.includes(Xe[0].slice(Xe[0].lastIndexOf("[")+1,-1))&&(je=je.slice(0,Xe.index)+"["+Ee("a",Xe[0].length-2)+"]"+je.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Xe=this.tokenizer.rules.inline.blockSkip.exec(je))!=null;)je=je.slice(0,Xe.index)+"["+Ee("a",Xe[0].length-2)+"]"+je.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Xe=this.tokenizer.rules.inline.escapedEmSt.exec(je))!=null;)je=je.slice(0,Xe.index)+"++"+je.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;A;)if(at||(lt=""),at=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(nt){return(j=nt.call({lexer:$},A,M))?(A=A.substring(j.raw.length),M.push(j),!0):!1}))){if(j=this.tokenizer.escape(A)){A=A.substring(j.raw.length),M.push(j);continue}if(j=this.tokenizer.tag(A)){A=A.substring(j.raw.length),le=M[M.length-1],le&&j.type==="text"&&le.type==="text"?(le.raw+=j.raw,le.text+=j.text):M.push(j);continue}if(j=this.tokenizer.link(A)){A=A.substring(j.raw.length),M.push(j);continue}if(j=this.tokenizer.reflink(A,this.tokens.links)){A=A.substring(j.raw.length),le=M[M.length-1],le&&j.type==="text"&&le.type==="text"?(le.raw+=j.raw,le.text+=j.text):M.push(j);continue}if(j=this.tokenizer.emStrong(A,je,lt)){A=A.substring(j.raw.length),M.push(j);continue}if(j=this.tokenizer.codespan(A)){A=A.substring(j.raw.length),M.push(j);continue}if(j=this.tokenizer.br(A)){A=A.substring(j.raw.length),M.push(j);continue}if(j=this.tokenizer.del(A)){A=A.substring(j.raw.length),M.push(j);continue}if(j=this.tokenizer.autolink(A,he)){A=A.substring(j.raw.length),M.push(j);continue}if(!this.state.inLink&&(j=this.tokenizer.url(A,he))){A=A.substring(j.raw.length),M.push(j);continue}if(Ie=A,this.options.extensions&&this.options.extensions.startInline&&function(){var nt=1/0,Bn=A.slice(1),Wn=void 0;$.options.extensions.startInline.forEach(function(ks){Wn=ks.call({lexer:this},Bn),typeof Wn=="number"&&Wn>=0&&(nt=Math.min(nt,Wn))}),nt<1/0&&nt>=0&&(Ie=A.substring(0,nt+1))}(),j=this.tokenizer.inlineText(Ie,un)){A=A.substring(j.raw.length),j.raw.slice(-1)!=="_"&&(lt=j.raw.slice(-1)),at=!0,le=M[M.length-1],le&&le.type==="text"?(le.raw+=j.raw,le.text+=j.text):M.push(j);continue}if(A){var en="Infinite loop on byte: "+A.charCodeAt(0);if(this.options.silent){console.error(en);break}else throw new Error(en)}}return M},n(ne,null,[{key:"rules",get:function(){return{block:Oe,inline:be}}}]),ne}(),pe=function(){function ne(Z){this.options=Z||e.defaults}var G=ne.prototype;return G.code=function(A,M,$){var j=(M||"").match(/\S*/)[0];if(this.options.highlight){var le=this.options.highlight(A,j);le!=null&&le!==A&&($=!0,A=le)}return A=A.replace(/\n$/,"")+`
`,j?'<pre><code class="'+this.options.langPrefix+m(j,!0)+'">'+($?A:m(A,!0))+`</code></pre>
`:"<pre><code>"+($?A:m(A,!0))+`</code></pre>
`},G.blockquote=function(A){return`<blockquote>
`+A+`</blockquote>
`},G.html=function(A){return A},G.heading=function(A,M,$,j){if(this.options.headerIds){var le=this.options.headerPrefix+j.slug($);return"<h"+M+' id="'+le+'">'+A+"</h"+M+`>
`}return"<h"+M+">"+A+"</h"+M+`>
`},G.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},G.list=function(A,M,$){var j=M?"ol":"ul",le=M&&$!==1?' start="'+$+'"':"";return"<"+j+le+`>
`+A+"</"+j+`>
`},G.listitem=function(A){return"<li>"+A+`</li>
`},G.checkbox=function(A){return"<input "+(A?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},G.paragraph=function(A){return"<p>"+A+`</p>
`},G.table=function(A,M){return M&&(M="<tbody>"+M+"</tbody>"),`<table>
<thead>
`+A+`</thead>
`+M+`</table>
`},G.tablerow=function(A){return`<tr>
`+A+`</tr>
`},G.tablecell=function(A,M){var $=M.header?"th":"td",j=M.align?"<"+$+' align="'+M.align+'">':"<"+$+">";return j+A+("</"+$+`>
`)},G.strong=function(A){return"<strong>"+A+"</strong>"},G.em=function(A){return"<em>"+A+"</em>"},G.codespan=function(A){return"<code>"+A+"</code>"},G.br=function(){return this.options.xhtml?"<br/>":"<br>"},G.del=function(A){return"<del>"+A+"</del>"},G.link=function(A,M,$){if(A=L(this.options.sanitize,this.options.baseUrl,A),A===null)return $;var j='<a href="'+m(A)+'"';return M&&(j+=' title="'+M+'"'),j+=">"+$+"</a>",j},G.image=function(A,M,$){if(A=L(this.options.sanitize,this.options.baseUrl,A),A===null)return $;var j='<img src="'+A+'" alt="'+$+'"';return M&&(j+=' title="'+M+'"'),j+=this.options.xhtml?"/>":">",j},G.text=function(A){return A},ne}(),Pe=function(){function ne(){}var G=ne.prototype;return G.strong=function(A){return A},G.em=function(A){return A},G.codespan=function(A){return A},G.del=function(A){return A},G.html=function(A){return A},G.text=function(A){return A},G.link=function(A,M,$){return""+$},G.image=function(A,M,$){return""+$},G.br=function(){return""},ne}(),ie=function(){function ne(){this.seen={}}var G=ne.prototype;return G.serialize=function(A){return A.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},G.getNextSafeSlug=function(A,M){var $=A,j=0;if(this.seen.hasOwnProperty($)){j=this.seen[A];do j++,$=A+"-"+j;while(this.seen.hasOwnProperty($))}return M||(this.seen[A]=j,this.seen[$]=0),$},G.slug=function(A,M){M===void 0&&(M={});var $=this.serialize(A);return this.getNextSafeSlug($,M.dryrun)},ne}(),te=function(){function ne(Z){this.options=Z||e.defaults,this.options.renderer=this.options.renderer||new pe,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Pe,this.slugger=new ie}ne.parse=function(A,M){var $=new ne(M);return $.parse(A)},ne.parseInline=function(A,M){var $=new ne(M);return $.parseInline(A)};var G=ne.prototype;return G.parse=function(A,M){M===void 0&&(M=!0);var $="",j,le,Ie,je,Xe,at,lt,on,en,nt,Bn,Wn,ks,qt,ai,Ya,Qa,Hs,ba,Ja=A.length;for(j=0;j<Ja;j++){if(nt=A[j],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[nt.type]&&(ba=this.options.extensions.renderers[nt.type].call({parser:this},nt),ba!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(nt.type))){$+=ba||"";continue}switch(nt.type){case"space":continue;case"hr":{$+=this.renderer.hr();continue}case"heading":{$+=this.renderer.heading(this.parseInline(nt.tokens),nt.depth,b(this.parseInline(nt.tokens,this.textRenderer)),this.slugger);continue}case"code":{$+=this.renderer.code(nt.text,nt.lang,nt.escaped);continue}case"table":{for(on="",lt="",je=nt.header.length,le=0;le<je;le++)lt+=this.renderer.tablecell(this.parseInline(nt.header[le].tokens),{header:!0,align:nt.align[le]});for(on+=this.renderer.tablerow(lt),en="",je=nt.rows.length,le=0;le<je;le++){for(at=nt.rows[le],lt="",Xe=at.length,Ie=0;Ie<Xe;Ie++)lt+=this.renderer.tablecell(this.parseInline(at[Ie].tokens),{header:!1,align:nt.align[Ie]});en+=this.renderer.tablerow(lt)}$+=this.renderer.table(on,en);continue}case"blockquote":{en=this.parse(nt.tokens),$+=this.renderer.blockquote(en);continue}case"list":{for(Bn=nt.ordered,Wn=nt.start,ks=nt.loose,je=nt.items.length,en="",le=0;le<je;le++)ai=nt.items[le],Ya=ai.checked,Qa=ai.task,qt="",ai.task&&(Hs=this.renderer.checkbox(Ya),ks?ai.tokens.length>0&&ai.tokens[0].type==="paragraph"?(ai.tokens[0].text=Hs+" "+ai.tokens[0].text,ai.tokens[0].tokens&&ai.tokens[0].tokens.length>0&&ai.tokens[0].tokens[0].type==="text"&&(ai.tokens[0].tokens[0].text=Hs+" "+ai.tokens[0].tokens[0].text)):ai.tokens.unshift({type:"text",text:Hs}):qt+=Hs),qt+=this.parse(ai.tokens,ks),en+=this.renderer.listitem(qt,Qa,Ya);$+=this.renderer.list(en,Bn,Wn);continue}case"html":{$+=this.renderer.html(nt.text);continue}case"paragraph":{$+=this.renderer.paragraph(this.parseInline(nt.tokens));continue}case"text":{for(en=nt.tokens?this.parseInline(nt.tokens):nt.text;j+1<Ja&&A[j+1].type==="text";)nt=A[++j],en+=`
`+(nt.tokens?this.parseInline(nt.tokens):nt.text);$+=M?this.renderer.paragraph(en):en;continue}default:{var el='Token with "'+nt.type+'" type was not found.';if(this.options.silent){console.error(el);return}else throw new Error(el)}}}return $},G.parseInline=function(A,M){M=M||this.renderer;var $="",j,le,Ie,je=A.length;for(j=0;j<je;j++){if(le=A[j],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[le.type]&&(Ie=this.options.extensions.renderers[le.type].call({parser:this},le),Ie!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(le.type))){$+=Ie||"";continue}switch(le.type){case"escape":{$+=M.text(le.text);break}case"html":{$+=M.html(le.text);break}case"link":{$+=M.link(le.href,le.title,this.parseInline(le.tokens,M));break}case"image":{$+=M.image(le.href,le.title,le.text);break}case"strong":{$+=M.strong(this.parseInline(le.tokens,M));break}case"em":{$+=M.em(this.parseInline(le.tokens,M));break}case"codespan":{$+=M.codespan(le.text);break}case"br":{$+=M.br();break}case"del":{$+=M.del(this.parseInline(le.tokens,M));break}case"text":{$+=M.text(le.text);break}default:{var Xe='Token with "'+le.type+'" type was not found.';if(this.options.silent){console.error(Xe);return}else throw new Error(Xe)}}}return $},ne}();function Y(ne,G,Z){if(typeof ne>"u"||ne===null)throw new Error("marked(): input parameter is undefined or null");if(typeof ne!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(ne)+", string expected");if(typeof G=="function"&&(Z=G,G=null),G=W({},Y.defaults,G||{}),ke(G),Z){var A=G.highlight,M;try{M=_e.lex(ne,G)}catch(je){return Z(je)}var $=function(Xe){var at;if(!Xe)try{G.walkTokens&&Y.walkTokens(M,G.walkTokens),at=te.parse(M,G)}catch(lt){Xe=lt}return G.highlight=A,Xe?Z(Xe):Z(null,at)};if(!A||A.length<3||(delete G.highlight,!M.length))return $();var j=0;Y.walkTokens(M,function(je){je.type==="code"&&(j++,setTimeout(function(){A(je.text,je.lang,function(Xe,at){if(Xe)return $(Xe);at!=null&&at!==je.text&&(je.text=at,je.escaped=!0),j--,j===0&&$()})},0))}),j===0&&$();return}function le(je){if(je.message+=`
Please report this to https://github.com/markedjs/marked.`,G.silent)return"<p>An error occurred:</p><pre>"+m(je.message+"",!0)+"</pre>";throw je}try{var Ie=_e.lex(ne,G);if(G.walkTokens){if(G.async)return Promise.all(Y.walkTokens(Ie,G.walkTokens)).then(function(){return te.parse(Ie,G)}).catch(le);Y.walkTokens(Ie,G.walkTokens)}return te.parse(Ie,G)}catch(je){le(je)}}Y.options=Y.setOptions=function(ne){return W(Y.defaults,ne),l(Y.defaults),Y},Y.getDefaults=a,Y.defaults=e.defaults,Y.use=function(){for(var ne=arguments.length,G=new Array(ne),Z=0;Z<ne;Z++)G[Z]=arguments[Z];var A=W.apply(void 0,[{}].concat(G)),M=Y.defaults.extensions||{renderers:{},childTokens:{}},$;G.forEach(function(j){if(j.extensions&&($=!0,j.extensions.forEach(function(Ie){if(!Ie.name)throw new Error("extension name required");if(Ie.renderer){var je=M.renderers?M.renderers[Ie.name]:null;je?M.renderers[Ie.name]=function(){for(var Xe=arguments.length,at=new Array(Xe),lt=0;lt<Xe;lt++)at[lt]=arguments[lt];var on=Ie.renderer.apply(this,at);return on===!1&&(on=je.apply(this,at)),on}:M.renderers[Ie.name]=Ie.renderer}if(Ie.tokenizer){if(!Ie.level||Ie.level!=="block"&&Ie.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");M[Ie.level]?M[Ie.level].unshift(Ie.tokenizer):M[Ie.level]=[Ie.tokenizer],Ie.start&&(Ie.level==="block"?M.startBlock?M.startBlock.push(Ie.start):M.startBlock=[Ie.start]:Ie.level==="inline"&&(M.startInline?M.startInline.push(Ie.start):M.startInline=[Ie.start]))}Ie.childTokens&&(M.childTokens[Ie.name]=Ie.childTokens)})),j.renderer&&function(){var Ie=Y.defaults.renderer||new pe,je=function(lt){var on=Ie[lt];Ie[lt]=function(){for(var en=arguments.length,nt=new Array(en),Bn=0;Bn<en;Bn++)nt[Bn]=arguments[Bn];var Wn=j.renderer[lt].apply(Ie,nt);return Wn===!1&&(Wn=on.apply(Ie,nt)),Wn}};for(var Xe in j.renderer)je(Xe);A.renderer=Ie}(),j.tokenizer&&function(){var Ie=Y.defaults.tokenizer||new Ue,je=function(lt){var on=Ie[lt];Ie[lt]=function(){for(var en=arguments.length,nt=new Array(en),Bn=0;Bn<en;Bn++)nt[Bn]=arguments[Bn];var Wn=j.tokenizer[lt].apply(Ie,nt);return Wn===!1&&(Wn=on.apply(Ie,nt)),Wn}};for(var Xe in j.tokenizer)je(Xe);A.tokenizer=Ie}(),j.walkTokens){var le=Y.defaults.walkTokens;A.walkTokens=function(Ie){var je=[];return je.push(j.walkTokens.call(this,Ie)),le&&(je=je.concat(le.call(this,Ie))),je}}$&&(A.extensions=M),Y.setOptions(A)})},Y.walkTokens=function(ne,G){for(var Z=[],A=function(){var le=$.value;switch(Z=Z.concat(G.call(Y,le)),le.type){case"table":{for(var Ie=o(le.header),je;!(je=Ie()).done;){var Xe=je.value;Z=Z.concat(Y.walkTokens(Xe.tokens,G))}for(var at=o(le.rows),lt;!(lt=at()).done;)for(var on=lt.value,en=o(on),nt;!(nt=en()).done;){var Bn=nt.value;Z=Z.concat(Y.walkTokens(Bn.tokens,G))}break}case"list":{Z=Z.concat(Y.walkTokens(le.items,G));break}default:Y.defaults.extensions&&Y.defaults.extensions.childTokens&&Y.defaults.extensions.childTokens[le.type]?Y.defaults.extensions.childTokens[le.type].forEach(function(Wn){Z=Z.concat(Y.walkTokens(le[Wn],G))}):le.tokens&&(Z=Z.concat(Y.walkTokens(le.tokens,G)))}},M=o(ne),$;!($=M()).done;)A();return Z},Y.parseInline=function(ne,G){if(typeof ne>"u"||ne===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof ne!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(ne)+", string expected");G=W({},Y.defaults,G||{}),ke(G);try{var Z=_e.lexInline(ne,G);return G.walkTokens&&Y.walkTokens(Z,G.walkTokens),te.parseInline(Z,G)}catch(A){if(A.message+=`
Please report this to https://github.com/markedjs/marked.`,G.silent)return"<p>An error occurred:</p><pre>"+m(A.message+"",!0)+"</pre>";throw A}},Y.Parser=te,Y.parser=te.parse,Y.Renderer=pe,Y.TextRenderer=Pe,Y.Lexer=_e,Y.lexer=_e.lex,Y.Tokenizer=Ue,Y.Slugger=ie,Y.parse=Y;var De=Y.options,Je=Y.setOptions,We=Y.use,Ge=Y.walkTokens,Tt=Y.parseInline,pt=Y,Nt=te.parse,hn=_e.lex;e.Lexer=_e,e.Parser=te,e.Renderer=pe,e.Slugger=ie,e.TextRenderer=Pe,e.Tokenizer=Ue,e.getDefaults=a,e.lexer=hn,e.marked=Y,e.options=De,e.parse=pt,e.parseInline=Tt,e.parser=Nt,e.setOptions=Je,e.use=We,e.walkTokens=Ge,Object.defineProperty(e,"__esModule",{value:!0})})})();Ss.Lexer||exports.Lexer;Ss.Parser||exports.Parser;Ss.Renderer||exports.Renderer;Ss.Slugger||exports.Slugger;Ss.TextRenderer||exports.TextRenderer;Ss.Tokenizer||exports.Tokenizer;Ss.getDefaults||exports.getDefaults;Ss.lexer||exports.lexer;var _c=Ss.marked||exports.marked;Ss.options||exports.options;Ss.parse||exports.parse;Ss.parseInline||exports.parseInline;Ss.parser||exports.parser;Ss.setOptions||exports.setOptions;Ss.use||exports.use;Ss.walkTokens||exports.walkTokens;function n4e(i){return JSON.stringify(i,i4e)}function WP(i){let e=JSON.parse(i);return e=VP(e),e}function i4e(i,e){return e instanceof RegExp?{$mid:2,source:e.source,flags:e.flags}:e}function VP(i,e=0){if(!i||e>200)return i;if(typeof i=="object"){switch(i.$mid){case 1:return Ye.revive(i);case 2:return new RegExp(i.source,i.flags);case 17:return new Date(i.source)}if(i instanceof LD||i instanceof Uint8Array)return i;if(Array.isArray(i))for(let t=0;t<i.length;++t)i[t]=VP(i[t],e+1);else for(const t in i)Object.hasOwnProperty.call(i,t)&&(i[t]=VP(i[t],e+1))}return i}const WE=Object.freeze({image:(i,e,t)=>{let n=[],r=[];return i&&({href:i,dimensions:n}=qFe(i),r.push(`src="${pS(i)}"`)),t&&r.push(`alt="${pS(t)}"`),e&&r.push(`title="${pS(e)}"`),n.length&&(r=r.concat(n)),"<img "+r.join(" ")+">"},paragraph:i=>`<p>${i}</p>`,link:(i,e,t)=>typeof i!="string"?"":(i===t&&(t=BE(t)),e=typeof e=="string"?pS(BE(e)):"",i=BE(i),i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${i}" title="${e||i}">${t}</a>`)});function tI(i,e={},t={}){var n,r;const s=new ae;let o=!1;const a=J5(e),l=function(b){let v;try{v=WP(decodeURIComponent(b))}catch{}return v?(v=Eq(v,C=>{if(i.uris&&i.uris[C])return Ye.revive(i.uris[C])}),encodeURIComponent(JSON.stringify(v))):b},c=function(b,v){const C=i.uris&&i.uris[b];let w=Ye.revive(C);return v?b.startsWith(bt.data+":")?b:(w||(w=Ye.parse(b)),IG.uriToBrowserUri(w).toString(!0)):!w||Ye.parse(b).toString()===w.toString()?b:(w.query&&(w=w.with({query:l(w.query)})),w.toString())},d=new _c.Renderer;d.image=WE.image,d.link=WE.link,d.paragraph=WE.paragraph;const u=[],h=[];if(e.codeBlockRendererSync?d.code=(b,v)=>{const C=BP.nextId(),w=e.codeBlockRendererSync(dV(v),b);return h.push([C,w]),`<div class="code" data-code="${C}">${ST(b)}</div>`}:e.codeBlockRenderer&&(d.code=(b,v)=>{const C=BP.nextId(),w=e.codeBlockRenderer(dV(v),b);return u.push(w.then(S=>[C,S])),`<div class="code" data-code="${C}">${ST(b)}</div>`}),e.actionHandler){const b=function(w){let S=w.target;if(!(S.tagName!=="A"&&(S=S.parentElement,!S||S.tagName!=="A")))try{let L=S.dataset.href;L&&(i.baseUri&&(L=VE(Ye.from(i.baseUri),L)),e.actionHandler.callback(L,w))}catch(L){ut(L)}finally{w.preventDefault()}},v=e.actionHandler.disposables.add(new Dt(a,"click")),C=e.actionHandler.disposables.add(new Dt(a,"auxclick"));e.actionHandler.disposables.add(Re.any(v.event,C.event)(w=>{const S=new Qo(w);!S.leftButton&&!S.middleButton||b(S)})),e.actionHandler.disposables.add(ee(a,"keydown",w=>{const S=new kn(w);!S.equals(10)&&!S.equals(3)||b(S)}))}i.supportHtml||(t.sanitizer=b=>(i.isTrusted?b.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?b:"",t.sanitize=!0,t.silent=!0),t.renderer=d;let f=(n=i.value)!==null&&n!==void 0?n:"";f.length>1e5&&(f=`${f.substr(0,1e5)}…`),i.supportThemeIcons&&(f=UFe(f));let g;if(e.fillInIncompleteTokens){const b=Object.assign(Object.assign({},_c.defaults),t),v=_c.lexer(f,b),C=u4e(v);g=_c.parser(C,b)}else g=_c.parse(f,t);i.supportThemeIcons&&(g=Th(g).map(v=>typeof v=="string"?v:v.outerHTML).join(""));const y=new DOMParser().parseFromString(HP(i,g),"text/html");if(y.body.querySelectorAll("img").forEach(b=>{const v=b.getAttribute("src");if(v){let C=v;try{i.baseUri&&(C=VE(Ye.from(i.baseUri),C))}catch{}b.src=c(C,!0)}}),y.body.querySelectorAll("a").forEach(b=>{const v=b.getAttribute("href");if(b.setAttribute("href",""),!v||/^data:|javascript:/i.test(v)||/^command:/i.test(v)&&!i.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(v))b.replaceWith(...b.childNodes);else{let C=c(v,!1);i.baseUri&&(C=VE(Ye.from(i.baseUri),v)),b.dataset.href=C}}),a.innerHTML=HP(i,y.body.innerHTML),u.length>0)Promise.all(u).then(b=>{var v,C;if(o)return;const w=new Map(b),S=a.querySelectorAll("div[data-code]");for(const L of S){const T=w.get((v=L.dataset.code)!==null&&v!==void 0?v:"");T&&br(L,T)}(C=e.asyncRenderCallback)===null||C===void 0||C.call(e)});else if(h.length>0){const b=new Map(h),v=a.querySelectorAll("div[data-code]");for(const C of v){const w=b.get((r=C.dataset.code)!==null&&r!==void 0?r:"");w&&br(C,w)}}if(e.asyncRenderCallback)for(const b of a.getElementsByTagName("img")){const v=s.add(ee(b,"load",()=>{v.dispose(),e.asyncRenderCallback()}))}return{element:a,dispose:()=>{o=!0,s.dispose()}}}function dV(i){if(!i)return"";const e=i.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:i}function VE(i,e){return/^\w[\w\d+.-]*:/.test(e)?e:i.path.endsWith("/")?lW(i,e).toString():lW($D(i),e).toString()}function HP(i,e){const{config:t,allowedSchemes:n}=s4e(i);kG("uponSanitizeAttribute",(s,o)=>{if(o.attrName==="style"||o.attrName==="class"){if(s.tagName==="SPAN"){if(o.attrName==="style"){o.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?$/.test(o.attrValue);return}else if(o.attrName==="class"){o.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(o.attrValue);return}}o.keepAttr=!1;return}});const r=rLe(n);try{return TG(e,Object.assign(Object.assign({},t),{RETURN_TRUSTED_TYPE:!0}))}finally{LG("uponSanitizeAttribute"),r.dispose()}}const r4e=["align","autoplay","alt","class","controls","data-code","data-href","height","href","loop","muted","playsinline","poster","src","style","target","title","width","start"];function s4e(i){const e=[bt.http,bt.https,bt.mailto,bt.data,bt.file,bt.vscodeFileResource,bt.vscodeRemote,bt.vscodeRemoteResource];return i.isTrusted&&e.push(bt.command),{config:{ALLOWED_TAGS:[...sLe],ALLOWED_ATTR:r4e,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}function o4e(i){return typeof i=="string"?i:a4e(i)}function a4e(i){var e;let t=(e=i.value)!==null&&e!==void 0?e:"";t.length>1e5&&(t=`${t.substr(0,1e5)}…`);const n=_c.parse(t,{renderer:c4e.value}).replace(/&(#\d+|[a-zA-Z]+);/g,r=>{var s;return(s=l4e.get(r))!==null&&s!==void 0?s:r});return HP({isTrusted:!1},n).toString()}const l4e=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]),c4e=new _f(()=>{const i=new _c.Renderer;return i.code=e=>e,i.blockquote=e=>e,i.html=e=>"",i.heading=(e,t,n)=>e+`
`,i.hr=()=>"",i.list=(e,t)=>e,i.listitem=e=>e+`
`,i.paragraph=e=>e+`
`,i.table=(e,t)=>e+t+`
`,i.tablerow=e=>e,i.tablecell=(e,t)=>e+" ",i.strong=e=>e,i.em=e=>e,i.codespan=e=>e,i.br=()=>`
`,i.del=e=>e,i.image=(e,t,n)=>"",i.text=e=>e,i.link=(e,t,n)=>n,i});function tB(i){let e="";return i.forEach(t=>{e+=t.raw}),e}function d4e(i){for(const e of i.tokens)if(e.type==="text"){const t=e.raw.split(`
`),n=t[t.length-1];if(n.includes("`"))return f4e(i);if(n.includes("**"))return b4e(i);if(n.match(/\*\w/))return g4e(i);if(n.match(/(^|\s)__\w/))return v4e(i);if(n.match(/(^|\s)_\w/))return p4e(i);if(n.match(/(^|\s)\[.*\]\(\w*/))return m4e(i);if(n.match(/(^|\s)\[\w/))return _4e(i)}}function u4e(i){let e,t;for(e=0;e<i.length;e++){const n=i[e];if(n.type==="paragraph"&&n.raw.match(/(\n|^)```/)){t=h4e(i.slice(e));break}if(n.type==="paragraph"&&n.raw.match(/(\n|^)\|/)){t=y4e(i.slice(e));break}if(e===i.length-1&&n.type==="paragraph"){const r=d4e(n);if(r){t=[r];break}}}if(t){const n=[...i.slice(0,e),...t];return n.links=i.links,n}return i}function h4e(i){const e=tB(i);return _c.lexer(e+"\n```")}function f4e(i){return Fp(i,"`")}function g4e(i){return Fp(i,"*")}function p4e(i){return Fp(i,"_")}function m4e(i){return Fp(i,")")}function _4e(i){return Fp(i,"](about:blank)")}function b4e(i){return Fp(i,"**")}function v4e(i){return Fp(i,"__")}function Fp(i,e){const t=tB(Array.isArray(i)?i:[i]);return _c.lexer(t+e)[0]}function y4e(i){const e=tB(i),t=e.split(`
`);let n,r=!1;for(let s=0;s<t.length;s++){const o=t[s].trim();if(typeof n>"u"&&o.match(/^\s*\|/)){const a=o.match(/(\|[^\|]+)(?=\||$)/g);a&&(n=a.length)}else if(typeof n=="number")if(o.match(/^\s*\|/)){if(s!==t.length-1)return;r=!0}else return}if(typeof n=="number"&&n>0){const s=r?t.slice(0,-1).join(`
`):e,o=!!s.match(/\|\s*$/),a=s+(o?"":"|")+`
|${" --- |".repeat(n)}`;return _c.lexer(a)}}class C4e{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(r=>r.splice(e,t,n))}}class hm extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function uV(i,e){const t=[];for(const n of e){if(i.start>=n.range.end)continue;if(i.end<n.range.start)break;const r=Or.intersect(i,n.range);Or.isEmpty(r)||t.push({range:r,size:n.size})}return t}function UP({start:i,end:e},t){return{start:i+t,end:e+t}}function w4e(i){const e=[];let t=null;for(const n of i){const r=n.range.start,s=n.range.end,o=n.size;if(t&&o===t.size){t.range.end=s;continue}t={range:{start:r,end:s},size:o},e.push(t)}return e}function S4e(...i){return w4e(i.reduce((e,t)=>e.concat(t),[]))}class hV{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,n=[]){const r=n.length-t,s=uV({start:0,end:e},this.groups),o=uV({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:UP(l.range,r),size:l.size})),a=n.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=S4e(s,a,o),this._size=this._paddingTop+this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,n=this._paddingTop;for(const r of this.groups){const s=r.range.end-r.range.start,o=n+s*r.size;if(e<o)return t+Math.floor((e-n)/r.size);t+=s,n=o}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(const r of this.groups){const s=r.range.end-r.range.start,o=n+s;if(e<o)return this._paddingTop+t+(e-n)*r.size;t+=s*r.size,n=o}return-1}}function x4e(i){var e;try{(e=i.parentElement)===null||e===void 0||e.removeChild(i)}catch{}}class T4e{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),n=!1;if(t)n=this.transactionNodesPendingRemoval.has(t.domNode),n&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const r=ce(".monaco-list-row"),o=this.getRenderer(e).renderTemplate(r);t={domNode:r,templateId:e,templateData:o}}return{row:t,isReusingConnectedDomNode:n}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(n).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),x4e(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var wu=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s};const Ef={CurrentDragAndDropData:void 0},Jl={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(i){return[i]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class ew{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class k4e{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class L4e{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}}function D4e(i,e){return Array.isArray(i)&&Array.isArray(e)?fi(i,e):i===e}class I4e{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,r)=>r,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}class ma{get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:KR(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,n,r=Jl){var s,o,a,l,c,d,u,h,f,g,m,y,b;if(this.virtualDelegate=t,this.domId=`list_id_${++ma.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Ha(50),this.splicing=!1,this.dragOverAnimationStopDisposable=q.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=q.None,this.onDragLeaveTimeout=q.None,this.disposables=new ae,this._onDidChangeContentHeight=new H,this._onDidChangeContentWidth=new H,this._horizontalScrolling=!1,r.horizontalScrolling&&r.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new hV((s=r.paddingTop)!==null&&s!==void 0?s:0);for(const C of n)this.renderers.set(C.templateId,C);this.cache=this.disposables.add(new T4e(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof r.mouseSupport=="boolean"?r.mouseSupport:!0),this._horizontalScrolling=(o=r.horizontalScrolling)!==null&&o!==void 0?o:Jl.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof r.paddingBottom>"u"?0:r.paddingBottom,this.accessibilityProvider=new I4e(r.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",((a=r.transformOptimization)!==null&&a!==void 0?a:Jl.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(vn.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new $C({forceIntegerValues:!0,smoothScrollDuration:(l=r.smoothScrolling)!==null&&l!==void 0&&l?125:0,scheduleAtNextAnimationFrame:C=>la(C)})),this.scrollableElement=this.disposables.add(new _5(this.rowsContainer,{alwaysConsumeMouseWheel:(c=r.alwaysConsumeMouseWheel)!==null&&c!==void 0?c:Jl.alwaysConsumeMouseWheel,horizontal:1,vertical:(d=r.verticalScrollMode)!==null&&d!==void 0?d:Jl.verticalScrollMode,useShadows:(u=r.useShadows)!==null&&u!==void 0?u:Jl.useShadows,mouseWheelScrollSensitivity:r.mouseWheelScrollSensitivity,fastScrollSensitivity:r.fastScrollSensitivity,scrollByPage:r.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(ee(this.rowsContainer,yn.Change,C=>this.onTouchChange(C))),this.disposables.add(ee(this.scrollableElement.getDomNode(),"scroll",C=>C.target.scrollTop=0)),this.disposables.add(ee(this.domNode,"dragover",C=>this.onDragOver(this.toDragEvent(C)))),this.disposables.add(ee(this.domNode,"drop",C=>this.onDrop(this.toDragEvent(C)))),this.disposables.add(ee(this.domNode,"dragleave",C=>this.onDragLeave(this.toDragEvent(C)))),this.disposables.add(ee(this.domNode,"dragend",C=>this.onDragEnd(C))),this.setRowLineHeight=(h=r.setRowLineHeight)!==null&&h!==void 0?h:Jl.setRowLineHeight,this.setRowHeight=(f=r.setRowHeight)!==null&&f!==void 0?f:Jl.setRowHeight,this.supportDynamicHeights=(g=r.supportDynamicHeights)!==null&&g!==void 0?g:Jl.supportDynamicHeights,this.dnd=(m=r.dnd)!==null&&m!==void 0?m:this.disposables.add(Jl.dnd),this.layout((y=r.initialSize)===null||y===void 0?void 0:y.height,(b=r.initialSize)===null||b===void 0?void 0:b.width)}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t=Object.assign(Object.assign({},t??{}),{scrollByPage:e.scrollByPage})),e.mouseWheelScrollSensitivity!==void 0&&(t=Object.assign(Object.assign({},t??{}),{mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity})),e.fastScrollSensitivity!==void 0&&(t=Object.assign(Object.assign({},t??{}),{fastScrollSensitivity:e.fastScrollSensitivity})),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){const n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(n,Math.max(0,this.lastRenderTop+r),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){const r=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s={start:e,end:e+t},o=Or.intersect(r,s),a=new Map;for(let L=o.end-1;L>=o.start;L--){const T=this.items[L];if(T.dragStartDisposable.dispose(),T.checkedDisposable.dispose(),T.row){let I=a.get(T.templateId);I||(I=[],a.set(T.templateId,I));const R=this.renderers.get(T.templateId);R&&R.disposeElement&&R.disposeElement(T.element,L,T.row.templateData,T.size),I.push(T.row)}T.row=null}const l={start:e+t,end:this.items.length},c=Or.intersect(l,r),d=Or.relativeComplement(l,r),u=n.map(L=>({id:String(this.itemId++),element:L,templateId:this.virtualDelegate.getTemplateId(L),size:this.virtualDelegate.getHeight(L),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(L),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:q.None,checkedDisposable:q.None}));let h;e===0&&t>=this.items.length?(this.rangeMap=new hV(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,u),h=this.items,this.items=u):(this.rangeMap.splice(e,t,u),h=this.items.splice(e,t,...u));const f=n.length-t,g=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),m=UP(c,f),y=Or.intersect(g,m);for(let L=y.start;L<y.end;L++)this.updateItemInDOM(this.items[L],L);const b=Or.relativeComplement(m,g);for(const L of b)for(let T=L.start;T<L.end;T++)this.removeItemFromDOM(T);const v=d.map(L=>UP(L,f)),w=[{start:e,end:e+n.length},...v].map(L=>Or.intersect(g,L)),S=this.getNextToLastElement(w);for(const L of w)for(let T=L.start;T<L.end;T++){const I=this.items[T],R=a.get(I.templateId),B=R==null?void 0:R.pop();this.insertItemInDOM(T,S,B)}for(const L of a.values())for(const T of L)this.cache.release(T);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),h.map(L=>L.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=la(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){const e=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),t=this.rangeMap.positionAt(e.start),n=this.rangeMap.positionAt(e.start+1);return n!==-1&&(n-t)/2+t<this.scrollTop?e.start+1:e.start}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const n={height:typeof e=="number"?e:Zke(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:KR(this.domNode)})}render(e,t,n,r,s,o=!1){const a=this.getRenderRange(t,n),l=Or.relativeComplement(a,e),c=Or.relativeComplement(e,a),d=this.getNextToLastElement(l);if(o){const u=Or.intersect(e,a);for(let h=u.start;h<u.end;h++)this.updateItemInDOM(this.items[h],h)}this.cache.transact(()=>{for(const u of c)for(let h=u.start;h<u.end;h++)this.removeItemFromDOM(h);for(const u of l)for(let h=u.start;h<u.end;h++)this.insertItemInDOM(h,d)}),r!==void 0&&(this.rowsContainer.style.left=`-${r}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&s!==void 0&&(this.rowsContainer.style.width=`${Math.max(s,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t,n){const r=this.items[e];let s=!1;if(!r.row)if(n)r.row=n;else{const d=this.cache.alloc(r.templateId);r.row=d.row,s=d.isReusingConnectedDomNode}const o=this.accessibilityProvider.getRole(r.element)||"listitem";r.row.domNode.setAttribute("role",o);const a=this.accessibilityProvider.isChecked(r.element);if(typeof a=="boolean")r.row.domNode.setAttribute("aria-checked",String(!!a));else if(a){const d=u=>r.row.domNode.setAttribute("aria-checked",String(!!u));d(a.value),r.checkedDisposable=a.onDidChange(d)}(s||!r.row.domNode.parentElement)&&(t?this.rowsContainer.insertBefore(r.row.domNode,t):this.rowsContainer.appendChild(r.row.domNode)),this.updateItemInDOM(r,e);const l=this.renderers.get(r.templateId);if(!l)throw new Error(`No renderer found for template id ${r.templateId}`);l==null||l.renderElement(r.element,e,r.row.templateData,r.size);const c=this.dnd.getDragURI(r.element);r.dragStartDisposable.dispose(),r.row.domNode.draggable=!!c,c&&(r.dragStartDisposable=ee(r.row.domNode,"dragstart",d=>this.onDragStart(r.element,c,d))),this.horizontalScrolling&&(this.measureItemWidth(r),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=KR(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return Re.map(this.disposables.add(new Dt(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return Re.map(this.disposables.add(new Dt(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return Re.filter(Re.map(this.disposables.add(new Dt(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return Re.map(this.disposables.add(new Dt(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return Re.map(this.disposables.add(new Dt(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return Re.map(this.disposables.add(new Dt(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return Re.any(Re.map(this.disposables.add(new Dt(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),Re.map(this.disposables.add(new Dt(this.domNode,yn.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return Re.map(this.disposables.add(new Dt(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return Re.map(this.disposables.add(new Dt(this.rowsContainer,yn.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],r=n&&n.element;return{browserEvent:e,index:t,element:r}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],r=n&&n.element;return{browserEvent:e,index:t,element:r}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],r=n&&n.element;return{browserEvent:e,index:t,element:r}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],r=n&&n.element;return{browserEvent:e,index:t,element:r}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){var r,s;if(!n.dataTransfer)return;const o=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(by.TEXT,t),n.dataTransfer.setDragImage){let a;this.dnd.getDragLabel&&(a=this.dnd.getDragLabel(o,n)),typeof a>"u"&&(a=String(o.length));const l=ce(".monaco-drag-image");l.textContent=a;const d=(u=>{for(;u&&!u.classList.contains("monaco-workbench");)u=u.parentElement;return u||document.body})(this.domNode);d.appendChild(l),n.dataTransfer.setDragImage(l,-10,-10),setTimeout(()=>d.removeChild(l),0)}this.domNode.classList.add("dragging"),this.currentDragData=new ew(o),Ef.CurrentDragAndDropData=new k4e(o),(s=(r=this.dnd).onDragStart)===null||s===void 0||s.call(r,this.currentDragData,n)}onDragOver(e){var t;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),Ef.CurrentDragAndDropData&&Ef.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(Ef.CurrentDragAndDropData)this.currentDragData=Ef.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new L4e}const n=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof n=="boolean"?n:n.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof n!="boolean"&&n.effect===0?"copy":"move";let r;if(typeof n!="boolean"&&n.feedback?r=n.feedback:typeof e.index>"u"?r=[-1]:r=[e.index],r=Mh(r).filter(s=>s>=-1&&s<this.length).sort((s,o)=>s-o),r=r[0]===-1?[-1]:r,D4e(this.currentDragFeedback,r))return!0;if(this.currentDragFeedback=r,this.currentDragFeedbackDisposable.dispose(),r[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=st(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(const s of r){const o=this.items[s];o.dropTarget=!0,(t=o.row)===null||t===void 0||t.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=st(()=>{var s;for(const o of r){const a=this.items[o];a.dropTarget=!1,(s=a.row)===null||s===void 0||s.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=Hh(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&((n=(t=this.dnd).onDragLeave)===null||n===void 0||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,Ef.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){var t,n;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,Ef.CurrentDragAndDropData=void 0,(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=q.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=EG(this.domNode).top;this.dragOverAnimationDisposable=iLe(this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=Hh(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;n instanceof HTMLElement&&n!==this.rowsContainer&&t.contains(n);){const r=n.getAttribute("data-index");if(r){const s=Number(r);if(!isNaN(s))return s}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){const r=this.getRenderRange(e,t);let s,o;e===this.elementTop(r.start)?(s=r.start,o=0):r.end-r.start>1&&(s=r.start+1,o=this.elementTop(s)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let d=l.start;d<l.end;d++){const u=this.probeDynamicHeight(d);u!==0&&this.rangeMap.splice(d,1,[this.items[d]]),a+=u,c=c||u!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const d=Or.relativeComplement(r,l);for(const h of d)for(let f=h.start;f<h.end;f++)this.items[f].row&&this.removeItemFromDOM(f);const u=Or.relativeComplement(l,r);for(const h of u)for(let f=h.start;f<h.end;f++){const g=f+1,m=g<this.items.length?this.items[g].row:null,y=m?m.domNode:null;this.insertItemInDOM(f,y)}for(let h=l.start;h<l.end;h++)this.items[h].row&&this.updateItemInDOM(this.items[h],h);if(typeof s=="number"){const h=this.scrollable.getFutureScrollPosition().scrollTop-e,f=this.elementTop(s)-o+h;this.setScrollTop(f,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){var t,n,r;const s=this.items[e];if(this.virtualDelegate.getDynamicHeight){const c=this.virtualDelegate.getDynamicHeight(s.element);if(c!==null){const d=s.size;return s.size=c,s.lastDynamicHeightWidth=this.renderWidth,c-d}}if(!s.hasDynamicHeight||s.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(s.element))return 0;const o=s.size;if(s.row)return s.row.domNode.style.height="",s.size=s.row.domNode.offsetHeight,s.lastDynamicHeightWidth=this.renderWidth,s.size-o;const{row:a}=this.cache.alloc(s.templateId);a.domNode.style.height="",this.rowsContainer.appendChild(a.domNode);const l=this.renderers.get(s.templateId);if(!l)throw new Ti("Missing renderer for templateId: "+s.templateId);return l.renderElement(s.element,e,a.templateData,void 0),s.size=a.domNode.offsetHeight,(t=l.disposeElement)===null||t===void 0||t.call(l,s.element,e,a.templateData,void 0),(r=(n=this.virtualDelegate).setDynamicHeight)===null||r===void 0||r.call(n,s.element,s.size),s.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(a.domNode),this.cache.release(a),s.size-o}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const n=this.items[t.end];return!n||!n.row?null:n.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e,t;for(const n of this.items)if(n.dragStartDisposable.dispose(),n.checkedDisposable.dispose(),n.row){const r=this.renderers.get(n.row.templateId);r&&((e=r.disposeElement)===null||e===void 0||e.call(r,n.element,-1,n.row.templateData,void 0),r.disposeTemplate(n.row.templateData))}this.items=[],this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),(t=this.dragOverAnimationDisposable)===null||t===void 0||t.dispose(),this.disposables.dispose()}}ma.InstanceCount=0;wu([Ci],ma.prototype,"onMouseClick",null);wu([Ci],ma.prototype,"onMouseDblClick",null);wu([Ci],ma.prototype,"onMouseMiddleClick",null);wu([Ci],ma.prototype,"onMouseDown",null);wu([Ci],ma.prototype,"onMouseOver",null);wu([Ci],ma.prototype,"onMouseOut",null);wu([Ci],ma.prototype,"onContextMenu",null);wu([Ci],ma.prototype,"onTouchStart",null);wu([Ci],ma.prototype,"onTap",null);var Bp=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},fV=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class R4e{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,n){const r=this.renderedElements.findIndex(s=>s.templateData===n);if(r>=0){const s=this.renderedElements[r];this.trait.unrender(n),s.index=t}else{const s={index:t,templateData:n};this.renderedElements.push(s)}this.trait.renderIndex(t,n)}splice(e,t,n){const r=[];for(const s of this.renderedElements)s.index<e?r.push(s):s.index>=e+t&&r.push({index:s.index+n-t,templateData:s.templateData});this.renderedElements=r}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}}let gk=class{get name(){return this._trait}get renderer(){return new R4e(this)}constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new H,this.onChange=this._onChange.event}splice(e,t,n){var r;t=Math.max(0,Math.min(t,this.length-e));const s=n.length-t,o=e+t,a=[];let l=0;for(;l<this.sortedIndexes.length&&this.sortedIndexes[l]<e;)a.push(this.sortedIndexes[l++]);for(let d=0;d<n.length;d++)n[d]&&a.push(d+e);for(;l<this.sortedIndexes.length&&this.sortedIndexes[l]>=o;)a.push(this.sortedIndexes[l++]+s);const c=this.length+s;if(this.sortedIndexes.length>0&&a.length===0&&c>0){const d=(r=this.sortedIndexes.find(u=>u>=e))!==null&&r!==void 0?r:c-1;a.push(Math.min(d,c-1))}this.renderer.splice(e,t,n.length),this._set(a,a),this.length=c}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(pV),t)}_set(e,t,n){const r=this.indexes,s=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const o=jP(s,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:n}),r}get(){return this.indexes}contains(e){return D0(this.sortedIndexes,e,pV)>=0}dispose(){an(this._onChange)}};Bp([Ci],gk.prototype,"renderer",null);class E4e extends gk{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class HE{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,new Array(n.length).fill(!1));const r=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(r.length===0)return this.trait.splice(e,t,new Array(n.length).fill(!1));const s=new Set(r),o=n.map(a=>s.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,o)}}function kh(i){return i.tagName==="INPUT"||i.tagName==="TEXTAREA"}function Xm(i){return i.classList.contains("monaco-editor")?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:Xm(i.parentElement)}function aY(i){return i.tagName==="A"&&i.classList.contains("monaco-button")||i.tagName==="DIV"&&i.classList.contains("monaco-button-dropdown")?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:aY(i.parentElement)}class lY{get onKeyDown(){return Re.chain(this.disposables.add(new Dt(this.view.domNode,"keydown")).event,e=>e.filter(t=>!kh(t.target)).map(t=>new kn(t)))}constructor(e,t,n){this.list=e,this.view=t,this.disposables=new ae,this.multipleSelectionDisposables=new ae,this.multipleSelectionSupport=n.multipleSelectionSupport,this.disposables.add(this.onKeyDown(r=>{switch(r.keyCode){case 3:return this.onEnter(r);case 16:return this.onUpArrow(r);case 18:return this.onDownArrow(r);case 11:return this.onPageUpArrow(r);case 12:return this.onPageDownArrow(r);case 9:return this.onEscape(r);case 31:this.multipleSelectionSupport&&(Ot?r.metaKey:r.ctrlKey)&&this.onCtrlA(r)}}))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(cs(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}Bp([Ci],lY.prototype,"onKeyDown",null);var bc;(function(i){i[i.Automatic=0]="Automatic",i[i.Trigger=1]="Trigger"})(bc||(bc={}));var Ym;(function(i){i[i.Idle=0]="Idle",i[i.Typing=1]="Typing"})(Ym||(Ym={}));const N4e=new class{mightProducePrintableCharacter(i){return i.ctrlKey||i.metaKey||i.altKey?!1:i.keyCode>=31&&i.keyCode<=56||i.keyCode>=21&&i.keyCode<=30||i.keyCode>=98&&i.keyCode<=107||i.keyCode>=85&&i.keyCode<=95}};class A4e{constructor(e,t,n,r,s){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.keyboardNavigationEventFilter=r,this.delegate=s,this.enabled=!1,this.state=Ym.Idle,this.mode=bc.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new ae,this.disposables=new ae,this.updateOptions(e.options)}updateOptions(e){var t,n;!((t=e.typeNavigationEnabled)!==null&&t!==void 0)||t?this.enable():this.disable(),this.mode=(n=e.typeNavigationMode)!==null&&n!==void 0?n:bc.Automatic}enable(){if(this.enabled)return;let e=!1;const t=Re.chain(this.enabledDisposables.add(new Dt(this.view.domNode,"keydown")).event,s=>s.filter(o=>!kh(o.target)).filter(()=>this.mode===bc.Automatic||this.triggered).map(o=>new kn(o)).filter(o=>e||this.keyboardNavigationEventFilter(o)).filter(o=>this.delegate.mightProducePrintableCharacter(o)).forEach(o=>_t.stop(o,!0)).map(o=>o.browserEvent.key)),n=Re.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);Re.reduce(Re.any(t,n),(s,o)=>o===null?null:(s||"")+o,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),n(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),n(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const n=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));n&&jr(n)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=Ym.Idle,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,r=this.state===Ym.Idle?1:0;this.state=Ym.Typing;for(let s=0;s<this.list.length;s++){const o=(n+s+r)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if(vy(e,l)){this.previouslyFocused=n,this.list.setFocus([o]),this.list.reveal(o);return}const c=RFe(e,l);if(c&&c[0].end-c[0].start>1&&c.length===1){this.previouslyFocused=n,this.list.setFocus([o]),this.list.reveal(o);return}}}else if(typeof l>"u"||vy(e,l)){this.previouslyFocused=n,this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class P4e{constructor(e,t){this.list=e,this.view=t,this.disposables=new ae;const n=Re.chain(this.disposables.add(new Dt(t.domNode,"keydown")).event,s=>s.filter(o=>!kh(o.target)).map(o=>new kn(o)));Re.chain(n,s=>s.filter(o=>o.keyCode===2&&!o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.altKey))(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const r=n.querySelector("[tabIndex]");if(!r||!(r instanceof HTMLElement)||r.tabIndex===-1)return;const s=window.getComputedStyle(r);s.visibility==="hidden"||s.display==="none"||(e.preventDefault(),e.stopPropagation(),r.focus())}dispose(){this.disposables.dispose()}}function cY(i){return Ot?i.browserEvent.metaKey:i.browserEvent.ctrlKey}function dY(i){return i.browserEvent.shiftKey}function M4e(i){return i instanceof MouseEvent&&i.button===2}const gV={isSelectionSingleChangeEvent:cY,isSelectionRangeChangeEvent:dY};class uY{constructor(e){this.list=e,this.disposables=new ae,this._onPointer=new H,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||gV),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(vn.addTarget(e.getHTMLElement()))),Re.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||gV))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){Xm(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(kh(e.browserEvent.target)||Xm(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||kh(e.browserEvent.target)||Xm(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),M4e(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(kh(e.browserEvent.target)||Xm(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof n>"u"){const d=this.list.getFocus()[0];n=d??t,this.list.setAnchor(n)}const r=Math.min(n,t),s=Math.max(n,t),o=cs(r,s+1),a=this.list.getSelection(),l=B4e(jP(a,[n]),n);if(l.length===0)return;const c=jP(o,W4e(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const r=this.list.getSelection(),s=r.filter(o=>o!==t);this.list.setFocus([t]),this.list.setAnchor(t),r.length===s.length?this.list.setSelection([...s,t],e.browserEvent):this.list.setSelection(s,e.browserEvent)}}dispose(){this.disposables.dispose()}}class hY{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){var t,n;const r=this.selectorSuffix&&`.${this.selectorSuffix}`,s=[];e.listBackground&&s.push(`.monaco-list${r} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(s.push(`.monaco-list${r}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),s.push(`.monaco-list${r}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&s.push(`.monaco-list${r}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(s.push(`.monaco-list${r}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),s.push(`.monaco-list${r}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&s.push(`.monaco-list${r}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&s.push(`.monaco-list${r}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&s.push(`
				.monaco-drag-image,
				.monaco-list${r}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&s.push(`
				.monaco-drag-image,
				.monaco-list${r}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(s.push(`.monaco-list${r} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),s.push(`.monaco-list${r} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&s.push(`.monaco-list${r} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(s.push(`.monaco-list${r} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),s.push(`.monaco-list${r} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(s.push(`.monaco-list${r} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),s.push(`.monaco-list${r} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&s.push(`.monaco-list${r} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&s.push(`.monaco-list${r}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&s.push(`.monaco-list${r}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const o=Sg(e.listFocusAndSelectionOutline,Sg(e.listSelectionOutline,(t=e.listFocusOutline)!==null&&t!==void 0?t:""));o&&s.push(`.monaco-list${r}:focus .monaco-list-row.focused.selected { outline: 1px solid ${o}; outline-offset: -1px;}`),e.listFocusOutline&&s.push(`
				.monaco-drag-image,
				.monaco-list${r}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${r}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);const a=Sg(e.listSelectionOutline,(n=e.listInactiveFocusOutline)!==null&&n!==void 0?n:"");a&&s.push(`.monaco-list${r} .monaco-list-row.focused.selected { outline: 1px dotted ${a}; outline-offset: -1px; }`),e.listSelectionOutline&&s.push(`.monaco-list${r} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&s.push(`.monaco-list${r} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&s.push(`.monaco-list${r} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&s.push(`
				.monaco-list${r}.drop-target,
				.monaco-list${r} .monaco-list-rows.drop-target,
				.monaco-list${r} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.tableColumnsBorder&&s.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&s.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=s.join(`
`)}}const O4e={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropBackground:"#383B3D",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:K.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:K.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:K.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0},F4e={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function B4e(i,e){const t=i.indexOf(e);if(t===-1)return[];const n=[];let r=t-1;for(;r>=0&&i[r]===e-(t-r);)n.push(i[r--]);for(n.reverse(),r=t;r<i.length&&i[r]===e+(r-t);)n.push(i[r++]);return n}function jP(i,e){const t=[];let n=0,r=0;for(;n<i.length||r<e.length;)if(n>=i.length)t.push(e[r++]);else if(r>=e.length)t.push(i[n++]);else if(i[n]===e[r]){t.push(i[n]),n++,r++;continue}else i[n]<e[r]?t.push(i[n++]):t.push(e[r++]);return t}function W4e(i,e){const t=[];let n=0,r=0;for(;n<i.length||r<e.length;)if(n>=i.length)t.push(e[r++]);else if(r>=e.length)t.push(i[n++]);else if(i[n]===e[r]){n++,r++;continue}else i[n]<e[r]?t.push(i[n++]):r++;return t}const pV=(i,e)=>i-e;class V4e{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,r){let s=0;for(const o of this.renderers)o.renderElement(e,t,n[s++],r)}disposeElement(e,t,n,r){var s;let o=0;for(const a of this.renderers)(s=a.disposeElement)===null||s===void 0||s.call(a,e,t,n[o],r),o+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}class H4e{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,n){const r=this.accessibilityProvider.getAriaLabel(e);r?n.setAttribute("aria-label",r):n.removeAttribute("aria-label");const s=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof s=="number"?n.setAttribute("aria-level",`${s}`):n.removeAttribute("aria-level")}disposeTemplate(e){}}class U4e{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var n,r;(r=(n=this.dnd).onDragStart)===null||r===void 0||r.call(n,e,t)}onDragOver(e,t,n,r){return this.dnd.onDragOver(e,t,n,r)}onDragLeave(e,t,n,r){var s,o;(o=(s=this.dnd).onDragLeave)===null||o===void 0||o.call(s,e,t,n,r)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}drop(e,t,n,r){this.dnd.drop(e,t,n,r)}dispose(){this.dnd.dispose()}}class Ga{get onDidChangeFocus(){return Re.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return Re.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=Re.chain(this.disposables.add(new Dt(this.view.domNode,"keydown")).event,s=>s.map(o=>new kn(o)).filter(o=>e=o.keyCode===58||o.shiftKey&&o.keyCode===68).map(o=>_t.stop(o,!0)).filter(()=>!1)),n=Re.chain(this.disposables.add(new Dt(this.view.domNode,"keyup")).event,s=>s.forEach(()=>e=!1).map(o=>new kn(o)).filter(o=>o.keyCode===58||o.shiftKey&&o.keyCode===68).map(o=>_t.stop(o,!0)).map(({browserEvent:o})=>{const a=this.getFocus(),l=a.length?a[0]:void 0,c=typeof l<"u"?this.view.element(l):void 0,d=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:c,anchor:d,browserEvent:o}})),r=Re.chain(this.view.onContextMenu,s=>s.filter(o=>!e).map(({element:o,index:a,browserEvent:l})=>({element:o,index:a,anchor:new Qo(l),browserEvent:l})));return Re.any(t,n,r)}get onKeyDown(){return this.disposables.add(new Dt(this.view.domNode,"keydown")).event}get onDidFocus(){return Re.signal(this.disposables.add(new Dt(this.view.domNode,"focus",!0)).event)}constructor(e,t,n,r,s=F4e){var o,a,l,c;this.user=e,this._options=s,this.focus=new gk("focused"),this.anchor=new gk("anchor"),this.eventBufferer=new D3,this._ariaLabel="",this.disposables=new ae,this._onDidDispose=new H,this.onDidDispose=this._onDidDispose.event;const d=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(o=this._options.accessibilityProvider)===null||o===void 0?void 0:o.getWidgetRole():"list";this.selection=new E4e(d!=="listbox");const u=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=s.accessibilityProvider,this.accessibilityProvider&&(u.push(new H4e(this.accessibilityProvider)),(l=(a=this.accessibilityProvider).onDidChangeActiveDescendant)===null||l===void 0||l.call(a,this.onDidChangeActiveDescendant,this,this.disposables)),r=r.map(f=>new V4e(f.templateId,[...u,f]));const h=Object.assign(Object.assign({},s),{dnd:s.dnd&&new U4e(this,s.dnd)});if(this.view=this.createListView(t,n,r,h),this.view.domNode.setAttribute("role",d),s.styleController)this.styleController=s.styleController(this.view.domId);else{const f=ca(this.view.domNode);this.styleController=new hY(f,this.view.domId)}if(this.spliceable=new C4e([new HE(this.focus,this.view,s.identityProvider),new HE(this.selection,this.view,s.identityProvider),new HE(this.anchor,this.view,s.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new P4e(this,this.view)),(typeof s.keyboardSupport!="boolean"||s.keyboardSupport)&&(this.keyboardController=new lY(this,this.view,s),this.disposables.add(this.keyboardController)),s.keyboardNavigationLabelProvider){const f=s.keyboardNavigationDelegate||N4e;this.typeNavigationController=new A4e(this,this.view,s.keyboardNavigationLabelProvider,(c=s.keyboardNavigationEventFilter)!==null&&c!==void 0?c:()=>!0,f),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(s),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,n,r){return new ma(e,t,n,r)}createMouseController(e){return new uY(this)}updateOptions(e={}){var t,n;this._options=Object.assign(Object.assign({},this._options),e),(t=this.typeNavigationController)===null||t===void 0||t.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(n=this.keyboardController)===null||n===void 0||n.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new hm(this.user,`Invalid start index: ${e}`);if(t<0)throw new hm(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new hm(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new hm(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return kq(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new hm(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,r){if(this.length===0)return;const s=this.focus.get(),o=this.findNextIndex(s.length>0?s[0]+e:0,t,r);o>-1&&this.setFocus([o],n)}focusPrevious(e=1,t=!1,n,r){if(this.length===0)return;const s=this.focus.get(),o=this.findPreviousIndex(s.length>0?s[0]-e:0,t,r);o>-1&&this.setFocus([o],n)}focusNextPage(e,t){return fV(this,void 0,void 0,function*(){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const r=this.getFocus()[0];if(r!==n&&(r===void 0||n>r)){const s=this.findPreviousIndex(n,!1,t);s>-1&&r!==s?this.setFocus([s],e):this.setFocus([n],e)}else{const s=this.view.getScrollTop();let o=s+this.view.renderHeight;n>r&&(o-=this.view.elementHeight(n)),this.view.setScrollTop(o),this.view.getScrollTop()!==s&&(this.setFocus([]),yield Vh(0),yield this.focusNextPage(e,t))}})}focusPreviousPage(e,t){return fV(this,void 0,void 0,function*(){let n;const r=this.view.getScrollTop();r===0?n=this.view.indexAt(r):n=this.view.indexAfter(r-1);const s=this.getFocus()[0];if(s!==n&&(s===void 0||s>=n)){const o=this.findNextIndex(n,!1,t);o>-1&&s!==o?this.setFocus([o],e):this.setFocus([n],e)}else{const o=r;this.view.setScrollTop(r-this.view.renderHeight),this.view.getScrollTop()!==o&&(this.setFocus([]),yield Vh(0),yield this.focusPreviousPage(e,t))}})}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const r=this.findNextIndex(e,!1,n);r>-1&&this.setFocus([r],t)}findNextIndex(e,t=!1,n){for(let r=0;r<this.length;r++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let r=0;r<this.length;r++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new hm(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),r=this.view.elementTop(e),s=this.view.elementHeight(e);if(Oh(t)){const o=s-this.view.renderHeight;this.view.setScrollTop(o*$s(t,0,1)+r)}else{const o=r+s,a=n+this.view.renderHeight;r<n&&o>=a||(r<n||o>=a&&s>=this.view.renderHeight?this.view.setScrollTop(r):o>=a&&this.view.setScrollTop(o-this.view.renderHeight))}}getHTMLElement(){return this.view.domNode}getElementID(e){return this.view.getElementDomId(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let n;!((e=this.accessibilityProvider)===null||e===void 0)&&e.getActiveDescendantId&&(n=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",n||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}Bp([Ci],Ga.prototype,"onDidChangeFocus",null);Bp([Ci],Ga.prototype,"onDidChangeSelection",null);Bp([Ci],Ga.prototype,"onContextMenu",null);Bp([Ci],Ga.prototype,"onKeyDown",null);Bp([Ci],Ga.prototype,"onDidFocus",null);const _g=ce,fY="selectOption.entry.template";class j4e{get templateId(){return fY}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=se(e,_g(".option-text")),t.detail=se(e,_g(".option-detail")),t.decoratorRight=se(e,_g(".option-decorator-right")),t}renderElement(e,t,n){const r=n,s=e.text,o=e.detail,a=e.decoratorRight,l=e.isDisabled;r.text.textContent=s,r.detail.textContent=o||"",r.decoratorRight.innerText=a||"",l?r.root.classList.add("option-disabled"):r.root.classList.remove("option-disabled")}disposeTemplate(e){}}class vc extends q{constructor(e,t,n,r,s){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=r,this.selectBoxOptions=s||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=vc.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new H,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(n),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}getHeight(){return 22}getTemplateId(){return fY}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=ce(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=se(this.selectDropDownContainer,_g(".select-box-details-pane"));const t=se(this.selectDropDownContainer,_g(".select-box-dropdown-container-width-control")),n=se(t,_g(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",se(n,this.widthControlElement),this._dropDownPosition=0,this.styleElement=ca(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(ee(this.selectDropDownContainer,Ce.DRAG_START,r=>{_t.stop(r,!0)}))}registerListeners(){this._register(bi(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)})),this._register(ee(this.selectElement,Ce.CLICK,t=>{_t.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(ee(this.selectElement,Ce.MOUSE_DOWN,t=>{_t.stop(t)}));let e;this._register(ee(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(ee(this.selectElement,"touchend",t=>{_t.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(ee(this.selectElement,Ce.KEY_DOWN,t=>{const n=new kn(t);let r=!1;Ot?(n.keyCode===18||n.keyCode===16||n.keyCode===10||n.keyCode===3)&&(r=!0):(n.keyCode===18&&n.altKey||n.keyCode===16&&n.altKey||n.keyCode===10||n.keyCode===3)&&(r=!0),r&&(this.showSelectDropDown(),_t.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){fi(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((n,r)=>{this.selectElement.add(this.createOption(n.text,r,n.isDisabled)),typeof n.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){var e;(e=this.selectList)===null||e===void 0||e.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){var e,t,n;const r=(e=this.styles.selectBackground)!==null&&e!==void 0?e:"",s=(t=this.styles.selectForeground)!==null&&t!==void 0?t:"",o=(n=this.styles.selectBorder)!==null&&n!==void 0?n:"";this.selectElement.style.backgroundColor=r,this.selectElement.style.color=s,this.selectElement.style.borderColor=o}styleList(){var e,t;const n=(e=this.styles.selectBackground)!==null&&e!==void 0?e:"",r=Sg(this.styles.selectListBackground,n);this.selectDropDownListContainer.style.backgroundColor=r,this.selectionDetailsPane.style.backgroundColor=r;const s=(t=this.styles.focusBorder)!==null&&t!==void 0?t:"";this.selectDropDownContainer.style.outlineColor=s,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,n){const r=document.createElement("option");return r.value=e,r.text=e,r.disabled=!!n,r}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{try{e.removeChild(this.selectDropDownContainer)}catch{}}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,n)=>{this.updateDetail(n),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=Mi(this.selectElement),n=getComputedStyle(this.selectElement),r=parseFloat(n.getPropertyValue("--dropdown-padding-top"))+parseFloat(n.getPropertyValue("--dropdown-padding-bottom")),s=window.innerHeight-t.top-t.height-(this.selectBoxOptions.minBottomMargin||0),o=t.top-vc.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,a=this.selectElement.offsetWidth,l=this.setWidthControlElement(this.widthControlElement),c=Math.max(l,Math.round(a)).toString()+"px";this.selectDropDownContainer.style.width=c,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let d=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const u=this._hasDetails?this._cachedMaxDetailsHeight:0,h=d+r+u,f=Math.floor((s-r-u)/this.getHeight()),g=Math.floor((o-r-u)/this.getHeight());if(e)return t.top+t.height>window.innerHeight-22||t.top<vc.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||f<1&&g<1?!1:(f<vc.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&g>f&&this.options.length>f?(this._dropDownPosition=1,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(t.top+t.height>window.innerHeight-22||t.top<vc.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&f<1||this._dropDownPosition===1&&g<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&f+g<1)return this.hideSelectDropDown(!0),!1;h>s&&(d=f*this.getHeight())}else h>o&&(d=g*this.getHeight());return this.selectList.layout(d),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=d+r+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=d+r+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=c,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let n=0,r=0;this.options.forEach((s,o)=>{const a=s.detail?s.detail.length:0,l=s.decoratorRight?s.decoratorRight.length:0,c=s.text.length+a+l;c>r&&(n=o,r=c)}),e.textContent=this.options[n].text+(this.options[n].decoratorRight?this.options[n].decoratorRight+" ":""),t=Es(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=se(e,_g(".select-box-dropdown-list-container")),this.listRenderer=new j4e,this.selectList=new Ga("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:r=>{let s=r.text;return r.detail&&(s+=`. ${r.detail}`),r.decoratorRight&&(s+=`. ${r.decoratorRight}`),r.description&&(s+=`. ${r.description}`),s},getWidgetAriaLabel:()=>p({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>Ot?"":"option",getWidgetRole:()=>"listbox"}}),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new Dt(this.selectDropDownListContainer,"keydown")),n=Re.chain(t.event,r=>r.filter(()=>this.selectList.length>0).map(s=>new kn(s)));this._register(Re.chain(n,r=>r.filter(s=>s.keyCode===3))(this.onEnter,this)),this._register(Re.chain(n,r=>r.filter(s=>s.keyCode===2))(this.onEnter,this)),this._register(Re.chain(n,r=>r.filter(s=>s.keyCode===9))(this.onEscape,this)),this._register(Re.chain(n,r=>r.filter(s=>s.keyCode===16))(this.onUpArrow,this)),this._register(Re.chain(n,r=>r.filter(s=>s.keyCode===18))(this.onDownArrow,this)),this._register(Re.chain(n,r=>r.filter(s=>s.keyCode===12))(this.onPageDown,this)),this._register(Re.chain(n,r=>r.filter(s=>s.keyCode===11))(this.onPageUp,this)),this._register(Re.chain(n,r=>r.filter(s=>s.keyCode===14))(this.onHome,this)),this._register(Re.chain(n,r=>r.filter(s=>s.keyCode===13))(this.onEnd,this)),this._register(Re.chain(n,r=>r.filter(s=>s.keyCode>=21&&s.keyCode<=56||s.keyCode>=85&&s.keyCode<=113))(this.onCharacter,this)),this._register(ee(this.selectList.getHTMLElement(),Ce.POINTER_UP,r=>this.onPointerUp(r))),this._register(this.selectList.onMouseOver(r=>typeof r.index<"u"&&this.selectList.setFocus([r.index]))),this._register(this.selectList.onDidChangeFocus(r=>this.onListFocus(r))),this._register(ee(this.selectDropDownContainer,Ce.FOCUS_OUT,r=>{!this._isVisible||Dr(r.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;_t.stop(e);const t=e.target;if(!t||t.classList.contains("slider"))return;const n=t.closest(".monaco-list-row");if(!n)return;const r=Number(n.getAttribute("data-index")),s=n.classList.contains("option-disabled");r>=0&&r<this.options.length&&!s&&(this.selected=r,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const n=s=>{for(let o=0;o<s.childNodes.length;o++){const a=s.childNodes.item(o);(a.tagName&&a.tagName.toLowerCase())==="img"?s.removeChild(a):n(a)}},r=tI({value:e,supportThemeIcons:!0},{actionHandler:t});return r.element.classList.add("select-box-description-markdown"),n(r.element),r.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){var t,n;this.selectionDetailsPane.innerText="";const r=this.options[e],s=(t=r==null?void 0:r.description)!==null&&t!==void 0?t:"",o=(n=r==null?void 0:r.descriptionIsMarkdown)!==null&&n!==void 0?n:!1;if(s){if(o){const a=r.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(s,a))}else this.selectionDetailsPane.innerText=s;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){_t.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){_t.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){_t.stop(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(_t.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){_t.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){_t.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){_t.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){_t.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=Md.toString(e.keyCode);let n=-1;for(let r=0;r<this.options.length-1;r++)if(n=(r+this.selected+1)%this.options.length,this.options[n].text.charAt(0).toUpperCase()===t&&!this.options[n].isDisabled){this.select(n),this.selectList.setFocus([n]),this.selectList.reveal(this.selectList.getFocus()[0]),_t.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}}vc.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32;vc.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2;vc.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;class z4e extends q{constructor(e,t,n,r){super(),this.selected=0,this.selectBoxOptions=r||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new H),this.styles=n,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(vn.addTarget(this.selectElement)),[yn.Tap].forEach(e=>{this._register(ee(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(bi(this.selectElement,"click",e=>{_t.stop(e,!0)})),this._register(bi(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(bi(this.selectElement,"keydown",e=>{let t=!1;Ot?(e.keyCode===18||e.keyCode===16||e.keyCode===10)&&(t=!0):(e.keyCode===18&&e.altKey||e.keyCode===10||e.keyCode===3)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!fi(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((n,r)=>{this.selectElement.add(this.createOption(n.text,r,n.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){var e,t,n;this.selectElement&&(this.selectElement.style.backgroundColor=(e=this.styles.selectBackground)!==null&&e!==void 0?e:"",this.selectElement.style.color=(t=this.styles.selectForeground)!==null&&t!==void 0?t:"",this.selectElement.style.borderColor=(n=this.styles.selectBorder)!==null&&n!==void 0?n:"")}createOption(e,t,n){const r=document.createElement("option");return r.value=e,r.text=e,r.disabled=!!n,r}}class $4e extends $a{constructor(e,t,n,r,s){super(),Ot&&!(s!=null&&s.useCustomDrawn)?this.selectBoxDelegate=new z4e(e,t,r,s):this.selectBoxDelegate=new vc(e,t,n,r,s),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}}class ml extends q{get action(){return this._action}constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof vs&&this._register(t.onDidChange(r=>{this.element&&this.handleActionChangeEvent(r)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new K_)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(vn.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,aa&&this._register(ee(e,Ce.DRAG_START,r=>{var s;return(s=r.dataTransfer)===null||s===void 0?void 0:s.setData(by.TEXT,this._action.label)}))),this._register(ee(t,yn.Tap,r=>this.onClick(r,!0))),this._register(ee(t,Ce.MOUSE_DOWN,r=>{n||_t.stop(r,!0),this._action.enabled&&r.button===0&&t.classList.add("active")})),Ot&&this._register(ee(t,Ce.CONTEXT_MENU,r=>{r.button===0&&r.ctrlKey===!0&&this.onClick(r)})),this._register(ee(t,Ce.CLICK,r=>{_t.stop(r,!0),this.options&&this.options.isMenu||this.onClick(r)})),this._register(ee(t,Ce.DBLCLICK,r=>{_t.stop(r,!0)})),[Ce.MOUSE_UP,Ce.MOUSE_OUT].forEach(r=>{this._register(ee(t,r,s=>{_t.stop(s),t.classList.remove("active")}))})}onClick(e,t=!1){var n;_t.stop(e,!0);const r=yo(this._context)?!((n=this.options)===null||n===void 0)&&n.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,r)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getTooltip(){return this.action.tooltip}updateTooltip(){var e;if(!this.element)return;const t=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.updateAriaLabel(),this.options.hoverDelegate?(this.element.title="",this.customHover?this.customHover.update(t):(this.customHover=sY(this.options.hoverDelegate,this.element,t),this._store.add(this.customHover))):this.element.title=t}updateAriaLabel(){var e;if(this.element){const t=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.element.setAttribute("aria-label",t)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class u1 extends ml{constructor(e,t,n){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=se(this.element,ce("a.action-label"))),this.label&&this.label.setAttribute("role",this.getDefaultAriaRole()),this.options.label&&this.options.keybinding&&this.element&&(se(this.element,ce("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===rr.ID?"presentation":this.options.isMenu?"menuitem":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=p({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.action.class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(e=this.label)===null||e===void 0||e.classList.remove("codicon")}updateEnabled(){var e,t;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(e=this.element)===null||e===void 0||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(t=this.element)===null||t===void 0||t.classList.add("disabled"))}updateAriaLabel(){var e;if(this.label){const t=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.label.setAttribute("aria-label",t)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox")):(this.label.classList.remove("checked"),this.label.setAttribute("aria-checked",""),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class K4e extends ml{constructor(e,t,n,r,s,o,a){super(e,t),this.selectBox=new $4e(n,r,s,o,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){var e;(e=this.selectBox)===null||e===void 0||e.focus()}blur(){var e;(e=this.selectBox)===null||e===void 0||e.blur()}render(e){this.selectBox.render(e)}}class q4e extends K_{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new H),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=se(e,ce(".monaco-dropdown")),this._label=se(this._element,ce(".dropdown-label"));let n=t.labelRenderer;n||(n=s=>(s.textContent=t.label||"",null));for(const s of[Ce.CLICK,Ce.MOUSE_DOWN,yn.Tap])this._register(ee(this.element,s,o=>_t.stop(o,!0)));for(const s of[Ce.MOUSE_DOWN,yn.Tap])this._register(ee(this._label,s,o=>{o instanceof MouseEvent&&(o.detail>1||o.button!==0)||(this.visible?this.hide():this.show())}));this._register(ee(this._label,Ce.KEY_UP,s=>{const o=new kn(s);(o.equals(3)||o.equals(10))&&(_t.stop(s,!0),this.visible?this.hide():this.show())}));const r=n(this._label);r&&this._register(r),this._register(vn.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class G4e extends q4e{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class pk extends ml{constructor(e,t,n,r=Object.create(null)){super(null,e,r),this.actionItem=null,this._onDidChangeVisibility=this._register(new H),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=r,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=s=>{this.element=se(s,ce("a.action-label"));let o=[];return typeof this.options.classNames=="string"?o=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(o=this.options.classNames),o.find(a=>a==="icon")||o.push("codicon"),this.element.classList.add(...o),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",this.element.ariaLabel=this._action.label||"",null},n=Array.isArray(this.menuActionsOrProvider),r={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new G4e(e,r)),this._register(this.dropdownMenu.onDidChangeVisibility(s=>{var o;(o=this.element)===null||o===void 0||o.setAttribute("aria-expanded",`${s}`),this._onDidChangeVisibility.fire(s)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const s=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return s.options.anchorAlignmentProvider()}})}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){var e;(e=this.dropdownMenu)===null||e===void 0||e.show()}updateEnabled(){var e,t;const n=!this.action.enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",n),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",n)}}function Z4e(i){return i?i.condition!==void 0:!1}var mv=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},D_;(function(i){i[i.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",i[i.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(D_||(D_={}));var Qm;(function(i){i[i.None=0]="None",i[i.Initialized=1]="Initialized",i[i.Closed=2]="Closed"})(Qm||(Qm={}));class I_ extends q{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new Ug),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=Qm.None,this.cache=new Map,this.flushDelayer=this._register(new jG(I_.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,n;this._onDidChangeStorage.pause();try{(t=e.changed)===null||t===void 0||t.forEach((r,s)=>this.acceptExternal(s,r)),(n=e.deleted)===null||n===void 0||n.forEach(r=>this.acceptExternal(r,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===Qm.Closed)return;let n=!1;yo(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire({key:e,external:!0})}get(e,t){const n=this.cache.get(e);return yo(n)?t:n}getBoolean(e,t){const n=this.get(e);return yo(n)?t:n==="true"}getNumber(e,t){const n=this.get(e);return yo(n)?t:parseInt(n,10)}set(e,t,n=!1){return mv(this,void 0,void 0,function*(){if(this.state===Qm.Closed)return;if(yo(t))return this.delete(e,n);const r=gs(t)||Array.isArray(t)?n4e(t):String(t);if(this.cache.get(e)!==r)return this.cache.set(e,r),this.pendingInserts.set(e,r),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:n}),this.doFlush()})}delete(e,t=!1){return mv(this,void 0,void 0,function*(){if(!(this.state===Qm.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return mv(this,void 0,void 0,function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})})}doFlush(e){return mv(this,void 0,void 0,function*(){return this.options.hint===D_.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),e)})}}I_.DEFAULT_FLUSH_DELAY=100;class UE{constructor(){this.onDidChangeItemsExternal=Re.None,this.items=new Map}updateItems(e){var t,n;return mv(this,void 0,void 0,function*(){(t=e.insert)===null||t===void 0||t.forEach((r,s)=>this.items.set(s,r)),(n=e.delete)===null||n===void 0||n.forEach(r=>this.items.delete(r))})}}const Rx="__$__targetStorageMarker",Za=Lt("storageService");var mk;(function(i){i[i.NONE=0]="NONE",i[i.SHUTDOWN=1]="SHUTDOWN"})(mk||(mk={}));function X4e(i){const e=i.get(Rx);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}class nI extends q{constructor(e={flushInterval:nI.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new Ug),this._onDidChangeTarget=this._register(new Ug),this._onWillSaveState=this._register(new H),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(e,t,n){return Re.filter(this._onDidChangeValue.event,r=>r.scope===e&&(t===void 0||r.key===t),n)}emitDidChangeValue(e,t){const{key:n,external:r}=t;if(n===Rx){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:n,target:this.getKeyTargets(e)[n],external:r})}get(e,t,n){var r;return(r=this.getStorage(t))===null||r===void 0?void 0:r.get(e,n)}getBoolean(e,t,n){var r;return(r=this.getStorage(t))===null||r===void 0?void 0:r.getBoolean(e,n)}getNumber(e,t,n){var r;return(r=this.getStorage(t))===null||r===void 0?void 0:r.getNumber(e,n)}store(e,t,n,r,s=!1){if(yo(t)){this.remove(e,n,s);return}this.withPausedEmitters(()=>{var o;this.updateKeyTarget(e,n,r),(o=this.getStorage(n))===null||o===void 0||o.set(e,t,s)})}remove(e,t,n=!1){this.withPausedEmitters(()=>{var r;this.updateKeyTarget(e,t,void 0),(r=this.getStorage(t))===null||r===void 0||r.delete(e,n)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,n,r=!1){var s,o;const a=this.getKeyTargets(t);typeof n=="number"?a[e]!==n&&(a[e]=n,(s=this.getStorage(t))===null||s===void 0||s.set(Rx,JSON.stringify(a),r)):typeof a[e]=="number"&&(delete a[e],(o=this.getStorage(t))===null||o===void 0||o.set(Rx,JSON.stringify(a),r))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?X4e(t):Object.create(null)}}nI.DEFAULT_FLUSH_INTERVAL=60*1e3;class Y4e extends nI{constructor(){super(),this.applicationStorage=this._register(new I_(new UE,{hint:D_.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new I_(new UE,{hint:D_.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new I_(new UE,{hint:D_.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}function Q4e(i,e){const t=Object.assign({},e);for(const n in i){const r=i[n];t[n]=r!==void 0?Ae(r):void 0}return t}const J4e={keybindingLabelBackground:Ae(PRe),keybindingLabelForeground:Ae(MRe),keybindingLabelBorder:Ae(ORe),keybindingLabelBottomBorder:Ae(FRe),keybindingLabelShadow:Ae(xc)},e3e={buttonForeground:Ae(iv),buttonSeparator:Ae(yRe),buttonBackground:Ae(rv),buttonHoverBackground:Ae(CRe),buttonSecondaryForeground:Ae(SRe),buttonSecondaryBackground:Ae($A),buttonSecondaryHoverBackground:Ae(xRe),buttonBorder:Ae(wRe)},t3e={progressBarBackground:Ae(LRe)},_k={inputActiveOptionBorder:Ae(l5),inputActiveOptionForeground:Ae(c5),inputActiveOptionBackground:Ae(hg)};Ae(mEe),Ae(bEe),Ae(_Ee);Ae(si),Ae(Lc),Ae(xc),Ae(Rt),Ae(PEe),Ae(MEe),Ae(OEe),Ae(cRe);const bk={inputBackground:Ae(CZ),inputForeground:Ae(wZ),inputBorder:Ae(SZ),inputValidationInfoBorder:Ae(hRe),inputValidationInfoBackground:Ae(dRe),inputValidationInfoForeground:Ae(uRe),inputValidationWarningBorder:Ae(pRe),inputValidationWarningBackground:Ae(fRe),inputValidationWarningForeground:Ae(gRe),inputValidationErrorBorder:Ae(bRe),inputValidationErrorBackground:Ae(mRe),inputValidationErrorForeground:Ae(_Re)},n3e={listFilterWidgetBackground:Ae(cEe),listFilterWidgetOutline:Ae(dEe),listFilterWidgetNoMatchesOutline:Ae(uEe),listFilterWidgetShadow:Ae(hEe),inputBoxStyles:bk,toggleStyles:_k},gY={badgeBackground:Ae(Cx),badgeForeground:Ae(TRe),badgeBorder:Ae(Rt)};Ae(LEe),Ae(kEe),Ae(R6),Ae(R6),Ae(DEe);const Wp={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:Ae(JRe),listFocusForeground:Ae(eEe),listFocusOutline:Ae(tEe),listActiveSelectionBackground:Ae(qd),listActiveSelectionForeground:Ae(Rc),listActiveSelectionIconForeground:Ae(lv),listFocusAndSelectionOutline:Ae(nEe),listFocusAndSelectionBackground:Ae(qd),listFocusAndSelectionForeground:Ae(Rc),listInactiveSelectionBackground:Ae(iEe),listInactiveSelectionIconForeground:Ae(sEe),listInactiveSelectionForeground:Ae(rEe),listInactiveFocusBackground:Ae(oEe),listInactiveFocusOutline:Ae(aEe),listHoverBackground:Ae(kZ),listHoverForeground:Ae(LZ),listDropBackground:Ae(lEe),listSelectionOutline:Ae(Rn),listHoverOutline:Ae(Rn),treeIndentGuidesStroke:Ae(cv),treeInactiveIndentGuidesStroke:Ae(fEe),tableColumnsBorder:Ae(gEe),tableOddRowsBackgroundColor:Ae(pEe)};function eb(i){return Q4e(i,Wp)}const i3e={selectBackground:Ae(Tc),selectListBackground:Ae(vRe),selectForeground:Ae(zd),decoratorRightForeground:Ae(xZ),selectBorder:Ae(Wm),focusBorder:Ae(ko),listFocusBackground:Ae(gg),listInactiveSelectionIconForeground:Ae(Vm),listFocusForeground:Ae(fg),listFocusOutline:oRe(Rn,K.transparent.toString()),listHoverBackground:Ae(kZ),listHoverForeground:Ae(LZ),listHoverOutline:Ae(Rn),selectListBorder:Ae(Dc),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0},r3e={shadowColor:Ae(xc),borderColor:Ae(vEe),foregroundColor:Ae(yEe),backgroundColor:Ae(CEe),selectionForegroundColor:Ae(wEe),selectionBackgroundColor:Ae(SEe),selectionBorderColor:Ae(xEe),separatorColor:Ae(TEe),scrollbarShadow:Ae(kRe),scrollbarSliderBackground:Ae(sv),scrollbarSliderHoverBackground:Ae(ov),scrollbarSliderActiveBackground:Ae(av)};var iI=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Ps=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},pY=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function s3e(i,e,t,n){const r=i.getActions(e),s=Hd.getInstance(),o=s.keyStatus.altKey||(Ar||os)&&s.keyStatus.shiftKey;_Y(r,t,o,n?a=>a===n:a=>a==="navigation")}function mY(i,e,t,n,r,s){const o=i.getActions(e);_Y(o,t,!1,typeof n=="string"?l=>l===n:n,r,s)}function _Y(i,e,t,n=o=>o==="navigation",r=()=>!1,s=!1){let o,a;Array.isArray(e)?(o=e,a=e):(o=e.primary,a=e.secondary);const l=new Set;for(const[c,d]of i){let u;n(c)?(u=o,u.length>0&&s&&u.push(new rr)):(u=a,u.length>0&&u.push(new rr));for(let h of d){t&&(h=h instanceof Wa&&h.alt?h.alt:h);const f=u.push(h);h instanceof q_&&l.add({group:c,action:h,index:f-1})}}for(const{group:c,action:d,index:u}of l){const h=n(c)?o:a,f=d.actions;r(d,c,h.length)&&h.splice(u,1,...f)}}let Jg=class extends u1{constructor(e,t,n,r,s,o,a,l){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable,keybinding:t==null?void 0:t.keybinding,hoverDelegate:t==null?void 0:t.hoverDelegate}),this._keybindingService=n,this._notificationService=r,this._contextKeyService=s,this._themeService=o,this._contextMenuService=a,this._accessibilityService=l,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new vr),this._altKey=Hd.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(e){return pY(this,void 0,void 0,function*(){e.preventDefault(),e.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}})}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1;const n=()=>{var r;const s=!!(!((r=this._menuItemAction.alt)===null||r===void 0)&&r.enabled)&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);s!==this._wantsAltCommand&&(this._wantsAltCommand=s,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(n)),this._register(ee(e,"mouseleave",r=>{t=!1,n()})),this._register(ee(e,"mouseenter",r=>{t=!0,n()})),n()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var e;const t=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),n=t&&t.getLabel(),r=this._commandAction.tooltip||this._commandAction.label;let s=n?p("titleAndKb","{0} ({1})",r,n):r;if(!this._wantsAltCommand&&(!((e=this._menuItemAction.alt)===null||e===void 0)&&e.enabled)){const o=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),l=a&&a.getLabel(),c=l?p("titleAndKb","{0} ({1})",o,l):o;s=p("titleAndKbAndAlt",`{0}
[{1}] {2}`,s,z5.modifierLabels[To].altKey,c)}return s}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:n}=this;if(!t||!n)return;const r=this._commandAction.checked&&Z4e(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(r)if(Qe.isThemeIcon(r)){const s=Qe.asClassNameArray(r);n.classList.add(...s),this._itemClassDispose.value=st(()=>{n.classList.remove(...s)})}else{const s=t1(this._themeService.getColorTheme().type)?Wh(r.dark):Wh(r.light),o=ce("span");o.style.webkitMask=o.style.mask=`${s} no-repeat 50% 50%`,o.style.background="var(--vscode-icon-foreground)",o.style.display="inline-block",o.style.width="100%",o.style.height="100%",n.appendChild(o),n.classList.add("icon"),this._itemClassDispose.value=Pa(st(()=>{n.classList.remove("icon"),br(n)}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}}};Jg=iI([Ps(2,bn),Ps(3,wi),Ps(4,ot),Ps(5,qi),Ps(6,qa),Ps(7,yu)],Jg);let zP=class extends pk{constructor(e,t,n,r,s){var o,a,l;const c=Object.assign(Object.assign({},t),{menuAsChild:(o=t==null?void 0:t.menuAsChild)!==null&&o!==void 0?o:!1,classNames:(a=t==null?void 0:t.classNames)!==null&&a!==void 0?a:Qe.isThemeIcon(e.item.icon)?Qe.asClassName(e.item.icon):void 0,keybindingProvider:(l=t==null?void 0:t.keybindingProvider)!==null&&l!==void 0?l:d=>n.lookupKeybinding(d.id)});super(e,{getActions:()=>e.actions},r,c),this._keybindingService=n,this._contextMenuService=r,this._themeService=s}render(e){super.render(e),dn(this.element),e.classList.add("menu-entry");const t=this._action,{icon:n}=t.item;if(n&&!Qe.isThemeIcon(n)){this.element.classList.add("icon");const r=()=>{this.element&&(this.element.style.backgroundImage=t1(this._themeService.getColorTheme().type)?Wh(n.dark):Wh(n.light))};r(),this._register(this._themeService.onDidColorThemeChange(()=>{r()}))}}};zP=iI([Ps(2,bn),Ps(3,qa),Ps(4,qi)],zP);let $P=class extends ml{constructor(e,t,n,r,s,o,a,l){var c,d,u;super(null,e),this._keybindingService=n,this._notificationService=r,this._contextMenuService=s,this._menuService=o,this._instaService=a,this._storageService=l,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let h;const f=t!=null&&t.persistLastActionId?l.get(this._storageKey,1):void 0;f&&(h=e.actions.find(m=>f===m.id)),h||(h=e.actions[0]),this._defaultAction=this._instaService.createInstance(Jg,h,{keybinding:this._getDefaultActionKeybindingLabel(h)});const g=Object.assign(Object.assign({keybindingProvider:m=>this._keybindingService.lookupKeybinding(m.id)},t),{menuAsChild:(c=t==null?void 0:t.menuAsChild)!==null&&c!==void 0?c:!0,classNames:(d=t==null?void 0:t.classNames)!==null&&d!==void 0?d:["codicon","codicon-chevron-down"],actionRunner:(u=t==null?void 0:t.actionRunner)!==null&&u!==void 0?u:new K_});this._dropdown=new pk(e,e.actions,this._contextMenuService,g),this._dropdown.actionRunner.onDidRun(m=>{m.action instanceof Wa&&this.update(m.action)})}update(e){var t;!((t=this._options)===null||t===void 0)&&t.persistLastActionId&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(Jg,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends K_{runAction(n,r){return pY(this,void 0,void 0,function*(){yield n.run(void 0)})}},this._container&&this._defaultAction.render(PG(this._container,ce(".action-container")))}_getDefaultActionKeybindingLabel(e){var t;let n;if(!((t=this._options)===null||t===void 0)&&t.renderKeybindingWithDefaultActionLabel){const r=this._keybindingService.lookupKeybinding(e.id);r&&(n=`(${r.getLabel()})`)}return n}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=ce(".action-container");this._defaultAction.render(se(this._container,t)),this._register(ee(t,Ce.KEY_DOWN,r=>{const s=new kn(r);s.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),s.stopPropagation())}));const n=ce(".dropdown-action-container");this._dropdown.render(se(this._container,n)),this._register(ee(n,Ce.KEY_DOWN,r=>{var s;const o=new kn(r);o.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(s=this._defaultAction.element)===null||s===void 0||s.focus(),o.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};$P=iI([Ps(2,bn),Ps(3,wi),Ps(4,qa),Ps(5,dd),Ps(6,rt),Ps(7,Za)],$P);let KP=class extends K4e{constructor(e,t){super(null,e,e.actions.map(n=>({text:n.id===rr.ID?"─────────":n.label,isDisabled:!n.enabled})),0,t,i3e,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex(n=>n.checked)))}render(e){super.render(e),e.style.borderColor=Ae(Wm)}runAction(e,t){const n=this.action.actions[t];n&&this.actionRunner.run(n)}};KP=iI([Ps(1,Cu)],KP);function o3e(i,e,t){return e instanceof Wa?i.createInstance(Jg,e,t):e instanceof V0?e.item.isSelection?i.createInstance(KP,e):e.item.rememberDefaultAction?i.createInstance($P,e,Object.assign(Object.assign({},t),{persistLastActionId:!0})):i.createInstance(zP,e,t):void 0}var a3e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class fa extends q{constructor(e,t={}){var n,r,s,o,a,l;super(),this._actionRunnerDisposables=this._register(new ae),this.viewItemDisposables=this._register(new k3),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new H),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new H({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new H),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new H),this.onWillRun=this._onWillRun.event,this.options=t,this._context=(n=t.context)!==null&&n!==void 0?n:null,this._orientation=(r=this.options.orientation)!==null&&r!==void 0?r:0,this._triggerKeys={keyDown:(o=(s=this.options.triggerKeys)===null||s===void 0?void 0:s.keyDown)!==null&&o!==void 0?o:!1,keys:(l=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&l!==void 0?l:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new K_,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(u=>this._onDidRun.fire(u))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(u=>this._onWillRun.fire(u))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",t.animated!==!1&&this.domNode.classList.add("animated");let c,d;switch(this._orientation){case 0:c=[15],d=[17];break;case 1:c=[16],d=[18],this.domNode.className+=" vertical";break}this._register(ee(this.domNode,Ce.KEY_DOWN,u=>{const h=new kn(u);let f=!0;const g=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;c&&(h.equals(c[0])||h.equals(c[1]))?f=this.focusPrevious():d&&(h.equals(d[0])||h.equals(d[1]))?f=this.focusNext():h.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():h.equals(14)?f=this.focusFirst():h.equals(13)?f=this.focusLast():h.equals(2)&&g instanceof ml&&g.trapsArrowNavigation?f=this.focusNext():this.isTriggerKeyEvent(h)?this._triggerKeys.keyDown?this.doTrigger(h):this.triggerKeyDown=!0:f=!1,f&&(h.preventDefault(),h.stopPropagation())})),this._register(ee(this.domNode,Ce.KEY_UP,u=>{const h=new kn(u);this.isTriggerKeyEvent(h)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(h)),h.preventDefault(),h.stopPropagation()):(h.equals(2)||h.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register(qc(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(Ma()===this.domNode||!Dr(Ma(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=2?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(n=>n instanceof ml&&n.isEnabled());t instanceof ml&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof ml&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(Dr(Ma(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}getAction(e){var t;if(typeof e=="number")return(t=this.viewItems[e])===null||t===void 0?void 0:t.action;if(e instanceof HTMLElement){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let n=0;n<this.actionsList.childNodes.length;n++)if(this.actionsList.childNodes[n]===e)return this.viewItems[n].action}}push(e,t={}){const n=Array.isArray(e)?e:[e];let r=Oh(t.index)?t.index:null;n.forEach(s=>{const o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation");let a;const l=Object.assign({hoverDelegate:this.options.hoverDelegate},t);this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(s,l)),a||(a=new u1(this.context,s,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,ee(o,Ce.CONTEXT_MENU,c=>{_t.stop(c,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(o),this.focusable&&a instanceof ml&&this.viewItems.length===0&&a.setFocusable(!0),r===null||r<0||r>=this.actionsList.children.length?(this.actionsList.appendChild(o),this.viewItems.push(a)):(this.actionsList.insertBefore(o,this.actionsList.children[r]),this.viewItems.splice(r,0,a),r++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=an(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),_r(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const r=this.viewItems.findIndex(s=>s.isEnabled());this.focusedItem=r===-1?void 0:r,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=t,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===rr.ID));return this.updateFocus(),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===rr.ID));return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){var r;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((r=this.viewItems[this.previouslyFocusedItem])===null||r===void 0||r.blur());const s=this.focusedItem!==void 0&&this.viewItems[this.focusedItem];if(s){let o=!0;E0(s.focus)||(o=!1),this.options.focusOnlyEnabledItems&&E0(s.isEnabled)&&!s.isEnabled()&&(o=!1),s.action.id===rr.ID&&(o=!1),o?(n||this.previouslyFocusedItem!==this.focusedItem)&&(s.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0)}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof ml){const n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}run(e,t){return a3e(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){this._context=void 0,this.viewItems=an(this.viewItems),this.getContainer().remove(),super.dispose()}}const qP=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,jE=/(&amp;)?(&amp;)([^\s&])/g;var vk;(function(i){i[i.Right=0]="Right",i[i.Left=1]="Left"})(vk||(vk={}));class R_ extends fa{constructor(e,t,n,r){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const s=document.createElement("div");s.classList.add("monaco-menu"),s.setAttribute("role","presentation"),super(s,{orientation:1,actionViewItemProvider:l=>this.doGetActionViewItem(l,n,o),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...Ot||os?[10]:[]],keyDown:!0}}),this.menuStyles=r,this.menuElement=s,this.actionsList.tabIndex=0,this.menuDisposables=this._register(new ae),this.initializeOrUpdateStyleSheet(e,r),this._register(vn.addTarget(s)),ee(s,Ce.KEY_DOWN,l=>{new kn(l).equals(2)&&l.preventDefault()}),n.enableMnemonics&&this.menuDisposables.add(ee(s,Ce.KEY_DOWN,l=>{const c=l.key.toLocaleLowerCase();if(this.mnemonics.has(c)){_t.stop(l,!0);const d=this.mnemonics.get(c);if(d.length===1&&(d[0]instanceof mV&&d[0].container&&this.focusItemByElement(d[0].container),d[0].onClick(l)),d.length>1){const u=d.shift();u&&u.container&&(this.focusItemByElement(u.container),d.push(u)),this.mnemonics.set(c,d)}}})),os&&this._register(ee(s,Ce.KEY_DOWN,l=>{const c=new kn(l);c.equals(14)||c.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),_t.stop(l,!0)):(c.equals(13)||c.equals(12))&&(this.focusedItem=0,this.focusPrevious(),_t.stop(l,!0))})),this._register(ee(this.domNode,Ce.MOUSE_OUT,l=>{const c=l.relatedTarget;Dr(c,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),l.stopPropagation())})),this._register(ee(this.actionsList,Ce.MOUSE_OVER,l=>{let c=l.target;if(!(!c||!Dr(c,this.actionsList)||c===this.actionsList)){for(;c.parentElement!==this.actionsList&&c.parentElement!==null;)c=c.parentElement;if(c.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(c),d!==this.focusedItem&&this.updateFocus()}}})),this._register(vn.addTarget(this.actionsList)),this._register(ee(this.actionsList,yn.Tap,l=>{let c=l.initialTarget;if(!(!c||!Dr(c,this.actionsList)||c===this.actionsList)){for(;c.parentElement!==this.actionsList&&c.parentElement!==null;)c=c.parentElement;if(c.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(c),d!==this.focusedItem&&this.updateFocus()}}}));const o={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new KC(s,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const a=this.scrollableElement.getDomNode();a.style.position="",this.styleScrollElement(a,r),this._register(ee(s,yn.Change,l=>{_t.stop(l,!0);const c=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:c-l.translationY})})),this._register(ee(a,Ce.MOUSE_UP,l=>{l.preventDefault()})),s.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(l=>{var c;return!((c=n.submenuIds)===null||c===void 0)&&c.has(l.id)?(console.warn(`Found submenu cycle: ${l.id}`),!1):!0}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(l=>!(l instanceof _V)).forEach((l,c,d)=>{l.updatePositionInSet(c+1,d.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(DT(e)?this.styleSheet=ca(e):(R_.globalStyleSheet||(R_.globalStyleSheet=ca()),this.styleSheet=R_.globalStyleSheet)),this.styleSheet.textContent=c3e(t,DT(e))}styleScrollElement(e,t){var n,r;const s=(n=t.foregroundColor)!==null&&n!==void 0?n:"",o=(r=t.backgroundColor)!==null&&r!==void 0?r:"",a=t.borderColor?`1px solid ${t.borderColor}`:"",l="5px",c=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=a,e.style.borderRadius=l,e.style.color=s,e.style.backgroundColor=o,e.style.boxShadow=c}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const n=this.actionsList.children[t];if(e===n){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof rr)return new _V(t.context,e,{icon:!0},this.menuStyles);if(e instanceof q_){const r=new mV(e,e.actions,n,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}),this.menuStyles);if(t.enableMnemonics){const s=r.getMnemonic();if(s&&r.isEnabled()){let o=[];this.mnemonics.has(s)&&(o=this.mnemonics.get(s)),o.push(r),this.mnemonics.set(s,o)}}return r}else{const r={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const o=t.getKeyBinding(e);if(o){const a=o.getLabel();a&&(r.keybinding=a)}}const s=new bY(t.context,e,r,this.menuStyles);if(t.enableMnemonics){const o=s.getMnemonic();if(o&&s.isEnabled()){let a=[];this.mnemonics.has(o)&&(a=this.mnemonics.get(o)),a.push(s),this.mnemonics.set(o,a)}}return s}}}class bY extends ml{constructor(e,t,n,r){if(n.isMenu=!0,super(t,t,n),this.menuStyle=r,this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){const s=this.action.label;if(s){const o=qP.exec(s);o&&(this.mnemonic=(o[1]?o[1]:o[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new fn(()=>{this.element&&(this._register(ee(this.element,Ce.MOUSE_UP,s=>{if(_t.stop(s,!0),aa){if(new Qo(s).rightButton)return;this.onClick(s)}else setTimeout(()=>{this.onClick(s)},0)})),this._register(ee(this.element,Ce.CONTEXT_MENU,s=>{_t.stop(s,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=se(this.element,ce("a.action-menu-item")),this._action.id===rr.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=se(this.item,ce("span.menu-item-check"+Qe.asCSSSelector(me.menuSelection))),this.check.setAttribute("role","none"),this.label=se(this.item,ce("span.action-label")),this.options.label&&this.options.keybinding&&(se(this.item,ce("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){var e;super.focus(),(e=this.item)===null||e===void 0||e.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){var e;if(this.label&&this.options.label){_r(this.label);let t=Q5(this.action.label);if(t){const n=l3e(t);this.options.enableMnemonics||(t=n),this.label.setAttribute("aria-label",n.replace(/&&/g,"&"));const r=qP.exec(t);if(r){t=ST(t),jE.lastIndex=0;let s=jE.exec(t);for(;s&&s[1];)s=jE.exec(t);const o=a=>a.replace(/&amp;&amp;/g,"&amp;");s?this.label.append(PC(o(t.substr(0,s.index))," "),ce("u",{"aria-hidden":"true"},s[3]),sG(o(t.substr(s.index+s[0].length))," ")):this.label.innerText=o(t).trim(),(e=this.item)===null||e===void 0||e.setAttribute("aria-keyshortcuts",(r[1]?r[1]:r[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,r=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",s=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=n??"",this.item.style.outline=r,this.item.style.outlineOffset=s),this.check&&(this.check.style.color=t??"")}}class mV extends bY{constructor(e,t,n,r,s){super(e,e,r,s),this.submenuActions=t,this.parentData=n,this.submenuOptions=r,this.mysubmenu=null,this.submenuDisposables=this._register(new ae),this.mouseOver=!1,this.expandDirection=r&&r.expandDirection!==void 0?r.expandDirection:vk.Right,this.showScheduler=new fn(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new fn(()=>{this.element&&!Dr(Ma(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=se(this.item,ce("span.submenu-indicator"+Qe.asCSSSelector(me.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(ee(this.element,Ce.KEY_UP,t=>{const n=new kn(t);(n.equals(17)||n.equals(3))&&(_t.stop(t,!0),this.createSubmenu(!0))})),this._register(ee(this.element,Ce.KEY_DOWN,t=>{const n=new kn(t);Ma()===this.item&&(n.equals(17)||n.equals(3))&&_t.stop(t,!0)})),this._register(ee(this.element,Ce.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(ee(this.element,Ce.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(ee(this.element,Ce.FOCUS_OUT,t=>{this.element&&!Dr(Ma(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){_t.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,r){const s={top:0,left:0};return s.left=Zm(e.width,t.width,{position:r===vk.Right?0:1,offset:n.left,size:n.width}),s.left>=n.left&&s.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(s.left=n.left+10),n.top+=10,n.height=0),s.top=Zm(e.height,t.height,{position:0,offset:n.top,size:0}),s.top+t.height===n.top&&s.top+n.height+t.height<=e.height&&(s.top+=n.height),s}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=se(this.element,ce("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new R_(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new dD],this.submenuOptions,this.menuStyle);const r=this.element.getBoundingClientRect(),s={top:r.top-n,left:r.left,height:r.height+2*n,width:r.width},o=this.submenuContainer.getBoundingClientRect(),{top:a,left:l}=this.calculateSubmenuMenuLayout(new Kt(window.innerWidth,window.innerHeight),Kt.lift(o),s,this.expandDirection);this.submenuContainer.style.left=`${l-o.left}px`,this.submenuContainer.style.top=`${a-o.top}px`,this.submenuDisposables.add(ee(this.submenuContainer,Ce.KEY_UP,c=>{new kn(c).equals(15)&&(_t.stop(c,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(ee(this.submenuContainer,Ce.KEY_DOWN,c=>{new kn(c).equals(15)&&_t.stop(c,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class _V extends u1{constructor(e,t,n,r){super(e,t,n),this.menuStyles=r}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function l3e(i){const e=qP,t=e.exec(i);if(!t)return i;const n=!t[1];return i.replace(e,n?"$2$3":"").trim()}function bV(i){const e=tG()[i.id];return`.codicon-${i.id}:before { content: '\\${e.toString(16)}'; }`}function c3e(i,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${bV(me.menuSelection)}
${bV(me.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 = √φ */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const n=i.scrollbarShadow;n&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${n} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${n} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${n} 6px 6px 6px -6px inset;
				}
			`);const r=i.scrollbarSliderBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${r};
				}
			`);const s=i.scrollbarSliderHoverBackground;s&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${s};
				}
			`);const o=i.scrollbarSliderActiveBackground;o&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${o};
				}
			`)}return t}class d3e{constructor(e,t,n,r){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=r,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let n;const r=$3(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:s=>{var o;this.lastContainer=s;const a=e.getMenuClassName?e.getMenuClassName():"";a&&(s.className+=" "+a),this.options.blockMouse&&(this.block=s.appendChild(ce(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",(o=this.blockDisposable)===null||o===void 0||o.dispose(),this.blockDisposable=ee(this.block,Ce.MOUSE_DOWN,d=>d.stopPropagation()));const l=new ae,c=e.actionRunner||new K_;return c.onWillRun(d=>this.onActionRun(d,!e.skipTelemetry),this,l),c.onDidRun(this.onDidActionRun,this,l),n=new R_(s,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:c,getKeyBinding:e.getKeyBinding?e.getKeyBinding:d=>this.keybindingService.lookupKeybinding(d.id)},r3e),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,l),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,l),l.add(ee(window,Ce.BLUR,()=>this.contextViewService.hideContextView(!0))),l.add(ee(window,Ce.MOUSE_DOWN,d=>{if(d.defaultPrevented)return;const u=new Qo(d);let h=u.target;if(!u.rightButton){for(;h;){if(h===s)return;h=h.parentElement}this.contextViewService.hideContextView(!0)}})),Pa(l,n)},focus:()=>{n==null||n.focus(!!e.autoSelectFirstItem)},onHide:s=>{var o,a,l;(o=e.onHide)===null||o===void 0||o.call(e,!!s),this.block&&(this.block.remove(),this.block=null),(a=this.blockDisposable)===null||a===void 0||a.dispose(),this.blockDisposable=null,this.lastContainer&&(Ma()===this.lastContainer||Dr(Ma(),this.lastContainer))&&((l=this.focusToReturn)===null||l===void 0||l.focus()),this.lastContainer=null}},r,!!r)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!ql(e.error)&&this.notificationService.error(e.error)}}var u3e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},fm=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let GP=class extends q{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new d3e(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,n,r,s,o){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=n,this.keybindingService=r,this.menuService=s,this.contextKeyService=o,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new H),this._onDidHideContextMenu=this._store.add(new H)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=ZP.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu(Object.assign(Object.assign({},e),{onHide:t=>{var n;(n=e.onHide)===null||n===void 0||n.call(e,t),this._onDidHideContextMenu.fire()}})),Hd.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};GP=u3e([fm(0,Wo),fm(1,wi),fm(2,Cu),fm(3,bn),fm(4,dd),fm(5,ot)],GP);var ZP;(function(i){function e(n){return n&&n.menuId instanceof E}function t(n,r,s){if(!e(n))return n;const{menuId:o,menuActionOptions:a,contextKeyService:l}=n;return Object.assign(Object.assign({},n),{getActions:()=>{const c=[];if(o){const d=r.createMenu(o,l??s);s3e(d,a,c),d.dispose()}return n.getActions?rr.join(n.getActions(),c):c}})}i.transform=t})(ZP||(ZP={}));var yk;(function(i){i[i.API=0]="API",i[i.USER=1]="USER"})(yk||(yk={}));var nB=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Ck=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},rg=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};let XP=class{constructor(e){this._commandService=e}open(e,t){return rg(this,void 0,void 0,function*(){if(!H5(e,bt.command))return!1;if(!(t!=null&&t.allowCommands)||(typeof e=="string"&&(e=Ye.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let n=[];try{n=WP(decodeURIComponent(e.query))}catch{try{n=WP(e.query)}catch{}}return Array.isArray(n)||(n=[n]),yield this._commandService.executeCommand(e.path,...n),!0})}};XP=nB([Ck(0,oi)],XP);let YP=class{constructor(e){this._editorService=e}open(e,t){return rg(this,void 0,void 0,function*(){typeof e=="string"&&(e=Ye.parse(e));const{selection:n,uri:r}=pOe(e);return e=r,e.scheme===bt.file&&(e=YAe(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:n,source:t!=null&&t.fromUserGesture?yk.USER:yk.API},t==null?void 0:t.editorOptions)},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0})}};YP=nB([Ck(0,Jt)],YP);let QP=class{constructor(e,t){this._openers=new ps,this._validators=new ps,this._resolvers=new ps,this._resolvedUriTargets=new Hr(n=>n.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new ps,this._defaultExternalOpener={openExternal:n=>rg(this,void 0,void 0,function*(){return jW(n,bt.http,bt.https)?OG(n):window.location.href=n,!0})},this._openers.push({open:(n,r)=>rg(this,void 0,void 0,function*(){return r!=null&&r.openExternal||jW(n,bt.mailto,bt.http,bt.https,bt.vsls)?(yield this._doOpenExternal(n,r),!0):!1})}),this._openers.push(new XP(t)),this._openers.push(new YP(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}open(e,t){var n;return rg(this,void 0,void 0,function*(){const r=typeof e=="string"?Ye.parse(e):e,s=(n=this._resolvedUriTargets.get(r))!==null&&n!==void 0?n:e;for(const o of this._validators)if(!(yield o.shouldOpen(s,t)))return!1;for(const o of this._openers)if(yield o.open(e,t))return!0;return!1})}resolveExternalUri(e,t){return rg(this,void 0,void 0,function*(){for(const n of this._resolvers)try{const r=yield n.resolveExternalUri(e,t);if(r)return this._resolvedUriTargets.has(r.resolved)||this._resolvedUriTargets.set(r.resolved,e),r}catch{}throw new Error("Could not resolve external URI: "+e.toString())})}_doOpenExternal(e,t){return rg(this,void 0,void 0,function*(){const n=typeof e=="string"?Ye.parse(e):e;let r;try{r=(yield this.resolveExternalUri(n,t)).resolved}catch{r=n}let s;if(typeof e=="string"&&n.toString()===r.toString()?s=e:s=encodeURI(r.toString(!0)),t!=null&&t.allowContributedOpeners){const o=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(yield a.openExternal(s,{sourceUri:n,preferredOpenerId:o},xt.None))return!0}return this._defaultExternalOpener.openExternal(s,{sourceUri:n},xt.None)})}dispose(){this._validators.clear()}};QP=nB([Ck(0,Jt),Ck(1,oi)],QP);const Xa=Lt("editorWorkerService");var Yn;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(Yn||(Yn={}));(function(i){function e(o,a){return a-o}i.compare=e;const t=Object.create(null);t[i.Error]=p("sev.error","Error"),t[i.Warning]=p("sev.warning","Warning"),t[i.Info]=p("sev.info","Info");function n(o){return t[o]||""}i.toString=n;function r(o){switch(o){case di.Error:return i.Error;case di.Warning:return i.Warning;case di.Info:return i.Info;case di.Ignore:return i.Hint}}i.fromSeverity=r;function s(o){switch(o){case i.Error:return di.Error;case i.Warning:return di.Warning;case i.Info:return di.Info;case i.Hint:return di.Ignore}}i.toSeverity=s})(Yn||(Yn={}));var wk;(function(i){const e="";function t(r){return n(r,!0)}i.makeKey=t;function n(r,s){const o=[e];return r.source?o.push(r.source.replace("¦","\\¦")):o.push(e),r.code?typeof r.code=="string"?o.push(r.code.replace("¦","\\¦")):o.push(r.code.value.replace("¦","\\¦")):o.push(e),r.severity!==void 0&&r.severity!==null?o.push(Yn.toString(r.severity)):o.push(e),r.message&&s?o.push(r.message.replace("¦","\\¦")):o.push(e),r.startLineNumber!==void 0&&r.startLineNumber!==null?o.push(r.startLineNumber.toString()):o.push(e),r.startColumn!==void 0&&r.startColumn!==null?o.push(r.startColumn.toString()):o.push(e),r.endLineNumber!==void 0&&r.endLineNumber!==null?o.push(r.endLineNumber.toString()):o.push(e),r.endColumn!==void 0&&r.endColumn!==null?o.push(r.endColumn.toString()):o.push(e),o.push(e),o.join("¦")}i.makeKeyOptionalMessage=n})(wk||(wk={}));const fd=Lt("markerService");function h3e(i,e){const t=[],n=[];for(const r of i)e.has(r)||t.push(r);for(const r of e)i.has(r)||n.push(r);return{removed:t,added:n}}function f3e(i,e){const t=new Set;for(const n of e)i.has(n)&&t.add(n);return t}var g3e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},vV=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let JP=class extends q{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new H),this._markerDecorations=new Hr,e.getModels().forEach(n=>this._onModelAdded(n)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const n=this._markerDecorations.get(t);n&&this._updateDecorations(n)})}_onModelAdded(e){const t=new p3e(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){var t;const n=this._markerDecorations.get(e.uri);n&&(n.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===bt.inMemory||e.uri.scheme===bt.internal||e.uri.scheme===bt.vscode)&&((t=this._markerService)===null||t===void 0||t.read({resource:e.uri}).map(r=>r.owner).forEach(r=>this._markerService.remove(r,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});e.update(t)&&this._onDidChangeMarker.fire(e.model)}};JP=g3e([vV(0,zn),vV(1,fd)],JP);class p3e extends q{constructor(e){super(),this.model=e,this._map=new YDe,this._register(st(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(e){const{added:t,removed:n}=h3e(new Set(this._map.keys()),new Set(e));if(t.length===0&&n.length===0)return!1;const r=n.map(a=>this._map.get(a)),s=t.map(a=>({range:this._createDecorationRange(this.model,a),options:this._createDecorationOption(a)})),o=this.model.deltaDecorations(r,s);for(const a of n)this._map.delete(a);for(let a=0;a<o.length;a++)this._map.set(t[a],o[a]);return!0}getMarker(e){return this._map.getKey(e.id)}_createDecorationRange(e,t){let n=D.lift(t);if(t.severity===Yn.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),n=e.validateRange(n),n.isEmpty()){const r=e.getLineLastNonWhitespaceColumn(n.startLineNumber)||e.getLineMaxColumn(n.startLineNumber);if(r===1||n.endColumn>=r)return n;const s=e.getWordAtPosition(n.getStartPosition());s&&(n=new D(n.startLineNumber,s.startColumn,n.endLineNumber,s.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&n.startLineNumber===n.endLineNumber){const r=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);r<n.endColumn&&(n=new D(n.startLineNumber,r,n.endLineNumber,n.endColumn),t.startColumn=r)}return n}_createDecorationOption(e){let t,n,r,s,o;switch(e.severity){case Yn.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",r=0;break;case Yn.Info:t="squiggly-info",n=Zn(zNe),r=10,o={color:Zn(IEe),position:Js.Inline};break;case Yn.Warning:t="squiggly-warning",n=Zn(jNe),r=20,o={color:Zn(REe),position:Js.Inline};break;case Yn.Error:default:t="squiggly-error",n=Zn(UNe),r=30,o={color:Zn(EEe),position:Js.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(s="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(s="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:Ao.Right},minimap:o,zIndex:r,inlineClassName:s}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}}var m3e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Mb=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Tm;function Nf(i){return i.toString()}class _3e{constructor(e,t,n){this.model=e,this._modelEventListeners=new ae,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(r=>n(e,r)))}dispose(){this._modelEventListeners.dispose()}}const b3e=os||Ot?1:2;class v3e{constructor(e,t,n,r,s,o,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=r,this.heapSize=s,this.sha1=o,this.versionId=a,this.alternativeVersionId=l}}let Sk=Tm=class extends q{constructor(e,t,n,r,s){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=n,this._languageService=r,this._languageConfigurationService=s,this._onModelAdded=this._register(new H),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new H),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new H),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(o=>this._updateModelOptions(o))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){var n;let r=Vr.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const f=parseInt(e.editor.tabSize,10);isNaN(f)||(r=f),r<1&&(r=1)}let s="tabSize";if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const f=parseInt(e.editor.indentSize,10);isNaN(f)||(s=Math.max(f,1))}let o=Vr.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(o=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let a=b3e;const l=e.eol;l===`\r
`?a=2:l===`
`&&(a=1);let c=Vr.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(c=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let d=Vr.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(d=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let u=Vr.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(u=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let h=Vr.bracketPairColorizationOptions;return!((n=e.editor)===null||n===void 0)&&n.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(h={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:r,indentSize:s,insertSpaces:o,detectIndentation:d,defaultEOL:a,trimAutoWhitespace:c,largeFileOptimizations:u,bracketPairColorizationOptions:h}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&typeof n=="string"&&n!=="auto"?n:To===3||To===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,n){const r=typeof e=="string"?e:e.languageId;let s=this._modelCreationOptionsByLanguageAndResource[r+t];if(!s){const o=this._configurationService.getValue("editor",{overrideIdentifier:r,resource:t}),a=this._getEOL(t,r);s=Tm._readModelOptions({editor:o,eol:a},n),this._modelCreationOptionsByLanguageAndResource[r+t]=s}return s}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const n=Object.keys(this._models);for(let r=0,s=n.length;r<s;r++){const o=n[r],a=this._models[o],l=a.model.getLanguageId(),c=a.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:l,resource:c})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:l,resource:c}))continue;const d=t[l+c],u=this.getCreationOptions(l,c,a.model.isForSimpleWidget);Tm._setModelOptionsForModel(a.model,u,d)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&Ro(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(Nf(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(Nf(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(Nf(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(n=>{n.sharesUndoRedoStack||t.push(n)}),t.sort((n,r)=>n.time-r.time);t.length>0&&this._disposedModelsHeapSize>e;){const n=t.shift();this._removeDisposedModel(n.uri),n.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,r){const s=this.getCreationOptions(t,n,r),o=new Yc(e,t,s,n,this._undoRedoService,this._languageService,this._languageConfigurationService);if(n&&this._disposedModels.has(Nf(n))){const c=this._removeDisposedModel(n),d=this._undoRedoService.getElements(n),u=this._getSHA1Computer(),h=u.canComputeSHA1(o)?u.computeSHA1(o)===c.sha1:!1;if(h||c.sharesUndoRedoStack){for(const f of d.past)Nd(f)&&f.matchesResource(n)&&f.setModel(o);for(const f of d.future)Nd(f)&&f.matchesResource(n)&&f.setModel(o);this._undoRedoService.setElementsValidFlag(n,!0,f=>Nd(f)&&f.matchesResource(n)),h&&(o._overwriteVersionId(c.versionId),o._overwriteAlternativeVersionId(c.alternativeVersionId),o._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=Nf(o.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new _3e(o,c=>this._onWillDispose(c),(c,d)=>this._onDidChangeLanguage(c,d));return this._models[a]=l,l}createModel(e,t,n,r=!1){let s;return t?s=this._createModelData(e,t,n,r):s=this._createModelData(e,Eo,n,r),this._onModelAdded.fire(s.model),s.model}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,r=t.length;n<r;n++){const s=t[n];e.push(this._models[s].model)}return e}getModel(e){const t=Nf(e),n=this._models[t];return n?n.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===bt.file||e.scheme===bt.vscodeRemote||e.scheme===bt.vscodeUserData||e.scheme===bt.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=Nf(e.uri),n=this._models[t],r=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let s=!1,o=0;if(r||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const c=this._undoRedoService.getElements(e.uri);if(c.past.length>0||c.future.length>0){for(const d of c.past)Nd(d)&&d.matchesResource(e.uri)&&(s=!0,o+=d.heapSize(e.uri),d.setModel(e.uri));for(const d of c.future)Nd(d)&&d.matchesResource(e.uri)&&(s=!0,o+=d.heapSize(e.uri),d.setModel(e.uri))}}const a=Tm.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,l=this._getSHA1Computer();if(s)if(!r&&(o>a||!l.canComputeSHA1(e))){const c=n.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}else this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,c=>Nd(c)&&c.matchesResource(e.uri)),this._insertDisposedModel(new v3e(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),r,o,l.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!r){const c=n.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,r=e.getLanguageId(),s=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(r,e.uri,e.isForSimpleWidget);Tm._setModelOptionsForModel(e,o,s),this._onModelModeChanged.fire({model:e,oldLanguageId:n})}_getSHA1Computer(){return new rI}};Sk.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;Sk=Tm=m3e([Mb(0,Et),Mb(1,hZ),Mb(2,KD),Mb(3,Fn),Mb(4,wn)],Sk);class rI{canComputeSHA1(e){return e.getValueLength()<=rI.MAX_MODEL_SIZE}computeSHA1(e){const t=new ND,n=e.createSnapshot();let r;for(;r=n.read();)t.update(r);return t.digest()}}rI.MAX_MODEL_SIZE=10*1024*1024;class y3e{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:q.None}}renderElement(e,t,n,r){var s;if((s=n.disposable)===null||s===void 0||s.dispose(),!n.data)return;const o=this.modelProvider();if(o.isResolved(e))return this.renderer.renderElement(o.get(e),e,n.data,r);const a=new vi,l=o.resolve(e,a.token);n.disposable={dispose:()=>a.cancel()},this.renderer.renderPlaceholder(e,n.data),l.then(c=>this.renderer.renderElement(c,e,n.data,r))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class C3e{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function w3e(i,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new C3e(i,e.accessibilityProvider)})}class S3e{constructor(e,t,n,r,s={}){const o=()=>this.model,a=r.map(l=>new y3e(l,o));this.list=new Ga(e,t,n,a,w3e(o,s))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return Re.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return Re.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeSelection(){return Re.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(r=>this._model.get(r)),indexes:t,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,cs(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}var tb=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s};const x3e=!1;var xk;(function(i){i.North="north",i.South="south",i.East="east",i.West="west"})(xk||(xk={}));let T3e=4;const k3e=new H;let L3e=300;const D3e=new H;class iB{constructor(){this.disposables=new ae}get onPointerMove(){return this.disposables.add(new Dt(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new Dt(window,"mouseup")).event}dispose(){this.disposables.dispose()}}tb([Ci],iB.prototype,"onPointerMove",null);tb([Ci],iB.prototype,"onPointerUp",null);class rB{get onPointerMove(){return this.disposables.add(new Dt(this.el,yn.Change)).event}get onPointerUp(){return this.disposables.add(new Dt(this.el,yn.End)).event}constructor(e){this.el=e,this.disposables=new ae}dispose(){this.disposables.dispose()}}tb([Ci],rB.prototype,"onPointerMove",null);tb([Ci],rB.prototype,"onPointerUp",null);class Tk{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}}tb([Ci],Tk.prototype,"onPointerMove",null);tb([Ci],Tk.prototype,"onPointerUp",null);const yV="pointer-events-disabled";class Fr extends q{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=se(this.el,ce(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(st(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new Dt(this._orthogonalStartDragHandle,"mouseenter")).event(()=>Fr.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Dt(this._orthogonalStartDragHandle,"mouseleave")).event(()=>Fr.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=se(this.el,ce(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(st(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new Dt(this._orthogonalEndDragHandle,"mouseenter")).event(()=>Fr.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Dt(this._orthogonalEndDragHandle,"mouseleave")).event(()=>Fr.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,n){super(),this.hoverDelay=L3e,this.hoverDelayer=this._register(new Ha(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new H),this._onDidStart=this._register(new H),this._onDidChange=this._register(new H),this._onDidReset=this._register(new H),this._onDidEnd=this._register(new H),this.orthogonalStartSashDisposables=this._register(new ae),this.orthogonalStartDragHandleDisposables=this._register(new ae),this.orthogonalEndSashDisposables=this._register(new ae),this.orthogonalEndDragHandleDisposables=this._register(new ae),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=se(e,ce(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),Ot&&this.el.classList.add("mac");const r=this._register(new Dt(this.el,"mousedown")).event;this._register(r(u=>this.onPointerStart(u,new iB),this));const s=this._register(new Dt(this.el,"dblclick")).event;this._register(s(this.onPointerDoublePress,this));const o=this._register(new Dt(this.el,"mouseenter")).event;this._register(o(()=>Fr.onMouseEnter(this)));const a=this._register(new Dt(this.el,"mouseleave")).event;this._register(a(()=>Fr.onMouseLeave(this))),this._register(vn.addTarget(this.el));const l=this._register(new Dt(this.el,yn.Start)).event;this._register(l(u=>this.onPointerStart(u,new rB(this.el)),this));const c=this._register(new Dt(this.el,yn.Tap)).event;let d;this._register(c(u=>{if(d){clearTimeout(d),d=void 0,this.onPointerDoublePress(u);return}clearTimeout(d),d=setTimeout(()=>d=void 0,250)},this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=T3e,this._register(k3e.event(u=>{this.size=u,this.layout()}))),this._register(D3e.event(u=>this.hoverDelay=u)),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",x3e),this.layout()}onPointerStart(e,t){_t.stop(e);let n=!1;if(!e.__orthogonalSashEvent){const g=this.getOrthogonalSash(e);g&&(n=!0,e.__orthogonalSashEvent=!0,g.onPointerStart(e,new Tk(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new Tk(t))),!this.state)return;const r=document.getElementsByTagName("iframe");for(const g of r)g.classList.add(yV);const s=e.pageX,o=e.pageY,a=e.altKey,l={startX:s,currentX:s,startY:o,currentY:o,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=ca(this.el),d=()=>{let g="";n?g="all-scroll":this.orientation===1?this.state===1?g="s-resize":this.state===2?g="n-resize":g=Ot?"row-resize":"ns-resize":this.state===1?g="e-resize":this.state===2?g="w-resize":g=Ot?"col-resize":"ew-resize",c.textContent=`* { cursor: ${g} !important; }`},u=new ae;d(),n||this.onDidEnablementChange.event(d,null,u);const h=g=>{_t.stop(g,!1);const m={startX:s,currentX:g.pageX,startY:o,currentY:g.pageY,altKey:a};this._onDidChange.fire(m)},f=g=>{_t.stop(g,!1),this.el.removeChild(c),this.el.classList.remove("active"),this._onDidEnd.fire(),u.dispose();for(const m of r)m.classList.remove(yV)};t.onPointerMove(h,null,u),t.onPointerUp(f,null,u),u.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&Fr.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&Fr.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){Fr.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){var t;const n=(t=e.initialTarget)!==null&&t!==void 0?t:e.target;if(!(!n||!(n instanceof HTMLElement))&&n.classList.contains("orthogonal-drag-handle"))return n.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const I3e={separatorBorder:K.transparent};class vY{set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){var n,r;e!==this.visible&&(e?(this.size=$s(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e),(r=(n=this.view).setVisible)===null||r===void 0||r.call(n,e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){var e;return(e=this.view.proportionalLayout)!==null&&e!==void 0?e:!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,n,r){this.container=e,this.view=t,this.disposable=r,this._cachedVisibleSize=void 0,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){this.disposable.dispose()}}class R3e extends vY{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class E3e extends vY{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var Dd;(function(i){i[i.Idle=0]="Idle",i[i.Busy=1]="Busy"})(Dd||(Dd={}));var kk;(function(i){i.Distribute={type:"distribute"};function e(r){return{type:"split",index:r}}i.Split=e;function t(r){return{type:"auto",index:r}}i.Auto=t;function n(r){return{type:"invisible",cachedVisibleSize:r}}i.Invisible=n})(kk||(kk={}));class yY extends q{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){var n,r,s,o,a;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=Dd.Idle,this._onDidSashChange=this._register(new H),this._onDidSashReset=this._register(new H),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(n=t.orientation)!==null&&n!==void 0?n:0,this.inverseAltBehavior=(r=t.inverseAltBehavior)!==null&&r!==void 0?r:!1,this.proportionalLayout=(s=t.proportionalLayout)!==null&&s!==void 0?s:!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=se(this.el,ce(".sash-container")),this.viewContainer=ce(".split-view-container"),this.scrollable=this._register(new $C({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:la})),this.scrollableElement=this._register(new _5(this.viewContainer,{vertical:this.orientation===0?(o=t.scrollbarVisibility)!==null&&o!==void 0?o:1:2,horizontal:this.orientation===1?(a=t.scrollbarVisibility)!==null&&a!==void 0?a:1:2},this.scrollable));const l=this._register(new Dt(this.viewContainer,"scroll")).event;this._register(l(c=>{const d=this.scrollableElement.getScrollPosition(),u=Math.abs(this.viewContainer.scrollLeft-d.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,h=Math.abs(this.viewContainer.scrollTop-d.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(u!==void 0||h!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:u,scrollTop:h})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(c=>{c.scrollTopChanged&&(this.viewContainer.scrollTop=c.scrollTop),c.scrollLeftChanged&&(this.viewContainer.scrollLeft=c.scrollLeft)})),se(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||I3e),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((c,d)=>{const u=Zs(c.visible)||c.visible?c.size:{type:"invisible",cachedVisibleSize:c.size},h=c.view;this.doAddView(h,u,d,!0)}),this.contentSize=this.viewItems.reduce((c,d)=>c+d.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,r){this.doAddView(e,t,n,r)}layout(e,t){const n=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let r=0;for(let s=0;s<this.viewItems.length;s++){const o=this.viewItems[s],a=this.proportions[s];typeof a=="number"?r+=a:e-=o.size}for(let s=0;s<this.viewItems.length;s++){const o=this.viewItems[s],a=this.proportions[s];typeof a=="number"&&(o.size=$s(Math.round(a*e/r),o.minimumSize,o.maximumSize))}}else{const r=cs(this.viewItems.length),s=r.filter(a=>this.viewItems[a].priority===1),o=r.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,s,o)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout?e.size/this.contentSize:void 0))}onSashStart({sash:e,start:t,alt:n}){for(const a of this.viewItems)a.enabled=!1;const r=this.sashItems.findIndex(a=>a.sash===e),s=Pa(ee(document.body,"keydown",a=>o(this.sashDragState.current,a.altKey)),ee(document.body,"keyup",()=>o(this.sashDragState.current,!1))),o=(a,l)=>{const c=this.viewItems.map(g=>g.size);let d=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(r===this.sashItems.length-1){const m=this.viewItems[r];d=(m.minimumSize-m.size)/2,u=(m.maximumSize-m.size)/2}else{const m=this.viewItems[r+1];d=(m.size-m.maximumSize)/2,u=(m.size-m.minimumSize)/2}let h,f;if(!l){const g=cs(r,-1),m=cs(r+1,this.viewItems.length),y=g.reduce((I,R)=>I+(this.viewItems[R].minimumSize-c[R]),0),b=g.reduce((I,R)=>I+(this.viewItems[R].viewMaximumSize-c[R]),0),v=m.length===0?Number.POSITIVE_INFINITY:m.reduce((I,R)=>I+(c[R]-this.viewItems[R].minimumSize),0),C=m.length===0?Number.NEGATIVE_INFINITY:m.reduce((I,R)=>I+(c[R]-this.viewItems[R].viewMaximumSize),0),w=Math.max(y,C),S=Math.min(v,b),L=this.findFirstSnapIndex(g),T=this.findFirstSnapIndex(m);if(typeof L=="number"){const I=this.viewItems[L],R=Math.floor(I.viewMinimumSize/2);h={index:L,limitDelta:I.visible?w-R:w+R,size:I.size}}if(typeof T=="number"){const I=this.viewItems[T],R=Math.floor(I.viewMinimumSize/2);f={index:T,limitDelta:I.visible?S+R:S-R,size:I.size}}}this.sashDragState={start:a,current:a,index:r,sizes:c,minDelta:d,maxDelta:u,alt:l,snapBefore:h,snapAfter:f,disposable:s}};o(t,n)}onSashChange({current:e}){const{index:t,start:n,sizes:r,alt:s,minDelta:o,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const d=e-n,u=this.resize(t,d,r,void 0,void 0,o,a,l,c);if(s){const h=t===this.sashItems.length-1,f=this.viewItems.map(C=>C.size),g=h?t:t+1,m=this.viewItems[g],y=m.size-m.maximumSize,b=m.size-m.minimumSize,v=h?t-1:t+1;this.resize(v,-u,f,void 0,void 0,y,b)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=$s(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(this.state!==Dd.Idle)throw new Error("Cant modify splitview");if(this.state=Dd.Busy,e<0||e>=this.viewItems.length)return;const n=cs(this.viewItems.length).filter(a=>a!==e),r=[...n.filter(a=>this.viewItems[a].priority===1),e],s=n.filter(a=>this.viewItems[a].priority===2),o=this.viewItems[e];t=Math.round(t),t=$s(t,o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=t,this.relayout(r,s),this.state=Dd.Idle}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const n=Math.floor(t/e.length);for(const a of e)a.size=$s(n,a.minimumSize,a.maximumSize);const r=cs(this.viewItems.length),s=r.filter(a=>this.viewItems[a].priority===1),o=r.filter(a=>this.viewItems[a].priority===2);this.relayout(s,o)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,r){if(this.state!==Dd.Idle)throw new Error("Cant modify splitview");this.state=Dd.Busy;const s=ce(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(s):this.viewContainer.insertBefore(s,this.viewContainer.children.item(n));const o=e.onDidChange(h=>this.onViewChange(d,h)),a=st(()=>this.viewContainer.removeChild(s)),l=Pa(o,a);let c;typeof t=="number"?c=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize);const d=this.orientation===0?new R3e(s,e,c,l):new E3e(s,e,c,l);if(this.viewItems.splice(n,0,d),this.viewItems.length>1){const h={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},f=this.orientation===0?new Fr(this.sashContainer,{getHorizontalSashTop:I=>this.getSashPosition(I),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},h),{orientation:1})):new Fr(this.sashContainer,{getVerticalSashLeft:I=>this.getSashPosition(I),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},h),{orientation:0})),g=this.orientation===0?I=>({sash:f,start:I.startY,current:I.currentY,alt:I.altKey}):I=>({sash:f,start:I.startX,current:I.currentX,alt:I.altKey}),y=Re.map(f.onDidStart,g)(this.onSashStart,this),v=Re.map(f.onDidChange,g)(this.onSashChange,this),w=Re.map(f.onDidEnd,()=>this.sashItems.findIndex(I=>I.sash===f))(this.onSashEnd,this),S=f.onDidReset(()=>{const I=this.sashItems.findIndex(W=>W.sash===f),R=cs(I,-1),B=cs(I+1,this.viewItems.length),V=this.findFirstSnapIndex(R),F=this.findFirstSnapIndex(B);typeof V=="number"&&!this.viewItems[V].visible||typeof F=="number"&&!this.viewItems[F].visible||this._onDidSashReset.fire(I)}),L=Pa(y,v,w,S,f),T={sash:f,disposable:L};this.sashItems.splice(n-1,0,T)}s.appendChild(e.element);let u;typeof t!="number"&&t.type==="split"&&(u=[t.index]),r||this.relayout([n],u),this.state=Dd.Idle,!r&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}relayout(e,t){const n=this.viewItems.reduce((r,s)=>r+s.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(d=>d.size),r,s,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const d=cs(e,-1),u=cs(e+1,this.viewItems.length);if(s)for(const T of s)NR(d,T),NR(u,T);if(r)for(const T of r)Rw(d,T),Rw(u,T);const h=d.map(T=>this.viewItems[T]),f=d.map(T=>n[T]),g=u.map(T=>this.viewItems[T]),m=u.map(T=>n[T]),y=d.reduce((T,I)=>T+(this.viewItems[I].minimumSize-n[I]),0),b=d.reduce((T,I)=>T+(this.viewItems[I].maximumSize-n[I]),0),v=u.length===0?Number.POSITIVE_INFINITY:u.reduce((T,I)=>T+(n[I]-this.viewItems[I].minimumSize),0),C=u.length===0?Number.NEGATIVE_INFINITY:u.reduce((T,I)=>T+(n[I]-this.viewItems[I].maximumSize),0),w=Math.max(y,C,o),S=Math.min(v,b,a);let L=!1;if(l){const T=this.viewItems[l.index],I=t>=l.limitDelta;L=I!==T.visible,T.setVisible(I,l.size)}if(!L&&c){const T=this.viewItems[c.index],I=t<c.limitDelta;L=I!==T.visible,T.setVisible(I,c.size)}if(L)return this.resize(e,t,n,r,s,o,a);t=$s(t,w,S);for(let T=0,I=t;T<h.length;T++){const R=h[T],B=$s(f[T]+I,R.minimumSize,R.maximumSize),V=B-f[T];I-=V,R.size=B}for(let T=0,I=t;T<g.length;T++){const R=g[T],B=$s(m[T]-I,R.minimumSize,R.maximumSize),V=B-m[T];I+=V,R.size=B}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let n=this.size-t;const r=cs(this.viewItems.length-1,-1),s=r.filter(a=>this.viewItems[a].priority===1),o=r.filter(a=>this.viewItems[a].priority===2);for(const a of o)NR(r,a);for(const a of s)Rw(r,a);typeof e=="number"&&Rw(r,e);for(let a=0;n!==0&&a<r.length;a++){const l=this.viewItems[r[a]],c=$s(l.size+n,l.minimumSize,l.maximumSize),d=c-l.size;n-=d,l.size=c}}layoutViews(){this.contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),r=[...this.viewItems].reverse();e=!1;const s=r.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const o=r.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],d=this.viewItems[l];a+=d.size;const u=!(t[l]&&o[l+1]),h=!(n[l]&&s[l+1]);if(u&&h){const f=cs(l,-1),g=cs(l+1,this.viewItems.length),m=this.findFirstSnapIndex(f),y=this.findFirstSnapIndex(g),b=typeof m=="number"&&!this.viewItems[m].visible,v=typeof y=="number"&&!this.viewItems[y].visible;b&&s[l]&&(a>0||this.startSnappingEnabled)?c.state=1:v&&t[l]&&(a<this.contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else u&&!h?c.state=1:!u&&h?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const n=this.viewItems[t];if(n.visible&&n.snap)return t}for(const t of e){const n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}areViewsDistributed(){let e,t;for(const n of this.viewItems)if(e=e===void 0?n.size:Math.min(e,n.size),t=t===void 0?n.size:Math.max(t,n.size),t-e>2)return!1;return!0}dispose(){var e;(e=this.sashDragState)===null||e===void 0||e.disposable.dispose(),an(this.viewItems),this.viewItems=[],this.sashItems.forEach(t=>t.disposable.dispose()),this.sashItems=[],super.dispose()}}class tw{constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=tw.TemplateId,this.renderedTemplates=new Set;const r=new Map(t.map(s=>[s.templateId,s]));this.renderers=[];for(const s of e){const o=r.get(s.templateId);if(!o)throw new Error(`Table cell renderer for template id ${s.templateId} not found.`);this.renderers.push(o)}}renderTemplate(e){const t=se(e,ce(".monaco-table-tr")),n=[],r=[];for(let o=0;o<this.columns.length;o++){const a=this.renderers[o],l=se(t,ce(".monaco-table-td",{"data-col-index":o}));l.style.width=`${this.getColumnSize(o)}px`,n.push(l),r.push(a.renderTemplate(l))}const s={container:e,cellContainers:n,cellTemplateData:r};return this.renderedTemplates.add(s),s}renderElement(e,t,n,r){for(let s=0;s<this.columns.length;s++){const a=this.columns[s].project(e);this.renderers[s].renderElement(a,t,n.cellTemplateData[s],r)}}disposeElement(e,t,n,r){for(let s=0;s<this.columns.length;s++){const o=this.renderers[s];if(o.disposeElement){const l=this.columns[s].project(e);o.disposeElement(l,t,n.cellTemplateData[s],r)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);_r(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}}tw.TemplateId="row";function N3e(i){return{getHeight(e){return i.getHeight(e)},getTemplateId(){return tw.TemplateId}}}class A3e{get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:Re.None}constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new H,this.onDidLayout=this._onDidLayout.event,this.element=ce(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}layout(e){this._onDidLayout.fire([this.index,e])}}class sI{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,n,r,s,o){this.virtualDelegate=n,this.domId=`table_id_${++sI.InstanceCount}`,this.disposables=new ae,this.cachedWidth=0,this.cachedHeight=0,this.domNode=se(t,ce(`.monaco-table.${this.domId}`));const a=r.map((d,u)=>new A3e(d,u)),l={size:a.reduce((d,u)=>d+u.column.weight,0),views:a.map(d=>({size:d.column.weight,view:d}))};this.splitview=this.disposables.add(new yY(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;const c=new tw(r,s,d=>this.splitview.getViewSize(d));this.list=this.disposables.add(new Ga(e,this.domNode,N3e(n),[c],o)),Re.any(...a.map(d=>d.onDidLayout))(([d,u])=>c.layoutColumn(d,u),null,this.disposables),this.splitview.onDidSashReset(d=>{const u=r.reduce((f,g)=>f+g.weight,0),h=r[d].weight/u*this.cachedWidth;this.splitview.resizeView(d,h)},null,this.disposables),this.styleElement=ca(this.domNode),this.style(O4e)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}sI.InstanceCount=0;class nb extends $a{constructor(e){super(),this._onChange=this._register(new H),this.onChange=this._onChange.event,this._onKeyDown=this._register(new H),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...Qe.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault(),n.stopPropagation();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 2+2+2+16}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}const P3e=p("caseDescription","Match Case"),M3e=p("wordsDescription","Match Whole Word"),O3e=p("regexDescription","Use Regular Expression");class CY extends nb{constructor(e){super({icon:me.caseSensitive,title:P3e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class wY extends nb{constructor(e){super({icon:me.wholeWord,title:M3e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class SY extends nb{constructor(e){super({icon:me.regex,title:O3e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class F3e{constructor(e,t=0,n=e.length,r=t-1){this.items=e,this.start=t,this.end=n,this.index=r}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class B3e{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new F3e(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const Ob=ce;let W3e=class extends $a{constructor(e,t,n){var r;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new H),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new H),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(r=this.options.tooltip)!==null&&r!==void 0?r:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=se(e,Ob(".monaco-inputbox.idle"));const s=this.options.flexibleHeight?"textarea":"input",o=se(this.element,Ob(".ibwrapper"));if(this.input=se(o,Ob(s+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=se(o,Ob("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new OZ(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),se(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(c=>this.input.scrollTop=c.scrollTop));const a=this._register(new Dt(document,"selectionchange")),l=Re.filter(a.event,()=>{const c=document.getSelection();return(c==null?void 0:c.anchorNode)===o});this._register(l(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new fa(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:ug(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){if(this.state==="open"&&Ro(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${Sg(n.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=Es(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:r=>{var s,o;if(!this.message)return null;e=se(r,Ob(".monaco-inputbox-container")),t();const a={inline:!0,className:"monaco-inputbox-message"},l=this.message.formatContent?YFe(this.message.content,a):XFe(this.message.content,a);l.classList.add(this.classForType(this.message.type));const c=this.stylesForType(this.message.type);return l.style.backgroundColor=(s=c.background)!==null&&s!==void 0?s:"",l.style.color=(o=c.foreground)!==null&&o!==void 0?o:"",l.style.border=c.border?`1px solid ${c.border}`:"",se(e,l),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=p("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=p("alertWarningMessage","Warning: {0}",this.message.content):n=p("alertInfoMessage","Info: {0}",this.message.content),jr(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText=" ",this.layout()}applyStyles(){var e,t,n;const r=this.options.inputBoxStyles,s=(e=r.inputBackground)!==null&&e!==void 0?e:"",o=(t=r.inputForeground)!==null&&t!==void 0?t:"",a=(n=r.inputBorder)!==null&&n!==void 0?n:"";this.element.style.backgroundColor=s,this.element.style.color=o,this.input.style.backgroundColor="inherit",this.input.style.color=o,this.element.style.border=`1px solid ${Sg(a,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=ug(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,r=t.selectionEnd,s=t.value;n!==null&&r!==null&&(this.value=s.substr(0,n)+e+s.substr(r),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){var e;this._hideMessage(),this.message=null,(e=this.actionbar)===null||e===void 0||e.dispose(),super.dispose()}};class xY extends W3e{constructor(e,t,n){const r=p({key:"history.inputbox.hint",comment:["Text will be prefixed with ⇅ plus a single space, then used as a hint where input field keeps history"]},"for history"),s=` or ⇅ ${r}`,o=` (⇅ ${r})`;super(e,t,n),this._onDidFocus=this._register(new H),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new H),this.onDidBlur=this._onDidBlur.event,this.history=new B3e(n.history,100);const a=()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(s)&&!this.placeholder.endsWith(o)&&this.history.getHistory().length){const l=this.placeholder.endsWith(")")?s:o,c=this.placeholder+l;n.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=c:this.setPlaceHolder(c)}};this.observer=new MutationObserver((l,c)=>{l.forEach(d=>{d.target.textContent||a()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>a()),this.onblur(this.input,()=>{const l=c=>{if(this.placeholder.endsWith(c)){const d=this.placeholder.slice(0,this.placeholder.length-c.length);return n.showPlaceholderOnFocus?this.placeholder=d:this.setPlaceHolder(d),!0}else return!1};l(o)||l(s)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",zh(this.value?this.value:p("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,zh(this.value))}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}const V3e=p("defaultLabel","input");class TY extends $a{constructor(e,t,n){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new vr),this.additionalToggles=[],this._onDidOptionChange=this._register(new H),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new H),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new H),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new H),this._onKeyUp=this._register(new H),this._onCaseSensitiveKeyDown=this._register(new H),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new H),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||V3e,this.showCommonFindToggles=!!n.showCommonFindToggles;const r=n.appendCaseSensitiveLabel||"",s=n.appendWholeWordsLabel||"",o=n.appendRegexLabel||"",a=n.history||[],l=!!n.flexibleHeight,c=!!n.flexibleWidth,d=n.flexibleMaxHeight;if(this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new xY(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:n.showHistoryHint,flexibleHeight:l,flexibleWidth:c,flexibleMaxHeight:d,inputBoxStyles:n.inputBoxStyles})),this.showCommonFindToggles){this.regex=this._register(new SY(Object.assign({appendTitle:o,isChecked:!1},n.toggleStyles))),this._register(this.regex.onChange(h=>{this._onDidOptionChange.fire(h),!h&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(h=>{this._onRegexKeyDown.fire(h)})),this.wholeWords=this._register(new wY(Object.assign({appendTitle:s,isChecked:!1},n.toggleStyles))),this._register(this.wholeWords.onChange(h=>{this._onDidOptionChange.fire(h),!h&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new CY(Object.assign({appendTitle:r,isChecked:!1},n.toggleStyles))),this._register(this.caseSensitive.onChange(h=>{this._onDidOptionChange.fire(h),!h&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(h=>{this._onCaseSensitiveKeyDown.fire(h)}));const u=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,h=>{if(h.equals(15)||h.equals(17)||h.equals(9)){const f=u.indexOf(document.activeElement);if(f>=0){let g=-1;h.equals(17)?g=(f+1)%u.length:h.equals(15)&&(f===0?g=u.length-1:g=f-1),h.equals(9)?(u[f].blur(),this.inputBox.focus()):g>=0&&u[g].focus(),_t.stop(h,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(n==null?void 0:n.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e==null||e.appendChild(this.domNode),this._register(ee(this.inputBox.inputElement,"compositionstart",u=>{this.imeSessionInProgress=!0})),this._register(ee(this.inputBox.inputElement,"compositionend",u=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,u=>this._onKeyDown.fire(u)),this.onkeyup(this.inputBox.inputElement,u=>this._onKeyUp.fire(u)),this.oninput(this.inputBox.inputElement,u=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,u=>this._onMouseDown.fire(u))}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){var e,t,n;this.domNode.classList.remove("disabled"),this.inputBox.enable(),(e=this.regex)===null||e===void 0||e.enable(),(t=this.wholeWords)===null||t===void 0||t.enable(),(n=this.caseSensitive)===null||n===void 0||n.enable();for(const r of this.additionalToggles)r.enable()}disable(){var e,t,n;this.domNode.classList.add("disabled"),this.inputBox.disable(),(e=this.regex)===null||e===void 0||e.disable(),(t=this.wholeWords)===null||t===void 0||t.disable(),(n=this.caseSensitive)===null||n===void 0||n.disable();for(const r of this.additionalToggles)r.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new ae;for(const t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(n=>{this._onDidOptionChange.fire(n),!n&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){var t,n,r,s,o,a;e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=((n=(t=this.caseSensitive)===null||t===void 0?void 0:t.width())!==null&&n!==void 0?n:0)+((s=(r=this.wholeWords)===null||r===void 0?void 0:r.width())!==null&&s!==void 0?s:0)+((a=(o=this.regex)===null||o===void 0?void 0:o.width())!==null&&a!==void 0?a:0)+this.additionalToggles.reduce((l,c)=>l+c.width(),0)}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){var e,t;return(t=(e=this.caseSensitive)===null||e===void 0?void 0:e.checked)!==null&&t!==void 0?t:!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){var e,t;return(t=(e=this.wholeWords)===null||e===void 0?void 0:e.checked)!==null&&t!==void 0?t:!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){var e,t;return(t=(e=this.regex)===null||e===void 0?void 0:e.checked)!==null&&t!==void 0?t:!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){var e;(e=this.caseSensitive)===null||e===void 0||e.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}var oc;(function(i){i[i.Expanded=0]="Expanded",i[i.Collapsed=1]="Collapsed",i[i.PreserveOrExpanded=2]="PreserveOrExpanded",i[i.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(oc||(oc={}));var bg;(function(i){i[i.Unknown=0]="Unknown",i[i.Twistie=1]="Twistie",i[i.Element=2]="Element",i[i.Filter=3]="Filter"})(bg||(bg={}));class wo extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class sB{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function oB(i){return typeof i=="object"&&"visibility"in i&&"data"in i}function yy(i){switch(i){case!0:return 1;case!1:return 0;default:return i}}function zE(i){return typeof i.collapsible=="boolean"}class H3e{constructor(e,t,n,r={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new D3,this._onDidChangeCollapseState=new H,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new H,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new H,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new Ha(UG),this.collapseByDefault=typeof r.collapseByDefault>"u"?!1:r.collapseByDefault,this.filter=r.filter,this.autoExpandSingleChildren=typeof r.autoExpandSingleChildren>"u"?!1:r.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,n=St.empty(),r={}){if(e.length===0)throw new wo(this.user,"Invalid tree location");r.diffIdentityProvider?this.spliceSmart(r.diffIdentityProvider,e,t,n,r):this.spliceSimple(e,t,n,r)}spliceSmart(e,t,n,r,s,o){var a;r===void 0&&(r=St.empty()),o===void 0&&(o=(a=s.diffDepth)!==null&&a!==void 0?a:0);const{parentNode:l}=this.getParentNodeWithListIndex(t);if(!l.lastDiffIds)return this.spliceSimple(t,n,r,s);const c=[...r],d=t[t.length-1],u=new fc({getElements:()=>l.lastDiffIds},{getElements:()=>[...l.children.slice(0,d),...c,...l.children.slice(d+n)].map(y=>e.getId(y.element).toString())}).ComputeDiff(!1);if(u.quitEarly)return l.lastDiffIds=void 0,this.spliceSimple(t,n,c,s);const h=t.slice(0,-1),f=(y,b,v)=>{if(o>0)for(let C=0;C<v;C++)y--,b--,this.spliceSmart(e,[...h,y,0],Number.MAX_SAFE_INTEGER,c[b].children,s,o-1)};let g=Math.min(l.children.length,d+n),m=c.length;for(const y of u.changes.sort((b,v)=>v.originalStart-b.originalStart))f(g,m,g-(y.originalStart+y.originalLength)),g=y.originalStart,m=y.modifiedStart-d,this.spliceSimple([...h,g],y.originalLength,St.slice(c,m,m+y.modifiedLength),s);f(g,m,g)}spliceSimple(e,t,n=St.empty(),{onDidCreateNode:r,onDidDeleteNode:s,diffIdentityProvider:o}){const{parentNode:a,listIndex:l,revealed:c,visible:d}=this.getParentNodeWithListIndex(e),u=[],h=St.map(n,T=>this.createTreeNode(T,a,a.visible?1:0,c,u,r)),f=e[e.length-1],g=a.children.length>0;let m=0;for(let T=f;T>=0&&T<a.children.length;T--){const I=a.children[T];if(I.visible){m=I.visibleChildIndex;break}}const y=[];let b=0,v=0;for(const T of h)y.push(T),v+=T.renderNodeCount,T.visible&&(T.visibleChildIndex=m+b++);const C=s8(a.children,f,t,y);o?a.lastDiffIds?s8(a.lastDiffIds,f,t,y.map(T=>o.getId(T.element).toString())):a.lastDiffIds=a.children.map(T=>o.getId(T.element).toString()):a.lastDiffIds=void 0;let w=0;for(const T of C)T.visible&&w++;if(w!==0)for(let T=f+y.length;T<a.children.length;T++){const I=a.children[T];I.visible&&(I.visibleChildIndex-=w)}if(a.visibleChildrenCount+=b-w,c&&d){const T=C.reduce((I,R)=>I+(R.visible?R.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,v-T),this.list.splice(l,T,u)}if(C.length>0&&s){const T=I=>{s(I),I.children.forEach(T)};C.forEach(T)}this._onDidSplice.fire({insertedNodes:y,deletedNodes:C});const S=a.children.length>0;g!==S&&this.setCollapsible(e.slice(0,-1),S);let L=a;for(;L;){if(L.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}L=L.parent}}rerender(e){if(e.length===0)throw new wo(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:r}=this.getTreeNodeWithListIndex(e);t.visible&&r&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:r}=this.getTreeNodeWithListIndex(e);return n&&r?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);const r={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,r))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const r=this.getTreeNode(e);typeof t>"u"&&(t=!r.collapsed);const s={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}_setCollapseState(e,t){const{node:n,listIndex:r,revealed:s}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(n,r,s,t);if(n!==this.root&&this.autoExpandSingleChildren&&o&&!zE(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let l=0;l<n.children.length;l++)if(n.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return o}_setListNodeCollapseState(e,t,n,r){const s=this._setNodeCollapseState(e,r,!1);if(!n||!e.visible||!s)return s;const o=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=o-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),s}_setNodeCollapseState(e,t,n){let r;if(e===this.root?r=!1:(zE(t)?(r=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(r=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):r=!1,r&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!zE(t)&&t.recursive)for(const s of e.children)r=this._setNodeCollapseState(s,t,!0)||r;return r}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,n,r,s,o){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,n);a.visibility=l,r&&s.push(a);const c=e.children||St.empty(),d=r&&l!==0&&!a.collapsed;let u=0,h=1;for(const f of c){const g=this.createTreeNode(f,a,l,d,s,o);a.children.push(g),h+=g.renderNodeCount,g.visible&&(g.visibleChildIndex=u++)}return a.collapsible=a.collapsible||a.children.length>0,a.visibleChildrenCount=u,a.visible=l===2?u>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=h):(a.renderNodeCount=0,r&&s.pop()),o==null||o(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,r=!0){let s;if(e!==this.root){if(s=this._filterNode(e,t),s===0)return e.visible=!1,e.renderNodeCount=0,!1;r&&n.push(e)}const o=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||s!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,s,n,r&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=s===2?a:s===1,e.visibility=s),e.visible?e.collapsed||(e.renderNodeCount+=n.length-o):(e.renderNodeCount=0,r&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):oB(n)?(e.filterData=n.data,yy(n.visibility)):(e.filterData=void 0,yy(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[n,...r]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(r,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[n,...r]=e;if(n<0||n>t.children.length)throw new wo(this.user,"Invalid tree location");return this.getTreeNode(r,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:r,visible:s}=this.getParentNodeWithListIndex(e),o=e[e.length-1];if(o<0||o>t.children.length)throw new wo(this.user,"Invalid tree location");const a=t.children[o];return{node:a,listIndex:n,revealed:r,visible:s&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,r=!0,s=!0){const[o,...a]=e;if(o<0||o>t.children.length)throw new wo(this.user,"Invalid tree location");for(let l=0;l<o;l++)n+=t.children[l].renderNodeCount;return r=r&&!t.collapsed,s=s&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:r,visible:s}:this.getParentNodeWithListIndex(a,t.children[o],n+1,r,s)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:_Se(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}globalThis&&globalThis.__awaiter;class U3e extends ew{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function $E(i){return i instanceof ew?new U3e(i):i}class j3e{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=q.None,this.disposables=new ae}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){var n,r;(r=(n=this.dnd).onDragStart)===null||r===void 0||r.call(n,$E(e),t)}onDragOver(e,t,n,r,s=!0){const o=this.dnd.onDragOver($E(e),t&&t.element,n,r),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return o;if(a&&typeof o!="boolean"&&o.autoExpand&&(this.autoExpandDisposable=Hh(()=>{const h=this.modelProvider(),f=h.getNodeLocation(t);h.isCollapsed(f)&&h.setCollapsed(f,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof o=="boolean"||!o.accept||typeof o.bubble>"u"||o.feedback){if(!s){const h=typeof o=="boolean"?o:o.accept,f=typeof o=="boolean"?void 0:o.effect;return{accept:h,effect:f,feedback:[n]}}return o}if(o.bubble===1){const h=this.modelProvider(),f=h.getNodeLocation(t),g=h.getParentNodeLocation(f),m=h.getNode(g),y=g&&h.getListIndex(g);return this.onDragOver(e,m,y,r,!1)}const l=this.modelProvider(),c=l.getNodeLocation(t),d=l.getListIndex(c),u=l.getListRenderCount(c);return Object.assign(Object.assign({},o),{feedback:cs(d,d+u)})}drop(e,t,n,r){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop($E(e),t&&t.element,n,r)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function z3e(i,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new j3e(i,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(t){const n=i(),r=n.getNodeLocation(t),s=n.getParentNodeLocation(r);return n.getNode(s).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}})})}class aB{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var n,r;(r=(n=this.delegate).setDynamicHeight)===null||r===void 0||r.call(n,e.element,t)}}var Cy;(function(i){i.None="none",i.OnHover="onHover",i.Always="always"})(Cy||(Cy={}));class $3e{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new ae,this.onDidChange=Re.forEach(e,n=>this._elements=n,this.disposables)}dispose(){this.disposables.dispose()}}class wy{constructor(e,t,n,r,s,o={}){var a;this.renderer=e,this.modelProvider=t,this.activeNodes=r,this.renderedIndentGuides=s,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=wy.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=q.None,this.disposables=new ae,this.templateId=e.templateId,this.updateOptions(o),Re.map(n,l=>l.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(a=e.onDidChangeTwistieState)===null||a===void 0||a.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"){const t=$s(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[n,r]of this.renderedNodes)this.renderTreeElement(n,r)}}if(typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==Cy.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[n,r]of this.renderedNodes)this._renderIndentGuides(n,r);if(this.indentGuidesDisposable.dispose(),t){const n=new ae;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=se(e,ce(".monaco-tl-row")),n=se(t,ce(".monaco-tl-indent")),r=se(t,ce(".monaco-tl-twistie")),s=se(t,ce(".monaco-tl-contents")),o=this.renderer.renderTemplate(s);return{container:e,indent:n,twistie:r,indentGuidesDisposable:q.None,templateData:o}}renderElement(e,t,n,r){this.renderedNodes.set(e,n),this.renderedElements.set(e.element,e),this.renderTreeElement(e,n),this.renderer.renderElement(e,t,n.templateData,r)}disposeElement(e,t,n,r){var s,o;n.indentGuidesDisposable.dispose(),(o=(s=this.renderer).disposeElement)===null||o===void 0||o.call(s,e,t,n.templateData,r),typeof r=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){const n=wy.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${n}px`,t.indent.style.width=`${n+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...Qe.asClassNameArray(me.treeItemExpanded));let r=!1;this.renderer.renderTwistie&&(r=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(r||t.twistie.classList.add(...Qe.asClassNameArray(me.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(_r(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new ae,r=this.modelProvider();for(;;){const s=r.getNodeLocation(e),o=r.getParentNodeLocation(s);if(!o)break;const a=r.getNode(o),l=ce(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(a)&&l.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(l):t.indent.insertBefore(l,t.indent.firstElementChild),this.renderedIndentGuides.add(a,l),n.add(st(()=>this.renderedIndentGuides.delete(a,l))),e=a}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,n=this.modelProvider();e.forEach(r=>{const s=n.getNodeLocation(r);try{const o=n.getParentNodeLocation(s);r.collapsible&&r.children.length>0&&!r.collapsed?t.add(r):o&&t.add(n.getNode(o))}catch{}}),this.activeIndentNodes.forEach(r=>{t.has(r)||this.renderedIndentGuides.forEach(r,s=>s.classList.remove("active"))}),t.forEach(r=>{this.activeIndentNodes.has(r)||this.renderedIndentGuides.forEach(r,s=>s.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),an(this.disposables)}}wy.DefaultIndent=8;class K3e{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new ae,e.onWillRefilter(this.reset,this,this.disposables)}filter(e,t){let n=1;if(this._filter){const o=this._filter.filter(e,t);if(typeof o=="boolean"?n=o?1:0:oB(o)?n=yy(o.visibility):n=o,n===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:El.Default,visibility:n};const r=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),s=Array.isArray(r)?r:[r];for(const o of s){const a=o&&o.toString();if(typeof a>"u")return{data:El.Default,visibility:n};let l;if(this.tree.findMatchType===ep.Contiguous){const c=a.toLowerCase().indexOf(this._lowercasePattern);if(c>-1){l=[Number.MAX_SAFE_INTEGER,0];for(let d=this._lowercasePattern.length;d>0;d--)l.push(c+d-1)}}else l=Qg(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,s.length===1?{data:l,visibility:n}:{data:{label:a,score:l},visibility:n}}return this.tree.findMode===Ec.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:El.Default,visibility:n}}reset(){this._totalCount=0,this._matchCount=0}dispose(){an(this.disposables)}}var Ec;(function(i){i[i.Highlight=0]="Highlight",i[i.Filter=1]="Filter"})(Ec||(Ec={}));var ep;(function(i){i[i.Fuzzy=0]="Fuzzy",i[i.Contiguous=1]="Contiguous"})(ep||(ep={}));let q3e=class{get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,n,r,s,o={}){var a,l;this.tree=e,this.view=n,this.filter=r,this.contextViewProvider=s,this.options=o,this._pattern="",this.width=0,this._onDidChangeMode=new H,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new H,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new H,this._onDidChangeOpenState=new H,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new ae,this.disposables=new ae,this._mode=(a=e.options.defaultFindMode)!==null&&a!==void 0?a:Ec.Highlight,this._matchType=(l=e.options.defaultFindMatchType)!==null&&l!==void 0?l:ep.Fuzzy,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){var e,t,n,r;const s=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&s?!((e=this.tree.options.showNotFoundMessage)!==null&&e!==void 0)||e?(t=this.widget)===null||t===void 0||t.showMessage({type:2,content:p("not found","No elements found.")}):(n=this.widget)===null||n===void 0||n.showMessage({type:2}):(r=this.widget)===null||r===void 0||r.clearMessage()}shouldAllowFocus(e){return!this.widget||!this.pattern||this._mode===Ec.Filter||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!El.isDefault(e.filterData)}layout(e){var t;this.width=e,(t=this.widget)===null||t===void 0||t.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}};function CV(i){let e=bg.Unknown;return qR(i.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=bg.Twistie:qR(i.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=bg.Element:qR(i.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=bg.Filter),{browserEvent:i.browserEvent,element:i.element?i.element.element:null,target:e}}function Ex(i,e){e(i),i.children.forEach(t=>Ex(t,e))}class KE{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new H,this.onDidChange=this._onDidChange.event}set(e,t){!(t!=null&&t.__forceEvent)&&fi(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const r=this;this._onDidChange.fire({get elements(){return r.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=d=>l.delete(d);t.forEach(d=>Ex(d,c)),this.set([...l.values()]);return}const n=new Set,r=l=>n.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>Ex(l,r));const s=new Map,o=l=>s.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>Ex(l,o));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!n.has(c))a.push(l);else{const u=s.get(c);u&&u.visible&&a.push(u)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class G3e extends uY{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if(aY(e.browserEvent.target)||kh(e.browserEvent.target)||Xm(e.browserEvent.target)||e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,r=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let s=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?s=this.tree.expandOnlyOnTwistieClick(t.element):s=!!this.tree.expandOnlyOnTwistieClick,s&&!r&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){const o=this.tree.getNodeLocation(t),a=e.browserEvent.altKey;if(this.tree.setFocus([o]),this.tree.toggleCollapsed(o,a),s&&r){e.browserEvent.isHandledByList=!0;return}}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}}class Z3e extends Ga{constructor(e,t,n,r,s,o,a,l){super(e,t,n,r,l),this.focusTrait=s,this.selectionTrait=o,this.anchorTrait=a}createMouseController(e){return new G3e(this,e.tree)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;const r=[],s=[];let o;n.forEach((a,l)=>{this.focusTrait.has(a)&&r.push(e+l),this.selectionTrait.has(a)&&s.push(e+l),this.anchorTrait.has(a)&&(o=e+l)}),r.length>0&&super.setFocus(Mh([...super.getFocus(),...r])),s.length>0&&super.setSelection(Mh([...super.getSelection(),...s])),typeof o=="number"&&super.setAnchor(o)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(r=>this.element(r)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(r=>this.element(r)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class kY{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return Re.filter(Re.map(this.view.onMouseDblClick,CV),e=>e.target!==bg.Filter)}get onPointer(){return Re.map(this.view.onPointer,CV)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return Re.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e,t;return(t=(e=this.findController)===null||e===void 0?void 0:e.mode)!==null&&t!==void 0?t:Ec.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){var e,t;return(t=(e=this.findController)===null||e===void 0?void 0:e.matchType)!==null&&t!==void 0?t:ep.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,n,r,s={}){var o;this._user=e,this._options=s,this.eventBufferer=new D3,this.onDidChangeFindOpenState=Re.None,this.disposables=new ae,this._onWillRefilter=new H,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new H;const a=new aB(n),l=new h8,c=new h8,d=this.disposables.add(new $3e(c.event)),u=new Y3;this.renderers=r.map(y=>new wy(y,()=>this.model,l.event,d,u,s));for(const y of this.renderers)this.disposables.add(y);let h;s.keyboardNavigationLabelProvider&&(h=new K3e(this,s.keyboardNavigationLabelProvider,s.filter),s=Object.assign(Object.assign({},s),{filter:h}),this.disposables.add(h)),this.focus=new KE(()=>this.view.getFocusedElements()[0],s.identityProvider),this.selection=new KE(()=>this.view.getSelectedElements()[0],s.identityProvider),this.anchor=new KE(()=>this.view.getAnchorElement(),s.identityProvider),this.view=new Z3e(e,t,a,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},z3e(()=>this.model,s)),{tree:this})),this.model=this.createModel(e,this.view,s),l.input=this.model.onDidChangeCollapseState;const f=Re.forEach(this.model.onDidSplice,y=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(y),this.selection.onDidModelSplice(y)})},this.disposables);f(()=>null,null,this.disposables);const g=this.disposables.add(new H),m=this.disposables.add(new Ha(0));if(this.disposables.add(Re.any(f,this.focus.onDidChange,this.selection.onDidChange)(()=>{m.trigger(()=>{const y=new Set;for(const b of this.focus.getNodes())y.add(b);for(const b of this.selection.getNodes())y.add(b);g.fire([...y.values()])})})),c.input=g.event,s.keyboardSupport!==!1){const y=Re.chain(this.view.onKeyDown,b=>b.filter(v=>!kh(v.target)).map(v=>new kn(v)));Re.chain(y,b=>b.filter(v=>v.keyCode===15))(this.onLeftArrow,this,this.disposables),Re.chain(y,b=>b.filter(v=>v.keyCode===17))(this.onRightArrow,this,this.disposables),Re.chain(y,b=>b.filter(v=>v.keyCode===10))(this.onSpace,this,this.disposables)}if((!((o=s.findWidgetEnabled)!==null&&o!==void 0)||o)&&s.keyboardNavigationLabelProvider&&s.contextViewProvider){const y=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new q3e(this,this.model,this.view,h,s.contextViewProvider,y),this.focusNavigationFilter=b=>this.findController.shouldAllowFocus(b),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=Re.None,this.onDidChangeFindMatchType=Re.None;this.styleElement=ca(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===Cy.Always)}updateOptions(e={}){var t;this._options=Object.assign(Object.assign({},this._options),e);for(const n of this.renderers)n.updateOptions(e);this.view.updateOptions(this._options),(t=this.findController)===null||t===void 0||t.updateOptions(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===Cy.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}domFocus(){this.view.domFocus()}layout(e,t){var n;this.view.layout(e,t),Oh(t)&&((n=this.findController)===null||n===void 0||n.layout(t))}style(e){const t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const n=e.map(s=>this.model.getNode(s));this.selection.set(n,t);const r=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setSelection(r,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const n=e.map(s=>this.model.getNode(s));this.focus.set(n,t);const r=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setFocus(r,t,!0)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);n!==-1&&this.view.reveal(n,t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],r=this.model.getNodeLocation(n);if(!this.model.setCollapsed(r,!0)){const o=this.model.getParentNodeLocation(r);if(!o)return;const a=this.model.getListIndex(o);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],r=this.model.getNodeLocation(n);if(!this.model.setCollapsed(r,!1)){if(!n.children.some(l=>l.visible))return;const[o]=this.view.getFocus(),a=o+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],r=this.model.getNodeLocation(n),s=e.browserEvent.altKey;this.model.setCollapsed(r,void 0,s)}dispose(){an(this.disposables),this.view.dispose()}}class lB{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new H3e(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare(r,s){return n.sorter.compare(r.element,s.element)}}),this.identityProvider=n.identityProvider}setChildren(e,t=St.empty(),n={}){const r=this.getElementLocation(e);this._setChildren(r,this.preserveCollapseState(t),n)}_setChildren(e,t=St.empty(),n){const r=new Set,s=new Set,o=l=>{var c;if(l.element===null)return;const d=l;if(r.add(d.element),this.nodes.set(d.element,d),this.identityProvider){const u=this.identityProvider.getId(d.element).toString();s.add(u),this.nodesByIdentity.set(u,d)}(c=n.onDidCreateNode)===null||c===void 0||c.call(n,d)},a=l=>{var c;if(l.element===null)return;const d=l;if(r.has(d.element)||this.nodes.delete(d.element),this.identityProvider){const u=this.identityProvider.getId(d.element).toString();s.has(u)||this.nodesByIdentity.delete(u)}(c=n.onDidDeleteNode)===null||c===void 0||c.call(n,d)};this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},n),{onDidCreateNode:o,onDidDeleteNode:a}))}preserveCollapseState(e=St.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),St.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){const o=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(o)}if(!n){let o;return typeof t.collapsed>"u"?o=void 0:t.collapsed===oc.Collapsed||t.collapsed===oc.PreserveOrCollapsed?o=!0:t.collapsed===oc.Expanded||t.collapsed===oc.PreserveOrExpanded?o=!1:o=!!t.collapsed,Object.assign(Object.assign({},t),{children:this.preserveCollapseState(t.children),collapsed:o})}const r=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible;let s;return typeof t.collapsed>"u"||t.collapsed===oc.PreserveOrCollapsed||t.collapsed===oc.PreserveOrExpanded?s=n.collapsed:t.collapsed===oc.Collapsed?s=!0:t.collapsed===oc.Expanded?s=!1:s=!!t.collapsed,Object.assign(Object.assign({},t),{collapsible:r,collapsed:s,children:this.preserveCollapseState(t.children)})})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const r=this.getElementLocation(e);return this.model.setCollapsed(r,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new wo(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new wo(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new wo(this.user,`Tree element not found: ${e}`);const n=this.model.getNodeLocation(t),r=this.model.getParentNodeLocation(n);return this.model.getNode(r).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new wo(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function Nx(i){const e=[i.element],t=i.incompressible||!1;return{element:{elements:e,incompressible:t},children:St.map(St.from(i.children),Nx),collapsible:i.collapsible,collapsed:i.collapsed}}function Ax(i){const e=[i.element],t=i.incompressible||!1;let n,r;for(;[r,n]=St.consume(St.from(i.children),2),!(r.length!==1||r[0].incompressible);)i=r[0],e.push(i.element);return{element:{elements:e,incompressible:t},children:St.map(St.concat(r,n),Ax),collapsible:i.collapsible,collapsed:i.collapsed}}function eM(i,e=0){let t;return e<i.element.elements.length-1?t=[eM(i,e+1)]:t=St.map(St.from(i.children),n=>eM(n,0)),e===0&&i.element.incompressible?{element:i.element.elements[e],children:t,incompressible:!0,collapsible:i.collapsible,collapsed:i.collapsed}:{element:i.element.elements[e],children:t,collapsible:i.collapsible,collapsed:i.collapsed}}function wV(i){return eM(i,0)}function LY(i,e,t){return i.element===e?Object.assign(Object.assign({},i),{children:t}):Object.assign(Object.assign({},i),{children:St.map(St.from(i.children),n=>LY(n,e,t))})}const X3e=i=>({getId(e){return e.elements.map(t=>i.getId(t).toString()).join("\0")}});class Y3e{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new lB(e,t,n),this.enabled=typeof n.compressionEnabled>"u"?!0:n.compressionEnabled,this.identityProvider=n.identityProvider}setChildren(e,t=St.empty(),n){const r=n.diffIdentityProvider&&X3e(n.diffIdentityProvider);if(e===null){const g=St.map(t,this.enabled?Ax:Nx);this._setChildren(null,g,{diffIdentityProvider:r,diffDepth:1/0});return}const s=this.nodes.get(e);if(!s)throw new wo(this.user,"Unknown compressed tree node");const o=this.model.getNode(s),a=this.model.getParentNodeLocation(s),l=this.model.getNode(a),c=wV(o),d=LY(c,e,t),u=(this.enabled?Ax:Nx)(d),h=n.diffIdentityProvider?(g,m)=>n.diffIdentityProvider.getId(g)===n.diffIdentityProvider.getId(m):void 0;if(fi(u.element.elements,o.element.elements,h)){this._setChildren(s,u.children||St.empty(),{diffIdentityProvider:r,diffDepth:1});return}const f=l.children.map(g=>g===o?u:g);this._setChildren(l.element,f,{diffIdentityProvider:r,diffDepth:o.depth-l.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const n=this.model.getNode().children,r=St.map(n,wV),s=St.map(r,e?Ax:Nx);this._setChildren(null,s,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){const r=new Set,s=a=>{for(const l of a.element.elements)r.add(l),this.nodes.set(l,a.element)},o=a=>{for(const l of a.element.elements)r.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,Object.assign(Object.assign({},n),{onDidCreateNode:s,onDidDeleteNode:o}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const r=this.getCompressedNode(e);return this.model.setCollapsed(r,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new wo(this.user,`Tree element not found: ${e}`);return t}}const Q3e=i=>i[i.length-1];class cB{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new cB(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}}function J3e(i,e){return{splice(t,n,r){e.splice(t,n,r.map(s=>i.map(s)))},updateElementHeight(t,n){e.updateElementHeight(t,n)}}}function e5e(i,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(i(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(i(t),n)}}})}class t5e{get onDidSplice(){return Re.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidChangeCollapseState(){return Re.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return Re.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e,t,n={}){this.rootRef=null,this.elementMapper=n.elementMapper||Q3e;const r=s=>this.elementMapper(s.elements);this.nodeMapper=new sB(s=>new cB(r,s)),this.model=new Y3e(e,J3e(this.nodeMapper,t),e5e(r,n))}setChildren(e,t=St.empty(),n={}){this.model.setChildren(e,t,n)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var n5e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s};class dB extends kY{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,n,r,s={}){super(e,t,n,r,s),this.user=e}setChildren(e,t=St.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new lB(e,t,n)}}class DY{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,r){const s=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);s.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,r)):(n.compressedTreeNode=s,this.renderer.renderCompressedElements(s,t,n.data,r))}disposeElement(e,t,n,r){var s,o,a,l;n.compressedTreeNode?(o=(s=this.renderer).disposeCompressedElements)===null||o===void 0||o.call(s,n.compressedTreeNode,t,n.data,r):(l=(a=this.renderer).disposeElement)===null||l===void 0||l.call(a,e,t,n.data,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}n5e([Ci],DY.prototype,"compressedTreeNodeProvider",null);function i5e(i,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=i().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}})}class IY extends dB{constructor(e,t,n,r,s={}){const o=()=>this,a=r.map(l=>new DY(o,l));super(e,t,n,a,i5e(o,s))}setChildren(e,t=St.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t,n){return new t5e(e,t,n)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}var Nu=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function qE(i){return Object.assign(Object.assign({},i),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function tM(i,e){return e.parent?e.parent===i?!0:tM(i,e.parent):!1}function r5e(i,e){return i===e||tM(i,e)||tM(e,i)}class uB{get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new uB(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class s5e{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,r){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,r)}renderTwistie(e,t){return e.slow?(t.classList.add(...Qe.asClassNameArray(me.treeItemLoading)),!0):(t.classList.remove(...Qe.asClassNameArray(me.treeItemLoading)),!1)}disposeElement(e,t,n,r){var s,o;(o=(s=this.renderer).disposeElement)===null||o===void 0||o.call(s,this.nodeMapper.map(e),t,n.templateData,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function SV(i){return{browserEvent:i.browserEvent,elements:i.elements.map(e=>e.element)}}function xV(i){return{browserEvent:i.browserEvent,element:i.element&&i.element.element,target:i.target}}class o5e extends ew{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function GE(i){return i instanceof ew?new o5e(i):i}class a5e{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){var n,r;(r=(n=this.dnd).onDragStart)===null||r===void 0||r.call(n,GE(e),t)}onDragOver(e,t,n,r,s=!0){return this.dnd.onDragOver(GE(e),t&&t.element,n,r)}drop(e,t,n,r){this.dnd.drop(GE(e),t&&t.element,n,r)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}dispose(){this.dnd.dispose()}}function RY(i){return i&&Object.assign(Object.assign({},i),{collapseByDefault:!0,identityProvider:i.identityProvider&&{getId(e){return i.identityProvider.getId(e.element)}},dnd:i.dnd&&new a5e(i.dnd),multipleSelectionController:i.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return i.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return i.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:i.accessibilityProvider&&Object.assign(Object.assign({},i.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:i.accessibilityProvider.getRole?e=>i.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:i.accessibilityProvider.isChecked?e=>{var t;return!!(!((t=i.accessibilityProvider)===null||t===void 0)&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return i.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return i.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:i.accessibilityProvider.getWidgetRole?()=>i.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:i.accessibilityProvider.getAriaLevel&&(e=>i.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:i.accessibilityProvider.getActiveDescendantId&&(e=>i.accessibilityProvider.getActiveDescendantId(e.element))}),filter:i.filter&&{filter(e,t){return i.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:i.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},i.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return i.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof i.expandOnlyOnTwistieClick>"u"?void 0:typeof i.expandOnlyOnTwistieClick!="function"?i.expandOnlyOnTwistieClick:e=>i.expandOnlyOnTwistieClick(e.element),defaultFindVisibility:e=>e.hasChildren&&e.stale?1:typeof i.defaultFindVisibility=="number"?i.defaultFindVisibility:typeof i.defaultFindVisibility>"u"?2:i.defaultFindVisibility(e.element)})}function nM(i,e){e(i),i.children.forEach(t=>nM(t,e))}class EY{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return Re.map(this.tree.onDidChangeFocus,SV)}get onDidChangeSelection(){return Re.map(this.tree.onDidChangeSelection,SV)}get onMouseDblClick(){return Re.map(this.tree.onMouseDblClick,xV)}get onPointer(){return Re.map(this.tree.onPointer,xV)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,n,r,s,o={}){this.user=e,this.dataSource=s,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new H,this._onDidChangeNodeSlowState=new H,this.nodeMapper=new sB(a=>new uB(a)),this.disposables=new ae,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=typeof o.autoExpandSingleChildren>"u"?!1:o.autoExpandSingleChildren,this.sorter=o.sorter,this.collapseByDefault=o.collapseByDefault,this.tree=this.createTree(e,t,n,r,o),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.root=qE({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(e,t,n,r,s){const o=new aB(n),a=r.map(c=>new s5e(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=RY(s)||{};return new dB(e,t,o,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return Nu(this,void 0,void 0,function*(){this.refreshPromises.forEach(r=>r.cancel()),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,n=!1,r,s){return Nu(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new wo(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield Re.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(yield this.refreshAndRenderNode(o,t,r,s),n)try{this.tree.rerender(o)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e,t=!1){const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}expand(e,t=!1){return Nu(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new wo(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield Re.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(yield this.root.refreshPromise,yield Re.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;const r=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(yield this.root.refreshPromise,yield Re.toPromise(this._onDidRender.event)),r})}setSelection(e,t){const n=e.map(r=>this.getDataNode(r));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const n=e.map(r=>this.getDataNode(r));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new wo(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,n,r){return Nu(this,void 0,void 0,function*(){yield this.refreshNode(e,t,n),this.render(e,n,r)})}refreshNode(e,t,n){return Nu(this,void 0,void 0,function*(){let r;if(this.subTreeRefreshPromises.forEach((s,o)=>{!r&&r5e(o,e)&&(r=s.then(()=>this.refreshNode(e,t,n)))}),r)return r;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0;return}return this.doRefreshSubTree(e,t,n)})}doRefreshSubTree(e,t,n){return Nu(this,void 0,void 0,function*(){let r;e.refreshPromise=new Promise(s=>r=s),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const s=yield this.doRefreshNode(e,t,n);e.stale=!1,yield IA.settled(s.map(o=>this.doRefreshSubTree(o,t,n)))}finally{r()}})}doRefreshNode(e,t,n){return Nu(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let r;if(!e.hasChildren)r=Promise.resolve(St.empty());else{const s=this.doGetChildren(e);if(o8(s))r=Promise.resolve(s);else{const o=Vh(800);o.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),r=s.finally(()=>o.cancel())}}try{const s=yield r;return this.setChildren(e,s,t,n)}catch(s){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),ql(s))return[];throw s}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const n=this.dataSource.getChildren(e.element);return o8(n)?this.processChildren(n):(t=Ui(()=>Nu(this,void 0,void 0,function*(){return this.processChildren(yield n)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(ut))}setChildren(e,t,n,r){const s=[...t];if(e.children.length===0&&s.length===0)return[];const o=new Map,a=new Map;for(const d of e.children)if(o.set(d.element,d),this.identityProvider){const u=this.tree.isCollapsed(d);a.set(d.id,{node:d,collapsed:u})}const l=[],c=s.map(d=>{const u=!!this.dataSource.hasChildren(d);if(!this.identityProvider){const m=qE({element:d,parent:e,hasChildren:u});return u&&this.collapseByDefault&&!this.collapseByDefault(d)&&(m.collapsedByDefault=!1,l.push(m)),m}const h=this.identityProvider.getId(d).toString(),f=a.get(h);if(f){const m=f.node;return o.delete(m.element),this.nodes.delete(m.element),this.nodes.set(d,m),m.element=d,m.hasChildren=u,n?f.collapsed?(m.children.forEach(y=>nM(y,b=>this.nodes.delete(b.element))),m.children.splice(0,m.children.length),m.stale=!0):l.push(m):u&&this.collapseByDefault&&!this.collapseByDefault(d)&&(m.collapsedByDefault=!1,l.push(m)),m}const g=qE({element:d,parent:e,id:h,hasChildren:u});return r&&r.viewState.focus&&r.viewState.focus.indexOf(h)>-1&&r.focus.push(g),r&&r.viewState.selection&&r.viewState.selection.indexOf(h)>-1&&r.selection.push(g),r&&r.viewState.expanded&&r.viewState.expanded.indexOf(h)>-1?l.push(g):u&&this.collapseByDefault&&!this.collapseByDefault(d)&&(g.collapsedByDefault=!1,l.push(g)),g});for(const d of o.values())nM(d,u=>this.nodes.delete(u.element));for(const d of c)this.nodes.set(d.element,d);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].collapsedByDefault=!1,l.push(c[0])),l}render(e,t,n){const r=e.children.map(o=>this.asTreeElement(o,t)),s=n&&Object.assign(Object.assign({},n),{diffIdentityProvider:n.diffIdentityProvider&&{getId(o){return n.diffIdentityProvider.getId(o.element)}}});this.tree.setChildren(e===this.root?null:e,r,s),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:n=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?St.map(e.children,r=>this.asTreeElement(r,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose(),this.tree.dispose()}}class hB{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new hB(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class l5e{constructor(e,t,n,r){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=r,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,r){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,r)}renderCompressedElements(e,t,n,r){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,r)}renderTwistie(e,t){return e.slow?(t.classList.add(...Qe.asClassNameArray(me.treeItemLoading)),!0):(t.classList.remove(...Qe.asClassNameArray(me.treeItemLoading)),!1)}disposeElement(e,t,n,r){var s,o;(o=(s=this.renderer).disposeElement)===null||o===void 0||o.call(s,this.nodeMapper.map(e),t,n.templateData,r)}disposeCompressedElements(e,t,n,r){var s,o;(o=(s=this.renderer).disposeCompressedElements)===null||o===void 0||o.call(s,this.compressibleNodeMapperProvider().map(e),t,n.templateData,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=an(this.disposables)}}function c5e(i){const e=i&&RY(i);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return i.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}})})}class d5e extends EY{constructor(e,t,n,r,s,o,a={}){super(e,t,n,s,o,a),this.compressionDelegate=r,this.compressibleNodeMapper=new sB(l=>new hB(l)),this.filter=a.filter}createTree(e,t,n,r,s){const o=new aB(n),a=r.map(c=>new l5e(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=c5e(s)||{};return new IY(e,t,o,a,l)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const n=h=>this.identityProvider.getId(h).toString(),r=h=>{const f=new Set;for(const g of h){const m=this.tree.getCompressedTreeNode(g===this.root?null:g);if(m.element)for(const y of m.element.elements)f.add(n(y.element))}return f},s=r(this.tree.getSelection()),o=r(this.tree.getFocus());super.render(e,t);const a=this.getSelection();let l=!1;const c=this.getFocus();let d=!1;const u=h=>{const f=h.element;if(f)for(let g=0;g<f.elements.length;g++){const m=n(f.elements[g].element),y=f.elements[f.elements.length-1].element;s.has(m)&&a.indexOf(y)===-1&&(a.push(y),l=!0),o.has(m)&&c.indexOf(y)===-1&&(c.push(y),d=!0)}h.children.forEach(u)};u(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),d&&this.setFocus(c)}processChildren(e){return this.filter&&(e=St.filter(e,t=>{const n=this.filter.filter(t,1),r=u5e(n);if(r===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return r===1})),super.processChildren(e)}}function u5e(i){return typeof i=="boolean"?i?1:0:oB(i)?yy(i.visibility):yy(i)}class h5e extends kY{constructor(e,t,n,r,s,o={}){super(e,t,n,r,o),this.user=e,this.dataSource=s,this.identityProvider=o.identityProvider}createModel(e,t,n){return new lB(e,t,n)}}new Ne("isMac",Ot,p("isMac","Whether the operating system is macOS"));new Ne("isLinux",os,p("isLinux","Whether the operating system is Linux"));const oI=new Ne("isWindows",Ar,p("isWindows","Whether the operating system is Windows")),NY=new Ne("isWeb",gf,p("isWeb","Whether the platform is a web browser"));new Ne("isMacNative",Ot&&!gf,p("isMacNative","Whether the operating system is macOS on a non-browser platform"));new Ne("isIOS",Ol,p("isIOS","Whether the operating system is iOS"));new Ne("isMobile",OSe,p("isMobile","Whether the platform is a mobile web browser"));new Ne("isDevelopment",!1,!0);new Ne("productQualityType","",p("productQualityType","Quality type of VS Code"));const AY="inputFocus";new Ne(AY,!1,p("inputFocus","Whether keyboard focus is inside an input box"));var Su=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Ln=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const _a=Lt("listService");class f5e{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new ae,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(e){var t,n;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)===null||t===void 0||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(n=this._lastFocusedWidget)===null||n===void 0||n.getHTMLElement().classList.add("last-focused"))}register(e,t){if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new hY(ca(),"").style(Wp)),this.lists.some(r=>r.widget===e))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),e.getHTMLElement()===document.activeElement&&this.setLastFocusedList(e),Pa(e.onDidFocus(()=>this.setLastFocusedList(e)),st(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(r=>r!==n),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}const Sy=new Ne("listScrollAtBoundary","none");re.or(Sy.isEqualTo("top"),Sy.isEqualTo("both"));re.or(Sy.isEqualTo("bottom"),Sy.isEqualTo("both"));const PY=new Ne("listFocus",!0),aI=new Ne("listSupportsMultiselect",!0),MY=re.and(PY,re.not(AY)),fB=new Ne("listHasSelectionOrFocus",!1),gB=new Ne("listDoubleSelection",!1),pB=new Ne("listMultiSelection",!1),lI=new Ne("listSelectionNavigation",!1),g5e=new Ne("listSupportsFind",!0),mB=new Ne("treeElementCanCollapse",!1),p5e=new Ne("treeElementHasParent",!1),_B=new Ne("treeElementCanExpand",!1),m5e=new Ne("treeElementHasChild",!1),_5e=new Ne("treeFindOpen",!1),OY="listTypeNavigationMode",FY="listAutomaticKeyboardNavigation";function cI(i,e){const t=i.createScoped(e.getHTMLElement());return PY.bindTo(t),t}function dI(i,e){const t=Sy.bindTo(i),n=()=>{const r=e.scrollTop===0,s=e.scrollHeight-e.renderHeight-e.scrollTop<1;r&&s?t.set("both"):r?t.set("top"):s?t.set("bottom"):t.set("none")};return n(),e.onDidScroll(n)}const Vp="workbench.list.multiSelectModifier",Px="workbench.list.openMode",sa="workbench.list.horizontalScrolling",bB="workbench.list.defaultFindMode",vB="workbench.list.typeNavigationMode",Lk="workbench.list.keyboardNavigation",Wl="workbench.list.scrollByPage",yB="workbench.list.defaultFindMatchType",xy="workbench.tree.indent",Dk="workbench.tree.renderIndentGuides",Vl="workbench.list.smoothScrolling",Qc="workbench.list.mouseWheelScrollSensitivity",Jc="workbench.list.fastScrollSensitivity",Ik="workbench.tree.expandMode";function ed(i){return i.getValue(Vp)==="alt"}class b5e extends q{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=ed(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(Vp)&&(this.useAltAsMultipleSelectionModifier=ed(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:cY(e)}isSelectionRangeChangeEvent(e){return dY(e)}}function uI(i,e){var t;const n=i.get(Et),r=i.get(bn),s=new ae;return[Object.assign(Object.assign({},e),{keyboardNavigationDelegate:{mightProducePrintableCharacter(a){return r.mightProducePrintableCharacter(a)}},smoothScrolling:!!n.getValue(Vl),mouseWheelScrollSensitivity:n.getValue(Qc),fastScrollSensitivity:n.getValue(Jc),multipleSelectionController:(t=e.multipleSelectionController)!==null&&t!==void 0?t:s.add(new b5e(n)),keyboardNavigationEventFilter:C5e(r),scrollByPage:!!n.getValue(Wl)}),s]}let iM=class extends Ga{constructor(e,t,n,r,s,o,a,l,c){const d=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!l.getValue(sa),[u,h]=c.invokeFunction(uI,s);super(e,t,n,r,Object.assign(Object.assign({keyboardSupport:!1},u),{horizontalScrolling:d})),this.disposables.add(h),this.contextKeyService=cI(o,this),this.disposables.add(dI(this.contextKeyService,this)),this.listSupportsMultiSelect=aI.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),lI.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this.listHasSelectionOrFocus=fB.bindTo(this.contextKeyService),this.listDoubleSelection=gB.bindTo(this.contextKeyService),this.listMultiSelection=pB.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=ed(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const g=this.getSelection(),m=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(g.length>0||m.length>0),this.listMultiSelection.set(g.length>1),this.listDoubleSelection.set(g.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const g=this.getSelection(),m=this.getFocus();this.listHasSelectionOrFocus.set(g.length>0||m.length>0)})),this.disposables.add(l.onDidChangeConfiguration(g=>{g.affectsConfiguration(Vp)&&(this._useAltAsMultipleSelectionModifier=ed(l));let m={};if(g.affectsConfiguration(sa)&&this.horizontalScrolling===void 0){const y=!!l.getValue(sa);m=Object.assign(Object.assign({},m),{horizontalScrolling:y})}if(g.affectsConfiguration(Wl)){const y=!!l.getValue(Wl);m=Object.assign(Object.assign({},m),{scrollByPage:y})}if(g.affectsConfiguration(Vl)){const y=!!l.getValue(Vl);m=Object.assign(Object.assign({},m),{smoothScrolling:y})}if(g.affectsConfiguration(Qc)){const y=l.getValue(Qc);m=Object.assign(Object.assign({},m),{mouseWheelScrollSensitivity:y})}if(g.affectsConfiguration(Jc)){const y=l.getValue(Jc);m=Object.assign(Object.assign({},m),{fastScrollSensitivity:y})}Object.keys(m).length>0&&this.updateOptions(m)})),this.navigator=new BY(this,Object.assign({configurationService:l},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?eb(e):Wp)}};iM=Su([Ln(5,ot),Ln(6,_a),Ln(7,Et),Ln(8,rt)],iM);let TV=class extends S3e{constructor(e,t,n,r,s,o,a,l,c){const d=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!l.getValue(sa),[u,h]=c.invokeFunction(uI,s);super(e,t,n,r,Object.assign(Object.assign({keyboardSupport:!1},u),{horizontalScrolling:d})),this.disposables=new ae,this.disposables.add(h),this.contextKeyService=cI(o,this),this.disposables.add(dI(this.contextKeyService,this.widget)),this.horizontalScrolling=s.horizontalScrolling,this.listSupportsMultiSelect=aI.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),lI.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this._useAltAsMultipleSelectionModifier=ed(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(g=>{g.affectsConfiguration(Vp)&&(this._useAltAsMultipleSelectionModifier=ed(l));let m={};if(g.affectsConfiguration(sa)&&this.horizontalScrolling===void 0){const y=!!l.getValue(sa);m=Object.assign(Object.assign({},m),{horizontalScrolling:y})}if(g.affectsConfiguration(Wl)){const y=!!l.getValue(Wl);m=Object.assign(Object.assign({},m),{scrollByPage:y})}if(g.affectsConfiguration(Vl)){const y=!!l.getValue(Vl);m=Object.assign(Object.assign({},m),{smoothScrolling:y})}if(g.affectsConfiguration(Qc)){const y=l.getValue(Qc);m=Object.assign(Object.assign({},m),{mouseWheelScrollSensitivity:y})}if(g.affectsConfiguration(Jc)){const y=l.getValue(Jc);m=Object.assign(Object.assign({},m),{fastScrollSensitivity:y})}Object.keys(m).length>0&&this.updateOptions(m)})),this.navigator=new BY(this,Object.assign({configurationService:l},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?eb(e):Wp)}dispose(){this.disposables.dispose(),super.dispose()}};TV=Su([Ln(5,ot),Ln(6,_a),Ln(7,Et),Ln(8,rt)],TV);let kV=class extends sI{constructor(e,t,n,r,s,o,a,l,c,d){const u=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!c.getValue(sa),[h,f]=d.invokeFunction(uI,o);super(e,t,n,r,s,Object.assign(Object.assign({keyboardSupport:!1},h),{horizontalScrolling:u})),this.disposables.add(f),this.contextKeyService=cI(a,this),this.disposables.add(dI(this.contextKeyService,this)),this.listSupportsMultiSelect=aI.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),lI.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=fB.bindTo(this.contextKeyService),this.listDoubleSelection=gB.bindTo(this.contextKeyService),this.listMultiSelection=pB.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=ed(c),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const m=this.getSelection(),y=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(m.length>0||y.length>0),this.listMultiSelection.set(m.length>1),this.listDoubleSelection.set(m.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const m=this.getSelection(),y=this.getFocus();this.listHasSelectionOrFocus.set(m.length>0||y.length>0)})),this.disposables.add(c.onDidChangeConfiguration(m=>{m.affectsConfiguration(Vp)&&(this._useAltAsMultipleSelectionModifier=ed(c));let y={};if(m.affectsConfiguration(sa)&&this.horizontalScrolling===void 0){const b=!!c.getValue(sa);y=Object.assign(Object.assign({},y),{horizontalScrolling:b})}if(m.affectsConfiguration(Wl)){const b=!!c.getValue(Wl);y=Object.assign(Object.assign({},y),{scrollByPage:b})}if(m.affectsConfiguration(Vl)){const b=!!c.getValue(Vl);y=Object.assign(Object.assign({},y),{smoothScrolling:b})}if(m.affectsConfiguration(Qc)){const b=c.getValue(Qc);y=Object.assign(Object.assign({},y),{mouseWheelScrollSensitivity:b})}if(m.affectsConfiguration(Jc)){const b=c.getValue(Jc);y=Object.assign(Object.assign({},y),{fastScrollSensitivity:b})}Object.keys(y).length>0&&this.updateOptions(y)})),this.navigator=new v5e(this,Object.assign({configurationService:c},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?eb(e):Wp)}dispose(){this.disposables.dispose(),super.dispose()}};kV=Su([Ln(6,ot),Ln(7,_a),Ln(8,Et),Ln(9,rt)],kV);class CB extends q{constructor(e,t){var n;super(),this.widget=e,this._onDidOpen=this._register(new H),this.onDidOpen=this._onDidOpen.event,this._register(Re.filter(this.widget.onDidChangeSelection,r=>r.browserEvent instanceof KeyboardEvent)(r=>this.onSelectionFromKeyboard(r))),this._register(this.widget.onPointer(r=>this.onPointer(r.element,r.browserEvent))),this._register(this.widget.onMouseDblClick(r=>this.onMouseDblClick(r.element,r.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t!=null&&t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(Px))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(r=>{r.affectsConfiguration(Px)&&(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(Px))!=="doubleClick")}))):this.openOnSingleClick=(n=t==null?void 0:t.openOnSingleClick)!==null&&n!==void 0?n:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,r=typeof t.pinned=="boolean"?t.pinned:!n,s=!1;this._open(this.getSelectedElement(),n,r,s,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const r=t.button===1,s=!0,o=r,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,o,a,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const s=!1,o=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,o,a,t)}_open(e,t,n,r,s){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:r,element:e,browserEvent:s})}}class BY extends CB{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class v5e extends CB{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class y5e extends CB{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}}function C5e(i){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;const n=i.softDispatch(t,t.target);return n.kind===1?(e=!0,!1):(e=!1,n.kind===0)}}let LV=class extends dB{constructor(e,t,n,r,s,o,a,l,c){const{options:d,getTypeNavigationMode:u,disposable:h}=o.invokeFunction(nw,s);super(e,t,n,r,d),this.disposables.add(h),this.internals=new tp(this,s,u,s.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};LV=Su([Ln(5,rt),Ln(6,ot),Ln(7,_a),Ln(8,Et)],LV);let DV=class extends IY{constructor(e,t,n,r,s,o,a,l,c){const{options:d,getTypeNavigationMode:u,disposable:h}=o.invokeFunction(nw,s);super(e,t,n,r,d),this.disposables.add(h),this.internals=new tp(this,s,u,s.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};DV=Su([Ln(5,rt),Ln(6,ot),Ln(7,_a),Ln(8,Et)],DV);let IV=class extends h5e{constructor(e,t,n,r,s,o,a,l,c,d){const{options:u,getTypeNavigationMode:h,disposable:f}=a.invokeFunction(nw,o);super(e,t,n,r,s,u),this.disposables.add(f),this.internals=new tp(this,o,h,o.overrideStyles,l,c,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};IV=Su([Ln(6,rt),Ln(7,ot),Ln(8,_a),Ln(9,Et)],IV);let rM=class extends EY{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,r,s,o,a,l,c,d){const{options:u,getTypeNavigationMode:h,disposable:f}=a.invokeFunction(nw,o);super(e,t,n,r,s,u),this.disposables.add(f),this.internals=new tp(this,o,h,o.overrideStyles,l,c,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};rM=Su([Ln(6,rt),Ln(7,ot),Ln(8,_a),Ln(9,Et)],rM);let RV=class extends d5e{constructor(e,t,n,r,s,o,a,l,c,d,u){const{options:h,getTypeNavigationMode:f,disposable:g}=l.invokeFunction(nw,a);super(e,t,n,r,s,o,h),this.disposables.add(g),this.internals=new tp(this,a,f,a.overrideStyles,c,d,u),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};RV=Su([Ln(7,rt),Ln(8,ot),Ln(9,_a),Ln(10,Et)],RV);function WY(i){const e=i.getValue(bB);if(e==="highlight")return Ec.Highlight;if(e==="filter")return Ec.Filter;const t=i.getValue(Lk);if(t==="simple"||t==="highlight")return Ec.Highlight;if(t==="filter")return Ec.Filter}function VY(i){const e=i.getValue(yB);if(e==="fuzzy")return ep.Fuzzy;if(e==="contiguous")return ep.Contiguous}function nw(i,e){var t;const n=i.get(Et),r=i.get(Cu),s=i.get(ot),o=i.get(rt),a=()=>{const f=s.getContextKeyValue(OY);if(f==="automatic")return bc.Automatic;if(f==="trigger"||s.getContextKeyValue(FY)===!1)return bc.Trigger;const m=n.getValue(vB);if(m==="automatic")return bc.Automatic;if(m==="trigger")return bc.Trigger},l=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!n.getValue(sa),[c,d]=o.invokeFunction(uI,e),u=e.paddingBottom,h=e.renderIndentGuides!==void 0?e.renderIndentGuides:n.getValue(Dk);return{getTypeNavigationMode:a,disposable:d,options:Object.assign(Object.assign({keyboardSupport:!1},c),{indent:typeof n.getValue(xy)=="number"?n.getValue(xy):void 0,renderIndentGuides:h,smoothScrolling:!!n.getValue(Vl),defaultFindMode:WY(n),defaultFindMatchType:VY(n),horizontalScrolling:l,scrollByPage:!!n.getValue(Wl),paddingBottom:u,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(t=e.expandOnlyOnTwistieClick)!==null&&t!==void 0?t:n.getValue(Ik)==="doubleClick",contextViewProvider:r,findWidgetStyles:n3e})}}let tp=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,r,s,o,a){var l;this.tree=e,this.disposables=[],this.contextKeyService=cI(s,e),this.disposables.push(dI(this.contextKeyService,e)),this.listSupportsMultiSelect=aI.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),lI.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=g5e.bindTo(this.contextKeyService),this.listSupportFindWidget.set((l=t.findWidgetEnabled)!==null&&l!==void 0?l:!0),this.hasSelectionOrFocus=fB.bindTo(this.contextKeyService),this.hasDoubleSelection=gB.bindTo(this.contextKeyService),this.hasMultiSelection=pB.bindTo(this.contextKeyService),this.treeElementCanCollapse=mB.bindTo(this.contextKeyService),this.treeElementHasParent=p5e.bindTo(this.contextKeyService),this.treeElementCanExpand=_B.bindTo(this.contextKeyService),this.treeElementHasChild=m5e.bindTo(this.contextKeyService),this.treeFindOpen=_5e.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=ed(a),this.updateStyleOverrides(r);const d=()=>{const h=e.getFocus()[0];if(!h)return;const f=e.getNode(h);this.treeElementCanCollapse.set(f.collapsible&&!f.collapsed),this.treeElementHasParent.set(!!e.getParentElement(h)),this.treeElementCanExpand.set(f.collapsible&&f.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(h))},u=new Set;u.add(OY),u.add(FY),this.disposables.push(this.contextKeyService,o.register(e),e.onDidChangeSelection(()=>{const h=e.getSelection(),f=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(h.length>0||f.length>0),this.hasMultiSelection.set(h.length>1),this.hasDoubleSelection.set(h.length===2)})}),e.onDidChangeFocus(()=>{const h=e.getSelection(),f=e.getFocus();this.hasSelectionOrFocus.set(h.length>0||f.length>0),d()}),e.onDidChangeCollapseState(d),e.onDidChangeModel(d),e.onDidChangeFindOpenState(h=>this.treeFindOpen.set(h)),a.onDidChangeConfiguration(h=>{let f={};if(h.affectsConfiguration(Vp)&&(this._useAltAsMultipleSelectionModifier=ed(a)),h.affectsConfiguration(xy)){const g=a.getValue(xy);f=Object.assign(Object.assign({},f),{indent:g})}if(h.affectsConfiguration(Dk)&&t.renderIndentGuides===void 0){const g=a.getValue(Dk);f=Object.assign(Object.assign({},f),{renderIndentGuides:g})}if(h.affectsConfiguration(Vl)){const g=!!a.getValue(Vl);f=Object.assign(Object.assign({},f),{smoothScrolling:g})}if(h.affectsConfiguration(bB)||h.affectsConfiguration(Lk)){const g=WY(a);f=Object.assign(Object.assign({},f),{defaultFindMode:g})}if(h.affectsConfiguration(vB)||h.affectsConfiguration(Lk)){const g=n();f=Object.assign(Object.assign({},f),{typeNavigationMode:g})}if(h.affectsConfiguration(yB)){const g=VY(a);f=Object.assign(Object.assign({},f),{defaultFindMatchType:g})}if(h.affectsConfiguration(sa)&&t.horizontalScrolling===void 0){const g=!!a.getValue(sa);f=Object.assign(Object.assign({},f),{horizontalScrolling:g})}if(h.affectsConfiguration(Wl)){const g=!!a.getValue(Wl);f=Object.assign(Object.assign({},f),{scrollByPage:g})}if(h.affectsConfiguration(Ik)&&t.expandOnlyOnTwistieClick===void 0&&(f=Object.assign(Object.assign({},f),{expandOnlyOnTwistieClick:a.getValue(Ik)==="doubleClick"})),h.affectsConfiguration(Qc)){const g=a.getValue(Qc);f=Object.assign(Object.assign({},f),{mouseWheelScrollSensitivity:g})}if(h.affectsConfiguration(Jc)){const g=a.getValue(Jc);f=Object.assign(Object.assign({},f),{fastScrollSensitivity:g})}Object.keys(f).length>0&&e.updateOptions(f)}),this.contextKeyService.onDidChangeContext(h=>{h.affectsSome(u)&&e.updateOptions({typeNavigationMode:n()})})),this.navigator=new y5e(e,Object.assign({configurationService:a},t)),this.disposables.push(this.navigator)}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?eb(e):Wp)}dispose(){this.disposables=an(this.disposables)}};tp=Su([Ln(4,ot),Ln(5,_a),Ln(6,Et)],tp);const w5e=qn.as(Zl.Configuration);w5e.registerConfiguration({id:"workbench",order:7,title:p("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[Vp]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[p("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),p("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:p({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[Px]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:p({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[sa]:{type:"boolean",default:!1,description:p("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[Wl]:{type:"boolean",default:!1,description:p("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[xy]:{type:"number",default:8,minimum:4,maximum:40,description:p("tree indent setting","Controls tree indentation in pixels.")},[Dk]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:p("render tree indent guides","Controls whether the tree should render indent guides.")},[Vl]:{type:"boolean",default:!1,description:p("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[Qc]:{type:"number",default:1,markdownDescription:p("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[Jc]:{type:"number",default:5,markdownDescription:p("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[bB]:{type:"string",enum:["highlight","filter"],enumDescriptions:[p("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),p("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:p("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[Lk]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[p("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),p("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),p("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:p("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:p("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[yB]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[p("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),p("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:p("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[Ik]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:p("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[vB]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:p("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});var sM;(function(i){i[i.PRESERVE=0]="PRESERVE",i[i.LAST=1]="LAST"})(sM||(sM={}));const Hp={Quickaccess:"workbench.contributions.quickaccess"};class S5e{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),st(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return zc([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}}qn.add(Hp.Quickaccess,new S5e);const x5e={ctrlCmd:!1,alt:!1};var Ty;(function(i){i[i.Blur=1]="Blur",i[i.Gesture=2]="Gesture",i[i.Other=3]="Other"})(Ty||(Ty={}));var ul;(function(i){i[i.NONE=0]="NONE",i[i.FIRST=1]="FIRST",i[i.SECOND=2]="SECOND",i[i.LAST=3]="LAST"})(ul||(ul={}));const Xl=Lt("quickInputService");var T5e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},EV=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let oM=class extends q{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=qn.as(Hp.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){var r;const[s,o]=this.getOrInstantiateProvider(e),a=this.visibleQuickAccess,l=a==null?void 0:a.descriptor;if(a&&o&&l===o){e!==o.prefix&&!(n!=null&&n.preserveValue)&&(a.picker.value=e),this.adjustValueSelection(a.picker,o,n);return}if(o&&!(n!=null&&n.preserveValue)){let f;if(a&&l&&l!==o){const g=a.value.substr(l.prefix.length);g&&(f=`${o.prefix}${g}`)}if(!f){const g=s==null?void 0:s.defaultFilterValue;g===sM.LAST?f=this.lastAcceptedPickerValues.get(o):typeof g=="string"&&(f=`${o.prefix}${g}`)}typeof f=="string"&&(e=f)}const c=new ae,d=c.add(this.quickInputService.createQuickPick());d.value=e,this.adjustValueSelection(d,o,n),d.placeholder=o==null?void 0:o.placeholder,d.quickNavigate=n==null?void 0:n.quickNavigateConfiguration,d.hideInput=!!d.quickNavigate&&!a,(typeof(n==null?void 0:n.itemActivation)=="number"||n!=null&&n.quickNavigateConfiguration)&&(d.itemActivation=(r=n==null?void 0:n.itemActivation)!==null&&r!==void 0?r:ul.SECOND),d.contextKey=o==null?void 0:o.contextKey,d.filterValue=f=>f.substring(o?o.prefix.length:0);let u;t&&(u=new xD,c.add(Re.once(d.onWillAccept)(f=>{f.veto(),d.hide()}))),c.add(this.registerPickerListeners(d,s,o,e,n==null?void 0:n.providerOptions));const h=c.add(new vi);if(s&&c.add(s.provide(d,h.token,n==null?void 0:n.providerOptions)),Re.once(d.onDidHide)(()=>{d.selectedItems.length===0&&h.cancel(),c.dispose(),u==null||u.complete(d.selectedItems.slice(0))}),d.show(),t)return u==null?void 0:u.p}adjustValueSelection(e,t,n){var r;let s;n!=null&&n.preserveValue?s=[e.value.length,e.value.length]:s=[(r=t==null?void 0:t.prefix.length)!==null&&r!==void 0?r:0,e.value.length],e.valueSelection=s}registerPickerListeners(e,t,n,r,s){const o=new ae,a=this.visibleQuickAccess={picker:e,descriptor:n,value:r};return o.add(st(()=>{a===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),o.add(e.onDidChangeValue(l=>{const[c]=this.getOrInstantiateProvider(l);c!==t?this.show(l,{preserveValue:!0,providerOptions:s}):a.value=l})),n&&o.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),o}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let n=this.mapProviderToDescriptor.get(t);return n||(n=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,n)),[n,t]}};oM=T5e([EV(0,Xl),EV(1,rt)],oM);K.white.toString(),K.white.toString();class aM extends q{get onDidClick(){return this._onDidClick.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new H),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const n=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,r=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=r||"",this._element.style.backgroundColor=n||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),e.appendChild(this._element),this._register(vn.addTarget(this._element)),[Ce.CLICK,yn.Tap].forEach(s=>{this._register(ee(this._element,s,o=>{if(!this.enabled){_t.stop(o);return}this._onDidClick.fire(o)}))}),this._register(ee(this._element,Ce.KEY_DOWN,s=>{const o=new kn(s);let a=!1;this.enabled&&(o.equals(3)||o.equals(10))?(this._onDidClick.fire(s),a=!0):o.equals(9)&&(this._element.blur(),a=!0),a&&_t.stop(o,!0)})),this._register(ee(this._element,Ce.MOUSE_OVER,s=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(ee(this._element,Ce.MOUSE_OUT,s=>{this.updateBackground(!1)})),this.focusTracker=this._register(qc(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let n of Th(e))if(typeof n=="string"){if(n=n.trim(),n==="")continue;const r=document.createElement("span");r.textContent=n,t.push(r)}else t.push(n);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){var t;if(this._label===e||xh(this._label)&&xh(e)&&$Fe(this._label,e))return;this._element.classList.add("monaco-text-button");const n=this.options.supportShortLabel?this._labelElement:this._element;if(xh(e)){const r=tI(e,{inline:!0});r.dispose();const s=(t=r.element.querySelector("p"))===null||t===void 0?void 0:t.innerHTML;if(s){const o=TG(s,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});n.innerHTML=o}else br(n)}else this.options.supportIcons?br(n,...this.getContentElements(e)):n.textContent=e;typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=o4e(e)),this._label=e}get label(){return this._label}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}class lM{constructor(e,t,n){this.options=t,this.styles=n,this.count=0,this.element=se(e,ce(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){var e,t;this.element.textContent=jg(this.countFormat,this.count),this.element.title=jg(this.titleFormat,this.count),this.element.style.backgroundColor=(e=this.styles.badgeBackground)!==null&&e!==void 0?e:"",this.element.style.color=(t=this.styles.badgeForeground)!==null&&t!==void 0?t:"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}const NV="done",AV="active",ZE="infinite",XE="infinite-long-running",PV="discrete";class hI extends q{constructor(e,t){super(),this.workedVal=0,this.showDelayedScheduler=this._register(new fn(()=>Gs(this.element),0)),this.longRunningScheduler=this._register(new fn(()=>this.infiniteLongRunning(),hI.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=(t==null?void 0:t.progressBarBackground)||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(AV,ZE,XE,PV),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(NV),this.element.classList.contains(ZE)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(PV,NV,XE),this.element.classList.add(AV,ZE),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(XE)}getContainer(){return this.element}}hI.LONG_RUNNING_INFINITE_THRESHOLD=1e4;const k5e=ce;class L5e extends q{constructor(e,t,n){super(),this.parent=e,this.onKeyDown=s=>ee(this.findInput.inputBox.inputElement,Ce.KEY_DOWN,o=>{s(new kn(o))}),this.onMouseDown=s=>ee(this.findInput.inputBox.inputElement,Ce.MOUSE_DOWN,o=>{s(new Qo(o))}),this.onDidChange=s=>this.findInput.onDidChange(s),this.container=se(this.parent,k5e(".quick-input-box")),this.findInput=this._register(new TY(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:n}));const r=this.findInput.inputBox.inputElement;r.role="combobox",r.ariaHasPopup="menu",r.ariaAutoComplete="list",r.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}showDecoration(e){e===di.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===di.Info?1:e===di.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===di.Info?1:e===di.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}class Lh{constructor(e,t){var n;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(n=t==null?void 0:t.supportIcons)!==null&&n!==void 0?n:!1,this.domNode=se(e,ce("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],n="",r){e||(e=""),r&&(e=Lh.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&Ro(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const n of this.highlights){if(n.end===n.start)continue;if(t<n.start){const o=this.text.substring(t,n.start);this.supportIcons?e.push(...Th(o)):e.push(o),t=n.start}const r=this.text.substring(t,n.end),s=ce("span.highlight",void 0,...this.supportIcons?Th(r):[r]);n.extraClasses&&s.classList.add(...n.extraClasses),e.push(s),t=n.end}if(t<this.text.length){const n=this.text.substring(t);this.supportIcons?e.push(...Th(n)):e.push(n)}br(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let n=0,r=0;return e.replace(/\r\n|\r|\n/g,(s,o)=>{r=s===`\r
`?-1:0,o+=n;for(const a of t)a.end<=o||(a.start>=o&&(a.start+=r),a.end>=o&&(a.end+=r));return n+=r,"⏎"})}}class YE{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class Rk extends q{constructor(e,t){super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new YE(se(e,ce(".monaco-icon-label")))),this.labelContainer=se(this.domNode.element,ce(".monaco-icon-label-container"));const n=se(this.labelContainer,ce("span.monaco-icon-name-container"));t!=null&&t.supportHighlights||t!=null&&t.supportIcons?this.nameNode=new R5e(n,!!t.supportIcons):this.nameNode=new D5e(n),this.hoverDelegate=t==null?void 0:t.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,n){const r=["monaco-icon-label"],s=["monaco-icon-label-container"];let o="";if(n&&(n.extraClasses&&r.push(...n.extraClasses),n.italic&&r.push("italic"),n.strikethrough&&r.push("strikethrough"),n.disabledCommand&&s.push("disabled"),n.title&&(o+=n.title)),this.domNode.className=r.join(" "),this.domNode.element.setAttribute("aria-label",o),this.labelContainer.className=s.join(" "),this.setupHover(n!=null&&n.descriptionTitle?this.labelContainer:this.element,n==null?void 0:n.title),this.nameNode.setLabel(e,n),t||this.descriptionNode){const a=this.getOrCreateDescriptionNode();a instanceof Lh?(a.set(t||"",n?n.descriptionMatches:void 0,void 0,n==null?void 0:n.labelEscapeNewLines),this.setupHover(a.element,n==null?void 0:n.descriptionTitle)):(a.textContent=t&&(n!=null&&n.labelEscapeNewLines)?Lh.escapeNewLines(t,[]):t||"",this.setupHover(a.element,(n==null?void 0:n.descriptionTitle)||""),a.empty=!t)}}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(!this.hoverDelegate)GFe(e,t);else{const r=sY(this.hoverDelegate,e,t);r&&this.customHovers.set(e,r)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateDescriptionNode(){var e;if(!this.descriptionNode){const t=this._register(new YE(se(this.labelContainer,ce("span.monaco-icon-description-container"))));!((e=this.creationOptions)===null||e===void 0)&&e.supportDescriptionHighlights?this.descriptionNode=new Lh(se(t.element,ce("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons}):this.descriptionNode=this._register(new YE(se(t.element,ce("span.label-description"))))}return this.descriptionNode}}class D5e{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Ro(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=se(this.container,ce("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const r=e[n],s=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${n}`;se(this.container,ce("a.label-name",{id:s,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},r)),n<e.length-1&&se(this.container,ce("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}}function I5e(i,e,t){if(!t)return;let n=0;return i.map(r=>{const s={start:n,end:n+r.length},o=t.map(a=>Or.intersect(s,a)).filter(a=>!Or.isEmpty(a)).map(({start:a,end:l})=>({start:a-n,end:l-n}));return n=s.end+e.length,o})}class R5e{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Ro(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new Lh(se(this.container,ce("a.label-name",{id:t==null?void 0:t.domId})),{supportIcons:this.supportIcons})),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=(t==null?void 0:t.separator)||"/",r=I5e(e,n,t==null?void 0:t.matches);for(let s=0;s<e.length;s++){const o=e[s],a=r?r[s]:void 0,l=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${s}`,c=ce("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":s,role:"treeitem"});new Lh(se(this.container,c),{supportIcons:this.supportIcons}).set(o,a,void 0,t==null?void 0:t.labelEscapeNewLines),s<e.length-1&&se(c,ce("span.label-separator",void 0,n))}}}}const mS=ce,E5e={keybindingLabelBackground:void 0,keybindingLabelForeground:void 0,keybindingLabelBorder:void 0,keybindingLabelBottomBorder:void 0,keybindingLabelShadow:void 0};class iw{constructor(e,t,n){this.os=t,this.keyElements=new Set,this.options=n||Object.create(null);const r=this.options.keybindingLabelForeground;this.domNode=se(e,mS(".monaco-keybinding")),r&&(this.domNode.style.color=r),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&iw.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){var e;if(this.clear(),this.keybinding){const t=this.keybinding.getChords();t[0]&&this.renderChord(this.domNode,t[0],this.matches?this.matches.firstPart:null);for(let r=1;r<t.length;r++)se(this.domNode,mS("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,t[r],this.matches?this.matches.chordPart:null);const n=(e=this.options.disableTitle)!==null&&e!==void 0&&e?void 0:this.keybinding.getAriaLabel()||void 0;n!==void 0?this.domNode.title=n:this.domNode.removeAttribute("title")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){_r(this.domNode),this.keyElements.clear()}renderChord(e,t,n){const r=z5.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,r.ctrlKey,!!(n!=null&&n.ctrlKey),r.separator),t.shiftKey&&this.renderKey(e,r.shiftKey,!!(n!=null&&n.shiftKey),r.separator),t.altKey&&this.renderKey(e,r.altKey,!!(n!=null&&n.altKey),r.separator),t.metaKey&&this.renderKey(e,r.metaKey,!!(n!=null&&n.metaKey),r.separator);const s=t.keyLabel;s&&this.renderKey(e,s,!!(n!=null&&n.keyCode),"")}renderKey(e,t,n,r){se(e,this.createKeyElement(t,n?".highlight":"")),r&&se(e,mS("span.monaco-keybinding-key-separator",void 0,r))}renderUnbound(e){se(e,this.createKeyElement(p("unbound","Unbound")))}createKeyElement(e,t=""){const n=mS("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),this.options.keybindingLabelBackground&&(n.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(n.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(n.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(n.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),n}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&Ro(e.firstPart,t.firstPart)&&Ro(e.chordPart,t.chordPart)}}const MV=new _f(()=>{const i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:i,collatorIsNumeric:i.resolvedOptions().numeric}});function N5e(i,e,t=!1){const n=i||"",r=e||"",s=MV.value.collator.compare(n,r);return MV.value.collatorIsNumeric&&s===0&&n!==r?n<r?-1:1:s}function A5e(i,e,t){const n=i.toLowerCase(),r=e.toLowerCase(),s=P5e(i,e,t);if(s)return s;const o=n.endsWith(t),a=r.endsWith(t);if(o!==a)return o?-1:1;const l=N5e(n,r);return l!==0?l:n.localeCompare(r)}function P5e(i,e,t){const n=i.toLowerCase(),r=e.toLowerCase(),s=n.startsWith(t),o=r.startsWith(t);if(s!==o)return s?-1:1;if(s&&o){if(n.length<r.length)return-1;if(n.length>r.length)return 1}return 0}var M5e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s};class HY{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}}M5e([Ci],HY.prototype,"toString",null);const O5e=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function F5e(i){const e=[];let t=0,n;for(;n=O5e.exec(i);){n.index-t>0&&e.push(i.substring(t,n.index));const[,r,s,,o]=n;o?e.push({label:r,href:s,title:o}):e.push({label:r,href:s}),t=n.index+n[0].length}return t<i.length&&e.push(i.substring(t)),new HY(e)}const QE={},B5e=new eB("quick-input-button-icon-");function cM(i){if(!i)return;let e;const t=i.dark.toString();return QE[t]?e=QE[t]:(e=B5e.nextId(),LA(`.${e}, .hc-light .${e}`,`background-image: ${Wh(i.light||i.dark)}`),LA(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${Wh(i.dark)}`),QE[t]=e),e}function W5e(i,e,t){br(e);const n=F5e(i);let r=0;for(const s of n.nodes)if(typeof s=="string")e.append(...Th(s));else{let o=s.title;!o&&s.href.startsWith("command:")?o=p("executeCommand","Click to execute command '{0}'",s.href.substring(8)):o||(o=s.href);const a=ce("a",{href:s.href,title:o,tabIndex:r++},s.label);a.style.textDecoration="underline";const l=f=>{Qke(f)&&_t.stop(f,!0),t.callback(s.href)},c=t.disposables.add(new Dt(a,Ce.CLICK)).event,d=t.disposables.add(new Dt(a,Ce.KEY_DOWN)).event,u=Re.chain(d,f=>f.filter(g=>{const m=new kn(g);return m.equals(10)||m.equals(3)}));t.disposables.add(vn.addTarget(a));const h=t.disposables.add(new Dt(a,yn.Tap)).event;Re.any(c,h,u)(l,null,t.disposables),e.appendChild(a)}}var UY=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},OV=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const ol=ce;class V5e{constructor(e,t,n,r,s,o,a){var l,c,d;this._checked=!1,this._hidden=!1,this.hasCheckbox=r,this.index=n,this.fireButtonTriggered=s,this.fireSeparatorButtonTriggered=o,this._onChecked=a,this.onChecked=r?Re.map(Re.filter(this._onChecked.event,u=>u.listElement===this),u=>u.checked):Re.None,e.type==="separator"?this._separator=e:(this.item=e,t&&t.type==="separator"&&!t.buttons&&(this._separator=t),this.saneDescription=this.item.description,this.saneDetail=this.item.detail,this._labelHighlights=(l=this.item.highlights)===null||l===void 0?void 0:l.label,this._descriptionHighlights=(c=this.item.highlights)===null||c===void 0?void 0:c.description,this._detailHighlights=(d=this.item.highlights)===null||d===void 0?void 0:d.detail,this.saneTooltip=this.item.tooltip),this._init=new _f(()=>{var u;const h=(u=e.label)!==null&&u!==void 0?u:"",f=pv(h).text.trim(),g=e.ariaLabel||[h,this.saneDescription,this.saneDetail].map(m=>zFe(m)).filter(m=>!!m).join(", ");return{saneLabel:h,saneSortLabel:f,saneAriaLabel:g}})}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({listElement:this,checked:e}))}get separator(){return this._separator}set separator(e){this._separator=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}}class rw{constructor(e){this.themeService=e}get templateId(){return rw.ID}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=se(e,ol(".quick-input-list-entry"));const n=se(t.entry,ol("label.quick-input-list-label"));t.toDisposeTemplate.push(bi(n,Ce.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=se(n,ol("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(bi(t.checkbox,Ce.CHANGE,c=>{t.element.checked=t.checkbox.checked}));const r=se(n,ol(".quick-input-list-rows")),s=se(r,ol(".quick-input-list-row")),o=se(r,ol(".quick-input-list-row"));t.label=new Rk(s,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0}),t.toDisposeTemplate.push(t.label),t.icon=PG(t.label.element,ol(".quick-input-list-icon"));const a=se(s,ol(".quick-input-list-entry-keybinding"));t.keybinding=new iw(a,To);const l=se(o,ol(".quick-input-list-label-meta"));return t.detail=new Rk(l,{supportHighlights:!0,supportIcons:!0}),t.toDisposeTemplate.push(t.detail),t.separator=se(t.entry,ol(".quick-input-list-separator")),t.actionBar=new fa(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,n){var r,s,o,a;n.element=e,e.element=(r=n.entry)!==null&&r!==void 0?r:void 0;const l=e.item?e.item:e.separator;n.checkbox.checked=e.checked,n.toDisposeElement.push(e.onChecked(g=>n.checkbox.checked=g));const{labelHighlights:c,descriptionHighlights:d,detailHighlights:u}=e;if(!((s=e.item)===null||s===void 0)&&s.iconPath){const g=t1(this.themeService.getColorTheme().type)?e.item.iconPath.dark:(o=e.item.iconPath.light)!==null&&o!==void 0?o:e.item.iconPath.dark,m=Ye.revive(g);n.icon.className="quick-input-list-icon",n.icon.style.backgroundImage=Wh(m)}else n.icon.style.backgroundImage="",n.icon.className=!((a=e.item)===null||a===void 0)&&a.iconClass?`quick-input-list-icon ${e.item.iconClass}`:"";const h={matches:c||[],descriptionTitle:e.saneDescription,descriptionMatches:d||[],labelEscapeNewLines:!0};l.type!=="separator"?(h.extraClasses=l.iconClasses,h.italic=l.italic,h.strikethrough=l.strikethrough,n.entry.classList.remove("quick-input-list-separator-as-item")):n.entry.classList.add("quick-input-list-separator-as-item"),n.label.setLabel(e.saneLabel,e.saneDescription,h),n.keybinding.set(l.type==="separator"?void 0:l.keybinding),e.saneDetail?(n.detail.element.style.display="",n.detail.setLabel(e.saneDetail,void 0,{matches:u,title:e.saneDetail,labelEscapeNewLines:!0})):n.detail.element.style.display="none",e.item&&e.separator&&e.separator.label?(n.separator.textContent=e.separator.label,n.separator.style.display=""):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!e.separator);const f=l.buttons;f&&f.length?(n.actionBar.push(f.map((g,m)=>{let y=g.iconClass||(g.iconPath?cM(g.iconPath):void 0);return g.alwaysVisible&&(y=y?`${y} always-visible`:"always-visible"),{id:`id-${m}`,class:y,enabled:!0,label:"",tooltip:g.tooltip||"",run:()=>{l.type!=="separator"?e.fireButtonTriggered({button:g,item:l}):e.fireSeparatorButtonTriggered({button:g,separator:l})}}}),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){n.toDisposeElement=an(n.toDisposeElement),n.actionBar.clear()}disposeTemplate(e){e.toDisposeElement=an(e.toDisposeElement),e.toDisposeTemplate=an(e.toDisposeTemplate)}}rw.ID="listelement";class H5e{getHeight(e){return e.item?e.saneDetail?44:22:24}getTemplateId(e){return rw.ID}}var Ji;(function(i){i[i.First=1]="First",i[i.Second=2]="Second",i[i.Last=3]="Last",i[i.Next=4]="Next",i[i.Previous=5]="Previous",i[i.NextPage=6]="NextPage",i[i.PreviousPage=7]="PreviousPage"})(Ji||(Ji={}));class wB{constructor(e,t,n,r){this.parent=e,this.options=n,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnLabelMode="fuzzy",this.sortByLabel=!0,this._onChangedAllVisibleChecked=new H,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new H,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new H,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new H,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new H,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new H,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._onKeyDown=new H,this.onKeyDown=this._onKeyDown.event,this._onLeave=new H,this.onLeave=this._onLeave.event,this._listElementChecked=new H,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=se(this.parent,ol(".quick-input-list"));const s=new H5e,o=new z5e;if(this.list=n.createList("QuickInput",this.container,s,[new rw(r)],{identityProvider:{getId:a=>{var l,c,d,u,h,f,g,m;return(m=(f=(u=(c=(l=a.item)===null||l===void 0?void 0:l.id)!==null&&c!==void 0?c:(d=a.item)===null||d===void 0?void 0:d.label)!==null&&u!==void 0?u:(h=a.separator)===null||h===void 0?void 0:h.id)!==null&&f!==void 0?f:(g=a.separator)===null||g===void 0?void 0:g.label)!==null&&m!==void 0?m:""}},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:o}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(a=>{const l=new kn(a);switch(l.keyCode){case 10:this.toggleCheckbox();break;case 31:(Ot?a.metaKey:a.ctrlKey)&&this.list.setFocus(cs(this.list.length));break;case 16:{const c=this.list.getFocus();c.length===1&&c[0]===0&&this._onLeave.fire();break}case 18:{const c=this.list.getFocus();c.length===1&&c[0]===this.list.length-1&&this._onLeave.fire();break}}this._onKeyDown.fire(l)})),this.disposables.push(this.list.onMouseDown(a=>{a.browserEvent.button!==2&&a.browserEvent.preventDefault()})),this.disposables.push(ee(this.container,Ce.CLICK,a=>{(a.x||a.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(a=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(a=>{typeof a.index=="number"&&(a.browserEvent.preventDefault(),this.list.setSelection([a.index]))})),n.hoverDelegate){const a=new jG(n.hoverDelegate.delay);this.disposables.push(this.list.onMouseOver(l=>OV(this,void 0,void 0,function*(){var c;if(l.browserEvent.target instanceof HTMLAnchorElement){a.cancel();return}if(!(!(l.browserEvent.relatedTarget instanceof HTMLAnchorElement)&&Dr(l.browserEvent.relatedTarget,(c=l.element)===null||c===void 0?void 0:c.element)))try{yield a.trigger(()=>OV(this,void 0,void 0,function*(){l.element&&this.showHover(l.element)}))}catch(d){if(!ql(d))throw d}}))),this.disposables.push(this.list.onMouseOut(l=>{var c;Dr(l.browserEvent.relatedTarget,(c=l.element)===null||c===void 0?void 0:c.element)||a.cancel()})),this.disposables.push(a)}this.disposables.push(this._listElementChecked.event(a=>this.fireCheckedEvents())),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onSeparatorButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return Re.map(this.list.onDidChangeFocus,e=>e.elements.map(t=>t.item))}get onDidChangeSelection(){return Re.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get ariaLabel(){return this.list.getHTMLElement().ariaLabel}set ariaLabel(e){this.list.getHTMLElement().ariaLabel=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let n=0,r=e.length;n<r;n++){const s=e[n];if(!s.hidden)if(s.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0;const t=this.elements;for(let n=0,r=t.length;n<r;n++)t[n].checked&&e++;return e}getVisibleCount(){let e=0;const t=this.elements;for(let n=0,r=t.length;n<r;n++)t[n].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=an(this.elementDisposables);const t=o=>this.fireButtonTriggered(o),n=o=>this.fireSeparatorButtonTriggered(o);this.inputElements=e;const r=new Map,s=this.parent.classList.contains("show-checkboxes");this.elements=e.reduce((o,a,l)=>{var c;const d=l>0?e[l-1]:void 0;if(a.type==="separator"&&!a.buttons)return o;const u=new V5e(a,d,l,s,t,n,this._listElementChecked),h=o.length;return o.push(u),r.set((c=u.item)!==null&&c!==void 0?c:u.separator,h),o},[]),this.elementsToIndexes=r,this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t))),e.length>0){const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item).filter(e=>!!e)}setCheckedElements(e){try{this._fireCheckedEvents=!1;const t=new Set;for(const n of e)t.add(n);for(const n of this.elements)n.checked=t.has(n.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===Ji.Second&&this.list.length<2&&(e=Ji.First),e){case Ji.First:this.list.scrollTop=0,this.list.focusFirst(void 0,n=>!!n.item);break;case Ji.Second:this.list.scrollTop=0,this.list.focusNth(1,void 0,n=>!!n.item);break;case Ji.Last:this.list.scrollTop=this.list.scrollHeight,this.list.focusLast(void 0,n=>!!n.item);break;case Ji.Next:{this.list.focusNext(void 0,!0,void 0,r=>!!r.item);const n=this.list.getFocus()[0];n!==0&&!this.elements[n-1].item&&this.list.firstVisibleIndex>n-1&&this.list.reveal(n-1);break}case Ji.Previous:{this.list.focusPrevious(void 0,!0,void 0,r=>!!r.item);const n=this.list.getFocus()[0];n!==0&&!this.elements[n-1].item&&this.list.firstVisibleIndex>n-1&&this.list.reveal(n-1);break}case Ji.NextPage:this.list.focusNextPage(void 0,n=>!!n.item);break;case Ji.PreviousPage:this.list.focusPreviousPage(void 0,n=>!!n.item);break}const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}showHover(e){var t,n,r;this.options.hoverDelegate!==void 0&&(this._lastHover&&!this._lastHover.isDisposed&&((n=(t=this.options.hoverDelegate).onDidHideHover)===null||n===void 0||n.call(t),(r=this._lastHover)===null||r===void 0||r.dispose()),!(!e.element||!e.saneTooltip)&&(this._lastHover=this.options.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:s=>{this.options.linkOpenerDelegate(s)},showPointer:!0,container:this.container,hoverPosition:1},!1)))}layout(e){this.list.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(r=>{r.labelHighlights=void 0,r.descriptionHighlights=void 0,r.detailHighlights=void 0,r.hidden=!1;const s=r.index&&this.inputElements[r.index-1];r.item&&(r.separator=s&&s.type==="separator"&&!s.buttons?s:void 0)});else{let r;this.elements.forEach(s=>{var o,a,l,c;let d;this.matchOnLabelMode==="fuzzy"?d=this.matchOnLabel&&(o=FE(e,pv(s.saneLabel)))!==null&&o!==void 0?o:void 0:d=this.matchOnLabel&&(a=U5e(t,pv(s.saneLabel)))!==null&&a!==void 0?a:void 0;const u=this.matchOnDescription&&(l=FE(e,pv(s.saneDescription||"")))!==null&&l!==void 0?l:void 0,h=this.matchOnDetail&&(c=FE(e,pv(s.saneDetail||"")))!==null&&c!==void 0?c:void 0;if(d||u||h?(s.labelHighlights=d,s.descriptionHighlights=u,s.detailHighlights=h,s.hidden=!1):(s.labelHighlights=void 0,s.descriptionHighlights=void 0,s.detailHighlights=void 0,s.hidden=s.item?!s.item.alwaysShow:!0),s.item?s.separator=void 0:s.separator&&(s.hidden=!0),!this.sortByLabel){const f=s.index&&this.inputElements[s.index-1];r=f&&f.type==="separator"?f:r,r&&!s.hidden&&(s.separator=r,r=void 0)}})}const n=this.elements.filter(r=>!r.hidden);if(this.sortByLabel&&e){const r=e.toLowerCase();n.sort((s,o)=>j5e(s,o,r))}return this.elementsToIndexes=n.reduce((r,s,o)=>{var a;return r.set((a=s.item)!==null&&a!==void 0?a:s.separator,o),r},new Map),this.list.splice(0,this.list.length,n),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(n.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(const n of e)n.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=an(this.elementDisposables),this.disposables=an(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}fireSeparatorButtonTriggered(e){this._onSeparatorButtonTriggered.fire(e)}style(e){this.list.style(e)}toggleHover(){const e=this.list.getFocusedElements()[0];if(!(e!=null&&e.saneTooltip))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}const t=this.list.getFocusedElements()[0];if(!t)return;this.showHover(t);const n=new ae;n.add(this.list.onDidChangeFocus(r=>{r.indexes.length&&this.showHover(r.elements[0])})),this._lastHover&&n.add(this._lastHover),this._toggleHover=n,this.elementDisposables.push(this._toggleHover)}}UY([Ci],wB.prototype,"onDidChangeFocus",null);UY([Ci],wB.prototype,"onDidChangeSelection",null);function U5e(i,e){const{text:t,iconOffsets:n}=e;if(!n||n.length===0)return FV(i,t);const r=PC(t," "),s=t.length-r.length,o=FV(i,r);if(o)for(const a of o){const l=n[a.start+s]+s;a.start+=l,a.end+=l}return o}function FV(i,e){const t=e.toLowerCase().indexOf(i.toLowerCase());return t!==-1?[{start:t,end:t+i.length}]:null}function j5e(i,e,t){const n=i.labelHighlights||[],r=e.labelHighlights||[];return n.length&&!r.length?-1:!n.length&&r.length?1:n.length===0&&r.length===0?0:A5e(i.saneSortLabel,e.saneSortLabel,t)}class z5e{getWidgetAriaLabel(){return p("quickInput","Quick Input")}getAriaLabel(e){var t;return!((t=e.separator)===null||t===void 0)&&t.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(e.hasCheckbox)return{value:e.checked,onDidChange:e.onChecked}}}var BV=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const dM={iconClass:Qe.asClassName(me.quickInputBack),tooltip:p("quickInput.back","Back"),handle:-1};class sw extends q{constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=sw.noPromptMessage,this._severity=di.Ignore,this.onDidTriggerButtonEmitter=this._register(new H),this.onDidHideEmitter=this._register(new H),this.onDisposeEmitter=this._register(new H),this.visibleDisposables=this._register(new ae),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!Ol;this._ignoreFocusOut=e&&!Ol,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=Ty.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){var e,t;if(!this.visible)return;const n=this.getTitle();n&&this.ui.title.textContent!==n?this.ui.title.textContent=n:!n&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText=" ");const r=this.getDescription();if(this.ui.description1.textContent!==r&&(this.ui.description1.textContent=r),this.ui.description2.textContent!==r&&(this.ui.description2.textContent=r),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?br(this.ui.widget,this._widget):br(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new za,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const o=this.buttons.filter(l=>l===dM);this.ui.leftActionBar.push(o.map((l,c)=>{const d=new vs(`id-${c}`,"",l.iconClass||cM(l.iconPath),!0,()=>BV(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(l)}));return d.tooltip=l.tooltip||"",d}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const a=this.buttons.filter(l=>l!==dM);this.ui.rightActionBar.push(a.map((l,c)=>{const d=new vs(`id-${c}`,"",l.iconClass||cM(l.iconPath),!0,()=>BV(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(l)}));return d.tooltip=l.tooltip||"",d}),{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const o=(t=(e=this.toggles)===null||e===void 0?void 0:e.filter(a=>a instanceof nb))!==null&&t!==void 0?t:[];this.ui.inputBox.toggles=o}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const s=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==s&&(this._lastValidationMessage=s,br(this.ui.message),W5e(s,this.ui.message,{callback:o=>{this.ui.linkOpenerDelegate(o)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?p("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==di.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}sw.noPromptMessage=p("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class ky extends sw{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new H),this.onWillAcceptEmitter=this._register(new H),this.onDidAcceptEmitter=this._register(new H),this.onDidCustomEmitter=this._register(new H),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=ul.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new H),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new H),this.onDidTriggerItemButtonEmitter=this._register(new H),this.onDidTriggerSeparatorButtonEmitter=this._register(new H),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?x5e:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(Ji.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(Ji.Next),this.canSelectMany&&this.ui.list.domFocus(),_t.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(Ji.Previous):this.ui.list.focus(Ji.Last),this.canSelectMany&&this.ui.list.domFocus(),_t.stop(e,!0);break;case 12:this.ui.list.focus(Ji.NextPage),this.canSelectMany&&this.ui.list.domFocus(),_t.stop(e,!0);break;case 11:this.ui.list.focus(Ji.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),_t.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(Ji.First),_t.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(Ji.Last),_t.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&fi(e,this._activeItems,(t,n)=>t===n)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&fi(e,this._selectedItems,(n,r)=>n===r)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&fi(e,this._selectedItems,(t,n)=>t===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return ee(this.ui.container,Ce.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new kn(e),n=t.keyCode;this._quickNavigate.keybindings.some(o=>{const a=o.getChords();return a.length>1?!1:a[0].shiftKey&&n===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a[0].altKey&&n===6||a[0].ctrlKey&&n===5||a[0].metaKey&&n===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,n={title:!!this.title||!!this.step||!!this.buttons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let r=this.ariaLabel;if(!r&&n.inputBox&&(r=this.placeholder||ky.DEFAULT_ARIA_LABEL,this.title&&(r+=` - ${this.title}`)),this.ui.list.ariaLabel!==r&&(this.ui.list.ariaLabel=r??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case ul.NONE:this._itemActivation=ul.FIRST;break;case ul.SECOND:this.ui.list.focus(Ji.Second),this._itemActivation=ul.FIRST;break;case ul.LAST:this.ui.list.focus(Ji.Last),this._itemActivation=ul.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(Ji.First)),this.keepScrollPosition&&(this.scrollTop=e)}}ky.DEFAULT_ARIA_LABEL=p("quickInputBox.ariaLabel","Type to narrow down results.");class $5e extends sw{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new H),this.onDidAcceptEmitter=this._register(new H),this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}}const js=ce;class fI extends q{constructor(e,t){super(),this.options=e,this.themeService=t,this.enabled=!0,this.onDidAcceptEmitter=this._register(new H),this.onDidCustomEmitter=this._register(new H),this.onDidTriggerButtonEmitter=this._register(new H),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new H),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new H),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const e=t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey};this._register(ee(window,Ce.KEY_DOWN,e,!0)),this._register(ee(window,Ce.KEY_UP,e,!0)),this._register(ee(window,Ce.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;const e=se(this.parentElement,js(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const t=ca(e),n=se(e,js(".quick-input-titlebar")),r=this.options.hoverDelegate?{hoverDelegate:this.options.hoverDelegate}:void 0,s=this._register(new fa(n,r));s.domNode.classList.add("quick-input-left-action-bar");const o=se(n,js(".quick-input-title")),a=this._register(new fa(n,r));a.domNode.classList.add("quick-input-right-action-bar");const l=se(e,js(".quick-input-header")),c=se(l,js("input.quick-input-check-all"));c.type="checkbox",c.setAttribute("aria-label",p("quickInput.checkAll","Toggle all checkboxes")),this._register(bi(c,Ce.CHANGE,W=>{const X=c.checked;V.setAllVisibleChecked(X)})),this._register(ee(c,Ce.CLICK,W=>{(W.x||W.y)&&f.setFocus()}));const d=se(l,js(".quick-input-description")),u=se(l,js(".quick-input-and-message")),h=se(u,js(".quick-input-filter")),f=this._register(new L5e(h,this.styles.inputBox,this.styles.toggle));f.setAttribute("aria-describedby",`${this.idPrefix}message`);const g=se(h,js(".quick-input-visible-count"));g.setAttribute("aria-live","polite"),g.setAttribute("aria-atomic","true");const m=new lM(g,{countFormat:p({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),y=se(h,js(".quick-input-count"));y.setAttribute("aria-live","polite");const b=new lM(y,{countFormat:p({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),v=se(l,js(".quick-input-action")),C=this._register(new aM(v,this.styles.button));C.label=p("ok","OK"),this._register(C.onDidClick(W=>{this.onDidAcceptEmitter.fire()}));const w=se(l,js(".quick-input-action")),S=this._register(new aM(w,this.styles.button));S.label=p("custom","Custom"),this._register(S.onDidClick(W=>{this.onDidCustomEmitter.fire()}));const L=se(u,js(`#${this.idPrefix}message.quick-input-message`)),T=this._register(new hI(e,this.styles.progressBar));T.getContainer().classList.add("quick-input-progress");const I=se(e,js(".quick-input-html-widget"));I.tabIndex=-1;const R=se(e,js(".quick-input-description")),B=this.idPrefix+"list",V=this._register(new wB(e,B,this.options,this.themeService));f.setAttribute("aria-controls",B),this._register(V.onDidChangeFocus(()=>{var W;f.setAttribute("aria-activedescendant",(W=V.getActiveDescendant())!==null&&W!==void 0?W:"")})),this._register(V.onChangedAllVisibleChecked(W=>{c.checked=W})),this._register(V.onChangedVisibleCount(W=>{m.setCount(W)})),this._register(V.onChangedCheckedCount(W=>{b.setCount(W)})),this._register(V.onLeave(()=>{setTimeout(()=>{f.setFocus(),this.controller instanceof ky&&this.controller.canSelectMany&&V.clearFocus()},0)}));const F=qc(e);return this._register(F),this._register(ee(e,Ce.FOCUS,W=>{Dr(W.relatedTarget,e)||(this.previousFocusElement=W.relatedTarget instanceof HTMLElement?W.relatedTarget:void 0)},!0)),this._register(F.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(Ty.Blur),this.previousFocusElement=void 0})),this._register(ee(e,Ce.FOCUS,W=>{f.setFocus()})),this._register(bi(e,Ce.KEY_DOWN,W=>{if(!Dr(W.target,I))switch(W.keyCode){case 3:_t.stop(W,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:_t.stop(W,!0),this.hide(Ty.Gesture);break;case 2:if(!W.altKey&&!W.ctrlKey&&!W.metaKey){const X=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(e.classList.contains("show-checkboxes")?X.push("input"):X.push("input[type=text]"),this.getUI().list.isDisplayed()&&X.push(".monaco-list"),this.getUI().message&&X.push(".quick-input-message a"),this.getUI().widget){if(Dr(W.target,this.getUI().widget))break;X.push(".quick-input-html-widget")}const oe=e.querySelectorAll(X.join(", "));W.shiftKey&&W.target===oe[0]?(_t.stop(W,!0),V.clearFocus()):!W.shiftKey&&Dr(W.target,oe[oe.length-1])&&(_t.stop(W,!0),oe[0].focus())}break;case 10:W.ctrlKey&&(_t.stop(W,!0),this.getUI().list.toggleHover());break}})),this.ui={container:e,styleSheet:t,leftActionBar:s,titleBar:n,title:o,description1:R,description2:d,widget:I,rightActionBar:a,checkAll:c,inputContainer:u,filterContainer:h,inputBox:f,visibleCountContainer:g,visibleCount:m,countContainer:y,count:b,okContainer:v,ok:C,message:L,customButtonContainer:w,customButton:S,list:V,progressBar:T,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:W=>this.show(W),hide:()=>this.hide(),setVisibilities:W=>this.setVisibilities(W),setEnabled:W=>this.setEnabled(W),setContextKey:W=>this.options.setContextKey(W),linkOpenerDelegate:W=>this.options.linkOpenerDelegate(W)},this.updateStyles(),this.ui}pick(e,t={},n=xt.None){return new Promise((r,s)=>{let o=d=>{var u;o=r,(u=t.onKeyMods)===null||u===void 0||u.call(t,a.keyMods),r(d)};if(n.isCancellationRequested){o(void 0);return}const a=this.createQuickPick();let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)o(a.selectedItems.slice()),a.hide();else{const d=a.activeItems[0];d&&(o(d),a.hide())}}),a.onDidChangeActive(d=>{const u=d[0];u&&t.onDidFocus&&t.onDidFocus(u)}),a.onDidChangeSelection(d=>{if(!a.canSelectMany){const u=d[0];u&&(o(u),a.hide())}}),a.onDidTriggerItemButton(d=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},d),{removeItem:()=>{const u=a.items.indexOf(d.item);if(u!==-1){const h=a.items.slice(),f=h.splice(u,1),g=a.activeItems.filter(y=>y!==f[0]),m=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=h,g&&(a.activeItems=g),a.keepScrollPosition=m}}}))),a.onDidTriggerSeparatorButton(d=>{var u;return(u=t.onDidTriggerSeparatorButton)===null||u===void 0?void 0:u.call(t,d)}),a.onDidChangeValue(d=>{l&&!d&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),n.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{an(c),o(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([d,u])=>{l=u,a.busy=!1,a.items=d,a.canSelectMany&&(a.selectedItems=d.filter(h=>h.type!=="separator"&&h.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,d=>{s(d),a.hide()})})}createQuickPick(){const e=this.getUI();return new ky(e)}createInputBox(){const e=this.getUI();return new $5e(e)}show(e){const t=this.getUI();this.onShowEmitter.fire();const n=this.controller;this.controller=e,n==null||n.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",br(t.widget),t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(di.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),br(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const r=this.options.backKeybindingLabel();dM.tooltip=r?p("quickInput.backWithKeybinding","Back ({0})",r):p("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.action.enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t,n,r;const s=this.controller;if(!s)return;const o=!Dr(document.activeElement,(n=(t=this.ui)===null||t===void 0?void 0:t.container)!==null&&n!==void 0?n:null);if(this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",!o){let a=this.previousFocusElement;for(;a&&!a.offsetParent;)a=(r=a.parentElement)!==null&&r!==void 0?r:void 0;a!=null&&a.offsetParent?(a.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}s.didHide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isDisplayed()){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,fI.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,widgetBorder:r,widgetShadow:s}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=n??"",this.ui.container.style.border=r?`1px solid ${r}`:"",this.ui.container.style.boxShadow=s?`0 0 8px 2px ${s}`:"",this.ui.list.style(this.styles.list);const o=[];this.styles.pickerGroup.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const a=o.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}isDisplayed(){return this.ui&&this.ui.container.style.display!=="none"}}fI.MAX_WIDTH=600;var K5e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},_S=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let uM=class extends TNe{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(oM))),this._quickAccess}constructor(e,t,n,r){super(n),this.instantiationService=e,this.contextKeyService=t,this.layoutService=r,this._onShow=this._register(new H),this._onHide=this._register(new H),this.contexts=new Map}createController(e=this.layoutService,t){const n={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:s=>this.setContextKey(s),linkOpenerDelegate:s=>{this.instantiationService.invokeFunction(o=>{o.get(lo).open(s,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),createList:(s,o,a,l,c)=>this.instantiationService.createInstance(iM,s,o,a,l,c),styles:this.computeStyles()},r=this._register(new fI(Object.assign(Object.assign({},n),t),this.themeService));return r.layout(e.dimension,e.offset.quickPickTop),this._register(e.onDidLayout(s=>r.layout(s,e.offset.quickPickTop))),this._register(r.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(r.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),r}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new Ne(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t==null||t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},n=xt.None){return this.controller.pick(e,t,n)}createQuickPick(){return this.controller.createQuickPick()}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:Ae(D6),quickInputForeground:Ae(ERe),quickInputTitleBackground:Ae(NRe),widgetBorder:Ae(a5),widgetShadow:Ae(xc)},inputBox:bk,toggle:_k,countBadge:gY,button:e3e,progressBar:t3e,keybindingLabel:J4e,list:eb({listBackground:D6,listFocusBackground:gg,listFocusForeground:fg,listInactiveFocusForeground:fg,listInactiveSelectionIconForeground:Vm,listInactiveFocusBackground:gg,listFocusOutline:Rn,listInactiveFocusOutline:Rn}),pickerGroup:{pickerGroupBorder:Ae(ARe),pickerGroupForeground:Ae(xZ)}}}};uM=K5e([_S(0,rt),_S(1,ot),_S(2,qi),_S(3,J1)],uM);var jY=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Jm=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let hM=class extends uM{constructor(e,t,n,r,s){super(t,n,r,new bP(e.getContainerDomNode(),s)),this.host=void 0;const o=h1.get(e);if(o){const a=o.widget;this.host={_serviceBrand:void 0,get hasContainer(){return!0},get container(){return a.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus(),offset:{top:0,quickPickTop:0}}}else this.host=void 0}createController(){return super.createController(this.host)}};hM=jY([Jm(1,rt),Jm(2,ot),Jm(3,qi),Jm(4,Jt)],hM);let fM=class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const n=t=this.instantiationService.createInstance(hM,e);this.mapEditorToService.set(e,t),Fh(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t={},n=xt.None){return this.activeService.pick(e,t,n)}createQuickPick(){return this.activeService.createQuickPick()}createInputBox(){return this.activeService.createInputBox()}};fM=jY([Jm(0,rt),Jm(1,Jt)],fM);class h1{static get(e){return e.getContribution(h1.ID)}constructor(e){this.editor=e,this.widget=new gI(this.editor)}dispose(){this.widget.dispose()}}h1.ID="editor.controller.quickInput";class gI{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return gI.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}gI.ID="editor.contrib.quickInputWidget";$t(h1.ID,h1,4);class q5e{constructor(e,t,n,r,s){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=r,this.background=s}}function G5e(i){if(!i||!Array.isArray(i))return[];const e=[];let t=0;for(let n=0,r=i.length;n<r;n++){const s=i[n];let o=-1;if(typeof s.fontStyle=="string"){o=0;const c=s.fontStyle.split(" ");for(let d=0,u=c.length;d<u;d++)switch(c[d]){case"italic":o=o|1;break;case"bold":o=o|2;break;case"underline":o=o|4;break;case"strikethrough":o=o|8;break}}let a=null;typeof s.foreground=="string"&&(a=s.foreground);let l=null;typeof s.background=="string"&&(l=s.background),e[t++]=new q5e(s.token||"",n,o,a,l)}return e}function Z5e(i,e){i.sort((d,u)=>{const h=eBe(d.token,u.token);return h!==0?h:d.index-u.index});let t=0,n="000000",r="ffffff";for(;i.length>=1&&i[0].token==="";){const d=i.shift();d.fontStyle!==-1&&(t=d.fontStyle),d.foreground!==null&&(n=d.foreground),d.background!==null&&(r=d.background)}const s=new Y5e;for(const d of e)s.getId(d);const o=s.getId(n),a=s.getId(r),l=new SB(t,o,a),c=new xB(l);for(let d=0,u=i.length;d<u;d++){const h=i[d];c.insert(h.token,h.fontStyle,s.getId(h.foreground),s.getId(h.background))}return new zY(s,c)}const X5e=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class Y5e{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(X5e);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=K.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}}class zY{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(G5e(e),t)}static createFromParsedTokenTheme(e,t){return Z5e(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(typeof n>"u"){const r=this._match(t),s=J5e(t);n=(r.metadata|s<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}}const Q5e=/\b(comment|string|regex|regexp)\b/;function J5e(i){const e=i.match(Q5e);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function eBe(i,e){return i<e?-1:i>e?1:0}class SB{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new SB(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),n!==0&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class xB{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let n,r;t===-1?(n=e,r=""):(n=e.substring(0,t),r=e.substring(t+1));const s=this._children.get(n);return typeof s<"u"?s.match(r):this._mainRule}insert(e,t,n,r){if(e===""){this._mainRule.acceptOverwrite(t,n,r);return}const s=e.indexOf(".");let o,a;s===-1?(o=e,a=""):(o=e.substring(0,s),a=e.substring(s+1));let l=this._children.get(o);typeof l>"u"&&(l=new xB(this._mainRule.clone()),this._children.set(o,l)),l.insert(a,t,n,r)}}function tBe(i){const e=[];for(let t=1,n=i.length;t<n;t++){const r=i[t];e[t]=`.mtk${t} { color: ${r}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}const nBe={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Ki]:"#FFFFFE",[La]:"#000000",[TZ]:"#E5EBF1",[qC]:"#D3D3D3",[GC]:"#939393",[d5]:"#ADD6FF4D"}},iBe={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Ki]:"#1E1E1E",[La]:"#D4D4D4",[TZ]:"#3A3D41",[qC]:"#404040",[GC]:"#707070",[d5]:"#ADD6FF26"}},rBe={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Ki]:"#000000",[La]:"#FFFFFF",[qC]:"#FFFFFF",[GC]:"#FFFFFF"}},sBe={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Ki]:"#FFFFFF",[La]:"#292929",[qC]:"#292929",[GC]:"#292929"}},oBe={IconContribution:"base.contributions.icons"};var WV;(function(i){function e(t,n){let r=t.defaults;for(;Qe.isThemeIcon(r);){const s=Up.getIcon(r.id);if(!s)return;r=s.defaults}return r}i.getDefinition=e})(WV||(WV={}));var VV;(function(i){function e(n){return{weight:n.weight,style:n.style,src:n.src.map(r=>({format:r.format,location:r.location.toString()}))}}i.toJSONObject=e;function t(n){const r=s=>bs(s)?s:void 0;if(n&&Array.isArray(n.src)&&n.src.every(s=>bs(s.format)&&bs(s.location)))return{weight:r(n.weight),style:r(n.style),src:n.src.map(s=>({format:s.format,location:Ye.parse(s.location)}))}}i.fromJSONObject=t})(VV||(VV={}));class aBe{constructor(){this._onDidChange=new H,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:p("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:p("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${Qe.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,r){const s=this.iconsById[e];if(s){if(n&&!s.description){s.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return s}const o={id:e,description:n,defaults:t,deprecationMessage:r};this.iconsById[e]=o;const a={$ref:"#/definitions/icons"};return r&&(a.deprecationMessage=r),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=(s,o)=>s.id.localeCompare(o.id),t=s=>{for(;Qe.isThemeIcon(s.defaults);)s=this.iconsById[s.defaults.id];return`codicon codicon-${s?s.id:""}`},n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const r=Object.keys(this.iconsById).map(s=>this.iconsById[s]);for(const s of r.filter(o=>!!o.description).sort(e))n.push(`|<i class="${t(s)}"></i>|${s.id}|${Qe.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const s of r.filter(o=>!Qe.isThemeIcon(o.defaults)).sort(e))n.push(`|<i class="${t(s)}"></i>|${s.id}|`);return n.join(`
`)}}const Up=new aBe;qn.add(oBe.IconContribution,Up);function gi(i,e,t,n){return Up.registerIcon(i,e,t,n)}function $Y(){return Up}function lBe(){const i=tG();for(const e in i){const t="\\"+i[e].toString(16);Up.registerIcon(e,{fontCharacter:t})}}lBe();const KY="vscode://schemas/icons",qY=qn.as(RD.JSONContribution);qY.registerSchema(KY,Up.getIconSchema());const HV=new fn(()=>qY.notifySchemaChanged(KY),200);Up.onDidChange(()=>{HV.isScheduled()||HV.schedule()});const GY=gi("widget-close",me.close,p("widgetClose","Icon for the close action in widgets."));gi("goto-previous-location",me.arrowUp,p("previousChangeIcon","Icon for goto previous editor location."));gi("goto-next-location",me.arrowDown,p("nextChangeIcon","Icon for goto next editor location."));Qe.modify(me.sync,"spin");Qe.modify(me.loading,"spin");function cBe(i){const e=new ae,t=e.add(new H),n=$Y();return e.add(n.onDidChange(()=>t.fire())),i&&e.add(i.onDidProductIconThemeChange(()=>t.fire())),{dispose:()=>e.dispose(),onDidChange:t.event,getCSS(){const r=i?i.getProductIconTheme():new ZY,s={},o=l=>{const c=r.getIcon(l);if(!c)return;const d=c.font;return d?(s[d.id]=d.definition,`.codicon-${l.id}:before { content: '${c.fontCharacter}'; font-family: ${P8(d.id)}; }`):`.codicon-${l.id}:before { content: '${c.fontCharacter}'; }`},a=[];for(const l of n.getIcons()){const c=o(l);c&&a.push(c)}for(const l in s){const c=s[l],d=c.weight?`font-weight: ${c.weight};`:"",u=c.style?`font-style: ${c.style};`:"",h=c.src.map(f=>`${Wh(f.location)} format('${f.format}')`).join(", ");a.push(`@font-face { src: ${h}; font-family: ${P8(l)};${d}${u} font-display: block; }`)}return a.join(`
`)}}}class ZY{getIcon(e){const t=$Y();let n=e.defaults;for(;Qe.isThemeIcon(n);){const r=t.getIcon(n.id);if(!r)return;n=r.defaults}return n}}const Vd="vs",E_="vs-dark",Dg="hc-black",Ig="hc-light",XY=qn.as(yZ.ColorContribution),dBe=qn.as(FZ.ThemingContribution);class YY{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const n=t.base;e.length>0?(Mx(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,K.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=gM(this.themeData.base);for(const n in t.colors)e.has(n)||e.set(n,K.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){const n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=XY.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case Vd:return Jo.LIGHT;case Dg:return Jo.HIGH_CONTRAST_DARK;case Ig:return Jo.HIGH_CONTRAST_LIGHT;default:return Jo.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const s=gM(this.themeData.base);e=s.rules,s.encodedTokensColors&&(t=s.encodedTokensColors)}const n=this.themeData.colors["editor.foreground"],r=this.themeData.colors["editor.background"];if(n||r){const s={token:""};n&&(s.foreground=n),r&&(s.background=r),e.push(s)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=zY.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){const s=this.tokenTheme._match([e].concat(t).join(".")).metadata,o=kr.getForeground(s),a=kr.getFontStyle(s);return{foreground:o,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4),strikethrough:!!(a&8)}}}function Mx(i){return i===Vd||i===E_||i===Dg||i===Ig}function gM(i){switch(i){case Vd:return nBe;case E_:return iBe;case Dg:return rBe;case Ig:return sBe}}function bS(i){const e=gM(i);return new YY(i,e)}class uBe extends q{constructor(){super(),this._onColorThemeChange=this._register(new H),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new H),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new ZY,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(Vd,bS(Vd)),this._knownThemes.set(E_,bS(E_)),this._knownThemes.set(Dg,bS(Dg)),this._knownThemes.set(Ig,bS(Ig));const e=this._register(cBe(this));this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(Vd),this._onOSSchemeChanged(),this._register(e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()})),hG("(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return DT(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=ca(void 0,e=>{e.className="monaco-colors",e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),q.None}_registerShadowDomContainer(e){const t=ca(e,n=>{n.className="monaco-colors",n.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let n=0;n<this._styleElements.length;n++)if(this._styleElements[n]===t){this._styleElements.splice(n,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!Mx(t.base)&&!Mx(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new YY(e,t)),Mx(e)&&this._knownThemes.forEach(n=>{n.base===e&&n.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(Vd),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=window.matchMedia("(forced-colors: active)").matches;if(e!==Rl(this._theme.type)){let t;t1(this._theme.type)?t=e?Dg:E_:t=e?Ig:Vd,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},n={addRule:o=>{t[o]||(e.push(o),t[o]=!0)}};dBe.getThemingParticipants().forEach(o=>o(this._theme,n,this._environment));const r=[];for(const o of XY.getColors()){const a=this._theme.getColor(o.id,!0);a&&r.push(`${o5(o.id)}: ${a.toString()};`)}n.addRule(`.monaco-editor, .monaco-diff-editor { ${r.join(`
`)} }`);const s=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(tBe(s)),this._themeCSS=e.join(`
`),this._updateCSS(),Gn.setColorMap(s),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}const Ho=Lt("themeService");var hBe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},JE=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let pM=class extends q{constructor(e,t,n){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=n,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new H,this._onDidChangeReducedMotion=new H,this._accessibilityModeEnabledContext=UC.bindTo(this._contextKeyService);const r=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("editor.accessibilitySupport")&&(r(),this._onDidChangeScreenReaderOptimized.fire()),o.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),r(),this._register(this.onDidChangeScreenReaderOptimized(()=>r()));const s=window.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=s.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this.initReducedMotionListeners(s)}initReducedMotionListeners(e){if(!this._layoutService.hasContainer)return;this._register(ee(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=()=>{const n=this.isMotionReduced();this._layoutService.container.classList.toggle("reduce-motion",n),this._layoutService.container.classList.toggle("enable-motion",!n)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};pM=hBe([JE(0,ot),JE(1,J1),JE(2,Et)],pM);var pI=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},np=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},km,Uu;let mM=class{constructor(e,t){this._commandService=e,this._hiddenStates=new Ek(t)}createMenu(e,t,n){return new bM(e,this._hiddenStates,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},n),this._commandService,t)}resetHiddenStates(e){this._hiddenStates.reset(e)}};mM=pI([np(0,oi),np(1,Za)],mM);let Ek=km=class{constructor(e){this._storageService=e,this._disposables=new ae,this._onDidChange=new H,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(km._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,km._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{const t=e.get(km._key,0,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){var n;return(n=this._hiddenByDefaultCache.get(`${e.id}/${t}`))!==null&&n!==void 0?n:!1}setDefaultState(e,t,n){this._hiddenByDefaultCache.set(`${e.id}/${t}`,n)}isHidden(e,t){var n,r;const s=this._isHiddenByDefault(e,t),o=(r=(n=this._data[e.id])===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1;return s?!o:o}updateHidden(e,t,n){this._isHiddenByDefault(e,t)&&(n=!n);const s=this._data[e.id];if(n)s?s.indexOf(t)<0&&s.push(t):this._data[e.id]=[t];else if(s){const o=s.indexOf(t);o>=0&&bSe(s,o),s.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(km._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}};Ek._key="menu.hiddenCommands";Ek=km=pI([np(0,Za)],Ek);let _M=Uu=class{constructor(e,t,n,r,s){this._id=e,this._hiddenStates=t,this._collectContextKeysForSubmenus=n,this._commandService=r,this._contextKeyService=s,this._menuGroups=[],this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=pr.getMenuItems(this._id);let t;e.sort(Uu._compareMenuItems);for(const n of e){const r=n.group||"";(!t||t[0]!==r)&&(t=[r,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeys(n)}}_collectContextKeys(e){if(Uu._fillInKbExprKeys(e.when,this._structureContextKeys),Mm(e)){if(e.command.precondition&&Uu._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;Uu._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&pr.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}createActionGroups(e){const t=[];for(const n of this._menuGroups){const[r,s]=n,o=[];for(const a of s)if(this._contextKeyService.contextMatchesRules(a.when)){const l=Mm(a);l&&this._hiddenStates.setDefaultState(this._id,a.command.id,!!a.isHiddenByDefault);const c=fBe(this._id,l?a.command:a,this._hiddenStates);if(l)o.push(new Wa(a.command,a.alt,e,c,this._contextKeyService,this._commandService));else{const d=new Uu(a.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._contextKeyService).createActionGroups(e),u=rr.join(...d.map(h=>h[1]));u.length>0&&o.push(new V0(a,c,u))}}o.length>0&&t.push([r,o])}return t}static _fillInKbExprKeys(e,t){if(e)for(const n of e.keys())t.add(n)}static _compareMenuItems(e,t){const n=e.group,r=t.group;if(n!==r){if(n){if(!r)return-1}else return 1;if(n==="navigation")return-1;if(r==="navigation")return 1;const a=n.localeCompare(r);if(a!==0)return a}const s=e.order||0,o=t.order||0;return s<o?-1:s>o?1:Uu._compareTitles(Mm(e)?e.command.title:e.title,Mm(t)?t.command.title:t.title)}static _compareTitles(e,t){const n=typeof e=="string"?e:e.original,r=typeof t=="string"?t:t.original;return n.localeCompare(r)}};_M=Uu=pI([np(3,oi),np(4,ot)],_M);let bM=class{constructor(e,t,n,r,s){this._disposables=new ae,this._menuInfo=new _M(e,t,n.emitEventsForSubmenuChanges,r,s);const o=new fn(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},n.eventDebounceDelay);this._disposables.add(o),this._disposables.add(pr.onDidChangeMenu(d=>{d.has(e)&&o.schedule()}));const a=this._disposables.add(new ae),l=d=>{let u=!1,h=!1,f=!1;for(const g of d)if(u=u||g.isStructuralChange,h=h||g.isEnablementChange,f=f||g.isToggleChange,u&&h&&f)break;return{menu:this,isStructuralChange:u,isEnablementChange:h,isToggleChange:f}},c=()=>{a.add(s.onDidChangeContext(d=>{const u=d.affectsSome(this._menuInfo.structureContextKeys),h=d.affectsSome(this._menuInfo.preconditionContextKeys),f=d.affectsSome(this._menuInfo.toggledContextKeys);(u||h||f)&&this._onDidChange.fire({menu:this,isStructuralChange:u,isEnablementChange:h,isToggleChange:f})})),a.add(t.onDidChange(d=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new zq({onWillAddFirstListener:c,onDidRemoveLastListener:a.clear.bind(a),delay:n.eventDebounceDelay,merge:l}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};bM=pI([np(3,oi),np(4,ot)],bM);function fBe(i,e,t){const n=cke(e)?e.submenu.id:e.id,r=typeof e.title=="string"?e.title:e.title.value,s=u_({id:`hide/${i.id}/${n}`,label:p("hide.label","Hide '{0}'",r),run(){t.updateHidden(i,n,!0)}}),o=u_({id:`toggle/${i.id}/${n}`,label:r,get checked(){return!t.isHidden(i,n)},run(){t.updateHidden(i,n,!!this.checked)}});return{hide:s,toggle:o,get isHidden(){return!o.checked}}}var gBe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},UV=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Af=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};let vM=class extends q{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],(hu||fG)&&this.installWebKitWriteTextWorkaround()}installWebKitWriteTextWorkaround(){const e=()=>{const t=new xD;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(n=>Af(this,void 0,void 0,function*(){(!(n instanceof Error)||n.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(n)}))};this.layoutService.hasContainer&&(this._register(ee(this.layoutService.container,"click",e)),this._register(ee(this.layoutService.container,"keydown",e)))}writeText(e,t){return Af(this,void 0,void 0,function*(){if(t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return yield navigator.clipboard.writeText(e)}catch(s){console.error(s)}const n=document.activeElement,r=document.body.appendChild(ce("textarea",{"aria-hidden":!0}));r.style.height="1px",r.style.width="1px",r.style.position="absolute",r.value=e,r.focus(),r.select(),document.execCommand("copy"),n instanceof HTMLElement&&n.focus(),document.body.removeChild(r)})}readText(e){return Af(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(t){return console.error(t),""}})}readFindText(){return Af(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return Af(this,void 0,void 0,function*(){this.findText=e})}writeResources(e){return Af(this,void 0,void 0,function*(){this.resources=e})}readResources(){return Af(this,void 0,void 0,function*(){return this.resources})}};vM=gBe([UV(0,J1),UV(1,Vo)],vM);const xu=Lt("clipboardService");var pBe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},mBe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Qv="data-keybinding-context";let TB=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return Object.assign({},this._value)}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}};class f1 extends TB{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}f1.INSTANCE=new f1;class Ly extends TB{constructor(e,t,n){super(e,null),this._configurationService=t,this._values=L_.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(r=>{if(r.source===7){const s=Array.from(this._values,([o])=>o);this._values.clear(),n.fire(new zV(s))}else{const s=[];for(const o of r.affectedKeys){const a=`config.${o}`,l=this._values.findSuperstr(a);l!==void 0&&(s.push(...St.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(s.push(a),this._values.delete(a))}n.fire(new zV(s))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(Ly._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(Ly._keyPrefix.length),n=this._configurationService.getValue(t);let r;switch(typeof n){case"number":case"boolean":case"string":r=n;break;default:Array.isArray(n)?r=JSON.stringify(n):r=n}return this._values.set(e,r),r}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}Ly._keyPrefix="config.";class _Be{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class jV{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class zV{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}}class bBe{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}}function vBe(i,e){return i.allKeysContainedIn(new Set(Object.keys(e)))}class QY extends q{constructor(e){super(),this._onDidChangeContext=this._register(new Ug({merge:t=>new bBe(t)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new _Be(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new yBe(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new jV(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new jV(e))}getContext(e){return this._isDisposed?f1.INSTANCE:this.getContextValuesContainer(CBe(e))}dispose(){super.dispose(),this._isDisposed=!0}}let yM=class extends QY{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0;const t=this._register(new Ly(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t)}getContextValuesContainer(e){return this._isDisposed?f1.INSTANCE:this._contexts.get(e)||f1.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new TB(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};yM=pBe([mBe(0,Et)],yM);class yBe extends QY{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new vr),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(Qv)){let n="";this._domNode.classList&&(n=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${n?": "+n:""}`)}this._domNode.setAttribute(Qv,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const n=this._parent.getContextValuesContainer(this._myContextId).value;vBe(e,n)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(Qv),super.dispose())}getContextValuesContainer(e){return this._isDisposed?f1.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function CBe(i){for(;i;){if(i.hasAttribute(Qv)){const e=i.getAttribute(Qv);return e?parseInt(e,10):NaN}i=i.parentElement}return 0}function wBe(i,e,t){i.get(ot).createKey(String(e),SBe(t))}function SBe(i){return Eq(i,e=>{if(typeof e=="object"&&e.$mid===1)return Ye.revive(e).toString();if(e instanceof Ye)return e.toString()})}Bt.registerCommand("_setContext",wBe);Bt.registerCommand({id:"getContextKeyInfo",handler(){return[...Ne.all()].sort((i,e)=>i.key.localeCompare(e.key))},description:{description:p("getContextKeyInfo","A command that returns information about context keys"),args:[]}});Bt.registerCommand("_generateContextKeyInfo",function(){const i=[],e=new Set;for(const t of Ne.all())e.has(t.key)||(e.add(t.key),i.push(t));i.sort((t,n)=>t.key.localeCompare(n.key)),console.log(JSON.stringify(i,void 0,2))});let xBe=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}};class $V{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),r=this.lookupOrInsertNode(t);n.outgoing.set(r.key,r),r.incoming.set(n.key,n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new xBe(t,e),this._nodes.set(t,n)),n}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,n]of this._nodes)e.push(`${t}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const n=new Set([e]),r=this._findCycle(t,n);if(r)return r}}_findCycle(e,t){for(const[n,r]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const s=this._findCycle(r,t);if(s)return s;t.delete(n)}}}const TBe=!1;class KV extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class Nk{constructor(e=new qD,t=!1,n,r=TBe){var s;this._services=e,this._strict=t,this._parent=n,this._enableTracing=r,this._activeInstantiations=new Set,this._services.set(rt,this),this._globalGraph=r?(s=n==null?void 0:n._globalGraph)!==null&&s!==void 0?s:new $V(o=>o):void 0}createChild(e){return new Nk(e,this._strict,this,this._enableTracing)}invokeFunction(e,...t){const n=Ns.traceInvocation(this._enableTracing,e);let r=!1;try{return e({get:o=>{if(r)throw x3("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(o,n);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...t)}finally{r=!0,n.stop()}}createInstance(e,...t){let n,r;return e instanceof cc?(n=Ns.traceCreation(this._enableTracing,e.ctor),r=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=Ns.traceCreation(this._enableTracing,e),r=this._createInstance(e,t,n)),n.stop(),r}_createInstance(e,t=[],n){const r=Sl.getServiceDependencies(e).sort((a,l)=>a.index-l.index),s=[];for(const a of r){const l=this._getOrCreateServiceInstance(a.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),s.push(l)}const o=r.length>0?r[0].index:t.length;if(t.length!==o){console.trace(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);const a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return Reflect.construct(e,t.concat(s))}_setServiceInstance(e,t){if(this._services.get(e)instanceof cc)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const n=this._getServiceInstanceOrDescriptor(e);return n instanceof cc?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){var r;const s=new $V(l=>l.id.toString());let o=0;const a=[{id:e,desc:t,_trace:n}];for(;a.length;){const l=a.pop();if(s.lookupOrInsertNode(l),o++>1e3)throw new KV(s);for(const c of Sl.getServiceDependencies(l.desc.ctor)){const d=this._getServiceInstanceOrDescriptor(c.id);if(d||this._throwIfStrict(`[createInstance] ${e} depends on ${c.id} which is NOT registered.`,!0),(r=this._globalGraph)===null||r===void 0||r.insertEdge(String(l.id),String(c.id)),d instanceof cc){const u={id:c.id,desc:d,_trace:l._trace.branch(c.id,!0)};s.insertEdge(l,u),a.push(u)}}}for(;;){const l=s.roots();if(l.length===0){if(!s.isEmpty())throw new KV(s);break}for(const{data:c}of l){if(this._getServiceInstanceOrDescriptor(c.id)instanceof cc){const u=this._createServiceInstanceWithOwner(c.id,c.desc.ctor,c.desc.staticArguments,c.desc.supportsDelayedInstantiation,c._trace);this._setServiceInstance(c.id,u)}s.removeNode(c)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],r,s){if(this._services.get(e)instanceof cc)return this._createServiceInstance(e,t,n,r,s);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,r,s);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,n=[],r,s){if(r){const o=new Nk(void 0,this._strict,this,this._enableTracing);o._globalGraphImplicitDependency=String(e);const a=new Map,l=new px(()=>{const c=o._createInstance(t,n,s);for(const[d,u]of a){const h=c[d];if(typeof h=="function")for(const f of u)h.apply(c,f)}return a.clear(),c});return new Proxy(Object.create(null),{get(c,d){if(!l.isInitialized&&typeof d=="string"&&(d.startsWith("onDid")||d.startsWith("onWill"))){let f=a.get(d);return f||(f=new ps,a.set(d,f)),(m,y,b)=>{const v=f.push([m,y,b]);return st(v)}}if(d in c)return c[d];const u=l.value;let h=u[d];return typeof h!="function"||(h=h.bind(u),c[d]=h),h},set(c,d,u){return l.value[d]=u,!0},getPrototypeOf(c){return t.prototype}})}else return this._createInstance(t,n,s)}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}class Ns{static traceInvocation(e,t){return e?new Ns(2,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):Ns._None}static traceCreation(e,t){return e?new Ns(1,t.name):Ns._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const n=new Ns(3,e.toString());return this._dep.push([e,t,n]),n}stop(){const e=Date.now()-this._start;Ns._totals+=e;let t=!1;function n(s,o){const a=[],l=new Array(s+1).join("	");for(const[c,d,u]of o._dep)if(d&&u){t=!0,a.push(`${l}CREATES -> ${c}`);const h=n(s+1,u);h&&a.push(h)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}const r=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${Ns._totals.toFixed(2)}ms)`];(e>2||t)&&Ns.all.add(r.join(`
`))}}Ns.all=new Set;Ns._None=new class extends Ns{constructor(){super(0,null)}stop(){}branch(){return this}};Ns._totals=0;const kBe=new Set([bt.inMemory,bt.vscodeSourceControl,bt.walkThrough,bt.walkThroughSnippet]);class LBe{constructor(){this._byResource=new Hr,this._byOwner=new Map}set(e,t,n){let r=this._byResource.get(e);r||(r=new Map,this._byResource.set(e,r)),r.set(t,n);let s=this._byOwner.get(t);s||(s=new Hr,this._byOwner.set(t,s)),s.set(e,n)}get(e,t){const n=this._byResource.get(e);return n==null?void 0:n.get(t)}delete(e,t){let n=!1,r=!1;const s=this._byResource.get(e);s&&(n=s.delete(t));const o=this._byOwner.get(t);if(o&&(r=o.delete(e)),n!==r)throw new Error("illegal state");return n&&r}values(e){var t,n,r,s;return typeof e=="string"?(n=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&n!==void 0?n:St.empty():Ye.isUri(e)?(s=(r=this._byResource.get(e))===null||r===void 0?void 0:r.values())!==null&&s!==void 0?s:St.empty():St.map(St.concat(...this._byOwner.values()),o=>o[1])}}class DBe{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new Hr,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const n=this._data.get(t);n&&this._substract(n);const r=this._resourceStats(t);this._add(r),this._data.set(t,r)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(kBe.has(e.scheme))return t;for(const{severity:n}of this._service.read({resource:e}))n===Yn.Error?t.errors+=1:n===Yn.Warning?t.warnings+=1:n===Yn.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class zu{constructor(){this._onMarkerChanged=new zq({delay:0,merge:zu._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new LBe,this._stats=new DBe(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if(Tq(n))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const r=[];for(const s of n){const o=zu._toMarker(e,t,s);o&&r.push(o)}this._data.set(t,e,r),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,n){let{code:r,severity:s,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:u,relatedInformation:h,tags:f}=n;if(o)return l=l>0?l:1,c=c>0?c:1,d=d>=l?d:l,u=u>0?u:c,{resource:t,owner:e,code:r,severity:s,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:u,relatedInformation:h,tags:f}}changeAll(e,t){const n=[],r=this._data.values(e);if(r)for(const s of r){const o=St.first(s);o&&(n.push(o.resource),this._data.delete(o.resource,e))}if(zr(t)){const s=new Hr;for(const{resource:o,marker:a}of t){const l=zu._toMarker(e,o,a);if(!l)continue;const c=s.get(o);c?c.push(l):(s.set(o,[l]),n.push(o))}for(const[o,a]of s)this._data.set(o,e,a)}n.length>0&&this._onMarkerChanged.fire(n)}read(e=Object.create(null)){let{owner:t,resource:n,severities:r,take:s}=e;if((!s||s<0)&&(s=-1),t&&n){const o=this._data.get(n,t);if(o){const a=[];for(const l of o)if(zu._accept(l,r)){const c=a.push(l);if(s>0&&c===s)break}return a}else return[]}else if(!t&&!n){const o=[];for(const a of this._data.values())for(const l of a)if(zu._accept(l,r)){const c=o.push(l);if(s>0&&c===s)return o}return o}else{const o=this._data.values(n??t),a=[];for(const l of o)for(const c of l)if(zu._accept(c,r)){const d=a.push(c);if(s>0&&d===s)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new Hr;for(const n of e)for(const r of n)t.set(r,!0);return Array.from(t.keys())}}class IBe extends q{constructor(){super(...arguments),this._configurationModel=new Br}get configurationModel(){return this._configurationModel}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=new Br;const e=qn.as(Zl.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const n=this.getConfigurationDefaultOverrides();for(const r of e){const s=n[r],o=t[r];s!==void 0?this._configurationModel.addValue(r,s):o?this._configurationModel.addValue(r,o.default):this._configurationModel.removeValue(r)}}}const ow=Lt("audioCue");class vt{static register(e){return new vt(e.fileName)}constructor(e){this.fileName=e}}vt.error=vt.register({fileName:"error.mp3"});vt.warning=vt.register({fileName:"warning.mp3"});vt.foldedArea=vt.register({fileName:"foldedAreas.mp3"});vt.break=vt.register({fileName:"break.mp3"});vt.quickFixes=vt.register({fileName:"quickFixes.mp3"});vt.taskCompleted=vt.register({fileName:"taskCompleted.mp3"});vt.taskFailed=vt.register({fileName:"taskFailed.mp3"});vt.terminalBell=vt.register({fileName:"terminalBell.mp3"});vt.diffLineInserted=vt.register({fileName:"diffLineInserted.mp3"});vt.diffLineDeleted=vt.register({fileName:"diffLineDeleted.mp3"});vt.diffLineModified=vt.register({fileName:"diffLineModified.mp3"});vt.chatRequestSent=vt.register({fileName:"chatRequestSent.mp3"});vt.chatResponsePending=vt.register({fileName:"chatResponsePending.mp3"});vt.chatResponseReceived1=vt.register({fileName:"chatResponseReceived1.mp3"});vt.chatResponseReceived2=vt.register({fileName:"chatResponseReceived2.mp3"});vt.chatResponseReceived3=vt.register({fileName:"chatResponseReceived3.mp3"});vt.chatResponseReceived4=vt.register({fileName:"chatResponseReceived4.mp3"});class RBe{constructor(e){this.randomOneOf=e}}class Ut{static register(e){const t=new RBe("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),n=new Ut(t,e.name,e.settingsKey);return Ut._audioCues.add(n),n}constructor(e,t,n){this.sound=e,this.name=t,this.settingsKey=n}}Ut._audioCues=new Set;Ut.error=Ut.register({name:p("audioCues.lineHasError.name","Error on Line"),sound:vt.error,settingsKey:"audioCues.lineHasError"});Ut.warning=Ut.register({name:p("audioCues.lineHasWarning.name","Warning on Line"),sound:vt.warning,settingsKey:"audioCues.lineHasWarning"});Ut.foldedArea=Ut.register({name:p("audioCues.lineHasFoldedArea.name","Folded Area on Line"),sound:vt.foldedArea,settingsKey:"audioCues.lineHasFoldedArea"});Ut.break=Ut.register({name:p("audioCues.lineHasBreakpoint.name","Breakpoint on Line"),sound:vt.break,settingsKey:"audioCues.lineHasBreakpoint"});Ut.inlineSuggestion=Ut.register({name:p("audioCues.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:vt.quickFixes,settingsKey:"audioCues.lineHasInlineSuggestion"});Ut.terminalQuickFix=Ut.register({name:p("audioCues.terminalQuickFix.name","Terminal Quick Fix"),sound:vt.quickFixes,settingsKey:"audioCues.terminalQuickFix"});Ut.onDebugBreak=Ut.register({name:p("audioCues.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:vt.break,settingsKey:"audioCues.onDebugBreak"});Ut.noInlayHints=Ut.register({name:p("audioCues.noInlayHints","No Inlay Hints on Line"),sound:vt.error,settingsKey:"audioCues.noInlayHints"});Ut.taskCompleted=Ut.register({name:p("audioCues.taskCompleted","Task Completed"),sound:vt.taskCompleted,settingsKey:"audioCues.taskCompleted"});Ut.taskFailed=Ut.register({name:p("audioCues.taskFailed","Task Failed"),sound:vt.taskFailed,settingsKey:"audioCues.taskFailed"});Ut.terminalCommandFailed=Ut.register({name:p("audioCues.terminalCommandFailed","Terminal Command Failed"),sound:vt.error,settingsKey:"audioCues.terminalCommandFailed"});Ut.terminalBell=Ut.register({name:p("audioCues.terminalBell","Terminal Bell"),sound:vt.terminalBell,settingsKey:"audioCues.terminalBell"});Ut.notebookCellCompleted=Ut.register({name:p("audioCues.notebookCellCompleted","Notebook Cell Completed"),sound:vt.taskCompleted,settingsKey:"audioCues.notebookCellCompleted"});Ut.notebookCellFailed=Ut.register({name:p("audioCues.notebookCellFailed","Notebook Cell Failed"),sound:vt.taskFailed,settingsKey:"audioCues.notebookCellFailed"});Ut.diffLineInserted=Ut.register({name:p("audioCues.diffLineInserted","Diff Line Inserted"),sound:vt.diffLineInserted,settingsKey:"audioCues.diffLineInserted"});Ut.diffLineDeleted=Ut.register({name:p("audioCues.diffLineDeleted","Diff Line Deleted"),sound:vt.diffLineDeleted,settingsKey:"audioCues.diffLineDeleted"});Ut.diffLineModified=Ut.register({name:p("audioCues.diffLineModified","Diff Line Modified"),sound:vt.diffLineModified,settingsKey:"audioCues.diffLineModified"});Ut.chatRequestSent=Ut.register({name:p("audioCues.chatRequestSent","Chat Request Sent"),sound:vt.chatRequestSent,settingsKey:"audioCues.chatRequestSent"});Ut.chatResponseReceived=Ut.register({name:p("audioCues.chatResponseReceived","Chat Response Received"),settingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[vt.chatResponseReceived1,vt.chatResponseReceived2,vt.chatResponseReceived3,vt.chatResponseReceived4]}});Ut.chatResponsePending=Ut.register({name:p("audioCues.chatResponsePending","Chat Response Pending"),sound:vt.chatResponsePending,settingsKey:"audioCues.chatResponsePending"});class EBe extends q{constructor(e,t=[]){super(),this.logger=new uke([e,...t]),this._register(e.onDidChangeLogLevel(n=>this.setLevel(n)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}}const JY=[];function mI(i){JY.push(i)}function NBe(){return JY.slice(0)}var wf=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},gr=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},N_=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class ABe{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new H}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let CM=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new Oxe(new ABe(t))):Promise.reject(new Error("Model not found"))}};CM=wf([gr(0,zn)],CM);class _I{show(){return _I.NULL_PROGRESS_RUNNER}showWhile(e,t){return N_(this,void 0,void 0,function*(){yield e})}}_I.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class PBe{withProgress(e,t,n){return t({report:()=>{}})}}class MBe{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}}class OBe{confirm(e){return N_(this,void 0,void 0,function*(){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}})}doConfirm(e,t){let n=e;return t&&(n=n+`

`+t),window.confirm(n)}prompt(e){var t,n;return N_(this,void 0,void 0,function*(){let r;if(this.doConfirm(e.message,e.detail)){const o=[...(t=e.buttons)!==null&&t!==void 0?t:[]];e.cancelButton&&typeof e.cancelButton!="string"&&typeof e.cancelButton!="boolean"&&o.push(e.cancelButton),r=yield(n=o[0])===null||n===void 0?void 0:n.run({checkboxChecked:!1})}return{result:r}})}error(e,t){return N_(this,void 0,void 0,function*(){yield this.prompt({type:di.Error,message:e,detail:t})})}}class Dy{info(e){return this.notify({severity:di.Info,message:e})}warn(e){return this.notify({severity:di.Warning,message:e})}error(e){return this.notify({severity:di.Error,message:e})}notify(e){switch(e.severity){case di.Error:console.error(e.message);break;case di.Warning:console.warn(e.message);break;default:console.log(e.message);break}return Dy.NO_OP}prompt(e,t,n,r){return Dy.NO_OP}status(e,t){return q.None}}Dy.NO_OP=new VMe;let wM=class{constructor(e){this._onWillExecuteCommand=new H,this._onDidExecuteCommand=new H,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const n=Bt.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const r=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(r)}catch(r){return Promise.reject(r)}}};wM=wf([gr(0,rt)],wM);let g1=class extends GOe{constructor(e,t,n,r,s,o){super(e,t,n,r,s),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=f=>{const g=new ae;g.add(ee(f,Ce.KEY_DOWN,m=>{const y=new kn(m);this._dispatch(y,y.target)&&(y.preventDefault(),y.stopPropagation())})),g.add(ee(f,Ce.KEY_UP,m=>{const y=new kn(m);this._singleModifierDispatch(y,y.target)&&y.preventDefault()})),this._domNodeListeners.push(new FBe(f,g))},l=f=>{for(let g=0;g<this._domNodeListeners.length;g++){const m=this._domNodeListeners[g];m.domNode===f&&(this._domNodeListeners.splice(g,1),m.dispose())}},c=f=>{f.getOption(61)||a(f.getContainerDomNode())},d=f=>{f.getOption(61)||l(f.getContainerDomNode())};this._register(o.onCodeEditorAdd(c)),this._register(o.onCodeEditorRemove(d)),o.listCodeEditors().forEach(c);const u=f=>{a(f.getContainerDomNode())},h=f=>{l(f.getContainerDomNode())};this._register(o.onDiffEditorAdd(u)),this._register(o.onDiffEditorRemove(h)),o.listDiffEditors().forEach(u)}addDynamicKeybinding(e,t,n,r){return Pa(Bt.registerCommand(e,n),this.addDynamicKeybindings([{keybinding:t,command:e,when:r}]))}addDynamicKeybindings(e){const t=e.map(n=>{var r;return{keybinding:xA(n.keybinding,To),command:(r=n.command)!==null&&r!==void 0?r:null,commandArgs:n.commandArgs,when:n.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}});return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),st(()=>{for(let n=0;n<this._dynamicKeybindings.length;n++)if(this._dynamicKeybindings[n]===t[0]){this._dynamicKeybindings.splice(n,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(Fs.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new Yv(e,t,n=>this._log(n))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){const n=[];let r=0;for(const s of e){const o=s.when||void 0,a=s.keybinding;if(!a)n[r++]=new iV(void 0,s.command,s.commandArgs,o,t,null,!1);else{const l=gy.resolveKeybinding(a,To);for(const c of l)n[r++]=new iV(c,s.command,s.commandArgs,o,t,null,!1)}}return n}resolveKeyboardEvent(e){const t=new fu(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new gy([t],To)}};g1=wf([gr(0,ot),gr(1,oi),gr(2,Wo),gr(3,wi),gr(4,Vo),gr(5,Jt)],g1);class FBe extends q{constructor(e,t){super(),this.domNode=e,this._register(t)}}function qV(i){return i&&typeof i=="object"&&(!i.overrideIdentifier||typeof i.overrideIdentifier=="string")&&(!i.resource||i.resource instanceof Ye)}class eQ{constructor(){this._onDidChangeConfiguration=new H,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const e=new IBe;this._configuration=new YD(e.reload(),new Br,new Br,new Br),e.dispose()}getValue(e,t){const n=typeof e=="string"?e:void 0,r=qV(e)?e:qV(t)?t:{};return this._configuration.getValue(n,r,void 0)}updateValues(e){const t={data:this._configuration.toData()},n=[];for(const r of e){const[s,o]=r;this.getValue(s)!==o&&(this._configuration.updateValue(s,o),n.push(s))}if(n.length>0){const r=new zOe({keys:n,overrides:[]},t,this._configuration);r.source=8,r.sourceConfig=null,this._onDidChangeConfiguration.fire(r)}return Promise.resolve()}updateValue(e,t,n,r){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}}let SM=class{constructor(e,t,n){this.configurationService=e,this.modelService=t,this.languageService=n,this._onDidChangeConfiguration=new H,this.configurationService.onDidChangeConfiguration(r=>{this._onDidChangeConfiguration.fire({affectedKeys:r.affectedKeys,affectsConfiguration:(s,o)=>r.affectsConfiguration(o)})})}getValue(e,t,n){const r=U.isIPosition(t)?t:null,s=r?typeof n=="string"?n:void 0:typeof t=="string"?t:void 0,o=e?this.getLanguage(e,r):void 0;return typeof s>"u"?this.configurationService.getValue({resource:e,overrideIdentifier:o}):this.configurationService.getValue(s,{resource:e,overrideIdentifier:o})}getLanguage(e,t){const n=this.modelService.getModel(e);return n?t?n.getLanguageIdAtPosition(t.lineNumber,t.column):n.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}};SM=wf([gr(0,Et),gr(1,zn),gr(2,Fn)],SM);let xM=class{constructor(e){this.configurationService=e}getEOL(e,t){const n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&typeof n=="string"&&n!=="auto"?n:os||Ot?`
`:`\r
`}};xM=wf([gr(0,Et)],xM);class BBe{publicLog2(){}}class Iy{constructor(){const e=Ye.from({scheme:Iy.SCHEME,authority:"model",path:"/"});this.workspace={id:$X,folders:[new cFe({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===Iy.SCHEME?this.workspace.folders[0]:null}}Iy.SCHEME="inmemory";function Ak(i,e,t){if(!e||!(i instanceof eQ))return;const n=[];Object.keys(e).forEach(r=>{WOe(r)&&n.push([`editor.${r}`,e[r]]),t&&VOe(r)&&n.push([`diffEditor.${r}`,e[r]])}),n.length>0&&i.updateValues(n)}let TM=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return N_(this,void 0,void 0,function*(){const n=Array.isArray(e)?e:j5.convert(e),r=new Map;for(const a of n){if(!(a instanceof tu))throw new Error("bad edit - only text edits are supported");const l=this._modelService.getModel(a.resource);if(!l)throw new Error("bad edit - model not found");if(typeof a.versionId=="number"&&l.getVersionId()!==a.versionId)throw new Error("bad state - model changed in the meantime");let c=r.get(l);c||(c=[],r.set(l,c)),c.push(jn.replaceMove(D.lift(a.textEdit.range),a.textEdit.text))}let s=0,o=0;for(const[a,l]of r)a.pushStackElement(),a.pushEditOperations([],l,()=>[]),a.pushStackElement(),o+=1,s+=l.length;return{ariaSummary:jg(IP.bulkEditServiceSummary,s,o),isApplied:s>0}})}};TM=wf([gr(0,zn)],TM);class WBe{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return ha(e)}}let kM=class extends RP{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,n){if(!t){const r=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();r&&(t=r.getContainerDomNode())}return super.showContextView(e,t,n)}};kM=wf([gr(0,J1),gr(1,Jt)],kM);class VBe{constructor(){this._neverEmitter=new H,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class HBe extends _y{constructor(){super()}}class UBe extends EBe{constructor(){super(new dke)}}let LM=class extends GP{constructor(e,t,n,r,s,o){super(e,t,n,r,s,o),this.configure({blockMouse:!1})}};LM=wf([gr(0,Wo),gr(1,wi),gr(2,Cu),gr(3,bn),gr(4,dd),gr(5,ot)],LM);class jBe{playAudioCue(e,t){return N_(this,void 0,void 0,function*(){})}}Wt(Et,eQ,0);Wt(J3,SM,0);Wt(hZ,xM,0);Wt(Yg,Iy,0);Wt(a1,WBe,0);Wt(Wo,BBe,0);Wt(YC,OBe,0);Wt(V5,MBe,0);Wt(wi,Dy,0);Wt(fd,zu,0);Wt(Fn,HBe,0);Wt(Ho,uBe,0);Wt(Vo,UBe,0);Wt(zn,Sk,0);Wt(s5,JP,0);Wt(ot,yM,0);Wt(zX,PBe,0);Wt(Cf,_I,0);Wt(Za,Y4e,0);Wt(Xa,WA,0);Wt(QC,TM,0);Wt(KX,VBe,0);Wt(Vs,CM,0);Wt(yu,pM,0);Wt(_a,f5e,0);Wt(oi,wM,0);Wt(bn,g1,0);Wt(Xl,fM,0);Wt(Cu,kM,0);Wt(lo,QP,0);Wt(xu,vM,0);Wt(qa,LM,0);Wt(dd,mM,0);Wt(ow,jBe,0);var tt;(function(i){const e=new qD;for(const[l,c]of j8())e.set(l,c);const t=new Nk(e,!0);e.set(rt,t);function n(l){r||o({});const c=e.get(l);if(!c)throw new Error("Missing service "+l);return c instanceof cc?t.invokeFunction(d=>d.get(l)):c}i.get=n;let r=!1;const s=new H;function o(l){if(r)return t;r=!0;for(const[d,u]of j8())e.get(d)||e.set(d,u);for(const d in l)if(l.hasOwnProperty(d)){const u=Lt(d);e.get(u)instanceof cc&&e.set(u,l[d])}const c=NBe();for(const d of c)try{t.createInstance(d)}catch(u){ut(u)}return s.fire(),t}i.initialize=o;function a(l){if(r)return l();const c=new ae,d=c.add(s.event(()=>{d.dispose(),c.add(l())}));return c}i.withServices=a})(tt||(tt={}));let zBe;function iu(){return zBe}let tQ;function $Be(i){tQ=i}class nQ{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const n=t===void 0?void 0:e,r=t===void 0?e:t;return tQ({owner:n,debugName:()=>{const s=jp(r);if(s!==void 0)return s;const a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(r.toString());if(a)return`${this.debugName}.${a[2]}`;if(!n)return`${this.debugName} (mapped)`}},s=>r(this.read(s),s))}}class aw extends nQ{constructor(){super(...arguments),this.observers=new Set}addObserver(e){const t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function Hn(i,e){const t=new iQ(i,e);try{i(t)}finally{t.finish()}}function DM(i,e,t){i?e(i):Hn(e,t)}class iQ{constructor(e,t){var n;this._fn=e,this._getDebugName=t,this.updatingObservers=[],(n=iu())===null||n===void 0||n.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():jp(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){var e;const t=this.updatingObservers;this.updatingObservers=null;for(const{observer:n,observable:r}of t)n.endUpdate(r);(e=iu())===null||e===void 0||e.handleEndTransaction()}}function kB(i,e,t,n){let r;if(i!==void 0)if(typeof i=="function"){if(r=i(),r!==void 0)return r}else return i;if(e!==void 0&&(r=jp(e),r!==void 0))return r;if(t!==void 0){for(const s in t)if(t[s]===n)return s}}function jp(i){const e=i.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e),r=n?n[1]:void 0;return r==null?void 0:r.trim()}function Tn(i,e){return typeof i=="string"?new IM(void 0,i,e):new IM(i,void 0,e)}class IM extends aw{get debugName(){var e;return(e=kB(this._debugName,void 0,this._owner,this))!==null&&e!==void 0?e:"ObservableValue"}constructor(e,t,n){super(),this._owner=e,this._debugName=t,this._value=n}get(){return this._value}set(e,t,n){var r;if(this._value===e)return;let s;t||(t=s=new iQ(()=>{},()=>`Setting ${this.debugName}`));try{const o=this._value;this._setValue(e),(r=iu())===null||r===void 0||r.handleObservableChanged(this,{oldValue:o,newValue:e,change:n,didChange:!0,hadValue:!0});for(const a of this.observers)t.updateObserver(a,this),a.handleChange(this,n)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function Pk(i,e){return typeof i=="string"?new GV(void 0,i,e):new GV(i,void 0,e)}class GV extends IM{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){var e;(e=this._value)===null||e===void 0||e.dispose()}}const Ry=(i,e)=>i===e;function At(i,e){return e!==void 0?new Ny(i,void 0,e,void 0,void 0,void 0,Ry):new Ny(void 0,void 0,i,void 0,void 0,void 0,Ry)}function ZV(i,e){var t;return new Ny(i.owner,i.debugName,e,void 0,void 0,void 0,(t=i.equalityComparer)!==null&&t!==void 0?t:Ry)}function KBe(i,e){var t;return new Ny(i.owner,i.debugName,e,i.createEmptyChangeSummary,i.handleChange,void 0,(t=i.equalityComparer)!==null&&t!==void 0?t:Ry)}function Ey(i,e){let t,n;e===void 0?(t=i,n=void 0):(n=i,t=e);const r=new ae;return new Ny(n,()=>{var s;return(s=jp(t))!==null&&s!==void 0?s:"(anonymous)"},s=>(r.clear(),t(s,r)),void 0,void 0,()=>r.dispose(),Ry)}$Be(At);class Ny extends aw{get debugName(){var e;return(e=kB(this._debugName,this._computeFn,this._owner,this))!==null&&e!==void 0?e:"(anonymous)"}constructor(e,t,n,r,s,o=void 0,a){var l,c;super(),this._owner=e,this._debugName=t,this._computeFn=n,this.createChangeSummary=r,this._handleChange=s,this._handleLastObserverRemoved=o,this._equalityComparator=a,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=(l=this.createChangeSummary)===null||l===void 0?void 0:l.call(this),(c=iu())===null||c===void 0||c.handleDerivedCreated(this)}onLastObserverRemoved(){var e;this.state=0,this.value=void 0;for(const t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),(e=this._handleLastObserverRemoved)===null||e===void 0||e.call(this)}get(){var e;if(this.observers.size===0){const t=this._computeFn(this,(e=this.createChangeSummary)===null||e===void 0?void 0:e.call(this));return this.onLastObserverRemoved(),t}else{do{if(this.state===1){for(const t of this.dependencies)if(t.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){var e,t;if(this.state===3)return;const n=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=n;const r=this.state!==0,s=this.value;this.state=3;const o=this.changeSummary;this.changeSummary=(e=this.createChangeSummary)===null||e===void 0?void 0:e.call(this);try{this.value=this._computeFn(this,o)}finally{for(const l of this.dependenciesToBeRemoved)l.removeObserver(this);this.dependenciesToBeRemoved.clear()}const a=r&&!this._equalityComparator(s,this.value);if((t=iu())===null||t===void 0||t.handleDerivedRecomputed(this,{oldValue:s,newValue:this.value,change:void 0,didChange:a,hadValue:r}),a)for(const l of this.observers)l.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.updateCount++;const t=this.updateCount===1;if(this.state===3&&(this.state=1,!t))for(const n of this.observers)n.handlePossibleChange(this);if(t)for(const n of this.observers)n.beginUpdate(this)}endUpdate(e){if(this.updateCount--,this.updateCount===0){const t=[...this.observers];for(const n of t)n.endUpdate(this)}if(this.updateCount<0)throw new Ti}handlePossibleChange(e){if(this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;for(const t of this.observers)t.handlePossibleChange(this)}}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){const n=this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:s=>s===e},this.changeSummary):!0,r=this.state===3;if(n&&(this.state===1||r)&&(this.state=2,r))for(const s of this.observers)s.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){const t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}}function LB(i,e){return new vI(i.debugName,e,void 0,void 0)}function Cn(i){return new vI(void 0,i,void 0,void 0)}function bI(i,e){return new vI(i.debugName,e,i.createEmptyChangeSummary,i.handleChange)}function qs(i){const e=new ae,t=LB({debugName:()=>jp(i)||"(anonymous)"},n=>{e.clear(),i(n,e)});return st(()=>{t.dispose(),e.dispose()})}class vI{get debugName(){if(typeof this._debugName=="string")return this._debugName;if(typeof this._debugName=="function"){const t=this._debugName();if(t!==void 0)return t}const e=jp(this._runFn);return e!==void 0?e:"(anonymous)"}constructor(e,t,n,r){var s,o;this._debugName=e,this._runFn=t,this.createChangeSummary=n,this._handleChange=r,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=(s=this.createChangeSummary)===null||s===void 0?void 0:s.call(this),(o=iu())===null||o===void 0||o.handleAutorunCreated(this),this._runIfNeeded()}dispose(){this.disposed=!0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear()}_runIfNeeded(){var e,t,n;if(this.state===3)return;const r=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=r,this.state=3;try{if(!this.disposed){(e=iu())===null||e===void 0||e.handleAutorunTriggered(this);const s=this.changeSummary;this.changeSummary=(t=this.createChangeSummary)===null||t===void 0?void 0:t.call(this),this._runFn(this,s)}}finally{(n=iu())===null||n===void 0||n.handleAutorunFinished(this);for(const s of this.dependenciesToBeRemoved)s.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(const e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,W0(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:r=>r===e},this.changeSummary))&&(this.state=2)}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}}(function(i){i.Observer=vI})(Cn||(Cn={}));function Mk(i){return new qBe(i)}class qBe extends nQ{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}}function GBe(i,e){return new Promise(t=>{let n=!1,r=!1;const s=Cn(o=>{const a=i.read(o);e(a)&&(n?s.dispose():r=!0,t(a))});n=!0,r&&s.dispose()})}function mr(i,e){return new rQ(i,e)}class rQ extends aw{constructor(e,t){super(),this.event=e,this._getValue=t,this.hasValue=!1,this.handleEvent=n=>{var r;const s=this._getValue(n),o=!this.hasValue||this.value!==s;(r=iu())===null||r===void 0||r.handleFromEventObservableTriggered(this,{oldValue:this.value,newValue:s,change:void 0,didChange:o,hadValue:this.hasValue}),o&&(this.value=s,this.hasValue&&Hn(a=>{for(const l of this.observers)a.updateObserver(l,this),l.handleChange(this,void 0)},()=>{const a=this.getDebugName();return"Event fired"+(a?`: ${a}`:"")}),this.hasValue=!0)}}getDebugName(){return jp(this._getValue)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}}(function(i){i.Observer=rQ})(mr||(mr={}));function So(i,e){return new ZBe(i,e)}class ZBe extends aw{constructor(e,t){super(),this.debugName=e,this.event=t,this.handleEvent=()=>{Hn(n=>{for(const r of this.observers)n.updateObserver(r,this),r.handleChange(this,void 0)},()=>this.debugName)}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function sQ(i){return typeof i=="string"?new XV(i):new XV(void 0,i)}class XV extends aw{get debugName(){var e;return(e=kB(this._debugName,void 0,this._owner,this))!==null&&e!==void 0?e:"Observable Signal"}constructor(e,t){super(),this._debugName=e,this._owner=t}trigger(e,t){if(!e){Hn(n=>{this.trigger(n,t)},()=>`Trigger signal ${this.debugName}`);return}for(const n of this.observers)e.updateObserver(n,this),n.handleChange(this,t)}get(){}}function Ay(i){const e=new XBe(!0);return i.addObserver(e),i.reportChanges(),st(()=>{i.removeObserver(e)})}class XBe{constructor(e){this.forceRecompute=e,this.counter=0}beginUpdate(e){this.counter++}endUpdate(e){this.counter--,this.counter===0&&this.forceRecompute&&e.reportChanges()}handlePossibleChange(e){}handleChange(e,t){}}function oQ(){return!!qq.VSCODE_DEV}function YBe(i){if(oQ()){const e=QBe();return e.add(i),{dispose(){e.delete(i)}}}else return{dispose(){}}}function QBe(){vS||(vS=new Set);const i=globalThis;return i.$hotReload_applyNewExports||(i.$hotReload_applyNewExports=e=>{for(const t of vS){const n=t(e);if(n)return n}}),vS}let vS;function JBe(i,e,t,n){if(i.length===0)return e;if(e.length===0)return i;const r=[];let s=0,o=0;for(;s<i.length&&o<e.length;){const a=i[s],l=e[o],c=t(a),d=t(l);c<d?(r.push(a),s++):c>d?(r.push(l),o++):(r.push(n(a,l)),s++,o++)}for(;s<i.length;)r.push(i[s]),s++;for(;o<e.length;)r.push(e[o]),o++;return r}function Ok(i,e){const t=new ae,n=i.createDecorationsCollection();return t.add(LB({debugName:()=>`Apply decorations from ${e.debugName}`},r=>{const s=e.read(r);n.set(s)})),t.add({dispose:()=>{n.clear()}}),t}function yS(i,e){return i.appendChild(e),st(()=>{i.removeChild(e)})}class e9e extends q{get width(){return this._width}get height(){return this._height}constructor(e,t){super(),this.elementSizeObserver=this._register(new vZ(e,t)),this._width=Tn(this,this.elementSizeObserver.getWidth()),this._height=Tn(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(n=>Hn(r=>{this._width.set(this.elementSizeObserver.getWidth(),r),this._height.set(this.elementSizeObserver.getHeight(),r)})))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function YV(i,e){let t=i.get(),n=t,r=t;const s=Tn("animatedValue",t);let o=-1;const a=300;let l;e.add(bI({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(d,u)=>(d.didChange(i)&&(u.animate=u.animate||d.change),!0)},(d,u)=>{l!==void 0&&(cancelAnimationFrame(l),l=void 0),n=r,t=i.read(d),o=Date.now()-(u.animate?0:a),c()}));function c(){const d=Date.now()-o;r=Math.floor(t9e(d,n,t-n,a)),d<a?l=requestAnimationFrame(c):r=t,s.set(r,void 0)}return s}function t9e(i,e,t,n){return i===n?e+t:t*(-Math.pow(2,-10*i/n)+1)+e}class aQ extends q{constructor(e,t,n){super(),this._register(new yI(e,n)),this._register(Dh(n,{height:t.actualHeight,top:t.actualTop}))}}class Fk{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,t){this._afterLineNumber=e,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=Tn(this,void 0),this._actualHeight=Tn(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=n=>{this._actualTop.set(n,void 0)},this.onComputedHeight=n=>{this._actualHeight.set(n,void 0)}}}class yI{constructor(e,t){this._editor=e,this._domElement=t,this._overlayWidgetId=`managedOverlayWidget-${yI._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}}yI._counter=0;function Dh(i,e){return Cn(t=>{for(let[n,r]of Object.entries(e))r&&typeof r=="object"&&"read"in r&&(r=r.read(t)),typeof r=="number"&&(r=`${r}px`),n=n.replace(/[A-Z]/g,s=>"-"+s.toLowerCase()),i.style[n]=r})}function $u(i,e){return n9e([i],e),i}function n9e(i,e){oQ()&&So("reload",n=>YBe(r=>{if([...Object.values(r)].some(s=>i.includes(s)))return s=>(n(void 0),!0)})).read(e)}function Bk(i,e,t){const n=new ae,r=[];return n.add(Cn(s=>{const o=e.read(s),a=new Map,l=new Map;t&&t(!0),i.changeViewZones(c=>{for(const d of r)c.removeZone(d);r.length=0;for(const d of o){const u=c.addZone(d);r.push(u),a.set(d,u)}}),t&&t(!1),n.add(bI({createEmptyChangeSummary(){return[]},handleChange(c,d){const u=l.get(c.changedObservable);return u!==void 0&&d.push(u),!0}},(c,d)=>{for(const u of o)u.onChange&&(l.set(u.onChange,a.get(u)),u.onChange.read(c));t&&t(!0),i.changeViewZones(u=>{for(const h of d)u.layoutZone(h)}),t&&t(!1)}))})),n.add({dispose(){t&&t(!0),i.changeViewZones(s=>{for(const o of r)s.removeZone(o)}),t&&t(!1)}}),n}class i9e extends vi{dispose(){super.dispose(!0)}}var DB=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},IB=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},r9e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const s9e=gi("diff-review-insert",me.add,p("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),o9e=gi("diff-review-remove",me.remove,p("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),a9e=gi("diff-review-close",me.close,p("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));let ch=class extends q{constructor(e,t,n,r,s,o,a,l,c){super(),this._parentNode=e,this._visible=t,this._setVisible=n,this._canClose=r,this._width=s,this._height=o,this._diffs=a,this._editors=l,this._instantiationService=c,this.model=Ey(this,(d,u)=>{const h=this._visible.read(d);if(this._parentNode.style.visibility=h?"visible":"hidden",!h)return null;const f=u.add(this._instantiationService.createInstance(RM,this._diffs,this._editors,this._setVisible,this._canClose)),g=u.add(this._instantiationService.createInstance(EM,this._parentNode,f,this._width,this._height,this._editors));return{model:f,view:g}}),this._register(Ay(this.model))}next(){Hn(e=>{const t=this._visible.get();this._setVisible(!0,e),t&&this.model.get().model.nextGroup(e)})}prev(){Hn(e=>{this._setVisible(!0,e),this.model.get().model.previousGroup(e)})}close(){Hn(e=>{this._setVisible(!1,e)})}};ch._ttPolicy=vu("diffReview",{createHTML:i=>i});ch=DB([IB(8,rt)],ch);let RM=class extends q{constructor(e,t,n,r,s){super(),this._diffs=e,this._editors=t,this._setVisible=n,this.canClose=r,this._audioCueService=s,this._groups=Tn(this,[]),this._currentGroupIdx=Tn(this,0),this._currentElementIdx=Tn(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((o,a)=>this._groups.read(a)[o]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((o,a)=>{var l;return(l=this.currentGroup.read(a))===null||l===void 0?void 0:l.lines[o]}),this._register(Cn(o=>{const a=this._diffs.read(o);if(!a){this._groups.set([],void 0);return}const l=l9e(a,this._editors.original.getModel().getLineCount(),this._editors.modified.getModel().getLineCount());Hn(c=>{const d=this._editors.modified.getPosition();if(d){const u=l.findIndex(h=>(d==null?void 0:d.lineNumber)<h.range.modified.endLineNumberExclusive);u!==-1&&this._currentGroupIdx.set(u,c)}this._groups.set(l,c)})})),this._register(Cn(o=>{const a=this.currentElement.read(o);(a==null?void 0:a.type)===hs.Deleted?this._audioCueService.playAudioCue(Ut.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(a==null?void 0:a.type)===hs.Added&&this._audioCueService.playAudioCue(Ut.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register(Cn(o=>{var a;const l=this.currentElement.read(o);if(l&&l.type!==hs.Header){const c=(a=l.modifiedLineNumber)!==null&&a!==void 0?a:l.diff.modified.startLineNumber;this._editors.modified.setSelection(D.fromPositions(new U(c,1)))}}))}_goToGroupDelta(e,t){const n=this.groups.get();!n||n.length<=1||DM(t,r=>{this._currentGroupIdx.set(kt.ofLength(n.length).clipCyclic(this._currentGroupIdx.get()+e),r),this._currentElementIdx.set(0,r)})}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const t=this.currentGroup.get();!t||t.lines.length<=1||Hn(n=>{this._currentElementIdx.set(kt.ofLength(t.lines.length).clip(this._currentElementIdx.get()+e),n)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const t=this.currentGroup.get();if(!t)return;const n=t.lines.indexOf(e);n!==-1&&Hn(r=>{this._currentElementIdx.set(n,r)})}revealCurrentElementInEditor(){this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===hs.Deleted?(this._editors.original.setSelection(D.fromPositions(new U(e.originalLineNumber,1))),this._editors.original.revealLine(e.originalLineNumber),this._editors.original.focus()):(e.type!==hs.Header&&(this._editors.modified.setSelection(D.fromPositions(new U(e.modifiedLineNumber,1))),this._editors.modified.revealLine(e.modifiedLineNumber)),this._editors.modified.focus()))}close(){this._setVisible(!1,void 0),this._editors.modified.focus()}};RM=DB([IB(4,ow)],RM);const Fb=3;function l9e(i,e,t){const n=[];for(const r of Sq(i,(s,o)=>o.modified.startLineNumber-s.modified.endLineNumberExclusive<2*Fb)){const s=[];s.push(new d9e);const o=new It(Math.max(1,r[0].original.startLineNumber-Fb),Math.min(r[r.length-1].original.endLineNumberExclusive+Fb,e+1)),a=new It(Math.max(1,r[0].modified.startLineNumber-Fb),Math.min(r[r.length-1].modified.endLineNumberExclusive+Fb,t+1));xq(r,(d,u)=>{const h=new It(d?d.original.endLineNumberExclusive:o.startLineNumber,u?u.original.startLineNumber:o.endLineNumberExclusive),f=new It(d?d.modified.endLineNumberExclusive:a.startLineNumber,u?u.modified.startLineNumber:a.endLineNumberExclusive);h.forEach(g=>{s.push(new f9e(g,f.startLineNumber+(g-h.startLineNumber)))}),u&&(u.original.forEach(g=>{s.push(new u9e(u,g))}),u.modified.forEach(g=>{s.push(new h9e(u,g))}))});const l=r[0].modified.join(r[r.length-1].modified),c=r[0].original.join(r[r.length-1].original);n.push(new c9e(new Gc(l,c),s))}return n}var hs;(function(i){i[i.Header=0]="Header",i[i.Unchanged=1]="Unchanged",i[i.Deleted=2]="Deleted",i[i.Added=3]="Added"})(hs||(hs={}));class c9e{constructor(e,t){this.range=e,this.lines=t}}class d9e{constructor(){this.type=hs.Header}}class u9e{constructor(e,t){this.diff=e,this.originalLineNumber=t,this.type=hs.Deleted,this.modifiedLineNumber=void 0}}class h9e{constructor(e,t){this.diff=e,this.modifiedLineNumber=t,this.type=hs.Added,this.originalLineNumber=void 0}}class f9e{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t,this.type=hs.Unchanged}}let EM=class extends q{constructor(e,t,n,r,s,o){super(),this._element=e,this._model=t,this._width=n,this._height=r,this._editors=s,this._languageService=o,this.domNode=this._element,this.domNode.className="diff-review monaco-editor-background";const a=document.createElement("div");a.className="diff-review-actions",this._actionBar=this._register(new fa(a)),this._register(Cn(l=>{this._actionBar.clear(),this._model.canClose.read(l)&&this._actionBar.push(new vs("diffreview.close",p("label.close","Close"),"close-diff-review "+Qe.asClassName(a9e),!0,()=>r9e(this,void 0,void 0,function*(){return t.close()})),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new KC(this._content,{})),br(this.domNode,this._scrollbar.getDomNode(),a),this._register(st(()=>{br(this.domNode)})),this._register(Dh(this.domNode,{width:this._width,height:this._height})),this._register(Dh(this._content,{width:this._width,height:this._height})),this._register(qs((l,c)=>{this._model.currentGroup.read(l),this._render(c)})),this._register(bi(this.domNode,"keydown",l=>{(l.equals(18)||l.equals(2066)||l.equals(530))&&(l.preventDefault(),this._model.goToNextLine()),(l.equals(16)||l.equals(2064)||l.equals(528))&&(l.preventDefault(),this._model.goToPreviousLine()),(l.equals(9)||l.equals(2057)||l.equals(521)||l.equals(1033))&&(l.preventDefault(),this._model.close()),(l.equals(10)||l.equals(3))&&(l.preventDefault(),this._model.revealCurrentElementInEditor())}))}_render(e){const t=this._editors.original.getOptions(),n=this._editors.modified.getOptions(),r=document.createElement("div");r.className="diff-review-table",r.setAttribute("role","list"),r.setAttribute("aria-label",p("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),Ir(r,n.get(50)),br(this._content,r);const s=this._editors.original.getModel(),o=this._editors.modified.getModel();if(!s||!o)return;const a=s.getOptions(),l=o.getOptions(),c=n.get(66),d=this._model.currentGroup.get();for(const u of(d==null?void 0:d.lines)||[]){if(!d)break;let h;if(u.type===hs.Header){const g=document.createElement("div");g.className="diff-review-row",g.setAttribute("role","listitem");const m=d.range,y=this._model.currentGroupIndex.get(),b=this._model.groups.get().length,v=L=>L===0?p("no_lines_changed","no lines changed"):L===1?p("one_line_changed","1 line changed"):p("more_lines_changed","{0} lines changed",L),C=v(m.original.length),w=v(m.modified.length);g.setAttribute("aria-label",p({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",y+1,b,m.original.startLineNumber,C,m.modified.startLineNumber,w));const S=document.createElement("div");S.className="diff-review-cell diff-review-summary",S.appendChild(document.createTextNode(`${y+1}/${b}: @@ -${m.original.startLineNumber},${m.original.length} +${m.modified.startLineNumber},${m.modified.length} @@`)),g.appendChild(S),h=g}else h=this._createRow(u,c,this._width.get(),t,s,a,n,o,l);r.appendChild(h);const f=At(g=>this._model.currentElement.read(g)===u);e.add(Cn(g=>{const m=f.read(g);h.tabIndex=m?0:-1,m&&h.focus()})),e.add(ee(h,"focus",()=>{this._model.goToLine(u)}))}this._scrollbar.scanDomNode()}_createRow(e,t,n,r,s,o,a,l,c){const d=r.get(143),u=d.glyphMarginWidth+d.lineNumbersWidth,h=a.get(143),f=10+h.glyphMarginWidth+h.lineNumbersWidth;let g="diff-review-row",m="";const y="diff-review-spacer";let b=null;switch(e.type){case hs.Added:g="diff-review-row line-insert",m=" char-insert",b=s9e;break;case hs.Deleted:g="diff-review-row line-delete",m=" char-delete",b=o9e;break}const v=document.createElement("div");v.style.minWidth=n+"px",v.className=g,v.setAttribute("role","listitem"),v.ariaLevel="";const C=document.createElement("div");C.className="diff-review-cell",C.style.height=`${t}px`,v.appendChild(C);const w=document.createElement("span");w.style.width=u+"px",w.style.minWidth=u+"px",w.className="diff-review-line-number"+m,e.originalLineNumber!==void 0?w.appendChild(document.createTextNode(String(e.originalLineNumber))):w.innerText=" ",C.appendChild(w);const S=document.createElement("span");S.style.width=f+"px",S.style.minWidth=f+"px",S.style.paddingRight="10px",S.className="diff-review-line-number"+m,e.modifiedLineNumber!==void 0?S.appendChild(document.createTextNode(String(e.modifiedLineNumber))):S.innerText=" ",C.appendChild(S);const L=document.createElement("span");if(L.className=y,b){const R=document.createElement("span");R.className=Qe.asClassName(b),R.innerText="  ",L.appendChild(R)}else L.innerText="  ";C.appendChild(L);let T;if(e.modifiedLineNumber!==void 0){let R=this._getLineHtml(l,a,c.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);ch._ttPolicy&&(R=ch._ttPolicy.createHTML(R)),C.insertAdjacentHTML("beforeend",R),T=l.getLineContent(e.modifiedLineNumber)}else{let R=this._getLineHtml(s,r,o.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);ch._ttPolicy&&(R=ch._ttPolicy.createHTML(R)),C.insertAdjacentHTML("beforeend",R),T=s.getLineContent(e.originalLineNumber)}T.length===0&&(T=p("blankLine","blank"));let I="";switch(e.type){case hs.Unchanged:e.originalLineNumber===e.modifiedLineNumber?I=p({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",T,e.originalLineNumber):I=p("equalLine","{0} original line {1} modified line {2}",T,e.originalLineNumber,e.modifiedLineNumber);break;case hs.Added:I=p("insertLine","+ {0} modified line {1}",T,e.modifiedLineNumber);break;case hs.Deleted:I=p("deleteLine","- {0} original line {1}",T,e.originalLineNumber);break}return v.setAttribute("aria-label",I),v}_getLineHtml(e,t,n,r,s){const o=e.getLineContent(r),a=t.get(50),l=$i.createEmpty(o,s),c=Po.isBasicASCII(o,e.mightContainNonBasicASCII()),d=Po.containsRTL(o,c,e.mightContainRTL());return PD(new vf(a.isMonospace&&!t.get(33),a.canUseHalfwidthRightwardsArrow,o,!1,c,d,0,l,[],n,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(116),t.get(98),t.get(93),t.get(51)!==Co.OFF,null)).html}};EM=DB([IB(5,Fn)],EM);const g9e=gi("diff-insert",me.add,p("diffInsertIcon","Line decoration for inserts in the diff editor.")),lQ=gi("diff-remove",me.remove,p("diffRemoveIcon","Line decoration for removals in the diff editor.")),QV=dt.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+Qe.asClassName(g9e),marginClassName:"gutter-insert"}),JV=dt.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+Qe.asClassName(lQ),marginClassName:"gutter-delete"}),eH=dt.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),tH=dt.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),nH=dt.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),p9e=dt.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),m9e=dt.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),NM=dt.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),_9e=dt.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),b9e=dt.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"}),v9e=dt.register({description:"diff-editor-arrow-revert-change",glyphMarginHoverMessage:new Lr(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(p("revertChangeHoverMessage","Click to revert change")),glyphMarginClassName:"arrow-revert-change "+Qe.asClassName(me.arrowRight),zIndex:10001});class Ih extends q{constructor(e,t,n,r,s){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=n,this._modifiedEditorLayoutInfo=r,this._editors=s,this._originalScrollTop=mr(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=mr(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=So("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=Tn(this,0),this._modifiedViewZonesChangedSignal=So("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=So("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=Ey((h,f)=>{var g;this._element.replaceChildren();const m=this._diffModel.read(h),y=(g=m==null?void 0:m.diff.read(h))===null||g===void 0?void 0:g.movedTexts;if(!y||y.length===0){this.width.set(0,void 0);return}this._viewZonesChanged.read(h);const b=this._originalEditorLayoutInfo.read(h),v=this._modifiedEditorLayoutInfo.read(h);if(!b||!v){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(h),this._originalViewZonesChangedSignal.read(h);const C=y.map(B=>{function V(qe,Ue){const Oe=Ue.getTopForLineNumber(qe.startLineNumber,!0),be=Ue.getTopForLineNumber(qe.endLineNumberExclusive,!0);return(Oe+be)/2}const F=V(B.lineRangeMapping.original,this._editors.original),W=this._originalScrollTop.read(h),X=V(B.lineRangeMapping.modified,this._editors.modified),oe=this._modifiedScrollTop.read(h),we=F-W,ke=X-oe,Ee=Math.min(F,X),Le=Math.max(F,X);return{range:new kt(Ee,Le),from:we,to:ke,fromWithoutScroll:F,toWithoutScroll:X,move:B}});C.sort(wSe(na(B=>B.fromWithoutScroll>B.toWithoutScroll,SSe),na(B=>B.fromWithoutScroll>B.toWithoutScroll?B.fromWithoutScroll:-B.toWithoutScroll,Qd)));const w=RB.compute(C.map(B=>B.range)),S=10,L=b.verticalScrollbarWidth,T=(w.getTrackCount()-1)*10+S*2,I=L+T+(v.contentLeft-Ih.movedCodeBlockPadding);let R=0;for(const B of C){const V=w.getTrack(R),F=L+S+V*10,W=15,X=15,oe=I,we=v.glyphMarginWidth+v.lineNumbersWidth,ke=18,Ee=document.createElementNS("http://www.w3.org/2000/svg","rect");Ee.classList.add("arrow-rectangle"),Ee.setAttribute("x",`${oe-we}`),Ee.setAttribute("y",`${B.to-ke/2}`),Ee.setAttribute("width",`${we}`),Ee.setAttribute("height",`${ke}`),this._element.appendChild(Ee);const Le=document.createElementNS("http://www.w3.org/2000/svg","g"),qe=document.createElementNS("http://www.w3.org/2000/svg","path");qe.setAttribute("d",`M 0 ${B.from} L ${F} ${B.from} L ${F} ${B.to} L ${oe-X} ${B.to}`),qe.setAttribute("fill","none"),Le.appendChild(qe);const Ue=document.createElementNS("http://www.w3.org/2000/svg","polygon");Ue.classList.add("arrow"),f.add(Cn(Oe=>{qe.classList.toggle("currentMove",B.move===m.activeMovedText.read(Oe)),Ue.classList.toggle("currentMove",B.move===m.activeMovedText.read(Oe))})),Ue.setAttribute("points",`${oe-X},${B.to-W/2} ${oe},${B.to} ${oe-X},${B.to+W/2}`),Le.appendChild(Ue),this._element.appendChild(Le),R++}this.width.set(T,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register(st(()=>this._element.remove())),this._register(Cn(h=>{const f=this._originalEditorLayoutInfo.read(h),g=this._modifiedEditorLayoutInfo.read(h);!f||!g||(this._element.style.left=`${f.width-f.verticalScrollbarWidth}px`,this._element.style.height=`${f.height}px`,this._element.style.width=`${f.verticalScrollbarWidth+f.contentLeft-Ih.movedCodeBlockPadding+this.width.read(h)}px`)})),this._register(Ay(this._state));const o=At(h=>{const f=this._diffModel.read(h),g=f==null?void 0:f.diff.read(h);return g?g.movedTexts.map(m=>({move:m,original:new Fk(Mk(m.lineRangeMapping.original.startLineNumber-1),18),modified:new Fk(Mk(m.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register(Bk(this._editors.original,o.map(h=>h.map(f=>f.original)))),this._register(Bk(this._editors.modified,o.map(h=>h.map(f=>f.modified)))),this._register(qs((h,f)=>{const g=o.read(h);for(const m of g)f.add(new iH(this._editors.original,m.original,m.move,"original",this._diffModel.get())),f.add(new iH(this._editors.modified,m.modified,m.move,"modified",this._diffModel.get()))}));const a=mr(this._editors.original.onDidChangeCursorPosition,()=>this._editors.original.getPosition()),l=mr(this._editors.modified.onDidChangeCursorPosition,()=>this._editors.modified.getPosition()),c=So("original.onDidFocusEditorWidget",h=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>h(void 0),0))),d=So("modified.onDidFocusEditorWidget",h=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>h(void 0),0)));let u="modified";this._register(bI({createEmptyChangeSummary:()=>{},handleChange:(h,f)=>(h.didChange(c)&&(u="original"),h.didChange(d)&&(u="modified"),!0)},h=>{c.read(h),d.read(h);const f=this._diffModel.read(h);if(!f)return;const g=f.diff.read(h);let m;if(g&&u==="original"){const y=a.read(h);y&&(m=g.movedTexts.find(b=>b.lineRangeMapping.original.contains(y.lineNumber)))}if(g&&u==="modified"){const y=l.read(h);y&&(m=g.movedTexts.find(b=>b.lineRangeMapping.modified.contains(y.lineNumber)))}m!==f.movedTextToCompare.get()&&f.movedTextToCompare.set(void 0,void 0),f.setActiveMovedText(m)}))}}Ih.movedCodeBlockPadding=4;class RB{static compute(e){const t=[],n=[];for(const r of e){let s=t.findIndex(o=>!o.intersectsStrict(r));s===-1&&(t.length>=6?s=FDe(t,na(a=>a.intersectWithRangeLength(r),Qd)):(s=t.length,t.push(new X3))),t[s].addRange(r),n.push(s)}return new RB(t.length,n)}constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class iH extends aQ{constructor(e,t,n,r,s){const o=dr("div.diff-hidden-lines-widget");super(e,t,o.root),this._editor=e,this._move=n,this._kind=r,this._diffModel=s,this._nodes=dr("div.diff-moved-code-block",{style:{marginRight:"4px"}},[dr("div.text-content@textContent"),dr("div.action-bar@actionBar")]),o.root.appendChild(this._nodes.root);const a=mr(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register(Dh(this._nodes.root,{paddingRight:a.map(h=>h.verticalScrollbarWidth)}));let l;n.changes.length>0?l=this._kind==="original"?p("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):p("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):l=this._kind==="original"?p("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):p("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const c=this._register(new fa(this._nodes.actionBar,{highlightToggledItems:!0})),d=new vs("",l,"",!1);c.push(d,{icon:!1,label:!0});const u=new vs("","Compare",Qe.asClassName(me.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===n?void 0:this._move,void 0)});this._register(Cn(h=>{const f=this._diffModel.movedTextToCompare.read(h)===n;u.checked=f})),c.push(u,{icon:!1,label:!0})}}class y9e extends q{constructor(e,t,n){super(),this._editors=e,this._diffModel=t,this._options=n,this._decorations=At(this,r=>{var s;const o=(s=this._diffModel.read(r))===null||s===void 0?void 0:s.diff.read(r);if(!o)return null;const a=this._diffModel.read(r).movedTextToCompare.read(r),l=this._options.renderIndicators.read(r),c=this._options.showEmptyDecorations.read(r),d=[],u=[];if(!a)for(const f of o.mappings){if(f.lineRangeMapping.original.isEmpty||d.push({range:f.lineRangeMapping.original.toInclusiveRange(),options:l?JV:tH}),f.lineRangeMapping.modified.isEmpty||u.push({range:f.lineRangeMapping.modified.toInclusiveRange(),options:l?QV:eH}),f.lineRangeMapping.modified.isEmpty||f.lineRangeMapping.original.isEmpty)f.lineRangeMapping.original.isEmpty||d.push({range:f.lineRangeMapping.original.toInclusiveRange(),options:_9e}),f.lineRangeMapping.modified.isEmpty||u.push({range:f.lineRangeMapping.modified.toInclusiveRange(),options:p9e});else for(const g of f.lineRangeMapping.innerChanges||[])f.lineRangeMapping.original.contains(g.originalRange.startLineNumber)&&d.push({range:g.originalRange,options:g.originalRange.isEmpty()&&c?b9e:NM}),f.lineRangeMapping.modified.contains(g.modifiedRange.startLineNumber)&&u.push({range:g.modifiedRange,options:g.modifiedRange.isEmpty()&&c?m9e:nH});!f.lineRangeMapping.modified.isEmpty&&this._options.shouldRenderRevertArrows.read(r)&&!a&&u.push({range:D.fromPositions(new U(f.lineRangeMapping.modified.startLineNumber,1)),options:v9e})}if(a)for(const f of a.changes){const g=f.original.toInclusiveRange();g&&d.push({range:g,options:l?JV:tH});const m=f.modified.toInclusiveRange();m&&u.push({range:m,options:l?QV:eH});for(const y of f.innerChanges||[])d.push({range:y.originalRange,options:NM}),u.push({range:y.modifiedRange,options:nH})}const h=this._diffModel.read(r).activeMovedText.read(r);for(const f of o.movedTexts)d.push({range:f.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(f===h?" currentMove":""),blockPadding:[Ih.movedCodeBlockPadding,0,Ih.movedCodeBlockPadding,Ih.movedCodeBlockPadding]}}),u.push({range:f.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(f===h?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:d,modifiedDecorations:u}}),this._register(Ok(this._editors.original,this._decorations.map(r=>(r==null?void 0:r.originalDecorations)||[]))),this._register(Ok(this._editors.modified,this._decorations.map(r=>(r==null?void 0:r.modifiedDecorations)||[])))}}class C9e extends q{constructor(e,t,n){super(),this._options=e,this._domNode=t,this._dimensions=n,this._sashRatio=Tn(this,void 0),this.sashLeft=At(this,r=>{var s;const o=(s=this._sashRatio.read(r))!==null&&s!==void 0?s:this._options.splitViewDefaultRatio.read(r);return this._computeSashLeft(o,r)}),this._sash=this._register(new Fr(this._domNode,{getVerticalSashTop:r=>0,getVerticalSashLeft:r=>this.sashLeft.get(),getVerticalSashHeight:r=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(r=>{const s=this._dimensions.width.get(),o=this._computeSashLeft((this._startSashPosition+(r.currentX-r.startX))/s,void 0);this._sashRatio.set(o/s,void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._sashRatio.set(void 0,void 0))),this._register(Cn(r=>{const s=this._options.enableSplitViewResizing.read(r);this._sash.state=s?3:0,this.sashLeft.read(r),this._dimensions.height.read(r),this._sash.layout()}))}setBoundarySashes(e){this._sash.orthogonalEndSash=e.bottom}_computeSashLeft(e,t){const n=this._dimensions.width.read(t),r=Math.floor(this._options.splitViewDefaultRatio.read(t)*n),s=this._options.enableSplitViewResizing.read(t)?Math.floor(e*n):r,o=100;return n<=o*2?r:s<o?o:s>n-o?n-o:s}}let e_=class{remove(){var e;(e=this.parent)===null||e===void 0||e.children.delete(this.id)}static findId(e,t){let n;typeof e=="string"?n=`${t.id}/${e}`:(n=`${t.id}/${e.name}`,t.children.get(n)!==void 0&&(n=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let r=n;for(let s=0;t.children.get(r)!==void 0;s++)r=`${n}_${s}`;return r}static empty(e){return e.children.size===0}},rH=class extends e_{constructor(e,t,n){super(),this.id=e,this.parent=t,this.symbol=n,this.children=new Map}},w9e=class extends e_{constructor(e,t,n,r){super(),this.id=e,this.parent=t,this.label=n,this.order=r,this.children=new Map}},S9e=class jf extends e_{static create(e,t,n){const r=new vi(n),s=new jf(t.uri),o=e.ordered(t),a=o.map((c,d)=>{var u;const h=e_.findId(`provider_${d}`,s),f=new w9e(h,s,(u=c.displayName)!==null&&u!==void 0?u:"Unknown Outline Provider",d);return Promise.resolve(c.provideDocumentSymbols(t,r.token)).then(g=>{for(const m of g||[])jf._makeOutlineElement(m,f);return f},g=>(Ii(g),f)).then(g=>{e_.empty(g)?g.remove():s._groups.set(h,g)})}),l=e.onDidChange(()=>{const c=e.ordered(t);fi(c,o)||r.cancel()});return Promise.all(a).then(()=>r.token.isCancellationRequested&&!n.isCancellationRequested?jf.create(e,t,n):s._compact()).finally(()=>{r.dispose(),l.dispose()})}static _makeOutlineElement(e,t){const n=e_.findId(e,t),r=new rH(n,t,e);if(e.children)for(const s of e.children)jf._makeOutlineElement(s,r);t.children.set(r.id,r)}constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let e=0;for(const[t,n]of this._groups)n.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{const t=St.first(this._groups.values());for(const[,n]of t.children)n.parent=this,this.children.set(n.id,n)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof rH?e.push(t.symbol):e.push(...St.map(t.children.values(),n=>n.symbol));return e.sort((t,n)=>D.compareRangesUsingStarts(t.range,n.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return jf._flattenDocumentSymbols(t,e,""),t.sort((n,r)=>U.compare(D.getStartPosition(n.range),D.getStartPosition(r.range))||U.compare(D.getEndPosition(r.range),D.getEndPosition(n.range)))}static _flattenDocumentSymbols(e,t,n){for(const r of t)e.push({kind:r.kind,tags:r.tags,name:r.name,detail:r.detail,containerName:r.containerName||n,range:r.range,selectionRange:r.selectionRange,children:void 0}),r.children&&jf._flattenDocumentSymbols(e,r.children,r.name)}};var cQ=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},dQ=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},x9e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};let AM=class extends q{get isUpdatingViewZones(){return this._isUpdatingViewZones}constructor(e,t,n,r){super(),this._editors=e,this._diffModel=t,this._options=n,this._languageFeaturesService=r,this._isUpdatingViewZones=!1,this._modifiedOutlineSource=Ey(this,(c,d)=>{const u=this._editors.modifiedModel.read(c);if(u)return d.add(new PM(this._languageFeaturesService,u))}),this._register(this._editors.original.onDidChangeCursorPosition(c=>{if(c.reason===3){const d=this._diffModel.get();Hn(u=>{for(const h of this._editors.original.getSelections()||[])d==null||d.ensureOriginalLineIsVisible(h.getStartPosition().lineNumber,u),d==null||d.ensureOriginalLineIsVisible(h.getEndPosition().lineNumber,u)})}})),this._register(this._editors.modified.onDidChangeCursorPosition(c=>{if(c.reason===3){const d=this._diffModel.get();Hn(u=>{for(const h of this._editors.modified.getSelections()||[])d==null||d.ensureModifiedLineIsVisible(h.getStartPosition().lineNumber,u),d==null||d.ensureModifiedLineIsVisible(h.getEndPosition().lineNumber,u)})}}));const s=this._diffModel.map((c,d)=>{var u,h;return((u=c==null?void 0:c.diff.read(d))===null||u===void 0?void 0:u.mappings.length)===0?[]:(h=c==null?void 0:c.unchangedRegions.read(d))!==null&&h!==void 0?h:[]}),o=Ey(this,(c,d)=>{const u=this._modifiedOutlineSource.read(c);if(!u)return{origViewZones:[],modViewZones:[]};const h=[],f=[],g=this._options.renderSideBySide.read(c),m=s.read(c);for(const y of m)if(!y.shouldHideControls(c)){{const b=At(C=>y.getHiddenOriginalRange(C).startLineNumber-1),v=new Fk(b,24);h.push(v),d.add(new sH(this._editors.original,v,y,y.originalUnchangedRange,!g,u,C=>this._diffModel.get().ensureModifiedLineIsVisible(C,void 0),this._options))}{const b=At(C=>y.getHiddenModifiedRange(C).startLineNumber-1),v=new Fk(b,24);f.push(v),d.add(new sH(this._editors.modified,v,y,y.modifiedUnchangedRange,!1,u,C=>this._diffModel.get().ensureModifiedLineIsVisible(C,void 0),this._options))}}return{origViewZones:h,modViewZones:f}}),a={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},l={description:"Fold Unchanged",glyphMarginHoverMessage:new Lr(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(p("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+Qe.asClassName(me.fold),zIndex:10001};this._register(Ok(this._editors.original,At(c=>{const d=s.read(c),u=d.map(h=>({range:h.originalUnchangedRange.toInclusiveRange(),options:a}));for(const h of d)h.shouldHideControls(c)&&u.push({range:D.fromPositions(new U(h.originalLineNumber,1)),options:l});return u}))),this._register(Ok(this._editors.modified,At(c=>{const d=s.read(c),u=d.map(h=>({range:h.modifiedUnchangedRange.toInclusiveRange(),options:a}));for(const h of d)h.shouldHideControls(c)&&u.push({range:It.ofLength(h.modifiedLineNumber,1).toInclusiveRange(),options:l});return u}))),this._register(Bk(this._editors.original,o.map(c=>c.origViewZones),c=>this._isUpdatingViewZones=c)),this._register(Bk(this._editors.modified,o.map(c=>c.modViewZones),c=>this._isUpdatingViewZones=c)),this._register(Cn(c=>{const d=s.read(c);this._editors.original.setHiddenAreas(d.map(u=>u.getHiddenOriginalRange(c).toInclusiveRange()).filter(R0)),this._editors.modified.setHiddenAreas(d.map(u=>u.getHiddenModifiedRange(c).toInclusiveRange()).filter(R0))})),this._register(this._editors.modified.onMouseUp(c=>{var d;if(!c.event.rightButton&&c.target.position&&(!((d=c.target.element)===null||d===void 0)&&d.className.includes("fold-unchanged"))){const u=c.target.position.lineNumber,h=this._diffModel.get();if(!h)return;const f=h.unchangedRegions.get().find(g=>g.modifiedUnchangedRange.includes(u));if(!f)return;f.collapseAll(void 0),c.event.stopPropagation(),c.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(c=>{var d;if(!c.event.rightButton&&c.target.position&&(!((d=c.target.element)===null||d===void 0)&&d.className.includes("fold-unchanged"))){const u=c.target.position.lineNumber,h=this._diffModel.get();if(!h)return;const f=h.unchangedRegions.get().find(g=>g.originalUnchangedRange.includes(u));if(!f)return;f.collapseAll(void 0),c.event.stopPropagation(),c.event.preventDefault()}}))}};AM=cQ([dQ(3,Fe)],AM);let PM=class extends q{constructor(e,t){super(),this._languageFeaturesService=e,this._textModel=t,this._currentModel=Tn(this,void 0);const n=So("documentSymbolProvider.onDidChange",this._languageFeaturesService.documentSymbolProvider.onDidChange),r=So("_textModel.onDidChangeContent",Re.debounce(s=>this._textModel.onDidChangeContent(s),()=>{},100));this._register(qs((s,o)=>x9e(this,void 0,void 0,function*(){n.read(s),r.read(s);const a=o.add(new i9e),l=yield S9e.create(this._languageFeaturesService.documentSymbolProvider,this._textModel,a.token);o.isDisposed||this._currentModel.set(l,void 0)})))}getBreadcrumbItems(e,t){const n=this._currentModel.read(t);if(!n)return[];const r=n.asListOfDocumentSymbols().filter(s=>e.contains(s.range.startLineNumber)&&!e.contains(s.range.endLineNumber));return r.sort(Dq(na(s=>s.range.endLineNumber-s.range.startLineNumber,Qd))),r.map(s=>({name:s.name,kind:s.kind,startLineNumber:s.range.startLineNumber}))}};PM=cQ([dQ(0,Fe)],PM);class sH extends aQ{constructor(e,t,n,r,s,o,a,l){const c=dr("div.diff-hidden-lines-widget");super(e,t,c.root),this._editor=e,this._unchangedRegion=n,this._unchangedRegionRange=r,this.hide=s,this._modifiedOutlineSource=o,this._revealModifiedHiddenLine=a,this._options=l,this._nodes=dr("div.diff-hidden-lines",[dr("div.top@top",{title:p("diff.hiddenLines.top","Click or drag to show more above")}),dr("div.center@content",{style:{display:"flex"}},[dr("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[ce("a",{title:p("showAll","Show all"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...Th("$(unfold)"))]),dr("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),dr("div.bottom@bottom",{title:p("diff.bottom","Click or drag to show more below"),role:"button"})]),c.root.appendChild(this._nodes.root);const d=mr(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this.hide?br(this._nodes.first):this._register(Dh(this._nodes.first,{width:d.map(h=>h.contentLeft)}));const u=this._editor;this._register(ee(this._nodes.top,"mousedown",h=>{if(h.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),h.preventDefault();const f=h.clientY;let g=!1;const m=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set(!0,void 0);const y=ee(window,"mousemove",v=>{const w=v.clientY-f;g=g||Math.abs(w)>2;const S=Math.round(w/u.getOption(66)),L=Math.max(0,Math.min(m+S,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(L,void 0)}),b=ee(window,"mouseup",v=>{g||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(!1,void 0),y.dispose(),b.dispose()})})),this._register(ee(this._nodes.bottom,"mousedown",h=>{if(h.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),h.preventDefault();const f=h.clientY;let g=!1;const m=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set(!0,void 0);const y=ee(window,"mousemove",v=>{const w=v.clientY-f;g=g||Math.abs(w)>2;const S=Math.round(w/u.getOption(66)),L=Math.max(0,Math.min(m-S,this._unchangedRegion.getMaxVisibleLineCountBottom())),T=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(L,void 0);const I=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);u.setScrollTop(u.getScrollTop()+(I-T))}),b=ee(window,"mouseup",v=>{if(this._unchangedRegion.isDragged.set(!1,void 0),!g){const C=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const w=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);u.setScrollTop(u.getScrollTop()+(w-C))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),y.dispose(),b.dispose()})})),this._register(Cn(h=>{const f=[];if(!this.hide){const g=n.getHiddenModifiedRange(h).length,m=p("hiddenLines","{0} hidden lines",g),y=ce("span",{title:p("diff.hiddenLines.expandAll","Double click to unfold")},m);y.addEventListener("dblclick",C=>{C.button===0&&(C.preventDefault(),this._unchangedRegion.showAll(void 0))}),f.push(y);const b=this._unchangedRegion.getHiddenModifiedRange(h),v=this._modifiedOutlineSource.getBreadcrumbItems(b,h);if(v.length>0){f.push(ce("span",void 0,"  |  "));for(let C=0;C<v.length;C++){const w=v[C],S=CT.toIcon(w.kind),L=dr("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[FP(S)," ",w.name,...C===v.length-1?[]:[FP(me.chevronRight)]]).root;f.push(L),L.onclick=()=>{this._revealModifiedHiddenLine(w.startLineNumber)}}}}br(this._nodes.others,...f)}))}}class Hl{static capture(e){if(e.getScrollTop()===0||e.hasPendingScrollAnimation())return new Hl(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,n=0;const r=e.getVisibleRanges();if(r.length>0){t=r[0].getStartPosition();const s=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-s}return new Hl(e.getScrollTop(),e.getContentHeight(),t,n,e.getPosition())}constructor(e,t,n,r,s){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=n,this._visiblePositionScrollDelta=r,this._cursorPosition=s}restore(e){if(!(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())&&this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;const t=e.getPosition();if(!this._cursorPosition||!t)return;const n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n)}}var T9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},oH=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},k9e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},zf;let Wk=zf=class{constructor(e,t,n){this.editorWorkerService=t,this.telemetryService=n,this.onDidChangeEventEmitter=new H,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){var e;(e=this.diffAlgorithmOnDidChangeSubscription)===null||e===void 0||e.dispose()}computeDiff(e,t,n,r){var s,o;return k9e(this,void 0,void 0,function*(){if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(e,t,n,r);if(e.getLineCount()===1&&e.getLineMaxColumn(1)===1)return t.getLineCount()===1&&t.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new ua(new It(1,2),new It(1,t.getLineCount()+1),[new jh(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const a=JSON.stringify([e.uri.toString(),t.uri.toString()]),l=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(n)]),c=zf.diffCache.get(a);if(c&&c.context===l)return c.result;const d=qr.create(),u=yield this.editorWorkerService.computeDiff(e.uri,t.uri,n,this.diffAlgorithm),h=d.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:h,timedOut:(s=u==null?void 0:u.quitEarly)!==null&&s!==void 0?s:!0,detectedMoves:n.computeMoves?(o=u==null?void 0:u.moves.length)!==null&&o!==void 0?o:0:-1}),r.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!u)throw new Error("no diff result available");return zf.diffCache.size>10&&zf.diffCache.delete(zf.diffCache.keys().next().value),zf.diffCache.set(a,{result:u,context:l}),u})}setOptions(e){var t;let n=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&((t=this.diffAlgorithmOnDidChangeSubscription)===null||t===void 0||t.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,typeof e.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),n=!0),n&&this.onDidChangeEventEmitter.fire()}};Wk.diffCache=new Map;Wk=zf=T9e([oH(1,Xa),oH(2,Wo)],Wk);var L9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},D9e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const uQ=Lt("diffProviderFactoryService");let MM=class{constructor(e){this.instantiationService=e}createDiffProvider(e,t){return this.instantiationService.createInstance(Wk,t)}};MM=L9e([D9e(0,rt)],MM);Wt(uQ,MM,1);var I9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},R9e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},aH=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};let OM=class extends q{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,t,n,r){super(),this.model=e,this._options=t,this._editor=n,this._diffProviderFactoryService=r,this._isDiffUpToDate=Tn(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=Tn(this,void 0),this.diff=this._diff,this._unchangedRegions=Tn(this,{regions:[],originalDecorationIds:[],modifiedDecorationIds:[]}),this.unchangedRegions=At(this,l=>this._options.hideUnchangedRegions.read(l)?this._unchangedRegions.read(l).regions:(Hn(c=>{for(const d of this._unchangedRegions.get().regions)d.collapseAll(c)}),[])),this.movedTextToCompare=Tn(this,void 0),this._activeMovedText=Tn(this,void 0),this._hoveredMovedText=Tn(this,void 0),this.activeMovedText=At(this,l=>{var c,d;return(d=(c=this.movedTextToCompare.read(l))!==null&&c!==void 0?c:this._hoveredMovedText.read(l))!==null&&d!==void 0?d:this._activeMovedText.read(l)}),this._cancellationTokenSource=new vi,this._diffProvider=At(this,l=>{const c=this._diffProviderFactoryService.createDiffProvider(this._editor,{diffAlgorithm:this._options.diffAlgorithm.read(l)}),d=So("onDidChange",c.onDidChange);return{diffProvider:c,onChangeSignal:d}}),this._register(st(()=>this._cancellationTokenSource.cancel()));const s=sQ("contentChangedSignal"),o=this._register(new fn(()=>s.trigger(void 0),200)),a=(l,c,d)=>{const u=Vk.fromDiffs(l.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(d),this._options.hideUnchangedRegionsContextLineCount.read(d)),h=this._unchangedRegions.get(),f=h.originalDecorationIds.map(b=>e.original.getDecorationRange(b)).filter(b=>!!b).map(b=>It.fromRange(b)),g=h.modifiedDecorationIds.map(b=>e.modified.getDecorationRange(b)).filter(b=>!!b).map(b=>It.fromRange(b)),m=e.original.deltaDecorations(h.originalDecorationIds,u.map(b=>({range:b.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),y=e.modified.deltaDecorations(h.modifiedDecorationIds,u.map(b=>({range:b.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));for(const b of u)for(let v=0;v<h.regions.length;v++)if(b.originalUnchangedRange.intersectsStrict(f[v])&&b.modifiedUnchangedRange.intersectsStrict(g[v])){b.setHiddenModifiedRange(h.regions[v].getHiddenModifiedRange(void 0),c);break}this._unchangedRegions.set({regions:u,originalDecorationIds:m,modifiedDecorationIds:y},c)};this._register(e.modified.onDidChangeContent(l=>{if(this._diff.get()){const d=Zd.fromModelContentChanges(l.changes);this._lastDiff,e.original,e.modified}o.schedule()})),this._register(e.original.onDidChangeContent(l=>{if(this._diff.get()){const d=Zd.fromModelContentChanges(l.changes);this._lastDiff,e.original,e.modified}o.schedule()})),this._register(qs((l,c)=>aH(this,void 0,void 0,function*(){var d,u;this._options.hideUnchangedRegionsMinimumLineCount.read(l),this._options.hideUnchangedRegionsContextLineCount.read(l),o.cancel(),s.read(l);const h=this._diffProvider.read(l);h.onChangeSignal.read(l),$u(dZ,l),$u(BA,l),this._isDiffUpToDate.set(!1,void 0);let f=[];c.add(e.original.onDidChangeContent(y=>{const b=Zd.fromModelContentChanges(y.changes);f=QT(f,b)}));let g=[];c.add(e.modified.onDidChangeContent(y=>{const b=Zd.fromModelContentChanges(y.changes);g=QT(g,b)}));let m=yield h.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(l),maxComputationTimeMs:this._options.maxComputationTimeMs.read(l),computeMoves:this._options.showMoves.read(l)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||(m=E9e(m,e.original,e.modified),m=(d=(e.original,e.modified,void 0))!==null&&d!==void 0?d:m,m=(u=(e.original,e.modified,void 0))!==null&&u!==void 0?u:m,Hn(y=>{a(m,y),this._lastDiff=m;const b=EB.fromDiffResult(m);this._diff.set(b,y),this._isDiffUpToDate.set(!0,y);const v=this.movedTextToCompare.get();this.movedTextToCompare.set(v?this._lastDiff.moves.find(C=>C.lineRangeMapping.modified.intersect(v.lineRangeMapping.modified)):void 0,y)}))})))}ensureModifiedLineIsVisible(e,t){var n;if(((n=this.diff.get())===null||n===void 0?void 0:n.mappings.length)===0)return;const r=this._unchangedRegions.get().regions;for(const s of r)if(s.getHiddenModifiedRange(void 0).contains(e)){s.showModifiedLine(e,t);return}}ensureOriginalLineIsVisible(e,t){var n;if(((n=this.diff.get())===null||n===void 0?void 0:n.mappings.length)===0)return;const r=this._unchangedRegions.get().regions;for(const s of r)if(s.getHiddenOriginalRange(void 0).contains(e)){s.showOriginalLine(e,t);return}}waitForDiff(){return aH(this,void 0,void 0,function*(){yield GBe(this.isDiffUpToDate,e=>e)})}serializeState(){return{collapsedRegions:this._unchangedRegions.get().regions.map(t=>({range:t.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(e){const t=e.collapsedRegions.map(r=>It.deserialize(r.range)),n=this._unchangedRegions.get();Hn(r=>{for(const s of n.regions)for(const o of t)if(s.modifiedUnchangedRange.intersect(o)){s.setHiddenModifiedRange(o,r);break}})}};OM=I9e([R9e(3,uQ)],OM);function E9e(i,e,t){return{changes:i.changes.map(n=>new ua(n.original,n.modified,n.innerChanges?n.innerChanges.map(r=>N9e(r,e,t)):void 0)),moves:i.moves,identical:i.identical,quitEarly:i.quitEarly}}function N9e(i,e,t){let n=i.originalRange,r=i.modifiedRange;return(n.endColumn!==1||r.endColumn!==1)&&n.endColumn===e.getLineMaxColumn(n.endLineNumber)&&r.endColumn===t.getLineMaxColumn(r.endLineNumber)&&n.endLineNumber<e.getLineCount()&&r.endLineNumber<t.getLineCount()&&(n=n.setEndPosition(n.endLineNumber+1,1),r=r.setEndPosition(r.endLineNumber+1,1)),new jh(n,r)}class EB{static fromDiffResult(e){return new EB(e.changes.map(t=>new hQ(t)),e.moves||[],e.identical,e.quitEarly)}constructor(e,t,n,r){this.mappings=e,this.movedTexts=t,this.identical=n,this.quitEarly=r}}class hQ{constructor(e){this.lineRangeMapping=e}}class Vk{static fromDiffs(e,t,n,r,s){const o=ua.inverse(e,t,n),a=[];for(const l of o){let c=l.original.startLineNumber,d=l.modified.startLineNumber,u=l.original.length;const h=c===1&&d===1,f=c+u===t+1&&d+u===n+1;(h||f)&&u>=s+r?(h&&!f&&(u-=s),f&&!h&&(c+=s,d+=s,u-=s),a.push(new Vk(c,d,u,0,0))):u>=s*2+r&&(c+=s,d+=s,u-=s*2,a.push(new Vk(c,d,u,0,0)))}return a}get originalUnchangedRange(){return It.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return It.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,t,n,r,s){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=n,this._visibleLineCountTop=Tn(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=Tn(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=At(this,o=>this.visibleLineCountTop.read(o)+this.visibleLineCountBottom.read(o)===this.lineCount&&!this.isDragged.read(o)),this.isDragged=Tn(this,!1),this._visibleLineCountTop.set(r,void 0),this._visibleLineCountBottom.set(s,void 0)}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return It.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return It.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){const n=e.startLineNumber-this.modifiedLineNumber,r=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(n,r,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(e=10,t){const n=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,n),t)}showMoreBelow(e=10,t){const n=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,n),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t){const n=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),r=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;n<r?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+n,t):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+r,t)}showOriginalLine(e,t){const n=e-this.originalLineNumber,r=this.originalLineNumber+this.lineCount-e;n<r?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+r-n,this.getMaxVisibleLineCountTop()),t):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+n-r,this.getMaxVisibleLineCountBottom()),t)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,n){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,n),this._visibleLineCountBottom.set(t,n)}}var eN=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class A9e extends q{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,t,n,r,s,o,a,l,c){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=n,this._diff=r,this._editor=s,this._viewLineCounts=o,this._originalTextModel=a,this._contextMenuService=l,this._clipboardService=c,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=Qe.asClassName(me.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const d=this._modifiedEditor.getOption(66);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${d}px`,this._diffActions.style.lineHeight=`${d}px`,this._marginDomNode.appendChild(this._diffActions);let u=0;const h=n.getOption(126)&&!Ol,f=(g,m)=>{var y;this._contextMenuService.showContextMenu({domForShadowRoot:h&&(y=n.getDomNode())!==null&&y!==void 0?y:void 0,getAnchor:()=>({x:g,y:m}),getActions:()=>{const b=[],v=r.modified.isEmpty;return b.push(new vs("diff.clipboard.copyDeletedContent",v?r.original.length>1?p("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):p("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):r.original.length>1?p("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):p("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>eN(this,void 0,void 0,function*(){const w=this._originalTextModel.getValueInRange(r.original.toExclusiveRange());yield this._clipboardService.writeText(w)}))),r.original.length>1&&b.push(new vs("diff.clipboard.copyDeletedLineContent",v?p("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",r.original.startLineNumber+u):p("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",r.original.startLineNumber+u),void 0,!0,()=>eN(this,void 0,void 0,function*(){let w=this._originalTextModel.getLineContent(r.original.startLineNumber+u);w===""&&(w=this._originalTextModel.getEndOfLineSequence()===0?`
`:`\r
`),yield this._clipboardService.writeText(w)}))),n.getOption(90)||b.push(new vs("diff.inline.revertChange",p("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>eN(this,void 0,void 0,function*(){this._editor.revert(this._diff)}))),b},autoSelectFirstItem:!0})};this._register(bi(this._diffActions,"mousedown",g=>{const{top:m,height:y}=Mi(this._diffActions),b=Math.floor(d/3);g.preventDefault(),f(g.posx,m+y+b)})),this._register(n.onMouseMove(g=>{(g.target.type===8||g.target.type===5)&&g.target.detail.viewZoneId===this._getViewZoneId()?(u=this._updateLightBulbPosition(this._marginDomNode,g.event.browserEvent.y,d),this.visibility=!0):this.visibility=!1})),this._register(n.onMouseDown(g=>{g.event.rightButton&&(g.target.type===8||g.target.type===5)&&g.target.detail.viewZoneId===this._getViewZoneId()&&(g.event.preventDefault(),u=this._updateLightBulbPosition(this._marginDomNode,g.event.browserEvent.y,d),f(g.event.posx,g.event.posy+d))}))}_updateLightBulbPosition(e,t,n){const{top:r}=Mi(e),s=t-r,o=Math.floor(s/n),a=o*n;if(this._diffActions.style.top=`${a}px`,this._viewLineCounts){let l=0;for(let c=0;c<this._viewLineCounts.length;c++)if(l+=this._viewLineCounts[c],o<l)return c}return o}}const lH=vu("diffEditorWidget",{createHTML:i=>i});function P9e(i,e,t,n){Ir(n,e.fontInfo);const r=t.length>0,s=new Z1(1e4);let o=0,a=0;const l=[];for(let h=0;h<i.lineTokens.length;h++){const f=h+1,g=i.lineTokens[h],m=i.lineBreakData[h],y=Ys.filter(t,f,1,Number.MAX_SAFE_INTEGER);if(m){let b=0;for(const v of m.breakOffsets){const C=g.sliceAndInflate(b,v,0);o=Math.max(o,cH(a,C,Ys.extractWrapped(y,b,v),r,i.mightContainNonBasicASCII,i.mightContainRTL,e,s)),a++,b=v}l.push(m.breakOffsets.length)}else l.push(1),o=Math.max(o,cH(a,g,y,r,i.mightContainNonBasicASCII,i.mightContainRTL,e,s)),a++}o+=e.scrollBeyondLastColumn;const c=s.build(),d=lH?lH.createHTML(c):c;n.innerHTML=d;const u=o*e.typicalHalfwidthCharacterWidth;return{heightInLines:a,minWidthInPx:u,viewLineCounts:l}}class M9e{constructor(e,t,n,r){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=n,this.mightContainRTL=r}}class NB{static fromEditor(e){var t;const n=e.getOptions(),r=n.get(50),s=n.get(143);return new NB(((t=e.getModel())===null||t===void 0?void 0:t.getOptions().tabSize)||0,r,n.get(33),r.typicalHalfwidthCharacterWidth,n.get(103),n.get(66),s.decorationsWidth,n.get(116),n.get(98),n.get(93),n.get(51))}constructor(e,t,n,r,s,o,a,l,c,d,u){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=n,this.typicalHalfwidthCharacterWidth=r,this.scrollBeyondLastColumn=s,this.lineHeight=o,this.lineDecorationsWidth=a,this.stopRenderingLineAfter=l,this.renderWhitespace=c,this.renderControlCharacters=d,this.fontLigatures=u}}function cH(i,e,t,n,r,s,o,a){a.appendString('<div class="view-line'),n||a.appendString(" char-delete"),a.appendString('" style="top:'),a.appendString(String(i*o.lineHeight)),a.appendString('px;width:1000000px;">');const l=e.getLineContent(),c=Po.isBasicASCII(l,r),d=Po.containsRTL(l,c,s),u=HC(new vf(o.fontInfo.isMonospace&&!o.disableMonospaceOptimizations,o.fontInfo.canUseHalfwidthRightwardsArrow,l,!1,c,d,0,e,t,o.tabSize,0,o.fontInfo.spaceWidth,o.fontInfo.middotWidth,o.fontInfo.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==Co.OFF,null),a);return a.appendString("</div>"),u.characterMapping.getHorizontalOffset(u.characterMapping.length)}var O9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},dH=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let FM=class extends q{constructor(e,t,n,r,s,o,a){super(),this._editors=e,this._diffModel=t,this._options=n,this._diffEditorWidget=r,this._canIgnoreViewZoneUpdateEvent=s,this._clipboardService=o,this._contextMenuService=a,this._originalTopPadding=Tn(this,0),this._originalScrollOffset=Tn(this,0),this._originalScrollOffsetAnimated=YV(this._originalScrollOffset,this._store),this._modifiedTopPadding=Tn(this,0),this._modifiedScrollOffset=Tn(this,0),this._modifiedScrollOffsetAnimated=YV(this._modifiedScrollOffset,this._store);let l=!1;const c=Tn("state",0),d=this._register(new fn(()=>{c.set(c.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(w=>{!l&&!this._canIgnoreViewZoneUpdateEvent()&&d.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(w=>{!l&&!this._canIgnoreViewZoneUpdateEvent()&&d.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(w=>{(w.hasChanged(144)||w.hasChanged(66))&&d.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(w=>{(w.hasChanged(144)||w.hasChanged(66))&&d.schedule()}));const u=this._diffModel.map(w=>w?mr(w.model.original.onDidChangeTokens,()=>w.model.original.tokenization.backgroundTokenizationState===2):void 0).map((w,S)=>w==null?void 0:w.read(S)),h=new Set,f=new Set,g=At(w=>{const S=this._diffModel.read(w),L=S==null?void 0:S.diff.read(w);if(!S||!L)return null;c.read(w);const I=this._options.renderSideBySide.read(w);return uH(this._editors.original,this._editors.modified,L.mappings,h,f,I)}),m=At(w=>{var S;const L=(S=this._diffModel.read(w))===null||S===void 0?void 0:S.movedTextToCompare.read(w);if(!L)return null;c.read(w);const T=L.changes.map(I=>new hQ(I));return uH(this._editors.original,this._editors.modified,T,h,f,!0)});function y(){const w=document.createElement("div");return w.className="diagonal-fill",w}const b=this._register(new ae),v=At(w=>{var S,L,T,I,R,B,V,F;b.clear();const W=g.read(w)||[],X=[],oe=[],we=this._modifiedTopPadding.read(w);we>0&&oe.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:we,showInHiddenAreas:!0,suppressMouseDown:!0});const ke=this._originalTopPadding.read(w);ke>0&&X.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:ke,showInHiddenAreas:!0,suppressMouseDown:!0});const Ee=this._options.renderSideBySide.read(w),Le=Ee||(S=this._editors.modified._getViewModel())===null||S===void 0?void 0:S.createLineBreaksComputer();if(Le){for(const pe of W)if(pe.diff)for(let Pe=pe.originalRange.startLineNumber;Pe<pe.originalRange.endLineNumberExclusive;Pe++)Le==null||Le.addRequest(this._editors.original.getModel().getLineContent(Pe),null,null)}const qe=(L=Le==null?void 0:Le.finalize())!==null&&L!==void 0?L:[];let Ue=0;const Oe=this._editors.modified.getOption(66),be=(T=this._diffModel.read(w))===null||T===void 0?void 0:T.movedTextToCompare.read(w),un=(R=(I=this._editors.original.getModel())===null||I===void 0?void 0:I.mightContainNonBasicASCII())!==null&&R!==void 0?R:!1,he=(V=(B=this._editors.original.getModel())===null||B===void 0?void 0:B.mightContainRTL())!==null&&V!==void 0?V:!1,_e=NB.fromEditor(this._editors.modified);for(const pe of W)if(pe.diff&&!Ee){if(!pe.originalRange.isEmpty){u.read(w);const ie=document.createElement("div");ie.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const te=new M9e(pe.originalRange.mapToLineArray(Ge=>this._editors.original.getModel().tokenization.getLineTokens(Ge)),pe.originalRange.mapToLineArray(Ge=>qe[Ue++]),un,he),Y=[];for(const Ge of pe.diff.innerChanges||[])Y.push(new Mv(Ge.originalRange.delta(-(pe.diff.original.startLineNumber-1)),NM.className,0));const De=P9e(te,_e,Y,ie),Je=document.createElement("div");if(Je.className="inline-deleted-margin-view-zone",Ir(Je,_e.fontInfo),this._options.renderIndicators.read(w))for(let Ge=0;Ge<De.heightInLines;Ge++){const Tt=document.createElement("div");Tt.className=`delete-sign ${Qe.asClassName(lQ)}`,Tt.setAttribute("style",`position:absolute;top:${Ge*Oe}px;width:${_e.lineDecorationsWidth}px;height:${Oe}px;right:0;`),Je.appendChild(Tt)}let We;b.add(new A9e(()=>cg(We),Je,this._editors.modified,pe.diff,this._diffEditorWidget,De.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let Ge=0;Ge<De.viewLineCounts.length;Ge++){const Tt=De.viewLineCounts[Ge];Tt>1&&X.push({afterLineNumber:pe.originalRange.startLineNumber+Ge,domNode:y(),heightInPx:(Tt-1)*Oe,showInHiddenAreas:!0,suppressMouseDown:!0})}oe.push({afterLineNumber:pe.modifiedRange.startLineNumber-1,domNode:ie,heightInPx:De.heightInLines*Oe,minWidthInPx:De.minWidthInPx,marginDomNode:Je,setZoneId(Ge){We=Ge},showInHiddenAreas:!0,suppressMouseDown:!0})}const Pe=document.createElement("div");Pe.className="gutter-delete",X.push({afterLineNumber:pe.originalRange.endLineNumberExclusive-1,domNode:y(),heightInPx:pe.modifiedHeightInPx,marginDomNode:Pe,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const Pe=pe.modifiedHeightInPx-pe.originalHeightInPx;if(Pe>0){if(be!=null&&be.lineRangeMapping.original.delta(-1).deltaLength(2).contains(pe.originalRange.endLineNumberExclusive-1))continue;X.push({afterLineNumber:pe.originalRange.endLineNumberExclusive-1,domNode:y(),heightInPx:Pe,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let ie=function(){const Y=document.createElement("div");return Y.className="arrow-revert-change "+Qe.asClassName(me.arrowRight),ce("div",{},Y)};if(be!=null&&be.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(pe.modifiedRange.endLineNumberExclusive-1))continue;let te;pe.diff&&pe.diff.modified.isEmpty&&this._options.shouldRenderRevertArrows.read(w)&&(te=ie()),oe.push({afterLineNumber:pe.modifiedRange.endLineNumberExclusive-1,domNode:y(),heightInPx:-Pe,marginDomNode:te,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const pe of(F=m.read(w))!==null&&F!==void 0?F:[]){if(!(be!=null&&be.lineRangeMapping.original.intersect(pe.originalRange))||!(be!=null&&be.lineRangeMapping.modified.intersect(pe.modifiedRange)))continue;const Pe=pe.modifiedHeightInPx-pe.originalHeightInPx;Pe>0?X.push({afterLineNumber:pe.originalRange.endLineNumberExclusive-1,domNode:y(),heightInPx:Pe,showInHiddenAreas:!0,suppressMouseDown:!0}):oe.push({afterLineNumber:pe.modifiedRange.endLineNumberExclusive-1,domNode:y(),heightInPx:-Pe,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:X,mod:oe}});this._register(qs(w=>{const S=Hl.capture(this._editors.modified),L=v.read(w);l=!0,this._editors.original.changeViewZones(T=>{for(const I of h)T.removeZone(I);h.clear();for(const I of L.orig){const R=T.addZone(I);I.setZoneId&&I.setZoneId(R),h.add(R)}}),this._editors.modified.changeViewZones(T=>{for(const I of f)T.removeZone(I);f.clear();for(const I of L.mod){const R=T.addZone(I);I.setZoneId&&I.setZoneId(R),f.add(R)}}),l=!1,S.restore(this._editors.modified)})),this._register(st(()=>{this._editors.original.changeViewZones(w=>{for(const S of h)w.removeZone(S);h.clear()}),this._editors.modified.changeViewZones(w=>{for(const S of f)w.removeZone(S);f.clear()})}));let C=!1;this._register(this._editors.original.onDidScrollChange(w=>{w.scrollLeftChanged&&!C&&(C=!0,this._editors.modified.setScrollLeft(w.scrollLeft),C=!1)})),this._register(this._editors.modified.onDidScrollChange(w=>{w.scrollLeftChanged&&!C&&(C=!0,this._editors.original.setScrollLeft(w.scrollLeft),C=!1)})),this._originalScrollTop=mr(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=mr(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register(Cn(w=>{const S=this._originalScrollTop.read(w)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(w))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(w));S!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(S,1)})),this._register(Cn(w=>{const S=this._modifiedScrollTop.read(w)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(w))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(w));S!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(S,1)})),this._register(Cn(w=>{var S;const L=(S=this._diffModel.read(w))===null||S===void 0?void 0:S.movedTextToCompare.read(w);let T=0;if(L){const I=this._editors.original.getTopForLineNumber(L.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();T=this._editors.modified.getTopForLineNumber(L.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-I}T>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(T,void 0)):T<0?(this._modifiedTopPadding.set(-T,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-T,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+T,void 0,!0)}))}};FM=O9e([dH(5,xu),dH(6,qa)],FM);function uH(i,e,t,n,r,s){const o=new uu(hH(i,n)),a=new uu(hH(e,r)),l=i.getOption(66),c=e.getOption(66),d=[];let u=0,h=0;function f(g,m){for(;;){let y=o.peek(),b=a.peek();if(y&&y.lineNumber>=g&&(y=void 0),b&&b.lineNumber>=m&&(b=void 0),!y&&!b)break;const v=y?y.lineNumber-u:Number.MAX_VALUE,C=b?b.lineNumber-h:Number.MAX_VALUE;v<C?(o.dequeue(),b={lineNumber:y.lineNumber-u+h,heightInPx:0}):v>C?(a.dequeue(),y={lineNumber:b.lineNumber-h+u,heightInPx:0}):(o.dequeue(),a.dequeue()),d.push({originalRange:It.ofLength(y.lineNumber,1),modifiedRange:It.ofLength(b.lineNumber,1),originalHeightInPx:l+y.heightInPx,modifiedHeightInPx:c+b.heightInPx,diff:void 0})}}for(const g of t){let C=function(w,S){var L,T,I,R;if(w<v||S<b)return;if(y)y=!1;else if(w===v||S===b)return;const B=new It(v,w),V=new It(b,S);if(B.isEmpty&&V.isEmpty)return;const F=(T=(L=o.takeWhile(X=>X.lineNumber<w))===null||L===void 0?void 0:L.reduce((X,oe)=>X+oe.heightInPx,0))!==null&&T!==void 0?T:0,W=(R=(I=a.takeWhile(X=>X.lineNumber<S))===null||I===void 0?void 0:I.reduce((X,oe)=>X+oe.heightInPx,0))!==null&&R!==void 0?R:0;d.push({originalRange:B,modifiedRange:V,originalHeightInPx:B.length*l+F,modifiedHeightInPx:V.length*c+W,diff:g.lineRangeMapping}),v=w,b=S};const m=g.lineRangeMapping;f(m.original.startLineNumber,m.modified.startLineNumber);let y=!0,b=m.modified.startLineNumber,v=m.original.startLineNumber;if(s)for(const w of m.innerChanges||[])w.originalRange.startColumn>1&&w.modifiedRange.startColumn>1&&C(w.originalRange.startLineNumber,w.modifiedRange.startLineNumber),w.originalRange.endColumn<i.getModel().getLineMaxColumn(w.originalRange.endLineNumber)&&C(w.originalRange.endLineNumber,w.modifiedRange.endLineNumber);C(m.original.endLineNumberExclusive,m.modified.endLineNumberExclusive),u=m.original.endLineNumberExclusive,h=m.modified.endLineNumberExclusive}return f(Number.MAX_VALUE,Number.MAX_VALUE),d}function hH(i,e){const t=[],n=[],r=i.getOption(144).wrappingColumn!==-1,s=i._getViewModel().coordinatesConverter,o=i.getOption(66);if(r)for(let l=1;l<=i.getModel().getLineCount();l++){const c=s.getModelLineViewLineCount(l);c>1&&n.push({lineNumber:l,heightInPx:o*(c-1)})}for(const l of i.getWhitespaces()){if(e.has(l.id))continue;const c=l.afterLineNumber===0?0:s.convertViewPositionToModelPosition(new U(l.afterLineNumber,1)).lineNumber;t.push({lineNumber:c,heightInPx:l.height})}return JBe(t,n,l=>l.lineNumber,(l,c)=>({lineNumber:l.lineNumber,heightInPx:l.heightInPx+c.heightInPx}))}var F9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},B9e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},ll;let ru=ll=class extends q{constructor(e,t,n,r,s,o,a,l){super(),this._editors=e,this._rootElement=t,this._diffModel=n,this._rootWidth=r,this._rootHeight=s,this._modifiedEditorLayoutInfo=o,this._options=a,this._themeService=l;const c=mr(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),d=At(f=>{const g=c.read(f),m=g.getColor(YRe)||(g.getColor(ZRe)||KA).transparent(2),y=g.getColor(QRe)||(g.getColor(XRe)||qA).transparent(2);return{insertColor:m,removeColor:y}}),u=mr(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),h=mr(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollHeight());this._register(qs((f,g)=>{if(!this._options.renderOverviewRuler.read(f))return;const m=tn(document.createElement("div"));m.setClassName("diffViewport"),m.setPosition("absolute");const y=dr("div.diffOverview",{style:{position:"absolute",top:"0px",width:ll.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;g.add(yS(y,m.domNode)),g.add(bi(y,Ce.POINTER_DOWN,b=>{this._editors.modified.delegateVerticalScrollbarPointerDown(b)})),g.add(ee(y,Ce.MOUSE_WHEEL,b=>{this._editors.modified.delegateScrollFromMouseWheelEvent(b)},{passive:!1})),g.add(yS(this._rootElement,y)),g.add(qs((b,v)=>{const C=this._diffModel.read(b),w=this._editors.original.createOverviewRuler("original diffOverviewRuler");w&&(v.add(w),v.add(yS(y,w.getDomNode())));const S=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(S&&(v.add(S),v.add(yS(y,S.getDomNode()))),!w||!S)return;const L=So("viewZoneChanged",this._editors.original.onDidChangeViewZones),T=So("viewZoneChanged",this._editors.modified.onDidChangeViewZones),I=So("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),R=So("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);v.add(Cn(B=>{var V;L.read(B),T.read(B),I.read(B),R.read(B);const F=d.read(B),W=(V=C==null?void 0:C.diff.read(B))===null||V===void 0?void 0:V.mappings;function X(ke,Ee,Le){const qe=Le._getViewModel();return qe?ke.filter(Ue=>Ue.length>0).map(Ue=>{const Oe=qe.coordinatesConverter.convertModelPositionToViewPosition(new U(Ue.startLineNumber,1)),be=qe.coordinatesConverter.convertModelPositionToViewPosition(new U(Ue.endLineNumberExclusive,1)),un=be.lineNumber-Oe.lineNumber;return new rX(Oe.lineNumber,be.lineNumber,un,Ee.toString())}):[]}const oe=X((W||[]).map(ke=>ke.lineRangeMapping.original),F.removeColor,this._editors.original),we=X((W||[]).map(ke=>ke.lineRangeMapping.modified),F.insertColor,this._editors.modified);w==null||w.setZones(oe),S==null||S.setZones(we)})),v.add(Cn(B=>{const V=this._rootHeight.read(B),F=this._rootWidth.read(B),W=this._modifiedEditorLayoutInfo.read(B);if(W){const X=ll.ENTIRE_DIFF_OVERVIEW_WIDTH-2*ll.ONE_OVERVIEW_WIDTH;w.setLayout({top:0,height:V,right:X+ll.ONE_OVERVIEW_WIDTH,width:ll.ONE_OVERVIEW_WIDTH}),S.setLayout({top:0,height:V,right:0,width:ll.ONE_OVERVIEW_WIDTH});const oe=u.read(B),we=h.read(B),ke=this._editors.modified.getOption(102),Ee=new r1(ke.verticalHasArrows?ke.arrowSize:0,ke.verticalScrollbarSize,0,W.height,we,oe);m.setTop(Ee.getSliderPosition()),m.setHeight(Ee.getSliderSize())}else m.setTop(0),m.setHeight(0);y.style.height=V+"px",y.style.left=F-ll.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",m.setWidth(ll.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}))}};ru.ONE_OVERVIEW_WIDTH=15;ru.ENTIRE_DIFF_OVERVIEW_WIDTH=ll.ONE_OVERVIEW_WIDTH*2;ru=ll=F9e([B9e(7,qi)],ru);P("diffEditor.move.border",{dark:"#8b8b8b9c",light:"#8b8b8b9c",hcDark:"#8b8b8b9c",hcLight:"#8b8b8b9c"},p("diffEditor.move.border","The border color for text that got moved in the diff editor."));P("diffEditor.moveActive.border",{dark:"#FFA500",light:"#FFA500",hcDark:"#FFA500",hcLight:"#FFA500"},p("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor."));class CI extends q{constructor(){super(...arguments),this._id=++CI.idCounter,this._onDidDispose=this._register(new H),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e,t="api"){this._targetEditor.setPosition(e,t)}revealLine(e,t=0){this._targetEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._targetEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e,t="api"){this._targetEditor.setSelection(e,t)}setSelections(e,t="api"){this._targetEditor.setSelections(e,t)}revealLines(e,t,n=0){this._targetEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._targetEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._targetEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,r=!0){this._targetEditor.revealRange(e,t,n,r)}revealRangeInCenter(e,t=0){this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,n){this._targetEditor.trigger(e,t,n)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}}CI.idCounter=0;var W9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},fH=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let BM=class extends q{constructor(e,t,n,r,s,o,a){super(),this.originalEditorElement=e,this.modifiedEditorElement=t,this._options=n,this._createInnerEditor=s,this._instantiationService=o,this._keybindingService=a,this._onDidContentSizeChange=this._register(new H),this.original=this._register(this._createLeftHandSideEditor(n.editorOptions.get(),r.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(n.editorOptions.get(),r.modifiedEditor||{})),this.modifiedModel=mr(this.modified.onDidChangeModel,()=>this.modified.getModel()),this._register(bI({createEmptyChangeSummary:()=>({}),handleChange:(l,c)=>(l.didChange(n.editorOptions)&&Object.assign(c,l.change.changedOptions),!0)},(l,c)=>{n.editorOptions.read(l),this._options.renderSideBySide.read(l),this.modified.updateOptions(this._adjustOptionsForRightHandSide(l,c)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(l,c))}))}_createLeftHandSideEditor(e,t){const n=this._adjustOptionsForLeftHandSide(void 0,e),r=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,n,t);return r.setContextValue("isInDiffLeftEditor",!0),r}_createRightHandSideEditor(e,t){const n=this._adjustOptionsForRightHandSide(void 0,e),r=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,n,t);return r.setContextValue("isInDiffRightEditor",!0),r}_constructInnerEditor(e,t,n,r){const s=this._createInnerEditor(e,t,n,r);return this._register(s.onDidContentSizeChange(o=>{const a=this.original.getContentWidth()+this.modified.getContentWidth()+ru.ENTIRE_DIFF_OVERVIEW_WIDTH,l=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:l,contentWidth:a,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),s}_adjustOptionsForLeftHandSide(e,t){const n=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(n.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},n.wordWrapOverride1=this._options.diffWordWrap.get()):(n.wordWrapOverride1="off",n.wordWrapOverride2="off",n.stickyScroll={enabled:!1},n.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),t.originalAriaLabel&&(n.ariaLabel=t.originalAriaLabel),n.ariaLabel=this._updateAriaLabel(n.ariaLabel),n.readOnly=!this._options.originalEditable.get(),n.dropIntoEditor={enabled:!n.readOnly},n.extraEditorClassName="original-in-monaco-diff-editor",n}_adjustOptionsForRightHandSide(e,t){const n=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(n.ariaLabel=t.modifiedAriaLabel),n.ariaLabel=this._updateAriaLabel(n.ariaLabel),n.wordWrapOverride1=this._options.diffWordWrap.get(),n.revealHorizontalRightPadding=Kl.revealHorizontalRightPadding.defaultValue+ru.ENTIRE_DIFF_OVERVIEW_WIDTH,n.scrollbar.verticalHasArrows=!1,n.extraEditorClassName="modified-in-monaco-diff-editor",n}_adjustOptionsForSubEditor(e){const t=Object.assign(Object.assign({},e),{dimension:{height:0,width:0}});return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}_updateAriaLabel(e){var t;e||(e="");const n=p("diff-aria-navigation-tip"," use {0} to open the accessibility help.",(t=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))===null||t===void 0?void 0:t.getAriaLabel());return this._options.accessibilityVerbose.get()?e+n:e?e.replaceAll(n,""):""}};BM=W9e([fH(5,rt),fH(6,bn)],BM);class V9e{get editorOptions(){return this._options}constructor(e,t){this.diffEditorWidth=t,this.couldShowInlineViewBecauseOfSize=At(this,r=>this._options.read(r).renderSideBySide&&this.diffEditorWidth.read(r)<=this._options.read(r).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=At(this,r=>this._options.read(r).renderOverviewRuler),this.renderSideBySide=At(this,r=>this._options.read(r).renderSideBySide&&!(this._options.read(r).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(r))),this.readOnly=At(this,r=>this._options.read(r).readOnly),this.shouldRenderRevertArrows=At(this,r=>!(!this._options.read(r).renderMarginRevertIcon||!this.renderSideBySide.read(r)||this.readOnly.read(r))),this.renderIndicators=At(this,r=>this._options.read(r).renderIndicators),this.enableSplitViewResizing=At(this,r=>this._options.read(r).enableSplitViewResizing),this.splitViewDefaultRatio=At(this,r=>this._options.read(r).splitViewDefaultRatio),this.ignoreTrimWhitespace=At(this,r=>this._options.read(r).ignoreTrimWhitespace),this.maxComputationTimeMs=At(this,r=>this._options.read(r).maxComputationTime),this.showMoves=At(this,r=>this._options.read(r).experimental.showMoves&&this.renderSideBySide.read(r)),this.isInEmbeddedEditor=At(this,r=>this._options.read(r).isInEmbeddedEditor),this.diffWordWrap=At(this,r=>this._options.read(r).diffWordWrap),this.originalEditable=At(this,r=>this._options.read(r).originalEditable),this.diffCodeLens=At(this,r=>this._options.read(r).diffCodeLens),this.accessibilityVerbose=At(this,r=>this._options.read(r).accessibilityVerbose),this.diffAlgorithm=At(this,r=>this._options.read(r).diffAlgorithm),this.showEmptyDecorations=At(this,r=>this._options.read(r).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=At(this,r=>this._options.read(r).onlyShowAccessibleDiffViewer),this.hideUnchangedRegions=At(this,r=>this._options.read(r).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=At(this,r=>this._options.read(r).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=At(this,r=>this._options.read(r).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsMinimumLineCount=At(this,r=>this._options.read(r).hideUnchangedRegions.minimumLineCount);const n=Object.assign(Object.assign({},e),gH(e,Yr));this._options=Tn(this,n)}updateOptions(e){const t=gH(e,this._options.get()),n=Object.assign(Object.assign(Object.assign({},this._options.get()),e),t);this._options.set(n,void 0,{changedOptions:e})}}function gH(i,e){var t,n,r,s,o,a,l,c;return{enableSplitViewResizing:$e(i.enableSplitViewResizing,e.enableSplitViewResizing),splitViewDefaultRatio:zSe(i.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:$e(i.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:$e(i.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:Bf(i.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:Bf(i.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:$e(i.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:$e(i.renderIndicators,e.renderIndicators),originalEditable:$e(i.originalEditable,e.originalEditable),diffCodeLens:$e(i.diffCodeLens,e.diffCodeLens),renderOverviewRuler:$e(i.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:_i(i.diffWordWrap,e.diffWordWrap,["off","on","inherit"]),diffAlgorithm:_i(i.diffAlgorithm,e.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:$e(i.accessibilityVerbose,e.accessibilityVerbose),experimental:{showMoves:$e((t=i.experimental)===null||t===void 0?void 0:t.showMoves,e.experimental.showMoves),showEmptyDecorations:$e((n=i.experimental)===null||n===void 0?void 0:n.showEmptyDecorations,e.experimental.showEmptyDecorations)},hideUnchangedRegions:{enabled:$e((s=(r=i.hideUnchangedRegions)===null||r===void 0?void 0:r.enabled)!==null&&s!==void 0?s:(o=i.experimental)===null||o===void 0?void 0:o.collapseUnchangedRegions,e.hideUnchangedRegions.enabled),contextLineCount:Bf((a=i.hideUnchangedRegions)===null||a===void 0?void 0:a.contextLineCount,e.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:Bf((l=i.hideUnchangedRegions)===null||l===void 0?void 0:l.minimumLineCount,e.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:Bf((c=i.hideUnchangedRegions)===null||c===void 0?void 0:c.revealLineCount,e.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:$e(i.isInEmbeddedEditor,e.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:$e(i.onlyShowAccessibleDiffViewer,e.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:Bf(i.renderSideBySideInlineBreakpoint,e.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:$e(i.useInlineViewWhenSpaceIsLimited,e.useInlineViewWhenSpaceIsLimited)}}var H9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Bb=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let ip=class extends CI{constructor(e,t,n,r,s,o,a,l){var c;super(),this._domElement=e,this._parentContextKeyService=r,this._parentInstantiationService=s,this._audioCueService=a,this._editorProgressService=l,this.elements=dr("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[dr("div.noModificationsOverlay@overlay",{style:{position:"absolute",height:"100%",visibility:"hidden"}},[ce("span",{},"No Changes")]),dr("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),dr("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),dr("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModel=this._register(Pk("diffModel",void 0)),this.onDidChangeModel=Re.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._parentInstantiationService.createChild(new qD([ot,this._contextKeyService])),this._boundarySashes=Tn(this,void 0),this._accessibleDiffViewerShouldBeVisible=Tn(this,!1),this._accessibleDiffViewerVisible=At(this,m=>this._options.onlyShowAccessibleDiffViewer.read(m)?!0:this._accessibleDiffViewerShouldBeVisible.read(m)),this.movedBlocksLinesPart=Tn(this,void 0),this._layoutInfo=At(this,m=>{var y,b,v;const C=this._rootSizeObserver.width.read(m),w=this._rootSizeObserver.height.read(m),S=(y=this._sash.read(m))===null||y===void 0?void 0:y.sashLeft.read(m),L=S??Math.max(5,this._editors.original.getLayoutInfo().decorationsLeft),T=C-L-(this._options.renderOverviewRuler.read(m)?ru.ENTIRE_DIFF_OVERVIEW_WIDTH:0),I=(v=(b=this.movedBlocksLinesPart.read(m))===null||b===void 0?void 0:b.width.read(m))!==null&&v!==void 0?v:0,R=L-I;return this.elements.original.style.width=R+"px",this.elements.original.style.left="0px",this.elements.modified.style.width=T+"px",this.elements.modified.style.left=L+"px",this._editors.original.layout({width:R,height:w}),this._editors.modified.layout({width:T,height:w}),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map((m,y)=>m==null?void 0:m.diff.read(y)),this.onDidUpdateDiff=Re.fromObservableLight(this._diffValue),o.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register(st(()=>this._domElement.removeChild(this.elements.root))),this._rootSizeObserver=this._register(new e9e(this.elements.root,t.dimension)),this._rootSizeObserver.setAutomaticLayout((c=t.automaticLayout)!==null&&c!==void 0?c:!1),this._options=new V9e(t,this._rootSizeObserver.width),this._contextKeyService.createKey(N.isEmbeddedDiffEditor.key,!1);const d=N.isEmbeddedDiffEditor.bindTo(this._contextKeyService);this._register(Cn(m=>{d.set(this._options.isInEmbeddedEditor.read(m))}));const u=N.comparingMovedCode.bindTo(this._contextKeyService);this._register(Cn(m=>{var y;u.set(!!(!((y=this._diffModel.read(m))===null||y===void 0)&&y.movedTextToCompare.read(m)))}));const h=N.diffEditorRenderSideBySideInlineBreakpointReached.bindTo(this._contextKeyService);this._register(Cn(m=>{h.set(this._options.couldShowInlineViewBecauseOfSize.read(m))})),this._editors=this._register(this._instantiationService.createInstance(BM,this.elements.original,this.elements.modified,this._options,n,(m,y,b,v)=>this._createInnerEditor(m,y,b,v))),this._sash=Ey(this,(m,y)=>{const b=this._options.renderSideBySide.read(m);if(this.elements.root.classList.toggle("side-by-side",b),!b)return;const v=y.add(new C9e(this._options,this.elements.root,{height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((C,w)=>C-(this._options.renderOverviewRuler.read(w)?ru.ENTIRE_DIFF_OVERVIEW_WIDTH:0))}));return y.add(Cn(C=>{const w=this._boundarySashes.read(C);w&&v.setBoundarySashes(w)})),v}),this._register(Ay(this._sash)),this._register(qs((m,y)=>{this.unchangedRangesFeature=y.add(this._instantiationService.createInstance($u(AM,m),this._editors,this._diffModel,this._options))})),this._register(qs((m,y)=>{y.add(new($u(y9e,m))(this._editors,this._diffModel,this._options))})),this._register(qs((m,y)=>{y.add(this._instantiationService.createInstance($u(FM,m),this._editors,this._diffModel,this._options,this,()=>this.unchangedRangesFeature.isUpdatingViewZones))})),this._register(qs((m,y)=>{y.add(this._instantiationService.createInstance($u(ru,m),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map(b=>b.modifiedEditor),this._options))})),this._register(qs((m,y)=>{this._accessibleDiffViewer=y.add(this._register(this._instantiationService.createInstance($u(ch,m),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(b,v)=>this._accessibleDiffViewerShouldBeVisible.set(b,v),this._options.onlyShowAccessibleDiffViewer.map(b=>!b),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((b,v)=>{var C;return(C=b==null?void 0:b.diff.read(v))===null||C===void 0?void 0:C.mappings.map(w=>w.lineRangeMapping)}),this._editors)))}));const f=this._accessibleDiffViewerVisible.map(m=>m?"hidden":"visible");this._register(Dh(this.elements.modified,{visibility:f})),this._register(Dh(this.elements.original,{visibility:f})),this._createDiffEditorContributions(),o.addDiffEditor(this),this._register(Ay(this._layoutInfo)),this._register(qs((m,y)=>{this.movedBlocksLinesPart.set(y.add(new($u(Ih,m))(this.elements.root,this._diffModel,this._layoutInfo.map(b=>b.originalEditor),this._layoutInfo.map(b=>b.modifiedEditor),this._editors)),void 0)})),this._register(Dh(this.elements.overlay,{width:this._layoutInfo.map((m,y)=>m.originalEditor.width+(this._options.renderSideBySide.read(y)?0:m.modifiedEditor.width)),visibility:At(m=>{var y,b;return this._options.hideUnchangedRegions.read(m)&&((b=(y=this._diffModel.read(m))===null||y===void 0?void 0:y.diff.read(m))===null||b===void 0?void 0:b.mappings.length)===0?"visible":"hidden"})})),this._register(this._editors.modified.onMouseDown(m=>{var y,b;if(!m.event.rightButton&&m.target.position&&(!((y=m.target.element)===null||y===void 0)&&y.className.includes("arrow-revert-change"))){const v=m.target.position.lineNumber,C=m.target,w=this._diffModel.get();if(!w)return;const S=(b=w.diff.get())===null||b===void 0?void 0:b.mappings;if(!S)return;const L=S.find(T=>(C==null?void 0:C.detail.afterLineNumber)===T.lineRangeMapping.modified.startLineNumber-1||T.lineRangeMapping.modified.startLineNumber===v);if(!L)return;this.revert(L.lineRangeMapping),m.event.stopPropagation()}})),this._register(Re.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,m=>{var y,b;if((m==null?void 0:m.reason)===3){const v=(b=(y=this._diffModel.get())===null||y===void 0?void 0:y.diff.get())===null||b===void 0?void 0:b.mappings.find(C=>C.lineRangeMapping.modified.contains(m.position.lineNumber));v!=null&&v.lineRangeMapping.modified.isEmpty?this._audioCueService.playAudioCue(Ut.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):v!=null&&v.lineRangeMapping.original.isEmpty?this._audioCueService.playAudioCue(Ut.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):v&&this._audioCueService.playAudioCue(Ut.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}));const g=this._diffModel.map((m,y)=>m==null?void 0:m.isDiffUpToDate.read(y));this._register(qs((m,y)=>{if(g.read(m)===!1){const b=this._editorProgressService.show(!0,1e3);y.add(st(()=>b.done()))}}))}_createInnerEditor(e,t,n,r){return e.createInstance(o1,t,n,r)}_createDiffEditorContributions(){const e=h_.getDiffEditorContributions();for(const t of e)try{this._register(this._instantiationService.createInstance(t.ctor,this))}catch(n){ut(n)}}get _targetEditor(){return this._editors.modified}getEditorType(){return VC.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var e;const t=this._editors.original.saveViewState(),n=this._editors.modified.saveViewState();return{original:t,modified:n,modelState:(e=this._diffModel.get())===null||e===void 0?void 0:e.serializeState()}}restoreViewState(e){var t;if(e&&e.original&&e.modified){const n=e;this._editors.original.restoreViewState(n.original),this._editors.modified.restoreViewState(n.modified),n.modelState&&((t=this._diffModel.get())===null||t===void 0||t.restoreSerializedState(n.modelState))}}createViewModel(e){return this._instantiationService.createInstance(OM,e,this._options,this)}getModel(){var e,t;return(t=(e=this._diffModel.get())===null||e===void 0?void 0:e.model)!==null&&t!==void 0?t:null}setModel(e){!e&&this._diffModel.get()&&this._accessibleDiffViewer.close();const t=e?"model"in e?e:this.createViewModel(e):void 0;this._editors.original.setModel(t?t.model.original:null),this._editors.modified.setModel(t?t.model.modified:null),Hn(n=>{this._diffModel.set(t,n)})}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var e;const t=(e=this._diffModel.get())===null||e===void 0?void 0:e.diff.get();return t?z9e(t):null}revert(e){var t;const n=(t=this._diffModel.get())===null||t===void 0?void 0:t.model;if(!n)return;const r=e.innerChanges?e.innerChanges.map(s=>({range:s.modifiedRange,text:n.original.getValueInRange(s.originalRange)})):[{range:e.modified.toExclusiveRange(),text:n.original.getValueInRange(e.original.toExclusiveRange())}];this._editors.modified.executeEdits("diffEditor",r)}accessibleDiffViewerNext(){this._accessibleDiffViewer.next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.prev()}mapToOtherSide(){var e,t;const n=this._editors.modified.hasWidgetFocus(),r=n?this._editors.modified:this._editors.original,s=n?this._editors.original:this._editors.modified;let o;const a=r.getSelection();if(a){const l=(t=(e=this._diffModel.get())===null||e===void 0?void 0:e.diff.get())===null||t===void 0?void 0:t.mappings.map(c=>n?c.lineRangeMapping.flip():c.lineRangeMapping);if(l){const c=pH(a.getStartPosition(),l),d=pH(a.getEndPosition(),l);o=D.plusRange(c,d)}}return{destination:s,destinationSelection:o}}switchSide(){const{destination:e,destinationSelection:t}=this.mapToOtherSide();e.focus(),t&&e.setSelection(t)}exitCompareMove(){const e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){var e;const t=(e=this._diffModel.get())===null||e===void 0?void 0:e.unchangedRegions.get();t&&Hn(n=>{for(const r of t)r.collapseAll(n)})}showAllUnchangedRegions(){var e;const t=(e=this._diffModel.get())===null||e===void 0?void 0:e.unchangedRegions.get();t&&Hn(n=>{for(const r of t)r.showAll(n)})}};ip=H9e([Bb(3,ot),Bb(4,rt),Bb(5,Jt),Bb(6,ow),Bb(7,Cf)],ip);function pH(i,e){const t=MT(e,r=>r.original.startLineNumber<=i.lineNumber);if(!t)return D.fromPositions(i);if(t.original.endLineNumberExclusive<=i.lineNumber){const r=i.lineNumber-t.original.endLineNumberExclusive+t.modified.endLineNumberExclusive;return D.fromPositions(new U(r,i.column))}if(!t.innerChanges)return D.fromPositions(new U(t.modified.startLineNumber,1));const n=MT(t.innerChanges,r=>r.originalRange.getStartPosition().isBeforeOrEqual(i));if(!n){const r=i.lineNumber-t.original.startLineNumber+t.modified.startLineNumber;return D.fromPositions(new U(r,i.column))}if(n.originalRange.containsPosition(i))return n.modifiedRange;{const r=U9e(n.originalRange.getEndPosition(),i);return D.fromPositions(j9e(n.modifiedRange.getEndPosition(),r))}}function U9e(i,e){return i.lineNumber===e.lineNumber?new ly(0,e.column-i.column):new ly(e.lineNumber-i.lineNumber,e.column-1)}function j9e(i,e){return e.lineCount===0?new U(i.lineNumber,i.column+e.columnCount):new U(i.lineNumber+e.lineCount,e.columnCount+1)}function z9e(i){return i.mappings.map(e=>{const t=e.lineRangeMapping;let n,r,s,o,a=t.innerChanges;return t.original.isEmpty?(n=t.original.startLineNumber-1,r=0,a=void 0):(n=t.original.startLineNumber,r=t.original.endLineNumberExclusive-1),t.modified.isEmpty?(s=t.modified.startLineNumber-1,o=0,a=void 0):(s=t.modified.startLineNumber,o=t.modified.endLineNumberExclusive-1),{originalStartLineNumber:n,originalEndLineNumber:r,modifiedStartLineNumber:s,modifiedEndLineNumber:o,charChanges:a==null?void 0:a.map(l=>({originalStartLineNumber:l.originalRange.startLineNumber,originalStartColumn:l.originalRange.startColumn,originalEndLineNumber:l.originalRange.endLineNumber,originalEndColumn:l.originalRange.endColumn,modifiedStartLineNumber:l.modifiedRange.startLineNumber,modifiedStartColumn:l.modifiedRange.startColumn,modifiedEndLineNumber:l.modifiedRange.endLineNumber,modifiedEndColumn:l.modifiedRange.endColumn}))}})}var AB=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},An=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let $9e=0,mH=!1;function K9e(i){if(!i){if(mH)return;mH=!0}qIe(i||document.body)}let Hk=class extends o1{constructor(e,t,n,r,s,o,a,l,c,d,u,h){const f=Object.assign({},t);f.ariaLabel=f.ariaLabel||hk.editorViewAccessibleLabel,f.ariaLabel=f.ariaLabel+";"+hk.accessibilityHelpMessage,super(e,f,{},n,r,s,o,l,c,d,u,h),a instanceof g1?this._standaloneKeybindingService=a:this._standaloneKeybindingService=null,K9e(f.ariaContainerElement)}addCommand(e,t,n){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const r="DYNAMIC_"+ ++$9e,s=re.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(r,e,t,s),r}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),q.None;const t=e.id,n=e.label,r=re.and(re.equals("editorId",this.getId()),re.deserialize(e.precondition)),s=e.keybindings,o=re.and(r,re.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(f,...g)=>Promise.resolve(e.run(this,...g)),d=new ae,u=this.getId()+":"+t;if(d.add(Bt.registerCommand(u,c)),a){const f={command:{id:u,title:n},when:r,group:a,order:l};d.add(pr.appendMenuItem(E.EditorContext,f))}if(Array.isArray(s))for(const f of s)d.add(this._standaloneKeybindingService.addDynamicKeybinding(u,f,c,o));const h=new sX(u,n,n,r,(...f)=>Promise.resolve(e.run(this,...f)),this._contextKeyService);return this._actions.set(t,h),d.add(st(()=>{this._actions.delete(t)})),d}_triggerCommand(e,t){if(this._codeEditorService instanceof rk)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};Hk=AB([An(2,rt),An(3,Jt),An(4,oi),An(5,ot),An(6,bn),An(7,qi),An(8,wi),An(9,yu),An(10,wn),An(11,Fe)],Hk);let WM=class extends Hk{constructor(e,t,n,r,s,o,a,l,c,d,u,h,f,g,m){const y=Object.assign({},t);Ak(d,y,!1);const b=l.registerEditorContainer(e);typeof y.theme=="string"&&l.setTheme(y.theme),typeof y.autoDetectHighContrast<"u"&&l.setAutoDetectHighContrast(!!y.autoDetectHighContrast);const v=y.model;delete y.model,super(e,y,n,r,s,o,a,l,c,u,g,m),this._configurationService=d,this._standaloneThemeService=l,this._register(b);let C;if(typeof v>"u"){const w=f.getLanguageIdByMimeType(y.language)||y.language||Eo;C=fQ(h,f,y.value||"",w,void 0),this._ownsModel=!0}else C=v,this._ownsModel=!1;if(this._attachModel(C),C){const w={oldModelUrl:null,newModelUrl:C.uri};this._onDidChangeModel.fire(w)}}dispose(){super.dispose()}updateOptions(e){Ak(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};WM=AB([An(2,rt),An(3,Jt),An(4,oi),An(5,ot),An(6,bn),An(7,Ho),An(8,wi),An(9,Et),An(10,yu),An(11,zn),An(12,Fn),An(13,wn),An(14,Fe)],WM);let VM=class extends ip{constructor(e,t,n,r,s,o,a,l,c,d,u,h){const f=Object.assign({},t);Ak(l,f,!0);const g=o.registerEditorContainer(e);typeof f.theme=="string"&&o.setTheme(f.theme),typeof f.autoDetectHighContrast<"u"&&o.setAutoDetectHighContrast(!!f.autoDetectHighContrast),super(e,f,{},r,n,s,h,d),this._configurationService=l,this._standaloneThemeService=o,this._register(g)}dispose(){super.dispose()}updateOptions(e){Ak(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(Hk,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};VM=AB([An(2,rt),An(3,ot),An(4,Jt),An(5,Ho),An(6,wi),An(7,Et),An(8,qa),An(9,Cf),An(10,xu),An(11,ow)],VM);function fQ(i,e,t,n,r){if(t=t||"",!n){const s=t.indexOf(`
`);let o=t;return s!==-1&&(o=t.substring(0,s)),_H(i,t,e.createByFilepathOrFirstLine(r||null,o),r)}return _H(i,t,e.createById(n),r)}function _H(i,e,t,n){return i.createModel(e,t,n)}var gQ=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function q9e(i,e,t){return tt.initialize(t||{}).createInstance(WM,i,e)}function G9e(i){return tt.get(Jt).onCodeEditorAdd(t=>{i(t)})}function Z9e(i){return tt.get(Jt).onDiffEditorAdd(t=>{i(t)})}function X9e(){return tt.get(Jt).listCodeEditors()}function Y9e(){return tt.get(Jt).listDiffEditors()}function Q9e(i,e,t){return tt.initialize(t||{}).createInstance(VM,i,e)}function J9e(i){if(typeof i.id!="string"||typeof i.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return Bt.registerCommand(i.id,i.run)}function e7e(i){if(typeof i.id!="string"||typeof i.label!="string"||typeof i.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=re.deserialize(i.precondition),t=(r,...s)=>sr.runEditorCommand(r,s,e,(o,a,l)=>Promise.resolve(i.run(a,...l))),n=new ae;if(n.add(Bt.registerCommand(i.id,t)),i.contextMenuGroupId){const r={command:{id:i.id,title:i.label},when:e,group:i.contextMenuGroupId,order:i.contextMenuOrder||0};n.add(pr.appendMenuItem(E.EditorContext,r))}if(Array.isArray(i.keybindings)){const r=tt.get(bn);if(!(r instanceof g1))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const s=re.and(e,re.deserialize(i.keybindingContext));n.add(r.addDynamicKeybindings(i.keybindings.map(o=>({keybinding:o,command:i.id,when:s}))))}}return n}function t7e(i){return pQ([i])}function pQ(i){const e=tt.get(bn);return e instanceof g1?e.addDynamicKeybindings(i.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:re.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),q.None)}function n7e(i,e,t){const n=tt.get(Fn),r=n.getLanguageIdByMimeType(e)||e;return fQ(tt.get(zn),n,i,r,t)}function i7e(i,e){const t=tt.get(Fn),n=t.getLanguageIdByMimeType(e)||e||Eo;i.setLanguage(t.createById(n))}function r7e(i,e,t){i&&tt.get(fd).changeOne(e,i.uri,t)}function s7e(i){tt.get(fd).changeAll(i,[])}function o7e(i){return tt.get(fd).read(i)}function a7e(i){return tt.get(fd).onMarkerChanged(i)}function l7e(i){return tt.get(zn).getModel(i)}function c7e(){return tt.get(zn).getModels()}function d7e(i){return tt.get(zn).onModelAdded(i)}function u7e(i){return tt.get(zn).onModelRemoved(i)}function h7e(i){return tt.get(zn).onModelLanguageChanged(t=>{i({model:t.model,oldLanguage:t.oldLanguageId})})}function f7e(i){return yIe(tt.get(zn),tt.get(wn),i)}function g7e(i,e){const t=tt.get(Fn),n=tt.get(Ho);return r5.colorizeElement(n,t,i,e).then(()=>{n.registerEditorContainer(i)})}function p7e(i,e,t){const n=tt.get(Fn);return tt.get(Ho).registerEditorContainer(document.body),r5.colorize(n,i,e,t)}function m7e(i,e,t=4){return tt.get(Ho).registerEditorContainer(document.body),r5.colorizeModelLine(i,e,t)}function _7e(i){const e=Gn.get(i);return e||{getInitialState:()=>Y_,tokenize:(t,n,r)=>t5(i,r)}}function b7e(i,e){Gn.getOrCreate(e);const t=_7e(e),n=Kc(i),r=[];let s=t.getInitialState();for(let o=0,a=n.length;o<a;o++){const l=n[o],c=t.tokenize(l,!0,s);r[o]=c.tokens,s=c.endState}return r}function v7e(i,e){tt.get(Ho).defineTheme(i,e)}function y7e(i){tt.get(Ho).setTheme(i)}function C7e(){yA.clearAllFontInfos()}function w7e(i,e){return Bt.registerCommand({id:i,handler:e})}function S7e(i){return tt.get(lo).registerOpener({open(t){return gQ(this,void 0,void 0,function*(){return typeof t=="string"&&(t=Ye.parse(t)),i.open(t)})}})}function x7e(i){return tt.get(Jt).registerCodeEditorOpenHandler((t,n,r)=>gQ(this,void 0,void 0,function*(){var s;if(!n)return null;const o=(s=t.options)===null||s===void 0?void 0:s.selection;let a;return o&&typeof o.endLineNumber=="number"&&typeof o.endColumn=="number"?a=o:o&&(a={lineNumber:o.startLineNumber,column:o.startColumn}),(yield i.openCodeEditor(n,t.resource,a))?n:null}))}function T7e(){return{create:q9e,getEditors:X9e,getDiffEditors:Y9e,onDidCreateEditor:G9e,onDidCreateDiffEditor:Z9e,createDiffEditor:Q9e,addCommand:J9e,addEditorAction:e7e,addKeybindingRule:t7e,addKeybindingRules:pQ,createModel:n7e,setModelLanguage:i7e,setModelMarkers:r7e,getModelMarkers:o7e,removeAllMarkers:s7e,onDidChangeMarkers:a7e,getModels:c7e,getModel:l7e,onDidCreateModel:d7e,onWillDisposeModel:u7e,onDidChangeModelLanguage:h7e,createWebWorker:f7e,colorizeElement:g7e,colorize:p7e,colorizeModelLine:m7e,tokenize:b7e,defineTheme:v7e,setTheme:y7e,remeasureFonts:C7e,registerCommand:w7e,registerLinkOpener:S7e,registerEditorOpener:x7e,AccessibilitySupport:N2,ContentWidgetPositionPreference:B2,CursorChangeReason:W2,DefaultEndOfLine:V2,EditorAutoIndentStrategy:U2,EditorOption:j2,EndOfLinePreference:z2,EndOfLineSequence:$2,MinimapPosition:eA,MouseTargetType:tA,OverlayWidgetPositionPreference:nA,OverviewRulerLane:iA,GlyphMarginLane:K2,RenderLineNumbersType:sA,RenderMinimap:oA,ScrollbarVisibility:lA,ScrollType:aA,TextEditorCursorBlinkingStyle:fA,TextEditorCursorStyle:gA,TrackedRangeStickiness:pA,WrappingIndent:mA,InjectedTextCursorStops:G2,PositionAffinity:rA,ConfigurationChangedEvent:Vq,BareFontInfo:wg,FontInfo:vA,TextModelResolvedOptions:_x,FindMatch:j0,ApplyUpdateResult:Nv,EditorZoom:Go,EditorType:VC,EditorOptions:Kl}}function k7e(i,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!i(t))return!1;return!0}function CS(i,e){return typeof i=="boolean"?i:e}function bH(i,e){return typeof i=="string"?i:e}function L7e(i){const e={};for(const t of i)e[t]=!0;return e}function vH(i,e=!1){e&&(i=i.map(function(n){return n.toLowerCase()}));const t=L7e(i);return e?function(n){return t[n.toLowerCase()]!==void 0&&t.hasOwnProperty(n.toLowerCase())}:function(n){return t[n]!==void 0&&t.hasOwnProperty(n)}}function HM(i,e){e=e.replace(/@@/g,"");let t=0,n;do n=!1,e=e.replace(/@(\w+)/g,function(s,o){n=!0;let a="";if(typeof i[o]=="string")a=i[o];else if(i[o]&&i[o]instanceof RegExp)a=i[o].source;else throw i[o]===void 0?In(i,"language definition does not contain attribute '"+o+"', used at: "+e):In(i,"attribute reference '"+o+"' must be a string, used at: "+e);return xm(a)?"":"(?:"+a+")"}),t++;while(n&&t<5);e=e.replace(/\x01/g,"@");const r=(i.ignoreCase?"i":"")+(i.unicode?"u":"");return new RegExp(e,r)}function D7e(i,e,t,n){if(n<0)return i;if(n<e.length)return e[n];if(n>=100){n=n-100;const r=t.split(".");if(r.unshift(t),n<r.length)return r[n]}return null}function I7e(i,e,t,n){let r=-1,s=t,o=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(r=parseInt(o[3]),o[2]&&(r=r+100)),s=o[4]);let a="~",l=s;!s||s.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(o=s.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(a=o[1],l=o[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const d=vH(l.split("|"),i.ignoreCase);c=function(u){return a==="~"?d(u):!d(u)}}else if(a==="@"||a==="!@"){const d=i[l];if(!d)throw In(i,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!k7e(function(h){return typeof h=="string"},d))throw In(i,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const u=vH(d,i.ignoreCase);c=function(h){return a==="@"?u(h):!u(h)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const d=HM(i,"^"+l+"$");c=function(u){return a==="~"?d.test(u):!d.test(u)}}else c=function(d,u,h,f){return HM(i,"^"+qu(i,l,u,h,f)+"$").test(d)};else if(l.indexOf("$")<0){const d=wh(i,l);c=function(u){return a==="=="?u===d:u!==d}}else{const d=wh(i,l);c=function(u,h,f,g,m){const y=qu(i,d,h,f,g);return a==="=="?u===y:u!==y}}return r===-1?{name:t,value:n,test:function(d,u,h,f){return c(d,d,u,h,f)}}:{name:t,value:n,test:function(d,u,h,f){const g=D7e(d,u,h,r);return c(g||"",d,u,h,f)}}}function UM(i,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw In(i,"a 'token' attribute must be of type string, in rule: "+e);{const n={token:t.token};if(t.token.indexOf("$")>=0&&(n.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")n.bracket=1;else if(t.bracket==="@close")n.bracket=-1;else throw In(i,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw In(i,"the next state must be a string value in rule: "+e);{let r=t.next;if(!/^(@pop|@push|@popall)$/.test(r)&&(r[0]==="@"&&(r=r.substr(1)),r.indexOf("$")<0&&!WIe(i,qu(i,r,"",[],""))))throw In(i,"the next state '"+t.next+"' is not defined in rule: "+e);n.next=r}}return typeof t.goBack=="number"&&(n.goBack=t.goBack),typeof t.switchTo=="string"&&(n.switchTo=t.switchTo),typeof t.log=="string"&&(n.log=t.log),typeof t.nextEmbedded=="string"&&(n.nextEmbedded=t.nextEmbedded,i.usesEmbedded=!0),n}}else if(Array.isArray(t)){const n=[];for(let r=0,s=t.length;r<s;r++)n[r]=UM(i,e,t[r]);return{group:n}}else if(t.cases){const n=[];for(const s in t.cases)if(t.cases.hasOwnProperty(s)){const o=UM(i,e,t.cases[s]);s==="@default"||s==="@"||s===""?n.push({test:void 0,value:o,name:s}):s==="@eos"?n.push({test:function(a,l,c,d){return d},value:o,name:s}):n.push(I7e(i,e,s,o))}const r=i.defaultToken;return{test:function(s,o,a,l){for(const c of n)if(!c.test||c.test(s,o,a,l))return c.value;return r}}}else throw In(i,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class R7e{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let n;if(typeof t=="string")n=t;else if(t instanceof RegExp)n=t.source;else throw In(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=n.length>0&&n[0]==="^",this.name=this.name+": "+n,this.regex=HM(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")")}setAction(e,t){this.action=UM(e,this.name,t)}}function mQ(i,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={};t.languageId=i,t.includeLF=CS(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=CS(e.ignoreCase,!1),t.unicode=CS(e.unicode,!1),t.tokenPostfix=bH(e.tokenPostfix,"."+t.languageId),t.defaultToken=bH(e.defaultToken,"source"),t.usesEmbedded=!1;const n=e;n.languageId=i,n.includeLF=t.includeLF,n.ignoreCase=t.ignoreCase,n.unicode=t.unicode,n.noThrow=t.noThrow,n.usesEmbedded=t.usesEmbedded,n.stateNames=e.tokenizer,n.defaultToken=t.defaultToken;function r(o,a,l){for(const c of l){let d=c.include;if(d){if(typeof d!="string")throw In(t,"an 'include' attribute must be a string at: "+o);if(d[0]==="@"&&(d=d.substr(1)),!e.tokenizer[d])throw In(t,"include target '"+d+"' is not defined at: "+o);r(o+"."+d,a,e.tokenizer[d])}else{const u=new R7e(o);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(u.setRegex(n,c[0]),c.length>=3)if(typeof c[1]=="string")u.setAction(n,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const h=c[1];h.next=c[2],u.setAction(n,h)}else throw In(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+o);else u.setAction(n,c[1]);else{if(!c.regex)throw In(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+o);c.name&&typeof c.name=="string"&&(u.name=c.name),c.matchOnlyAtStart&&(u.matchOnlyAtLineStart=CS(c.matchOnlyAtLineStart,!1)),u.setRegex(n,c.regex),u.setAction(n,c.action)}a.push(u)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw In(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const o in e.tokenizer)if(e.tokenizer.hasOwnProperty(o)){t.start||(t.start=o);const a=e.tokenizer[o];t.tokenizer[o]=new Array,r("tokenizer."+o,t.tokenizer[o],a)}if(t.usesEmbedded=n.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw In(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const s=[];for(const o of e.brackets){let a=o;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw In(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")s.push({token:a.token+t.tokenPostfix,open:wh(t,a.open),close:wh(t,a.close)});else throw In(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=s,t.noThrow=!0,t}var E7e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function N7e(i){Z_.registerLanguage(i)}function A7e(){let i=[];return i=i.concat(Z_.getLanguages()),i}function P7e(i){return tt.get(Fn).languageIdCodec.encodeLanguageId(i)}function M7e(i,e){return tt.withServices(()=>{const n=tt.get(Fn).onDidRequestRichLanguageFeatures(r=>{r===i&&(n.dispose(),e())});return n})}function O7e(i,e){return tt.withServices(()=>{const n=tt.get(Fn).onDidRequestBasicLanguageFeatures(r=>{r===i&&(n.dispose(),e())});return n})}function F7e(i,e){if(!tt.get(Fn).isRegisteredLanguageId(i))throw new Error(`Cannot set configuration for unknown language ${i}`);return tt.get(wn).register(i,e,100)}class B7e{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n){if(typeof this._actual.tokenize=="function")return Py.adaptTokenize(this._languageId,this._actual,e,n);throw new Error("Not supported!")}tokenizeEncoded(e,t,n){const r=this._actual.tokenizeEncoded(e,n);return new cD(r.tokens,r.endState)}}class Py{constructor(e,t,n,r){this._languageId=e,this._actual=t,this._languageService=n,this._standaloneThemeService=r}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const n=[];let r=0;for(let s=0,o=e.length;s<o;s++){const a=e[s];let l=a.startIndex;s===0?l=0:l<r&&(l=r),n[s]=new A0(l,a.scopes,t),r=l}return n}static adaptTokenize(e,t,n,r){const s=t.tokenize(n,r),o=Py._toClassicTokens(s.tokens,e);let a;return s.endState.equals(r)?a=r:a=s.endState,new E3(o,a)}tokenize(e,t,n){return Py.adaptTokenize(this._languageId,this._actual,e,n)}_toBinaryTokens(e,t){const n=e.encodeLanguageId(this._languageId),r=this._standaloneThemeService.getColorTheme().tokenTheme,s=[];let o=0,a=0;for(let c=0,d=t.length;c<d;c++){const u=t[c],h=r.match(n,u.scopes)|1024;if(o>0&&s[o-1]===h)continue;let f=u.startIndex;c===0?f=0:f<a&&(f=a),s[o++]=f,s[o++]=h,a=f}const l=new Uint32Array(o);for(let c=0;c<o;c++)l[c]=s[c];return l}tokenizeEncoded(e,t,n){const r=this._actual.tokenize(e,n),s=this._toBinaryTokens(this._languageService.languageIdCodec,r.tokens);let o;return r.endState.equals(n)?o=n:o=r.endState,new cD(s,o)}}function W7e(i){return typeof i.getInitialState=="function"}function V7e(i){return"tokenizeEncoded"in i}function _Q(i){return i&&typeof i.then=="function"}function H7e(i){const e=tt.get(Ho);if(i){const t=[null];for(let n=1,r=i.length;n<r;n++)t[n]=K.fromHex(i[n]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}function bQ(i,e){return V7e(e)?new B7e(i,e):new Py(i,e,tt.get(Fn),tt.get(Ho))}function PB(i,e){const t=new mTe(()=>E7e(this,void 0,void 0,function*(){const n=yield Promise.resolve(e.create());return n?W7e(n)?bQ(i,n):new X0(tt.get(Fn),tt.get(Ho),i,mQ(i,n),tt.get(Et)):null}));return Gn.registerFactory(i,t)}function U7e(i,e){if(!tt.get(Fn).isRegisteredLanguageId(i))throw new Error(`Cannot set tokens provider for unknown language ${i}`);return _Q(e)?PB(i,{create:()=>e}):Gn.register(i,bQ(i,e))}function j7e(i,e){const t=n=>new X0(tt.get(Fn),tt.get(Ho),i,mQ(i,n),tt.get(Et));return _Q(e)?PB(i,{create:()=>e}):Gn.register(i,t(e))}function z7e(i,e){return tt.get(Fe).referenceProvider.register(i,e)}function $7e(i,e){return tt.get(Fe).renameProvider.register(i,e)}function K7e(i,e){return tt.get(Fe).signatureHelpProvider.register(i,e)}function q7e(i,e){return tt.get(Fe).hoverProvider.register(i,{provideHover:(n,r,s)=>{const o=n.getWordAtPosition(r);return Promise.resolve(e.provideHover(n,r,s)).then(a=>{if(a)return!a.range&&o&&(a.range=new D(r.lineNumber,o.startColumn,r.lineNumber,o.endColumn)),a.range||(a.range=new D(r.lineNumber,r.column,r.lineNumber,r.column)),a})}})}function G7e(i,e){return tt.get(Fe).documentSymbolProvider.register(i,e)}function Z7e(i,e){return tt.get(Fe).documentHighlightProvider.register(i,e)}function X7e(i,e){return tt.get(Fe).linkedEditingRangeProvider.register(i,e)}function Y7e(i,e){return tt.get(Fe).definitionProvider.register(i,e)}function Q7e(i,e){return tt.get(Fe).implementationProvider.register(i,e)}function J7e(i,e){return tt.get(Fe).typeDefinitionProvider.register(i,e)}function e8e(i,e){return tt.get(Fe).codeLensProvider.register(i,e)}function t8e(i,e,t){return tt.get(Fe).codeActionProvider.register(i,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,documentation:t==null?void 0:t.documentation,provideCodeActions:(r,s,o,a)=>{const c=tt.get(fd).read({resource:r.uri}).filter(d=>D.areIntersectingOrTouching(d,s));return e.provideCodeActions(r,s,{markers:c,only:o.only,trigger:o.trigger},a)},resolveCodeAction:e.resolveCodeAction})}function n8e(i,e){return tt.get(Fe).documentFormattingEditProvider.register(i,e)}function i8e(i,e){return tt.get(Fe).documentRangeFormattingEditProvider.register(i,e)}function r8e(i,e){return tt.get(Fe).onTypeFormattingEditProvider.register(i,e)}function s8e(i,e){return tt.get(Fe).linkProvider.register(i,e)}function o8e(i,e){return tt.get(Fe).completionProvider.register(i,e)}function a8e(i,e){return tt.get(Fe).colorProvider.register(i,e)}function l8e(i,e){return tt.get(Fe).foldingRangeProvider.register(i,e)}function c8e(i,e){return tt.get(Fe).declarationProvider.register(i,e)}function d8e(i,e){return tt.get(Fe).selectionRangeProvider.register(i,e)}function u8e(i,e){return tt.get(Fe).documentSemanticTokensProvider.register(i,e)}function h8e(i,e){return tt.get(Fe).documentRangeSemanticTokensProvider.register(i,e)}function f8e(i,e){return tt.get(Fe).inlineCompletionsProvider.register(i,e)}function g8e(i,e){return tt.get(Fe).inlayHintsProvider.register(i,e)}function p8e(){return{register:N7e,getLanguages:A7e,onLanguage:M7e,onLanguageEncountered:O7e,getEncodedLanguageId:P7e,setLanguageConfiguration:F7e,setColorMap:H7e,registerTokensProviderFactory:PB,setTokensProvider:U7e,setMonarchTokensProvider:j7e,registerReferenceProvider:z7e,registerRenameProvider:$7e,registerCompletionItemProvider:o8e,registerSignatureHelpProvider:K7e,registerHoverProvider:q7e,registerDocumentSymbolProvider:G7e,registerDocumentHighlightProvider:Z7e,registerLinkedEditingRangeProvider:X7e,registerDefinitionProvider:Y7e,registerImplementationProvider:Q7e,registerTypeDefinitionProvider:J7e,registerCodeLensProvider:e8e,registerCodeActionProvider:t8e,registerDocumentFormattingEditProvider:n8e,registerDocumentRangeFormattingEditProvider:i8e,registerOnTypeFormattingEditProvider:r8e,registerLinkProvider:s8e,registerColorProvider:a8e,registerFoldingRangeProvider:l8e,registerDeclarationProvider:c8e,registerSelectionRangeProvider:d8e,registerDocumentSemanticTokensProvider:u8e,registerDocumentRangeSemanticTokensProvider:h8e,registerInlineCompletionsProvider:f8e,registerInlayHintsProvider:g8e,DocumentHighlightKind:H2,CompletionItemKind:M2,CompletionItemTag:O2,CompletionItemInsertTextRule:P2,SymbolKind:uA,SymbolTag:hA,IndentAction:q2,CompletionTriggerKind:F2,SignatureHelpTriggerKind:dA,InlayHintKind:Z2,InlineCompletionTriggerKind:X2,CodeActionTriggerType:A2,FoldingRangeKind:ms,SelectedSuggestionInfo:nG}}const MB=Lt("IEditorCancelService"),vQ=new Ne("cancellableOperation",!1,p("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));Wt(MB,class{constructor(){this._tokens=new WeakMap}add(i,e){let t=this._tokens.get(i);t||(t=i.invokeWithinContext(r=>{const s=vQ.bindTo(r.get(ot)),o=new ps;return{key:s,tokens:o}}),this._tokens.set(i,t));let n;return t.key.set(!0),n=t.tokens.push(e),()=>{n&&(n(),t.key.set(!t.tokens.isEmpty()),n=void 0)}}cancel(i){const e=this._tokens.get(i);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},1);class m8e extends vi{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(n=>n.get(MB).add(e,this))}dispose(){this._unregister(),super.dispose()}}ye(new class extends sr{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:vQ})}runEditorCommand(i,e){i.get(MB).cancel(e)}});let yQ=class jM{constructor(e,t){if(this.flags=t,this.flags&1){const n=e.getModel();this.modelVersionId=n?jg("{0}#{1}",n.uri.toString(),n.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof jM))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new jM(e,this.flags))}};class Xh extends m8e{constructor(e,t,n,r){super(e,r),this._listener=new ae,t&4&&this._listener.add(e.onDidChangeCursorPosition(s=>{(!n||!D.containsPosition(n,s.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(s=>{(!n||!D.containsRange(n,s.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(s=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(s=>this.cancel())),this._listener.add(e.onDidChangeModelContent(s=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class OB extends vi{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}function td(i){return i&&typeof i.getEditorType=="function"?i.getEditorType()===VC.ICodeEditor:!1}function CQ(i){return i&&typeof i.getEditorType=="function"?i.getEditorType()===VC.IDiffEditor:!1}function _8e(i){return!!i&&typeof i=="object"&&typeof i.onDidChangeActiveEditor=="function"}function wQ(i){return td(i)?i:CQ(i)?i.getModifiedEditor():_8e(i)&&td(i.activeCodeEditor)?i.activeCodeEditor:null}class p1{static _handleEolEdits(e,t){let n;const r=[];for(const s of t)typeof s.eol=="number"&&(n=s.eol),s.range&&typeof s.text=="string"&&r.push(s);return typeof n=="number"&&e.hasModel()&&e.getModel().pushEOL(n),r}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const n=e.getModel(),r=n.validateRange(t.range);return n.getFullModelRange().equalsRange(r)}static execute(e,t,n){n&&e.pushUndoStop();const r=Hl.capture(e),s=p1._handleEolEdits(e,t);s.length===1&&p1._isFullModelReplaceEdit(e,s[0])?e.executeEdits("formatEditsCommand",s.map(o=>jn.replace(D.lift(o.range),o.text))):e.executeEdits("formatEditsCommand",s.map(o=>jn.replaceMove(D.lift(o.range),o.text))),n&&e.pushUndoStop(),r.restoreRelativeVerticalPositionOfCursor(e)}}class yH{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}class b8e{constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(yH.toKey(e))}has(e){return this._set.has(yH.toKey(e))}}var Ul=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function FB(i){if(i=i.filter(r=>r.range),!i.length)return;let{range:e}=i[0];for(let r=1;r<i.length;r++)e=D.plusRange(e,i[r].range);const{startLineNumber:t,endLineNumber:n}=e;t===n?i.length===1?jr(p("hint11","Made 1 formatting edit on line {0}",t)):jr(p("hintn1","Made {0} formatting edits on line {1}",i.length,t)):i.length===1?jr(p("hint1n","Made 1 formatting edit between lines {0} and {1}",t,n)):jr(p("hintnn","Made {0} formatting edits between lines {1} and {2}",i.length,t,n))}function SQ(i,e,t){const n=[],r=new b8e,s=i.ordered(t);for(const a of s)n.push(a),a.extensionId&&r.add(a.extensionId);const o=e.ordered(t);for(const a of o){if(a.extensionId){if(r.has(a.extensionId))continue;r.add(a.extensionId)}n.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,c,d){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),c,d)}})}return n}class rp{static setFormatterSelector(e){return{dispose:rp._selectors.unshift(e)}}static select(e,t,n){return Ul(this,void 0,void 0,function*(){if(e.length===0)return;const r=St.first(rp._selectors);if(r)return yield r(e,t,n)})}}rp._selectors=new ps;function xQ(i,e,t,n,r,s){return Ul(this,void 0,void 0,function*(){const o=i.get(rt),{documentRangeFormattingEditProvider:a}=i.get(Fe),l=td(e)?e.getModel():e,c=a.ordered(l),d=yield rp.select(c,l,n);d&&(r.report(d),yield o.invokeFunction(v8e,d,e,t,s))})}function v8e(i,e,t,n,r){var s,o;return Ul(this,void 0,void 0,function*(){const a=i.get(Xa),l=i.get(Vo);let c,d;td(t)?(c=t.getModel(),d=new Xh(t,5,void 0,r)):(c=t,d=new OB(t,r));const u=[];let h=0;for(const b of v3(n).sort(D.compareRangesUsingStarts))h>0&&D.areIntersectingOrTouching(u[h-1],b)?u[h-1]=D.fromPositions(u[h-1].getStartPosition(),b.getEndPosition()):h=u.push(b);const f=b=>Ul(this,void 0,void 0,function*(){var v,C;l.trace("[format][provideDocumentRangeFormattingEdits] (request)",(v=e.extensionId)===null||v===void 0?void 0:v.value,b);const w=(yield e.provideDocumentRangeFormattingEdits(c,b,c.getFormattingOptions(),d.token))||[];return l.trace("[format][provideDocumentRangeFormattingEdits] (response)",(C=e.extensionId)===null||C===void 0?void 0:C.value,w),w}),g=(b,v)=>{if(!b.length||!v.length)return!1;const C=b.reduce((w,S)=>D.plusRange(w,S.range),b[0].range);if(!v.some(w=>D.intersectRanges(C,w.range)))return!1;for(const w of b)for(const S of v)if(D.intersectRanges(w.range,S.range))return!0;return!1},m=[],y=[];try{if(typeof e.provideDocumentRangesFormattingEdits=="function"){l.trace("[format][provideDocumentRangeFormattingEdits] (request)",(s=e.extensionId)===null||s===void 0?void 0:s.value,u);const b=(yield e.provideDocumentRangesFormattingEdits(c,u,c.getFormattingOptions(),d.token))||[];l.trace("[format][provideDocumentRangeFormattingEdits] (response)",(o=e.extensionId)===null||o===void 0?void 0:o.value,b),y.push(b)}else{for(const b of u){if(d.token.isCancellationRequested)return!0;y.push(yield f(b))}for(let b=0;b<u.length;++b)for(let v=b+1;v<u.length;++v){if(d.token.isCancellationRequested)return!0;if(g(y[b],y[v])){const C=D.plusRange(u[b],u[v]),w=yield f(C);u.splice(v,1),u.splice(b,1),u.push(C),y.splice(v,1),y.splice(b,1),y.push(w),b=0,v=0}}}for(const b of y){if(d.token.isCancellationRequested)return!0;const v=yield a.computeMoreMinimalEdits(c.uri,b);v&&m.push(...v)}}finally{d.dispose()}if(m.length===0)return!1;if(td(t))p1.execute(t,m,!0),FB(m),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:b}]=m,v=new Be(b.startLineNumber,b.startColumn,b.endLineNumber,b.endColumn);c.pushEditOperations([v],m.map(C=>({text:C.text,range:D.lift(C.range),forceMoveMarkers:!0})),C=>{for(const{range:w}of C)if(D.areIntersectingOrTouching(w,v))return[new Be(w.startLineNumber,w.startColumn,w.endLineNumber,w.endColumn)];return null})}return!0})}function y8e(i,e,t,n,r){return Ul(this,void 0,void 0,function*(){const s=i.get(rt),o=i.get(Fe),a=td(e)?e.getModel():e,l=SQ(o.documentFormattingEditProvider,o.documentRangeFormattingEditProvider,a),c=yield rp.select(l,a,t);c&&(n.report(c),yield s.invokeFunction(C8e,c,e,t,r))})}function C8e(i,e,t,n,r){return Ul(this,void 0,void 0,function*(){const s=i.get(Xa);let o,a;td(t)?(o=t.getModel(),a=new Xh(t,5,void 0,r)):(o=t,a=new OB(t,r));let l;try{const c=yield e.provideDocumentFormattingEdits(o,o.getFormattingOptions(),a.token);if(l=yield s.computeMoreMinimalEdits(o.uri,c),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!l||l.length===0)return!1;if(td(t))p1.execute(t,l,n!==2),n!==2&&(FB(l),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1));else{const[{range:c}]=l,d=new Be(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn);o.pushEditOperations([d],l.map(u=>({text:u.text,range:D.lift(u.range),forceMoveMarkers:!0})),u=>{for(const{range:h}of u)if(D.areIntersectingOrTouching(h,d))return[new Be(h.startLineNumber,h.startColumn,h.endLineNumber,h.endColumn)];return null})}return!0})}function w8e(i,e,t,n,r,s){return Ul(this,void 0,void 0,function*(){const o=e.documentRangeFormattingEditProvider.ordered(t);for(const a of o){const l=yield Promise.resolve(a.provideDocumentRangeFormattingEdits(t,n,r,s)).catch(Ii);if(zr(l))return yield i.computeMoreMinimalEdits(t.uri,l)}})}function S8e(i,e,t,n,r){return Ul(this,void 0,void 0,function*(){const s=SQ(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const o of s){const a=yield Promise.resolve(o.provideDocumentFormattingEdits(t,n,r)).catch(Ii);if(zr(a))return yield i.computeMoreMinimalEdits(t.uri,a)}})}function TQ(i,e,t,n,r,s,o){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(r)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,n,r,s,o)).catch(Ii).then(l=>i.computeMoreMinimalEdits(t.uri,l))}Bt.registerCommand("_executeFormatRangeProvider",function(i,...e){return Ul(this,void 0,void 0,function*(){const[t,n,r]=e;dn(Ye.isUri(t)),dn(D.isIRange(n));const s=i.get(Vs),o=i.get(Xa),a=i.get(Fe),l=yield s.createModelReference(t);try{return w8e(o,a,l.object.textEditorModel,D.lift(n),r,xt.None)}finally{l.dispose()}})});Bt.registerCommand("_executeFormatDocumentProvider",function(i,...e){return Ul(this,void 0,void 0,function*(){const[t,n]=e;dn(Ye.isUri(t));const r=i.get(Vs),s=i.get(Xa),o=i.get(Fe),a=yield r.createModelReference(t);try{return S8e(s,o,a.object.textEditorModel,n,xt.None)}finally{a.dispose()}})});Bt.registerCommand("_executeFormatOnTypeProvider",function(i,...e){return Ul(this,void 0,void 0,function*(){const[t,n,r,s]=e;dn(Ye.isUri(t)),dn(U.isIPosition(n)),dn(typeof r=="string");const o=i.get(Vs),a=i.get(Xa),l=i.get(Fe),c=yield o.createModelReference(t);try{return TQ(a,l,c.object.textEditorModel,U.lift(n),r,s,xt.None)}finally{c.dispose()}})});Kl.wrappingIndent.defaultValue=0;Kl.glyphMargin.defaultValue=!1;Kl.autoIndent.defaultValue=3;Kl.overviewRulerLanes.defaultValue=2;rp.setFormatterSelector((i,e,t)=>Promise.resolve(i[0]));const xs=iG();xs.editor=T7e();xs.languages=p8e();const x8e=xs.CancellationTokenSource,T8e=xs.Emitter,k8e=xs.KeyCode,L8e=xs.KeyMod,D8e=xs.Position,I8e=xs.Range,R8e=xs.Selection,E8e=xs.SelectionDirection,N8e=xs.MarkerSeverity,A8e=xs.MarkerTag,kQ=xs.Uri,P8e=xs.Token,lw=xs.editor,Uk=xs.languages,tN=globalThis.MonacoEnvironment;(tN!=null&&tN.globalAPI||typeof define=="function"&&define.amd)&&(globalThis.monaco=xs);typeof globalThis.require<"u"&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const cw=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:x8e,Emitter:T8e,KeyCode:k8e,KeyMod:L8e,MarkerSeverity:N8e,MarkerTag:A8e,Position:D8e,Range:I8e,Selection:R8e,SelectionDirection:E8e,Token:P8e,Uri:kQ,editor:lw,languages:Uk},Symbol.toStringTag,{value:"Module"})),M8e="modulepreload",O8e=function(i){return"/"+i},CH={},He=function(e,t,n){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=O8e(s),s in CH)return;CH[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let d=r.length-1;d>=0;d--){const u=r[d];if(u.href===s&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":M8e,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((d,u)=>{c.addEventListener("load",d),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var F8e=Object.defineProperty,B8e=Object.getOwnPropertyDescriptor,W8e=Object.getOwnPropertyNames,V8e=Object.prototype.hasOwnProperty,wH=(i,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of W8e(e))!V8e.call(i,r)&&r!==t&&F8e(i,r,{get:()=>e[r],enumerable:!(n=B8e(e,r))||n.enumerable});return i},H8e=(i,e,t)=>(wH(i,e,"default"),t&&wH(t,e,"default")),_v={};H8e(_v,cw);var LQ={},nN={},DQ=class{constructor(i){ei(this,"_languageId");ei(this,"_loadingTriggered");ei(this,"_lazyLoadPromise");ei(this,"_lazyLoadPromiseResolve");ei(this,"_lazyLoadPromiseReject");this._languageId=i,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((e,t)=>{this._lazyLoadPromiseResolve=e,this._lazyLoadPromiseReject=t})}static getOrCreate(i){return nN[i]||(nN[i]=new DQ(i)),nN[i]}load(){return this._loadingTriggered||(this._loadingTriggered=!0,LQ[this._languageId].loader().then(i=>this._lazyLoadPromiseResolve(i),i=>this._lazyLoadPromiseReject(i))),this._lazyLoadPromise}};function Ke(i){const e=i.id;LQ[e]=i,_v.languages.register(i);const t=DQ.getOrCreate(e);_v.languages.registerTokensProviderFactory(e,{create:async()=>(await t.load()).language}),_v.languages.onLanguageEncountered(e,async()=>{const n=await t.load();_v.languages.setLanguageConfiguration(e,n.conf)})}Ke({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>He(()=>import("./abap-e5f08dc1.js"),[])});Ke({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>He(()=>import("./apex-fc8a734c.js"),[])});Ke({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>He(()=>import("./azcli-c4358445.js"),[])});Ke({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>He(()=>import("./bat-eaac827b.js"),[])});Ke({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>He(()=>import("./bicep-9f8671bb.js"),[])});Ke({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>He(()=>import("./cameligo-ff939f45.js"),[])});Ke({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>He(()=>import("./clojure-4a1da11c.js"),[])});Ke({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>He(()=>import("./coffee-97023918.js"),[])});Ke({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>He(()=>import("./cpp-a410d69a.js"),[])});Ke({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>He(()=>import("./cpp-a410d69a.js"),[])});Ke({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>He(()=>import("./csharp-0765aa28.js"),[])});Ke({id:"csp",extensions:[],aliases:["CSP","csp"],loader:()=>He(()=>import("./csp-dba4fa86.js"),[])});Ke({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>He(()=>import("./css-f18eed00.js"),[])});Ke({id:"cypher",extensions:[".cypher",".cyp"],aliases:["Cypher","OpenCypher"],loader:()=>He(()=>import("./cypher-4b1a5b20.js"),[])});Ke({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>He(()=>import("./dart-c70c4314.js"),[])});Ke({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>He(()=>import("./dockerfile-ff7f0401.js"),[])});Ke({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>He(()=>import("./ecl-3129e183.js"),[])});Ke({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>He(()=>import("./elixir-ac388b4d.js"),[])});Ke({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>He(()=>import("./flow9-049a8a6c.js"),[])});Ke({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>He(()=>import("./fsharp-535d9fe2.js"),[])});Ke({id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"],aliases:["FreeMarker2","Apache FreeMarker2"],loader:()=>He(()=>import("./freemarker2-50665216.js"),[]).then(i=>i.TagAutoInterpolationDollar)});Ke({id:"freemarker2.tag-angle.interpolation-dollar",aliases:["FreeMarker2 (Angle/Dollar)","Apache FreeMarker2 (Angle/Dollar)"],loader:()=>He(()=>import("./freemarker2-50665216.js"),[]).then(i=>i.TagAngleInterpolationDollar)});Ke({id:"freemarker2.tag-bracket.interpolation-dollar",aliases:["FreeMarker2 (Bracket/Dollar)","Apache FreeMarker2 (Bracket/Dollar)"],loader:()=>He(()=>import("./freemarker2-50665216.js"),[]).then(i=>i.TagBracketInterpolationDollar)});Ke({id:"freemarker2.tag-angle.interpolation-bracket",aliases:["FreeMarker2 (Angle/Bracket)","Apache FreeMarker2 (Angle/Bracket)"],loader:()=>He(()=>import("./freemarker2-50665216.js"),[]).then(i=>i.TagAngleInterpolationBracket)});Ke({id:"freemarker2.tag-bracket.interpolation-bracket",aliases:["FreeMarker2 (Bracket/Bracket)","Apache FreeMarker2 (Bracket/Bracket)"],loader:()=>He(()=>import("./freemarker2-50665216.js"),[]).then(i=>i.TagBracketInterpolationBracket)});Ke({id:"freemarker2.tag-auto.interpolation-dollar",aliases:["FreeMarker2 (Auto/Dollar)","Apache FreeMarker2 (Auto/Dollar)"],loader:()=>He(()=>import("./freemarker2-50665216.js"),[]).then(i=>i.TagAutoInterpolationDollar)});Ke({id:"freemarker2.tag-auto.interpolation-bracket",aliases:["FreeMarker2 (Auto/Bracket)","Apache FreeMarker2 (Auto/Bracket)"],loader:()=>He(()=>import("./freemarker2-50665216.js"),[]).then(i=>i.TagAutoInterpolationBracket)});Ke({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>He(()=>import("./go-d4bfa116.js"),[])});Ke({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>He(()=>import("./graphql-e5a73eb7.js"),[])});Ke({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>He(()=>import("./handlebars-75a9ed4e.js"),[])});Ke({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>He(()=>import("./hcl-8b69c899.js"),[])});Ke({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>He(()=>import("./html-48dcb648.js"),[])});Ke({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>He(()=>import("./ini-83ae2a3a.js"),[])});Ke({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>He(()=>import("./java-4806d9f5.js"),[])});Ke({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>He(()=>import("./javascript-2d8c9a0e.js"),["assets/javascript-2d8c9a0e.js","assets/typescript-98ad60c2.js"])});Ke({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>He(()=>import("./julia-334b5fb9.js"),[])});Ke({id:"kotlin",extensions:[".kt",".kts"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>He(()=>import("./kotlin-ed14cfc6.js"),[])});Ke({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>He(()=>import("./less-58d9b66b.js"),[])});Ke({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>He(()=>import("./lexon-8bf535e2.js"),[])});Ke({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>He(()=>import("./lua-96829d0e.js"),[])});Ke({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>He(()=>import("./liquid-fc44a5a1.js"),[])});Ke({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>He(()=>import("./m3-815f612a.js"),[])});Ke({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>He(()=>import("./markdown-1cddbf33.js"),[])});Ke({id:"mdx",extensions:[".mdx"],aliases:["MDX","mdx"],loader:()=>He(()=>import("./mdx-bb1a6afe.js"),[])});Ke({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>He(()=>import("./mips-361940ec.js"),[])});Ke({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>He(()=>import("./msdax-b98f6248.js"),[])});Ke({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>He(()=>import("./mysql-b4d05809.js"),[])});Ke({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>He(()=>import("./objective-c-64e6f89b.js"),[])});Ke({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>He(()=>import("./pascal-e1cbffd7.js"),[])});Ke({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>He(()=>import("./pascaligo-013c6c0b.js"),[])});Ke({id:"perl",extensions:[".pl",".pm"],aliases:["Perl","pl"],loader:()=>He(()=>import("./perl-d9423546.js"),[])});Ke({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>He(()=>import("./pgsql-423e077d.js"),[])});Ke({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>He(()=>import("./php-fb65b6b4.js"),[])});Ke({id:"pla",extensions:[".pla"],loader:()=>He(()=>import("./pla-09e93e1b.js"),[])});Ke({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>He(()=>import("./postiats-429bd8e8.js"),[])});Ke({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>He(()=>import("./powerquery-0470a494.js"),[])});Ke({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>He(()=>import("./powershell-b433b622.js"),[])});Ke({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>He(()=>import("./protobuf-3e557056.js"),[])});Ke({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>He(()=>import("./pug-b7980504.js"),[])});Ke({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>He(()=>import("./python-9b760711.js"),[])});Ke({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>He(()=>import("./qsharp-eed62033.js"),[])});Ke({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>He(()=>import("./r-8ce27f67.js"),[])});Ke({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>He(()=>import("./razor-8aaf9941.js"),[])});Ke({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>He(()=>import("./redis-aec7cdf4.js"),[])});Ke({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>He(()=>import("./redshift-7d933e7a.js"),[])});Ke({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>He(()=>import("./restructuredtext-a9e4c4cc.js"),[])});Ke({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>He(()=>import("./ruby-c9974e35.js"),[])});Ke({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>He(()=>import("./rust-9669a673.js"),[])});Ke({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>He(()=>import("./sb-b221a0fc.js"),[])});Ke({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>He(()=>import("./scala-9222416a.js"),[])});Ke({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>He(()=>import("./scheme-86110af1.js"),[])});Ke({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>He(()=>import("./scss-7da24d39.js"),[])});Ke({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>He(()=>import("./shell-0ca4f4ad.js"),[])});Ke({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>He(()=>import("./solidity-0072896b.js"),[])});Ke({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>He(()=>import("./sophia-bc45fa87.js"),[])});Ke({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>He(()=>import("./sparql-28fc150c.js"),[])});Ke({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>He(()=>import("./sql-96f7b353.js"),[])});Ke({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib",".TcPOU",".TcDUT",".TcGVL",".TcIO"],aliases:["StructuredText","scl","stl"],loader:()=>He(()=>import("./st-c45997f6.js"),[])});Ke({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>He(()=>import("./swift-3b85cc8e.js"),[])});Ke({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>He(()=>import("./systemverilog-2ec460af.js"),[])});Ke({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>He(()=>import("./systemverilog-2ec460af.js"),[])});Ke({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>He(()=>import("./tcl-37e129b8.js"),[])});Ke({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>He(()=>import("./twig-1734ec31.js"),[])});Ke({id:"typescript",extensions:[".ts",".tsx",".cts",".mts"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>He(()=>import("./typescript-98ad60c2.js"),[])});Ke({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>He(()=>import("./vb-77962f32.js"),[])});Ke({id:"wgsl",extensions:[".wgsl"],aliases:["WebGPU Shading Language","WGSL","wgsl"],loader:()=>He(()=>import("./wgsl-e67d25e4.js"),[])});Ke({id:"xml",extensions:[".xml",".xsd",".dtd",".ascx",".csproj",".config",".props",".targets",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xslt",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>He(()=>import("./xml-7335ec22.js"),[])});Ke({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>He(()=>import("./yaml-37116eb1.js"),[])});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var U8e=Object.defineProperty,j8e=Object.getOwnPropertyDescriptor,z8e=Object.getOwnPropertyNames,$8e=Object.prototype.hasOwnProperty,SH=(i,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of z8e(e))!$8e.call(i,r)&&r!==t&&U8e(i,r,{get:()=>e[r],enumerable:!(n=j8e(e,r))||n.enumerable});return i},K8e=(i,e,t)=>(SH(i,e,"default"),t&&SH(t,e,"default")),ib={};K8e(ib,cw);var BB=class{constructor(e,t,n){ei(this,"_onDidChange",new ib.Emitter);ei(this,"_options");ei(this,"_modeConfiguration");ei(this,"_languageId");this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(e){this.setOptions(e)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},WB={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0},format:{newlineBetweenSelectors:!0,newlineBetweenRules:!0,spaceAroundSelectorSeparator:!1,braceStyle:"collapse",maxPreserveNewLines:void 0,preserveNewLines:!0}},VB={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0},IQ=new BB("css",WB,VB),RQ=new BB("scss",WB,VB),EQ=new BB("less",WB,VB);ib.languages.css={cssDefaults:IQ,lessDefaults:EQ,scssDefaults:RQ};function HB(){return He(()=>import("./cssMode-a442f877.js"),[])}ib.languages.onLanguage("less",()=>{HB().then(i=>i.setupMode(EQ))});ib.languages.onLanguage("scss",()=>{HB().then(i=>i.setupMode(RQ))});ib.languages.onLanguage("css",()=>{HB().then(i=>i.setupMode(IQ))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var q8e=Object.defineProperty,G8e=Object.getOwnPropertyDescriptor,Z8e=Object.getOwnPropertyNames,X8e=Object.prototype.hasOwnProperty,xH=(i,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Z8e(e))!X8e.call(i,r)&&r!==t&&q8e(i,r,{get:()=>e[r],enumerable:!(n=G8e(e,r))||n.enumerable});return i},Y8e=(i,e,t)=>(xH(i,e,"default"),t&&xH(t,e,"default")),wI={};Y8e(wI,cw);var Q8e=class{constructor(e,t,n){ei(this,"_onDidChange",new wI.Emitter);ei(this,"_options");ei(this,"_modeConfiguration");ei(this,"_languageId");this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},J8e={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},SI={format:J8e,suggest:{},data:{useDefaultDataProvider:!0}};function xI(i){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:i===Jv,documentFormattingEdits:i===Jv,documentRangeFormattingEdits:i===Jv}}var Jv="html",TH="handlebars",kH="razor",NQ=TI(Jv,SI,xI(Jv)),e6e=NQ.defaults,AQ=TI(TH,SI,xI(TH)),t6e=AQ.defaults,PQ=TI(kH,SI,xI(kH)),n6e=PQ.defaults;wI.languages.html={htmlDefaults:e6e,razorDefaults:n6e,handlebarDefaults:t6e,htmlLanguageService:NQ,handlebarLanguageService:AQ,razorLanguageService:PQ,registerHTMLLanguageService:TI};function i6e(){return He(()=>import("./htmlMode-276102b9.js"),[])}function TI(i,e=SI,t=xI(i)){const n=new Q8e(i,e,t);let r;const s=wI.languages.onLanguage(i,async()=>{r=(await i6e()).setupMode(n)});return{defaults:n,dispose(){s.dispose(),r==null||r.dispose(),r=void 0}}}/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var r6e=Object.defineProperty,s6e=Object.getOwnPropertyDescriptor,o6e=Object.getOwnPropertyNames,a6e=Object.prototype.hasOwnProperty,LH=(i,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of o6e(e))!a6e.call(i,r)&&r!==t&&r6e(i,r,{get:()=>e[r],enumerable:!(n=s6e(e,r))||n.enumerable});return i},l6e=(i,e,t)=>(LH(i,e,"default"),t&&LH(t,e,"default")),dw={};l6e(dw,cw);var c6e=class{constructor(e,t,n){ei(this,"_onDidChange",new dw.Emitter);ei(this,"_diagnosticsOptions");ei(this,"_modeConfiguration");ei(this,"_languageId");this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},d6e={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},u6e={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},MQ=new c6e("json",d6e,u6e);dw.languages.json={jsonDefaults:MQ};function h6e(){return He(()=>import("./jsonMode-3e190171.js"),[])}dw.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});dw.languages.onLanguage("json",()=>{h6e().then(i=>i.setupMode(MQ))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.44.0(3e047efd345ff102c8c61b5398fb30845aaac166)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var f6e=Object.defineProperty,g6e=Object.getOwnPropertyDescriptor,p6e=Object.getOwnPropertyNames,m6e=Object.prototype.hasOwnProperty,DH=(i,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of p6e(e))!m6e.call(i,r)&&r!==t&&f6e(i,r,{get:()=>e[r],enumerable:!(n=g6e(e,r))||n.enumerable});return i},_6e=(i,e,t)=>(DH(i,e,"default"),t&&DH(t,e,"default")),b6e="5.0.2",m1={};_6e(m1,cw);var OQ=(i=>(i[i.None=0]="None",i[i.CommonJS=1]="CommonJS",i[i.AMD=2]="AMD",i[i.UMD=3]="UMD",i[i.System=4]="System",i[i.ES2015=5]="ES2015",i[i.ESNext=99]="ESNext",i))(OQ||{}),FQ=(i=>(i[i.None=0]="None",i[i.Preserve=1]="Preserve",i[i.React=2]="React",i[i.ReactNative=3]="ReactNative",i[i.ReactJSX=4]="ReactJSX",i[i.ReactJSXDev=5]="ReactJSXDev",i))(FQ||{}),BQ=(i=>(i[i.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",i[i.LineFeed=1]="LineFeed",i))(BQ||{}),WQ=(i=>(i[i.ES3=0]="ES3",i[i.ES5=1]="ES5",i[i.ES2015=2]="ES2015",i[i.ES2016=3]="ES2016",i[i.ES2017=4]="ES2017",i[i.ES2018=5]="ES2018",i[i.ES2019=6]="ES2019",i[i.ES2020=7]="ES2020",i[i.ESNext=99]="ESNext",i[i.JSON=100]="JSON",i[i.Latest=99]="Latest",i))(WQ||{}),VQ=(i=>(i[i.Classic=1]="Classic",i[i.NodeJs=2]="NodeJs",i))(VQ||{}),HQ=class{constructor(i,e,t,n,r){ei(this,"_onDidChange",new m1.Emitter);ei(this,"_onDidExtraLibsChange",new m1.Emitter);ei(this,"_extraLibs");ei(this,"_removedExtraLibs");ei(this,"_eagerModelSync");ei(this,"_compilerOptions");ei(this,"_diagnosticsOptions");ei(this,"_workerOptions");ei(this,"_onDidExtraLibsChangeTimeout");ei(this,"_inlayHintsOptions");ei(this,"_modeConfiguration");this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(i),this.setDiagnosticsOptions(e),this.setWorkerOptions(t),this.setInlayHintsOptions(n),this.setModeConfiguration(r),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get modeConfiguration(){return this._modeConfiguration}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(i,e){let t;if(typeof e>"u"?t=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:t=e,this._extraLibs[t]&&this._extraLibs[t].content===i)return{dispose:()=>{}};let n=1;return this._removedExtraLibs[t]&&(n=this._removedExtraLibs[t]+1),this._extraLibs[t]&&(n=this._extraLibs[t].version+1),this._extraLibs[t]={content:i,version:n},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let r=this._extraLibs[t];r&&r.version===n&&(delete this._extraLibs[t],this._removedExtraLibs[t]=n,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(i){for(const e in this._extraLibs)this._removedExtraLibs[e]=this._extraLibs[e].version;if(this._extraLibs=Object.create(null),i&&i.length>0)for(const e of i){const t=e.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,n=e.content;let r=1;this._removedExtraLibs[t]&&(r=this._removedExtraLibs[t]+1),this._extraLibs[t]={content:n,version:r}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(i){this._compilerOptions=i||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(i){this._diagnosticsOptions=i||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(i){this._workerOptions=i||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(i){this._inlayHintsOptions=i||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(i){}setEagerModelSync(i){this._eagerModelSync=i}getEagerModelSync(){return this._eagerModelSync}setModeConfiguration(i){this._modeConfiguration=i||Object.create(null),this._onDidChange.fire(void 0)}},v6e=b6e,UQ={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,diagnostics:!0,documentRangeFormattingEdits:!0,signatureHelp:!0,onTypeFormattingEdits:!0,codeActions:!0,inlayHints:!0},jQ=new HQ({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{},UQ),zQ=new HQ({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{},UQ),y6e=()=>kI().then(i=>i.getTypeScriptWorker()),C6e=()=>kI().then(i=>i.getJavaScriptWorker());m1.languages.typescript={ModuleKind:OQ,JsxEmit:FQ,NewLineKind:BQ,ScriptTarget:WQ,ModuleResolutionKind:VQ,typescriptVersion:v6e,typescriptDefaults:jQ,javascriptDefaults:zQ,getTypeScriptWorker:y6e,getJavaScriptWorker:C6e};function kI(){return He(()=>import("./tsMode-ef558a47.js"),[])}m1.languages.onLanguage("typescript",()=>kI().then(i=>i.setupTypeScript(jQ)));m1.languages.onLanguage("javascript",()=>kI().then(i=>i.setupJavaScript(zQ)));class w6e extends Bo{constructor(){super({id:"diffEditor.toggleCollapseUnchangedRegions",title:{value:p("toggleCollapseUnchangedRegions","Toggle Collapse Unchanged Regions"),original:"Toggle Collapse Unchanged Regions"},icon:me.map,toggled:re.has("config.diffEditor.hideUnchangedRegions.enabled"),precondition:re.has("isInDiffEditor"),menu:{when:re.has("isInDiffEditor"),id:E.EditorTitle,order:22,group:"navigation"}})}run(e,...t){const n=e.get(Et),r=!n.getValue("diffEditor.hideUnchangedRegions.enabled");n.updateValue("diffEditor.hideUnchangedRegions.enabled",r)}}Nn(w6e);class $Q extends Bo{constructor(){super({id:"diffEditor.toggleShowMovedCodeBlocks",title:{value:p("toggleShowMovedCodeBlocks","Toggle Show Moved Code Blocks"),original:"Toggle Show Moved Code Blocks"},precondition:re.has("isInDiffEditor")})}run(e,...t){const n=e.get(Et),r=!n.getValue("diffEditor.experimental.showMoves");n.updateValue("diffEditor.experimental.showMoves",r)}}Nn($Q);class KQ extends Bo{constructor(){super({id:"diffEditor.toggleUseInlineViewWhenSpaceIsLimited",title:{value:p("toggleUseInlineViewWhenSpaceIsLimited","Toggle Use Inline View When Space Is Limited"),original:"Toggle Use Inline View When Space Is Limited"},precondition:re.has("isInDiffEditor")})}run(e,...t){const n=e.get(Et),r=!n.getValue("diffEditor.useInlineViewWhenSpaceIsLimited");n.updateValue("diffEditor.useInlineViewWhenSpaceIsLimited",r)}}Nn(KQ);pr.appendMenuItem(E.EditorTitle,{command:{id:new KQ().desc.id,title:p("useInlineViewWhenSpaceIsLimited","Use Inline View When Space Is Limited"),toggled:re.has("config.diffEditor.useInlineViewWhenSpaceIsLimited"),precondition:re.has("isInDiffEditor")},order:11,group:"1_diff",when:re.and(N.diffEditorRenderSideBySideInlineBreakpointReached,re.has("isInDiffEditor"))});pr.appendMenuItem(E.EditorTitle,{command:{id:new $Q().desc.id,title:p("showMoves","Show Moved Code Blocks"),icon:me.move,toggled:K1.create("config.diffEditor.experimental.showMoves",!0),precondition:re.has("isInDiffEditor")},order:10,group:"1_diff",when:re.has("isInDiffEditor")});const LI={value:p("diffEditor","Diff Editor"),original:"Diff Editor"};class S6e extends Gl{constructor(){super({id:"diffEditor.switchSide",title:{value:p("switchSide","Switch Side"),original:"Switch Side"},icon:me.arrowSwap,precondition:re.has("isInDiffEditor"),f1:!0,category:LI})}runEditorCommand(e,t,n){const r=sb(e);if(r instanceof ip){if(n&&n.dryRun)return{destinationSelection:r.mapToOtherSide().destinationSelection};r.switchSide()}}}Nn(S6e);class x6e extends Gl{constructor(){super({id:"diffEditor.exitCompareMove",title:{value:p("exitCompareMove","Exit Compare Move"),original:"Exit Compare Move"},icon:me.close,precondition:N.comparingMovedCode,f1:!1,category:LI,keybinding:{weight:1e4,primary:9}})}runEditorCommand(e,t,...n){const r=sb(e);r instanceof ip&&r.exitCompareMove()}}Nn(x6e);class T6e extends Gl{constructor(){super({id:"diffEditor.collapseAllUnchangedRegions",title:{value:p("collapseAllUnchangedRegions","Collapse All Unchanged Regions"),original:"Collapse All Unchanged Regions"},icon:me.fold,precondition:re.has("isInDiffEditor"),f1:!0,category:LI})}runEditorCommand(e,t,...n){const r=sb(e);r instanceof ip&&r.collapseAllUnchangedRegions()}}Nn(T6e);class k6e extends Gl{constructor(){super({id:"diffEditor.showAllUnchangedRegions",title:{value:p("showAllUnchangedRegions","Show All Unchanged Regions"),original:"Show All Unchanged Regions"},icon:me.unfold,precondition:re.has("isInDiffEditor"),f1:!0,category:LI})}runEditorCommand(e,t,...n){const r=sb(e);r instanceof ip&&r.showAllUnchangedRegions()}}Nn(k6e);const qQ={value:p("accessibleDiffViewer","Accessible Diff Viewer"),original:"Accessible Diff Viewer"};class rb extends Bo{constructor(){super({id:rb.id,title:{value:p("editor.action.accessibleDiffViewer.next","Go to Next Difference"),original:"Go to Next Difference"},category:qQ,precondition:re.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0})}run(e){const t=sb(e);t==null||t.accessibleDiffViewerNext()}}rb.id="editor.action.accessibleDiffViewer.next";pr.appendMenuItem(E.EditorTitle,{command:{id:rb.id,title:p("Open Accessible Diff Viewer","Open Accessible Diff Viewer"),precondition:re.has("isInDiffEditor")},order:10,group:"2_diff",when:re.and(N.accessibleDiffViewerVisible.negate(),re.has("isInDiffEditor"))});class uw extends Bo{constructor(){super({id:uw.id,title:{value:p("editor.action.accessibleDiffViewer.prev","Go to Previous Difference"),original:"Go to Previous Difference"},category:qQ,precondition:re.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0})}run(e){const t=sb(e);t==null||t.accessibleDiffViewerPrev()}}uw.id="editor.action.accessibleDiffViewer.prev";function sb(i){var e;const t=i.get(Jt),n=t.listDiffEditors(),r=(e=t.getFocusedCodeEditor())!==null&&e!==void 0?e:t.getActiveCodeEditor();if(!r)return null;for(let o=0,a=n.length;o<a;o++){const l=n[o];if(l.getModifiedEditor().getId()===r.getId()||l.getOriginalEditor().getId()===r.getId())return l}const s=Ma();if(s)for(const o of n){const a=o.getContainerDomNode();if(L6e(a,s))return o}return null}function L6e(i,e){let t=e;for(;t;){if(t===i)return!0;t=t.parentElement}return!1}Bt.registerCommandAlias("editor.action.diffReview.next",rb.id);Nn(rb);Bt.registerCommandAlias("editor.action.diffReview.prev",uw.id);Nn(uw);var D6e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},I6e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},DI=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},zM;const II=new Ne("selectionAnchorSet",!1);let gu=zM=class{static get(e){return e.getContribution(zM.ID)}constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=II.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition();this.editor.changeDecorations(t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(Be.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:new Lr().appendText(p("selectionAnchor","Selection Anchor")),className:"selection-anchor"})}),this.selectionAnchorSetContextKey.set(!!this.decorationId),jr(p("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(Be.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){const e=this.decorationId;this.editor.changeDecorations(t=>{t.removeDecoration(e),this.decorationId=void 0}),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};gu.ID="editor.contrib.selectionAnchorController";gu=zM=D6e([I6e(1,ot)],gu);class R6e extends Me{constructor(){super({id:"editor.action.setSelectionAnchor",label:p("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:N.editorTextFocus,primary:Oi(2089,2080),weight:100}})}run(e,t){var n;return DI(this,void 0,void 0,function*(){(n=gu.get(t))===null||n===void 0||n.setSelectionAnchor()})}}class E6e extends Me{constructor(){super({id:"editor.action.goToSelectionAnchor",label:p("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:II})}run(e,t){var n;return DI(this,void 0,void 0,function*(){(n=gu.get(t))===null||n===void 0||n.goToSelectionAnchor()})}}class N6e extends Me{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:p("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:II,kbOpts:{kbExpr:N.editorTextFocus,primary:Oi(2089,2089),weight:100}})}run(e,t){var n;return DI(this,void 0,void 0,function*(){(n=gu.get(t))===null||n===void 0||n.selectFromAnchorToCursor()})}}class A6e extends Me{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:p("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:II,kbOpts:{kbExpr:N.editorTextFocus,primary:9,weight:100}})}run(e,t){var n;return DI(this,void 0,void 0,function*(){(n=gu.get(t))===null||n===void 0||n.cancelSelectionAnchor()})}}$t(gu.ID,gu,4);ue(R6e);ue(E6e);ue(N6e);ue(A6e);const P6e=P("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hcDark:"#A0A0A0",hcLight:"#A0A0A0"},p("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class M6e extends Me{constructor(){super({id:"editor.action.jumpToBracket",label:p("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:N.editorTextFocus,primary:3165,weight:100}})}run(e,t){var n;(n=Oa.get(t))===null||n===void 0||n.jumpToBracket()}}class O6e extends Me{constructor(){super({id:"editor.action.selectToBracket",label:p("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,n){var r;let s=!0;n&&n.selectBrackets===!1&&(s=!1),(r=Oa.get(t))===null||r===void 0||r.selectToBracket(s)}}class F6e extends Me{constructor(){super({id:"editor.action.removeBrackets",label:p("smartSelect.removeBrackets","Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:N.editorTextFocus,primary:2561,weight:100}})}run(e,t){var n;(n=Oa.get(t))===null||n===void 0||n.removeBrackets(this.id)}}class B6e{constructor(e,t,n){this.position=e,this.brackets=t,this.options=n}}class Oa extends q{static get(e){return e.getContribution(Oa.ID)}constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new fn(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(71),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(71)&&(this._matchBrackets=this._editor.getOption(71),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(n=>{const r=n.getStartPosition(),s=e.bracketPairs.matchBracket(r);let o=null;if(s)s[0].containsPosition(r)&&!s[1].containsPosition(r)?o=s[1].getStartPosition():s[1].containsPosition(r)&&(o=s[0].getStartPosition());else{const a=e.bracketPairs.findEnclosingBrackets(r);if(a)o=a[1].getStartPosition();else{const l=e.bracketPairs.findNextBracket(r);l&&l.range&&(o=l.range.getStartPosition())}}return o?new Be(o.lineNumber,o.column,o.lineNumber,o.column):new Be(r.lineNumber,r.column,r.lineNumber,r.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=[];this._editor.getSelections().forEach(r=>{const s=r.getStartPosition();let o=t.bracketPairs.matchBracket(s);if(!o&&(o=t.bracketPairs.findEnclosingBrackets(s),!o)){const c=t.bracketPairs.findNextBracket(s);c&&c.range&&(o=t.bracketPairs.matchBracket(c.range.getStartPosition()))}let a=null,l=null;if(o){o.sort(D.compareRangesUsingStarts);const[c,d]=o;if(a=e?c.getStartPosition():c.getEndPosition(),l=e?d.getEndPosition():d.getStartPosition(),d.containsPosition(s)){const u=a;a=l,l=u}}a&&l&&n.push(new Be(a.lineNumber,a.column,l.lineNumber,l.column))}),n.length>0&&(this._editor.setSelections(n),this._editor.revealRange(n[0]))}removeBrackets(e){if(!this._editor.hasModel())return;const t=this._editor.getModel();this._editor.getSelections().forEach(n=>{const r=n.getPosition();let s=t.bracketPairs.matchBracket(r);s||(s=t.bracketPairs.findEnclosingBrackets(r)),s&&(this._editor.pushUndoStop(),this._editor.executeEdits(e,[{range:s[0],text:""},{range:s[1],text:""}]),this._editor.pushUndoStop())})}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();const e=[];let t=0;for(const n of this._lastBracketsData){const r=n.brackets;r&&(e[t++]={range:r[0],options:n.options},e[t++]={range:r[1],options:n.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),n=t.getVersionId();let r=[];this._lastVersionId===n&&(r=this._lastBracketsData);const s=[];let o=0;for(let u=0,h=e.length;u<h;u++){const f=e[u];f.isEmpty()&&(s[o++]=f.getStartPosition())}s.length>1&&s.sort(U.compare);const a=[];let l=0,c=0;const d=r.length;for(let u=0,h=s.length;u<h;u++){const f=s[u];for(;c<d&&r[c].position.isBefore(f);)c++;if(c<d&&r[c].position.equals(f))a[l++]=r[c];else{let g=t.bracketPairs.matchBracket(f,20),m=Oa._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!g&&this._matchBrackets==="always"&&(g=t.bracketPairs.findEnclosingBrackets(f,20),m=Oa._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new B6e(f,g,m)}}this._lastBracketsData=a,this._lastVersionId=n}}Oa.ID="editor.contrib.bracketMatchingController";Oa._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=dt.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:Zn(P6e),position:Ao.Center}});Oa._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=dt.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});$t(Oa.ID,Oa,1);ue(O6e);ue(M6e);ue(F6e);pr.appendMenuItem(E.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:p({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});class W6e{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const n=this._selection.startLineNumber,r=this._selection.startColumn,s=this._selection.endColumn;if(!(this._isMovingLeft&&r===1)&&!(!this._isMovingLeft&&s===e.getLineMaxColumn(n)))if(this._isMovingLeft){const o=new D(n,r-1,n,r),a=e.getValueInRange(o);t.addEditOperation(o,null),t.addEditOperation(new D(n,s,n,s),a)}else{const o=new D(n,s,n,s+1),a=e.getValueInRange(o);t.addEditOperation(o,null),t.addEditOperation(new D(n,r,n,r),a)}}computeCursorState(e,t){return this._isMovingLeft?new Be(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new Be(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}class GQ extends Me{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;const n=[],r=t.getSelections();for(const s of r)n.push(new W6e(s,this.left));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class V6e extends GQ{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:p("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:N.writable})}}class H6e extends GQ{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:p("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:N.writable})}}ue(V6e);ue(H6e);class U6e extends Me{constructor(){super({id:"editor.action.transposeLetters",label:p("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:N.writable,kbOpts:{kbExpr:N.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;const n=t.getModel(),r=[],s=t.getSelections();for(const o of s){if(!o.isEmpty())continue;const a=o.startLineNumber,l=o.startColumn,c=n.getLineMaxColumn(a);if(a===1&&(l===1||l===2&&c===2))continue;const d=l===c?o.getPosition():rn.rightPosition(n,o.getPosition().lineNumber,o.getPosition().column),u=rn.leftPosition(n,d),h=rn.leftPosition(n,u),f=n.getValueInRange(D.fromPositions(h,u)),g=n.getValueInRange(D.fromPositions(u,d)),m=D.fromPositions(h,d);r.push(new Sr(m,g+f))}r.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop())}}ue(U6e);var j6e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const sp="9_cutcopypaste",z6e=kl||document.queryCommandSupported("cut"),ZQ=kl||document.queryCommandSupported("copy"),$6e=typeof navigator.clipboard>"u"||aa?document.queryCommandSupported("paste"):!0;function UB(i){return i.register(),i}const K6e=z6e?UB(new G1({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:kl?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:E.MenubarEditMenu,group:"2_ccp",title:p({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:E.EditorContext,group:sp,title:p("actions.clipboard.cutLabel","Cut"),when:N.writable,order:1},{menuId:E.CommandPalette,group:"",title:p("actions.clipboard.cutLabel","Cut"),order:1},{menuId:E.SimpleEditorContext,group:sp,title:p("actions.clipboard.cutLabel","Cut"),when:N.writable,order:1}]})):void 0,q6e=ZQ?UB(new G1({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:kl?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:E.MenubarEditMenu,group:"2_ccp",title:p({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:E.EditorContext,group:sp,title:p("actions.clipboard.copyLabel","Copy"),order:2},{menuId:E.CommandPalette,group:"",title:p("actions.clipboard.copyLabel","Copy"),order:1},{menuId:E.SimpleEditorContext,group:sp,title:p("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;pr.appendMenuItem(E.MenubarEditMenu,{submenu:E.MenubarCopy,title:{value:p("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3});pr.appendMenuItem(E.EditorContext,{submenu:E.EditorContextCopy,title:{value:p("copy as","Copy As"),original:"Copy As"},group:sp,order:3});pr.appendMenuItem(E.EditorContext,{submenu:E.EditorContextShare,title:{value:p("share","Share"),original:"Share"},group:"11_share",order:-1,when:re.and(re.notEquals("resourceScheme","output"),N.editorTextFocus)});pr.appendMenuItem(E.EditorTitleContext,{submenu:E.EditorTitleContextShare,title:{value:p("share","Share"),original:"Share"},group:"11_share",order:-1});pr.appendMenuItem(E.ExplorerContext,{submenu:E.ExplorerContextShare,title:{value:p("share","Share"),original:"Share"},group:"11_share",order:-1});const iN=$6e?UB(new G1({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:kl?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:E.MenubarEditMenu,group:"2_ccp",title:p({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:E.EditorContext,group:sp,title:p("actions.clipboard.pasteLabel","Paste"),when:N.writable,order:4},{menuId:E.CommandPalette,group:"",title:p("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:E.SimpleEditorContext,group:sp,title:p("actions.clipboard.pasteLabel","Paste"),when:N.writable,order:4}]})):void 0;class G6e extends Me{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:p("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:N.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(37)&&t.getSelection().isEmpty()||(ZA.forceCopyWithSyntaxHighlighting=!0,t.focus(),t.getContainerDomNode().ownerDocument.execCommand("copy"),ZA.forceCopyWithSyntaxHighlighting=!1)}}function XQ(i,e){i&&(i.addImplementation(1e4,"code-editor",(t,n)=>{const r=t.get(Jt).getFocusedCodeEditor();if(r&&r.hasTextFocus()){const s=r.getOption(37),o=r.getSelection();return o&&o.isEmpty()&&!s||r.getContainerDomNode().ownerDocument.execCommand(e),!0}return!1}),i.addImplementation(0,"generic-dom",(t,n)=>(CD().execCommand(e),!0)))}XQ(K6e,"cut");XQ(q6e,"copy");iN&&(iN.addImplementation(1e4,"code-editor",(i,e)=>{const t=i.get(Jt),n=i.get(xu),r=t.getFocusedCodeEditor();return r&&r.hasTextFocus()?!r.getContainerDomNode().ownerDocument.execCommand("paste")&&gf?(()=>j6e(void 0,void 0,void 0,function*(){const o=yield n.readText();if(o!==""){const a=iy.INSTANCE.get(o);let l=!1,c=null,d=null;a&&(l=r.getOption(37)&&!!a.isFromEmptySelection,c=typeof a.multicursorText<"u"?a.multicursorText:null,d=a.mode),r.trigger("keyboard","paste",{text:o,pasteOnNewLine:l,multicursorText:c,mode:d})}}))():!0:!1}),iN.addImplementation(0,"generic-dom",(i,e)=>(CD().execCommand("paste"),!0)));ZQ&&ue(G6e);var Z6e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class et{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+et.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new et(this.value+et.sep+e)}}et.sep=".";et.None=new et("@@none@@");et.Empty=new et("");et.QuickFix=new et("quickfix");et.Refactor=new et("refactor");et.RefactorExtract=et.Refactor.append("extract");et.RefactorInline=et.Refactor.append("inline");et.RefactorMove=et.Refactor.append("move");et.RefactorRewrite=et.Refactor.append("rewrite");et.Notebook=new et("notebook");et.Source=new et("source");et.SourceOrganizeImports=et.Source.append("organizeImports");et.SourceFixAll=et.Source.append("fixAll");et.SurroundWith=et.Refactor.append("surround");var so;(function(i){i.Refactor="refactor",i.RefactorPreview="refactor preview",i.Lightbulb="lightbulb",i.Default="other (default)",i.SourceAction="source action",i.QuickFix="quick fix action",i.FixAll="fix all",i.OrganizeImports="organize imports",i.AutoFix="auto fix",i.QuickFixHover="quick fix hover window",i.OnSave="save participants",i.ProblemsView="problems view"})(so||(so={}));function X6e(i,e){return!(i.include&&!i.include.intersects(e)||i.excludes&&i.excludes.some(t=>YQ(e,t,i.include))||!i.includeSourceActions&&et.Source.contains(e))}function Y6e(i,e){const t=e.kind?new et(e.kind):void 0;return!(i.include&&(!t||!i.include.contains(t))||i.excludes&&t&&i.excludes.some(n=>YQ(t,n,i.include))||!i.includeSourceActions&&t&&et.Source.contains(t)||i.onlyIncludePreferredActions&&!e.isPreferred)}function YQ(i,e,t){return!(!e.contains(i)||t&&e.contains(t))}class yc{static fromUser(e,t){return!e||typeof e!="object"?new yc(t.kind,t.apply,!1):new yc(yc.getKindFromUser(e,t.kind),yc.getApplyFromUser(e,t.apply),yc.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new et(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}constructor(e,t,n){this.kind=e,this.apply=t,this.preferred=n}}class Q6e{constructor(e,t,n){this.action=e,this.provider=t,this.highlightRange=n}resolve(e){var t;return Z6e(this,void 0,void 0,function*(){if(!((t=this.provider)===null||t===void 0)&&t.resolveCodeAction&&!this.action.edit){let n;try{n=yield this.provider.resolveCodeAction(this.action,e)}catch(r){Ii(r)}n&&(this.action.edit=n.edit)}return this})}}var jk=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const QQ="editor.action.codeAction",jB="editor.action.quickFix",JQ="editor.action.autoFix",eJ="editor.action.refactor",tJ="editor.action.sourceAction",zB="editor.action.organizeImports",$B="editor.action.fixAll";class e0 extends q{static codeActionsPreferredComparator(e,t){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:0}static codeActionsComparator({action:e},{action:t}){return zr(e.diagnostics)?zr(t.diagnostics)?e0.codeActionsPreferredComparator(e,t):-1:zr(t.diagnostics)?1:e0.codeActionsPreferredComparator(e,t)}constructor(e,t,n){super(),this.documentation=t,this._register(n),this.allActions=[...e].sort(e0.codeActionsComparator),this.validActions=this.allActions.filter(({action:r})=>!r.disabled)}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&et.QuickFix.contains(new et(e.kind))&&!!e.isPreferred)}}const IH={actions:[],documentation:void 0};function t0(i,e,t,n,r,s){var o;return jk(this,void 0,void 0,function*(){const a=n.filter||{},l=Object.assign(Object.assign({},a),{excludes:[...a.excludes||[],et.Notebook]}),c={only:(o=a.include)===null||o===void 0?void 0:o.value,trigger:n.type},d=new OB(e,s),u=n.type===2,h=J6e(i,e,u?l:a),f=new ae,g=h.map(y=>jk(this,void 0,void 0,function*(){try{r.report(y);const b=yield y.provideCodeActions(e,t,c,d.token);if(b&&f.add(b),d.token.isCancellationRequested)return IH;const v=((b==null?void 0:b.actions)||[]).filter(w=>w&&Y6e(a,w)),C=tWe(y,v,a.include);return{actions:v.map(w=>new Q6e(w,y)),documentation:C}}catch(b){if(ql(b))throw b;return Ii(b),IH}})),m=i.onDidChange(()=>{const y=i.all(e);fi(y,h)||d.cancel()});try{const y=yield Promise.all(g),b=y.map(C=>C.actions).flat(),v=[...zc(y.map(C=>C.documentation)),...eWe(i,e,n,b)];return new e0(b,v,f)}finally{m.dispose(),d.dispose()}})}function J6e(i,e,t){return i.all(e).filter(n=>n.providedCodeActionKinds?n.providedCodeActionKinds.some(r=>X6e(t,new et(r))):!0)}function*eWe(i,e,t,n){var r,s,o;if(e&&n.length)for(const a of i.all(e))a._getAdditionalMenuItems&&(yield*(r=a._getAdditionalMenuItems)===null||r===void 0?void 0:r.call(a,{trigger:t.type,only:(o=(s=t.filter)===null||s===void 0?void 0:s.include)===null||o===void 0?void 0:o.value},n.map(l=>l.action)))}function tWe(i,e,t){if(!i.documentation)return;const n=i.documentation.map(r=>({kind:new et(r.kind),command:r.command}));if(t){let r;for(const s of n)s.kind.contains(t)&&(r?r.kind.contains(s.kind)&&(r=s):r=s);if(r)return r==null?void 0:r.command}for(const r of e)if(r.kind){for(const s of n)if(s.kind.contains(new et(r.kind)))return s.command}}var zk;(function(i){i.OnSave="onSave",i.FromProblemsView="fromProblemsView",i.FromCodeActions="fromCodeActions"})(zk||(zk={}));function nWe(i,e,t,n,r=xt.None){var s;return jk(this,void 0,void 0,function*(){const o=i.get(QC),a=i.get(oi),l=i.get(Wo),c=i.get(wi);if(l.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred,reason:t}),yield e.resolve(r),!r.isCancellationRequested&&!(!((s=e.action.edit)===null||s===void 0)&&s.edits.length&&!(yield o.apply(e.action.edit,{editor:n==null?void 0:n.editor,label:e.action.title,quotableLabel:e.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:t!==zk.OnSave,showPreview:n==null?void 0:n.preview})).isApplied)&&e.action.command)try{yield a.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(d){const u=iWe(d);c.error(typeof u=="string"?u:p("applyCodeActionFailed","An unknown error occurred while applying the code action"))}})}function iWe(i){return typeof i=="string"?i:i instanceof Error&&typeof i.message=="string"?i.message:void 0}Bt.registerCommand("_executeCodeActionProvider",function(i,e,t,n,r){return jk(this,void 0,void 0,function*(){if(!(e instanceof Ye))throw ia();const{codeActionProvider:s}=i.get(Fe),o=i.get(zn).getModel(e);if(!o)throw ia();const a=Be.isISelection(t)?Be.liftSelection(t):D.isIRange(t)?o.validateRange(t):void 0;if(!a)throw ia();const l=typeof n=="string"?new et(n):void 0,c=yield t0(s,o,a,{type:1,triggerAction:so.Default,filter:{includeSourceActions:!0,include:l}},nu.None,xt.None),d=[],u=Math.min(c.validActions.length,typeof r=="number"?r:0);for(let h=0;h<u;h++)d.push(c.validActions[h].resolve(xt.None));try{return yield Promise.all(d),c.validActions.map(h=>h.action)}finally{setTimeout(()=>c.dispose(),100)}})});var rWe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},sWe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},$M;let $k=$M=class{constructor(e){this.keybindingService=e}getResolver(){const e=new _f(()=>this.keybindingService.getKeybindings().filter(t=>$M.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let n=t.commandArgs;return t.command===zB?n={kind:et.SourceOrganizeImports.value}:t.command===$B&&(n={kind:et.SourceFixAll.value}),Object.assign({resolvedKeybinding:t.resolvedKeybinding},yc.fromUser(n,{kind:et.None,apply:"never"}))}));return t=>{if(t.kind){const n=this.bestKeybindingForCodeAction(t,e.value);return n==null?void 0:n.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const n=new et(e.kind);return t.filter(r=>r.kind.contains(n)).filter(r=>r.preferred?e.isPreferred:!0).reduceRight((r,s)=>r?r.kind.contains(s.kind)?s:r:s,void 0)}};$k.codeActionCommands=[eJ,QQ,tJ,zB,$B];$k=$M=rWe([sWe(0,bn)],$k);P("symbolIcon.arrayForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.booleanForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},p("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.colorForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.constantForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},p("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},p("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},p("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},p("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},p("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.fileForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.folderForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},p("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},p("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.keyForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.keywordForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},p("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.moduleForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.namespaceForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.nullForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.numberForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.objectForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.operatorForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.packageForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.propertyForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.referenceForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.snippetForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.stringForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.structForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.textForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.typeParameterForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.unitForeground",{dark:fe,light:fe,hcDark:fe,hcLight:fe},p("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},p("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));const nJ=Object.freeze({kind:et.Empty,title:p("codeAction.widget.id.more","More Actions...")}),oWe=Object.freeze([{kind:et.QuickFix,title:p("codeAction.widget.id.quickfix","Quick Fix")},{kind:et.RefactorExtract,title:p("codeAction.widget.id.extract","Extract"),icon:me.wrench},{kind:et.RefactorInline,title:p("codeAction.widget.id.inline","Inline"),icon:me.wrench},{kind:et.RefactorRewrite,title:p("codeAction.widget.id.convert","Rewrite"),icon:me.wrench},{kind:et.RefactorMove,title:p("codeAction.widget.id.move","Move"),icon:me.wrench},{kind:et.SurroundWith,title:p("codeAction.widget.id.surround","Surround With"),icon:me.symbolSnippet},{kind:et.Source,title:p("codeAction.widget.id.source","Source Action"),icon:me.symbolFile},nJ]);function aWe(i,e,t){if(!e)return i.map(s=>{var o;return{kind:"action",item:s,group:nJ,disabled:!!s.action.disabled,label:s.action.disabled||s.action.title,canPreview:!!(!((o=s.action.edit)===null||o===void 0)&&o.edits.length)}});const n=oWe.map(s=>({group:s,actions:[]}));for(const s of i){const o=s.action.kind?new et(s.action.kind):et.None;for(const a of n)if(a.group.kind.contains(o)){a.actions.push(s);break}}const r=[];for(const s of n)if(s.actions.length){r.push({kind:"header",group:s.group});for(const o of s.actions)r.push({kind:"action",item:o,group:s.group,label:o.action.title,disabled:!!o.action.disabled,keybinding:t(o.action)})}return r}var lWe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},cWe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},KM,t_;(function(i){i.Hidden={type:0};class e{constructor(n,r,s,o){this.actions=n,this.trigger=r,this.editorPosition=s,this.widgetPosition=o,this.type=1}}i.Showing=e})(t_||(t_={}));let op=KM=class extends q{constructor(e,t){super(),this._editor=e,this._onClick=this._register(new H),this.onClick=this._onClick.event,this._state=t_.Hidden,this._domNode=ce("div.lightBulbWidget"),this._register(vn.ignoreTarget(this._domNode)),this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(n=>{const r=this._editor.getModel();(this.state.type!==1||!r||this.state.editorPosition.lineNumber>=r.getLineCount())&&this.hide()})),this._register($ke(this._domNode,n=>{if(this.state.type!==1)return;this._editor.focus(),n.preventDefault();const{top:r,height:s}=Mi(this._domNode),o=this._editor.getOption(66);let a=Math.floor(o/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(a+=o),this._onClick.fire({x:n.posx,y:r+s+a,actions:this.state.actions,trigger:this.state.trigger})})),this._register(ee(this._domNode,"mouseenter",n=>{(n.buttons&1)===1&&this.hide()})),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(64)&&!this._editor.getOption(64).enabled&&this.hide()})),this._register(Re.runAndSubscribe(t.onDidUpdateKeybindings,()=>{var n,r,s,o;this._preferredKbLabel=(r=(n=t.lookupKeybinding(JQ))===null||n===void 0?void 0:n.getLabel())!==null&&r!==void 0?r:void 0,this._quickFixKbLabel=(o=(s=t.lookupKeybinding(jB))===null||s===void 0?void 0:s.getLabel())!==null&&o!==void 0?o:void 0,this._updateLightBulbTitleAndIcon()}))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,n){if(e.validActions.length<=0)return this.hide();const r=this._editor.getOptions();if(!r.get(64).enabled)return this.hide();const s=this._editor.getModel();if(!s)return this.hide();const{lineNumber:o,column:a}=s.validatePosition(n),l=s.getOptions().tabSize,c=r.get(50),d=s.getLineContent(o),u=jD(d,l),h=c.spaceWidth*u>22,f=m=>m>2&&this._editor.getTopForLineNumber(m)===this._editor.getTopForLineNumber(m-1);let g=o;if(!h){if(o>1&&!f(o-1))g-=1;else if(!f(o+1))g+=1;else if(a*c.spaceWidth<22)return this.hide()}this.state=new t_.Showing(e,t,n,{position:{lineNumber:g,column:1},preference:KM._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state!==t_.Hidden&&(this.state=t_.Hidden,this._editor.layoutContentWidget(this))}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this.state.type===1&&this.state.actions.hasAutoFix&&(this._domNode.classList.remove(...Qe.asClassNameArray(me.lightBulb)),this._domNode.classList.add(...Qe.asClassNameArray(me.lightbulbAutofix)),this._preferredKbLabel)){this.title=p("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel);return}this._domNode.classList.remove(...Qe.asClassNameArray(me.lightbulbAutofix)),this._domNode.classList.add(...Qe.asClassNameArray(me.lightBulb)),this._quickFixKbLabel?this.title=p("codeActionWithKb","Show Code Actions ({0})",this._quickFixKbLabel):this.title=p("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}};op.ID="editor.contrib.lightbulbWidget";op._posPref=[0];op=KM=lWe([cWe(1,bn)],op);var dWe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},RH=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},iJ=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},qM;let pu=qM=class{constructor(e,t,n){this._options=e,this._languageService=t,this._openerService=n,this._onDidRenderAsync=new H,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const r=new ae,s=r.add(tI(e,Object.assign(Object.assign({},this._getRenderOptions(e,r)),t),n));return s.element.classList.add("rendered-markdown"),{element:s.element,dispose:()=>r.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:(n,r)=>iJ(this,void 0,void 0,function*(){var s,o,a;let l;n?l=this._languageService.getLanguageIdByLanguageName(n):this._options.editor&&(l=(s=this._options.editor.getModel())===null||s===void 0?void 0:s.getLanguageId()),l||(l=Eo);const c=yield CMe(this._languageService,r,l),d=document.createElement("span");if(d.innerHTML=(a=(o=qM._ttpTokenizer)===null||o===void 0?void 0:o.createHTML(c))!==null&&a!==void 0?a:c,this._options.editor){const u=this._options.editor.getOption(50);Ir(d,u)}else this._options.codeBlockFontFamily&&(d.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(d.style.fontSize=this._options.codeBlockFontSize),d}),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:n=>rJ(this._openerService,n,e.isTrusted),disposables:t}}}};pu._ttpTokenizer=vu("tokenizeToString",{createHTML(i){return i}});pu=qM=dWe([RH(1,Fn),RH(2,lo)],pu);function rJ(i,e,t){return iJ(this,void 0,void 0,function*(){try{return yield i.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:uWe(t)})}catch(n){return ut(n),!1}})}function uWe(i){return i===!0?!0:i&&Array.isArray(i.enabledCommands)?i.enabledCommands:!1}var hWe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},EH=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Ox;let eo=Ox=class{static get(e){return e.getContribution(Ox.ID)}constructor(e,t,n){this._openerService=n,this._messageWidget=new vr,this._messageListeners=new ae,this._mouseOverMessage=!1,this._editor=e,this._visible=Ox.MESSAGE_VISIBLE.bindTo(t)}dispose(){var e;(e=this._message)===null||e===void 0||e.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){jr(xh(e)?e.value:e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._message=xh(e)?tI(e,{actionHandler:{callback:r=>rJ(this._openerService,r,xh(e)?e.isTrusted:void 0),disposables:this._messageListeners}}):void 0,this._messageWidget.value=new NH(this._editor,t,typeof e=="string"?e:this._message.element),this._messageListeners.add(Re.debounce(this._editor.onDidBlurEditorText,(r,s)=>s,0)(()=>{this._mouseOverMessage||this._messageWidget.value&&Dr(Ma(),this._messageWidget.value.getDomNode())||this.closeMessage()})),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(ee(this._messageWidget.value.getDomNode(),Ce.MOUSE_ENTER,()=>this._mouseOverMessage=!0,!0)),this._messageListeners.add(ee(this._messageWidget.value.getDomNode(),Ce.MOUSE_LEAVE,()=>this._mouseOverMessage=!1,!0));let n;this._messageListeners.add(this._editor.onMouseMove(r=>{r.target.position&&(n?n.containsPosition(r.target.position)||this.closeMessage():n=new D(t.lineNumber-3,1,r.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(NH.fadeOut(this._messageWidget.value))}};eo.ID="editor.contrib.messageController";eo.MESSAGE_VISIBLE=new Ne("messageVisible",!1,p("messageVisible","Whether the editor is currently showing an inline message"));eo=Ox=hWe([EH(1,ot),EH(2,lo)],eo);const fWe=sr.bindToContribution(eo.get);ye(new fWe({id:"leaveEditorMessage",precondition:eo.MESSAGE_VISIBLE,handler:i=>i.closeMessage(),kbOpts:{weight:100+30,primary:9}}));let NH=class{static fadeOut(e){const t=()=>{e.dispose(),clearTimeout(n),e.getDomNode().removeEventListener("animationend",t)},n=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}constructor(e,{lineNumber:t,column:n},r){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:n},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const s=document.createElement("div");s.classList.add("anchor","top"),this._domNode.appendChild(s);const o=document.createElement("div");typeof r=="string"?(o.classList.add("message"),o.textContent=r):(r.classList.add("message"),o.appendChild(r)),this._domNode.appendChild(o);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",e===2)}};$t(eo.ID,eo,4);var sJ=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},GM=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},gWe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const oJ="acceptSelectedCodeAction",aJ="previewSelectedCodeAction";class pWe{get templateId(){return"header"}renderTemplate(e){e.classList.add("group-header");const t=document.createElement("span");return e.append(t),{container:e,text:t}}renderElement(e,t,n){var r,s;n.text.textContent=(s=(r=e.group)===null||r===void 0?void 0:r.title)!==null&&s!==void 0?s:""}disposeTemplate(e){}}let ZM=class{get templateId(){return"action"}constructor(e,t){this._supportsPreview=e,this._keybindingService=t}renderTemplate(e){e.classList.add(this.templateId);const t=document.createElement("div");t.className="icon",e.append(t);const n=document.createElement("span");n.className="title",e.append(n);const r=new iw(e,To);return{container:e,icon:t,text:n,keybinding:r}}renderElement(e,t,n){var r,s,o;if(!((r=e.group)===null||r===void 0)&&r.icon?(n.icon.className=Qe.asClassName(e.group.icon),e.group.icon.color&&(n.icon.style.color=Ae(e.group.icon.color.id))):(n.icon.className=Qe.asClassName(me.lightBulb),n.icon.style.color="var(--vscode-editorLightBulb-foreground)"),!e.item||!e.label)return;n.text.textContent=lJ(e.label),n.keybinding.set(e.keybinding),nLe(!!e.keybinding,n.keybinding.element);const a=(s=this._keybindingService.lookupKeybinding(oJ))===null||s===void 0?void 0:s.getLabel(),l=(o=this._keybindingService.lookupKeybinding(aJ))===null||o===void 0?void 0:o.getLabel();n.container.classList.toggle("option-disabled",e.disabled),e.disabled?n.container.title=e.label:a&&l?this._supportsPreview&&e.canPreview?n.container.title=p({key:"label-preview",comment:['placeholders are keybindings, e.g "F2 to apply, Shift+F2 to preview"']},"{0} to apply, {1} to preview",a,l):n.container.title=p({key:"label",comment:['placeholder is a keybinding, e.g "F2 to apply"']},"{0} to apply",a):n.container.title=""}disposeTemplate(e){}};ZM=sJ([GM(1,bn)],ZM);class mWe extends UIEvent{constructor(){super("acceptSelectedAction")}}class AH extends UIEvent{constructor(){super("previewSelectedAction")}}function _We(i){if(i.kind==="action")return i.label}let XM=class extends q{constructor(e,t,n,r,s,o){super(),this._delegate=r,this._contextViewService=s,this._keybindingService=o,this._actionLineHeight=24,this._headerLineHeight=26,this.cts=this._register(new vi),this.domNode=document.createElement("div"),this.domNode.classList.add("actionList");const a={getHeight:l=>l.kind==="header"?this._headerLineHeight:this._actionLineHeight,getTemplateId:l=>l.kind};this._list=this._register(new Ga(e,this.domNode,a,[new ZM(t,this._keybindingService),new pWe],{keyboardSupport:!1,typeNavigationEnabled:!0,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:_We},accessibilityProvider:{getAriaLabel:l=>{if(l.kind==="action"){let c=l.label?lJ(l==null?void 0:l.label):"";return l.disabled&&(c=p({key:"customQuickFixWidget.labels",comment:["Action widget labels for accessibility."]},"{0}, Disabled Reason: {1}",c,l.disabled)),c}return null},getWidgetAriaLabel:()=>p({key:"customQuickFixWidget",comment:["An action widget option"]},"Action Widget"),getRole:l=>l.kind==="action"?"option":"separator",getWidgetRole:()=>"listbox"}})),this._list.style(Wp),this._register(this._list.onMouseClick(l=>this.onListClick(l))),this._register(this._list.onMouseOver(l=>this.onListHover(l))),this._register(this._list.onDidChangeFocus(()=>this.onFocus())),this._register(this._list.onDidChangeSelection(l=>this.onListSelection(l))),this._allMenuItems=n,this._list.splice(0,this._list.length,this._allMenuItems),this._list.length&&this.focusNext()}focusCondition(e){return!e.disabled&&e.kind==="action"}hide(e){this._delegate.onHide(e),this.cts.cancel(),this._contextViewService.hideContextView()}layout(e){const t=this._allMenuItems.filter(c=>c.kind==="header").length,r=this._allMenuItems.length*this._actionLineHeight+t*this._headerLineHeight-t*this._actionLineHeight;this._list.layout(r);const s=this._allMenuItems.map((c,d)=>{const u=document.getElementById(this._list.getElementID(d));if(u){u.style.width="auto";const h=u.getBoundingClientRect().width;return u.style.width="",h}return 0}),o=Math.max(...s,e),a=.7,l=Math.min(r,document.body.clientHeight*a);return this._list.layout(l,o),this.domNode.style.height=`${l}px`,this._list.domFocus(),o}focusPrevious(){this._list.focusPrevious(1,!0,void 0,this.focusCondition)}focusNext(){this._list.focusNext(1,!0,void 0,this.focusCondition)}acceptSelected(e){const t=this._list.getFocus();if(t.length===0)return;const n=t[0],r=this._list.element(n);if(!this.focusCondition(r))return;const s=e?new AH:new mWe;this._list.setSelection([n],s)}onListSelection(e){if(!e.elements.length)return;const t=e.elements[0];t.item&&this.focusCondition(t)?this._delegate.onSelect(t.item,e.browserEvent instanceof AH):this._list.setSelection([])}onFocus(){var e,t;this._list.domFocus();const n=this._list.getFocus();if(n.length===0)return;const r=n[0],s=this._list.element(r);(t=(e=this._delegate).onFocus)===null||t===void 0||t.call(e,s.item)}onListHover(e){return gWe(this,void 0,void 0,function*(){const t=e.element;if(t&&t.item&&this.focusCondition(t)){if(this._delegate.onHover&&!t.disabled&&t.kind==="action"){const n=yield this._delegate.onHover(t.item,this.cts.token);t.canPreview=n?n.canPreview:void 0}e.index&&this._list.splice(e.index,1,[t])}this._list.setFocus(typeof e.index=="number"?[e.index]:[])})}onListClick(e){e.element&&this.focusCondition(e.element)&&this._list.setFocus([])}};XM=sJ([GM(4,Cu),GM(5,bn)],XM);function lJ(i){return i.replace(/\r\n|\r|\n/g," ")}var bWe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},rN=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};P("actionBar.toggledBackground",{dark:hg,light:hg,hcDark:hg,hcLight:hg},p("actionBar.toggledBackground","Background color for toggled action items in action bar."));const ap={Visible:new Ne("codeActionMenuVisible",!1,p("codeActionMenuVisible","Whether the action widget list is visible"))},zp=Lt("actionWidgetService");let lp=class extends q{get isVisible(){return ap.Visible.getValue(this._contextKeyService)||!1}constructor(e,t,n){super(),this._contextViewService=e,this._contextKeyService=t,this._instantiationService=n,this._list=this._register(new vr)}show(e,t,n,r,s,o,a){const l=ap.Visible.bindTo(this._contextKeyService),c=this._instantiationService.createInstance(XM,e,t,n,r);this._contextViewService.showContextView({getAnchor:()=>s,render:d=>(l.set(!0),this._renderWidget(d,c,a??[])),onHide:d=>{l.reset(),this._onWidgetClosed(d)}},o,!1)}acceptSelected(e){var t;(t=this._list.value)===null||t===void 0||t.acceptSelected(e)}focusPrevious(){var e,t;(t=(e=this._list)===null||e===void 0?void 0:e.value)===null||t===void 0||t.focusPrevious()}focusNext(){var e,t;(t=(e=this._list)===null||e===void 0?void 0:e.value)===null||t===void 0||t.focusNext()}hide(){var e;(e=this._list.value)===null||e===void 0||e.hide(),this._list.clear()}_renderWidget(e,t,n){var r;const s=document.createElement("div");if(s.classList.add("action-widget"),e.appendChild(s),this._list.value=t,this._list.value)s.appendChild(this._list.value.domNode);else throw new Error("List has no value");const o=new ae,a=document.createElement("div"),l=e.appendChild(a);l.classList.add("context-view-block"),o.add(ee(l,Ce.MOUSE_DOWN,g=>g.stopPropagation()));const c=document.createElement("div"),d=e.appendChild(c);d.classList.add("context-view-pointerBlock"),o.add(ee(d,Ce.POINTER_MOVE,()=>d.remove())),o.add(ee(d,Ce.MOUSE_DOWN,()=>d.remove()));let u=0;if(n.length){const g=this._createActionBar(".action-widget-action-bar",n);g&&(s.appendChild(g.getContainer().parentElement),o.add(g),u=g.getContainer().offsetWidth)}const h=(r=this._list.value)===null||r===void 0?void 0:r.layout(u);s.style.width=`${h}px`;const f=o.add(qc(e));return o.add(f.onDidBlur(()=>this.hide())),o}_createActionBar(e,t){if(!t.length)return;const n=ce(e),r=new fa(n);return r.push(t,{icon:!1,label:!0}),r}_onWidgetClosed(e){var t;(t=this._list.value)===null||t===void 0||t.hide(e)}};lp=bWe([rN(0,Cu),rN(1,ot),rN(2,rt)],lp);Wt(zp,lp,1);const hw=100+1e3;Nn(class extends Bo{constructor(){super({id:"hideCodeActionWidget",title:{value:p("hideCodeActionWidget.title","Hide action widget"),original:"Hide action widget"},precondition:ap.Visible,keybinding:{weight:hw,primary:9,secondary:[1033]}})}run(i){i.get(zp).hide()}});Nn(class extends Bo{constructor(){super({id:"selectPrevCodeAction",title:{value:p("selectPrevCodeAction.title","Select previous action"),original:"Select previous action"},precondition:ap.Visible,keybinding:{weight:hw,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})}run(i){const e=i.get(zp);e instanceof lp&&e.focusPrevious()}});Nn(class extends Bo{constructor(){super({id:"selectNextCodeAction",title:{value:p("selectNextCodeAction.title","Select next action"),original:"Select next action"},precondition:ap.Visible,keybinding:{weight:hw,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})}run(i){const e=i.get(zp);e instanceof lp&&e.focusNext()}});Nn(class extends Bo{constructor(){super({id:oJ,title:{value:p("acceptSelected.title","Accept selected action"),original:"Accept selected action"},precondition:ap.Visible,keybinding:{weight:hw,primary:3,secondary:[2137]}})}run(i){const e=i.get(zp);e instanceof lp&&e.acceptSelected()}});Nn(class extends Bo{constructor(){super({id:aJ,title:{value:p("previewSelected.title","Preview selected action"),original:"Preview selected action"},precondition:ap.Visible,keybinding:{weight:hw,primary:2051}})}run(i){const e=i.get(zp);e instanceof lp&&e.acceptSelected(!0)}});var vWe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const cJ=new Ne("supportedCodeAction","");class yWe extends q{constructor(e,t,n,r=250){super(),this._editor=e,this._markerService=t,this._signalChange=n,this._delay=r,this._autoTriggerTimer=this._register(new za),this._register(this._markerService.onMarkerChanged(s=>this._onMarkerChanges(s))),this._register(this._editor.onDidChangeCursorPosition(()=>this._tryAutoTrigger()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);this._signalChange(t?{trigger:e,selection:t}:void 0)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(n=>T5(n,t.uri))&&this._tryAutoTrigger()}_tryAutoTrigger(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:so.Default})},this._delay)}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=this._editor.getSelection();if(n.isEmpty()&&e.type===2){const{lineNumber:r,column:s}=n.getPosition(),o=t.getLineContent(r);if(o.length===0)return;if(s===1){if(/\s/.test(o[0]))return}else if(s===t.getLineMaxColumn(r)){if(/\s/.test(o[o.length-1]))return}else if(/\s/.test(o[s-2])&&/\s/.test(o[s-1]))return}return n}}var sg;(function(i){i.Empty={type:0};class e{constructor(n,r,s){this.trigger=n,this.position=r,this._cancellablePromise=s,this.type=1,this.actions=s.catch(o=>{if(ql(o))return dJ;throw o})}cancel(){this._cancellablePromise.cancel()}}i.Triggered=e})(sg||(sg={}));const dJ=Object.freeze({allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1});class CWe extends q{constructor(e,t,n,r,s,o){super(),this._editor=e,this._registry=t,this._markerService=n,this._progressService=s,this._configurationService=o,this._codeActionOracle=this._register(new vr),this._state=sg.Empty,this._onDidChangeState=this._register(new H),this.onDidChangeState=this._onDidChangeState.event,this._disposed=!1,this._supportedCodeActions=cJ.bindTo(r),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._update()}dispose(){this._disposed||(this._disposed=!0,super.dispose(),this.setState(sg.Empty,!0))}_settingEnabledNearbyQuickfixes(){var e;const t=(e=this._editor)===null||e===void 0?void 0:e.getModel();return this._configurationService?this._configurationService.getValue("editor.codeActionWidget.includeNearbyQuickfixes",{resource:t==null?void 0:t.uri}):!1}_update(){if(this._disposed)return;this._codeActionOracle.value=void 0,this.setState(sg.Empty);const e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(90)){const t=this._registry.all(e).flatMap(n=>{var r;return(r=n.providedCodeActionKinds)!==null&&r!==void 0?r:[]});this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new yWe(this._editor,this._markerService,n=>{var r;if(!n){this.setState(sg.Empty);return}const s=n.selection.getStartPosition(),o=Ui(a=>vWe(this,void 0,void 0,function*(){var l,c,d,u,h,f;if(this._settingEnabledNearbyQuickfixes()&&n.trigger.type===1&&(n.trigger.triggerAction===so.QuickFix||!((c=(l=n.trigger.filter)===null||l===void 0?void 0:l.include)===null||c===void 0)&&c.contains(et.QuickFix))){const g=yield t0(this._registry,e,n.selection,n.trigger,nu.None,a);if(a.isCancellationRequested)return dJ;if(!((d=g.validActions)===null||d===void 0?void 0:d.some(y=>y.action.kind?et.QuickFix.contains(new et(y.action.kind)):!1))){const y=this._markerService.read({resource:e.uri});if(y.length>0){const b=n.selection.getPosition();let v=b,C=Number.MAX_VALUE,w=!1;for(const S of y){const L=S.endColumn,T=S.endLineNumber,I=S.startLineNumber;(T===b.lineNumber||I===b.lineNumber)&&Math.abs(b.column-L)<C&&(C=Math.abs(b.column-L),w=!0,v=new U(T,L))}if(w){const S={type:n.trigger.type,triggerAction:n.trigger.triggerAction,filter:{include:!((u=n.trigger.filter)===null||u===void 0)&&u.include?(h=n.trigger.filter)===null||h===void 0?void 0:h.include:et.QuickFix},autoApply:n.trigger.autoApply,context:{notAvailableMessage:((f=n.trigger.context)===null||f===void 0?void 0:f.notAvailableMessage)||"",position:v}},L=new Be(v.lineNumber,v.column,v.lineNumber,v.column),T=yield t0(this._registry,e,L,S,nu.None,a),I=[...g.validActions];return T.validActions.length!==0&&(T.validActions.forEach(R=>{R.highlightRange=R.action.isPreferred}),I.push(...T.validActions)),{validActions:I,allActions:g.allActions,documentation:g.documentation,hasAutoFix:g.hasAutoFix,dispose:()=>{g.dispose()}}}}}}return t0(this._registry,e,n.selection,n.trigger,nu.None,a)}));n.trigger.type===1&&((r=this._progressService)===null||r===void 0||r.showWhile(o,250)),this.setState(new sg.Triggered(n.trigger,s,o))},void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:so.Default})}else this._supportedCodeActions.reset()}trigger(e){var t;(t=this._codeActionOracle.value)===null||t===void 0||t.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!this._disposed&&this._onDidChangeState.fire(e))}}var wWe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},yd=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Wb=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Fx;const SWe="quickfix-edit-highlight";let Yh=Fx=class extends q{static get(e){return e.getContribution(Fx.ID)}constructor(e,t,n,r,s,o,a,l,c,d){super(),this._commandService=a,this._configurationService=l,this._actionWidgetService=c,this._instantiationService=d,this._activeCodeActions=this._register(new vr),this._showDisabled=!1,this._disposed=!1,this._editor=e,this._model=this._register(new CWe(this._editor,s.codeActionProvider,t,n,o,l)),this._register(this._model.onDidChangeState(u=>this.update(u))),this._lightBulbWidget=new _f(()=>{const u=this._editor.getContribution(op.ID);return u&&this._register(u.onClick(h=>this.showCodeActionList(h.actions,h,{includeDisabledActions:!1,fromLightbulb:!0}))),u}),this._resolver=r.createInstance($k),this._register(this._editor.onDidLayoutChange(()=>this._actionWidgetService.hide()))}dispose(){this._disposed=!0,super.dispose()}showCodeActions(e,t,n){return this.showCodeActionList(t,n,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,n,r){var s;if(!this._editor.hasModel())return;(s=eo.get(this._editor))===null||s===void 0||s.closeMessage();const o=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:n,autoApply:r,context:{notAvailableMessage:e,position:o}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e,t,n){return Wb(this,void 0,void 0,function*(){try{yield this._instantiationService.invokeFunction(nWe,e,zk.FromCodeActions,{preview:n,editor:this._editor})}finally{t&&this._trigger({type:2,triggerAction:so.QuickFix,filter:{}})}})}update(e){var t,n,r,s,o,a,l;return Wb(this,void 0,void 0,function*(){if(e.type!==1){(t=this._lightBulbWidget.rawValue)===null||t===void 0||t.hide();return}let c;try{c=yield e.actions}catch(d){ut(d);return}if(!this._disposed)if((n=this._lightBulbWidget.value)===null||n===void 0||n.update(c,e.trigger,e.position),e.trigger.type===1){if(!((r=e.trigger.filter)===null||r===void 0)&&r.include){const u=this.tryGetValidActionToApply(e.trigger,c);if(u){try{(s=this._lightBulbWidget.value)===null||s===void 0||s.hide(),yield this._applyCodeAction(u,!1,!1)}finally{c.dispose()}return}if(e.trigger.context){const h=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,c);if(h&&h.action.disabled){(o=eo.get(this._editor))===null||o===void 0||o.showMessage(h.action.disabled,e.trigger.context.position),c.dispose();return}}}const d=!!(!((a=e.trigger.filter)===null||a===void 0)&&a.include);if(e.trigger.context&&(!c.allActions.length||!d&&!c.validActions.length)){(l=eo.get(this._editor))===null||l===void 0||l.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=c,c.dispose();return}this._activeCodeActions.value=c,this.showCodeActionList(c,this.toCoords(e.position),{includeDisabledActions:d,fromLightbulb:!1})}else this._actionWidgetService.isVisible?c.dispose():this._activeCodeActions.value=c})}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:n})=>n.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}showCodeActionList(e,t,n){return Wb(this,void 0,void 0,function*(){const r=this._editor.createDecorationsCollection(),s=this._editor.getDomNode();if(!s)return;const o=n.includeDisabledActions&&(this._showDisabled||e.validActions.length===0)?e.allActions:e.validActions;if(!o.length)return;const a=U.isIPosition(t)?this.toCoords(t):t,l={onSelect:(c,d)=>Wb(this,void 0,void 0,function*(){this._applyCodeAction(c,!0,!!d),this._actionWidgetService.hide(),r.clear()}),onHide:()=>{var c;(c=this._editor)===null||c===void 0||c.focus(),r.clear()},onHover:(c,d)=>Wb(this,void 0,void 0,function*(){var u;if(yield c.resolve(d),!d.isCancellationRequested)return{canPreview:!!(!((u=c.action.edit)===null||u===void 0)&&u.edits.length)}}),onFocus:c=>{var d,u;if(c&&c.highlightRange&&c.action.diagnostics){const h=[{range:c.action.diagnostics[0],options:Fx.DECORATION}];r.set(h);const f=c.action.diagnostics[0],g=(u=(d=this._editor.getModel())===null||d===void 0?void 0:d.getWordAtPosition({lineNumber:f.startLineNumber,column:f.startColumn}))===null||u===void 0?void 0:u.word;zh(p("editingNewSelection","Context: {0} at line {1} and column {2}.",g,f.startLineNumber,f.startColumn))}else r.clear()}};this._actionWidgetService.show("codeActionWidget",!0,aWe(o,this._shouldShowHeaders(),this._resolver.getResolver()),l,a,s,this._getActionBarActions(e,t,n))})}toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),n=Mi(this._editor.getDomNode()),r=n.left+t.left,s=n.top+t.top+t.height;return{x:r,y:s}}_shouldShowHeaders(){var e;const t=(e=this._editor)===null||e===void 0?void 0:e.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:t==null?void 0:t.uri})}_getActionBarActions(e,t,n){if(n.fromLightbulb)return[];const r=e.documentation.map(s=>{var o;return{id:s.id,label:s.title,tooltip:(o=s.tooltip)!==null&&o!==void 0?o:"",class:void 0,enabled:!0,run:()=>{var a;return this._commandService.executeCommand(s.id,...(a=s.arguments)!==null&&a!==void 0?a:[])}}});return n.includeDisabledActions&&e.validActions.length>0&&e.allActions.length!==e.validActions.length&&r.push(this._showDisabled?{id:"hideMoreActions",label:p("hideMoreActions","Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!1,this.showCodeActionList(e,t,n))}:{id:"showMoreActions",label:p("showMoreActions","Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!0,this.showCodeActionList(e,t,n))}),r}};Yh.ID="editor.contrib.codeActionController";Yh.DECORATION=dt.register({description:"quickfix-highlight",className:SWe});Yh=Fx=wWe([yd(1,fd),yd(2,ot),yd(3,rt),yd(4,Fe),yd(5,Cf),yd(6,oi),yd(7,Et),yd(8,zp),yd(9,rt)],Yh);Ka((i,e)=>{((r,s)=>{s&&e.addRule(`.monaco-editor ${r} { background-color: ${s}; }`)})(".quickfix-edit-highlight",i.getColor(Ic));const n=i.getColor(rh);n&&e.addRule(`.monaco-editor .quickfix-edit-highlight { border: 1px ${Rl(i.type)?"dotted":"solid"} ${n}; box-sizing: border-box; }`)});function fw(i){return re.regex(cJ.keys()[0],new RegExp("(\\s|^)"+No(i.value)+"\\b"))}const KB={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:p("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:p("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[p("args.schema.apply.first","Always apply the first returned code action."),p("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),p("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:p("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};function $p(i,e,t,n,r=so.Default){if(i.hasModel()){const s=Yh.get(i);s==null||s.manualTriggerAtCurrentPosition(e,r,t,n)}}class xWe extends Me{constructor(){super({id:jB,label:p("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:re.and(N.writable,N.hasCodeActionsProvider),kbOpts:{kbExpr:N.textInputFocus,primary:2137,weight:100}})}run(e,t){return $p(t,p("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,so.QuickFix)}}class TWe extends sr{constructor(){super({id:QQ,precondition:re.and(N.writable,N.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:KB}]}})}runEditorCommand(e,t,n){const r=yc.fromUser(n,{kind:et.Empty,apply:"ifSingle"});return $p(t,typeof(n==null?void 0:n.kind)=="string"?r.preferred?p("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",n.kind):p("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",n.kind):r.preferred?p("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):p("editor.action.codeAction.noneMessage","No code actions available"),{include:r.kind,includeSourceActions:!0,onlyIncludePreferredActions:r.preferred},r.apply)}}class kWe extends Me{constructor(){super({id:eJ,label:p("refactor.label","Refactor..."),alias:"Refactor...",precondition:re.and(N.writable,N.hasCodeActionsProvider),kbOpts:{kbExpr:N.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:re.and(N.writable,fw(et.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:KB}]}})}run(e,t,n){const r=yc.fromUser(n,{kind:et.Refactor,apply:"never"});return $p(t,typeof(n==null?void 0:n.kind)=="string"?r.preferred?p("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",n.kind):p("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",n.kind):r.preferred?p("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):p("editor.action.refactor.noneMessage","No refactorings available"),{include:et.Refactor.contains(r.kind)?r.kind:et.None,onlyIncludePreferredActions:r.preferred},r.apply,so.Refactor)}}class LWe extends Me{constructor(){super({id:tJ,label:p("source.label","Source Action..."),alias:"Source Action...",precondition:re.and(N.writable,N.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:re.and(N.writable,fw(et.Source))},description:{description:"Source Action...",args:[{name:"args",schema:KB}]}})}run(e,t,n){const r=yc.fromUser(n,{kind:et.Source,apply:"never"});return $p(t,typeof(n==null?void 0:n.kind)=="string"?r.preferred?p("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",n.kind):p("editor.action.source.noneMessage.kind","No source actions for '{0}' available",n.kind):r.preferred?p("editor.action.source.noneMessage.preferred","No preferred source actions available"):p("editor.action.source.noneMessage","No source actions available"),{include:et.Source.contains(r.kind)?r.kind:et.None,includeSourceActions:!0,onlyIncludePreferredActions:r.preferred},r.apply,so.SourceAction)}}class DWe extends Me{constructor(){super({id:zB,label:p("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:re.and(N.writable,fw(et.SourceOrganizeImports)),kbOpts:{kbExpr:N.textInputFocus,primary:1581,weight:100}})}run(e,t){return $p(t,p("editor.action.organize.noneMessage","No organize imports action available"),{include:et.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",so.OrganizeImports)}}class IWe extends Me{constructor(){super({id:$B,label:p("fixAll.label","Fix All"),alias:"Fix All",precondition:re.and(N.writable,fw(et.SourceFixAll))})}run(e,t){return $p(t,p("fixAll.noneMessage","No fix all action available"),{include:et.SourceFixAll,includeSourceActions:!0},"ifSingle",so.FixAll)}}class RWe extends Me{constructor(){super({id:JQ,label:p("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:re.and(N.writable,fw(et.QuickFix)),kbOpts:{kbExpr:N.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})}run(e,t){return $p(t,p("editor.action.autoFix.noneMessage","No auto fixes available"),{include:et.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",so.AutoFix)}}$t(Yh.ID,Yh,3);$t(op.ID,op,4);ue(xWe);ue(kWe);ue(LWe);ue(DWe);ue(RWe);ue(IWe);ye(new TWe);qn.as(Zl.Configuration).registerConfiguration(Object.assign(Object.assign({},XD),{properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:p("showCodeActionHeaders","Enable/disable showing group headers in the Code Action menu."),default:!0}}}));qn.as(Zl.Configuration).registerConfiguration(Object.assign(Object.assign({},XD),{properties:{"editor.codeActionWidget.includeNearbyQuickfixes":{type:"boolean",scope:5,description:p("includeNearbyQuickfixes","Enable/disable showing nearest quickfix within a line when not currently on a diagnostic."),default:!1}}}));var PH=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class YM{constructor(){this.lenses=[],this._disposables=new ae}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const n of e.lenses)this.lenses.push({symbol:n,provider:t})}}function uJ(i,e,t){return PH(this,void 0,void 0,function*(){const n=i.ordered(e),r=new Map,s=new YM,o=n.map((a,l)=>PH(this,void 0,void 0,function*(){r.set(a,l);try{const c=yield Promise.resolve(a.provideCodeLenses(e,t));c&&s.add(c,a)}catch(c){Ii(c)}}));return yield Promise.all(o),s.lenses=s.lenses.sort((a,l)=>a.symbol.range.startLineNumber<l.symbol.range.startLineNumber?-1:a.symbol.range.startLineNumber>l.symbol.range.startLineNumber?1:r.get(a.provider)<r.get(l.provider)?-1:r.get(a.provider)>r.get(l.provider)?1:a.symbol.range.startColumn<l.symbol.range.startColumn?-1:a.symbol.range.startColumn>l.symbol.range.startColumn?1:0),s})}Bt.registerCommand("_executeCodeLensProvider",function(i,...e){let[t,n]=e;dn(Ye.isUri(t)),dn(typeof n=="number"||!n);const{codeLensProvider:r}=i.get(Fe),s=i.get(zn).getModel(t);if(!s)throw ia();const o=[],a=new ae;return uJ(r,s,xt.None).then(l=>{a.add(l);const c=[];for(const d of l.lenses)n==null||d.symbol.command?o.push(d.symbol):n-- >0&&d.provider.resolveCodeLens&&c.push(Promise.resolve(d.provider.resolveCodeLens(s,d.symbol,xt.None)).then(u=>o.push(u||d.symbol)));return Promise.all(c)}).then(()=>o).finally(()=>{setTimeout(()=>a.dispose(),100)})});var EWe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},NWe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const hJ=Lt("ICodeLensCache");class MH{constructor(e,t){this.lineCount=e,this.data=t}}let QM=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new bf(20,.75);const t="codelens/cache";Ud(()=>e.remove(t,1));const n="codelens/cache2",r=e.get(n,1,"{}");this._deserialize(r),Re.once(e.onWillSaveState)(s=>{s.reason===mk.SHUTDOWN&&e.store(n,this._serialize(),1,1)})}put(e,t){const n=t.lenses.map(o=>{var a;return{range:o.symbol.range,command:o.symbol.command&&{id:"",title:(a=o.symbol.command)===null||a===void 0?void 0:a.title}}}),r=new YM;r.add({lenses:n,dispose:()=>{}},this._fakeProvider);const s=new MH(e.getLineCount(),r);this._cache.set(e.uri.toString(),s)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,n]of this._cache){const r=new Set;for(const s of n.data.lenses)r.add(s.symbol.range.startLineNumber);e[t]={lineCount:n.lineCount,lines:[...r.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const n in t){const r=t[n],s=[];for(const a of r.lines)s.push({range:new D(a,1,a,11)});const o=new YM;o.add({lenses:s,dispose(){}},this._fakeProvider),this._cache.set(n,new MH(r.lineCount,o))}}catch{}}};QM=EWe([NWe(0,Za)],QM);Wt(hJ,QM,1);class AWe{constructor(e,t,n){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=n,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class RI{constructor(e,t){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${RI._idPool++}`,this.updatePosition(t),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}withCommands(e,t){this._commands.clear();const n=[];let r=!1;for(let s=0;s<e.length;s++){const o=e[s];if(o&&(r=!0,o.command)){const a=Th(o.command.title.trim());o.command.id?(n.push(ce("a",{id:String(s),title:o.command.tooltip,role:"button"},...a)),this._commands.set(String(s),o.command)):n.push(ce("span",{title:o.command.tooltip},...a)),s+1<e.length&&n.push(ce("span",void 0," | "))}}r?(br(this._domNode,...n),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):br(this._domNode,ce("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}RI._idPool=0;class sN{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){const t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let n=0,r=t.length;n<r;n++)this._addDecorationsCallbacks[n](t[n])}}const OH=dt.register({collapseOnReplaceEdit:!0,description:"codelens"});class FH{constructor(e,t,n,r,s,o){this._isDisposed=!1,this._editor=t,this._data=e,this._decorationIds=[];let a;const l=[];this._data.forEach((c,d)=>{c.symbol.command&&l.push(c.symbol),n.addDecoration({range:c.symbol.range,options:OH},u=>this._decorationIds[d]=u),a?a=D.plusRange(a,c.symbol.range):a=D.lift(c.symbol.range)}),this._viewZone=new AWe(a.startLineNumber-1,s,o),this._viewZoneId=r.addZone(this._viewZone),l.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(l,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new RI(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t==null||t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const n=this._editor.getModel().getDecorationRange(e),r=this._data[t].symbol;return!!(n&&D.isEmpty(r.range)===n.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((n,r)=>{t.addDecoration({range:n.symbol.range,options:OH},s=>this._decorationIds[r]=s)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const n=e.getDecorationRange(this._decorationIds[t]);n&&(this._data[t].symbol.range=n)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const n=e[t];if(n){const{symbol:r}=this._data[t];r.command=n.command||r.command}}}getCommand(e){var t;return(t=this._contentWidget)===null||t===void 0?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var PWe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Vb=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},fJ=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};let _1=class{constructor(e,t,n,r,s,o){this._editor=e,this._languageFeaturesService=t,this._commandService=r,this._notificationService=s,this._codeLensCache=o,this._disposables=new ae,this._localToDispose=new ae,this._lenses=[],this._oldCodeLensModels=new ae,this._provideCodeLensDebounce=n.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=n.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new fn(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{(a.hasChanged(50)||a.hasChanged(19)||a.hasChanged(18))&&this._updateLensStyle(),a.hasChanged(17)&&this._onModelChange()})),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(e=this._currentCodeLensModel)===null||e===void 0||e.dispose()}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(66)/this._editor.getOption(52));let t=this._editor.getOption(19);return(!t||t<5)&&(t=this._editor.getOption(52)*.9|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),n=this._editor.getOption(18),r=this._editor.getOption(50),{style:s}=this._editor.getContainerDomNode();s.setProperty("--vscode-editorCodeLens-lineHeight",`${e}px`),s.setProperty("--vscode-editorCodeLens-fontSize",`${t}px`),s.setProperty("--vscode-editorCodeLens-fontFeatureSettings",r.fontFeatureSettings),n&&(s.setProperty("--vscode-editorCodeLens-fontFamily",n),s.setProperty("--vscode-editorCodeLens-fontFamilyDefault",Qs.fontFamily)),this._editor.changeViewZones(o=>{for(const a of this._lenses)a.updateHeight(e,o)})}_localDispose(){var e,t,n;(e=this._getCodeLensModelPromise)===null||e===void 0||e.cancel(),this._getCodeLensModelPromise=void 0,(t=this._resolveCodeLensesPromise)===null||t===void 0||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(n=this._currentCodeLensModel)===null||n===void 0||n.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e||!this._editor.getOption(17)||e.isTooLargeForTokenization())return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e)){t&&this._localToDispose.add(Hh(()=>{const r=this._codeLensCache.get(e);t===r&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3));return}for(const r of this._languageFeaturesService.codeLensProvider.all(e))if(typeof r.onDidChange=="function"){const s=r.onDidChange(()=>n.schedule());this._localToDispose.add(s)}const n=new fn(()=>{var r;const s=Date.now();(r=this._getCodeLensModelPromise)===null||r===void 0||r.cancel(),this._getCodeLensModelPromise=Ui(o=>uJ(this._languageFeaturesService.codeLensProvider,e,o)),this._getCodeLensModelPromise.then(o=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=o,this._codeLensCache.put(e,o);const a=this._provideCodeLensDebounce.update(e,Date.now()-s);n.delay=a,this._renderCodeLensSymbols(o),this._resolveCodeLensesInViewportSoon()},ut)},this._provideCodeLensDebounce.get(e));this._localToDispose.add(n),this._localToDispose.add(st(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{var r;this._editor.changeDecorations(s=>{this._editor.changeViewZones(o=>{const a=[];let l=-1;this._lenses.forEach(d=>{!d.isValid()||l===d.getLineNumber()?a.push(d):(d.update(o),l=d.getLineNumber())});const c=new sN;a.forEach(d=>{d.dispose(c,o),this._lenses.splice(this._lenses.indexOf(d),1)}),c.commit(s)})}),n.schedule(),this._resolveCodeLensesScheduler.cancel(),(r=this._resolveCodeLensesPromise)===null||r===void 0||r.cancel(),this._resolveCodeLensesPromise=void 0})),this._localToDispose.add(this._editor.onDidFocusEditorWidget(()=>{n.schedule()})),this._localToDispose.add(this._editor.onDidBlurEditorText(()=>{n.cancel()})),this._localToDispose.add(this._editor.onDidScrollChange(r=>{r.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(st(()=>{if(this._editor.getModel()){const r=Hl.capture(this._editor);this._editor.changeDecorations(s=>{this._editor.changeViewZones(o=>{this._disposeAllLenses(s,o)})}),r.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(r=>{if(r.target.type!==9)return;let s=r.target.element;if((s==null?void 0:s.tagName)==="SPAN"&&(s=s.parentElement),(s==null?void 0:s.tagName)==="A")for(const o of this._lenses){const a=o.getCommand(s);if(a){this._commandService.executeCommand(a.id,...a.arguments||[]).catch(l=>this._notificationService.error(l));break}}})),n.schedule()}_disposeAllLenses(e,t){const n=new sN;for(const r of this._lenses)r.dispose(n,t);e&&n.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;const t=this._editor.getModel().getLineCount(),n=[];let r;for(const a of e.lenses){const l=a.symbol.range.startLineNumber;l<1||l>t||(r&&r[r.length-1].symbol.range.startLineNumber===l?r.push(a):(r=[a],n.push(r)))}if(!n.length&&!this._lenses.length)return;const s=Hl.capture(this._editor),o=this._getLayoutInfo();this._editor.changeDecorations(a=>{this._editor.changeViewZones(l=>{const c=new sN;let d=0,u=0;for(;u<n.length&&d<this._lenses.length;){const h=n[u][0].symbol.range.startLineNumber,f=this._lenses[d].getLineNumber();f<h?(this._lenses[d].dispose(c,l),this._lenses.splice(d,1)):f===h?(this._lenses[d].updateCodeLensSymbols(n[u],c),u++,d++):(this._lenses.splice(d,0,new FH(n[u],this._editor,c,l,o.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),d++,u++)}for(;d<this._lenses.length;)this._lenses[d].dispose(c,l),this._lenses.splice(d,1);for(;u<n.length;)this._lenses.push(new FH(n[u],this._editor,c,l,o.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),u++;c.commit(a)})}),s.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;(e=this._resolveCodeLensesPromise)===null||e===void 0||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const n=[],r=[];if(this._lenses.forEach(a=>{const l=a.computeIfNecessary(t);l&&(n.push(l),r.push(a))}),n.length===0)return;const s=Date.now(),o=Ui(a=>{const l=n.map((c,d)=>{const u=new Array(c.length),h=c.map((f,g)=>!f.symbol.command&&typeof f.provider.resolveCodeLens=="function"?Promise.resolve(f.provider.resolveCodeLens(t,f.symbol,a)).then(m=>{u[g]=m},Ii):(u[g]=f.symbol,Promise.resolve(void 0)));return Promise.all(h).then(()=>{!a.isCancellationRequested&&!r[d].isDisposed()&&r[d].updateCommands(u)})});return Promise.all(l)});this._resolveCodeLensesPromise=o,this._resolveCodeLensesPromise.then(()=>{const a=this._resolveCodeLensesDebounce.update(t,Date.now()-s);this._resolveCodeLensesScheduler.delay=a,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),o===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},a=>{ut(a),o===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}getModel(){var e;return fJ(this,void 0,void 0,function*(){return yield this._getCodeLensModelPromise,yield this._resolveCodeLensesPromise,!((e=this._currentCodeLensModel)===null||e===void 0)&&e.isDisposed?void 0:this._currentCodeLensModel})}};_1.ID="css.editor.codeLens";_1=PWe([Vb(1,Fe),Vb(2,pa),Vb(3,oi),Vb(4,wi),Vb(5,hJ)],_1);$t(_1.ID,_1,1);ue(class extends Me{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:N.hasCodeLensProvider,label:p("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return fJ(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(Xl),r=e.get(oi),s=e.get(wi),o=t.getSelection().positionLineNumber,a=t.getContribution(_1.ID);if(!a)return;const l=yield a.getModel();if(!l)return;const c=[];for(const h of l.lenses)h.symbol.command&&h.symbol.range.startLineNumber===o&&c.push({label:h.symbol.command.title,command:h.symbol.command});if(c.length===0)return;const d=yield n.pick(c,{canPickMany:!1,placeHolder:p("placeHolder","Select a command")});if(!d)return;let u=d.command;if(l.isDisposed){const h=yield a.getModel(),f=h==null?void 0:h.lenses.find(g=>{var m;return g.symbol.range.startLineNumber===o&&((m=g.symbol.command)===null||m===void 0?void 0:m.title)===u.title});if(!f||!f.symbol.command)return;u=f.symbol.command}try{yield r.executeCommand(u.id,...u.arguments||[])}catch(h){s.error(h)}})}});var MWe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},oN=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},OWe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class qB{constructor(e,t){this._editorWorkerClient=new e5(e,!1,"editorWorkerService",t)}provideDocumentColors(e,t){return OWe(this,void 0,void 0,function*(){return this._editorWorkerClient.computeDefaultDocumentColors(e.uri)})}provideColorPresentations(e,t,n){const r=t.range,s=t.color,o=s.alpha,a=new K(new Mt(Math.round(255*s.red),Math.round(255*s.green),Math.round(255*s.blue),o)),l=o?K.Format.CSS.formatRGB(a):K.Format.CSS.formatRGBA(a),c=o?K.Format.CSS.formatHSL(a):K.Format.CSS.formatHSLA(a),d=o?K.Format.CSS.formatHex(a):K.Format.CSS.formatHexA(a),u=[];return u.push({label:l,textEdit:{range:r,text:l}}),u.push({label:c,textEdit:{range:r,text:c}}),u.push({label:d,textEdit:{range:r,text:d}}),u}}let JM=class extends q{constructor(e,t,n){super(),this._register(n.colorProvider.register("*",new qB(e,t)))}};JM=MWe([oN(0,zn),oN(1,wn),oN(2,Fe)],JM);mI(JM);var gw=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function gJ(i,e,t,n=!0){return gw(this,void 0,void 0,function*(){return GB(new FWe,i,e,t,n)})}function pJ(i,e,t,n){return Promise.resolve(t.provideColorPresentations(i,e,n))}class FWe{constructor(){}compute(e,t,n,r){return gw(this,void 0,void 0,function*(){const s=yield e.provideDocumentColors(t,n);if(Array.isArray(s))for(const o of s)r.push({colorInfo:o,provider:e});return Array.isArray(s)})}}class BWe{constructor(){}compute(e,t,n,r){return gw(this,void 0,void 0,function*(){const s=yield e.provideDocumentColors(t,n);if(Array.isArray(s))for(const o of s)r.push({range:o.range,color:[o.color.red,o.color.green,o.color.blue,o.color.alpha]});return Array.isArray(s)})}}class WWe{constructor(e){this.colorInfo=e}compute(e,t,n,r){return gw(this,void 0,void 0,function*(){const s=yield e.provideColorPresentations(t,this.colorInfo,xt.None);return Array.isArray(s)&&r.push(...s),Array.isArray(s)})}}function GB(i,e,t,n,r){return gw(this,void 0,void 0,function*(){let s=!1,o;const a=[],l=e.ordered(t);for(let c=l.length-1;c>=0;c--){const d=l[c];if(d instanceof qB)o=d;else try{(yield i.compute(d,t,n,a))&&(s=!0)}catch(u){Ii(u)}}return s?a:o&&r?(yield i.compute(o,t,n,a),a):[]})}function mJ(i,e){const{colorProvider:t}=i.get(Fe),n=i.get(zn).getModel(e);if(!n)throw ia();const r=i.get(Et).getValue("editor.defaultColorDecorators",{resource:e});return{model:n,colorProviderRegistry:t,isDefaultColorDecoratorsEnabled:r}}Bt.registerCommand("_executeDocumentColorProvider",function(i,...e){const[t]=e;if(!(t instanceof Ye))throw ia();const{model:n,colorProviderRegistry:r,isDefaultColorDecoratorsEnabled:s}=mJ(i,t);return GB(new BWe,r,n,xt.None,s)});Bt.registerCommand("_executeColorPresentationProvider",function(i,...e){const[t,n]=e,{uri:r,range:s}=n;if(!(r instanceof Ye)||!Array.isArray(t)||t.length!==4||!D.isIRange(s))throw ia();const{model:o,colorProviderRegistry:a,isDefaultColorDecoratorsEnabled:l}=mJ(i,r),[c,d,u,h]=t;return GB(new WWe({range:s,color:{red:c,green:d,blue:u,alpha:h}}),a,o,xt.None,l)});var VWe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},aN=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},BH=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},eO;const _J=Object.create({});let Qh=eO=class extends q{constructor(e,t,n,r){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=n,this._localToDispose=this._register(new ae),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new jC(this._editor),this._decoratorLimitReporter=new HWe,this._colorDecorationClassRefs=this._register(new ae),this._debounceInformation=r.for(n.colorProvider,"Document Colors",{min:eO.RECOMPUTE_TIME}),this._register(e.onDidChangeModel(()=>{this._isColorDecoratorsEnabled=this.isEnabled(),this.updateColors()})),this._register(e.onDidChangeModelLanguage(()=>this.updateColors())),this._register(n.colorProvider.onDidChange(()=>this.updateColors())),this._register(e.onDidChangeConfiguration(s=>{const o=this._isColorDecoratorsEnabled;this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(145);const a=o!==this._isColorDecoratorsEnabled||s.hasChanged(21),l=s.hasChanged(145);(a||l)&&(this._isColorDecoratorsEnabled?this.updateColors():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(145),this.updateColors()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),n=this._configurationService.getValue(t);if(n&&typeof n=="object"){const r=n.colorDecorators;if(r&&r.enable!==void 0&&!r.enable)return r.enable}return this._editor.getOption(20)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}updateColors(){if(this.stop(),!this._isColorDecoratorsEnabled)return;const e=this._editor.getModel();!e||!this._languageFeaturesService.colorProvider.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new za,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(e)))})),this.beginCompute())}beginCompute(){return BH(this,void 0,void 0,function*(){this._computePromise=Ui(e=>BH(this,void 0,void 0,function*(){const t=this._editor.getModel();if(!t)return[];const n=new qr(!1),r=yield gJ(this._languageFeaturesService.colorProvider,t,e,this._isDefaultColorDecoratorsEnabled);return this._debounceInformation.update(t,n.elapsed()),r}));try{const e=yield this._computePromise;this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null}catch(e){ut(e)}})}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(n=>({range:{startLineNumber:n.colorInfo.range.startLineNumber,startColumn:n.colorInfo.range.startColumn,endLineNumber:n.colorInfo.range.endLineNumber,endColumn:n.colorInfo.range.endColumn},options:dt.EMPTY}));this._editor.changeDecorations(n=>{this._decorationsIds=n.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((r,s)=>this._colorDatas.set(r,e[s]))})}updateColorDecorators(e){this._colorDecorationClassRefs.clear();const t=[],n=this._editor.getOption(21);for(let s=0;s<e.length&&t.length<n;s++){const{red:o,green:a,blue:l,alpha:c}=e[s].colorInfo.color,d=new Mt(Math.round(o*255),Math.round(a*255),Math.round(l*255),c),u=`rgba(${d.r}, ${d.g}, ${d.b}, ${d.a})`,h=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:u}));t.push({range:{startLineNumber:e[s].colorInfo.range.startLineNumber,startColumn:e[s].colorInfo.range.startColumn,endLineNumber:e[s].colorInfo.range.endLineNumber,endColumn:e[s].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:uG,inlineClassName:`${h.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:_J}}})}const r=n<e.length?n:!1;this._decoratorLimitReporter.update(e.length,r),this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const n=t.getDecorationsInRange(D.fromPositions(e,e)).filter(r=>this._colorDatas.has(r.id));return n.length===0?null:this._colorDatas.get(n[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}};Qh.ID="editor.contrib.colorDetector";Qh.RECOMPUTE_TIME=1e3;Qh=eO=VWe([aN(1,Et),aN(2,Fe),aN(3,pa)],Qh);class HWe{constructor(){this._onDidChange=new H,this._computed=0,this._limited=!1}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}}$t(Qh.ID,Qh,1);class UWe{get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(e,t,n){this.presentationIndex=n,this._onColorFlushed=new H,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new H,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new H,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){let n=-1;for(let r=0;r<this.colorPresentations.length;r++)if(t.toLowerCase()===this.colorPresentations[r].label){n=r;break}if(n===-1){const r=t.split("(")[0].toLowerCase();for(let s=0;s<this.colorPresentations.length;s++)if(this.colorPresentations[s].label.toLowerCase().startsWith(r)){n=s;break}}n!==-1&&n!==this.presentationIndex&&(this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}}const xo=ce;class jWe extends q{constructor(e,t,n,r=!1){super(),this.model=t,this.showingStandaloneColorPicker=r,this._closeButton=null,this._domNode=xo(".colorpicker-header"),se(e,this._domNode),this._pickedColorNode=se(this._domNode,xo(".picked-color")),se(this._pickedColorNode,xo("span.codicon.codicon-color-mode")),this._pickedColorPresentation=se(this._pickedColorNode,document.createElement("span")),this._pickedColorPresentation.classList.add("picked-color-presentation");const s=p("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this._pickedColorNode.setAttribute("title",s),this._originalColorNode=se(this._domNode,xo(".original-color")),this._originalColorNode.style.backgroundColor=K.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=n.getColorTheme().getColor(HT)||K.white,this._register(n.onDidColorThemeChange(o=>{this.backgroundColor=o.getColor(HT)||K.white})),this._register(ee(this._pickedColorNode,Ce.CLICK,()=>this.model.selectNextColorPresentation())),this._register(ee(this._originalColorNode,Ce.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this._pickedColorNode.style.backgroundColor=K.Format.CSS.format(t.color)||"",this._pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color),this.showingStandaloneColorPicker&&(this._domNode.classList.add("standalone-colorpicker"),this._closeButton=this._register(new zWe(this._domNode)))}get closeButton(){return this._closeButton}get pickedColorNode(){return this._pickedColorNode}get originalColorNode(){return this._originalColorNode}onDidChangeColor(e){this._pickedColorNode.style.backgroundColor=K.Format.CSS.format(e)||"",this._pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:""}}class zWe extends q{constructor(e){super(),this._onClicked=this._register(new H),this.onClicked=this._onClicked.event,this._button=document.createElement("div"),this._button.classList.add("close-button"),se(e,this._button);const t=document.createElement("div");t.classList.add("close-button-inner-div"),se(this._button,t),se(t,xo(".button"+Qe.asCSSSelector(gi("color-picker-close",me.close,p("closeIcon","Icon to close the color picker"))))).classList.add("close-icon"),this._button.onclick=()=>{this._onClicked.fire()}}}class $We extends q{constructor(e,t,n,r=!1){super(),this.model=t,this.pixelRatio=n,this._insertButton=null,this._domNode=xo(".colorpicker-body"),se(e,this._domNode),this._saturationBox=new KWe(this._domNode,this.model,this.pixelRatio),this._register(this._saturationBox),this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this._saturationBox.onColorFlushed(this.flushColor,this)),this._opacityStrip=new qWe(this._domNode,this.model,r),this._register(this._opacityStrip),this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this._opacityStrip.onColorFlushed(this.flushColor,this)),this._hueStrip=new GWe(this._domNode,this.model,r),this._register(this._hueStrip),this._register(this._hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this._hueStrip.onColorFlushed(this.flushColor,this)),r&&(this._insertButton=this._register(new ZWe(this._domNode)),this._domNode.classList.add("standalone-colorpicker"))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const n=this.model.color.hsva;this.model.color=new K(new Sc(n.h,e,t,n.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new K(new Sc(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,n=(1-e)*360;this.model.color=new K(new Sc(n===360?0:n,t.s,t.v,t.a))}get domNode(){return this._domNode}get saturationBox(){return this._saturationBox}get enterButton(){return this._insertButton}layout(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}}class KWe extends q{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this._onDidChange=new H,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new H,this.onColorFlushed=this._onColorFlushed.event,this._domNode=xo(".saturation-wrap"),se(e,this._domNode),this._canvas=document.createElement("canvas"),this._canvas.className="saturation-box",se(this._domNode,this._canvas),this.selection=xo(".saturation-selection"),se(this._domNode,this.selection),this.layout(),this._register(ee(this._domNode,Ce.POINTER_DOWN,r=>this.onPointerDown(r))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}get domNode(){return this._domNode}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this.monitor=this._register(new Y1);const t=Mi(this._domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>this.onDidChangePosition(r.pageX-t.left,r.pageY-t.top),()=>null);const n=ee(e.target.ownerDocument,Ce.POINTER_UP,()=>{this._onColorFlushed.fire(),n.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const n=Math.max(0,Math.min(1,e/this.width)),r=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,r),this._onDidChange.fire({s:n,v:r})}layout(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new K(new Sc(e.h,1,1,1)),n=this._canvas.getContext("2d"),r=n.createLinearGradient(0,0,this._canvas.width,0);r.addColorStop(0,"rgba(255, 255, 255, 1)"),r.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),r.addColorStop(1,"rgba(255, 255, 255, 0)");const s=n.createLinearGradient(0,0,0,this._canvas.height);s.addColorStop(0,"rgba(0, 0, 0, 0)"),s.addColorStop(1,"rgba(0, 0, 0, 1)"),n.rect(0,0,this._canvas.width,this._canvas.height),n.fillStyle=K.Format.CSS.format(t),n.fill(),n.fillStyle=r,n.fill(),n.fillStyle=s,n.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(e){if(this.monitor&&this.monitor.isMonitoring())return;this.paint();const t=e.hsva;this.paintSelection(t.s,t.v)}}class bJ extends q{constructor(e,t,n=!1){super(),this.model=t,this._onDidChange=new H,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new H,this.onColorFlushed=this._onColorFlushed.event,n?(this.domNode=se(e,xo(".standalone-strip")),this.overlay=se(this.domNode,xo(".standalone-overlay"))):(this.domNode=se(e,xo(".strip")),this.overlay=se(this.domNode,xo(".overlay"))),this.slider=se(this.domNode,xo(".slider")),this.slider.style.top="0px",this._register(ee(this.domNode,Ce.POINTER_DOWN,r=>this.onPointerDown(r))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onDidChangeColor(e){const t=this.getValue(e);this.updateSliderPosition(t)}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._register(new Y1),n=Mi(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,s=>this.onDidChangeTop(s.pageY-n.top),()=>null);const r=ee(e.target.ownerDocument,Ce.POINTER_UP,()=>{this._onColorFlushed.fire(),r.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}class qWe extends bJ{constructor(e,t,n=!1){super(e,t,n),this.domNode.classList.add("opacity-strip"),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){super.onDidChangeColor(e);const{r:t,g:n,b:r}=e.rgba,s=new K(new Mt(t,n,r,1)),o=new K(new Mt(t,n,r,0));this.overlay.style.background=`linear-gradient(to bottom, ${s} 0%, ${o} 100%)`}getValue(e){return e.hsva.a}}class GWe extends bJ{constructor(e,t,n=!1){super(e,t,n),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class ZWe extends q{constructor(e){super(),this._onClicked=this._register(new H),this.onClicked=this._onClicked.event,this._button=se(e,document.createElement("button")),this._button.classList.add("insert-button"),this._button.textContent="Insert",this._button.onclick=t=>{this._onClicked.fire()}}get button(){return this._button}}class XWe extends $a{constructor(e,t,n,r,s=!1){super(),this.model=t,this.pixelRatio=n,this._register(F0.onDidChange(()=>this.layout()));const o=xo(".colorpicker-widget");e.appendChild(o),this.header=this._register(new jWe(o,this.model,r,s)),this.body=this._register(new $We(o,this.model,this.pixelRatio,s))}layout(){this.body.layout()}}var vJ=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},yJ=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},b1=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class YWe{constructor(e,t,n,r){this.owner=e,this.range=t,this.model=n,this.provider=r,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let Kk=class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=2}computeSync(e,t){return[]}computeAsync(e,t,n){return xi.fromPromise(this._computeAsync(e,t,n))}_computeAsync(e,t,n){return b1(this,void 0,void 0,function*(){if(!this._editor.hasModel())return[];const r=Qh.get(this._editor);if(!r)return[];for(const s of t){if(!r.isColorDecoration(s))continue;const o=r.getColorData(s.range.getStartPosition());if(o)return[yield CJ(this,this._editor.getModel(),o.colorInfo,o.provider)]}return[]})}renderHoverParts(e,t){return wJ(this,this._editor,this._themeService,t,e)}};Kk=vJ([yJ(1,qi)],Kk);class QWe{constructor(e,t,n,r){this.owner=e,this.range=t,this.model=n,this.provider=r}}let My=class{constructor(e,t){this._editor=e,this._themeService=t,this._color=null}createColorHover(e,t,n){return b1(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!Qh.get(this._editor))return null;const s=yield gJ(n,this._editor.getModel(),xt.None);let o=null,a=null;for(const u of s){const h=u.colorInfo;D.containsRange(h.range,e.range)&&(o=h,a=u.provider)}const l=o??e,c=a??t,d=!!o;return{colorHover:yield CJ(this,this._editor.getModel(),l,c),foundInEditor:d}})}updateEditorModel(e){return b1(this,void 0,void 0,function*(){if(!this._editor.hasModel())return;const t=e.model;let n=new D(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn);this._color&&(yield Bx(this._editor.getModel(),t,this._color,n,e),n=SJ(this._editor,n,t))})}renderHoverParts(e,t){return wJ(this,this._editor,this._themeService,t,e)}set color(e){this._color=e}get color(){return this._color}};My=vJ([yJ(1,qi)],My);function CJ(i,e,t,n){return b1(this,void 0,void 0,function*(){const r=e.getValueInRange(t.range),{red:s,green:o,blue:a,alpha:l}=t.color,c=new Mt(Math.round(s*255),Math.round(o*255),Math.round(a*255),l),d=new K(c),u=yield pJ(e,t,n,xt.None),h=new UWe(d,[],0);return h.colorPresentations=u||[],h.guessColorPresentation(d,r),i instanceof Kk?new YWe(i,D.lift(t.range),h,n):new QWe(i,D.lift(t.range),h,n)})}function wJ(i,e,t,n,r){if(n.length===0||!e.hasModel())return q.None;if(r.setMinimumDimensions){const h=e.getOption(66)+8;r.setMinimumDimensions(new Kt(302,h))}const s=new ae,o=n[0],a=e.getModel(),l=o.model,c=s.add(new XWe(r.fragment,l,e.getOption(141),t,i instanceof My));r.setColorPicker(c);let d=!1,u=new D(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn);if(i instanceof My){const h=n[0].model.color;i.color=h,Bx(a,l,h,u,o),s.add(l.onColorFlushed(f=>{i.color=f}))}else s.add(l.onColorFlushed(h=>b1(this,void 0,void 0,function*(){yield Bx(a,l,h,u,o),d=!0,u=SJ(e,u,l,r)})));return s.add(l.onDidChangeColor(h=>{Bx(a,l,h,u,o)})),s.add(e.onDidChangeModelContent(h=>{d?d=!1:(r.hide(),e.focus())})),s}function SJ(i,e,t,n){let r,s;if(t.presentation.textEdit){r=[t.presentation.textEdit],s=new D(t.presentation.textEdit.range.startLineNumber,t.presentation.textEdit.range.startColumn,t.presentation.textEdit.range.endLineNumber,t.presentation.textEdit.range.endColumn);const o=i.getModel()._setTrackedRange(null,s,3);i.pushUndoStop(),i.executeEdits("colorpicker",r),s=i.getModel()._getTrackedRange(o)||s}else r=[{range:e,text:t.presentation.label,forceMoveMarkers:!1}],s=e.setEndPosition(e.endLineNumber,e.startColumn+t.presentation.label.length),i.pushUndoStop(),i.executeEdits("colorpicker",r);return t.presentation.additionalTextEdits&&(r=[...t.presentation.additionalTextEdits],i.executeEdits("colorpicker",r),n&&n.hide()),i.pushUndoStop(),s}function Bx(i,e,t,n,r){return b1(this,void 0,void 0,function*(){const s=yield pJ(i,{range:n,color:{red:t.rgba.r/255,green:t.rgba.g/255,blue:t.rgba.b/255,alpha:t.rgba.a}},r.provider,xt.None);e.colorPresentations=s||[]})}function tO(i,e){return!!i[e]}class lN{constructor(e,t){this.target=e.target,this.isLeftClick=e.event.leftButton,this.isMiddleClick=e.event.middleButton,this.isRightClick=e.event.rightButton,this.hasTriggerModifier=tO(e.event,t.triggerModifier),this.hasSideBySideModifier=tO(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class WH{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=tO(e,t.triggerModifier)}}class wS{constructor(e,t,n,r){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=n,this.triggerSideBySideModifier=r}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function VH(i){return i==="altKey"?Ot?new wS(57,"metaKey",6,"altKey"):new wS(5,"ctrlKey",6,"altKey"):Ot?new wS(6,"altKey",57,"metaKey"):new wS(6,"altKey",5,"ctrlKey")}class EI extends q{constructor(e,t){var n;super(),this._onMouseMoveOrRelevantKeyDown=this._register(new H),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new H),this.onExecute=this._onExecute.event,this._onCancel=this._register(new H),this.onCancel=this._onCancel.event,this._editor=e,this._extractLineNumberFromMouseEvent=(n=t==null?void 0:t.extractLineNumberFromMouseEvent)!==null&&n!==void 0?n:r=>r.target.position?r.target.position.lineNumber:0,this._opts=VH(this._editor.getOption(77)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(r=>{if(r.hasChanged(77)){const s=VH(this._editor.getOption(77));if(this._opts.equals(s))return;this._opts=s,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(r=>this._onEditorMouseMove(new lN(r,this._opts)))),this._register(this._editor.onMouseDown(r=>this._onEditorMouseDown(new lN(r,this._opts)))),this._register(this._editor.onMouseUp(r=>this._onEditorMouseUp(new lN(r,this._opts)))),this._register(this._editor.onKeyDown(r=>this._onEditorKeyDown(new WH(r,this._opts)))),this._register(this._editor.onKeyUp(r=>this._onEditorKeyUp(new WH(r,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(r=>this._onDidChangeCursorSelection(r))),this._register(this._editor.onDidChangeModel(r=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(r=>{(r.scrollTopChanged||r.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=this._extractLineNumberFromMouseEvent(e)}_onEditorMouseUp(e){const t=this._extractLineNumberFromMouseEvent(e);this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}var JWe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Cd=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Jh=class extends o1{constructor(e,t,n,r,s,o,a,l,c,d,u,h,f){super(e,Object.assign(Object.assign({},r.getRawOptions()),{overflowWidgetsDomNode:r.getOverflowWidgetsDomNode()}),n,s,o,a,l,c,d,u,h,f),this._parentEditor=r,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(r.onDidChangeConfiguration(g=>this._onParentConfigurationChanged(g)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){aD(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};Jh=JWe([Cd(4,rt),Cd(5,Jt),Cd(6,oi),Cd(7,ot),Cd(8,qi),Cd(9,wi),Cd(10,yu),Cd(11,wn),Cd(12,Fe)],Jh);const HH=new K(new Mt(0,122,204)),eVe={showArrow:!0,showFrame:!0,className:"",frameColor:HH,arrowColor:HH,keepEditorSelection:!1},tVe="vs.editor.contrib.zoneWidget";class nVe{constructor(e,t,n,r,s,o,a,l){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=n,this.heightInLines=r,this.showInHiddenAreas=a,this.ordinal=l,this._onDomNodeTop=s,this._onComputedHeight=o}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}class iVe{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}class NI{constructor(e){this._editor=e,this._ruleName=NI._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}dispose(){this.hide(),N8(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){N8(this._ruleName),LA(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations.set([{range:D.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._decorations.clear()}}NI._IdGenerator=new eB(".arrow-decoration-");class rVe{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new ae,this.container=null,this._isShowing=!1,this.editor=e,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=Rd(t),aD(this.options,eVe,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(n=>{const r=this._getWidth(n);this.domNode.style.width=r+"px",this.domNode.style.left=this._getLeft(n)+"px",this._onWidth(r)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this._positionMarkerId.clear(),this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new NI(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){const e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){const e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){var t;if(this.domNode.style.height=`${e}px`,this.container){const n=e-this._decoratingElementsHeight();this.container.style.height=`${n}px`;const r=this.editor.getLayoutInfo();this._doLayout(n,this._getWidth(r))}(t=this._resizeSash)===null||t===void 0||t.layout()}get position(){const e=this._positionMarkerId.getRange(0);if(e)return e.getStartPosition()}show(e,t){const n=D.isIRange(e)?D.lift(e):D.fromPositions(e);this._isShowing=!0,this._showImpl(n,t),this._isShowing=!1,this._positionMarkerId.set([{range:n,options:dt.EMPTY}])}hide(){var e;this._viewZone&&(this.editor.changeViewZones(t=>{this._viewZone&&t.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),(e=this._arrow)===null||e===void 0||e.hide(),this._positionMarkerId.clear()}_decoratingElementsHeight(){const e=this.editor.getOption(66);let t=0;if(this.options.showArrow){const n=Math.round(e/3);t+=2*n}if(this.options.showFrame){const n=Math.round(e/9);t+=2*n}return t}_showImpl(e,t){const n=e.getStartPosition(),r=this.editor.getLayoutInfo(),s=this._getWidth(r);this.domNode.style.width=`${s}px`,this.domNode.style.left=this._getLeft(r)+"px";const o=document.createElement("div");o.style.overflow="hidden";const a=this.editor.getOption(66);if(!this.options.allowUnlimitedHeight){const h=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,h)}let l=0,c=0;if(this._arrow&&this.options.showArrow&&(l=Math.round(a/3),this._arrow.height=l,this._arrow.show(n)),this.options.showFrame&&(c=Math.round(a/9)),this.editor.changeViewZones(h=>{this._viewZone&&h.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new nVe(o,n.lineNumber,n.column,t,f=>this._onViewZoneTop(f),f=>this._onViewZoneHeight(f),this.options.showInHiddenAreas,this.options.ordinal),this._viewZone.id=h.addZone(this._viewZone),this._overlayWidget=new iVe(tVe+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const h=this.options.frameWidth?this.options.frameWidth:c;this.container.style.borderTopWidth=h+"px",this.container.style.borderBottomWidth=h+"px"}const d=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=l+"px",this.container.style.height=d+"px",this.container.style.overflow="hidden"),this._doLayout(d,s),this.options.keepEditorSelection||this.editor.setSelection(e);const u=this.editor.getModel();if(u){const h=u.validateRange(new D(e.startLineNumber,1,e.endLineNumber+1,1));this.revealRange(h,h.startLineNumber===u.getLineCount())}}revealRange(e,t){t?this.editor.revealLineNearTop(e.endLineNumber,0):this.editor.revealRange(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new Fr(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){const n=(t.currentY-e.startY)/this.editor.getOption(66),r=n<0?Math.ceil(n):Math.floor(n),s=e.heightInLines+r;s>5&&s<35&&this._relayout(s)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}var xJ=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},TJ=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const kJ=Lt("IPeekViewService");Wt(kJ,class{constructor(){this._widgets=new Map}addExclusiveWidget(i,e){const t=this._widgets.get(i);t&&(t.listener.dispose(),t.widget.dispose());const n=()=>{const r=this._widgets.get(i);r&&r.widget===e&&(r.listener.dispose(),this._widgets.delete(i))};this._widgets.set(i,{widget:e,listener:e.onDidClose(n)})}},1);var Bs;(function(i){i.inPeekEditor=new Ne("inReferenceSearchEditor",!0,p("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),i.notInPeekEditor=i.inPeekEditor.toNegated()})(Bs||(Bs={}));let Oy=class{constructor(e,t){e instanceof Jh&&Bs.inPeekEditor.bindTo(t)}dispose(){}};Oy.ID="editor.contrib.referenceController";Oy=xJ([TJ(1,ot)],Oy);$t(Oy.ID,Oy,0);function sVe(i){const e=i.get(Jt).getFocusedCodeEditor();return e instanceof Jh?e.getParentEditor():e}const oVe={headerBackgroundColor:K.white,primaryHeadingColor:K.fromHex("#333333"),secondaryHeadingColor:K.fromHex("#6c6c6cb3")};let qk=class extends rVe{constructor(e,t,n){super(e,t),this.instantiationService=n,this._onDidClose=new H,this.onDidClose=this._onDidClose.event,aD(this.options,oVe,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){const t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();const e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=ce(".head"),this._bodyElement=ce(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){this._titleElement=ce(".peekview-title"),this.options.supportOnTitleClick&&(this._titleElement.classList.add("clickable"),bi(this._titleElement,"click",s=>this._onTitleClick(s))),se(this._headElement,this._titleElement),this._fillTitleIcon(this._titleElement),this._primaryHeading=ce("span.filename"),this._secondaryHeading=ce("span.dirname"),this._metaHeading=ce("span.meta"),se(this._titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);const n=ce(".peekview-actions");se(this._headElement,n);const r=this._getActionBarOptions();this._actionbarWidget=new fa(n,r),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new vs("peekview.close",p("label.close","Close"),Qe.asClassName(me.close),!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:o3e.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:_r(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,Gs(this._metaHeading)):us(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const n=Math.ceil(this.editor.getOption(66)*1.2),r=Math.round(e-(n+2));this._doLayoutHead(n,t),this._doLayoutBody(r,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};qk=xJ([TJ(2,rt)],qk);const aVe=P("peekViewTitle.background",{dark:"#252526",light:"#F3F3F3",hcDark:K.black,hcLight:K.white},p("peekViewTitleBackground","Background color of the peek view title area.")),LJ=P("peekViewTitleLabel.foreground",{dark:K.white,light:K.black,hcDark:K.white,hcLight:La},p("peekViewTitleForeground","Color of the peek view title.")),DJ=P("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},p("peekViewTitleInfoForeground","Color of the peek view title info.")),lVe=P("peekView.border",{dark:Ms,light:Ms,hcDark:Rt,hcLight:Rt},p("peekViewBorder","Color of the peek view borders and arrow.")),cVe=P("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:K.black,hcLight:K.white},p("peekViewResultsBackground","Background color of the peek view result list."));P("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:K.white,hcLight:La},p("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list."));P("peekViewResult.fileForeground",{dark:K.white,light:"#1E1E1E",hcDark:K.white,hcLight:La},p("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list."));P("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},p("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list."));P("peekViewResult.selectionForeground",{dark:K.white,light:"#6C6C6C",hcDark:K.white,hcLight:La},p("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list."));const dh=P("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:K.black,hcLight:K.white},p("peekViewEditorBackground","Background color of the peek view editor."));P("peekViewEditorGutter.background",{dark:dh,light:dh,hcDark:dh,hcLight:dh},p("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor."));P("peekViewEditorStickyScroll.background",{dark:dh,light:dh,hcDark:dh,hcLight:dh},p("peekViewEditorStickScrollBackground","Background color of sticky scroll in the peek view editor."));P("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},p("peekViewResultsMatchHighlight","Match highlight color in the peek view result list."));P("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},p("peekViewEditorMatchHighlight","Match highlight color in the peek view editor."));P("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:Rn,hcLight:Rn},p("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));var dVe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class ef{constructor(e,t,n,r){this.isProviderFirst=e,this.parent=t,this.link=n,this._rangeCallback=r,this.id=BP.nextId()}get uri(){return this.link.uri}get range(){var e,t;return(t=(e=this._range)!==null&&e!==void 0?e:this.link.targetSelectionRange)!==null&&t!==void 0?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=(e=this.parent.getPreview(this))===null||e===void 0?void 0:e.preview(this.range);return t?p({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"{0} in {1} on line {2} at column {3}",t.value,ha(this.uri),this.range.startLineNumber,this.range.startColumn):p("aria.oneReference","in {0} on line {1} at column {2}",ha(this.uri),this.range.startLineNumber,this.range.startColumn)}}class uVe{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const n=this._modelReference.object.textEditorModel;if(!n)return;const{startLineNumber:r,startColumn:s,endLineNumber:o,endColumn:a}=e,l=n.getWordUntilPosition({lineNumber:r,column:s-t}),c=new D(r,l.startColumn,r,s),d=new D(o,a,o,1073741824),u=n.getValueInRange(c).replace(/^\s+/,""),h=n.getValueInRange(e),f=n.getValueInRange(d).replace(/\s+$/,"");return{value:u+h+f,highlight:{start:u.length,end:u.length+h.length}}}}class Fy{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new Hr}dispose(){an(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?p("aria.fileReferences.1","1 symbol in {0}, full path {1}",ha(this.uri),this.uri.fsPath):p("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,ha(this.uri),this.uri.fsPath)}resolve(e){return dVe(this,void 0,void 0,function*(){if(this._previews.size!==0)return this;for(const t of this.children)if(!this._previews.has(t.uri))try{const n=yield e.createModelReference(t.uri);this._previews.set(t.uri,new uVe(n))}catch(n){ut(n)}return this})}}class to{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new H,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[n]=e;e.sort(to._compareReferences);let r;for(const s of e)if((!r||!En.isEqual(r.uri,s.uri,!0))&&(r=new Fy(this,s.uri),this.groups.push(r)),r.children.length===0||to._compareReferences(s,r.children[r.children.length-1])!==0){const o=new ef(n===s,r,s,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(o),r.children.push(o)}}dispose(){an(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new to(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?p("aria.result.0","No results found"):this.references.length===1?p("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?p("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):p("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){const{parent:n}=e;let r=n.children.indexOf(e);const s=n.children.length,o=n.parent.groups.length;return o===1||t&&r+1<s||!t&&r>0?(t?r=(r+1)%s:r=(r+s-1)%s,n.children[r]):(r=n.parent.groups.indexOf(n),t?(r=(r+1)%o,n.parent.groups[r].children[0]):(r=(r+o-1)%o,n.parent.groups[r].children[n.parent.groups[r].children.length-1]))}nearestReference(e,t){const n=this.references.map((r,s)=>({idx:s,prefixLen:zg(r.uri.toString(),e.toString()),offsetDist:Math.abs(r.range.startLineNumber-t.lineNumber)*100+Math.abs(r.range.startColumn-t.column)})).sort((r,s)=>r.prefixLen>s.prefixLen?-1:r.prefixLen<s.prefixLen?1:r.offsetDist<s.offsetDist?-1:r.offsetDist>s.offsetDist?1:0)[0];if(n)return this.references[n.idx]}referenceAt(e,t){for(const n of this.references)if(n.uri.toString()===e.toString()&&D.containsPosition(n.range,t))return n}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return En.compare(e.uri,t.uri)||D.compareRangesUsingStarts(e.range,t.range)}}var AI=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},PI=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},nO;let iO=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof to||e instanceof Fy}getChildren(e){if(e instanceof to)return e.groups;if(e instanceof Fy)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};iO=AI([PI(0,Vs)],iO);class hVe{getHeight(){return 23}getTemplateId(e){return e instanceof Fy?By.id:pw.id}}let rO=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof ef){const n=(t=e.parent.getPreview(e))===null||t===void 0?void 0:t.preview(e.range);if(n)return n.value}return ha(e.uri)}};rO=AI([PI(0,bn)],rO);class fVe{getId(e){return e instanceof ef?e.id:e.uri}}let sO=class extends q{constructor(e,t){super(),this._labelService=t;const n=document.createElement("div");n.classList.add("reference-file"),this.file=this._register(new Rk(n,{supportHighlights:!0})),this.badge=new lM(se(n,ce(".count")),{},gY),e.appendChild(n)}set(e,t){const n=$D(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(n,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});const r=e.children.length;this.badge.setCount(r),r>1?this.badge.setTitleFormat(p("referencesCount","{0} references",r)):this.badge.setTitleFormat(p("referenceCount","{0} reference",r))}};sO=AI([PI(1,a1)],sO);let By=nO=class{constructor(e){this._instantiationService=e,this.templateId=nO.id}renderTemplate(e){return this._instantiationService.createInstance(sO,e)}renderElement(e,t,n){n.set(e.element,JC(e.filterData))}disposeTemplate(e){e.dispose()}};By.id="FileReferencesRenderer";By=nO=AI([PI(0,rt)],By);class gVe{constructor(e){this.label=new Lh(e)}set(e,t){var n;const r=(n=e.parent.getPreview(e))===null||n===void 0?void 0:n.preview(e.range);if(!r||!r.value)this.label.set(`${ha(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:s,highlight:o}=r;t&&!El.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(s,JC(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(s,[o]))}}}class pw{constructor(){this.templateId=pw.id}renderTemplate(e){return new gVe(e)}renderElement(e,t,n){n.set(e.element,e.filterData)}disposeTemplate(){}}pw.id="OneReferenceRenderer";class pVe{getWidgetAriaLabel(){return p("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var mVe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},wd=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},UH=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class MI{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new ae,this._callOnModelChange=new ae,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e){for(const t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],n=[];for(let r=0,s=e.children.length;r<s;r++){const o=e.children[r];this._decorationIgnoreSet.has(o.id)||o.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:o.range,options:MI.DecorationOptions}),n.push(r))}this._editor.changeDecorations(r=>{const s=r.deltaDecorations([],t);for(let o=0;o<s.length;o++)this._decorations.set(s[o],e.children[n[o]])})}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(const[n,r]of this._decorations){const s=t.getDecorationRange(n);if(!s)continue;let o=!1;if(!D.equalsRange(s,r.range)){if(D.spansMultipleLines(s))o=!0;else{const a=r.range.endColumn-r.range.startColumn,l=s.endColumn-s.startColumn;a!==l&&(o=!0)}o?(this._decorationIgnoreSet.add(r.id),e.push(n)):r.range=s}}for(let n=0,r=e.length;n<r;n++)this._decorations.delete(e[n]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}}MI.DecorationOptions=dt.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class _Ve{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,n;try{const r=JSON.parse(e);t=r.ratio,n=r.heightInLines}catch{}return{ratio:t||.7,heightInLines:n||18}}}class bVe extends rM{}let oO=class extends qk{constructor(e,t,n,r,s,o,a,l,c,d,u,h){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},o),this._defaultTreeKeyboardSupport=t,this.layoutData=n,this._textModelResolverService=s,this._instantiationService=o,this._peekViewService=a,this._uriLabel=l,this._undoRedoService=c,this._keybindingService=d,this._languageService=u,this._languageConfigurationService=h,this._disposeOnNewModel=new ae,this._callOnDispose=new ae,this._onDidSelectReference=new H,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new Kt(0,0),this._applyTheme(r.getColorTheme()),this._callOnDispose.add(r.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),an(this._preview),an(this._previewNotAvailableMessage),an(this._tree),an(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(lVe)||K.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(aVe)||K.transparent,primaryHeadingColor:e.getColor(LJ),secondaryHeadingColor:e.getColor(DJ)})}show(e){super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=se(e,ce("div.messages")),us(this._messageContainer),this._splitView=new yY(e,{orientation:1}),this._previewContainer=se(e,ce("div.preview.inline"));const t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!0},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(Jh,this._previewContainer,t,{},this.editor),us(this._previewContainer),this._previewNotAvailableMessage=new Yc(p("missingPreviewMessage","no preview available"),Eo,Yc.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=se(e,ce("div.ref-tree.inline"));const n={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new pVe,keyboardNavigationLabelProvider:this._instantiationService.createInstance(rO),identityProvider:new fVe,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:cVe}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(bi(this._treeContainer,"keydown",s=>{s.equals(9)&&(this._keybindingService.dispatchEvent(s,s.target),s.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(bVe,"ReferencesWidget",this._treeContainer,new hVe,[this._instantiationService.createInstance(By),this._instantiationService.createInstance(pw)],this._instantiationService.createInstance(iO),n),this._splitView.addView({onDidChange:Re.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:s=>{this._preview.layout({height:this._dim.height,width:s})}},kk.Distribute),this._splitView.addView({onDidChange:Re.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:s=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${s}px`,this._tree.layout(this._dim.height,s)}},kk.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));const r=(s,o)=>{s instanceof ef&&(o==="show"&&this._revealReference(s,!1),this._onDidSelectReference.fire({element:s,kind:o,source:"tree"}))};this._tree.onDidOpen(s=>{s.sideBySide?r(s.element,"side"):s.editorOptions.pinned?r(s.element,"goto"):r(s.element,"show")}),us(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new Kt(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=p("noResults","No results"),Gs(this._messageContainer),Promise.resolve(void 0)):(us(this._messageContainer),this._decorationsManager=new MI(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:n}=e;if(t.detail!==2)return;const r=this._getFocusedReference();r&&this._onDidSelectReference.fire({element:{uri:r.uri,range:n.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),Gs(this._treeContainer),Gs(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof ef)return e;if(e instanceof Fy&&e.children.length>0)return e.children[0]}revealReference(e){return UH(this,void 0,void 0,function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})})}_revealReference(e,t){return UH(this,void 0,void 0,function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==bt.inMemory?this.setTitle(GAe(e.uri),this._uriLabel.getUriLabel($D(e.uri))):this.setTitle(p("peekView.alternateTitle","References"));const n=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent),this._tree.reveal(e));const r=yield n;if(!this._model){r.dispose();return}an(this._previewModelReference);const s=r.object;if(s){const o=this._preview.getModel()===s.textEditorModel?0:1,a=D.lift(e.range).collapseToStart();this._previewModelReference=r,this._preview.setModel(s.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,o)}else this._preview.setModel(this._previewNotAvailableMessage),r.dispose()})}};oO=mVe([wd(3,qi),wd(4,Vs),wd(5,rt),wd(6,kJ),wd(7,a1),wd(8,KD),wd(9,bn),wd(10,Fn),wd(11,wn)],oO);var vVe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},gm=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},jH=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Wx;const Kp=new Ne("referenceSearchVisible",!1,p("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let tf=Wx=class{static get(e){return e.getContribution(Wx.ID)}constructor(e,t,n,r,s,o,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=r,this._notificationService=s,this._instantiationService=o,this._storageService=a,this._configurationService=l,this._disposables=new ae,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=Kp.bindTo(n)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)===null||e===void 0||e.dispose(),(t=this._model)===null||t===void 0||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,n){let r;if(this._widget&&(r=this._widget.position),this.closeWidget(),r&&e.containsPosition(r))return;this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const s="peekViewLayout",o=_Ve.fromJSON(this._storageService.get(s,0,"{}"));this._widget=this._instantiationService.createInstance(oO,this._editor,this._defaultTreeKeyboardSupport,o),this._widget.setTitle(p("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(s,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{const{element:c,kind:d}=l;if(c)switch(d){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(c,!1,!1);break;case"side":this.openReference(c,!0,!1);break;case"goto":n?this._gotoReference(c,!0):this.openReference(c,!1,!0);break}}));const a=++this._requestIdPool;t.then(l=>{var c;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(c=this._model)===null||c===void 0||c.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(p("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));const d=this._editor.getModel().uri,u=new U(e.startLineNumber,e.startColumn),h=this._model.nearestReference(d,u);if(h)return this._widget.setSelection(h).then(()=>{this._widget&&this._editor.getOption(86)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return jH(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const n=this._model.nearestReference(this._editor.getModel().uri,t);if(!n)return;const r=this._model.nextOrPreviousReference(n,e),s=this._editor.hasTextFocus(),o=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(r),yield this._gotoReference(r,!1),s?this._editor.focus():this._widget&&o&&this._widget.focusOnPreviewEditor()})}revealReference(e){return jH(this,void 0,void 0,function*(){!this._editor.hasModel()||!this._model||!this._widget||(yield this._widget.revealReference(e))})}closeWidget(e=!0){var t,n;(t=this._widget)===null||t===void 0||t.dispose(),(n=this._model)===null||n===void 0||n.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e,t){var n;(n=this._widget)===null||n===void 0||n.hide(),this._ignoreModelChangeEvent=!0;const r=D.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:r,selectionSource:"code.jump",pinned:t}},this._editor).then(s=>{var o;if(this._ignoreModelChangeEvent=!1,!s||!this._widget){this.closeWidget();return}if(this._editor===s)this._widget.show(r),this._widget.focusOnReferenceTree();else{const a=Wx.get(s),l=this._model.clone();this.closeWidget(),s.focus(),a==null||a.toggleWidget(r,Ui(c=>Promise.resolve(l)),(o=this._peekMode)!==null&&o!==void 0?o:!1)}},s=>{this._ignoreModelChangeEvent=!1,ut(s)})}openReference(e,t,n){t||this.closeWidget();const{uri:r,range:s}=e;this._editorService.openCodeEditor({resource:r,options:{selection:s,selectionSource:"code.jump",pinned:n}},this._editor,t)}};tf.ID="editor.contrib.referencesController";tf=Wx=vVe([gm(2,ot),gm(3,Jt),gm(4,wi),gm(5,rt),gm(6,Za),gm(7,Et)],tf);function qp(i,e){const t=sVe(i);if(!t)return;const n=tf.get(t);n&&e(n)}Fs.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:Oi(2089,60),when:re.or(Kp,Bs.inPeekEditor),handler(i){qp(i,e=>{e.changeFocusBetweenPreviewAndReferences()})}});Fs.registerCommandAndKeybindingRule({id:"goToNextReference",weight:100-10,primary:62,secondary:[70],when:re.or(Kp,Bs.inPeekEditor),handler(i){qp(i,e=>{e.goToNextOrPreviousReference(!0)})}});Fs.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:100-10,primary:1086,secondary:[1094],when:re.or(Kp,Bs.inPeekEditor),handler(i){qp(i,e=>{e.goToNextOrPreviousReference(!1)})}});Bt.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");Bt.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");Bt.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");Bt.registerCommand("closeReferenceSearch",i=>qp(i,e=>e.closeWidget()));Fs.registerKeybindingRule({id:"closeReferenceSearch",weight:100-101,primary:9,secondary:[1033],when:re.and(Bs.inPeekEditor,re.not("config.editor.stablePeek"))});Fs.registerKeybindingRule({id:"closeReferenceSearch",weight:200+50,primary:9,secondary:[1033],when:re.and(Kp,re.not("config.editor.stablePeek"))});Fs.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:re.and(Kp,MY,mB.negate(),_B.negate()),handler(i){var e;const n=(e=i.get(_a).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof ef&&qp(i,r=>r.revealReference(n[0]))}});Fs.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:re.and(Kp,MY,mB.negate(),_B.negate()),handler(i){var e;const n=(e=i.get(_a).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof ef&&qp(i,r=>r.openReference(n[0],!0,!0))}});Bt.registerCommand("openReference",i=>{var e;const n=(e=i.get(_a).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof ef&&qp(i,r=>r.openReference(n[0],!1,!0))});var IJ=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},bv=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const ZB=new Ne("hasSymbols",!1,p("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),OI=Lt("ISymbolNavigationService");let aO=class{constructor(e,t,n,r){this._editorService=t,this._notificationService=n,this._keybindingService=r,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=ZB.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)===null||e===void 0||e.dispose(),(t=this._currentMessage)===null||t===void 0||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const n=new lO(this._editorService),r=n.onDidChange(s=>{if(this._ignoreEditorChange)return;const o=this._editorService.getActiveCodeEditor();if(!o)return;const a=o.getModel(),l=o.getPosition();if(!a||!l)return;let c=!1,d=!1;for(const u of t.references)if(T5(u.uri,a.uri))c=!0,d=d||D.containsPosition(u.range,l);else if(c)break;(!c||!d)&&this.reset()});this._currentState=Pa(n,r)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:D.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;(e=this._currentMessage)===null||e===void 0||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),n=t?p("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):p("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(n)}};aO=IJ([bv(0,ot),bv(1,Jt),bv(2,wi),bv(3,bn)],aO);Wt(OI,aO,1);ye(new class extends sr{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:ZB,kbOpts:{weight:100,primary:70}})}runEditorCommand(i,e){return i.get(OI).revealNext(e)}});Fs.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:ZB,primary:9,handler(i){i.get(OI).reset()}});let lO=class{constructor(e){this._listener=new Map,this._disposables=new ae,this._onDidChange=new H,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),an(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,Pa(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))===null||t===void 0||t.dispose(),this._listener.delete(e)}};lO=IJ([bv(0,Jt)],lO);var XB=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function mw(i,e,t,n){return XB(this,void 0,void 0,function*(){const s=t.ordered(i).map(a=>Promise.resolve(n(a,i,e)).then(void 0,l=>{Ii(l)})),o=yield Promise.all(s);return zc(o.flat())})}function FI(i,e,t,n){return mw(e,t,i,(r,s,o)=>r.provideDefinition(s,o,n))}function RJ(i,e,t,n){return mw(e,t,i,(r,s,o)=>r.provideDeclaration(s,o,n))}function EJ(i,e,t,n){return mw(e,t,i,(r,s,o)=>r.provideImplementation(s,o,n))}function NJ(i,e,t,n){return mw(e,t,i,(r,s,o)=>r.provideTypeDefinition(s,o,n))}function BI(i,e,t,n,r){return mw(e,t,i,(s,o,a)=>XB(this,void 0,void 0,function*(){const l=yield s.provideReferences(o,a,{includeDeclaration:!0},r);if(!n||!l||l.length!==2)return l;const c=yield s.provideReferences(o,a,{includeDeclaration:!1},r);return c&&c.length===1?c:l}))}function _w(i){return XB(this,void 0,void 0,function*(){const e=yield i(),t=new to(e,""),n=t.references.map(r=>r.link);return t.dispose(),n})}hd("_executeDefinitionProvider",(i,e,t)=>{const n=i.get(Fe),r=FI(n.definitionProvider,e,t,xt.None);return _w(()=>r)});hd("_executeTypeDefinitionProvider",(i,e,t)=>{const n=i.get(Fe),r=NJ(n.typeDefinitionProvider,e,t,xt.None);return _w(()=>r)});hd("_executeDeclarationProvider",(i,e,t)=>{const n=i.get(Fe),r=RJ(n.declarationProvider,e,t,xt.None);return _w(()=>r)});hd("_executeReferenceProvider",(i,e,t)=>{const n=i.get(Fe),r=BI(n.referenceProvider,e,t,!1,xt.None);return _w(()=>r)});hd("_executeImplementationProvider",(i,e,t)=>{const n=i.get(Fe),r=EJ(n.implementationProvider,e,t,xt.None);return _w(()=>r)});var Fa=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Hb,Ub,jb,SS,xS,TS,kS,LS;pr.appendMenuItem(E.EditorContext,{submenu:E.EditorContextPeek,title:p("peek.submenu","Peek"),group:"navigation",order:100});class v1{static is(e){return!e||typeof e!="object"?!1:!!(e instanceof v1||U.isIPosition(e.position)&&e.model)}constructor(e,t){this.model=e,this.position=t}}class ts extends Gl{static all(){return ts._allSymbolNavigationCommands.values()}static _patchConfig(e){const t=Object.assign(Object.assign({},e),{f1:!0});if(t.menu)for(const n of St.wrap(t.menu))(n.id===E.EditorContext||n.id===E.EditorContextPeek)&&(n.when=re.and(e.precondition,n.when));return t}constructor(e,t){super(ts._patchConfig(t)),this.configuration=e,ts._allSymbolNavigationCommands.set(t.id,this)}runEditorCommand(e,t,n,r){if(!t.hasModel())return Promise.resolve(void 0);const s=e.get(wi),o=e.get(Jt),a=e.get(Cf),l=e.get(OI),c=e.get(Fe),d=e.get(rt),u=t.getModel(),h=t.getPosition(),f=v1.is(n)?n:new v1(u,h),g=new Xh(t,5),m=SD(this._getLocationModel(c,f.model,f.position,g.token),g.token).then(y=>Fa(this,void 0,void 0,function*(){var b;if(!y||g.token.isCancellationRequested)return;jr(y.ariaMessage);let v;if(y.referenceAt(u.uri,h)){const w=this._getAlternativeCommand(t);!ts._activeAlternativeCommands.has(w)&&ts._allSymbolNavigationCommands.has(w)&&(v=ts._allSymbolNavigationCommands.get(w))}const C=y.references.length;if(C===0){if(!this.configuration.muteMessage){const w=u.getWordAtPosition(h);(b=eo.get(t))===null||b===void 0||b.showMessage(this._getNoResultFoundMessage(w),h)}}else if(C===1&&v)ts._activeAlternativeCommands.add(this.desc.id),d.invokeFunction(w=>v.runEditorCommand(w,t,n,r).finally(()=>{ts._activeAlternativeCommands.delete(this.desc.id)}));else return this._onResult(o,l,t,y,r)}),y=>{s.error(y)}).finally(()=>{g.dispose()});return a.showWhile(m,250),m}_onResult(e,t,n,r,s){return Fa(this,void 0,void 0,function*(){const o=this._getGoToPreference(n);if(!(n instanceof Jh)&&(this.configuration.openInPeek||o==="peek"&&r.references.length>1))this._openInPeek(n,r,s);else{const a=r.firstReference(),l=r.references.length>1&&o==="gotoAndPeek",c=yield this._openReference(n,e,a,this.configuration.openToSide,!l);l&&c?this._openInPeek(c,r,s):r.dispose(),o==="goto"&&t.put(a)}})}_openReference(e,t,n,r,s){return Fa(this,void 0,void 0,function*(){let o;if(fTe(n)&&(o=n.targetSelectionRange),o||(o=n.range),!o)return;const a=yield t.openCodeEditor({resource:n.uri,options:{selection:D.collapseToStart(o),selectionRevealType:3,selectionSource:"code.jump"}},e,r);if(a){if(s){const l=a.getModel(),c=a.createDecorationsCollection([{range:o,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&c.clear()},350)}return a}})}_openInPeek(e,t,n){const r=tf.get(e);r&&e.hasModel()?r.toggleWidget(n??e.getSelection(),Ui(s=>Promise.resolve(t)),this.configuration.openInPeek):t.dispose()}}ts._allSymbolNavigationCommands=new Map;ts._activeAlternativeCommands=new Set;class bw extends ts{_getLocationModel(e,t,n,r){return Fa(this,void 0,void 0,function*(){return new to(yield FI(e.definitionProvider,t,n,r),p("def.title","Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?p("noResultWord","No definition found for '{0}'",e.word):p("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleDefinitions}}Nn((Hb=class extends bw{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Hb.id,title:{value:p("actions.goToDecl.label","Go to Definition"),original:"Go to Definition",mnemonicTitle:p({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},precondition:re.and(N.hasDefinitionProvider,N.isInWalkThroughSnippet.toNegated()),keybinding:[{when:N.editorTextFocus,primary:70,weight:100},{when:re.and(N.editorTextFocus,NY),primary:2118,weight:100}],menu:[{id:E.EditorContext,group:"navigation",order:1.1},{id:E.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]}),Bt.registerCommandAlias("editor.action.goToDeclaration",Hb.id)}},Hb.id="editor.action.revealDefinition",Hb));Nn((Ub=class extends bw{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:Ub.id,title:{value:p("actions.goToDeclToSide.label","Open Definition to the Side"),original:"Open Definition to the Side"},precondition:re.and(N.hasDefinitionProvider,N.isInWalkThroughSnippet.toNegated()),keybinding:[{when:N.editorTextFocus,primary:Oi(2089,70),weight:100},{when:re.and(N.editorTextFocus,NY),primary:Oi(2089,2118),weight:100}]}),Bt.registerCommandAlias("editor.action.openDeclarationToTheSide",Ub.id)}},Ub.id="editor.action.revealDefinitionAside",Ub));Nn((jb=class extends bw{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:jb.id,title:{value:p("actions.previewDecl.label","Peek Definition"),original:"Peek Definition"},precondition:re.and(N.hasDefinitionProvider,Bs.notInPeekEditor,N.isInWalkThroughSnippet.toNegated()),keybinding:{when:N.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:E.EditorContextPeek,group:"peek",order:2}}),Bt.registerCommandAlias("editor.action.previewDeclaration",jb.id)}},jb.id="editor.action.peekDefinition",jb));class AJ extends ts{_getLocationModel(e,t,n,r){return Fa(this,void 0,void 0,function*(){return new to(yield RJ(e.declarationProvider,t,n,r),p("decl.title","Declarations"))})}_getNoResultFoundMessage(e){return e&&e.word?p("decl.noResultWord","No declaration found for '{0}'",e.word):p("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(58).multipleDeclarations}}Nn((SS=class extends AJ{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:SS.id,title:{value:p("actions.goToDeclaration.label","Go to Declaration"),original:"Go to Declaration",mnemonicTitle:p({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},precondition:re.and(N.hasDeclarationProvider,N.isInWalkThroughSnippet.toNegated()),menu:[{id:E.EditorContext,group:"navigation",order:1.3},{id:E.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}_getNoResultFoundMessage(e){return e&&e.word?p("decl.noResultWord","No declaration found for '{0}'",e.word):p("decl.generic.noResults","No declaration found")}},SS.id="editor.action.revealDeclaration",SS));Nn(class extends AJ{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:{value:p("actions.peekDecl.label","Peek Declaration"),original:"Peek Declaration"},precondition:re.and(N.hasDeclarationProvider,Bs.notInPeekEditor,N.isInWalkThroughSnippet.toNegated()),menu:{id:E.EditorContextPeek,group:"peek",order:3}})}});class PJ extends ts{_getLocationModel(e,t,n,r){return Fa(this,void 0,void 0,function*(){return new to(yield NJ(e.typeDefinitionProvider,t,n,r),p("typedef.title","Type Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?p("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):p("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleTypeDefinitions}}Nn((xS=class extends PJ{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:xS.ID,title:{value:p("actions.goToTypeDefinition.label","Go to Type Definition"),original:"Go to Type Definition",mnemonicTitle:p({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},precondition:re.and(N.hasTypeDefinitionProvider,N.isInWalkThroughSnippet.toNegated()),keybinding:{when:N.editorTextFocus,primary:0,weight:100},menu:[{id:E.EditorContext,group:"navigation",order:1.4},{id:E.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}},xS.ID="editor.action.goToTypeDefinition",xS));Nn((TS=class extends PJ{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:TS.ID,title:{value:p("actions.peekTypeDefinition.label","Peek Type Definition"),original:"Peek Type Definition"},precondition:re.and(N.hasTypeDefinitionProvider,Bs.notInPeekEditor,N.isInWalkThroughSnippet.toNegated()),menu:{id:E.EditorContextPeek,group:"peek",order:4}})}},TS.ID="editor.action.peekTypeDefinition",TS));class MJ extends ts{_getLocationModel(e,t,n,r){return Fa(this,void 0,void 0,function*(){return new to(yield EJ(e.implementationProvider,t,n,r),p("impl.title","Implementations"))})}_getNoResultFoundMessage(e){return e&&e.word?p("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):p("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(58).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(58).multipleImplementations}}Nn((kS=class extends MJ{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:kS.ID,title:{value:p("actions.goToImplementation.label","Go to Implementations"),original:"Go to Implementations",mnemonicTitle:p({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},precondition:re.and(N.hasImplementationProvider,N.isInWalkThroughSnippet.toNegated()),keybinding:{when:N.editorTextFocus,primary:2118,weight:100},menu:[{id:E.EditorContext,group:"navigation",order:1.45},{id:E.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]})}},kS.ID="editor.action.goToImplementation",kS));Nn((LS=class extends MJ{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:LS.ID,title:{value:p("actions.peekImplementation.label","Peek Implementations"),original:"Peek Implementations"},precondition:re.and(N.hasImplementationProvider,Bs.notInPeekEditor,N.isInWalkThroughSnippet.toNegated()),keybinding:{when:N.editorTextFocus,primary:3142,weight:100},menu:{id:E.EditorContextPeek,group:"peek",order:5}})}},LS.ID="editor.action.peekImplementation",LS));class OJ extends ts{_getNoResultFoundMessage(e){return e?p("references.no","No references found for '{0}'",e.word):p("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(58).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(58).multipleReferences}}Nn(class extends OJ{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:{value:p("goToReferences.label","Go to References"),original:"Go to References",mnemonicTitle:p({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},precondition:re.and(N.hasReferenceProvider,Bs.notInPeekEditor,N.isInWalkThroughSnippet.toNegated()),keybinding:{when:N.editorTextFocus,primary:1094,weight:100},menu:[{id:E.EditorContext,group:"navigation",order:1.45},{id:E.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]})}_getLocationModel(e,t,n,r){return Fa(this,void 0,void 0,function*(){return new to(yield BI(e.referenceProvider,t,n,!0,r),p("ref.title","References"))})}});Nn(class extends OJ{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:{value:p("references.action.label","Peek References"),original:"Peek References"},precondition:re.and(N.hasReferenceProvider,Bs.notInPeekEditor,N.isInWalkThroughSnippet.toNegated()),menu:{id:E.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,n,r){return Fa(this,void 0,void 0,function*(){return new to(yield BI(e.referenceProvider,t,n,!1,r),p("ref.title","References"))})}});class yVe extends ts{constructor(e,t,n){super(e,{id:"editor.action.goToLocation",title:{value:p("label.generic","Go to Any Symbol"),original:"Go to Any Symbol"},precondition:re.and(Bs.notInPeekEditor,N.isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=n}_getLocationModel(e,t,n,r){return Fa(this,void 0,void 0,function*(){return new to(this._references,p("generic.title","Locations"))})}_getNoResultFoundMessage(e){return e&&p("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return(t=this._gotoMultipleBehaviour)!==null&&t!==void 0?t:e.getOption(58).multipleReferences}_getAlternativeCommand(){return""}}Bt.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Ye},{name:"position",description:"The position at which to start",constraint:U.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(i,e,t,n,r,s,o)=>Fa(void 0,void 0,void 0,function*(){dn(Ye.isUri(e)),dn(U.isIPosition(t)),dn(Array.isArray(n)),dn(typeof r>"u"||typeof r=="string"),dn(typeof o>"u"||typeof o=="boolean");const a=i.get(Jt),l=yield a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(td(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(c=>{const d=new class extends yVe{_getNoResultFoundMessage(u){return s||super._getNoResultFoundMessage(u)}}({muteMessage:!s,openInPeek:!!o,openToSide:!1},n,r);c.get(rt).invokeFunction(d.run.bind(d),l)})})});Bt.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Ye},{name:"position",description:"The position at which to start",constraint:U.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(i,e,t,n,r)=>Fa(void 0,void 0,void 0,function*(){i.get(oi).executeCommand("editor.action.goToLocations",e,t,n,r,void 0,!0)})});Bt.registerCommand({id:"editor.action.findReferences",handler:(i,e,t)=>{dn(Ye.isUri(e)),dn(U.isIPosition(t));const n=i.get(Fe),r=i.get(Jt);return r.openCodeEditor({resource:e},r.getFocusedCodeEditor()).then(s=>{if(!td(s)||!s.hasModel())return;const o=tf.get(s);if(!o)return;const a=Ui(c=>BI(n.referenceProvider,s.getModel(),U.lift(t),!1,c).then(d=>new to(d,p("ref.title","References")))),l=new D(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(o.toggleWidget(l,a,!1))})}});Bt.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");var CVe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},cN=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},zH=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},vv;let cp=vv=class{constructor(e,t,n,r){this.textModelResolverService=t,this.languageService=n,this.languageFeaturesService=r,this.toUnhook=new ae,this.toUnhookForKeyboard=new ae,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e,this.linkDecorations=this.editor.createDecorationsCollection();const s=new EI(e);this.toUnhook.add(s),this.toUnhook.add(s.onMouseMoveOrRelevantKeyDown(([o,a])=>{this.startFindDefinitionFromMouse(o,a??void 0)})),this.toUnhook.add(s.onExecute(o=>{this.isEnabled(o)&&this.gotoDefinition(o.target.position,o.hasSideBySideModifier).catch(a=>{ut(a)}).finally(()=>{this.removeLinkDecorations()})})),this.toUnhook.add(s.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(vv.ID)}startFindDefinitionFromCursor(e){return zH(this,void 0,void 0,function*(){yield this.startFindDefinition(e),this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const n=e.target.position;this.startFindDefinition(n)}startFindDefinition(e){var t;return zH(this,void 0,void 0,function*(){this.toUnhookForKeyboard.clear();const n=e?(t=this.editor.getModel())===null||t===void 0?void 0:t.getWordAtPosition(e):null;if(!n){this.currentWordAtPosition=null,this.removeLinkDecorations();return}if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===n.startColumn&&this.currentWordAtPosition.endColumn===n.endColumn&&this.currentWordAtPosition.word===n.word)return;this.currentWordAtPosition=n;const r=new yQ(this.editor,15);this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=Ui(a=>this.findDefinition(e,a));let s;try{s=yield this.previousPromise}catch(a){ut(a);return}if(!s||!s.length||!r.validate(this.editor)){this.removeLinkDecorations();return}const o=s[0].originSelectionRange?D.lift(s[0].originSelectionRange):new D(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn);if(s.length>1){let a=o;for(const{originSelectionRange:l}of s)l&&(a=D.plusRange(a,l));this.addDecoration(a,new Lr().appendText(p("multipleResults","Click to show {0} definitions.",s.length)))}else{const a=s[0];if(!a.uri)return;this.textModelResolverService.createModelReference(a.uri).then(l=>{if(!l.object||!l.object.textEditorModel){l.dispose();return}const{object:{textEditorModel:c}}=l,{startLineNumber:d}=a.range;if(d<1||d>c.getLineCount()){l.dispose();return}const u=this.getPreviewValue(c,d,a),h=this.languageService.guessLanguageIdByFilepathOrFirstLine(c.uri);this.addDecoration(o,u?new Lr().appendCodeblock(h||"",u):void 0),l.dispose()})}})}getPreviewValue(e,t,n){let r=n.range;return r.endLineNumber-r.startLineNumber>=vv.MAX_SOURCE_PREVIEW_LINES&&(r=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,r)}stripIndentationFromPreviewRange(e,t,n){let s=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<n.endLineNumber;a++){const l=e.getLineFirstNonWhitespaceColumn(a);s=Math.min(s,l)}return e.getValueInRange(n).replace(new RegExp(`^\\s{${s-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const n=e.getLineFirstNonWhitespaceColumn(t),r=Math.min(e.getLineCount(),t+vv.MAX_SOURCE_PREVIEW_LINES);let s=t+1;for(;s<r;s++){const o=e.getLineFirstNonWhitespaceColumn(s);if(n===o)break}return new D(t,1,s+1,1)}addDecoration(e,t){const n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations.set([n])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(e,t){var n;return this.editor.hasModel()&&e.isLeftClick&&e.isNoneOrSingleMouseDown&&e.target.type===6&&!(((n=e.target.detail.injectedText)===null||n===void 0?void 0:n.options)instanceof Zh)&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){const n=this.editor.getModel();return n?FI(this.languageFeaturesService.definitionProvider,n,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(n=>{const r=!t&&this.editor.getOption(87)&&!this.isInPeekEditor(n);return new bw({openToSide:t,openInPeek:r,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(n)})}isInPeekEditor(e){const t=e.get(ot);return Bs.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}};cp.ID="editor.contrib.gotodefinitionatposition";cp.MAX_SOURCE_PREVIEW_LINES=8;cp=vv=CVe([cN(1,Vs),cN(2,Fn),cN(3,Fe)],cp);$t(cp.ID,cp,2);const DS=ce;class FJ extends q{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new KC(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}}class YB extends q{static render(e,t,n){return new YB(e,t,n)}constructor(e,t,n){super(),this.actionContainer=se(e,DS("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=se(this.actionContainer,DS("a.action")),this.action.setAttribute("role","button"),t.iconClass&&se(this.action,DS(`span.icon.${t.iconClass}`));const r=se(this.action,DS("span"));r.textContent=n?`${t.label} (${n})`:t.label,this._register(ee(this.actionContainer,Ce.CLICK,s=>{s.stopPropagation(),s.preventDefault(),t.run(this.actionContainer)})),this._register(ee(this.actionContainer,Ce.KEY_DOWN,s=>{const o=new kn(s);(o.equals(3)||o.equals(10))&&(s.stopPropagation(),s.preventDefault(),t.run(this.actionContainer))})),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function wVe(i,e){return i&&e?p("acessibleViewHint","Inspect this in the accessible view with {0}.",e):i?p("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}var SVe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},xVe=globalThis&&globalThis.__asyncValues||function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=i[s]&&function(o){return new Promise(function(a,l){o=i[s](o),r(a,l,o.done,o.value)})}}function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}};let TVe=class{constructor(e,t,n){this.value=e,this.isComplete=t,this.hasLoadingMessage=n}};class BJ extends q{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new H),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new fn(()=>this._triggerAsyncComputation(),0)),this._secondWaitScheduler=this._register(new fn(()=>this._triggerSyncComputation(),0)),this._loadingMessageScheduler=this._register(new fn(()=>this._triggerLoadingMessage(),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(60).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,t=!0){this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=pLe(e=>this._computer.computeAsync(e)),SVe(this,void 0,void 0,function*(){var e,t,n,r;try{try{for(var s=!0,o=xVe(this._asyncIterable),a;a=yield o.next(),e=a.done,!e;s=!0){r=a.value,s=!1;const l=r;l&&(this._result.push(l),this._fireResult())}}catch(l){t={error:l}}finally{try{!s&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(t)throw t.error}}this._asyncIterableDone=!0,(this._state===3||this._state===4)&&this._setState(0)}catch(l){ut(l)}})):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){this._state===3&&this._setState(4)}_fireResult(){if(this._state===1||this._state===2)return;const e=this._state===0,t=this._state===4;this._onResult.fire(new TVe(this._result.slice(0),e,t))}start(e){if(e===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}class dN{constructor(e,t,n,r){this.priority=e,this.range=t,this.initialMousePosX=n,this.initialMousePosY=r,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}class Vx{constructor(e,t,n,r,s,o){this.priority=e,this.owner=t,this.range=n,this.initialMousePosX=r,this.initialMousePosY=s,this.supportsMarkerHover=o,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}const Gp=new class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}};class QB{constructor(){this._onDidWillResize=new H,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new H,this.onDidResize=this._onDidResize.event,this._sashListener=new ae,this._size=new Kt(0,0),this._minSize=new Kt(0,0),this._maxSize=new Kt(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new Fr(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new Fr(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new Fr(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:xk.North}),this._southSash=new Fr(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:xk.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,n=0;this._sashListener.add(Re.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,n=0)})),this._sashListener.add(Re.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,n=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(r=>{e&&(n=r.currentX-r.startX,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(r=>{e&&(n=-(r.currentX-r.startX),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(r=>{e&&(t=-(r.currentY-r.startY),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(r=>{e&&(t=r.currentY-r.startY,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(Re.any(this._eastSash.onDidReset,this._westSash.onDidReset)(r=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(Re.any(this._northSash.onDidReset,this._southSash.onDidReset)(r=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,n,r){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=n?3:0,this._westSash.state=r?3:0}layout(e=this.size.height,t=this.size.width){const{height:n,width:r}=this._minSize,{height:s,width:o}=this._maxSize;e=Math.max(n,Math.min(s,e)),t=Math.max(r,Math.min(o,t));const a=new Kt(t,e);Kt.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}const kVe=30,LVe=24;class DVe extends q{constructor(e,t=new Kt(10,10)){super(),this._editor=e,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._resizableNode=this._register(new QB),this._contentPosition=null,this._isResizing=!1,this._resizableNode.domNode.style.position="absolute",this._resizableNode.minSize=Kt.lift(t),this._resizableNode.layout(t.height,t.width),this._resizableNode.enableSashes(!0,!0,!0,!0),this._register(this._resizableNode.onDidResize(n=>{this._resize(new Kt(n.dimension.width,n.dimension.height)),n.done&&(this._isResizing=!1)})),this._register(this._resizableNode.onDidWillResize(()=>{this._isResizing=!0}))}get isResizing(){return this._isResizing}getDomNode(){return this._resizableNode.domNode}getPosition(){return this._contentPosition}get position(){var e;return!((e=this._contentPosition)===null||e===void 0)&&e.position?U.lift(this._contentPosition.position):void 0}_availableVerticalSpaceAbove(e){const t=this._editor.getDomNode(),n=this._editor.getScrolledVisiblePosition(e);return!t||!n?void 0:Mi(t).top+n.top-kVe}_availableVerticalSpaceBelow(e){const t=this._editor.getDomNode(),n=this._editor.getScrolledVisiblePosition(e);if(!t||!n)return;const r=Mi(t),s=q1(t.ownerDocument.body),o=r.top+n.top+n.height;return s.height-o-LVe}_findPositionPreference(e,t){var n,r;const s=Math.min((n=this._availableVerticalSpaceBelow(t))!==null&&n!==void 0?n:1/0,e),o=Math.min((r=this._availableVerticalSpaceAbove(t))!==null&&r!==void 0?r:1/0,e),a=Math.min(Math.max(o,s),e),l=Math.min(e,a);let c;return this._editor.getOption(60).above?c=l<=o?1:2:c=l<=s?2:1,c===1?this._resizableNode.enableSashes(!0,!0,!1,!1):this._resizableNode.enableSashes(!1,!0,!0,!1),c}_resize(e){this._resizableNode.layout(e.height,e.width)}}var JB=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},vg=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Hx,rc;const $H=ce;let Gk=Hx=class extends q{constructor(e,t,n){super(),this._editor=e,this._instantiationService=t,this._keybindingService=n,this._currentResult=null,this._widget=this._register(this._instantiationService.createInstance(Rh,this._editor)),this._participants=[];for(const r of Gp.getAll())this._participants.push(this._instantiationService.createInstance(r,this._editor));this._participants.sort((r,s)=>r.hoverOrdinal-s.hoverOrdinal),this._computer=new Xk(this._editor,this._participants),this._hoverOperation=this._register(new BJ(this._editor,this._computer)),this._register(this._hoverOperation.onResult(r=>{if(!this._computer.anchor)return;const s=r.hasLoadingMessage?this._addLoadingMessage(r.value):r.value;this._withResult(new WJ(this._computer.anchor,s,r.isComplete))})),this._register(bi(this._widget.getDomNode(),"keydown",r=>{r.equals(9)&&this.hide()})),this._register(Gn.onDidChange(()=>{this._widget.position&&this._currentResult&&this._setCurrentResult(this._currentResult)}))}get widget(){return this._widget}maybeShowAt(e){if(this._widget.isResizing)return!0;const t=[];for(const r of this._participants)if(r.suggestHoverAnchor){const s=r.suggestHoverAnchor(e);s&&t.push(s)}const n=e.target;if(n.type===6&&t.push(new dN(0,n.range,e.event.posx,e.event.posy)),n.type===7){const r=this._editor.getOption(50).typicalHalfwidthCharacterWidth/2;!n.detail.isAfterLines&&typeof n.detail.horizontalDistanceToText=="number"&&n.detail.horizontalDistanceToText<r&&t.push(new dN(0,n.range,e.event.posx,e.event.posy))}return t.length===0?this._startShowingOrUpdateHover(null,0,0,!1,e):(t.sort((r,s)=>s.priority-r.priority),this._startShowingOrUpdateHover(t[0],0,0,!1,e))}startShowingAtRange(e,t,n,r){this._startShowingOrUpdateHover(new dN(0,e,void 0,void 0),t,n,r,null)}_startShowingOrUpdateHover(e,t,n,r,s){return!this._widget.position||!this._currentResult?e?(this._startHoverOperationIfNecessary(e,t,n,r,!1),!0):!1:this._editor.getOption(60).sticky&&s&&this._widget.isMouseGettingCloser(s.event.posx,s.event.posy)?(e&&this._startHoverOperationIfNecessary(e,t,n,r,!0),!0):e?e&&this._currentResult.anchor.equals(e)?!0:e.canAdoptVisibleHover(this._currentResult.anchor,this._widget.position)?(this._setCurrentResult(this._currentResult.filter(e)),this._startHoverOperationIfNecessary(e,t,n,r,!1),!0):(this._setCurrentResult(null),this._startHoverOperationIfNecessary(e,t,n,r,!1),!0):(this._setCurrentResult(null),!1)}_startHoverOperationIfNecessary(e,t,n,r,s){this._computer.anchor&&this._computer.anchor.equals(e)||(this._hoverOperation.cancel(),this._computer.anchor=e,this._computer.shouldFocus=r,this._computer.source=n,this._computer.insistOnKeepingHoverVisible=s,this._hoverOperation.start(t))}_setCurrentResult(e){this._currentResult!==e&&(e&&e.messages.length===0&&(e=null),this._currentResult=e,this._currentResult?this._renderMessages(this._currentResult.anchor,this._currentResult.messages):this._widget.hide())}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._setCurrentResult(null)}get isColorPickerVisible(){return this._widget.isColorPickerVisible}get isVisibleFromKeyboard(){return this._widget.isVisibleFromKeyboard}get isVisible(){return this._widget.isVisible}get isFocused(){return this._widget.isFocused}get isResizing(){return this._widget.isResizing}containsNode(e){return e?this._widget.getDomNode().contains(e):!1}_addLoadingMessage(e){if(this._computer.anchor){for(const t of this._participants)if(t.createLoadingMessage){const n=t.createLoadingMessage(this._computer.anchor);if(n)return e.slice(0).concat([n])}}return e}_withResult(e){this._widget.position&&this._currentResult&&this._currentResult.isComplete&&(!e.isComplete||this._computer.insistOnKeepingHoverVisible&&e.messages.length===0)||this._setCurrentResult(e)}_renderMessages(e,t){const{showAtPosition:n,showAtSecondaryPosition:r,highlightRange:s}=Hx.computeHoverRanges(this._editor,e.range,t),o=new ae,a=o.add(new Zk(this._keybindingService)),l=document.createDocumentFragment();let c=null;const d={fragment:l,statusBar:a,setColorPicker:h=>c=h,onContentsChanged:()=>this._widget.onContentsChanged(),setMinimumDimensions:h=>this._widget.setMinimumDimensions(h),hide:()=>this.hide()};for(const h of this._participants){const f=t.filter(g=>g.owner===h);f.length>0&&o.add(h.renderHoverParts(d,f))}const u=t.some(h=>h.isBeforeContent);if(a.hasContent&&l.appendChild(a.hoverElement),l.hasChildNodes()){if(s){const h=this._editor.createDecorationsCollection();h.set([{range:s,options:Hx._DECORATION_OPTIONS}]),o.add(st(()=>{h.clear()}))}this._widget.showAt(l,new RVe(c,n,r,this._editor.getOption(60).above,this._computer.shouldFocus,this._computer.source,u,e.initialMousePosX,e.initialMousePosY,o))}else o.dispose()}static computeHoverRanges(e,t,n){let r=1;if(e.hasModel()){const c=e._getViewModel(),d=c.coordinatesConverter,u=d.convertModelRangeToViewRange(t),h=new U(u.startLineNumber,c.getLineMinColumn(u.startLineNumber));r=d.convertViewPositionToModelPosition(h).column}const s=t.startLineNumber;let o=t.startColumn,a=n[0].range,l=null;for(const c of n)a=D.plusRange(a,c.range),c.range.startLineNumber===s&&c.range.endLineNumber===s&&(o=Math.max(Math.min(o,c.range.startColumn),r)),c.forceShowAtRange&&(l=c.range);return{showAtPosition:l?l.getStartPosition():new U(s,t.startColumn),showAtSecondaryPosition:l?l.getStartPosition():new U(s,o),highlightRange:a}}focus(){this._widget.focus()}scrollUp(){this._widget.scrollUp()}scrollDown(){this._widget.scrollDown()}scrollLeft(){this._widget.scrollLeft()}scrollRight(){this._widget.scrollRight()}pageUp(){this._widget.pageUp()}pageDown(){this._widget.pageDown()}goToTop(){this._widget.goToTop()}goToBottom(){this._widget.goToBottom()}};Gk._DECORATION_OPTIONS=dt.register({description:"content-hover-highlight",className:"hoverHighlight"});Gk=Hx=JB([vg(1,rt),vg(2,bn)],Gk);class WJ{constructor(e,t,n){this.anchor=e,this.messages=t,this.isComplete=n}filter(e){const t=this.messages.filter(n=>n.isValidForHoverAnchor(e));return t.length===this.messages.length?this:new IVe(this,this.anchor,t,this.isComplete)}}class IVe extends WJ{constructor(e,t,n,r){super(t,n,r),this.original=e}filter(e){return this.original.filter(e)}}class RVe{constructor(e,t,n,r,s,o,a,l,c,d){this.colorPicker=e,this.showAtPosition=t,this.showAtSecondaryPosition=n,this.preferAbove=r,this.stoleFocus=s,this.source=o,this.isBeforeContent=a,this.initialMousePosX=l,this.initialMousePosY=c,this.disposables=d,this.closestMouseDistance=void 0}}const KH=30,uN=10,EVe=6;let Rh=rc=class extends DVe{get isColorPickerVisible(){var e;return!!(!((e=this._visibleData)===null||e===void 0)&&e.colorPicker)}get isVisibleFromKeyboard(){var e;return((e=this._visibleData)===null||e===void 0?void 0:e.source)===1}get isVisible(){var e;return(e=this._hoverVisibleKey.get())!==null&&e!==void 0?e:!1}get isFocused(){var e;return(e=this._hoverFocusedKey.get())!==null&&e!==void 0?e:!1}constructor(e,t,n,r,s){const o=e.getOption(66)+8,a=150,l=new Kt(a,o);super(e,l),this._configurationService=n,this._accessibilityService=r,this._keybindingService=s,this._hover=this._register(new FJ),this._minimumSize=l,this._hoverVisibleKey=N.hoverVisible.bindTo(t),this._hoverFocusedKey=N.hoverFocused.bindTo(t),se(this._resizableNode.domNode,this._hover.containerDomNode),this._resizableNode.domNode.style.zIndex="50",this._register(this._editor.onDidLayoutChange(()=>this._layout())),this._register(this._editor.onDidChangeConfiguration(d=>{d.hasChanged(50)&&this._updateFont()}));const c=this._register(qc(this._resizableNode.domNode));this._register(c.onDidFocus(()=>{this._hoverFocusedKey.set(!0)})),this._register(c.onDidBlur(()=>{this._hoverFocusedKey.set(!1)})),this._setHoverData(void 0),this._layout(),this._editor.addContentWidget(this)}dispose(){var e;super.dispose(),(e=this._visibleData)===null||e===void 0||e.disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return rc.ID}static _applyDimensions(e,t,n){const r=typeof t=="number"?`${t}px`:t,s=typeof n=="number"?`${n}px`:n;e.style.width=r,e.style.height=s}_setContentsDomNodeDimensions(e,t){const n=this._hover.contentsDomNode;return rc._applyDimensions(n,e,t)}_setContainerDomNodeDimensions(e,t){const n=this._hover.containerDomNode;return rc._applyDimensions(n,e,t)}_setHoverWidgetDimensions(e,t){this._setContentsDomNodeDimensions(e,t),this._setContainerDomNodeDimensions(e,t),this._layoutContentWidget()}static _applyMaxDimensions(e,t,n){const r=typeof t=="number"?`${t}px`:t,s=typeof n=="number"?`${n}px`:n;e.style.maxWidth=r,e.style.maxHeight=s}_setHoverWidgetMaxDimensions(e,t){rc._applyMaxDimensions(this._hover.contentsDomNode,e,t),rc._applyMaxDimensions(this._hover.containerDomNode,e,t),this._hover.containerDomNode.style.setProperty("--vscode-hover-maxWidth",typeof e=="number"?`${e}px`:e),this._layoutContentWidget()}_hasHorizontalScrollbar(){const e=this._hover.scrollbar.getScrollDimensions();return e.scrollWidth>e.width}_adjustContentsBottomPadding(){const e=this._hover.contentsDomNode,t=`${this._hover.scrollbar.options.horizontalScrollbarSize}px`;e.style.paddingBottom!==t&&(e.style.paddingBottom=t)}_setAdjustedHoverWidgetDimensions(e){this._setHoverWidgetMaxDimensions("none","none");const t=e.width,n=e.height;this._setHoverWidgetDimensions(t,n),this._hasHorizontalScrollbar()&&(this._adjustContentsBottomPadding(),this._setContentsDomNodeDimensions(t,n-uN))}_updateResizableNodeMaxDimensions(){var e,t;const n=(e=this._findMaximumRenderingWidth())!==null&&e!==void 0?e:1/0,r=(t=this._findMaximumRenderingHeight())!==null&&t!==void 0?t:1/0;this._resizableNode.maxSize=new Kt(n,r),this._setHoverWidgetMaxDimensions(n,r)}_resize(e){var t,n;rc._lastDimensions=new Kt(e.width,e.height),this._setAdjustedHoverWidgetDimensions(e),this._resizableNode.layout(e.height,e.width),this._updateResizableNodeMaxDimensions(),this._hover.scrollbar.scanDomNode(),this._editor.layoutContentWidget(this),(n=(t=this._visibleData)===null||t===void 0?void 0:t.colorPicker)===null||n===void 0||n.layout()}_findAvailableSpaceVertically(){var e;const t=(e=this._visibleData)===null||e===void 0?void 0:e.showAtPosition;if(t)return this._positionPreference===1?this._availableVerticalSpaceAbove(t):this._availableVerticalSpaceBelow(t)}_findMaximumRenderingHeight(){const e=this._findAvailableSpaceVertically();if(!e)return;let t=EVe;return Array.from(this._hover.contentsDomNode.children).forEach(n=>{t+=n.clientHeight}),this._hasHorizontalScrollbar()&&(t+=uN),Math.min(e,t)}_isHoverTextOverflowing(){this._hover.containerDomNode.style.setProperty("--vscode-hover-whiteSpace","nowrap"),this._hover.containerDomNode.style.setProperty("--vscode-hover-sourceWhiteSpace","nowrap");const e=Array.from(this._hover.contentsDomNode.children).some(t=>t.scrollWidth>t.clientWidth);return this._hover.containerDomNode.style.removeProperty("--vscode-hover-whiteSpace"),this._hover.containerDomNode.style.removeProperty("--vscode-hover-sourceWhiteSpace"),e}_findMaximumRenderingWidth(){if(!this._editor||!this._editor.hasModel())return;const e=this._isHoverTextOverflowing(),t=typeof this._contentWidth>"u"?0:this._contentWidth-2;return e||this._hover.containerDomNode.clientWidth<t?q1(this._hover.containerDomNode.ownerDocument.body).width-14:this._hover.containerDomNode.clientWidth+2}isMouseGettingCloser(e,t){if(!this._visibleData)return!1;if(typeof this._visibleData.initialMousePosX>"u"||typeof this._visibleData.initialMousePosY>"u")return this._visibleData.initialMousePosX=e,this._visibleData.initialMousePosY=t,!1;const n=Mi(this.getDomNode());typeof this._visibleData.closestMouseDistance>"u"&&(this._visibleData.closestMouseDistance=qH(this._visibleData.initialMousePosX,this._visibleData.initialMousePosY,n.left,n.top,n.width,n.height));const r=qH(e,t,n.left,n.top,n.width,n.height);return r>this._visibleData.closestMouseDistance+4?!1:(this._visibleData.closestMouseDistance=Math.min(this._visibleData.closestMouseDistance,r),!0)}_setHoverData(e){var t;(t=this._visibleData)===null||t===void 0||t.disposables.dispose(),this._visibleData=e,this._hoverVisibleKey.set(!!e),this._hover.containerDomNode.classList.toggle("hidden",!e)}_layout(){const{fontSize:e,lineHeight:t}=this._editor.getOption(50),n=this._hover.contentsDomNode;n.style.fontSize=`${e}px`,n.style.lineHeight=`${t/e}`,this._updateMaxDimensions()}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContent(e){const t=this._hover.contentsDomNode;t.style.paddingBottom="",t.textContent="",t.appendChild(e)}_layoutContentWidget(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}_updateMaxDimensions(){const e=Math.max(this._editor.getLayoutInfo().height/4,250,rc._lastDimensions.height),t=Math.max(this._editor.getLayoutInfo().width*.66,500,rc._lastDimensions.width);this._setHoverWidgetMaxDimensions(t,e)}_render(e,t){this._setHoverData(t),this._updateFont(),this._updateContent(e),this._updateMaxDimensions(),this.onContentsChanged(),this._editor.render()}getPosition(){var e;return this._visibleData?{position:this._visibleData.showAtPosition,secondaryPosition:this._visibleData.showAtSecondaryPosition,positionAffinity:this._visibleData.isBeforeContent?3:void 0,preference:[(e=this._positionPreference)!==null&&e!==void 0?e:1]}:null}showAt(e,t){var n,r,s,o;if(!this._editor||!this._editor.hasModel())return;this._render(e,t);const a=ug(this._hover.containerDomNode),l=t.showAtPosition;this._positionPreference=(n=this._findPositionPreference(a,l))!==null&&n!==void 0?n:1,this.onContentsChanged(),t.stoleFocus&&this._hover.containerDomNode.focus(),(r=t.colorPicker)===null||r===void 0||r.layout();const c=wVe(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),(o=(s=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))===null||s===void 0?void 0:s.getAriaLabel())!==null&&o!==void 0?o:"");c&&(this._hover.contentsDomNode.ariaLabel=this._hover.contentsDomNode.textContent+", "+c)}hide(){if(!this._visibleData)return;const e=this._visibleData.stoleFocus||this._hoverFocusedKey.get();this._setHoverData(void 0),this._resizableNode.maxSize=new Kt(1/0,1/0),this._resizableNode.clearSashHoverState(),this._hoverFocusedKey.set(!1),this._editor.layoutContentWidget(this),e&&this._editor.focus()}_removeConstraintsRenderNormally(){const e=this._editor.getLayoutInfo();this._resizableNode.layout(e.height,e.width),this._setHoverWidgetDimensions("auto","auto")}_adjustHoverHeightForScrollbar(e){var t;const n=this._hover.containerDomNode,r=this._hover.contentsDomNode,s=(t=this._findMaximumRenderingHeight())!==null&&t!==void 0?t:1/0;this._setContainerDomNodeDimensions(Es(n),Math.min(s,e)),this._setContentsDomNodeDimensions(Es(r),Math.min(s,e-uN))}setMinimumDimensions(e){this._minimumSize=new Kt(Math.max(this._minimumSize.width,e.width),Math.max(this._minimumSize.height,e.height)),this._updateMinimumWidth()}_updateMinimumWidth(){const e=typeof this._contentWidth>"u"?this._minimumSize.width:Math.min(this._contentWidth,this._minimumSize.width);this._resizableNode.minSize=new Kt(e,this._minimumSize.height)}onContentsChanged(){var e;this._removeConstraintsRenderNormally();const t=this._hover.containerDomNode;let n=ug(t),r=Es(t);if(this._resizableNode.layout(n,r),this._setHoverWidgetDimensions(r,n),n=ug(t),r=Es(t),this._contentWidth=r,this._updateMinimumWidth(),this._resizableNode.layout(n,r),this._hasHorizontalScrollbar()&&(this._adjustContentsBottomPadding(),this._adjustHoverHeightForScrollbar(n)),!((e=this._visibleData)===null||e===void 0)&&e.showAtPosition){const s=ug(this._hover.containerDomNode);this._positionPreference=this._findPositionPreference(s,this._visibleData.showAtPosition)}this._layoutContentWidget()}focus(){this._hover.containerDomNode.focus()}scrollUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e-t.lineHeight})}scrollDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e+t.lineHeight})}scrollLeft(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e-KH})}scrollRight(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e+KH})}pageUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e-t})}pageDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e+t})}goToTop(){this._hover.scrollbar.setScrollPosition({scrollTop:0})}goToBottom(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})}};Rh.ID="editor.contrib.resizableContentHoverWidget";Rh._lastDimensions=new Kt(0,0);Rh=rc=JB([vg(1,ot),vg(2,Et),vg(3,yu),vg(4,bn)],Rh);let Zk=class extends q{get hasContent(){return this._hasContent}constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=$H("div.hover-row.status-bar"),this.actionsElement=se(this.hoverElement,$H("div.actions"))}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;return this._hasContent=!0,this._register(YB.render(this.actionsElement,e,n))}append(e){const t=se(this.actionsElement,e);return this._hasContent=!0,t}};Zk=JB([vg(0,bn)],Zk);class Xk{get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}get source(){return this._source}set source(e){this._source=e}get insistOnKeepingHoverVisible(){return this._insistOnKeepingHoverVisible}set insistOnKeepingHoverVisible(e){this._insistOnKeepingHoverVisible=e}constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1,this._source=0,this._insistOnKeepingHoverVisible=!1}static _getLineDecorations(e,t){if(t.type!==1&&!t.supportsMarkerHover)return[];const n=e.getModel(),r=t.range.startLineNumber;if(r>n.getLineCount())return[];const s=n.getLineMaxColumn(r);return e.getLineDecorations(r).filter(o=>{if(o.options.isWholeLine)return!0;const a=o.range.startLineNumber===r?o.range.startColumn:1,l=o.range.endLineNumber===r?o.range.endColumn:s;if(o.options.showIfCollapsed){if(a>t.range.startColumn+1||t.range.endColumn-1>l)return!1}else if(a>t.range.startColumn||t.range.endColumn>l)return!1;return!0})}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return xi.EMPTY;const n=Xk._getLineDecorations(this._editor,t);return xi.merge(this._participants.map(r=>r.computeAsync?r.computeAsync(t,n,e):xi.EMPTY))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=Xk._getLineDecorations(this._editor,this._anchor);let t=[];for(const n of this._participants)t=t.concat(n.computeSync(this._anchor,e));return zc(t)}}function qH(i,e,t,n,r,s){const o=t+r/2,a=n+s/2,l=Math.max(Math.abs(i-o)-r/2,0),c=Math.max(Math.abs(e-a)-s/2,0);return Math.sqrt(l*l+c*c)}const GH=ce;class A_ extends q{constructor(e,t,n){super(),this._renderDisposeables=this._register(new ae),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new FJ),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new pu({editor:this._editor},t,n)),this._computer=new NVe(this._editor),this._hoverOperation=this._register(new BJ(this._editor,this._computer)),this._register(this._hoverOperation.onResult(r=>{this._withResult(r.value)})),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(50)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return A_.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}startShowingAt(e){this._computer.lineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const n=document.createDocumentFragment();for(const r of t){const s=GH("div.hover-row.markdown-hover"),o=se(s,GH("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(r.value));o.appendChild(a.element),n.appendChild(s)}this._updateContents(n),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(e),r=this._editor.getScrollTop(),s=this._editor.getOption(66),o=this._hover.containerDomNode.clientHeight,a=n-r-(o-s)/2;this._hover.containerDomNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}}A_.ID="editor.contrib.modesGlyphHoverWidget";class NVe{get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}constructor(e){this._editor=e,this._lineNumber=-1}computeSync(){const e=r=>({value:r}),t=this._editor.getLineDecorations(this._lineNumber),n=[];if(!t)return n;for(const r of t){if(!r.options.glyphMarginClassName)continue;const s=r.options.glyphMarginHoverMessage;!s||d1(s)||n.push(...v3(s).map(e))}return n}}var AVe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class PVe{constructor(e,t,n){this.provider=e,this.hover=t,this.ordinal=n}}function MVe(i,e,t,n,r){return AVe(this,void 0,void 0,function*(){try{const s=yield Promise.resolve(i.provideHover(t,n,r));if(s&&FVe(s))return new PVe(i,s,e)}catch(s){Ii(s)}})}function e9(i,e,t,n){const s=i.ordered(e).map((o,a)=>MVe(o,a,e,t,n));return xi.fromPromises(s).coalesce()}function OVe(i,e,t,n){return e9(i,e,t,n).map(r=>r.hover).toPromise()}hd("_executeHoverProvider",(i,e,t)=>{const n=i.get(Fe);return OVe(n.hoverProvider,e,t,xt.None)});function FVe(i){const e=typeof i.range<"u",t=typeof i.contents<"u"&&i.contents&&i.contents.length>0;return e&&t}var BVe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},IS=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const ZH=ce;class yl{constructor(e,t,n,r,s){this.owner=e,this.range=t,this.contents=n,this.isBeforeContent=r,this.ordinal=s}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let Yk=class{constructor(e,t,n,r,s){this._editor=e,this._languageService=t,this._openerService=n,this._configurationService=r,this._languageFeaturesService=s,this.hoverOrdinal=3}createLoadingMessage(e){return new yl(this,e.range,[new Lr().appendText(p("modesContentHover.loading","Loading..."))],!1,2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),r=e.range.startLineNumber,s=n.getLineMaxColumn(r),o=[];let a=1e3;const l=n.getLineLength(r),c=n.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),d=this._editor.getOption(116),u=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:c});let h=!1;d>=0&&l>d&&e.range.startColumn>=d&&(h=!0,o.push(new yl(this,e.range,[{value:p("stopped rendering","Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,a++))),!h&&typeof u=="number"&&l>=u&&o.push(new yl(this,e.range,[{value:p("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,a++));let f=!1;for(const g of t){const m=g.range.startLineNumber===r?g.range.startColumn:1,y=g.range.endLineNumber===r?g.range.endColumn:s,b=g.options.hoverMessage;if(!b||d1(b))continue;g.options.beforeContentClassName&&(f=!0);const v=new D(e.range.startLineNumber,m,e.range.startLineNumber,y);o.push(new yl(this,v,v3(b),f,a++))}return o}computeAsync(e,t,n){if(!this._editor.hasModel()||e.type!==1)return xi.EMPTY;const r=this._editor.getModel();if(!this._languageFeaturesService.hoverProvider.has(r))return xi.EMPTY;const s=new U(e.range.startLineNumber,e.range.startColumn);return e9(this._languageFeaturesService.hoverProvider,r,s,n).filter(o=>!d1(o.hover.contents)).map(o=>{const a=o.hover.range?D.lift(o.hover.range):e.range;return new yl(this,a,o.hover.contents,!1,o.ordinal)})}renderHoverParts(e,t){return VJ(e,t,this._editor,this._languageService,this._openerService)}};Yk=BVe([IS(1,Fn),IS(2,lo),IS(3,Et),IS(4,Fe)],Yk);function VJ(i,e,t,n,r){e.sort((o,a)=>o.ordinal-a.ordinal);const s=new ae;for(const o of e)for(const a of o.contents){if(d1(a))continue;const l=ZH("div.hover-row.markdown-hover"),c=se(l,ZH("div.hover-contents")),d=s.add(new pu({editor:t},n,r));s.add(d.onDidRenderAsync(()=>{c.className="hover-contents code-hover-contents",i.onContentsChanged()}));const u=s.add(d.render(a));c.appendChild(u.element),i.fragment.appendChild(l)}return s}var HJ=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Qk=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class XH{constructor(e,t,n){this.marker=e,this.index=t,this.total=n}}let cO=class{constructor(e,t,n){this._markerService=t,this._configService=n,this._onDidChange=new H,this.onDidChange=this._onDidChange.event,this._dispoables=new ae,this._markers=[],this._nextIdx=-1,Ye.isUri(e)?this._resourceFilter=a=>a.toString()===e.toString():e&&(this._resourceFilter=e);const r=this._configService.getValue("problems.sortOrder"),s=(a,l)=>{let c=O0(a.resource.toString(),l.resource.toString());return c===0&&(r==="position"?c=D.compareRangesUsingStarts(a,l)||Yn.compare(a.severity,l.severity):c=Yn.compare(a.severity,l.severity)||D.compareRangesUsingStarts(a,l)),c},o=()=>{this._markers=this._markerService.read({resource:Ye.isUri(e)?e:void 0,severities:Yn.Error|Yn.Warning|Yn.Info}),typeof e=="function"&&(this._markers=this._markers.filter(a=>this._resourceFilter(a.resource))),this._markers.sort(s)};o(),this._dispoables.add(t.onMarkerChanged(a=>{(!this._resourceFilter||a.some(l=>this._resourceFilter(l)))&&(o(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new XH(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,n){let r=!1,s=this._markers.findIndex(o=>o.resource.toString()===e.uri.toString());s<0&&(s=D0(this._markers,{resource:e.uri},(o,a)=>O0(o.resource.toString(),a.resource.toString())),s<0&&(s=~s));for(let o=s;o<this._markers.length;o++){let a=D.lift(this._markers[o]);if(a.isEmpty()){const l=e.getWordAtPosition(a.getStartPosition());l&&(a=new D(a.startLineNumber,l.startColumn,a.startLineNumber,l.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=o,r=!0;break}if(this._markers[o].resource.toString()!==e.uri.toString())break}r||(this._nextIdx=n?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,n){if(this._markers.length===0)return!1;const r=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,n,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),r!==this._nextIdx}find(e,t){let n=this._markers.findIndex(r=>r.resource.toString()===e.toString());if(!(n<0)){for(;n<this._markers.length;n++)if(D.containsPosition(this._markers[n],t))return new XH(this._markers[n],n+1,this._markers.length)}}};cO=HJ([Qk(1,fd),Qk(2,Et)],cO);const UJ=Lt("IMarkerNavigationService");let dO=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new ps}getMarkerList(e){for(const t of this._provider){const n=t.getMarkerList(e);if(n)return n}return new cO(e,this._markerService,this._configService)}};dO=HJ([Qk(0,fd),Qk(1,Et)],dO);Wt(UJ,dO,1);var uO;(function(i){function e(t){switch(t){case di.Ignore:return"severity-ignore "+Qe.asClassName(me.info);case di.Info:return Qe.asClassName(me.info);case di.Warning:return Qe.asClassName(me.warning);case di.Error:return Qe.asClassName(me.error);default:return""}}i.className=e})(uO||(uO={}));var WVe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},pm=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},hO;class VVe{constructor(e,t,n,r,s){this._openerService=r,this._labelService=s,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new ae,this._editor=t;const o=document.createElement("div");o.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),o.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),o.appendChild(this._relatedBlock),this._disposables.add(bi(this._relatedBlock,"click",a=>{a.preventDefault();const l=this._relatedDiagnostics.get(a.target);l&&n(l)})),this._scrollable=new OZ(o,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{o.style.left=`-${a.scrollLeft}px`,o.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){an(this._disposables)}update(e){const{source:t,message:n,relatedInformation:r,code:s}=e;let o=((t==null?void 0:t.length)||0)+2;s&&(typeof s=="string"?o+=s.length:o+=s.value.length);const a=Kc(n);this._lines=a.length,this._longestLineLength=0;for(const h of a)this._longestLineLength=Math.max(h.length+o,this._longestLineLength);_r(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(const h of a)l=document.createElement("div"),l.innerText=h,h===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||s){const h=document.createElement("span");if(h.classList.add("details"),l.appendChild(h),t){const f=document.createElement("span");f.innerText=t,f.classList.add("source"),h.appendChild(f)}if(s)if(typeof s=="string"){const f=document.createElement("span");f.innerText=`(${s})`,f.classList.add("code"),h.appendChild(f)}else{this._codeLink=ce("a.code-link"),this._codeLink.setAttribute("href",`${s.target.toString()}`),this._codeLink.onclick=g=>{this._openerService.open(s.target,{allowCommands:!0}),g.preventDefault(),g.stopPropagation()};const f=se(this._codeLink,ce("span"));f.innerText=s.value,h.appendChild(this._codeLink)}}if(_r(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),zr(r)){const h=this._relatedBlock.appendChild(document.createElement("div"));h.style.paddingTop=`${Math.floor(this._editor.getOption(66)*.66)}px`,this._lines+=1;for(const f of r){const g=document.createElement("div"),m=document.createElement("a");m.classList.add("filename"),m.innerText=`${this._labelService.getUriBasenameLabel(f.resource)}(${f.startLineNumber}, ${f.startColumn}): `,m.title=this._labelService.getUriLabel(f.resource),this._relatedDiagnostics.set(m,f);const y=document.createElement("span");y.innerText=f.message,g.appendChild(m),g.appendChild(y),this._lines+=1,h.appendChild(g)}}const c=this._editor.getOption(50),d=Math.ceil(c.typicalFullwidthCharacterWidth*this._longestLineLength*.75),u=c.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:d,scrollHeight:u})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case Yn.Error:t=p("Error","Error");break;case Yn.Warning:t=p("Warning","Warning");break;case Yn.Info:t=p("Info","Info");break;case Yn.Hint:t=p("Hint","Hint");break}let n=p("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const r=this._editor.getModel();return r&&e.startLineNumber<=r.getLineCount()&&e.startLineNumber>=1&&(n=`${r.getLineContent(e.startLineNumber)}, ${n}`),n}}let y1=hO=class extends qk{constructor(e,t,n,r,s,o,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},s),this._themeService=t,this._openerService=n,this._menuService=r,this._contextKeyService=o,this._labelService=a,this._callOnDispose=new ae,this._onDidSelectRelatedInformation=new H,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=Yn.Warning,this._backgroundColor=K.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(zVe);let t=fO,n=HVe;this._severity===Yn.Warning?(t=Ux,n=UVe):this._severity===Yn.Info&&(t=gO,n=jVe);const r=e.getColor(t),s=e.getColor(n);this.style({arrowColor:r,frameColor:r,headerBackgroundColor:s,primaryHeadingColor:e.getColor(LJ),secondaryHeadingColor:e.getColor(DJ)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(r=>this.editor.focus()));const t=[],n=this._menuService.createMenu(hO.TitleMenu,this._contextKeyService);mY(n,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),n.dispose()}_fillTitleIcon(e){this._icon=se(e,ce(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new VVe(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,n){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());const r=D.lift(e),s=this.editor.getPosition(),o=s&&r.containsPosition(s)?s:r.getStartPosition();super.show(o,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const l=n>1?p("problems","{0} of {1} problems",t,n):p("change","{0} of {1} problem",t,n);this.setTitle(ha(a.uri),l)}this._icon.className=`codicon ${uO.className(Yn.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(o,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};y1.TitleMenu=new E("gotoErrorTitleMenu");y1=hO=WVe([pm(1,qi),pm(2,lo),pm(3,dd),pm(4,rt),pm(5,ot),pm(6,a1)],y1);const YH=ey(kc,DRe),QH=ey(Lo,Q0),JH=ey(Ms,J0),fO=P("editorMarkerNavigationError.background",{dark:YH,light:YH,hcDark:Rt,hcLight:Rt},p("editorMarkerNavigationError","Editor marker navigation widget error color.")),HVe=P("editorMarkerNavigationError.headerBackground",{dark:ze(fO,.1),light:ze(fO,.1),hcDark:null,hcLight:null},p("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),Ux=P("editorMarkerNavigationWarning.background",{dark:QH,light:QH,hcDark:Rt,hcLight:Rt},p("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),UVe=P("editorMarkerNavigationWarning.headerBackground",{dark:ze(Ux,.1),light:ze(Ux,.1),hcDark:"#0C141F",hcLight:ze(Ux,.2)},p("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),gO=P("editorMarkerNavigationInfo.background",{dark:JH,light:JH,hcDark:Rt,hcLight:Rt},p("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),jVe=P("editorMarkerNavigationInfo.headerBackground",{dark:ze(gO,.1),light:ze(gO,.1),hcDark:null,hcLight:null},p("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),zVe=P("editorMarkerNavigation.background",{dark:Ki,light:Ki,hcDark:Ki,hcLight:Ki},p("editorMarkerNavigationBackground","Editor marker navigation widget background."));var $Ve=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},RS=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},jJ=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},yv;let nf=yv=class{static get(e){return e.getContribution(yv.ID)}constructor(e,t,n,r,s){this._markerNavigationService=t,this._contextKeyService=n,this._editorService=r,this._instantiationService=s,this._sessionDispoables=new ae,this._editor=e,this._widgetVisible=zJ.bindTo(this._contextKeyService)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(y1,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(n=>{var r,s,o;(!(!((r=this._model)===null||r===void 0)&&r.selected)||!D.containsPosition((s=this._model)===null||s===void 0?void 0:s.selected.marker,n.position))&&((o=this._model)===null||o===void 0||o.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const n=this._model.find(this._editor.getModel().uri,this._widget.position);n?this._widget.updateMarker(n.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(n=>{this._editorService.openCodeEditor({resource:n.resource,options:{pinned:!0,revealIfOpened:!0,selection:D.lift(n).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new U(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(e,t){var n,r;return jJ(this,void 0,void 0,function*(){if(this._editor.hasModel()){const s=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(s.move(e,this._editor.getModel(),this._editor.getPosition()),!s.selected)return;if(s.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const o=yield this._editorService.openCodeEditor({resource:s.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:s.selected.marker}},this._editor);o&&((n=yv.get(o))===null||n===void 0||n.close(),(r=yv.get(o))===null||r===void 0||r.nagivate(e,t))}else this._widget.showAtMarker(s.selected.marker,s.selected.index,s.selected.total)}})}};nf.ID="editor.contrib.markerController";nf=yv=$Ve([RS(1,UJ),RS(2,ot),RS(3,Jt),RS(4,rt)],nf);class WI extends Me{constructor(e,t,n){super(n),this._next=e,this._multiFile=t}run(e,t){var n;return jJ(this,void 0,void 0,function*(){t.hasModel()&&((n=nf.get(t))===null||n===void 0||n.nagivate(this._next,this._multiFile))})}}class Eh extends WI{constructor(){super(!0,!1,{id:Eh.ID,label:Eh.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:N.focus,primary:578,weight:100},menuOpts:{menuId:y1.TitleMenu,title:Eh.LABEL,icon:gi("marker-navigation-next",me.arrowDown,p("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}Eh.ID="editor.action.marker.next";Eh.LABEL=p("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class Rg extends WI{constructor(){super(!1,!1,{id:Rg.ID,label:Rg.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:N.focus,primary:1602,weight:100},menuOpts:{menuId:y1.TitleMenu,title:Rg.LABEL,icon:gi("marker-navigation-previous",me.arrowUp,p("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}Rg.ID="editor.action.marker.prev";Rg.LABEL=p("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class KVe extends WI{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:p("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:N.focus,primary:66,weight:100},menuOpts:{menuId:E.MenubarGoMenu,title:p({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class qVe extends WI{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:p("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:N.focus,primary:1090,weight:100},menuOpts:{menuId:E.MenubarGoMenu,title:p({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}$t(nf.ID,nf,4);ue(Eh);ue(Rg);ue(KVe);ue(qVe);const zJ=new Ne("markersNavigationVisible",!1),GVe=sr.bindToContribution(nf.get);ye(new GVe({id:"closeMarkersNavigation",precondition:zJ,handler:i=>i.close(),kbOpts:{weight:100+50,kbExpr:N.focus,primary:9,secondary:[1033]}}));var ZVe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},hN=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const ya=ce;class XVe{constructor(e,t,n){this.owner=e,this.range=t,this.marker=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const eU={type:1,filter:{include:et.QuickFix},triggerAction:so.QuickFixHover};let pO=class{constructor(e,t,n,r){this._editor=e,this._markerDecorationsService=t,this._openerService=n,this._languageFeaturesService=r,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1&&!e.supportsMarkerHover)return[];const n=this._editor.getModel(),r=e.range.startLineNumber,s=n.getLineMaxColumn(r),o=[];for(const a of t){const l=a.range.startLineNumber===r?a.range.startColumn:1,c=a.range.endLineNumber===r?a.range.endColumn:s,d=this._markerDecorationsService.getMarker(n.uri,a);if(!d)continue;const u=new D(e.range.startLineNumber,l,e.range.startLineNumber,c);o.push(new XVe(this,u,d))}return o}renderHoverParts(e,t){if(!t.length)return q.None;const n=new ae;t.forEach(s=>e.fragment.appendChild(this.renderMarkerHover(s,n)));const r=t.length===1?t[0]:t.sort((s,o)=>Yn.compare(s.marker.severity,o.marker.severity))[0];return this.renderMarkerStatusbar(e,r,n),n}renderMarkerHover(e,t){const n=ya("div.hover-row"),r=se(n,ya("div.marker.hover-contents")),{source:s,message:o,code:a,relatedInformation:l}=e.marker;this._editor.applyFontInfo(r);const c=se(r,ya("span"));if(c.style.whiteSpace="pre-wrap",c.innerText=o,s||a)if(a&&typeof a!="string"){const d=ya("span");if(s){const g=se(d,ya("span"));g.innerText=s}const u=se(d,ya("a.code-link"));u.setAttribute("href",a.target.toString()),t.add(ee(u,"click",g=>{this._openerService.open(a.target,{allowCommands:!0}),g.preventDefault(),g.stopPropagation()}));const h=se(u,ya("span"));h.innerText=a.value;const f=se(r,d);f.style.opacity="0.6",f.style.paddingLeft="6px"}else{const d=se(r,ya("span"));d.style.opacity="0.6",d.style.paddingLeft="6px",d.innerText=s&&a?`${s}(${a})`:s||`(${a})`}if(zr(l))for(const{message:d,resource:u,startLineNumber:h,startColumn:f}of l){const g=se(r,ya("div"));g.style.marginTop="8px";const m=se(g,ya("a"));m.innerText=`${ha(u)}(${h}, ${f}): `,m.style.cursor="pointer",t.add(ee(m,"click",b=>{b.stopPropagation(),b.preventDefault(),this._openerService&&this._openerService.open(u,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:h,startColumn:f}}}).catch(ut)}));const y=se(g,ya("span"));y.innerText=d,this._editor.applyFontInfo(y)}return n}renderMarkerStatusbar(e,t,n){if((t.marker.severity===Yn.Error||t.marker.severity===Yn.Warning||t.marker.severity===Yn.Info)&&e.statusBar.addAction({label:p("view problem","View Problem"),commandId:Eh.ID,run:()=>{var r;e.hide(),(r=nf.get(this._editor))===null||r===void 0||r.showAtMarker(t.marker),this._editor.focus()}}),!this._editor.getOption(90)){const r=e.statusBar.append(ya("div"));this.recentMarkerCodeActionsInfo&&(wk.makeKey(this.recentMarkerCodeActionsInfo.marker)===wk.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(r.textContent=p("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const s=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?q.None:n.add(Hh(()=>r.textContent=p("checkingForQuickFixes","Checking for quick fixes..."),200));r.textContent||(r.textContent=String.fromCharCode(160));const o=this.getCodeActions(t.marker);n.add(st(()=>o.cancel())),o.then(a=>{if(s.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),r.textContent=p("noQuickFixes","No quick fixes available");return}r.style.display="none";let l=!1;n.add(st(()=>{l||a.dispose()})),e.statusBar.addAction({label:p("quick fixes","Quick Fix..."),commandId:jB,run:c=>{l=!0;const d=Yh.get(this._editor),u=Mi(c);e.hide(),d==null||d.showCodeActions(eU,a,{x:u.left,y:u.top,width:u.width,height:u.height})}})},ut)}}getCodeActions(e){return Ui(t=>t0(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new D(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),eU,nu.None,t))}};pO=ZVe([hN(1,s5),hN(2,lo),hN(3,Fe)],pO);const $J="editor.action.inlineSuggest.commit",KJ="editor.action.inlineSuggest.showPrevious",qJ="editor.action.inlineSuggest.showNext";var YVe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class QVe extends q{constructor(e,t,n={orientation:0}){super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new jxe),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new ae),this.options=n,this.lookupKeybindings=typeof this.options.getKeyBinding=="function",this.toggleMenuAction=this._register(new Wy(()=>{var r;return(r=this.toggleMenuActionViewItem)===null||r===void 0?void 0:r.show()},n.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new fa(this.element,{orientation:n.orientation,ariaLabel:n.ariaLabel,actionRunner:n.actionRunner,allowContextMenu:n.allowContextMenu,highlightToggledItems:n.highlightToggledItems,actionViewItemProvider:(r,s)=>{var o;if(r.id===Wy.ID)return this.toggleMenuActionViewItem=new pk(r,r.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:Qe.asClassNameArray((o=n.moreIcon)!==null&&o!==void 0?o:me.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(n.actionViewItemProvider){const a=n.actionViewItemProvider(r,s);if(a)return a}if(r instanceof q_){const a=new pk(r,r.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:r.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry});return a.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(a),this.disposables.add(this._onDidChangeDropdownVisibility.add(a.onDidChangeVisibility)),a}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(e){return this.actionBar.getAction(e)}setActions(e,t){this.clear();const n=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),n.push(this.toggleMenuAction)),n.forEach(r=>{this.actionBar.push(r,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(r)})})}getKeybindingLabel(e){var t,n,r;const s=this.lookupKeybindings?(n=(t=this.options).getKeyBinding)===null||n===void 0?void 0:n.call(t,e):void 0;return(r=s==null?void 0:s.getLabel())!==null&&r!==void 0?r:void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}}class Wy extends vs{constructor(e,t){t=t||p("moreActions","More Actions..."),super(Wy.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}run(){return YVe(this,void 0,void 0,function*(){this.toggleDropdownMenu()})}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}}Wy.ID="toolbar.toggle.more";var JVe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},zb=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let mO=class extends QVe{constructor(e,t,n,r,s,o,a){super(e,s,Object.assign(Object.assign({getKeyBinding:c=>{var d;return(d=o.lookupKeybinding(c.id))!==null&&d!==void 0?d:void 0}},t),{allowContextMenu:!0,skipTelemetry:typeof(t==null?void 0:t.telemetrySource)=="string"})),this._options=t,this._menuService=n,this._contextKeyService=r,this._contextMenuService=s,this._sessionDisposables=this._store.add(new ae);const l=t==null?void 0:t.telemetrySource;l&&this._store.add(this.actionBar.onDidRun(c=>a.publicLog2("workbenchActionExecuted",{id:c.action.id,from:l})))}setActions(e,t=[],n){var r,s,o;this._sessionDisposables.clear();const a=e.slice(),l=t.slice(),c=[];let d=0;const u=[];let h=!1;if(((r=this._options)===null||r===void 0?void 0:r.hiddenItemStrategy)!==-1)for(let f=0;f<a.length;f++){const g=a[f];!(g instanceof Wa)&&!(g instanceof V0)||g.hideActions&&(c.push(g.hideActions.toggle),g.hideActions.toggle.checked&&d++,g.hideActions.isHidden&&(h=!0,a[f]=void 0,((s=this._options)===null||s===void 0?void 0:s.hiddenItemStrategy)!==0&&(u[f]=g)))}if(((o=this._options)===null||o===void 0?void 0:o.overflowBehavior)!==void 0){const f=f3e(new Set(this._options.overflowBehavior.exempted),St.map(a,y=>y==null?void 0:y.id)),g=this._options.overflowBehavior.maxItems-f.size;let m=0;for(let y=0;y<a.length;y++){const b=a[y];b&&(m++,!f.has(b.id)&&m>=g&&(a[y]=void 0,u[y]=b))}}r8(a),r8(u),super.setActions(a,rr.join(u,l)),c.length>0&&this._sessionDisposables.add(ee(this.getElement(),"contextmenu",f=>{var g,m,y,b,v;const C=new Qo(f),w=this.getItemAction(C.target);if(!w)return;C.preventDefault(),C.stopPropagation();let S=!1;if(d===1&&((g=this._options)===null||g===void 0?void 0:g.hiddenItemStrategy)===0){S=!0;for(let I=0;I<c.length;I++)if(c[I].checked){c[I]=u_({id:w.id,label:w.label,checked:!0,enabled:!1,run(){}});break}}let L;if(!S&&(w instanceof Wa||w instanceof V0)){if(!w.hideActions)return;L=w.hideActions.hide}else L=u_({id:"label",label:p("hide","Hide"),enabled:!1,run(){}});const T=rr.join([L],c);!((m=this._options)===null||m===void 0)&&m.resetMenu&&!n&&(n=[this._options.resetMenu]),h&&n&&(T.push(new rr),T.push(u_({id:"resetThisMenu",label:p("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(n)}))),this._contextMenuService.showContextMenu({getAnchor:()=>C,getActions:()=>T,menuId:(y=this._options)===null||y===void 0?void 0:y.contextMenu,menuActionOptions:Object.assign({renderShortTitle:!0},(b=this._options)===null||b===void 0?void 0:b.menuOptions),skipTelemetry:typeof((v=this._options)===null||v===void 0?void 0:v.telemetrySource)=="string",contextKeyService:this._contextKeyService})}))}};mO=JVe([zb(2,dd),zb(3,ot),zb(4,qa),zb(5,bn),zb(6,Wo)],mO);var t9=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Cl=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},jx;let _O=class extends q{constructor(e,t,n){super(),this.editor=e,this.model=t,this.instantiationService=n,this.alwaysShowToolbar=mr(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).showToolbar==="always"),this.sessionPosition=void 0,this.position=At(this,r=>{var s,o,a;const l=(s=this.model.read(r))===null||s===void 0?void 0:s.ghostText.read(r);if(!this.alwaysShowToolbar.read(r)||!l||l.parts.length===0)return this.sessionPosition=void 0,null;const c=l.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==l.lineNumber&&(this.sessionPosition=void 0);const d=new U(l.lineNumber,Math.min(c,(a=(o=this.sessionPosition)===null||o===void 0?void 0:o.column)!==null&&a!==void 0?a:Number.MAX_SAFE_INTEGER));return this.sessionPosition=d,d}),this._register(qs((r,s)=>{const o=this.model.read(r);if(!o||!this.alwaysShowToolbar.read(r))return;const a=s.add(this.instantiationService.createInstance(rf,this.editor,!0,this.position,o.selectedInlineCompletionIndex,o.inlineCompletionsCount,o.selectedInlineCompletion.map(l=>{var c;return(c=l==null?void 0:l.inlineCompletion.source.inlineCompletions.commands)!==null&&c!==void 0?c:[]})));e.addContentWidget(a),s.add(st(()=>e.removeContentWidget(a))),s.add(Cn(l=>{this.position.read(l)&&o.lastTriggerKind.read(l)!==Jd.Explicit&&o.triggerExplicitly()}))}))}};_O=t9([Cl(2,rt)],_O);const eHe=gi("inline-suggestion-hints-next",me.chevronRight,p("parameterHintsNextIcon","Icon for show next parameter hint.")),tHe=gi("inline-suggestion-hints-previous",me.chevronLeft,p("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let rf=jx=class extends q{static get dropDownVisible(){return this._dropDownVisible}createCommandAction(e,t,n){const r=new vs(e,t,n,!0,()=>this._commandService.executeCommand(e)),s=this.keybindingService.lookupKeybinding(e,this._contextKeyService);let o=t;return s&&(o=p({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",t,s.getLabel())),r.tooltip=o,r}constructor(e,t,n,r,s,o,a,l,c,d,u){super(),this.editor=e,this.withBorder=t,this._position=n,this._currentSuggestionIdx=r,this._suggestionCount=s,this._extraCommands=o,this._commandService=a,this.keybindingService=c,this._contextKeyService=d,this._menuService=u,this.id=`InlineSuggestionHintsContentWidget${jx.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=dr("div.inlineSuggestionsHints",{className:this.withBorder?".withBorder":""},[dr("div@toolBar")]),this.previousAction=this.createCommandAction(KJ,p("previous","Previous"),Qe.asClassName(tHe)),this.availableSuggestionCountAction=new vs("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),this.nextAction=this.createCommandAction(qJ,p("next","Next"),Qe.asClassName(eHe)),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(E.InlineCompletionsActions,this._contextKeyService)),this.clearAvailableSuggestionCountLabelDebounced=this._register(new fn(()=>{this.availableSuggestionCountAction.label=""},100)),this.disableButtonsDebounced=this._register(new fn(()=>{this.previousAction.enabled=this.nextAction.enabled=!1},100)),this.lastCommands=[],this.toolBar=this._register(l.createInstance(bO,this.nodes.toolBar,E.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:h=>h.startsWith("primary")},actionViewItemProvider:(h,f)=>{if(h instanceof Wa)return l.createInstance(iHe,h,void 0);if(h===this.availableSuggestionCountAction){const g=new nHe(void 0,h,{label:!0,icon:!1});return g.setClass("availableSuggestionCount"),g}},telemetrySource:"InlineSuggestionToolbar"})),this.toolBar.setPrependedPrimaryActions([this.previousAction,this.availableSuggestionCountAction,this.nextAction]),this._register(this.toolBar.onDidChangeDropdownVisibility(h=>{jx._dropDownVisible=h})),this._register(Cn(h=>{this._position.read(h),this.editor.layoutContentWidget(this)})),this._register(Cn(h=>{const f=this._suggestionCount.read(h),g=this._currentSuggestionIdx.read(h);f!==void 0?(this.clearAvailableSuggestionCountLabelDebounced.cancel(),this.availableSuggestionCountAction.label=`${g+1}/${f}`):this.clearAvailableSuggestionCountLabelDebounced.schedule(),f!==void 0&&f>1?(this.disableButtonsDebounced.cancel(),this.previousAction.enabled=this.nextAction.enabled=!0):this.disableButtonsDebounced.schedule()})),this._register(Cn(h=>{const f=this._extraCommands.read(h);if(fi(this.lastCommands,f))return;this.lastCommands=f;const g=f.map(m=>({class:void 0,id:m.id,enabled:!0,tooltip:m.tooltip||"",label:m.title,run:y=>this._commandService.executeCommand(m.id)}));for(const[m,y]of this.inlineCompletionsActionsMenus.getActions())for(const b of y)b instanceof Wa&&g.push(b);g.length>0&&g.unshift(new rr),this.toolBar.setAdditionalSecondaryActions(g)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}};rf._dropDownVisible=!1;rf.id=0;rf=jx=t9([Cl(6,oi),Cl(7,rt),Cl(8,bn),Cl(9,ot),Cl(10,dd)],rf);class nHe extends u1{constructor(){super(...arguments),this._className=void 0}setClass(e){this._className=e}render(e){super.render(e),this._className&&e.classList.add(this._className)}}let iHe=class extends Jg{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=dr("div.keybinding").root;new iw(t,To,Object.assign({disableTitle:!0},E5e)).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}},bO=class extends mO{constructor(e,t,n,r,s,o,a,l){super(e,Object.assign({resetMenu:t},n),r,s,o,a,l),this.menuId=t,this.options2=n,this.menuService=r,this.contextKeyService=s,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){var e,t,n,r,s,o,a;const l=[],c=[];mY(this.menu,(e=this.options2)===null||e===void 0?void 0:e.menuOptions,{primary:l,secondary:c},(n=(t=this.options2)===null||t===void 0?void 0:t.toolbarOptions)===null||n===void 0?void 0:n.primaryGroup,(s=(r=this.options2)===null||r===void 0?void 0:r.toolbarOptions)===null||s===void 0?void 0:s.shouldInlineSubmenu,(a=(o=this.options2)===null||o===void 0?void 0:o.toolbarOptions)===null||a===void 0?void 0:a.useSeparatorsInPrimaryActions),c.push(...this.additionalActions),l.unshift(...this.prependedPrimaryActions),this.setActions(l,c)}setPrependedPrimaryActions(e){fi(this.prependedPrimaryActions,e,(t,n)=>t===n)||(this.prependedPrimaryActions=e,this.updateToolbar())}setAdditionalSecondaryActions(e){fi(this.additionalActions,e,(t,n)=>t===n)||(this.additionalActions=e,this.updateToolbar())}};bO=t9([Cl(3,dd),Cl(4,ot),Cl(5,qa),Cl(6,bn),Cl(7,Wo)],bO);var rHe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},ES=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},vO;const sHe=!1;let Ws=vO=class extends q{static get(e){return e.getContribution(vO.ID)}constructor(e,t,n,r,s){super(),this._editor=e,this._instantiationService=t,this._openerService=n,this._languageService=r,this._keybindingService=s,this._toUnhook=new ae,this._hoverActivatedByColorDecoratorClick=!1,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._reactToEditorMouseMoveRunner=this._register(new fn(()=>this._reactToEditorMouseMove(this._mouseMoveEvent),0)),this._hookEvents(),this._register(this._editor.onDidChangeConfiguration(o=>{o.hasChanged(60)&&(this._unhookEvents(),this._hookEvents())})),this._register(this._editor.onMouseLeave(()=>{this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}))}_hookEvents(){const e=()=>this._hideWidgets(),t=this._editor.getOption(60);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._hidingDelay=t.hidingDelay,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(n=>this._onEditorMouseDown(n))),this._toUnhook.add(this._editor.onMouseUp(n=>this._onEditorMouseUp(n))),this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))):(this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))),this._toUnhook.add(this._editor.onMouseLeave(n=>this._onEditorMouseLeave(n))),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(n=>this._onEditorScrollChanged(n)))}_unhookEvents(){this._toUnhook.clear()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){var t;this._isMouseDown=!0;const n=e.target;if(n.type===9&&n.detail===Rh.ID){this._hoverClicked=!0;return}n.type===12&&n.detail===A_.ID||(n.type!==12&&(this._hoverClicked=!1),!((t=this._contentWidget)===null||t===void 0)&&t.widget.isResizing||this._hideWidgets())}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseLeave(e){var t,n;const r=e.event.browserEvent.relatedTarget;!((t=this._contentWidget)===null||t===void 0)&&t.widget.isResizing||!((n=this._contentWidget)===null||n===void 0)&&n.containsNode(r)||this._hideWidgets()}_isMouseOverWidget(e){var t,n,r,s,o;const a=e.target;return!!(this._isHoverSticky&&a.type===9&&a.detail===Rh.ID||this._isHoverSticky&&(!((t=this._contentWidget)===null||t===void 0)&&t.containsNode((n=e.event.browserEvent.view)===null||n===void 0?void 0:n.document.activeElement))&&!(!((s=(r=e.event.browserEvent.view)===null||r===void 0?void 0:r.getSelection())===null||s===void 0)&&s.isCollapsed)||!this._isHoverSticky&&a.type===9&&a.detail===Rh.ID&&(!((o=this._contentWidget)===null||o===void 0)&&o.isColorPickerVisible)||this._isHoverSticky&&a.type===12&&a.detail===A_.ID)}_onEditorMouseMove(e){var t,n,r,s;if(this._mouseMoveEvent=e,!((t=this._contentWidget)===null||t===void 0)&&t.isFocused||!((n=this._contentWidget)===null||n===void 0)&&n.isResizing||this._isMouseDown&&this._hoverClicked||this._isHoverSticky&&(!((r=this._contentWidget)===null||r===void 0)&&r.isVisibleFromKeyboard))return;if(this._isMouseOverWidget(e)){this._reactToEditorMouseMoveRunner.cancel();return}if(!((s=this._contentWidget)===null||s===void 0)&&s.isVisible&&this._isHoverSticky&&this._hidingDelay>0){this._reactToEditorMouseMoveRunner.isScheduled()||this._reactToEditorMouseMoveRunner.schedule(this._hidingDelay);return}this._reactToEditorMouseMove(e)}_reactToEditorMouseMove(e){var t,n,r;if(!e)return;const s=e.target,o=(t=s.element)===null||t===void 0?void 0:t.classList.contains("colorpicker-color-decoration"),a=this._editor.getOption(146);if(o&&(a==="click"&&!this._hoverActivatedByColorDecoratorClick||a==="hover"&&!this._isHoverEnabled&&!sHe||a==="clickAndHover"&&!this._isHoverEnabled&&!this._hoverActivatedByColorDecoratorClick)||!o&&!this._isHoverEnabled&&!this._hoverActivatedByColorDecoratorClick){this._hideWidgets();return}if(this._getOrCreateContentWidget().maybeShowAt(e)){(n=this._glyphWidget)===null||n===void 0||n.hide();return}if(s.type===2&&s.position){(r=this._contentWidget)===null||r===void 0||r.hide(),this._glyphWidget||(this._glyphWidget=new A_(this._editor,this._languageService,this._openerService)),this._glyphWidget.startShowingAt(s.position.lineNumber);return}this._hideWidgets()}_onKeyDown(e){var t;if(!this._editor.hasModel())return;const n=this._keybindingService.softDispatch(e,this._editor.getDomNode()),r=n.kind===1||n.kind===2&&n.commandId==="editor.action.showHover"&&((t=this._contentWidget)===null||t===void 0?void 0:t.isVisible);e.keyCode!==5&&e.keyCode!==6&&e.keyCode!==57&&e.keyCode!==4&&!r&&this._hideWidgets()}_hideWidgets(){var e,t,n;this._isMouseDown&&this._hoverClicked&&(!((e=this._contentWidget)===null||e===void 0)&&e.isColorPickerVisible)||rf.dropDownVisible||(this._hoverActivatedByColorDecoratorClick=!1,this._hoverClicked=!1,(t=this._glyphWidget)===null||t===void 0||t.hide(),(n=this._contentWidget)===null||n===void 0||n.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(Gk,this._editor)),this._contentWidget}showContentHover(e,t,n,r,s=!1){this._hoverActivatedByColorDecoratorClick=s,this._getOrCreateContentWidget().startShowingAtRange(e,t,n,r)}focus(){var e;(e=this._contentWidget)===null||e===void 0||e.focus()}scrollUp(){var e;(e=this._contentWidget)===null||e===void 0||e.scrollUp()}scrollDown(){var e;(e=this._contentWidget)===null||e===void 0||e.scrollDown()}scrollLeft(){var e;(e=this._contentWidget)===null||e===void 0||e.scrollLeft()}scrollRight(){var e;(e=this._contentWidget)===null||e===void 0||e.scrollRight()}pageUp(){var e;(e=this._contentWidget)===null||e===void 0||e.pageUp()}pageDown(){var e;(e=this._contentWidget)===null||e===void 0||e.pageDown()}goToTop(){var e;(e=this._contentWidget)===null||e===void 0||e.goToTop()}goToBottom(){var e;(e=this._contentWidget)===null||e===void 0||e.goToBottom()}get isColorPickerVisible(){var e;return(e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible}get isHoverVisible(){var e;return(e=this._contentWidget)===null||e===void 0?void 0:e.isVisible}dispose(){var e,t;super.dispose(),this._unhookEvents(),this._toUnhook.dispose(),(e=this._glyphWidget)===null||e===void 0||e.dispose(),(t=this._contentWidget)===null||t===void 0||t.dispose()}};Ws.ID="editor.contrib.hover";Ws=vO=rHe([ES(1,rt),ES(2,lo),ES(3,Fn),ES(4,bn)],Ws);class oHe extends Me{constructor(){super({id:"editor.action.showHover",label:p({key:"showOrFocusHover",comment:["Label for action that will trigger the showing/focusing of a hover in the editor.","If the hover is not visible, it will show the hover.","This allows for users to show the hover without using the mouse.","If the hover is already visible, it will take focus."]},"Show or Focus Hover"),description:{description:"Show or Focus Hover",args:[{name:"args",schema:{type:"object",properties:{focus:{description:"Controls if when triggered with the keyboard, the hover should take focus immediately.",type:"boolean",default:!1}}}}]},alias:"Show or Focus Hover",precondition:void 0,kbOpts:{kbExpr:N.editorTextFocus,primary:Oi(2089,2087),weight:100}})}run(e,t,n){if(!t.hasModel())return;const r=Ws.get(t);if(!r)return;const s=t.getPosition(),o=new D(s.lineNumber,s.column,s.lineNumber,s.column),a=t.getOption(2)===2||!!(n!=null&&n.focus);r.isHoverVisible?r.focus():r.showContentHover(o,1,1,a)}}class aHe extends Me{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:p({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){const n=Ws.get(t);if(!n)return;const r=t.getPosition();if(!r)return;const s=new D(r.lineNumber,r.column,r.lineNumber,r.column),o=cp.get(t);if(!o)return;o.startFindDefinitionFromCursor(r).then(()=>{n.showContentHover(s,1,1,!0)})}}class lHe extends Me{constructor(){super({id:"editor.action.scrollUpHover",label:p({key:"scrollUpHover",comment:["Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Up Hover"),alias:"Scroll Up Hover",precondition:N.hoverFocused,kbOpts:{kbExpr:N.hoverFocused,primary:16,weight:100}})}run(e,t){const n=Ws.get(t);n&&n.scrollUp()}}class cHe extends Me{constructor(){super({id:"editor.action.scrollDownHover",label:p({key:"scrollDownHover",comment:["Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Down Hover"),alias:"Scroll Down Hover",precondition:N.hoverFocused,kbOpts:{kbExpr:N.hoverFocused,primary:18,weight:100}})}run(e,t){const n=Ws.get(t);n&&n.scrollDown()}}class dHe extends Me{constructor(){super({id:"editor.action.scrollLeftHover",label:p({key:"scrollLeftHover",comment:["Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused."]},"Scroll Left Hover"),alias:"Scroll Left Hover",precondition:N.hoverFocused,kbOpts:{kbExpr:N.hoverFocused,primary:15,weight:100}})}run(e,t){const n=Ws.get(t);n&&n.scrollLeft()}}class uHe extends Me{constructor(){super({id:"editor.action.scrollRightHover",label:p({key:"scrollRightHover",comment:["Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused."]},"Scroll Right Hover"),alias:"Scroll Right Hover",precondition:N.hoverFocused,kbOpts:{kbExpr:N.hoverFocused,primary:17,weight:100}})}run(e,t){const n=Ws.get(t);n&&n.scrollRight()}}class hHe extends Me{constructor(){super({id:"editor.action.pageUpHover",label:p({key:"pageUpHover",comment:["Action that allows to page up in the hover widget with the page up command when the hover widget is focused."]},"Page Up Hover"),alias:"Page Up Hover",precondition:N.hoverFocused,kbOpts:{kbExpr:N.hoverFocused,primary:11,secondary:[528],weight:100}})}run(e,t){const n=Ws.get(t);n&&n.pageUp()}}class fHe extends Me{constructor(){super({id:"editor.action.pageDownHover",label:p({key:"pageDownHover",comment:["Action that allows to page down in the hover widget with the page down command when the hover widget is focused."]},"Page Down Hover"),alias:"Page Down Hover",precondition:N.hoverFocused,kbOpts:{kbExpr:N.hoverFocused,primary:12,secondary:[530],weight:100}})}run(e,t){const n=Ws.get(t);n&&n.pageDown()}}class gHe extends Me{constructor(){super({id:"editor.action.goToTopHover",label:p({key:"goToTopHover",comment:["Action that allows to go to the top of the hover widget with the home command when the hover widget is focused."]},"Go To Top Hover"),alias:"Go To Bottom Hover",precondition:N.hoverFocused,kbOpts:{kbExpr:N.hoverFocused,primary:14,secondary:[2064],weight:100}})}run(e,t){const n=Ws.get(t);n&&n.goToTop()}}class pHe extends Me{constructor(){super({id:"editor.action.goToBottomHover",label:p({key:"goToBottomHover",comment:["Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused."]},"Go To Bottom Hover"),alias:"Go To Bottom Hover",precondition:N.hoverFocused,kbOpts:{kbExpr:N.hoverFocused,primary:13,secondary:[2066],weight:100}})}run(e,t){const n=Ws.get(t);n&&n.goToBottom()}}$t(Ws.ID,Ws,2);ue(oHe);ue(aHe);ue(lHe);ue(cHe);ue(dHe);ue(uHe);ue(hHe);ue(fHe);ue(gHe);ue(pHe);Gp.register(Yk);Gp.register(pO);Ka((i,e)=>{const t=i.getColor(jRe);t&&(e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${t.transparent(.5)}; }`))});class yO extends q{constructor(e){super(),this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){const t=this._editor.getOption(146);if(t!=="click"&&t!=="clickAndHover")return;const n=e.target;if(n.type!==6||!n.detail.injectedText||n.detail.injectedText.options.attachedData!==_J||!n.range)return;const r=this._editor.getContribution(Ws.ID);if(r&&!r.isColorPickerVisible){const s=new D(n.range.startLineNumber,n.range.startColumn+1,n.range.endLineNumber,n.range.endColumn+1);r.showContentHover(s,1,0,!1,!0)}}}yO.ID="editor.contrib.colorContribution";$t(yO.ID,yO,2);Gp.register(Kk);var GJ=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},_l=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},tU=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},CO,wO;let sf=CO=class extends q{constructor(e,t,n,r,s,o,a){super(),this._editor=e,this._modelService=n,this._keybindingService=r,this._instantiationService=s,this._languageFeatureService=o,this._languageConfigurationService=a,this._standaloneColorPickerWidget=null,this._standaloneColorPickerVisible=N.standaloneColorPickerVisible.bindTo(t),this._standaloneColorPickerFocused=N.standaloneColorPickerFocused.bindTo(t)}showOrFocus(){var e;this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||(e=this._standaloneColorPickerWidget)===null||e===void 0||e.focus():this._standaloneColorPickerWidget=new Jk(this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused,this._instantiationService,this._modelService,this._keybindingService,this._languageFeatureService,this._languageConfigurationService))}hide(){var e;this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),(e=this._standaloneColorPickerWidget)===null||e===void 0||e.hide(),this._editor.focus()}insertColor(){var e;(e=this._standaloneColorPickerWidget)===null||e===void 0||e.updateEditor(),this.hide()}static get(e){return e.getContribution(CO.ID)}};sf.ID="editor.contrib.standaloneColorPickerController";sf=CO=GJ([_l(1,ot),_l(2,zn),_l(3,bn),_l(4,rt),_l(5,Fe),_l(6,wn)],sf);$t(sf.ID,sf,1);const nU=8,mHe=22;let Jk=wO=class extends q{constructor(e,t,n,r,s,o,a,l){var c;super(),this._editor=e,this._standaloneColorPickerVisible=t,this._standaloneColorPickerFocused=n,this._modelService=s,this._keybindingService=o,this._languageFeaturesService=a,this._languageConfigurationService=l,this.allowEditorOverflow=!0,this._position=void 0,this._body=document.createElement("div"),this._colorHover=null,this._selectionSetInEditor=!1,this._onResult=this._register(new H),this.onResult=this._onResult.event,this._standaloneColorPickerVisible.set(!0),this._standaloneColorPickerParticipant=r.createInstance(My,this._editor),this._position=(c=this._editor._getViewModel())===null||c===void 0?void 0:c.getPrimaryCursorState().modelState.position;const d=this._editor.getSelection(),u=d?{startLineNumber:d.startLineNumber,startColumn:d.startColumn,endLineNumber:d.endLineNumber,endColumn:d.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},h=this._register(qc(this._body));this._register(h.onDidBlur(f=>{this.hide()})),this._register(h.onDidFocus(f=>{this.focus()})),this._register(this._editor.onDidChangeCursorPosition(()=>{this._selectionSetInEditor?this._selectionSetInEditor=!1:this.hide()})),this._register(this._editor.onMouseMove(f=>{var g;const m=(g=f.target.element)===null||g===void 0?void 0:g.classList;m&&m.contains("colorpicker-color-decoration")&&this.hide()})),this._register(this.onResult(f=>{this._render(f.value,f.foundInEditor)})),this._start(u),this._body.style.zIndex="50",this._editor.addContentWidget(this)}updateEditor(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}getId(){return wO.ID}getDomNode(){return this._body}getPosition(){if(!this._position)return null;const e=this._editor.getOption(60).above;return{position:this._position,secondaryPosition:this._position,preference:e?[1,2]:[2,1],positionAffinity:2}}hide(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}focus(){this._standaloneColorPickerFocused.set(!0),this._body.focus()}_start(e){return tU(this,void 0,void 0,function*(){const t=yield this._computeAsync(e);t&&this._onResult.fire(new _He(t.result,t.foundInEditor))})}_computeAsync(e){return tU(this,void 0,void 0,function*(){if(!this._editor.hasModel())return null;const t={range:e,color:{red:0,green:0,blue:0,alpha:1}},n=yield this._standaloneColorPickerParticipant.createColorHover(t,new qB(this._modelService,this._languageConfigurationService),this._languageFeaturesService.colorProvider);return n?{result:n.colorHover,foundInEditor:n.foundInEditor}:null})}_render(e,t){const n=document.createDocumentFragment(),r=this._register(new Zk(this._keybindingService));let s;const o={fragment:n,statusBar:r,setColorPicker:m=>s=m,onContentsChanged:()=>{},hide:()=>this.hide()};if(this._colorHover=e,this._register(this._standaloneColorPickerParticipant.renderHoverParts(o,[e])),s===void 0)return;this._body.classList.add("standalone-colorpicker-body"),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this._body.style.maxWidth=Math.max(this._editor.getLayoutInfo().width*.66,500)+"px",this._body.tabIndex=0,this._body.appendChild(n),s.layout();const a=s.body,l=a.saturationBox.domNode.clientWidth,c=a.domNode.clientWidth-l-mHe-nU,d=s.body.enterButton;d==null||d.onClicked(()=>{this.updateEditor(),this.hide()});const u=s.header,h=u.pickedColorNode;h.style.width=l+nU+"px";const f=u.originalColorNode;f.style.width=c+"px";const g=s.header.closeButton;g==null||g.onClicked(()=>{this.hide()}),t&&(d&&(d.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(e.range)),this._editor.layoutContentWidget(this)}};Jk.ID="editor.contrib.standaloneColorPickerWidget";Jk=wO=GJ([_l(3,rt),_l(4,zn),_l(5,bn),_l(6,Fe),_l(7,wn)],Jk);class _He{constructor(e,t){this.value=e,this.foundInEditor=t}}class bHe extends Gl{constructor(){super({id:"editor.action.showOrFocusStandaloneColorPicker",title:{value:p("showOrFocusStandaloneColorPicker","Show or Focus Standalone Color Picker"),mnemonicTitle:p({key:"mishowOrFocusStandaloneColorPicker",comment:["&& denotes a mnemonic"]},"&&Show or Focus Standalone Color Picker"),original:"Show or Focus Standalone Color Picker"},precondition:void 0,menu:[{id:E.CommandPalette}]})}runEditorCommand(e,t){var n;(n=sf.get(t))===null||n===void 0||n.showOrFocus()}}class vHe extends Me{constructor(){super({id:"editor.action.hideColorPicker",label:p({key:"hideColorPicker",comment:["Action that hides the color picker"]},"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:N.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100}})}run(e,t){var n;(n=sf.get(t))===null||n===void 0||n.hide()}}class yHe extends Me{constructor(){super({id:"editor.action.insertColorWithStandaloneColorPicker",label:p({key:"insertColorWithStandaloneColorPicker",comment:["Action that inserts color with standalone color picker"]},"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:N.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100}})}run(e,t){var n;(n=sf.get(t))===null||n===void 0||n.insertColor()}}ue(vHe);ue(yHe);Nn(bHe);class uh{constructor(e,t,n){this.languageConfigurationService=n,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,n){if(n<0)return!1;const r=t.length,s=e.length;if(n+r>s)return!1;for(let o=0;o<r;o++){const a=e.charCodeAt(n+o),l=t.charCodeAt(o);if(a!==l&&!(a>=65&&a<=90&&a+32===l)&&!(l>=65&&l<=90&&l+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,n,r,s,o){const a=e.startLineNumber,l=e.startColumn,c=e.endLineNumber,d=e.endColumn,u=s.getLineContent(a),h=s.getLineContent(c);let f=u.lastIndexOf(t,l-1+t.length),g=h.indexOf(n,d-1-n.length);if(f!==-1&&g!==-1)if(a===c)u.substring(f+t.length,g).indexOf(n)>=0&&(f=-1,g=-1);else{const y=u.substring(f+t.length),b=h.substring(0,g);(y.indexOf(n)>=0||b.indexOf(n)>=0)&&(f=-1,g=-1)}let m;f!==-1&&g!==-1?(r&&f+t.length<u.length&&u.charCodeAt(f+t.length)===32&&(t=t+" "),r&&g>0&&h.charCodeAt(g-1)===32&&(n=" "+n,g-=1),m=uh._createRemoveBlockCommentOperations(new D(a,f+t.length+1,c,g+1),t,n)):(m=uh._createAddBlockCommentOperations(e,t,n,this._insertSpace),this._usedEndToken=m.length===1?n:null);for(const y of m)o.addTrackedEditOperation(y.range,y.text)}static _createRemoveBlockCommentOperations(e,t,n){const r=[];return D.isEmpty(e)?r.push(jn.delete(new D(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+n.length))):(r.push(jn.delete(new D(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),r.push(jn.delete(new D(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+n.length)))),r}static _createAddBlockCommentOperations(e,t,n,r){const s=[];return D.isEmpty(e)?s.push(jn.replace(new D(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+n)):(s.push(jn.insert(new U(e.startLineNumber,e.startColumn),t+(r?" ":""))),s.push(jn.insert(new U(e.endLineNumber,e.endColumn),(r?" ":"")+n))),s}getEditOperations(e,t){const n=this._selection.startLineNumber,r=this._selection.startColumn;e.tokenization.tokenizeIfCheap(n);const s=e.getLanguageIdAtPosition(n,r),o=this.languageConfigurationService.getLanguageConfiguration(s).comments;!o||!o.blockCommentStartToken||!o.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,o.blockCommentStartToken,o.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const n=t.getInverseEditOperations();if(n.length===2){const r=n[0],s=n[1];return new Be(r.range.endLineNumber,r.range.endColumn,s.range.startLineNumber,s.range.startColumn)}else{const r=n[0].range,s=this._usedEndToken?-this._usedEndToken.length-1:0;return new Be(r.endLineNumber,r.endColumn+s,r.endLineNumber,r.endColumn+s)}}}class Id{constructor(e,t,n,r,s,o,a){this.languageConfigurationService=e,this._selection=t,this._tabSize=n,this._type=r,this._insertSpace=s,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=o,this._ignoreFirstLine=a||!1}static _gatherPreflightCommentStrings(e,t,n,r){e.tokenization.tokenizeIfCheap(t);const s=e.getLanguageIdAtPosition(t,1),o=r.getLanguageConfiguration(s).comments,a=o?o.lineCommentToken:null;if(!a)return null;const l=[];for(let c=0,d=n-t+1;c<d;c++)l[c]={ignore:!1,commentStr:a,commentStrOffset:0,commentStrLength:a.length};return l}static _analyzeLines(e,t,n,r,s,o,a,l){let c=!0,d;e===0?d=!0:e===1?d=!1:d=!0;for(let u=0,h=r.length;u<h;u++){const f=r[u],g=s+u;if(g===s&&a){f.ignore=!0;continue}const m=n.getLineContent(g),y=ns(m);if(y===-1){f.ignore=o,f.commentStrOffset=m.length;continue}if(c=!1,f.ignore=!1,f.commentStrOffset=y,d&&!uh._haystackHasNeedleAtOffset(m,f.commentStr,y)&&(e===0?d=!1:e===1||(f.ignore=!0)),d&&t){const b=y+f.commentStrLength;b<m.length&&m.charCodeAt(b)===32&&(f.commentStrLength+=1)}}if(e===0&&c){d=!1;for(let u=0,h=r.length;u<h;u++)r[u].ignore=!1}return{supported:!0,shouldRemoveComments:d,lines:r}}static _gatherPreflightData(e,t,n,r,s,o,a,l){const c=Id._gatherPreflightCommentStrings(n,r,s,l);return c===null?{supported:!1}:Id._analyzeLines(e,t,n,c,r,o,a,l)}_executeLineComments(e,t,n,r){let s;n.shouldRemoveComments?s=Id._createRemoveLineCommentsOperations(n.lines,r.startLineNumber):(Id._normalizeInsertionPoint(e,n.lines,r.startLineNumber,this._tabSize),s=this._createAddLineCommentsOperations(n.lines,r.startLineNumber));const o=new U(r.positionLineNumber,r.positionColumn);for(let a=0,l=s.length;a<l;a++)t.addEditOperation(s[a].range,s[a].text),D.isEmpty(s[a].range)&&D.getStartPosition(s[a].range).equals(o)&&e.getLineContent(o.lineNumber).length+1===o.column&&(this._deltaColumn=(s[a].text||"").length);this._selectionId=t.trackSelection(r)}_attemptRemoveBlockComment(e,t,n,r){let s=t.startLineNumber,o=t.endLineNumber;const a=r.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn);let l=e.getLineContent(s).lastIndexOf(n,a-1),c=e.getLineContent(o).indexOf(r,t.endColumn-1-n.length);return l!==-1&&c===-1&&(c=e.getLineContent(s).indexOf(r,l+n.length),o=s),l===-1&&c!==-1&&(l=e.getLineContent(o).lastIndexOf(n,c),s=o),t.isEmpty()&&(l===-1||c===-1)&&(l=e.getLineContent(s).indexOf(n),l!==-1&&(c=e.getLineContent(s).indexOf(r,l+n.length))),l!==-1&&e.getLineContent(s).charCodeAt(l+n.length)===32&&(n+=" "),c!==-1&&e.getLineContent(o).charCodeAt(c-1)===32&&(r=" "+r,c-=1),l!==-1&&c!==-1?uh._createRemoveBlockCommentOperations(new D(s,l+n.length+1,o,c+1),n,r):null}_executeBlockComment(e,t,n){e.tokenization.tokenizeIfCheap(n.startLineNumber);const r=e.getLanguageIdAtPosition(n.startLineNumber,1),s=this.languageConfigurationService.getLanguageConfiguration(r).comments;if(!s||!s.blockCommentStartToken||!s.blockCommentEndToken)return;const o=s.blockCommentStartToken,a=s.blockCommentEndToken;let l=this._attemptRemoveBlockComment(e,n,o,a);if(!l){if(n.isEmpty()){const c=e.getLineContent(n.startLineNumber);let d=ns(c);d===-1&&(d=c.length),l=uh._createAddBlockCommentOperations(new D(n.startLineNumber,d+1,n.startLineNumber,c.length+1),o,a,this._insertSpace)}else l=uh._createAddBlockCommentOperations(new D(n.startLineNumber,e.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),o,a,this._insertSpace);l.length===1&&(this._deltaColumn=o.length+1)}this._selectionId=t.trackSelection(n);for(const c of l)t.addEditOperation(c.range,c.text)}getEditOperations(e,t){let n=this._selection;if(this._moveEndPositionDown=!1,n.startLineNumber===n.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new D(n.startLineNumber,e.getLineMaxColumn(n.startLineNumber),n.startLineNumber+1,1),n.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(n);return}n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const r=Id._gatherPreflightData(this._type,this._insertSpace,e,n.startLineNumber,n.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return r.supported?this._executeLineComments(e,t,r,n):this._executeBlockComment(e,t,n)}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),new Be(n.selectionStartLineNumber,n.selectionStartColumn+this._deltaColumn,n.positionLineNumber,n.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){const n=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];o.ignore||n.push(jn.delete(new D(t+r,o.commentStrOffset+1,t+r,o.commentStrOffset+o.commentStrLength+1)))}return n}_createAddLineCommentsOperations(e,t){const n=[],r=this._insertSpace?" ":"";for(let s=0,o=e.length;s<o;s++){const a=e[s];a.ignore||n.push(jn.insert(new U(t+s,a.commentStrOffset+1),a.commentStr+r))}return n}static nextVisibleColumn(e,t,n,r){return n?e+(t-e%t):e+r}static _normalizeInsertionPoint(e,t,n,r){let s=1073741824,o,a;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const d=e.getLineContent(n+l);let u=0;for(let h=0,f=t[l].commentStrOffset;u<s&&h<f;h++)u=Id.nextVisibleColumn(u,r,d.charCodeAt(h)===9,1);u<s&&(s=u)}s=Math.floor(s/r)*r;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const d=e.getLineContent(n+l);let u=0;for(o=0,a=t[l].commentStrOffset;u<s&&o<a;o++)u=Id.nextVisibleColumn(u,r,d.charCodeAt(o)===9,1);u>s?t[l].commentStrOffset=o-1:t[l].commentStrOffset=o}}}class n9 extends Me{constructor(e,t){super(t),this._type=e}run(e,t){const n=e.get(wn);if(!t.hasModel())return;const r=t.getModel(),s=[],o=r.getOptions(),a=t.getOption(23),l=t.getSelections().map((d,u)=>({selection:d,index:u,ignoreFirstLine:!1}));l.sort((d,u)=>D.compareRangesUsingStarts(d.selection,u.selection));let c=l[0];for(let d=1;d<l.length;d++){const u=l[d];c.selection.endLineNumber===u.selection.startLineNumber&&(c.index<u.index?u.ignoreFirstLine=!0:(c.ignoreFirstLine=!0,c=u))}for(const d of l)s.push(new Id(n,d.selection,o.tabSize,this._type,a.insertSpace,a.ignoreEmptyLines,d.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class CHe extends n9{constructor(){super(0,{id:"editor.action.commentLine",label:p("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:N.writable,kbOpts:{kbExpr:N.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:E.MenubarEditMenu,group:"5_insert",title:p({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}class wHe extends n9{constructor(){super(1,{id:"editor.action.addCommentLine",label:p("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:N.writable,kbOpts:{kbExpr:N.editorTextFocus,primary:Oi(2089,2081),weight:100}})}}class SHe extends n9{constructor(){super(2,{id:"editor.action.removeCommentLine",label:p("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:N.writable,kbOpts:{kbExpr:N.editorTextFocus,primary:Oi(2089,2099),weight:100}})}}class xHe extends Me{constructor(){super({id:"editor.action.blockComment",label:p("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:N.writable,kbOpts:{kbExpr:N.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:E.MenubarEditMenu,group:"5_insert",title:p({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){const n=e.get(wn);if(!t.hasModel())return;const r=t.getOption(23),s=[],o=t.getSelections();for(const a of o)s.push(new uh(a,r.insertSpace,n));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}ue(CHe);ue(wHe);ue(SHe);ue(xHe);var THe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Pf=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},SO;let C1=SO=class{static get(e){return e.getContribution(SO.ID)}constructor(e,t,n,r,s,o,a,l){this._contextMenuService=t,this._contextViewService=n,this._contextKeyService=r,this._keybindingService=s,this._menuService=o,this._configurationService=a,this._workspaceContextService=l,this._toDispose=new ae,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(c=>this._onContextMenu(c))),this._toDispose.add(this._editor.onMouseWheel(c=>{if(this._contextMenuIsBeingShownCount>0){const d=this._contextViewService.getContextViewElement(),u=c.srcElement;u.shadowRoot&&Gg(d)===u.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(c=>{this._editor.getOption(24)&&c.keyCode===58&&(c.preventDefault(),c.stopPropagation(),this.showContextMenu())}))}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(24)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||e.target.type===6&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),e.target.type===11)return this._showScrollbarContextMenu(e.event);if(e.target.type!==6&&e.target.type!==7&&e.target.type!==1)return;if(this._editor.focus(),e.target.position){let n=!1;for(const r of this._editor.getSelections())if(r.containsPosition(e.target.position)){n=!0;break}n||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t=e.event),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(24)||!this._editor.hasModel())return;const t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?E.SimpleEditorContext:E.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const n=[],r=this._menuService.createMenu(t,this._contextKeyService),s=r.getActions({arg:e.uri});r.dispose();for(const o of s){const[,a]=o;let l=0;for(const c of a)if(c instanceof V0){const d=this._getMenuActions(e,c.item.submenu);d.length>0&&(n.push(new q_(c.id,c.label,d)),l++)}else n.push(c),l++;l&&n.push(new rr)}return n.length&&n.pop(),n}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const n=this._editor.getOption(60);this._editor.updateOptions({hover:{enabled:!1}});let r=t;if(!r){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const o=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),a=Mi(this._editor.getDomNode()),l=a.left+o.left,c=a.top+o.top+o.height;r={x:l,y:c}}const s=this._editor.getOption(126)&&!Ol;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:s?this._editor.getDomNode():void 0,getAnchor:()=>r,getActions:()=>e,getActionViewItem:o=>{const a=this._keybindingFor(o);if(a)return new u1(o,o,{label:!0,keybinding:a.getLabel(),isMenu:!0});const l=o;return typeof l.getActionViewItem=="function"?l.getActionViewItem():new u1(o,o,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:o=>this._keybindingFor(o),onHide:o=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:n})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel()||dFe(this._workspaceContextService.getWorkspace()))return;const t=this._editor.getOption(72);let n=0;const r=c=>({id:`menu-action-${++n}`,label:c.label,tooltip:"",class:void 0,enabled:typeof c.enabled>"u"?!0:c.enabled,checked:c.checked,run:c.run}),s=(c,d)=>new q_(`menu-action-${++n}`,c,d,void 0),o=(c,d,u,h,f)=>{if(!d)return r({label:c,enabled:d,run:()=>{}});const g=y=>()=>{this._configurationService.updateValue(u,y)},m=[];for(const y of f)m.push(r({label:y.label,checked:h===y.value,run:g(y.value)}));return s(c,m)},a=[];a.push(r({label:p("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),a.push(new rr),a.push(r({label:p("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),a.push(o(p("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:p("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:p("context.minimap.size.fill","Fill"),value:"fill"},{label:p("context.minimap.size.fit","Fit"),value:"fit"}])),a.push(o(p("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:p("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:p("context.minimap.slider.always","Always"),value:"always"}]));const l=this._editor.getOption(126)&&!Ol;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:l?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>a,onHide:c=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};C1.ID="editor.contrib.contextmenu";C1=SO=THe([Pf(1,qa),Pf(2,Cu),Pf(3,ot),Pf(4,bn),Pf(5,dd),Pf(6,Et),Pf(7,Yg)],C1);class kHe extends Me{constructor(){super({id:"editor.action.showContextMenu",label:p("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:N.textInputFocus,primary:1092,weight:100}})}run(e,t){var n;(n=C1.get(t))===null||n===void 0||n.showContextMenu()}}$t(C1.ID,C1,2);ue(kHe);class fN{constructor(e){this.selections=e}equals(e){const t=this.selections.length,n=e.selections.length;if(t!==n)return!1;for(let r=0;r<t;r++)if(!this.selections[r].equalsSelection(e.selections[r]))return!1;return!0}}class gN{constructor(e,t,n){this.cursorState=e,this.scrollTop=t,this.scrollLeft=n}}class dp extends q{static get(e){return e.getContribution(dp.ID)}constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;const n=new fN(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(n)||(this._undoStack.push(new gN(n,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new gN(new fN(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new gN(new fN(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}dp.ID="editor.contrib.cursorUndoRedoController";class LHe extends Me{constructor(){super({id:"cursorUndo",label:p("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:N.textInputFocus,primary:2099,weight:100}})}run(e,t,n){var r;(r=dp.get(t))===null||r===void 0||r.cursorUndo()}}class DHe extends Me{constructor(){super({id:"cursorRedo",label:p("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,n){var r;(r=dp.get(t))===null||r===void 0||r.cursorRedo()}}$t(dp.ID,dp,0);ue(LHe);ue(DHe);class IHe{constructor(e,t,n){this.selection=e,this.targetPosition=t,this.copy=n,this.targetSelection=null}getEditOperations(e,t){const n=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new D(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),n),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new Be(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new Be(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new Be(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new Be(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new Be(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}}function mm(i){return Ot?i.altKey:i.ctrlKey}class su extends q{constructor(e){super(),this._editor=e,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(35)||this._editor.getOption(22)||(mm(e)&&(this._modifierPressed=!0),this._mouseDown&&mm(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(35)||this._editor.getOption(22)||(mm(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===su.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){const t=e.target;if(this._dragSelection===null){const r=(this._editor.getSelections()||[]).filter(s=>t.position&&s.containsPosition(t.position));if(r.length===1)this._dragSelection=r[0];else return}mm(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){const t=new U(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let n=null;if(e.event.shiftKey){const r=this._editor.getSelection();if(r){const{selectionStartLineNumber:s,selectionStartColumn:o}=r;n=[new Be(s,o,t.lineNumber,t.column)]}}else n=(this._editor.getSelections()||[]).map(r=>r.containsPosition(t)?new Be(t.lineNumber,t.column,t.lineNumber,t.column):r);this._editor.setSelections(n||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(mm(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(su.ID,new IHe(this._dragSelection,t,mm(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){this._dndDecorationIds.set([{range:new D(e.lineNumber,e.column,e.lineNumber,e.column),options:su._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}su.ID="editor.contrib.dragAndDrop";su.TRIGGER_KEY_VALUE=Ot?6:5;su._DECORATION_OPTIONS=dt.register({description:"dnd-target",className:"dnd-target"});$t(su.ID,su,2);const VI=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let i;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?i=crypto.getRandomValues.bind(crypto):i=function(n){for(let r=0;r<n.length;r++)n[r]=Math.floor(Math.random()*256);return n};const e=new Uint8Array(16),t=[];for(let n=0;n<256;n++)t.push(n.toString(16).padStart(2,"0"));return function(){i(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let r=0,s="";return s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s}}();var ZJ=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function i9(i){return{asString:()=>ZJ(this,void 0,void 0,function*(){return i}),asFile:()=>{},value:typeof i=="string"?i:void 0}}function RHe(i,e,t){const n={id:VI(),name:i,uri:e,data:t};return{asString:()=>ZJ(this,void 0,void 0,function*(){return""}),asFile:()=>n,value:void 0}}class XJ{constructor(){this._entries=new Map}get size(){let e=0;for(const t of this._entries)e++;return e}has(e){return this._entries.has(this.toKey(e))}matches(e){const t=[...this._entries.keys()];return St.some(this,([n,r])=>r.asFile())&&t.push("files"),QJ(eL(e),t)}get(e){var t;return(t=this._entries.get(this.toKey(e)))===null||t===void 0?void 0:t[0]}append(e,t){const n=this._entries.get(e);n?n.push(t):this._entries.set(this.toKey(e),[t])}replace(e,t){this._entries.set(this.toKey(e),[t])}delete(e){this._entries.delete(this.toKey(e))}*[Symbol.iterator](){for(const[e,t]of this._entries)for(const n of t)yield[e,n]}toKey(e){return eL(e)}}function eL(i){return i.toLowerCase()}function YJ(i,e){return QJ(eL(i),e.map(eL))}function QJ(i,e){if(i==="*/*")return e.length>0;if(e.includes(i))return!0;const t=i.match(/^([a-z]+)\/([a-z]+|\*)$/i);if(!t)return!1;const[n,r,s]=t;return s==="*"?e.some(o=>o.startsWith(r+"/")):!1}const HI=Object.freeze({create:i=>Mh(i.map(e=>e.toString())).join(`\r
`),split:i=>i.split(`\r
`),parse:i=>HI.split(i).filter(e=>!e.startsWith("#"))}),iU={EDITORS:"CodeEditors",FILES:"CodeFiles"};class EHe{}const NHe={DragAndDropContribution:"workbench.contributions.dragAndDrop"};qn.add(NHe.DragAndDropContribution,new EHe);class Vy{constructor(){}static getInstance(){return Vy.INSTANCE}hasData(e){return e&&e===this.proto}getData(e){if(this.hasData(e))return this.data}}Vy.INSTANCE=new Vy;var AHe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function JJ(i){const e=new XJ;for(const t of i.items){const n=t.type;if(t.kind==="string"){const r=new Promise(s=>t.getAsString(s));e.append(n,i9(r))}else if(t.kind==="file"){const r=t.getAsFile();r&&e.append(n,PHe(r))}}return e}function PHe(i){const e=i.path?Ye.parse(i.path):void 0;return RHe(i.name,e,()=>AHe(this,void 0,void 0,function*(){return new Uint8Array(yield i.arrayBuffer())}))}const MHe=Object.freeze([iU.EDITORS,iU.FILES,by.RESOURCES,by.INTERNAL_URI_LIST]);function eee(i,e=!1){const t=JJ(i),n=t.get(by.INTERNAL_URI_LIST);if(n)t.replace(ui.uriList,n);else if(e||!t.has(ui.uriList)){const r=[];for(const s of i.items){const o=s.getAsFile();if(o){const a=o.path;try{a?r.push(Ye.file(a).toString()):r.push(Ye.parse(o.name,!0).toString())}catch{}}}r.length&&t.replace(ui.uriList,i9(HI.create(r)))}for(const r of MHe)t.delete(r);return t}function OHe(i,e,t){var n,r;return{edits:[...e.map(s=>new tu(i,typeof t.insertText=="string"?{range:s,text:t.insertText,insertAsSnippet:!1}:{range:s,text:t.insertText.snippet,insertAsSnippet:!0})),...(r=(n=t.additionalEdit)===null||n===void 0?void 0:n.edits)!==null&&r!==void 0?r:[]]}}function tee(i){var e;function t(a,l){return"providerId"in a&&a.providerId===l.providerId||"mimeType"in a&&a.mimeType===l.handledMimeType}const n=new Map;for(const a of i)for(const l of(e=a.yieldTo)!==null&&e!==void 0?e:[])for(const c of i)if(c!==a&&t(l,c)){let d=n.get(a);d||(d=[],n.set(a,d)),d.push(c)}if(!n.size)return Array.from(i);const r=new Set,s=[];function o(a){if(!a.length)return[];const l=a[0];if(s.includes(l))return console.warn(`Yield to cycle detected for ${l.providerId}`),a;if(r.has(l))return o(a.slice(1));let c=[];const d=n.get(l);return d&&(s.push(l),c=o(d),s.pop()),r.add(l),[...c,l,...o(a.slice(1))]}return o(Array.from(i))}var FHe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},BHe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},WHe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const VHe=dt.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:uG,inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}});class UI extends q{constructor(e,t,n,r,s){super(),this.typeId=e,this.editor=t,this.range=n,this.delegate=s,this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this.create(r),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this)}create(e){this.domNode=ce(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=e;const t=ce("span.icon");this.domNode.append(t),t.classList.add(...Qe.asClassNameArray(me.loading),"codicon-modifier-spin");const n=()=>{const r=this.editor.getOption(66);this.domNode.style.height=`${r}px`,this.domNode.style.width=`${Math.ceil(.8*r)}px`};n(),this._register(this.editor.onDidChangeConfiguration(r=>{(r.hasChanged(52)||r.hasChanged(66))&&n()})),this._register(ee(this.domNode,Ce.CLICK,r=>{this.delegate.cancel()}))}getId(){return UI.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}dispose(){super.dispose(),this.editor.removeContentWidget(this)}}UI.baseId="editor.widget.inlineProgressWidget";let tL=class extends q{constructor(e,t,n){super(),this.id=e,this._editor=t,this._instantiationService=n,this._showDelay=500,this._showPromise=this._register(new vr),this._currentWidget=new vr,this._operationIdPool=0,this._currentDecorations=t.createDecorationsCollection()}showWhile(e,t,n){return WHe(this,void 0,void 0,function*(){const r=this._operationIdPool++;this._currentOperation=r,this.clear(),this._showPromise.value=Hh(()=>{const s=D.fromPositions(e);this._currentDecorations.set([{range:s,options:VHe}]).length>0&&(this._currentWidget.value=this._instantiationService.createInstance(UI,this.id,this._editor,s,t,n))},this._showDelay);try{return yield n}finally{this._currentOperation===r&&(this.clear(),this._currentOperation=void 0)}})}clear(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}};tL=FHe([BHe(2,rt)],tL);var nee=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},n0=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},rU=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},xO;let nL=xO=class extends q{constructor(e,t,n,r,s,o,a,l,c,d){super(),this.typeId=e,this.editor=t,this.showCommand=r,this.range=s,this.edits=o,this.onSelectNewEdit=a,this._contextMenuService=l,this._keybindingService=d,this.allowEditorOverflow=!0,this.suppressMouseDown=!0,this.create(),this.visibleContext=n.bindTo(c),this.visibleContext.set(!0),this._register(st(()=>this.visibleContext.reset())),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this),this._register(st(()=>this.editor.removeContentWidget(this))),this._register(this.editor.onDidChangeCursorPosition(u=>{s.containsPosition(u.position)||this.dispose()})),this._register(Re.runAndSubscribe(d.onDidUpdateKeybindings,()=>{this._updateButtonTitle()}))}_updateButtonTitle(){var e;const t=(e=this._keybindingService.lookupKeybinding(this.showCommand.id))===null||e===void 0?void 0:e.getLabel();this.button.element.title=this.showCommand.label+(t?` (${t})`:"")}create(){this.domNode=ce(".post-edit-widget"),this.button=this._register(new aM(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(ee(this.domNode,Ce.CLICK,()=>this.showSelector()))}getId(){return xO.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:this.range.getEndPosition(),preference:[2]}}showSelector(){this._contextMenuService.showContextMenu({getAnchor:()=>{const e=Mi(this.button.element);return{x:e.left+e.width,y:e.top+e.height}},getActions:()=>this.edits.allEdits.map((e,t)=>u_({id:"",label:e.label,checked:t===this.edits.activeEditIndex,run:()=>{if(t!==this.edits.activeEditIndex)return this.onSelectNewEdit(t)}}))})}};nL.baseId="editor.widget.postEditWidget";nL=xO=nee([n0(7,qa),n0(8,ot),n0(9,bn)],nL);let iL=class extends q{constructor(e,t,n,r,s,o){super(),this._id=e,this._editor=t,this._visibleContext=n,this._showCommand=r,this._instantiationService=s,this._bulkEditService=o,this._currentWidget=this._register(new vr),this._register(Re.any(t.onDidChangeModel,t.onDidChangeModelContent)(()=>this.clear()))}applyEditAndShowIfNeeded(e,t,n,r){var s,o;return rU(this,void 0,void 0,function*(){const a=this._editor.getModel();if(!a||!e.length)return;const l=t.allEdits[t.activeEditIndex];if(!l)return;let c=[];(typeof l.insertText=="string"?l.insertText==="":l.insertText.snippet==="")?c=[]:c=e.map(y=>new tu(a.uri,typeof l.insertText=="string"?{range:y,text:l.insertText,insertAsSnippet:!1}:{range:y,text:l.insertText.snippet,insertAsSnippet:!0}));const u={edits:[...c,...(o=(s=l.additionalEdit)===null||s===void 0?void 0:s.edits)!==null&&o!==void 0?o:[]]},h=e[0],f=a.deltaDecorations([],[{range:h,options:{description:"paste-line-suffix",stickiness:0}}]);let g,m;try{g=yield this._bulkEditService.apply(u,{editor:this._editor,token:r}),m=a.getDecorationRange(f[0])}finally{a.deltaDecorations(f,[])}n&&g.isApplied&&t.allEdits.length>1&&this.show(m??h,t,y=>rU(this,void 0,void 0,function*(){const b=this._editor.getModel();b&&(yield b.undo(),this.applyEditAndShowIfNeeded(e,{activeEditIndex:y,allEdits:t.allEdits},n,r))}))})}show(e,t,n){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(nL,this._id,this._editor,this._visibleContext,this._showCommand,e,t,n))}clear(){this._currentWidget.clear()}tryShowSelector(){var e;(e=this._currentWidget.value)===null||e===void 0||e.showSelector()}};iL=nee([n0(4,rt),n0(5,QC)],iL);var HHe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},_m=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Sd=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},TO;const iee="editor.changePasteType",ree=new Ne("pasteWidgetVisible",!1,p("pasteWidgetVisible","Whether the paste widget is showing")),pN="application/vnd.code.copyMetadata";let up=TO=class extends q{static get(e){return e.getContribution(TO.ID)}constructor(e,t,n,r,s,o,a){super(),this._bulkEditService=n,this._clipboardService=r,this._languageFeaturesService=s,this._quickInputService=o,this._progressService=a,this._editor=e;const l=e.getContainerDomNode();this._register(ee(l,"copy",c=>this.handleCopy(c))),this._register(ee(l,"cut",c=>this.handleCopy(c))),this._register(ee(l,"paste",c=>this.handlePaste(c),!0)),this._pasteProgressManager=this._register(new tL("pasteIntoEditor",e,t)),this._postPasteWidgetManager=this._register(t.createInstance(iL,"pasteIntoEditor",e,ree,{id:iee,label:p("postPasteWidgetTitle","Show paste options...")}))}changePasteType(){this._postPasteWidgetManager.tryShowSelector()}pasteAs(e){this._editor.focus();try{this._pasteAsActionContext={preferredId:e},CD().execCommand("paste")}finally{this._pasteAsActionContext=void 0}}isPasteAsEnabled(){return this._editor.getOption(84).enabled&&!this._editor.getOption(90)}handleCopy(e){var t,n;if(!this._editor.hasTextFocus()||(gf&&this._clipboardService.writeResources([]),!e.clipboardData||!this.isPasteAsEnabled()))return;const r=this._editor.getModel(),s=this._editor.getSelections();if(!r||!(s!=null&&s.length))return;const o=this._editor.getOption(37);let a=s;const l=s.length===1&&s[0].isEmpty();if(l){if(!o)return;a=[new D(a[0].startLineNumber,1,a[0].startLineNumber,1+r.getLineLength(a[0].startLineNumber))]}const c=(t=this._editor._getViewModel())===null||t===void 0?void 0:t.getPlainTextToCopy(s,o,Ar),u={multicursorText:Array.isArray(c)?c:null,pasteOnNewLine:l,mode:null},h=this._languageFeaturesService.documentPasteEditProvider.ordered(r).filter(b=>!!b.prepareDocumentPaste);if(!h.length){this.setCopyMetadata(e.clipboardData,{defaultPastePayload:u});return}const f=JJ(e.clipboardData),g=h.flatMap(b=>{var v;return(v=b.copyMimeTypes)!==null&&v!==void 0?v:[]}),m=VI();this.setCopyMetadata(e.clipboardData,{id:m,providerCopyMimeTypes:g,defaultPastePayload:u});const y=Ui(b=>Sd(this,void 0,void 0,function*(){const v=zc(yield Promise.all(h.map(C=>Sd(this,void 0,void 0,function*(){try{return yield C.prepareDocumentPaste(r,a,f,b)}catch(w){console.error(w);return}}))));v.reverse();for(const C of v)for(const[w,S]of C)f.replace(w,S);return f}));(n=this._currentCopyOperation)===null||n===void 0||n.dataTransferPromise.cancel(),this._currentCopyOperation={handle:m,dataTransferPromise:y}}handlePaste(e){var t,n;return Sd(this,void 0,void 0,function*(){if(!e.clipboardData||!this._editor.hasTextFocus())return;(t=this._currentPasteOperation)===null||t===void 0||t.cancel(),this._currentPasteOperation=void 0;const r=this._editor.getModel(),s=this._editor.getSelections();if(!(s!=null&&s.length)||!r||!this.isPasteAsEnabled())return;const o=this.fetchCopyMetadata(e),a=eee(e.clipboardData);a.delete(pN);const l=[...e.clipboardData.types,...(n=o==null?void 0:o.providerCopyMimeTypes)!==null&&n!==void 0?n:[],ui.uriList],c=this._languageFeaturesService.documentPasteEditProvider.ordered(r).filter(d=>{var u;return(u=d.pasteMimeTypes)===null||u===void 0?void 0:u.some(h=>YJ(h,l))});c.length&&(e.preventDefault(),e.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferredId,c,s,a,o):this.doPasteInline(c,s,a,o))})}doPasteInline(e,t,n,r){const s=Ui(o=>Sd(this,void 0,void 0,function*(){const a=this._editor;if(!a.hasModel())return;const l=a.getModel(),c=new Xh(a,3,void 0,o);try{if(yield this.mergeInDataFromCopy(n,r,c.token),c.token.isCancellationRequested)return;const d=e.filter(h=>sU(h,n));if(!d.length||d.length===1&&d[0].id==="text"){yield this.applyDefaultPasteHandler(n,r,c.token);return}const u=yield this.getPasteEdits(d,n,l,t,c.token);if(c.token.isCancellationRequested)return;if(u.length===1&&u[0].providerId==="text"){yield this.applyDefaultPasteHandler(n,r,c.token);return}if(u.length){const h=a.getOption(84).showPasteSelector==="afterPaste";return this._postPasteWidgetManager.applyEditAndShowIfNeeded(t,{activeEditIndex:0,allEdits:u},h,c.token)}yield this.applyDefaultPasteHandler(n,r,c.token)}finally{c.dispose(),this._currentPasteOperation===s&&(this._currentPasteOperation=void 0)}}));this._pasteProgressManager.showWhile(t[0].getEndPosition(),p("pasteIntoEditorProgress","Running paste handlers. Click to cancel"),s),this._currentPasteOperation=s}showPasteAsPick(e,t,n,r,s){const o=Ui(a=>Sd(this,void 0,void 0,function*(){const l=this._editor;if(!l.hasModel())return;const c=l.getModel(),d=new Xh(l,3,void 0,a);try{if(yield this.mergeInDataFromCopy(r,s,d.token),d.token.isCancellationRequested)return;let u=t.filter(m=>sU(m,r));e&&(u=u.filter(m=>m.id===e));const h=yield this.getPasteEdits(u,r,c,n,d.token);if(d.token.isCancellationRequested||!h.length)return;let f;if(e)f=h.at(0);else{const m=yield this._quickInputService.pick(h.map(y=>({label:y.label,description:y.providerId,detail:y.detail,edit:y})),{placeHolder:p("pasteAsPickerPlaceholder","Select Paste Action")});f=m==null?void 0:m.edit}if(!f)return;const g=OHe(c.uri,n,f);yield this._bulkEditService.apply(g,{editor:this._editor})}finally{d.dispose(),this._currentPasteOperation===o&&(this._currentPasteOperation=void 0)}}));this._progressService.withProgress({location:10,title:p("pasteAsProgress","Running paste handlers")},()=>o)}setCopyMetadata(e,t){e.setData(pN,JSON.stringify(t))}fetchCopyMetadata(e){var t;if(!e.clipboardData)return;const n=e.clipboardData.getData(pN);if(n)try{return JSON.parse(n)}catch{return}const[r,s]=XA.getTextData(e.clipboardData);if(s)return{defaultPastePayload:{mode:s.mode,multicursorText:(t=s.multicursorText)!==null&&t!==void 0?t:null,pasteOnNewLine:!!s.isFromEmptySelection}}}mergeInDataFromCopy(e,t,n){var r;return Sd(this,void 0,void 0,function*(){if(t!=null&&t.id&&((r=this._currentCopyOperation)===null||r===void 0?void 0:r.handle)===t.id){const s=yield this._currentCopyOperation.dataTransferPromise;if(n.isCancellationRequested)return;for(const[o,a]of s)e.replace(o,a)}if(!e.has(ui.uriList)){const s=yield this._clipboardService.readResources();if(n.isCancellationRequested)return;s.length&&e.append(ui.uriList,i9(HI.create(s)))}})}getPasteEdits(e,t,n,r,s){return Sd(this,void 0,void 0,function*(){const o=yield SD(Promise.all(e.map(l=>Sd(this,void 0,void 0,function*(){var c;try{const d=yield(c=l.provideDocumentPasteEdits)===null||c===void 0?void 0:c.call(l,n,r,t,s);if(d)return Object.assign(Object.assign({},d),{providerId:l.id})}catch(d){console.error(d)}}))),s),a=zc(o??[]);return tee(a)})}applyDefaultPasteHandler(e,t,n){var r,s,o;return Sd(this,void 0,void 0,function*(){const a=(r=e.get(ui.text))!==null&&r!==void 0?r:e.get("text");if(!a)return;const l=yield a.asString();if(n.isCancellationRequested)return;const c={text:l,pasteOnNewLine:(s=t==null?void 0:t.defaultPastePayload.pasteOnNewLine)!==null&&s!==void 0?s:!1,multicursorText:(o=t==null?void 0:t.defaultPastePayload.multicursorText)!==null&&o!==void 0?o:null,mode:null};this._editor.trigger("keyboard","paste",c)})}};up.ID="editor.contrib.copyPasteActionController";up=TO=HHe([_m(1,rt),_m(2,QC),_m(3,xu),_m(4,Fe),_m(5,Xl),_m(6,zX)],up);function sU(i,e){var t;return!!(!((t=i.pasteMimeTypes)===null||t===void 0)&&t.some(n=>e.matches(n)))}var r9=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Hy=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},w1=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const s9=p("builtIn","Built-in");class o9{provideDocumentPasteEdits(e,t,n,r){return w1(this,void 0,void 0,function*(){const s=yield this.getEdit(n,r);return s?{insertText:s.insertText,label:s.label,detail:s.detail,handledMimeType:s.handledMimeType,yieldTo:s.yieldTo}:void 0})}provideDocumentOnDropEdits(e,t,n,r){return w1(this,void 0,void 0,function*(){const s=yield this.getEdit(n,r);return s?{insertText:s.insertText,label:s.label,handledMimeType:s.handledMimeType,yieldTo:s.yieldTo}:void 0})}}class see extends o9{constructor(){super(...arguments),this.id="text",this.dropMimeTypes=[ui.text],this.pasteMimeTypes=[ui.text]}getEdit(e,t){return w1(this,void 0,void 0,function*(){const n=e.get(ui.text);if(!n||e.has(ui.uriList))return;const r=yield n.asString();return{handledMimeType:ui.text,label:p("text.label","Insert Plain Text"),detail:s9,insertText:r}})}}class oee extends o9{constructor(){super(...arguments),this.id="uri",this.dropMimeTypes=[ui.uriList],this.pasteMimeTypes=[ui.uriList]}getEdit(e,t){return w1(this,void 0,void 0,function*(){const n=yield aee(e);if(!n.length||t.isCancellationRequested)return;let r=0;const s=n.map(({uri:a,originalText:l})=>a.scheme===bt.file?a.fsPath:(r++,l)).join(" ");let o;return r>0?o=n.length>1?p("defaultDropProvider.uriList.uris","Insert Uris"):p("defaultDropProvider.uriList.uri","Insert Uri"):o=n.length>1?p("defaultDropProvider.uriList.paths","Insert Paths"):p("defaultDropProvider.uriList.path","Insert Path"),{handledMimeType:ui.uriList,insertText:s,label:o,detail:s9}})}}let rL=class extends o9{constructor(e){super(),this._workspaceContextService=e,this.id="relativePath",this.dropMimeTypes=[ui.uriList],this.pasteMimeTypes=[ui.uriList]}getEdit(e,t){return w1(this,void 0,void 0,function*(){const n=yield aee(e);if(!n.length||t.isCancellationRequested)return;const r=zc(n.map(({uri:s})=>{const o=this._workspaceContextService.getWorkspaceFolder(s);return o?QAe(o.uri,s):void 0}));if(r.length)return{handledMimeType:ui.uriList,insertText:r.join(" "),label:n.length>1?p("defaultDropProvider.uriList.relativePaths","Insert Relative Paths"):p("defaultDropProvider.uriList.relativePath","Insert Relative Path"),detail:s9}})}};rL=r9([Hy(0,Yg)],rL);function aee(i){return w1(this,void 0,void 0,function*(){const e=i.get(ui.uriList);if(!e)return[];const t=yield e.asString(),n=[];for(const r of HI.parse(t))try{n.push({uri:Ye.parse(r),originalText:r})}catch{}return n})}let kO=class extends q{constructor(e,t){super(),this._register(e.documentOnDropEditProvider.register("*",new see)),this._register(e.documentOnDropEditProvider.register("*",new oee)),this._register(e.documentOnDropEditProvider.register("*",new rL(t)))}};kO=r9([Hy(0,Fe),Hy(1,Yg)],kO);let LO=class extends q{constructor(e,t){super(),this._register(e.documentPasteEditProvider.register("*",new see)),this._register(e.documentPasteEditProvider.register("*",new oee)),this._register(e.documentPasteEditProvider.register("*",new rL(t)))}};LO=r9([Hy(0,Fe),Hy(1,Yg)],LO);$t(up.ID,up,0);mI(LO);ye(new class extends sr{constructor(){super({id:iee,precondition:ree,kbOpts:{weight:100,primary:2137}})}runEditorCommand(i,e,t){var n;return(n=up.get(e))===null||n===void 0?void 0:n.changePasteType()}});ue(class extends Me{constructor(){super({id:"editor.action.pasteAs",label:p("pasteAs","Paste As..."),alias:"Paste As...",precondition:void 0,description:{description:"Paste as",args:[{name:"args",schema:{type:"object",properties:{id:{type:"string",description:p("pasteAs.id","The id of the paste edit to try applying. If not provided, the editor will show a picker.")}}}}]}})}run(i,e,t){var n;const r=typeof(t==null?void 0:t.id)=="string"?t.id:void 0;return(n=up.get(e))===null||n===void 0?void 0:n.pasteAs(r)}});class UHe{constructor(){this._dragOperations=new Map}removeDragOperationTransfer(e){if(e&&this._dragOperations.has(e)){const t=this._dragOperations.get(e);return this._dragOperations.delete(e),t}}}class oU{constructor(e){this.identifier=e}}const lee=Lt("treeViewsDndService");Wt(lee,UHe,1);var jHe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},NS=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},$b=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},DO;const cee="editor.experimental.dropIntoEditor.defaultProvider",dee="editor.changeDropType",uee=new Ne("dropWidgetVisible",!1,p("dropWidgetVisible","Whether the drop widget is showing"));let S1=DO=class extends q{static get(e){return e.getContribution(DO.ID)}constructor(e,t,n,r,s){super(),this._configService=n,this._languageFeaturesService=r,this._treeViewsDragAndDropService=s,this.treeItemsTransfer=Vy.getInstance(),this._dropProgressManager=this._register(t.createInstance(tL,"dropIntoEditor",e)),this._postDropWidgetManager=this._register(t.createInstance(iL,"dropIntoEditor",e,uee,{id:dee,label:p("postDropWidgetTitle","Show drop options...")})),this._register(e.onDropIntoEditor(o=>this.onDropIntoEditor(e,o.position,o.event)))}changeDropType(){this._postDropWidgetManager.tryShowSelector()}onDropIntoEditor(e,t,n){var r;return $b(this,void 0,void 0,function*(){if(!n.dataTransfer||!e.hasModel())return;(r=this._currentOperation)===null||r===void 0||r.cancel(),e.focus(),e.setPosition(t);const s=Ui(o=>$b(this,void 0,void 0,function*(){const a=new Xh(e,1,void 0,o);try{const l=yield this.extractDataTransferData(n);if(l.size===0||a.token.isCancellationRequested)return;const c=e.getModel();if(!c)return;const d=this._languageFeaturesService.documentOnDropEditProvider.ordered(c).filter(h=>h.dropMimeTypes?h.dropMimeTypes.some(f=>l.matches(f)):!0),u=yield this.getDropEdits(d,c,t,l,a);if(a.token.isCancellationRequested)return;if(u.length){const h=this.getInitialActiveEditIndex(c,u),f=e.getOption(36).showDropSelector==="afterDrop";yield this._postDropWidgetManager.applyEditAndShowIfNeeded([D.fromPositions(t)],{activeEditIndex:h,allEdits:u},f,o)}}finally{a.dispose(),this._currentOperation===s&&(this._currentOperation=void 0)}}));this._dropProgressManager.showWhile(t,p("dropIntoEditorProgress","Running drop handlers. Click to cancel"),s),this._currentOperation=s})}getDropEdits(e,t,n,r,s){return $b(this,void 0,void 0,function*(){const o=yield SD(Promise.all(e.map(l=>$b(this,void 0,void 0,function*(){try{const c=yield l.provideDocumentOnDropEdits(t,n,r,s.token);if(c)return Object.assign(Object.assign({},c),{providerId:l.id})}catch(c){console.error(c)}}))),s.token),a=zc(o??[]);return tee(a)})}getInitialActiveEditIndex(e,t){const n=this._configService.getValue(cee,{resource:e.uri});for(const[r,s]of Object.entries(n)){const o=t.findIndex(a=>s===a.providerId&&a.handledMimeType&&YJ(r,[a.handledMimeType]));if(o>=0)return o}return 0}extractDataTransferData(e){return $b(this,void 0,void 0,function*(){if(!e.dataTransfer)return new XJ;const t=eee(e.dataTransfer);if(this.treeItemsTransfer.hasData(oU.prototype)){const n=this.treeItemsTransfer.getData(oU.prototype);if(Array.isArray(n))for(const r of n){const s=yield this._treeViewsDragAndDropService.removeDragOperationTransfer(r.identifier);if(s)for(const[o,a]of s)t.replace(o,a)}}return t})}};S1.ID="editor.contrib.dropIntoEditorController";S1=DO=jHe([NS(1,rt),NS(2,Et),NS(3,Fe),NS(4,lee)],S1);$t(S1.ID,S1,2);ye(new class extends sr{constructor(){super({id:dee,precondition:uee,kbOpts:{weight:100,primary:2137}})}runEditorCommand(i,e,t){var n;(n=S1.get(e))===null||n===void 0||n.changeDropType()}});mI(kO);qn.as(Zl.Configuration).registerConfiguration(Object.assign(Object.assign({},XD),{properties:{[cee]:{type:"object",scope:5,description:p("defaultProviderDescription","Configures the default drop provider to use for content of a given mime type."),default:{},additionalProperties:{type:"string"}}}}));class Jr{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getDecorationRangeAt(e){const t=e<this._decorations.length?this._decorations[e]:null;return t?this._editor.getModel().getDecorationRange(t):null}getCurrentMatchesPosition(e){const t=this._editor.getModel().getDecorationsInRange(e);for(const n of t){const r=n.options;if(r===Jr._FIND_MATCH_DECORATION||r===Jr._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(n.id)}return 0}setCurrentFindMatch(e){let t=null,n=0;if(e)for(let r=0,s=this._decorations.length;r<s;r++){const o=this._editor.getModel().getDecorationRange(this._decorations[r]);if(e.equalsRange(o)){t=this._decorations[r],n=r+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(r=>{if(this._highlightedDecorationId!==null&&(r.changeDecorationOptions(this._highlightedDecorationId,Jr._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,r.changeDecorationOptions(this._highlightedDecorationId,Jr._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(r.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let s=this._editor.getModel().getDecorationRange(t);if(s.startLineNumber!==s.endLineNumber&&s.endColumn===1){const o=s.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(o);s=new D(s.startLineNumber,s.startColumn,o,a)}this._rangeHighlightDecorationId=r.addDecoration(s,Jr._RANGE_HIGHLIGHT_DECORATION)}}),n}set(e,t){this._editor.changeDecorations(n=>{let r=Jr._FIND_MATCH_DECORATION;const s=[];if(e.length>1e3){r=Jr._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),c=this._editor.getLayoutInfo().height/a,d=Math.max(2,Math.ceil(3/c));let u=e[0].range.startLineNumber,h=e[0].range.endLineNumber;for(let f=1,g=e.length;f<g;f++){const m=e[f].range;h+d>=m.startLineNumber?m.endLineNumber>h&&(h=m.endLineNumber):(s.push({range:new D(u,1,h,1),options:Jr._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),u=m.startLineNumber,h=m.endLineNumber)}s.push({range:new D(u,1,h,1),options:Jr._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}const o=new Array(e.length);for(let a=0,l=e.length;a<l;a++)o[a]={range:e[a].range,options:r};this._decorations=n.deltaDecorations(this._decorations,o),this._overviewRulerApproximateDecorations=n.deltaDecorations(this._overviewRulerApproximateDecorations,s),this._rangeHighlightDecorationId&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>n.removeDecoration(a)),this._findScopeDecorationIds=[]),t!=null&&t.length&&(this._findScopeDecorationIds=t.map(a=>n.addDecoration(a,Jr._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){const n=this._decorations[t],r=this._editor.getModel().getDecorationRange(n);if(!(!r||r.endLineNumber>e.lineNumber)){if(r.endLineNumber<e.lineNumber)return r;if(!(r.endColumn>e.column))return r}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,n=this._decorations.length;t<n;t++){const r=this._decorations[t],s=this._editor.getModel().getDecorationRange(r);if(!(!s||s.startLineNumber<e.lineNumber)){if(s.startLineNumber>e.lineNumber)return s;if(!(s.startColumn<e.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}Jr._CURRENT_FIND_MATCH_DECORATION=dt.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:Zn(u5),position:Ao.Center},minimap:{color:Zn(zm),position:Js.Inline}});Jr._FIND_MATCH_DECORATION=dt.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:Zn(u5),position:Ao.Center},minimap:{color:Zn(zm),position:Js.Inline}});Jr._FIND_MATCH_NO_OVERVIEW_DECORATION=dt.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});Jr._FIND_MATCH_ONLY_OVERVIEW_DECORATION=dt.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:Zn(u5),position:Ao.Center}});Jr._RANGE_HIGHLIGHT_DECORATION=dt.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});Jr._FIND_SCOPE_DECORATION=dt.register({description:"find-scope",className:"findScope",isWholeLine:!0});class zHe{constructor(e,t,n){this._editorSelection=e,this._ranges=t,this._replaceStrings=n,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){const n=[];for(let o=0;o<this._ranges.length;o++)n.push({range:this._ranges[o],text:this._replaceStrings[o]});n.sort((o,a)=>D.compareRangesUsingStarts(o.range,a.range));const r=[];let s=n[0];for(let o=1;o<n.length;o++)s.range.endLineNumber===n[o].range.startLineNumber&&s.range.endColumn===n[o].range.startColumn?(s.range=s.range.plusRange(n[o].range),s.text=s.text+n[o].text):(r.push(s),s=n[o]);r.push(s);for(const o of r)t.addEditOperation(o.range,o.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}function hee(i,e){if(i&&i[0]!==""){const t=aU(i,e,"-"),n=aU(i,e,"_");return t&&!n?lU(i,e,"-"):!t&&n?lU(i,e,"_"):i[0].toUpperCase()===i[0]?e.toUpperCase():i[0].toLowerCase()===i[0]?e.toLowerCase():DTe(i[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):i[0][0].toUpperCase()!==i[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function aU(i,e,t){return i[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&i[0].split(t).length===e.split(t).length}function lU(i,e,t){const n=e.split(t),r=i[0].split(t);let s="";return n.forEach((o,a)=>{s+=hee([r[a]],o)+t}),s.slice(0,-1)}class cU{constructor(e){this.staticValue=e,this.kind=0}}class $He{constructor(e){this.pieces=e,this.kind=1}}class x1{static fromStaticValue(e){return new x1([Eg.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}constructor(e){!e||e.length===0?this._state=new cU(""):e.length===1&&e[0].staticValue!==null?this._state=new cU(e[0].staticValue):this._state=new $He(e)}buildReplaceString(e,t){if(this._state.kind===0)return t?hee(e,this._state.staticValue):this._state.staticValue;let n="";for(let r=0,s=this._state.pieces.length;r<s;r++){const o=this._state.pieces[r];if(o.staticValue!==null){n+=o.staticValue;continue}let a=x1._substitute(o.matchIndex,e);if(o.caseOps!==null&&o.caseOps.length>0){const l=[],c=o.caseOps.length;let d=0;for(let u=0,h=a.length;u<h;u++){if(d>=c){l.push(a.slice(u));break}switch(o.caseOps[d]){case"U":l.push(a[u].toUpperCase());break;case"u":l.push(a[u].toUpperCase()),d++;break;case"L":l.push(a[u].toLowerCase());break;case"l":l.push(a[u].toLowerCase()),d++;break;default:l.push(a[u])}}a=l.join("")}n+=a}return n}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let n="";for(;e>0;){if(e<t.length)return(t[e]||"")+n;n=String(e%10)+n,e=Math.floor(e/10)}return"$"+n}}class Eg{static staticValue(e){return new Eg(e,-1,null)}static caseOps(e,t){return new Eg(null,e,t)}constructor(e,t,n){this.staticValue=e,this.matchIndex=t,!n||n.length===0?this.caseOps=null:this.caseOps=n.slice(0)}}class KHe{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,n){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=Eg.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=Eg.caseOps(e,n),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=Eg.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new x1(this._result)}}function qHe(i){if(!i||i.length===0)return new x1(null);const e=[],t=new KHe(i);for(let n=0,r=i.length;n<r;n++){const s=i.charCodeAt(n);if(s===92){if(n++,n>=r)break;const o=i.charCodeAt(n);switch(o){case 92:t.emitUnchanged(n-1),t.emitStatic("\\",n+1);break;case 110:t.emitUnchanged(n-1),t.emitStatic(`
`,n+1);break;case 116:t.emitUnchanged(n-1),t.emitStatic("	",n+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(n-1),t.emitStatic("",n+1),e.push(String.fromCharCode(o));break}continue}if(s===36){if(n++,n>=r)break;const o=i.charCodeAt(n);if(o===36){t.emitUnchanged(n-1),t.emitStatic("$",n+1);continue}if(o===48||o===38){t.emitUnchanged(n-1),t.emitMatchIndex(0,n+1,e),e.length=0;continue}if(49<=o&&o<=57){let a=o-48;if(n+1<r){const l=i.charCodeAt(n+1);if(48<=l&&l<=57){n++,a=a*10+(l-48),t.emitUnchanged(n-2),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}t.emitUnchanged(n-1),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}}return t.finalize()}const Tu=new Ne("findWidgetVisible",!1);Tu.toNegated();const jI=new Ne("findInputFocussed",!1),a9=new Ne("replaceInputFocussed",!1),AS={primary:545,mac:{primary:2593}},PS={primary:565,mac:{primary:2613}},MS={primary:560,mac:{primary:2608}},OS={primary:554,mac:{primary:2602}},FS={primary:558,mac:{primary:2606}},Sn={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",GoToMatchFindAction:"editor.action.goToMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},hh=19999,GHe=240;class i0{constructor(e,t){this._toDispose=new ae,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new za,this._decorations=new Jr(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new fn(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(n=>{(n.reason===3||n.reason===5||n.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(n=>{this._ignoreModelContentChanged||(n.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(n=>this._onStateChanged(n))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,an(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},GHe)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let n=null;typeof t<"u"?t!==null&&(Array.isArray(t)?n=t:n=[t]):n=this._decorations.getFindScopes(),n!==null&&(n=n.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new D(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));const r=this._findMatches(n,!1,hh);this._decorations.set(r,n);const s=this._editor.getSelection();let o=this._decorations.getCurrentMatchesPosition(s);if(o===0&&r.length>0){const a=K0(r.map(l=>l.range),l=>D.compareRangesUsingStarts(l,s)>=0);o=a>0?a-1+1:o}this._state.changeMatchInfo(o,this._decorations.getCount(),void 0),e&&this._editor.getOption(41).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){const e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){const t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:n,column:r}=e;const s=this._editor.getModel();return t||r===1?(n===1?n=s.getLineCount():n--,r=s.getLineMaxColumn(n)):r--,new U(n,r)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const d=this._decorations.matchAfterPosition(e);d&&this._setCurrentFindMatch(d);return}if(this._decorations.getCount()<hh){let d=this._decorations.matchBeforePosition(e);d&&d.isEmpty()&&d.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),d=this._decorations.matchBeforePosition(e)),d&&this._setCurrentFindMatch(d);return}if(this._cannotFind())return;const n=this._decorations.getFindScope(),r=i0._getSearchRange(this._editor.getModel(),n);r.getEndPosition().isBefore(e)&&(e=r.getEndPosition()),e.isBefore(r.getStartPosition())&&(e=r.getEndPosition());const{lineNumber:s,column:o}=e,a=this._editor.getModel();let l=new U(s,o),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(129):null,!1);if(c&&c.range.isEmpty()&&c.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(129):null,!1)),!!c){if(!t&&!r.containsRange(c.range))return this._moveToPrevMatch(c.range.getStartPosition(),!0);this._setCurrentFindMatch(c.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:n,column:r}=e;const s=this._editor.getModel();return t||r===s.getLineMaxColumn(n)?(n===s.getLineCount()?n=1:n++,r=1):r++,new U(n,r)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const n=this._decorations.matchBeforePosition(e);n&&this._setCurrentFindMatch(n);return}if(this._decorations.getCount()<hh){let n=this._decorations.matchAfterPosition(e);n&&n.isEmpty()&&n.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),n=this._decorations.matchAfterPosition(e)),n&&this._setCurrentFindMatch(n);return}const t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,n,r=!1){if(this._cannotFind())return null;const s=this._decorations.getFindScope(),o=i0._getSearchRange(this._editor.getModel(),s);o.getEndPosition().isBefore(e)&&(e=o.getStartPosition()),e.isBefore(o.getStartPosition())&&(e=o.getStartPosition());const{lineNumber:a,column:l}=e,c=this._editor.getModel();let d=new U(a,l),u=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(129):null,t);return n&&u&&u.range.isEmpty()&&u.range.getStartPosition().equals(d)&&(d=this._nextSearchPosition(d),u=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(129):null,t)),u?!r&&!o.containsRange(u.range)?this._getNextMatch(u.range.getEndPosition(),t,n,!0):u:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_moveToMatch(e){const t=this._decorations.getDecorationRangeAt(e);t&&this._setCurrentFindMatch(t)}moveToMatch(e){this._moveToMatch(e)}_getReplacePattern(){return this._state.isRegex?qHe(this._state.replaceString):x1.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;const e=this._getReplacePattern(),t=this._editor.getSelection(),n=this._getNextMatch(t.getStartPosition(),!0,!1);if(n)if(t.equalsRange(n.range)){const r=e.buildReplaceString(n.matches,this._state.preserveCase),s=new Sr(t,r);this._executeEditorCommand("replace",s),this._decorations.setStartPosition(new U(t.startLineNumber,t.startColumn+r.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(n.range)}_findMatches(e,t,n){const r=(e||[null]).map(s=>i0._getSearchRange(this._editor.getModel(),s));return this._editor.getModel().findMatches(this._state.searchString,r,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(129):null,t,n)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=hh?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new Vf(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(129):null).parseSearchRequest();if(!t)return;let n=t.regex;if(!n.multiline){let u="mu";n.ignoreCase&&(u+="i"),n.global&&(u+="g"),n=new RegExp(n.source,u)}const r=this._editor.getModel(),s=r.getValue(1),o=r.getFullModelRange(),a=this._getReplacePattern();let l;const c=this._state.preserveCase;a.hasReplacementPatterns||c?l=s.replace(n,function(){return a.buildReplaceString(arguments,c)}):l=s.replace(n,a.buildReplaceString(null,c));const d=new v5(o,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",d)}_regularReplaceAll(e){const t=this._getReplacePattern(),n=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),r=[];for(let o=0,a=n.length;o<a;o++)r[o]=t.buildReplaceString(n[o].matches,this._state.preserveCase);const s=new zHe(this._editor.getSelection(),n.map(o=>o.range),r);this._executeEditorCommand("replaceAll",s)}selectAllMatches(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();let n=this._findMatches(e,!1,1073741824).map(s=>new Be(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn));const r=this._editor.getSelection();for(let s=0,o=n.length;s<o;s++)if(n[s].equalsRange(r)){n=[r].concat(n.slice(0,s)).concat(n.slice(s+1));break}this._editor.setSelections(n)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}class zI extends $a{constructor(e,t,n){super(),this._hideSoon=this._register(new fn(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=n,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.style.zIndex="12",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const r={inputActiveOptionBorder:Ae(l5),inputActiveOptionForeground:Ae(c5),inputActiveOptionBackground:Ae(hg)};this.caseSensitive=this._register(new CY(Object.assign({appendTitle:this._keybindingLabelFor(Sn.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase},r))),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new wY(Object.assign({appendTitle:this._keybindingLabelFor(Sn.ToggleWholeWordCommand),isChecked:this._state.wholeWord},r))),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new SY(Object.assign({appendTitle:this._keybindingLabelFor(Sn.ToggleRegexCommand),isChecked:this._state.isRegex},r))),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(s=>{let o=!1;s.isRegex&&(this.regex.checked=this._state.isRegex,o=!0),s.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,o=!0),s.matchCase&&(this.caseSensitive.checked=this._state.matchCase,o=!0),!this._state.isRevealed&&o&&this._revealTemporarily()})),this._register(ee(this._domNode,Ce.MOUSE_LEAVE,s=>this._onMouseLeave())),this._register(ee(this._domNode,"mouseover",s=>this._onMouseOver()))}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return zI.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}}zI.ID="editor.contrib.findOptionsWidget";function BS(i,e){return i===1?!0:i===2?!1:e}class ZHe extends q{get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return BS(this._isRegexOverride,this._isRegex)}get wholeWord(){return BS(this._wholeWordOverride,this._wholeWord)}get matchCase(){return BS(this._matchCaseOverride,this._matchCase)}get preserveCase(){return BS(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}constructor(){super(),this._onFindReplaceStateChange=this._register(new H),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}changeMatchInfo(e,t,n){const r={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let s=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,r.matchesPosition=!0,s=!0),this._matchesCount!==t&&(this._matchesCount=t,r.matchesCount=!0,s=!0),typeof n<"u"&&(D.equalsRange(this._currentMatch,n)||(this._currentMatch=n,r.currentMatch=!0,s=!0)),s&&this._onFindReplaceStateChange.fire(r)}change(e,t,n=!0){var r;const s={moveCursor:t,updateHistory:n,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let o=!1;const a=this.isRegex,l=this.wholeWord,c=this.matchCase,d=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,s.searchString=!0,o=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,s.replaceString=!0,o=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,s.isRevealed=!0,o=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,s.isReplaceRevealed=!0,o=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(!((r=e.searchScope)===null||r===void 0)&&r.every(u=>{var h;return(h=this._searchScope)===null||h===void 0?void 0:h.some(f=>!D.equalsRange(f,u))})||(this._searchScope=e.searchScope,s.searchScope=!0,o=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,s.loop=!0,o=!0),typeof e.isSearching<"u"&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,s.isSearching=!0,o=!0),typeof e.filters<"u"&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,s.filters=!0,o=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,a!==this.isRegex&&(o=!0,s.isRegex=!0),l!==this.wholeWord&&(o=!0,s.wholeWord=!0),c!==this.matchCase&&(o=!0,s.matchCase=!0),d!==this.preserveCase&&(o=!0,s.preserveCase=!0),o&&this._onFindReplaceStateChange.fire(s)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=hh}}const XHe=p("defaultLabel","input"),YHe=p("label.preserveCaseToggle","Preserve Case");class QHe extends nb{constructor(e){super({icon:me.preserveCase,title:YHe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class JHe extends $a{constructor(e,t,n,r){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new H),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new H),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new H),this._onInput=this._register(new H),this._onKeyUp=this._register(new H),this._onPreserveCaseKeyDown=this._register(new H),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=r.placeholder||"",this.validation=r.validation,this.label=r.label||XHe;const s=r.appendPreserveCaseLabel||"",o=r.history||[],a=!!r.flexibleHeight,l=!!r.flexibleWidth,c=r.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new xY(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:o,showHistoryHint:r.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c,inputBoxStyles:r.inputBoxStyles})),this.preserveCase=this._register(new QHe(Object.assign({appendTitle:s,isChecked:!1},r.toggleStyles))),this._register(this.preserveCase.onChange(h=>{this._onDidOptionChange.fire(h),!h&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(h=>{this._onPreserveCaseKeyDown.fire(h)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;const d=[this.preserveCase.domNode];this.onkeydown(this.domNode,h=>{if(h.equals(15)||h.equals(17)||h.equals(9)){const f=d.indexOf(document.activeElement);if(f>=0){let g=-1;h.equals(17)?g=(f+1)%d.length:h.equals(15)&&(f===0?g=d.length-1:g=f-1),h.equals(9)?(d[f].blur(),this.inputBox.focus()):g>=0&&d[g].focus(),_t.stop(h,!0)}}});const u=document.createElement("div");u.className="controls",u.style.display=this._showOptionButtons?"block":"none",u.appendChild(this.preserveCase.domNode),this.domNode.appendChild(u),e==null||e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,h=>this._onKeyDown.fire(h)),this.onkeyup(this.inputBox.inputElement,h=>this._onKeyUp.fire(h)),this.oninput(this.inputBox.inputElement,h=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,h=>this._onMouseDown.fire(h))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){var e;(e=this.inputBox)===null||e===void 0||e.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}var fee=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},gee=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const l9=new Ne("suggestWidgetVisible",!1,p("suggestWidgetVisible","Whether suggestion are visible")),c9="historyNavigationWidgetFocus",pee="historyNavigationForwardsEnabled",mee="historyNavigationBackwardsEnabled";let ou;const WS=[];function _ee(i,e){if(WS.includes(e))throw new Error("Cannot register the same widget multiple times");WS.push(e);const t=new ae,n=new Ne(c9,!1).bindTo(i),r=new Ne(pee,!0).bindTo(i),s=new Ne(mee,!0).bindTo(i),o=()=>{n.set(!0),ou=e},a=()=>{n.set(!1),ou===e&&(ou=void 0)};return e.element===document.activeElement&&o(),t.add(e.onDidFocus(()=>o())),t.add(e.onDidBlur(()=>a())),t.add(st(()=>{WS.splice(WS.indexOf(e),1),a()})),{historyNavigationForwardsEnablement:r,historyNavigationBackwardsEnablement:s,dispose(){t.dispose()}}}let IO=class extends TY{constructor(e,t,n,r){super(e,t,n);const s=this._register(r.createScoped(this.inputBox.element));this._register(_ee(s,this.inputBox))}};IO=fee([gee(3,ot)],IO);let RO=class extends JHe{constructor(e,t,n,r,s=!1){super(e,t,s,n);const o=this._register(r.createScoped(this.inputBox.element));this._register(_ee(o,this.inputBox))}};RO=fee([gee(3,ot)],RO);Fs.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:re.and(re.has(c9),re.equals(mee,!0),re.not("isComposing"),l9.isEqualTo(!1)),primary:16,secondary:[528],handler:i=>{ou==null||ou.showPreviousValue()}});Fs.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:re.and(re.has(c9),re.equals(pee,!0),re.not("isComposing"),l9.isEqualTo(!1)),primary:18,secondary:[530],handler:i=>{ou==null||ou.showNextValue()}});function dU(i){var e,t;return((e=i.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=i.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}var eUe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const tUe=gi("find-selection",me.selection,p("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),uU=gi("find-collapsed",me.chevronRight,p("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),hU=gi("find-expanded",me.chevronDown,p("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),nUe=gi("find-replace",me.replace,p("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),iUe=gi("find-replace-all",me.replaceAll,p("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),rUe=gi("find-previous-match",me.arrowUp,p("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),sUe=gi("find-next-match",me.arrowDown,p("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),oUe=p("label.findDialog","Find / Replace"),aUe=p("label.find","Find"),lUe=p("placeholder.find","Find"),cUe=p("label.previousMatchButton","Previous Match"),dUe=p("label.nextMatchButton","Next Match"),uUe=p("label.toggleSelectionFind","Find in Selection"),hUe=p("label.closeButton","Close"),fUe=p("label.replace","Replace"),gUe=p("placeholder.replace","Replace"),pUe=p("label.replaceButton","Replace"),mUe=p("label.replaceAllButton","Replace All"),_Ue=p("label.toggleReplaceButton","Toggle Replace"),bUe=p("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",hh),vUe=p("label.matchesLocation","{0} of {1}"),fU=p("label.noResults","No results"),ec=419,yUe=275,CUe=yUe-54;let Kb=69;const wUe=33,gU="ctrlEnterReplaceAll.windows.donotask",pU=Ot?256:2048;class mN{constructor(e){this.afterLineNumber=e,this.heightInPx=wUe,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function mU(i,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionStart>0){i.stopPropagation();return}}function _U(i,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionEnd<t.value.length){i.stopPropagation();return}}class $I extends $a{constructor(e,t,n,r,s,o,a,l,c){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=n,this._contextViewProvider=r,this._keybindingService=s,this._contextKeyService=o,this._storageService=l,this._notificationService=c,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(gU,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new Ha(500),this._register(st(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(d=>this._onStateChanged(d))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(d=>{if(d.hasChanged(90)&&(this._codeEditor.getOption(90)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),d.hasChanged(143)&&this._tryUpdateWidgetWidth(),d.hasChanged(2)&&this.updateAccessibilitySupport(),d.hasChanged(41)){const u=this._codeEditor.getOption(41).loop;this._state.change({loop:u},!1);const h=this._codeEditor.getOption(41).addExtraSpaceOnTop;h&&!this._viewZone&&(this._viewZone=new mN(0),this._showViewZone()),!h&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>eUe(this,void 0,void 0,function*(){if(this._isVisible){const d=yield this._controller.getGlobalBufferTerm();d&&d!==this._state.searchString&&(this._state.change({searchString:d},!1),this._findInput.select())}}))),this._findInputFocused=jI.bindTo(o),this._findFocusTracker=this._register(qc(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=a9.bindTo(o),this._replaceFocusTracker=this._register(qc(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(41).addExtraSpaceOnTop&&(this._viewZone=new mN(0)),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(d=>{if(d.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return $I.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(90)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=Es(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){const t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,ut)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=Kb+"px",this._state.matchesCount>=hh?this._matchesCount.title=bUe:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=hh&&(t+="+");let n=String(this._state.matchesPosition);n==="0"&&(n="?"),e=jg(vUe,n,t)}else e=fU;this._matchesCount.appendChild(document.createTextNode(e)),jr(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),Kb=Math.max(Kb,this._matchesCount.clientWidth)}_getAriaLabel(e,t,n){if(e===fU)return n===""?p("ariaSearchNoResultEmpty","{0} found",e):p("ariaSearchNoResult","{0} found for '{1}'",e,n);if(t){const r=p("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,n,t.startLineNumber+":"+t.startColumn),s=this._codeEditor.getModel();return s&&t.startLineNumber<=s.getLineCount()&&t.startLineNumber>=1?`${s.getLineContent(t.startLineNumber)}, ${r}`:r}return p("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,n)}_updateToggleSelectionFindButton(){const e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,n=this._toggleSelectionFind.checked;this._isVisible&&(n||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);const e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);const n=!this._codeEditor.getOption(90);this._toggleReplaceBtn.setEnabled(this._isVisible&&n)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(41).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{const n=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=n;break}}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(41).seedSearchStringFromSelection&&e){const n=this._codeEditor.getDomNode();if(n){const r=Mi(n),s=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),o=r.left+(s?s.left:0),a=s?s.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const l=EG(this._domNode).left;o>l&&(t=!1);const c=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());r.left+(c?c.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(41).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const n=this._viewZone;this._viewZoneId!==void 0||!n||this._codeEditor.changeViewZones(r=>{n.heightInPx=this._getHeight(),this._viewZoneId=r.addZone(n),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+n.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(41).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new mN(0));const n=this._viewZone;this._codeEditor.changeViewZones(r=>{if(this._viewZoneId!==void 0){const s=this._getHeight();if(s===n.heightInPx)return;const o=s-n.heightInPx;n.heightInPx=s,r.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o);return}else{let s=this._getHeight();if(s-=this._codeEditor.getOption(83).top,s<=0)return;n.heightInPx=s,this._viewZoneId=r.addZone(n),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+s)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_tryUpdateWidgetWidth(){if(!this._isVisible||!z3(this._domNode))return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const n=e.width,r=e.minimap.minimapWidth;let s=!1,o=!1,a=!1;if(this._resized&&Es(this._domNode)>ec){this._domNode.style.maxWidth=`${n-28-r-15}px`,this._replaceInput.width=Es(this._findInput.domNode);return}if(ec+28+r>=n&&(o=!0),ec+28+r-Kb>=n&&(a=!0),ec+28+r-Kb>=n+50&&(s=!0),this._domNode.classList.toggle("collapsed-find-widget",s),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",o),!a&&!s&&(this._domNode.style.maxWidth=`${n-28-r-15}px`),this._findInput.layout({collapsedFindWidget:s,narrowFindWidget:a,reducedFindWidget:o}),this._resized){const l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=Es(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){const e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const n=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!D.equalsRange(t,n)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(pU|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return mU(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return _U(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(pU|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{Ar&&kl&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(p("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(gU,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return mU(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return _U(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new IO(null,this._contextViewProvider,{width:CUe,label:aUe,placeholder:lUe,appendCaseSensitiveLabel:this._keybindingLabelFor(Sn.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(Sn.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(Sn.ToggleRegexCommand),validation:l=>{if(l.length===0||!this._findInput.getRegex())return null;try{return new RegExp(l,"gu"),null}catch(c){return{content:c.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:()=>dU(this._keybindingService),inputBoxStyles:bk,toggleStyles:_k},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(l=>this._onFindInputKeyDown(l))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(l=>{l.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),l.preventDefault())})),this._register(this._findInput.onRegexKeyDown(l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),l.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(l=>{this._tryUpdateHeight()&&this._showViewZone()})),os&&this._register(this._findInput.onMouseDown(l=>this._onFindInputMouseDown(l))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new bm({label:cUe+this._keybindingLabelFor(Sn.PreviousMatchFindAction),icon:rUe,onTrigger:()=>{cg(this._codeEditor.getAction(Sn.PreviousMatchFindAction)).run().then(void 0,ut)}})),this._nextBtn=this._register(new bm({label:dUe+this._keybindingLabelFor(Sn.NextMatchFindAction),icon:sUe,onTrigger:()=>{cg(this._codeEditor.getAction(Sn.NextMatchFindAction)).run().then(void 0,ut)}}));const n=document.createElement("div");n.className="find-part",n.appendChild(this._findInput.domNode);const r=document.createElement("div");r.className="find-actions",n.appendChild(r),r.appendChild(this._matchesCount),r.appendChild(this._prevBtn.domNode),r.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new nb({icon:tUe,title:uUe+this._keybindingLabelFor(Sn.ToggleSearchScopeCommand),isChecked:!1,inputActiveOptionBackground:Ae(hg),inputActiveOptionBorder:Ae(l5),inputActiveOptionForeground:Ae(c5)})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){const l=this._codeEditor.getSelections();l.map(c=>(c.endColumn===1&&c.endLineNumber>c.startLineNumber&&(c=c.setEndPosition(c.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(c.endLineNumber-1))),c.isEmpty()?null:c)).filter(c=>!!c),l.length&&this._state.change({searchScope:l},!0)}}else this._state.change({searchScope:null},!0)})),r.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new bm({label:hUe+this._keybindingLabelFor(Sn.CloseFindWidgetCommand),icon:GY,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),l.preventDefault())}})),this._replaceInput=this._register(new RO(null,void 0,{label:fUe,placeholder:gUe,appendPreserveCaseLabel:this._keybindingLabelFor(Sn.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>dU(this._keybindingService),inputBoxStyles:bk,toggleStyles:_k},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(l=>this._onReplaceInputKeyDown(l))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(l=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(l=>{l.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),l.preventDefault())})),this._replaceBtn=this._register(new bm({label:pUe+this._keybindingLabelFor(Sn.ReplaceOneAction),icon:nUe,onTrigger:()=>{this._controller.replace()},onKeyDown:l=>{l.equals(1026)&&(this._closeBtn.focus(),l.preventDefault())}})),this._replaceAllBtn=this._register(new bm({label:mUe+this._keybindingLabelFor(Sn.ReplaceAllAction),icon:iUe,onTrigger:()=>{this._controller.replaceAll()}}));const s=document.createElement("div");s.className="replace-part",s.appendChild(this._replaceInput.domNode);const o=document.createElement("div");o.className="replace-actions",s.appendChild(o),o.appendChild(this._replaceBtn.domNode),o.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new bm({label:_Ue,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=Es(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.ariaLabel=oUe,this._domNode.role="dialog",this._domNode.style.width=`${ec}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(n),this._domNode.appendChild(this._closeBtn.domNode),this._domNode.appendChild(s),this._resizeSash=new Fr(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let a=ec;this._register(this._resizeSash.onDidStart(()=>{a=Es(this._domNode)})),this._register(this._resizeSash.onDidChange(l=>{this._resized=!0;const c=a+l.startX-l.currentX;if(c<ec)return;const d=parseFloat(yD(this._domNode).maxWidth)||0;c>d||(this._domNode.style.width=`${c}px`,this._isReplaceVisible&&(this._replaceInput.width=Es(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const l=Es(this._domNode);if(l<ec)return;let c=ec;if(!this._resized||l===ec){const d=this._codeEditor.getLayoutInfo();c=d.width-28-d.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${c}px`,this._isReplaceVisible&&(this._replaceInput.width=Es(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}}$I.ID="editor.contrib.findWidget";class bm extends $a{constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+Qe.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,n=>{this._opts.onTrigger(),n.preventDefault()}),this.onkeydown(this._domNode,n=>{var r,s;if(n.equals(10)||n.equals(3)){this._opts.onTrigger(),n.preventDefault();return}(s=(r=this._opts).onKeyDown)===null||s===void 0||s.call(r,n)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...Qe.asClassNameArray(uU)),this._domNode.classList.add(...Qe.asClassNameArray(hU))):(this._domNode.classList.remove(...Qe.asClassNameArray(hU)),this._domNode.classList.add(...Qe.asClassNameArray(uU)))}}Ka((i,e)=>{const t=(m,y)=>{y&&e.addRule(`.monaco-editor ${m} { background-color: ${y}; }`)};t(".findMatch",i.getColor(Ic)),t(".currentFindMatch",i.getColor(WRe)),t(".findScope",i.getColor(VRe));const n=i.getColor(si);t(".find-widget",n);const r=i.getColor(xc);r&&e.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${r}; }`);const s=i.getColor(a5);s&&e.addRule(`.monaco-editor .find-widget { border-left: 1px solid ${s}; border-right: 1px solid ${s}; border-bottom: 1px solid ${s}; }`);const o=i.getColor(rh);o&&e.addRule(`.monaco-editor .findMatch { border: 1px ${Rl(i.type)?"dotted":"solid"} ${o}; box-sizing: border-box; }`);const a=i.getColor(HRe);a&&e.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${a}; padding: 1px; box-sizing: border-box; }`);const l=i.getColor(URe);l&&e.addRule(`.monaco-editor .findScope { border: 1px ${Rl(i.type)?"dashed":"solid"} ${l}; }`);const c=i.getColor(Rt);c&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${c}; }`);const d=i.getColor(Lc);d&&e.addRule(`.monaco-editor .find-widget { color: ${d}; }`);const u=i.getColor(lRe);u&&e.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${u}; }`);const h=i.getColor(RRe);if(h)e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${h}; }`);else{const m=i.getColor(Dc);m&&e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${m}; }`)}const f=i.getColor(GA);f&&e.addRule(`
		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: ${f} !important;
		}
	`);const g=i.getColor(ko);g&&e.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${g}; }`)});var bee=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},hl=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},hp=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},EO;const SUe=524288;function NO(i,e="single",t=!1){if(!i.hasModel())return null;const n=i.getSelection();if(e==="single"&&n.startLineNumber===n.endLineNumber||e==="multiple"){if(n.isEmpty()){const r=i.getConfiguredWordAtPosition(n.getStartPosition());if(r&&t===!1)return r.word}else if(i.getModel().getValueLengthInRange(n)<SUe)return i.getModel().getValueInRange(n)}return null}let Cs=EO=class extends q{get editor(){return this._editor}static get(e){return e.getContribution(EO.ID)}constructor(e,t,n,r,s){super(),this._editor=e,this._findWidgetVisible=Tu.bindTo(t),this._contextKeyService=t,this._storageService=n,this._clipboardService=r,this._notificationService=s,this._updateHistoryDelayer=new Ha(500),this._state=this._register(new ZHe),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(o=>this._onStateChanged(o))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{const o=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),o&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(41).loop})}))}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,1),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,1),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,1),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,1)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!jI.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){const e=this._editor.getSelections();e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=No(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e,t){return hp(this,void 0,void 0,function*(){if(this.disposeModel(),!this._editor.hasModel())return;const n=Object.assign(Object.assign({},t),{isRevealed:!0});if(e.seedSearchStringFromSelection==="single"){const r=NO(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);r&&(this._state.isRegex?n.searchString=No(r):n.searchString=r)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){const r=NO(this._editor,e.seedSearchStringFromSelection);r&&(n.searchString=r)}if(!n.searchString&&e.seedSearchStringFromGlobalClipboard){const r=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;r&&(n.searchString=r)}if(e.forceRevealReplace||n.isReplaceRevealed?n.isReplaceRevealed=!0:this._findWidgetVisible.get()||(n.isReplaceRevealed=!1),e.updateSearchScope){const r=this._editor.getSelections();r.some(s=>!s.isEmpty())&&(n.searchScope=r)}n.loop=e.loop,this._state.change(n,!1),this._model||(this._model=new i0(this._editor,this._state))})}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}goToMatch(e){return this._model?(this._model.moveToMatch(e),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){var e;return this._model?!((e=this._editor.getModel())===null||e===void 0)&&e.isTooLargeForHeapOperation()?(this._notificationService.warn(p("too.large.for.replaceall","The file is too large to perform a replace all operation.")),!1):(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}getGlobalBufferTerm(){return hp(this,void 0,void 0,function*(){return this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""})}setGlobalBufferTerm(e){this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};Cs.ID="editor.contrib.findController";Cs=EO=bee([hl(1,ot),hl(2,Za),hl(3,xu),hl(4,wi)],Cs);let AO=class extends Cs{constructor(e,t,n,r,s,o,a,l){super(e,n,a,l,o),this._contextViewService=t,this._keybindingService=r,this._themeService=s,this._widget=null,this._findOptionsWidget=null}_start(e,t){const n=Object.create(null,{_start:{get:()=>super._start}});return hp(this,void 0,void 0,function*(){this._widget||this._createFindWidget();const r=this._editor.getSelection();let s=!1;switch(this._editor.getOption(41).autoFindInSelection){case"always":s=!0;break;case"never":s=!1;break;case"multiline":{s=!!r&&r.startLineNumber!==r.endLineNumber;break}}e.updateSearchScope=e.updateSearchScope||s,yield n._start.call(this,e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())})}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new $I(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new zI(this._editor,this._state,this._keybindingService))}};AO=bee([hl(1,Cu),hl(2,ot),hl(3,bn),hl(4,qi),hl(5,wi),hl(6,Za),hl(7,xu)],AO);const xUe=WG(new BG({id:Sn.StartFindAction,label:p("startFindAction","Find"),alias:"Find",precondition:re.or(N.focus,re.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:E.MenubarEditMenu,group:"3_find",title:p({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));xUe.addImplementation(0,(i,e,t)=>{const n=Cs.get(e);return n?n.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(41).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(41).loop}):!1});const TUe={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:p("actions.find.isRegexOverride",`Overrides "Use Regular Expression" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:p("actions.find.wholeWordOverride",`Overrides "Match Whole Word" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:p("actions.find.matchCaseOverride",`Overrides "Math Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:p("actions.find.preserveCaseOverride",`Overrides "Preserve Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},findInSelection:{type:"boolean"}}}}]};class kUe extends Me{constructor(){super({id:Sn.StartFindWithArgs,label:p("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:TUe})}run(e,t,n){return hp(this,void 0,void 0,function*(){const r=Cs.get(t);if(r){const s=n?{searchString:n.searchString,replaceString:n.replaceString,isReplaceRevealed:n.replaceString!==void 0,isRegex:n.isRegex,wholeWord:n.matchWholeWord,matchCase:n.isCaseSensitive,preserveCase:n.preserveCase}:{};yield r.start({forceRevealReplace:!1,seedSearchStringFromSelection:r.getState().searchString.length===0&&t.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(n==null?void 0:n.findInSelection)||!1,loop:t.getOption(41).loop},s),r.setGlobalBufferTerm(r.getState().searchString)}})}}class LUe extends Me{constructor(){super({id:Sn.StartFindWithSelection,label:p("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return hp(this,void 0,void 0,function*(){const n=Cs.get(t);n&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),n.setGlobalBufferTerm(n.getState().searchString))})}}class vee extends Me{run(e,t){return hp(this,void 0,void 0,function*(){const n=Cs.get(t);n&&!this._run(n)&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getState().searchString.length===0&&t.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(n))})}}class DUe extends vee{constructor(){super({id:Sn.NextMatchFindAction,label:p("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:N.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:re.and(N.focus,jI),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}class IUe extends vee{constructor(){super({id:Sn.PreviousMatchFindAction,label:p("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:N.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:re.and(N.focus,jI),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class RUe extends Me{constructor(){super({id:Sn.GoToMatchFindAction,label:p("findMatchAction.goToMatch","Go to Match..."),alias:"Go to Match...",precondition:Tu}),this._highlightDecorations=[]}run(e,t,n){const r=Cs.get(t);if(!r)return;const s=r.getState().matchesCount;if(s<1){e.get(wi).notify({severity:GD.Warning,message:p("findMatchAction.noResults","No matches. Try searching for something else.")});return}const a=e.get(Xl).createInputBox();a.placeholder=p("findMatchAction.inputPlaceHolder","Type a number to go to a specific match (between 1 and {0})",s);const l=d=>{const u=parseInt(d);if(isNaN(u))return;const h=r.getState().matchesCount;if(u>0&&u<=h)return u-1;if(u<0&&u>=-h)return h+u},c=d=>{const u=l(d);if(typeof u=="number"){a.validationMessage=void 0,r.goToMatch(u);const h=r.getState().currentMatch;h&&this.addDecorations(t,h)}else a.validationMessage=p("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",r.getState().matchesCount),this.clearDecorations(t)};a.onDidChangeValue(d=>{c(d)}),a.onDidAccept(()=>{const d=l(a.value);typeof d=="number"?(r.goToMatch(d),a.hide()):a.validationMessage=p("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",r.getState().matchesCount)}),a.onDidHide(()=>{this.clearDecorations(t),a.dispose()}),a.show()}clearDecorations(e){e.changeDecorations(t=>{this._highlightDecorations=t.deltaDecorations(this._highlightDecorations,[])})}addDecorations(e,t){e.changeDecorations(n=>{this._highlightDecorations=n.deltaDecorations(this._highlightDecorations,[{range:t,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:Zn(HZ),position:Ao.Full}}}])})}}class yee extends Me{run(e,t){return hp(this,void 0,void 0,function*(){const n=Cs.get(t);if(!n)return;const r=NO(t,"single",!1);r&&n.setSearchString(r),this._run(n)||(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(n))})}}class EUe extends yee{constructor(){super({id:Sn.NextSelectionMatchFindAction,label:p("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:N.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class NUe extends yee{constructor(){super({id:Sn.PreviousSelectionMatchFindAction,label:p("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:N.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const AUe=WG(new BG({id:Sn.StartFindReplaceAction,label:p("startReplace","Replace"),alias:"Replace",precondition:re.or(N.focus,re.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:E.MenubarEditMenu,group:"3_find",title:p({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));AUe.addImplementation(0,(i,e,t)=>{if(!e.hasModel()||e.getOption(90))return!1;const n=Cs.get(e);if(!n)return!1;const r=e.getSelection(),s=n.isFindInputFocused(),o=!r.isEmpty()&&r.startLineNumber===r.endLineNumber&&e.getOption(41).seedSearchStringFromSelection!=="never"&&!s,a=s||o?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:o?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(41).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(41).loop})});$t(Cs.ID,AO,0);ue(kUe);ue(LUe);ue(DUe);ue(IUe);ue(RUe);ue(EUe);ue(NUe);const Yl=sr.bindToContribution(Cs.get);ye(new Yl({id:Sn.CloseFindWidgetCommand,precondition:Tu,handler:i=>i.closeFindWidget(),kbOpts:{weight:100+5,kbExpr:re.and(N.focus,re.not("isComposing")),primary:9,secondary:[1033]}}));ye(new Yl({id:Sn.ToggleCaseSensitiveCommand,precondition:void 0,handler:i=>i.toggleCaseSensitive(),kbOpts:{weight:100+5,kbExpr:N.focus,primary:AS.primary,mac:AS.mac,win:AS.win,linux:AS.linux}}));ye(new Yl({id:Sn.ToggleWholeWordCommand,precondition:void 0,handler:i=>i.toggleWholeWords(),kbOpts:{weight:100+5,kbExpr:N.focus,primary:PS.primary,mac:PS.mac,win:PS.win,linux:PS.linux}}));ye(new Yl({id:Sn.ToggleRegexCommand,precondition:void 0,handler:i=>i.toggleRegex(),kbOpts:{weight:100+5,kbExpr:N.focus,primary:MS.primary,mac:MS.mac,win:MS.win,linux:MS.linux}}));ye(new Yl({id:Sn.ToggleSearchScopeCommand,precondition:void 0,handler:i=>i.toggleSearchScope(),kbOpts:{weight:100+5,kbExpr:N.focus,primary:OS.primary,mac:OS.mac,win:OS.win,linux:OS.linux}}));ye(new Yl({id:Sn.TogglePreserveCaseCommand,precondition:void 0,handler:i=>i.togglePreserveCase(),kbOpts:{weight:100+5,kbExpr:N.focus,primary:FS.primary,mac:FS.mac,win:FS.win,linux:FS.linux}}));ye(new Yl({id:Sn.ReplaceOneAction,precondition:Tu,handler:i=>i.replace(),kbOpts:{weight:100+5,kbExpr:N.focus,primary:3094}}));ye(new Yl({id:Sn.ReplaceOneAction,precondition:Tu,handler:i=>i.replace(),kbOpts:{weight:100+5,kbExpr:re.and(N.focus,a9),primary:3}}));ye(new Yl({id:Sn.ReplaceAllAction,precondition:Tu,handler:i=>i.replaceAll(),kbOpts:{weight:100+5,kbExpr:N.focus,primary:2563}}));ye(new Yl({id:Sn.ReplaceAllAction,precondition:Tu,handler:i=>i.replaceAll(),kbOpts:{weight:100+5,kbExpr:re.and(N.focus,a9),primary:void 0,mac:{primary:2051}}}));ye(new Yl({id:Sn.SelectAllMatchesAction,precondition:Tu,handler:i=>i.selectAllMatches(),kbOpts:{weight:100+5,kbExpr:N.focus,primary:515}}));const PUe={0:" ",1:"u",2:"r"},bU=65535,fl=16777215,vU=4278190080;class _N{constructor(e){const t=Math.ceil(e/32);this._states=new Uint32Array(t)}get(e){const t=e/32|0,n=e%32;return(this._states[t]&1<<n)!==0}set(e,t){const n=e/32|0,r=e%32,s=this._states[n];t?this._states[n]=s|1<<r:this._states[n]=s&~(1<<r)}}class vo{constructor(e,t,n){if(e.length!==t.length||e.length>bU)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new _N(e.length),this._userDefinedStates=new _N(e.length),this._recoveredStates=new _N(e.length),this._types=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;const e=[],t=(n,r)=>{const s=e[e.length-1];return this.getStartLineNumber(s)<=n&&this.getEndLineNumber(s)>=r};for(let n=0,r=this._startIndexes.length;n<r;n++){const s=this._startIndexes[n],o=this._endIndexes[n];if(s>fl||o>fl)throw new Error("startLineNumber or endLineNumber must not exceed "+fl);for(;e.length>0&&!t(s,o);)e.pop();const a=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=s+((a&255)<<24),this._endIndexes[n]=o+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&fl}getEndLineNumber(e){return this._endIndexes[e]&fl}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){return this._collapseStates.get(e)}setCollapsed(e,t){this._collapseStates.set(e,t)}isUserDefined(e){return this._userDefinedStates.get(e)}setUserDefined(e,t){return this._userDefinedStates.set(e,t)}isRecovered(e){return this._recoveredStates.get(e)}setRecovered(e,t){return this._recoveredStates.set(e,t)}getSource(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}setSource(e,t){t===1?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):t===2?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}setCollapsedAllOfType(e,t){let n=!1;if(this._types)for(let r=0;r<this._types.length;r++)this._types[r]===e&&(this.setCollapsed(r,t),n=!0);return n}toRegion(e){return new MUe(this,e)}getParentIndex(e){this.ensureParentIndices();const t=((this._startIndexes[e]&vU)>>>24)+((this._endIndexes[e]&vU)>>>16);return t===bU?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,n=this._startIndexes.length;if(n===0)return-1;for(;t<n;){const r=Math.floor((t+n)/2);e<this.getStartLineNumber(r)?n=r:t=r+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){const e=[];for(let t=0;t<this.length;t++)e[t]=`[${PUe[this.getSource(t)]}${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}toFoldRange(e){return{startLineNumber:this._startIndexes[e]&fl,endLineNumber:this._endIndexes[e]&fl,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}static fromFoldRanges(e){const t=e.length,n=new Uint32Array(t),r=new Uint32Array(t);let s=[],o=!1;for(let l=0;l<t;l++){const c=e[l];n[l]=c.startLineNumber,r[l]=c.endLineNumber,s.push(c.type),c.type&&(o=!0)}o||(s=void 0);const a=new vo(n,r,s);for(let l=0;l<t;l++)e[l].isCollapsed&&a.setCollapsed(l,!0),a.setSource(l,e[l].source);return a}static sanitizeAndMerge(e,t,n){n=n??Number.MAX_VALUE;const r=(m,y)=>Array.isArray(m)?b=>b<y?m[b]:void 0:b=>b<y?m.toFoldRange(b):void 0,s=r(e,e.length),o=r(t,t.length);let a=0,l=0,c=s(0),d=o(0);const u=[];let h,f=0;const g=[];for(;c||d;){let m;if(d&&(!c||c.startLineNumber>=d.startLineNumber))c&&c.startLineNumber===d.startLineNumber?(d.source===1?m=d:(m=c,m.isCollapsed=d.isCollapsed&&c.endLineNumber===d.endLineNumber,m.source=0),c=s(++a)):(m=d,d.isCollapsed&&d.source===0&&(m.source=2)),d=o(++l);else{let y=l,b=d;for(;;){if(!b||b.startLineNumber>c.endLineNumber){m=c;break}if(b.source===1&&b.endLineNumber>c.endLineNumber)break;b=o(++y)}c=s(++a)}if(m){for(;h&&h.endLineNumber<m.startLineNumber;)h=u.pop();m.endLineNumber>m.startLineNumber&&m.startLineNumber>f&&m.endLineNumber<=n&&(!h||h.endLineNumber>=m.endLineNumber)&&(g.push(m),f=m.startLineNumber,h&&u.push(h),h=m)}}return g}}class MUe{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class OUe{get regions(){return this._regions}get textModel(){return this._textModel}constructor(e,t){this._updateEventEmitter=new H,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new vo(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}toggleCollapseState(e){if(!e.length)return;e=e.sort((n,r)=>n.regionIndex-r.regionIndex);const t={};this._decorationProvider.changeDecorations(n=>{let r=0,s=-1,o=-1;const a=l=>{for(;r<l;){const c=this._regions.getEndLineNumber(r),d=this._regions.isCollapsed(r);if(c<=s){const u=this.regions.getSource(r)!==0;n.changeDecorationOptions(this._editorDecorationIds[r],this._decorationProvider.getDecorationOption(d,c<=o,u))}d&&c>o&&(o=c),r++}};for(const l of e){const c=l.regionIndex,d=this._editorDecorationIds[c];if(d&&!t[d]){t[d]=!0,a(c);const u=!this._regions.isCollapsed(c);this._regions.setCollapsed(c,u),s=Math.max(s,this._regions.getEndLineNumber(c))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){const t=new Array,n=r=>{for(const s of e)if(!(s.startLineNumber>r.endLineNumber||r.startLineNumber>s.endLineNumber))return!0;return!1};for(let r=0;r<this._regions.length;r++){const s=this._regions.toFoldRange(r);(s.source===0||!n(s))&&t.push(s)}this.updatePost(vo.fromFoldRanges(t))}update(e,t=[]){const n=this._currentFoldedOrManualRanges(t),r=vo.sanitizeAndMerge(e,n,this._textModel.getLineCount());this.updatePost(vo.fromFoldRanges(r))}updatePost(e){const t=[];let n=-1;for(let r=0,s=e.length;r<s;r++){const o=e.getStartLineNumber(r),a=e.getEndLineNumber(r),l=e.isCollapsed(r),c=e.getSource(r)!==0,d={startLineNumber:o,startColumn:this._textModel.getLineMaxColumn(o),endLineNumber:a,endColumn:this._textModel.getLineMaxColumn(a)+1};t.push({range:d,options:this._decorationProvider.getDecorationOption(l,a<=n,c)}),l&&a>n&&(n=a)}this._decorationProvider.changeDecorations(r=>this._editorDecorationIds=r.deltaDecorations(this._editorDecorationIds,t)),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(e=[]){const t=(r,s)=>{for(const o of e)if(r<o&&o<=s)return!0;return!1},n=[];for(let r=0,s=this._regions.length;r<s;r++){let o=this.regions.isCollapsed(r);const a=this.regions.getSource(r);if(o||a!==0){const l=this._regions.toFoldRange(r),c=this._textModel.getDecorationRange(this._editorDecorationIds[r]);c&&(o&&t(c.startLineNumber,c.endLineNumber)&&(o=!1),n.push({startLineNumber:c.startLineNumber,endLineNumber:c.endLineNumber,type:l.type,isCollapsed:o,source:a}))}}return n}getMemento(){const e=this._currentFoldedOrManualRanges(),t=[],n=this._textModel.getLineCount();for(let r=0,s=e.length;r<s;r++){const o=e[r];if(o.startLineNumber>=o.endLineNumber||o.startLineNumber<1||o.endLineNumber>n)continue;const a=this._getLinesChecksum(o.startLineNumber+1,o.endLineNumber);t.push({startLineNumber:o.startLineNumber,endLineNumber:o.endLineNumber,isCollapsed:o.isCollapsed,source:o.source,checksum:a})}return t.length>0?t:void 0}applyMemento(e){var t,n;if(!Array.isArray(e))return;const r=[],s=this._textModel.getLineCount();for(const a of e){if(a.startLineNumber>=a.endLineNumber||a.startLineNumber<1||a.endLineNumber>s)continue;const l=this._getLinesChecksum(a.startLineNumber+1,a.endLineNumber);(!a.checksum||l===a.checksum)&&r.push({startLineNumber:a.startLineNumber,endLineNumber:a.endLineNumber,type:void 0,isCollapsed:(t=a.isCollapsed)!==null&&t!==void 0?t:!0,source:(n=a.source)!==null&&n!==void 0?n:0})}const o=vo.sanitizeAndMerge(this._regions,r,s);this.updatePost(vo.fromFoldRanges(o))}_getLinesChecksum(e,t){return rZ(this._textModel.getLineContent(e)+this._textModel.getLineContent(t))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,t){const n=[];if(this._regions){let r=this._regions.findRange(e),s=1;for(;r>=0;){const o=this._regions.toRegion(r);(!t||t(o,s))&&n.push(o),s++,r=o.parentIndex}}return n}getRegionAtLine(e){if(this._regions){const t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){const n=[],r=e?e.regionIndex+1:0,s=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const o=[];for(let a=r,l=this._regions.length;a<l;a++){const c=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<s){for(;o.length>0&&!c.containedBy(o[o.length-1]);)o.pop();o.push(c),t(c,o.length)&&n.push(c)}else break}}else for(let o=r,a=this._regions.length;o<a;o++){const l=this._regions.toRegion(o);if(this._regions.getStartLineNumber(o)<s)(!t||t(l))&&n.push(l);else break}return n}}function Cee(i,e,t){const n=[];for(const r of t){const s=i.getRegionAtLine(r);if(s){const o=!s.isCollapsed;if(n.push(s),e>1){const a=i.getRegionsInside(s,(l,c)=>l.isCollapsed!==o&&c<e);n.push(...a)}}}i.toggleCollapseState(n)}function ob(i,e,t=Number.MAX_VALUE,n){const r=[];if(n&&n.length>0)for(const s of n){const o=i.getRegionAtLine(s);if(o&&(o.isCollapsed!==e&&r.push(o),t>1)){const a=i.getRegionsInside(o,(l,c)=>l.isCollapsed!==e&&c<t);r.push(...a)}}else{const s=i.getRegionsInside(null,(o,a)=>o.isCollapsed!==e&&a<t);r.push(...s)}i.toggleCollapseState(r)}function wee(i,e,t,n){const r=[];for(const s of n){const o=i.getAllRegionsAtLine(s,(a,l)=>a.isCollapsed!==e&&l<=t);r.push(...o)}i.toggleCollapseState(r)}function FUe(i,e,t){const n=[];for(const r of t){const s=i.getAllRegionsAtLine(r,o=>o.isCollapsed!==e);s.length>0&&n.push(s[0])}i.toggleCollapseState(n)}function BUe(i,e,t,n){const r=(o,a)=>a===e&&o.isCollapsed!==t&&!n.some(l=>o.containsLine(l)),s=i.getRegionsInside(null,r);i.toggleCollapseState(s)}function See(i,e,t){const n=[];for(const o of t){const a=i.getAllRegionsAtLine(o,void 0);a.length>0&&n.push(a[0])}const r=o=>n.every(a=>!a.containedBy(o)&&!o.containedBy(a))&&o.isCollapsed!==e,s=i.getRegionsInside(null,r);i.toggleCollapseState(s)}function d9(i,e,t){const n=i.textModel,r=i.regions,s=[];for(let o=r.length-1;o>=0;o--)if(t!==r.isCollapsed(o)){const a=r.getStartLineNumber(o);e.test(n.getLineContent(a))&&s.push(r.toRegion(o))}i.toggleCollapseState(s)}function u9(i,e,t){const n=i.regions,r=[];for(let s=n.length-1;s>=0;s--)t!==n.isCollapsed(s)&&e===n.getType(s)&&r.push(n.toRegion(s));i.toggleCollapseState(r)}function WUe(i,e){let t=null;const n=e.getRegionAtLine(i);if(n!==null&&(t=n.startLineNumber,i===t)){const r=n.parentIndex;r!==-1?t=e.regions.getStartLineNumber(r):t=null}return t}function VUe(i,e){let t=e.getRegionAtLine(i);if(t!==null&&t.startLineNumber===i){if(i!==t.startLineNumber)return t.startLineNumber;{const n=t.parentIndex;let r=0;for(n!==-1&&(r=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=r)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<i)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function HUe(i,e){let t=e.getRegionAtLine(i);if(t!==null&&t.startLineNumber===i){const n=t.parentIndex;let r=0;if(n!==-1)r=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;r=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=r)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>i)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}class UUe{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}constructor(e){this._updateEventEmitter=new H,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||Kh(t.text)[0]!==0))}updateHiddenRanges(){let e=!1;const t=[];let n=0,r=0,s=Number.MAX_VALUE,o=-1;const a=this._foldingModel.regions;for(;n<a.length;n++){if(!a.isCollapsed(n))continue;const l=a.getStartLineNumber(n)+1,c=a.getEndLineNumber(n);s<=l&&c<=o||(!e&&r<this._hiddenRanges.length&&this._hiddenRanges[r].startLineNumber===l&&this._hiddenRanges[r].endLineNumber===c?(t.push(this._hiddenRanges[r]),r++):(e=!0,t.push(new D(l,1,c,1))),s=l,o=c)}(this._hasLineChanges||e||r<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return yU(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1;const n=this._foldingModel.textModel;let r=null;const s=o=>((!r||!jUe(o,r))&&(r=yU(this._hiddenRanges,o)),r?r.startLineNumber-1:null);for(let o=0,a=e.length;o<a;o++){let l=e[o];const c=s(l.startLineNumber);c&&(l=l.setStartPosition(c,n.getLineMaxColumn(c)),t=!0);const d=s(l.endLineNumber);d&&(l=l.setEndPosition(d,n.getLineMaxColumn(d)),t=!0),e[o]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function jUe(i,e){return i>=e.startLineNumber&&i<=e.endLineNumber}function yU(i,e){const t=K0(i,n=>e<n.startLineNumber)-1;return t>=0&&i[t].endLineNumber>=e?i[t]:null}const zUe=5e3,$Ue="indent";class h9{constructor(e,t,n){this.editorModel=e,this.languageConfigurationService=t,this.foldingRangesLimit=n,this.id=$Ue}dispose(){}compute(e){const t=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,n=t&&!!t.offSide,r=t&&t.markers;return Promise.resolve(GUe(this.editorModel,n,r,this.foldingRangesLimit))}}let KUe=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,n){if(e>fl||t>fl)return;const r=this._length;this._startIndexes[r]=e,this._endIndexes[r]=t,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(e){const t=this._foldingRangesLimit.limit;if(this._length<=t){this._foldingRangesLimit.update(this._length,!1);const n=new Uint32Array(this._length),r=new Uint32Array(this._length);for(let s=this._length-1,o=0;s>=0;s--,o++)n[o]=this._startIndexes[s],r[o]=this._endIndexes[s];return new vo(n,r)}else{this._foldingRangesLimit.update(this._length,t);let n=0,r=this._indentOccurrences.length;for(let l=0;l<this._indentOccurrences.length;l++){const c=this._indentOccurrences[l];if(c){if(c+n>t){r=l;break}n+=c}}const s=e.getOptions().tabSize,o=new Uint32Array(t),a=new Uint32Array(t);for(let l=this._length-1,c=0;l>=0;l--){const d=this._startIndexes[l],u=e.getLineContent(d),h=jD(u,s);(h<r||h===r&&n++<t)&&(o[c]=d,a[c]=this._endIndexes[l],c++)}return new vo(o,a)}}};const qUe={limit:zUe,update:()=>{}};function GUe(i,e,t,n=qUe){const r=i.getOptions().tabSize,s=new KUe(n);let o;t&&(o=new RegExp(`(${t.start.source})|(?:${t.end.source})`));const a=[],l=i.getLineCount()+1;a.push({indent:-1,endAbove:l,line:l});for(let c=i.getLineCount();c>0;c--){const d=i.getLineContent(c),u=jD(d,r);let h=a[a.length-1];if(u===-1){e&&(h.endAbove=c);continue}let f;if(o&&(f=d.match(o)))if(f[1]){let g=a.length-1;for(;g>0&&a[g].indent!==-2;)g--;if(g>0){a.length=g+1,h=a[g],s.insertFirst(c,h.line,u),h.line=c,h.indent=u,h.endAbove=c;continue}}else{a.push({indent:-2,endAbove:c,line:c});continue}if(h.indent>u){do a.pop(),h=a[a.length-1];while(h.indent>u);const g=h.endAbove-1;g-c>=1&&s.insertFirst(c,g,u)}h.indent===u?h.endAbove=c:a.push({indent:u,endAbove:c,line:c})}return s.toIndentRanges(i)}const ZUe=P("editor.foldBackground",{light:ze(ih,.3),dark:ze(ih,.3),hcDark:null,hcLight:null},p("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);P("editorGutter.foldingControlForeground",{dark:nh,light:nh,hcDark:nh,hcLight:nh},p("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));const KI=gi("folding-expanded",me.chevronDown,p("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),qI=gi("folding-collapsed",me.chevronRight,p("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),xee=gi("folding-manual-collapsed",qI,p("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),Tee=gi("folding-manual-expanded",KI,p("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin.")),f9={color:Zn(ZUe),position:Js.Inline};class Si{constructor(e){this.editor=e,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(e,t,n){return t?Si.HIDDEN_RANGE_DECORATION:this.showFoldingControls==="never"?e?this.showFoldingHighlights?Si.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:Si.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:Si.NO_CONTROLS_EXPANDED_RANGE_DECORATION:e?n?this.showFoldingHighlights?Si.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:Si.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?Si.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:Si.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls==="mouseover"?n?Si.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:Si.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:n?Si.MANUALLY_EXPANDED_VISUAL_DECORATION:Si.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}}Si.COLLAPSED_VISUAL_DECORATION=dt.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:Qe.asClassName(qI)});Si.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=dt.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:f9,isWholeLine:!0,firstLineDecorationClassName:Qe.asClassName(qI)});Si.MANUALLY_COLLAPSED_VISUAL_DECORATION=dt.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:Qe.asClassName(xee)});Si.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=dt.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:f9,isWholeLine:!0,firstLineDecorationClassName:Qe.asClassName(xee)});Si.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=dt.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0});Si.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=dt.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:f9,isWholeLine:!0});Si.EXPANDED_VISUAL_DECORATION=dt.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+Qe.asClassName(KI)});Si.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=dt.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:Qe.asClassName(KI)});Si.MANUALLY_EXPANDED_VISUAL_DECORATION=dt.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+Qe.asClassName(Tee)});Si.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=dt.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:Qe.asClassName(Tee)});Si.NO_CONTROLS_EXPANDED_RANGE_DECORATION=dt.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0});Si.HIDDEN_RANGE_DECORATION=dt.register({description:"folding-hidden-range-decoration",stickiness:1});const XUe={},YUe="syntax";class g9{constructor(e,t,n,r,s){this.editorModel=e,this.providers=t,this.handleFoldingRangesChange=n,this.foldingRangesLimit=r,this.fallbackRangeProvider=s,this.id=YUe,this.disposables=new ae,s&&this.disposables.add(s);for(const o of t)typeof o.onDidChange=="function"&&this.disposables.add(o.onDidChange(n))}compute(e){return QUe(this.providers,this.editorModel,e).then(t=>{var n,r;return t?eje(t,this.foldingRangesLimit):(r=(n=this.fallbackRangeProvider)===null||n===void 0?void 0:n.compute(e))!==null&&r!==void 0?r:null})}dispose(){this.disposables.dispose()}}function QUe(i,e,t){let n=null;const r=i.map((s,o)=>Promise.resolve(s.provideFoldingRanges(e,XUe,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(n)||(n=[]);const l=e.getLineCount();for(const c of a)c.start>0&&c.end>c.start&&c.end<=l&&n.push({start:c.start,end:c.end,rank:o,kind:c.kind})}},Ii));return Promise.all(r).then(s=>n)}class JUe{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,n,r){if(e>fl||t>fl)return;const s=this._length;this._startIndexes[s]=e,this._endIndexes[s]=t,this._nestingLevels[s]=r,this._types[s]=n,this._length++,r<30&&(this._nestingLevelCounts[r]=(this._nestingLevelCounts[r]||0)+1)}toIndentRanges(){const e=this._foldingRangesLimit.limit;if(this._length<=e){this._foldingRangesLimit.update(this._length,!1);const t=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let r=0;r<this._length;r++)t[r]=this._startIndexes[r],n[r]=this._endIndexes[r];return new vo(t,n,this._types)}else{this._foldingRangesLimit.update(this._length,e);let t=0,n=this._nestingLevelCounts.length;for(let a=0;a<this._nestingLevelCounts.length;a++){const l=this._nestingLevelCounts[a];if(l){if(l+t>e){n=a;break}t+=l}}const r=new Uint32Array(e),s=new Uint32Array(e),o=[];for(let a=0,l=0;a<this._length;a++){const c=this._nestingLevels[a];(c<n||c===n&&t++<e)&&(r[l]=this._startIndexes[a],s[l]=this._endIndexes[a],o[l]=this._types[a],l++)}return new vo(r,s,o)}}}function eje(i,e){const t=i.sort((o,a)=>{let l=o.start-a.start;return l===0&&(l=o.rank-a.rank),l}),n=new JUe(e);let r;const s=[];for(const o of t)if(!r)r=o,n.add(o.start,o.end,o.kind&&o.kind.value,s.length);else if(o.start>r.start)if(o.end<=r.end)s.push(r),r=o,n.add(o.start,o.end,o.kind&&o.kind.value,s.length);else{if(o.start>r.end){do r=s.pop();while(r&&o.start>r.end);r&&s.push(r),r=o}n.add(o.start,o.end,o.kind&&o.kind.value,s.length)}return n.toIndentRanges()}var tje=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},qb=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},nje=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Lm;const Zr=new Ne("foldingEnabled",!1);let nd=Lm=class extends q{static get(e){return e.getContribution(Lm.ID)}static getFoldingRangeProviders(e,t){var n,r;const s=e.foldingRangeProvider.ordered(t);return(r=(n=Lm._foldingRangeSelector)===null||n===void 0?void 0:n.call(Lm,s,t))!==null&&r!==void 0?r:s}constructor(e,t,n,r,s,o){super(),this.contextKeyService=t,this.languageConfigurationService=n,this.languageFeaturesService=o,this.localToDispose=this._register(new ae),this.editor=e,this._foldingLimitReporter=new kee(e);const a=this.editor.getOptions();this._isEnabled=a.get(43),this._useFoldingProviders=a.get(44)!=="indentation",this._unfoldOnClickAfterEndOfLine=a.get(48),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=a.get(46),this.updateDebounceInfo=s.for(o.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new Si(e),this.foldingDecorationProvider.showFoldingControls=a.get(109),this.foldingDecorationProvider.showFoldingHighlights=a.get(45),this.foldingEnabled=Zr.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(l=>{if(l.hasChanged(43)&&(this._isEnabled=this.editor.getOptions().get(43),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),l.hasChanged(47)&&this.onModelChanged(),l.hasChanged(109)||l.hasChanged(45)){const c=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=c.get(109),this.foldingDecorationProvider.showFoldingHighlights=c.get(45),this.triggerFoldingModelChanged()}l.hasChanged(44)&&(this._useFoldingProviders=this.editor.getOptions().get(44)!=="indentation",this.onFoldingStrategyChanged()),l.hasChanged(48)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(48)),l.hasChanged(46)&&(this._foldingImportsByDefault=this.editor.getOptions().get(46))})),this.onModelChanged()}saveViewState(){const e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){const t=this.foldingModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){const t=this.editor.getModel();if(!(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)&&e&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();const e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new OUe(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new UUe(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new Ha(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new fn(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{var t,n;this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),(t=this.updateScheduler)===null||t===void 0||t.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,(n=this.rangeProvider)===null||n===void 0||n.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){var e;(e=this.rangeProvider)===null||e===void 0||e.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;const t=new h9(e,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=t,this._useFoldingProviders&&this.foldingModel){const n=Lm.getFoldingRangeProviders(this.languageFeaturesService,e);n.length>0&&(this.rangeProvider=new g9(e,n,()=>this.triggerFoldingModelChanged(),this._foldingLimitReporter,t))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)===null||t===void 0||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=new qr,n=this.getRangeProvider(e.textModel),r=this.foldingRegionPromise=Ui(s=>n.compute(s));return r.then(s=>{if(s&&r===this.foldingRegionPromise){let o;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const d=s.setCollapsedAllOfType(ms.Imports.value,!0);d&&(o=Hl.capture(this.editor),this._currentModelHasFoldedImports=d)}const a=this.editor.getSelections(),l=a?a.map(d=>d.startLineNumber):[];e.update(s,l),o==null||o.restore(this.editor);const c=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=c)}return e})}).then(void 0,e=>(ut(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){const t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e,this)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){const n=this.editor.getSelections();if(n&&n.length>0){const r=[];for(const s of n){const o=s.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(o)&&r.push(...t.getAllRegionsAtLine(o,a=>a.isCollapsed&&o>a.startLineNumber))}r.length&&(t.toggleCollapseState(r),this.reveal(n[0].getPosition()))}}}).then(void 0,ut)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let n=!1;switch(e.target.type){case 4:{const r=e.target.detail,s=e.target.element.offsetLeft;if(r.offsetX-s<4)return;n=!0;break}case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){const r=this.editor.getModel();if(r&&t.startColumn===r.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}onEditorMouseUp(e){const t=this.foldingModel;if(!t||!this.mouseDownInfo||!e.target)return;const n=this.mouseDownInfo.lineNumber,r=this.mouseDownInfo.iconClicked,s=e.target.range;if(!s||s.startLineNumber!==n)return;if(r){if(e.target.type!==4)return}else{const a=this.editor.getModel();if(!a||s.startColumn!==a.getLineMaxColumn(n))return}const o=t.getRegionAtLine(n);if(o&&o.startLineNumber===n){const a=o.isCollapsed;if(r||a){const l=e.event.altKey;let c=[];if(l){const d=h=>!h.containedBy(o)&&!o.containedBy(h),u=t.getRegionsInside(null,d);for(const h of u)h.isCollapsed&&c.push(h);c.length===0&&(c=u)}else{const d=e.event.middleButton||e.event.shiftKey;if(d)for(const u of t.getRegionsInside(o))u.isCollapsed===a&&c.push(u);(a||!d||c.length===0)&&c.push(o)}t.toggleCollapseState(c),this.reveal({lineNumber:n,column:1})}}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};nd.ID="editor.contrib.folding";nd=Lm=tje([qb(1,ot),qb(2,wn),qb(3,wi),qb(4,pa),qb(5,Fe)],nd);class kee{constructor(e){this.editor=e,this._onDidChange=new H,this._computed=0,this._limited=!1}get limit(){return this.editor.getOptions().get(47)}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}}class ls extends Me{runEditorCommand(e,t,n){const r=e.get(wn),s=nd.get(t);if(!s)return;const o=s.getFoldingModel();if(o)return this.reportTelemetry(e,t),o.then(a=>{if(a){this.invoke(s,a,t,n,r);const l=t.getSelection();l&&s.reveal(l.getStartPosition())}})}getSelectedLines(e){const t=e.getSelections();return t?t.map(n=>n.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(n=>n+1):this.getSelectedLines(t)}run(e,t){}}function Lee(i){if(!Zs(i)){if(!gs(i))return!1;const e=i;if(!Zs(e.levels)&&!Oh(e.levels)||!Zs(e.direction)&&!bs(e.direction)||!Zs(e.selectionLines)&&(!Array.isArray(e.selectionLines)||!e.selectionLines.every(Oh)))return!1}return!0}class ije extends ls{constructor(){super({id:"editor.unfold",label:p("unfoldAction.label","Unfold"),alias:"Unfold",precondition:Zr,kbOpts:{kbExpr:N.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:Lee,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,r){const s=r&&r.levels||1,o=this.getLineNumbers(r,n);r&&r.direction==="up"?wee(t,!1,s,o):ob(t,!1,s,o)}}class rje extends ls{constructor(){super({id:"editor.unfoldRecursively",label:p("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:Zr,kbOpts:{kbExpr:N.editorTextFocus,primary:Oi(2089,2142),weight:100}})}invoke(e,t,n,r){ob(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))}}class sje extends ls{constructor(){super({id:"editor.fold",label:p("foldAction.label","Fold"),alias:"Fold",precondition:Zr,kbOpts:{kbExpr:N.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:Lee,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,r){const s=this.getLineNumbers(r,n),o=r&&r.levels,a=r&&r.direction;typeof o!="number"&&typeof a!="string"?FUe(t,!0,s):a==="up"?wee(t,!0,o||1,s):ob(t,!0,o||1,s)}}class oje extends ls{constructor(){super({id:"editor.toggleFold",label:p("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:Zr,kbOpts:{kbExpr:N.editorTextFocus,primary:Oi(2089,2090),weight:100}})}invoke(e,t,n){const r=this.getSelectedLines(n);Cee(t,1,r)}}class aje extends ls{constructor(){super({id:"editor.foldRecursively",label:p("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:Zr,kbOpts:{kbExpr:N.editorTextFocus,primary:Oi(2089,2140),weight:100}})}invoke(e,t,n){const r=this.getSelectedLines(n);ob(t,!0,Number.MAX_VALUE,r)}}class lje extends ls{constructor(){super({id:"editor.foldAllBlockComments",label:p("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:Zr,kbOpts:{kbExpr:N.editorTextFocus,primary:Oi(2089,2138),weight:100}})}invoke(e,t,n,r,s){if(t.regions.hasTypes())u9(t,ms.Comment.value,!0);else{const o=n.getModel();if(!o)return;const a=s.getLanguageConfiguration(o.getLanguageId()).comments;if(a&&a.blockCommentStartToken){const l=new RegExp("^\\s*"+No(a.blockCommentStartToken));d9(t,l,!0)}}}}class cje extends ls{constructor(){super({id:"editor.foldAllMarkerRegions",label:p("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:Zr,kbOpts:{kbExpr:N.editorTextFocus,primary:Oi(2089,2077),weight:100}})}invoke(e,t,n,r,s){if(t.regions.hasTypes())u9(t,ms.Region.value,!0);else{const o=n.getModel();if(!o)return;const a=s.getLanguageConfiguration(o.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);d9(t,l,!0)}}}}class dje extends ls{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:p("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:Zr,kbOpts:{kbExpr:N.editorTextFocus,primary:Oi(2089,2078),weight:100}})}invoke(e,t,n,r,s){if(t.regions.hasTypes())u9(t,ms.Region.value,!1);else{const o=n.getModel();if(!o)return;const a=s.getLanguageConfiguration(o.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);d9(t,l,!1)}}}}class uje extends ls{constructor(){super({id:"editor.foldAllExcept",label:p("foldAllExcept.label","Fold All Except Selected"),alias:"Fold All Except Selected",precondition:Zr,kbOpts:{kbExpr:N.editorTextFocus,primary:Oi(2089,2136),weight:100}})}invoke(e,t,n){const r=this.getSelectedLines(n);See(t,!0,r)}}class hje extends ls{constructor(){super({id:"editor.unfoldAllExcept",label:p("unfoldAllExcept.label","Unfold All Except Selected"),alias:"Unfold All Except Selected",precondition:Zr,kbOpts:{kbExpr:N.editorTextFocus,primary:Oi(2089,2134),weight:100}})}invoke(e,t,n){const r=this.getSelectedLines(n);See(t,!1,r)}}class fje extends ls{constructor(){super({id:"editor.foldAll",label:p("foldAllAction.label","Fold All"),alias:"Fold All",precondition:Zr,kbOpts:{kbExpr:N.editorTextFocus,primary:Oi(2089,2069),weight:100}})}invoke(e,t,n){ob(t,!0)}}class gje extends ls{constructor(){super({id:"editor.unfoldAll",label:p("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:Zr,kbOpts:{kbExpr:N.editorTextFocus,primary:Oi(2089,2088),weight:100}})}invoke(e,t,n){ob(t,!1)}}class fp extends ls{getFoldingLevel(){return parseInt(this.id.substr(fp.ID_PREFIX.length))}invoke(e,t,n){BUe(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))}}fp.ID_PREFIX="editor.foldLevel";fp.ID=i=>fp.ID_PREFIX+i;class pje extends ls{constructor(){super({id:"editor.gotoParentFold",label:p("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:Zr,kbOpts:{kbExpr:N.editorTextFocus,weight:100}})}invoke(e,t,n){const r=this.getSelectedLines(n);if(r.length>0){const s=WUe(r[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}class mje extends ls{constructor(){super({id:"editor.gotoPreviousFold",label:p("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:Zr,kbOpts:{kbExpr:N.editorTextFocus,weight:100}})}invoke(e,t,n){const r=this.getSelectedLines(n);if(r.length>0){const s=VUe(r[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}class _je extends ls{constructor(){super({id:"editor.gotoNextFold",label:p("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:Zr,kbOpts:{kbExpr:N.editorTextFocus,weight:100}})}invoke(e,t,n){const r=this.getSelectedLines(n);if(r.length>0){const s=HUe(r[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}class bje extends ls{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:p("createManualFoldRange.label","Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:Zr,kbOpts:{kbExpr:N.editorTextFocus,primary:Oi(2089,2135),weight:100}})}invoke(e,t,n){var r;const s=[],o=n.getSelections();if(o){for(const a of o){let l=a.endLineNumber;a.endColumn===1&&--l,l>a.startLineNumber&&(s.push({startLineNumber:a.startLineNumber,endLineNumber:l,type:void 0,isCollapsed:!0,source:1}),n.setSelection({startLineNumber:a.startLineNumber,startColumn:1,endLineNumber:a.startLineNumber,endColumn:1}))}if(s.length>0){s.sort((l,c)=>l.startLineNumber-c.startLineNumber);const a=vo.sanitizeAndMerge(t.regions,s,(r=n.getModel())===null||r===void 0?void 0:r.getLineCount());t.updatePost(vo.fromFoldRanges(a))}}}}class vje extends ls{constructor(){super({id:"editor.removeManualFoldingRanges",label:p("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:Zr,kbOpts:{kbExpr:N.editorTextFocus,primary:Oi(2089,2137),weight:100}})}invoke(e,t,n){const r=n.getSelections();if(r){const s=[];for(const o of r){const{startLineNumber:a,endLineNumber:l}=o;s.push(l>=a?{startLineNumber:a,endLineNumber:l}:{endLineNumber:l,startLineNumber:a})}t.removeManualRanges(s),e.triggerFoldingModelChanged()}}}$t(nd.ID,nd,0);ue(ije);ue(rje);ue(sje);ue(aje);ue(fje);ue(gje);ue(lje);ue(cje);ue(dje);ue(uje);ue(hje);ue(oje);ue(pje);ue(mje);ue(_je);ue(bje);ue(vje);for(let i=1;i<=7;i++)lLe(new fp({id:fp.ID(i),label:p("foldLevelAction.label","Fold Level {0}",i),alias:`Fold Level ${i}`,precondition:Zr,kbOpts:{kbExpr:N.editorTextFocus,primary:Oi(2089,2048|21+i),weight:100}}));Bt.registerCommand("_executeFoldingRangeProvider",function(i,...e){return nje(this,void 0,void 0,function*(){const[t]=e;if(!(t instanceof Ye))throw ia();const n=i.get(Fe),r=i.get(zn).getModel(t);if(!r)throw ia();const s=i.get(Et);if(!s.getValue("editor.folding",{resource:t}))return[];const o=i.get(wn),a=s.getValue("editor.foldingStrategy",{resource:t}),l={get limit(){return s.getValue("editor.foldingMaximumRegions",{resource:t})},update:(f,g)=>{}},c=new h9(r,o,l);let d=c;if(a!=="indentation"){const f=nd.getFoldingRangeProviders(n,r);f.length&&(d=new g9(r,f,()=>{},l,c))}const u=yield d.compute(xt.None),h=[];try{if(u)for(let f=0;f<u.length;f++){const g=u.getType(f);h.push({start:u.getStartLineNumber(f),end:u.getEndLineNumber(f),kind:g?ms.fromValue(g):void 0})}return h}finally{d.dispose()}})});class yje extends Me{constructor(){super({id:"editor.action.fontZoomIn",label:p("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){Go.setZoomLevel(Go.getZoomLevel()+1)}}class Cje extends Me{constructor(){super({id:"editor.action.fontZoomOut",label:p("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){Go.setZoomLevel(Go.getZoomLevel()-1)}}class wje extends Me{constructor(){super({id:"editor.action.fontZoomReset",label:p("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){Go.setZoomLevel(0)}}ue(yje);ue(Cje);ue(wje);var Dee=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},sL=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},p9=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};let Uy=class{constructor(e,t,n){this._editor=e,this._languageFeaturesService=t,this._workerService=n,this._disposables=new ae,this._sessionDisposables=new ae,this._disposables.add(t.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(r=>{r.hasChanged(56)&&this._update()})),this._update()}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(56)||!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;const n=new AT;for(const r of t.autoFormatTriggerCharacters)n.add(r.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(r=>{const s=r.charCodeAt(r.length-1);n.has(s)&&this._trigger(String.fromCharCode(s))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),n=this._editor.getPosition(),r=new vi,s=this._editor.onDidChangeModelContent(o=>{if(o.isFlush){r.cancel(),s.dispose();return}for(let a=0,l=o.changes.length;a<l;a++)if(o.changes[a].range.endLineNumber<=n.lineNumber){r.cancel(),s.dispose();return}});TQ(this._workerService,this._languageFeaturesService,t,n,e,t.getFormattingOptions(),r.token).then(o=>{r.token.isCancellationRequested||zr(o)&&(p1.execute(this._editor,o,!0),FB(o))}).finally(()=>{s.dispose()})}};Uy.ID="editor.contrib.autoFormat";Uy=Dee([sL(1,Fe),sL(2,Xa)],Uy);let jy=class{constructor(e,t,n){this.editor=e,this._languageFeaturesService=t,this._instantiationService=n,this._callOnDispose=new ae,this._callOnModel=new ae,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(t.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(55)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(xQ,this.editor,e,2,nu.None,xt.None).catch(ut))}};jy.ID="editor.contrib.formatOnPaste";jy=Dee([sL(1,Fe),sL(2,rt)],jy);class Sje extends Me{constructor(){super({id:"editor.action.formatDocument",label:p("formatDocument.label","Format Document"),alias:"Format Document",precondition:re.and(N.notInCompositeEditor,N.writable,N.hasDocumentFormattingProvider),kbOpts:{kbExpr:N.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return p9(this,void 0,void 0,function*(){if(t.hasModel()){const n=e.get(rt);yield e.get(Cf).showWhile(n.invokeFunction(y8e,t,1,nu.None,xt.None),250)}})}}class xje extends Me{constructor(){super({id:"editor.action.formatSelection",label:p("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:re.and(N.writable,N.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:N.editorTextFocus,primary:Oi(2089,2084),weight:100},contextMenuOpts:{when:N.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return p9(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(rt),r=t.getModel(),s=t.getSelections().map(a=>a.isEmpty()?new D(a.startLineNumber,1,a.startLineNumber,r.getLineMaxColumn(a.startLineNumber)):a);yield e.get(Cf).showWhile(n.invokeFunction(xQ,t,s,1,nu.None,xt.None),250)})}}$t(Uy.ID,Uy,2);$t(jy.ID,jy,2);ue(Sje);ue(xje);Bt.registerCommand("editor.action.format",i=>p9(void 0,void 0,void 0,function*(){const e=i.get(Jt).getFocusedCodeEditor();if(!e||!e.hasModel())return;const t=i.get(oi);e.getSelection().isEmpty()?yield t.executeCommand("editor.action.formatDocument"):yield t.executeCommand("editor.action.formatSelection")}));var Tje=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},bN=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},kje=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class n_{remove(){var e;(e=this.parent)===null||e===void 0||e.children.delete(this.id)}static findId(e,t){let n;typeof e=="string"?n=`${t.id}/${e}`:(n=`${t.id}/${e.name}`,t.children.get(n)!==void 0&&(n=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let r=n;for(let s=0;t.children.get(r)!==void 0;s++)r=`${n}_${s}`;return r}static empty(e){return e.children.size===0}}class PO extends n_{constructor(e,t,n){super(),this.id=e,this.parent=t,this.symbol=n,this.children=new Map}}class Iee extends n_{constructor(e,t,n,r){super(),this.id=e,this.parent=t,this.label=n,this.order=r,this.children=new Map}}class Pd extends n_{static create(e,t,n){const r=new vi(n),s=new Pd(t.uri),o=e.ordered(t),a=o.map((c,d)=>{var u;const h=n_.findId(`provider_${d}`,s),f=new Iee(h,s,(u=c.displayName)!==null&&u!==void 0?u:"Unknown Outline Provider",d);return Promise.resolve(c.provideDocumentSymbols(t,r.token)).then(g=>{for(const m of g||[])Pd._makeOutlineElement(m,f);return f},g=>(Ii(g),f)).then(g=>{n_.empty(g)?g.remove():s._groups.set(h,g)})}),l=e.onDidChange(()=>{const c=e.ordered(t);fi(c,o)||r.cancel()});return Promise.all(a).then(()=>r.token.isCancellationRequested&&!n.isCancellationRequested?Pd.create(e,t,n):s._compact()).finally(()=>{r.dispose(),l.dispose(),r.dispose()})}static _makeOutlineElement(e,t){const n=n_.findId(e,t),r=new PO(n,t,e);if(e.children)for(const s of e.children)Pd._makeOutlineElement(s,r);t.children.set(r.id,r)}constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let e=0;for(const[t,n]of this._groups)n.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{const t=St.first(this._groups.values());for(const[,n]of t.children)n.parent=this,this.children.set(n.id,n)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof PO?e.push(t.symbol):e.push(...St.map(t.children.values(),n=>n.symbol));return e.sort((t,n)=>D.compareRangesUsingStarts(t.range,n.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return Pd._flattenDocumentSymbols(t,e,""),t.sort((n,r)=>U.compare(D.getStartPosition(n.range),D.getStartPosition(r.range))||U.compare(D.getEndPosition(r.range),D.getEndPosition(n.range)))}static _flattenDocumentSymbols(e,t,n){for(const r of t)e.push({kind:r.kind,tags:r.tags,name:r.name,detail:r.detail,containerName:r.containerName||n,range:r.range,selectionRange:r.selectionRange,children:void 0}),r.children&&Pd._flattenDocumentSymbols(e,r.children,r.name)}}const GI=Lt("IOutlineModelService");let MO=class{constructor(e,t,n){this._languageFeaturesService=e,this._disposables=new ae,this._cache=new bf(10,.7),this._debounceInformation=t.for(e.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(n.onModelRemoved(r=>{this._cache.delete(r.id)}))}dispose(){this._disposables.dispose()}getOrCreate(e,t){return kje(this,void 0,void 0,function*(){const n=this._languageFeaturesService.documentSymbolProvider,r=n.ordered(e);let s=this._cache.get(e.id);if(!s||s.versionId!==e.getVersionId()||!fi(s.provider,r)){const a=new vi;s={versionId:e.getVersionId(),provider:r,promiseCnt:0,source:a,promise:Pd.create(n,e,a.token),model:void 0},this._cache.set(e.id,s);const l=Date.now();s.promise.then(c=>{s.model=c,this._debounceInformation.update(e,Date.now()-l)}).catch(c=>{this._cache.delete(e.id)})}if(s.model)return s.model;s.promiseCnt+=1;const o=t.onCancellationRequested(()=>{--s.promiseCnt===0&&(s.source.cancel(),this._cache.delete(e.id))});try{return yield s.promise}finally{o.dispose()}})}};MO=Tje([bN(0,Fe),bN(1,pa),bN(2,zn)],MO);Wt(GI,MO,1);var Lje=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};Bt.registerCommand("_executeDocumentSymbolProvider",function(i,...e){return Lje(this,void 0,void 0,function*(){const[t]=e;dn(Ye.isUri(t));const n=i.get(GI),s=yield i.get(Vs).createModelReference(t);try{return(yield n.getOrCreate(s.object.textEditorModel,xt.None)).getTopLevelSymbols()}finally{s.dispose()}})});class nr extends q{constructor(e,t){super(),this.contextKeyService=e,this.model=t,this.inlineCompletionVisible=nr.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=nr.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=nr.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService),this.suppressSuggestions=nr.suppressSuggestions.bindTo(this.contextKeyService),this._register(Cn(n=>{const r=this.model.read(n),s=r==null?void 0:r.state.read(n),o=!!(s!=null&&s.inlineCompletion)&&(s==null?void 0:s.ghostText)!==void 0&&!(s!=null&&s.ghostText.isEmpty());this.inlineCompletionVisible.set(o),s!=null&&s.ghostText&&(s!=null&&s.inlineCompletion)&&this.suppressSuggestions.set(s.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions)})),this._register(Cn(n=>{const r=this.model.read(n);let s=!1,o=!0;const a=r==null?void 0:r.ghostText.read(n);if(r!=null&&r.selectedSuggestItem&&a&&a.parts.length>0){const{column:l,lines:c}=a.parts[0],d=c[0],u=r.textModel.getLineIndentColumn(a.lineNumber);if(l<=u){let f=ns(d);f===-1&&(f=d.length-1),s=f>0;const g=r.textModel.getOptions().tabSize;o=Wi.visibleColumnFromColumn(d,f+1,g)<g}}this.inlineCompletionSuggestsIndentation.set(s),this.inlineCompletionSuggestsIndentationLessThanTabSize.set(o)}))}}nr.inlineSuggestionVisible=new Ne("inlineSuggestionVisible",!1,p("inlineSuggestionVisible","Whether an inline suggestion is visible"));nr.inlineSuggestionHasIndentation=new Ne("inlineSuggestionHasIndentation",!1,p("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));nr.inlineSuggestionHasIndentationLessThanTabSize=new Ne("inlineSuggestionHasIndentationLessThanTabSize",!0,p("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));nr.suppressSuggestions=new Ne("inlineSuggestionSuppressSuggestions",void 0,p("suppressSuggestions","Whether suggestions should be suppressed for the current suggestion"));function Dje(i,e){const t=new Ije(i),n=e.map(r=>{const s=D.lift(r.range);return{startOffset:t.getOffset(s.getStartPosition()),endOffset:t.getOffset(s.getEndPosition()),text:r.text}});n.sort((r,s)=>s.startOffset-r.startOffset);for(const r of n)i=i.substring(0,r.startOffset)+r.text+i.substring(r.endOffset);return i}class Ije{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}const Rje=[];function Eje(){return Rje}class Nje{constructor(e,t){if(this.startColumn=e,this.endColumnExclusive=t,e>t)throw new Ti(`startColumn ${e} cannot be after endColumnExclusive ${t}`)}toRange(e){return new D(e,this.startColumn,e,this.endColumnExclusive)}equals(e){return this.startColumn===e.startColumn&&this.endColumnExclusive===e.endColumnExclusive}}function Aje(i,e){const t=new ae,n=i.createDecorationsCollection();return t.add(LB({debugName:()=>`Apply decorations from ${e.debugName}`},r=>{const s=e.read(r);n.set(s)})),t.add({dispose:()=>{n.clear()}}),t}function OO(i,e){return new U(i.lineNumber+e.lineNumber-1,e.lineNumber===1?i.column+e.column-1:e.column)}function FO(i){let e=1,t=1;for(const n of i)n===`
`?(e++,t=1):t++;return new U(e,t)}class oL{constructor(e,t){this.lineNumber=e,this.parts=t}equals(e){return this.lineNumber===e.lineNumber&&this.parts.length===e.parts.length&&this.parts.every((t,n)=>t.equals(e.parts[n]))}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],n=e.substr(0,t.column-1);return Dje(n,this.parts.map(s=>({range:{startLineNumber:1,endLineNumber:1,startColumn:s.column,endColumn:s.column},text:s.lines.join(`
`)}))).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every(e=>e.lines.length===0)}get lineCount(){return 1+this.parts.reduce((e,t)=>e+t.lines.length-1,0)}}class BO{constructor(e,t,n){this.column=e,this.lines=t,this.preview=n}equals(e){return this.column===e.column&&this.lines.length===e.lines.length&&this.lines.every((t,n)=>t===e.lines[n])}}class WO{constructor(e,t,n,r=0){this.lineNumber=e,this.columnRange=t,this.newLines=n,this.additionalReservedLineCount=r,this.parts=[new BO(this.columnRange.endColumnExclusive,this.newLines,!1)]}renderForScreenReader(e){return this.newLines.join(`
`)}get lineCount(){return this.newLines.length}isEmpty(){return this.parts.every(e=>e.lines.length===0)}equals(e){return this.lineNumber===e.lineNumber&&this.columnRange.equals(e.columnRange)&&this.newLines.length===e.newLines.length&&this.newLines.every((t,n)=>t===e.newLines[n])&&this.additionalReservedLineCount===e.additionalReservedLineCount}}function CU(i,e){return i===e?!0:!i||!e?!1:i instanceof oL&&e instanceof oL||i instanceof WO&&e instanceof WO?i.equals(e):!1}var Pje=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Mje=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const wU="ghost-text";let VO=class extends q{constructor(e,t,n){super(),this.editor=e,this.model=t,this.languageService=n,this.isDisposed=Tn(this,!1),this.currentTextModel=mr(this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=At(this,r=>{if(this.isDisposed.read(r))return;const s=this.currentTextModel.read(r);if(s!==this.model.targetTextModel.read(r))return;const o=this.model.ghostText.read(r);if(!o)return;const a=o instanceof WO?o.columnRange:void 0,l=[],c=[];function d(m,y){if(c.length>0){const b=c[c.length-1];y&&b.decorations.push(new Ys(b.content.length+1,b.content.length+1+m[0].length,y,0)),b.content+=m[0],m=m.slice(1)}for(const b of m)c.push({content:b,decorations:y?[new Ys(1,b.length+1,y,0)]:[]})}const u=s.getLineContent(o.lineNumber);let h,f=0;for(const m of o.parts){let y=m.lines;h===void 0?(l.push({column:m.column,text:y[0],preview:m.preview}),y=y.slice(1)):d([u.substring(f,m.column-1)],void 0),y.length>0&&(d(y,wU),h===void 0&&m.column<=u.length&&(h=m.column)),f=m.column-1}h!==void 0&&d([u.substring(f)],void 0);const g=h!==void 0?new Nje(h,u.length+1):void 0;return{replacedRange:a,inlineTexts:l,additionalLines:c,hiddenRange:g,lineNumber:o.lineNumber,additionalReservedLineCount:this.model.minReservedLineCount.read(r),targetTextModel:s}}),this.decorations=At(this,r=>{const s=this.uiState.read(r);if(!s)return[];const o=[];s.replacedRange&&o.push({range:s.replacedRange.toRange(s.lineNumber),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}),s.hiddenRange&&o.push({range:s.hiddenRange.toRange(s.lineNumber),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});for(const a of s.inlineTexts)o.push({range:D.fromPositions(new U(s.lineNumber,a.column)),options:{description:wU,after:{content:a.text,inlineClassName:a.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:xl.Left},showIfCollapsed:!0}});return o}),this.additionalLinesWidget=this._register(new Oje(this.editor,this.languageService.languageIdCodec,At(r=>{const s=this.uiState.read(r);return s?{lineNumber:s.lineNumber,additionalLines:s.additionalLines,minReservedLineCount:s.additionalReservedLineCount,targetTextModel:s.targetTextModel}:void 0}))),this._register(st(()=>{this.isDisposed.set(!0,void 0)})),this._register(Aje(this.editor,this.decorations))}ownsViewZone(e){return this.additionalLinesWidget.viewZoneId===e}};VO=Pje([Mje(2,Fn)],VO);class Oje extends q{get viewZoneId(){return this._viewZoneId}constructor(e,t,n){super(),this.editor=e,this.languageIdCodec=t,this.lines=n,this._viewZoneId=void 0,this.editorOptionsChanged=So("editorOptionChanged",Re.filter(this.editor.onDidChangeConfiguration,r=>r.hasChanged(33)||r.hasChanged(116)||r.hasChanged(98)||r.hasChanged(93)||r.hasChanged(51)||r.hasChanged(50)||r.hasChanged(66))),this._register(Cn(r=>{const s=this.lines.read(r);this.editorOptionsChanged.read(r),s?this.updateLines(s.lineNumber,s.additionalLines,s.minReservedLineCount):this.clear()}))}dispose(){super.dispose(),this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,n){const r=this.editor.getModel();if(!r)return;const{tabSize:s}=r.getOptions();this.editor.changeViewZones(o=>{this._viewZoneId&&(o.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,n);if(a>0){const l=document.createElement("div");Fje(l,s,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=o.addZone({afterLineNumber:e,heightInLines:a,domNode:l,afterColumnAffinity:1})}})}}function Fje(i,e,t,n,r){const s=n.get(33),o=n.get(116),a="none",l=n.get(93),c=n.get(51),d=n.get(50),u=n.get(66),h=new Z1(1e4);h.appendString('<div class="suggest-preview-text">');for(let m=0,y=t.length;m<y;m++){const b=t[m],v=b.content;h.appendString('<div class="view-line'),h.appendString('" style="top:'),h.appendString(String(m*u)),h.appendString('px;width:1000000px;">');const C=OC(v),w=z_(v),S=$i.createEmpty(v,r);HC(new vf(d.isMonospace&&!s,d.canUseHalfwidthRightwardsArrow,v,!1,C,w,0,S,b.decorations,e,0,d.spaceWidth,d.middotWidth,d.wsmiddotWidth,o,a,l,c!==Co.OFF,null),h),h.appendString("</div>")}h.appendString("</div>"),Ir(i,d);const f=h.build(),g=SU?SU.createHTML(f):f;i.innerHTML=g}const SU=vu("editorGhostText",{createHTML:i=>i});function Bje(i,e){const t=new aX,n=new cX(t,c=>e.getLanguageConfiguration(c)),r=new lX(new Wje([i]),n),s=nP(r,[],void 0,!0);let o="";const a=i.getLineContent();function l(c,d){if(c.kind===2)if(l(c.openingBracket,d),d=Xn(d,c.openingBracket.length),c.child&&(l(c.child,d),d=Xn(d,c.child.length)),c.closingBracket)l(c.closingBracket,d),d=Xn(d,c.closingBracket.length);else{const h=n.getSingleLanguageBracketTokens(c.openingBracket.languageId).findClosingTokenText(c.openingBracket.bracketIds);o+=h}else if(c.kind!==3){if(c.kind===0||c.kind===1)o+=a.substring(d,Xn(d,c.length));else if(c.kind===4)for(const u of c.children)l(u,d),d=Xn(d,u.length)}}return l(s,_s),o}class Wje{constructor(e){this.lines=e,this.tokenization={getLineTokens:t=>this.lines[t-1]}}getLineCount(){return this.lines.length}getLineLength(e){return this.lines[e-1].getLineContent().length}}class Sa{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};const e=this.pos;let t=0,n=this.value.charCodeAt(e),r;if(r=Sa._table[n],typeof r=="number")return this.pos+=1,{type:r,pos:e,len:1};if(Sa.isDigitCharacter(n)){r=8;do t+=1,n=this.value.charCodeAt(e+t);while(Sa.isDigitCharacter(n));return this.pos+=t,{type:r,pos:e,len:t}}if(Sa.isVariableCharacter(n)){r=9;do n=this.value.charCodeAt(e+ ++t);while(Sa.isVariableCharacter(n)||Sa.isDigitCharacter(n));return this.pos+=t,{type:r,pos:e,len:t}}r=10;do t+=1,n=this.value.charCodeAt(e+t);while(!isNaN(n)&&typeof Sa._table[n]>"u"&&!Sa.isDigitCharacter(n)&&!Sa.isVariableCharacter(n));return this.pos+=t,{type:r,pos:e,len:t}}}Sa._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};class ab{constructor(){this._children=[]}appendChild(e){return e instanceof fs&&this._children[this._children.length-1]instanceof fs?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:n}=e,r=n.children.indexOf(e),s=n.children.slice(0);s.splice(r,1,...t),n._children=s,function o(a,l){for(const c of a)c.parent=l,o(c.children,c)}(t,n)}get children(){return this._children}get rightMostDescendant(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof vw)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}class fs extends ab{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new fs(this.value)}}class Ree extends ab{}class qo extends Ree{static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}constructor(e){super(),this.index=e}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof lb?this._children[0]:void 0}clone(){const e=new qo(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}class lb extends ab{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof fs&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){const e=new lb;return this.options.forEach(e.appendChild,e),e}}class m9 extends ab{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let n=!1,r=e.replace(this.regexp,function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!n&&this._children.some(s=>s instanceof gl&&!!s.elseValue)&&(r=this._replace([])),r}_replace(e){let t="";for(const n of this._children)if(n instanceof gl){let r=e[n.index]||"";r=n.resolve(r),t+=r}else t+=n.toString();return t}toString(){return""}clone(){const e=new m9;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}class gl extends ab{constructor(e,t,n,r){super(),this.index=e,this.shorthandName=t,this.ifValue=n,this.elseValue=r}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(n=>n.charAt(0).toUpperCase()+n.substr(1)).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((n,r)=>r===0?n.charAt(0).toLowerCase()+n.substr(1):n.charAt(0).toUpperCase()+n.substr(1)).join(""):e}clone(){return new gl(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class zy extends Ree{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new fs(t)],!0):!1}clone(){const e=new zy(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}function xU(i,e){const t=[...i];for(;t.length>0;){const n=t.shift();if(!e(n))break;t.unshift(...n.children)}}class vw extends ab{get placeholderInfo(){if(!this._placeholders){const e=[];let t;this.walk(function(n){return n instanceof qo&&(e.push(n),t=!t||t.index<n.index?n:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,n=!1;return this.walk(r=>r===e?(n=!0,!1):(t+=r.len(),!0)),n?t:-1}fullLen(e){let t=0;return xU([e],n=>(t+=n.len(),!0)),t}enclosingPlaceholders(e){const t=[];let{parent:n}=e;for(;n;)n instanceof qo&&t.push(n),n=n.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof zy&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){const e=new vw;return this._children=this.children.map(t=>t.clone()),e}walk(e){xU(this.children,e)}}class T1{constructor(){this._scanner=new Sa,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,n){const r=new vw;return this.parseFragment(e,r),this.ensureFinalTabstop(r,n??!1,t??!1),r}parseFragment(e,t){const n=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););const r=new Map,s=[];t.walk(l=>(l instanceof qo&&(l.isFinalTabstop?r.set(0,void 0):!r.has(l.index)&&l.children.length>0?r.set(l.index,l.children):s.push(l)),!0));const o=(l,c)=>{const d=r.get(l.index);if(!d)return;const u=new qo(l.index);u.transform=l.transform;for(const h of d){const f=h.clone();u.appendChild(f),f instanceof qo&&r.has(f.index)&&!c.has(f.index)&&(c.add(f.index),o(f,c),c.delete(f.index))}t.replace(l,[u])},a=new Set;for(const l of s)o(l,a);return t.children.slice(n)}ensureFinalTabstop(e,t,n){(t||n&&e.placeholders.length>0)&&(e.placeholders.find(s=>s.index===0)||e.appendChild(new qo(0)))}_accept(e,t){if(e===void 0||this._token.type===e){const n=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const r=this._scanner.next();if(r.type!==0&&r.type!==4&&r.type!==5)return!1}this._token=this._scanner.next()}const n=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new fs(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new qo(Number(t)):new zy(t)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);const s=new qo(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(s),!0;if(!this._parse(s))return e.appendChild(new fs("${"+t+":")),s.children.forEach(e.appendChild,e),!0}else if(s.index>0&&this._accept(7)){const o=new lb;for(;;){if(this._parseChoiceElement(o)){if(this._accept(2))continue;if(this._accept(7)&&(s.appendChild(o),this._accept(4)))return e.appendChild(s),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(s)?(e.appendChild(s),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(s),!0):this._backTo(n)}_parseChoiceElement(e){const t=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let r;if((r=this._accept(5,!0))?r=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:r=this._accept(void 0,!0),!r)return this._backTo(t),!1;n.push(r)}return n.length===0?(this._backTo(t),!1):(e.appendChild(new fs(n.join(""))),!0)}_parseComplexVariable(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);const s=new zy(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(s),!0;if(!this._parse(s))return e.appendChild(new fs("${"+t+":")),s.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(s)?(e.appendChild(s),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(s),!0):this._backTo(n)}_parseTransform(e){const t=new m9;let n="",r="";for(;!this._accept(6);){let s;if(s=this._accept(5,!0)){s=this._accept(6,!0)||s,n+=s;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let s;if(s=this._accept(5,!0)){s=this._accept(5,!0)||this._accept(6,!0)||s,t.appendChild(new fs(s));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){r+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,r)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);const r=this._accept(8,!0);if(r)if(n){if(this._accept(4))return e.appendChild(new gl(Number(r))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new gl(Number(r))),!0;else return this._backTo(t),!1;if(this._accept(6)){const s=this._accept(9,!0);return!s||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new gl(Number(r),s)),!0)}else if(this._accept(11)){const s=this._until(4);if(s)return e.appendChild(new gl(Number(r),void 0,s,void 0)),!0}else if(this._accept(12)){const s=this._until(4);if(s)return e.appendChild(new gl(Number(r),void 0,void 0,s)),!0}else if(this._accept(13)){const s=this._until(1);if(s){const o=this._until(4);if(o)return e.appendChild(new gl(Number(r),void 0,s,o)),!0}}else{const s=this._until(4);if(s)return e.appendChild(new gl(Number(r),void 0,void 0,s)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new fs(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}var vN=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function Vje(i,e,t,n,r=xt.None,s){return vN(this,void 0,void 0,function*(){const o=jje(e,t),a=i.all(t),l=new Y3;for(const b of a)b.groupId&&l.add(b.groupId,b);function c(b){if(!b.yieldsToGroupIds)return[];const v=[];for(const C of b.yieldsToGroupIds||[]){const w=l.get(C);for(const S of w)v.push(S)}return v}const d=new Map,u=new Set;function h(b,v){if(v=[...v,b],u.has(b))return v;u.add(b);try{const C=c(b);for(const w of C){const S=h(w,v);if(S)return S}}finally{u.delete(b)}}function f(b){const v=d.get(b);if(v)return v;const C=h(b,[]);C&&Ii(new Error(`Inline completions: cyclic yield-to dependency detected. Path: ${C.map(S=>S.toString?S.toString():""+S).join(" -> ")}`));const w=new xD;return d.set(b,w.p),(()=>vN(this,void 0,void 0,function*(){if(!C){const S=c(b);for(const L of S){const T=yield f(L);if(T&&T.items.length>0)return}}try{return yield b.provideInlineCompletions(t,e,n,r)}catch(S){Ii(S);return}}))().then(S=>w.complete(S),S=>w.error(S)),w.p}const g=yield Promise.all(a.map(b=>vN(this,void 0,void 0,function*(){return{provider:b,completions:yield f(b)}}))),m=new Map,y=[];for(const b of g){const v=b.completions;if(!v)continue;const C=new Uje(v,b.provider);y.push(C);for(const w of v.items){const S=aL.from(w,C,o,t,s);m.set(S.hash(),S)}}return new Hje(Array.from(m.values()),new Set(m.keys()),y)})}class Hje{constructor(e,t,n){this.completions=e,this.hashs=t,this.providerResults=n}has(e){return this.hashs.has(e.hash())}dispose(){for(const e of this.providerResults)e.removeRef()}}class Uje{constructor(e,t){this.inlineCompletions=e,this.provider=t,this.refCount=1}addRef(){this.refCount++}removeRef(){this.refCount--,this.refCount===0&&this.provider.freeInlineCompletions(this.inlineCompletions)}}class aL{static from(e,t,n,r,s){let o,a,l=e.range?D.lift(e.range):n;if(typeof e.insertText=="string"){if(o=e.insertText,s&&e.completeBracketPairs){o=TU(o,l.getStartPosition(),r,s);const c=o.length-e.insertText.length;c!==0&&(l=new D(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+c))}a=void 0}else if("snippet"in e.insertText){const c=e.insertText.snippet.length;if(s&&e.completeBracketPairs){e.insertText.snippet=TU(e.insertText.snippet,l.getStartPosition(),r,s);const u=e.insertText.snippet.length-c;u!==0&&(l=new D(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+u))}const d=new T1().parse(e.insertText.snippet);d.children.length===1&&d.children[0]instanceof fs?(o=d.children[0].value,a=void 0):(o=d.toString(),a={snippet:e.insertText.snippet,range:l})}else vD(e.insertText);return new aL(o,e.command,l,o,a,e.additionalTextEdits||Eje(),e,t)}constructor(e,t,n,r,s,o,a,l){this.filterText=e,this.command=t,this.range=n,this.insertText=r,this.snippetInfo=s,this.additionalTextEdits=o,this.sourceInlineCompletion=a,this.source=l,e=e.replace(/\r\n|\r/g,`
`),r=e.replace(/\r\n|\r/g,`
`)}withRange(e){return new aL(this.filterText,this.command,e,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)}hash(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})}}function jje(i,e){const t=e.getWordAtPosition(i),n=e.getLineMaxColumn(i.lineNumber);return t?new D(i.lineNumber,t.startColumn,i.lineNumber,n):D.fromPositions(i,i.with(void 0,n))}function TU(i,e,t,n){const s=t.getLineContent(e.lineNumber).substring(0,e.column-1)+i,o=t.tokenization.tokenizeLineWithEdit(e,s.length-(e.column-1),i),a=o==null?void 0:o.sliceAndInflate(e.column-1,s.length,0);return a?Bje(a,n):i}class k1{constructor(e,t){this.range=e,this.text=t}removeCommonPrefix(e,t){const n=t?this.range.intersectRanges(t):this.range;if(!n)return this;const r=e.getValueInRange(n,1),s=zg(r,this.text),o=OO(this.range.getStartPosition(),FO(r.substring(0,s))),a=this.text.substring(s),l=D.fromPositions(o,this.range.getEndPosition());return new k1(l,a)}augments(e){return this.text.startsWith(e.text)&&zje(this.range,e.range)}computeGhostText(e,t,n,r=0){let s=this.removeCommonPrefix(e);if(s.range.endLineNumber!==s.range.startLineNumber)return;const o=e.getLineContent(s.range.startLineNumber),a=pn(o).length;if(s.range.startColumn-1<=a){const g=pn(s.text).length,m=o.substring(s.range.startColumn-1,a),[y,b]=[s.range.getStartPosition(),s.range.getEndPosition()],v=y.column+m.length<=b.column?y.delta(0,m.length):b,C=D.fromPositions(v,b),w=s.text.startsWith(m)?s.text.substring(m.length):s.text.substring(g);s=new k1(C,w)}const c=e.getValueInRange(s.range),d=$je(c,s.text);if(!d)return;const u=s.range.startLineNumber,h=new Array;if(t==="prefix"){const g=d.filter(m=>m.originalLength===0);if(g.length>1||g.length===1&&g[0].originalStart!==c.length)return}const f=s.text.length-r;for(const g of d){const m=s.range.startColumn+g.originalStart+g.originalLength;if(t==="subwordSmart"&&n&&n.lineNumber===s.range.startLineNumber&&m<n.column||g.originalLength>0)return;if(g.modifiedLength===0)continue;const y=g.modifiedStart+g.modifiedLength,b=Math.max(g.modifiedStart,Math.min(y,f)),v=s.text.substring(g.modifiedStart,b),C=s.text.substring(b,Math.max(g.modifiedStart,y));if(v.length>0){const w=Kc(v);h.push(new BO(m,w,!1))}if(C.length>0){const w=Kc(C);h.push(new BO(m,w,!0))}}return new oL(u,h)}}function zje(i,e){return e.getStartPosition().equals(i.getStartPosition())&&e.getEndPosition().isBeforeOrEqual(i.getEndPosition())}let tc;function $je(i,e){if((tc==null?void 0:tc.originalValue)===i&&(tc==null?void 0:tc.newValue)===e)return tc==null?void 0:tc.changes;{let t=LU(i,e,!0);if(t){const n=kU(t);if(n>0){const r=LU(i,e,!1);r&&kU(r)<n&&(t=r)}}return tc={originalValue:i,newValue:e,changes:t},t}}function kU(i){let e=0;for(const t of i)e+=t.originalLength;return e}function LU(i,e,t){if(i.length>5e3||e.length>5e3)return;function n(c){let d=0;for(let u=0,h=c.length;u<h;u++){const f=c.charCodeAt(u);f>d&&(d=f)}return d}const r=Math.max(n(i),n(e));function s(c){if(c<0)throw new Error("unexpected");return r+c+1}function o(c){let d=0,u=0;const h=new Int32Array(c.length);for(let f=0,g=c.length;f<g;f++)if(t&&c[f]==="("){const m=u*100+d;h[f]=s(2*m),d++}else if(t&&c[f]===")"){d=Math.max(d-1,0);const m=u*100+d;h[f]=s(2*m+1),d===0&&u++}else h[f]=c.charCodeAt(f);return h}const a=o(i),l=o(e);return new fc({getElements:()=>a},{getElements:()=>l}).ComputeDiff(!1).changes}var Kje=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},DU=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},qje=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};let HO=class extends q{constructor(e,t,n,r,s){super(),this.textModel=e,this.versionId=t,this._debounceValue=n,this.languageFeaturesService=r,this.languageConfigurationService=s,this._updateOperation=this._register(new vr),this.inlineCompletions=Pk("inlineCompletions",void 0),this.suggestWidgetInlineCompletions=Pk("suggestWidgetInlineCompletions",void 0),this._register(this.textModel.onDidChangeContent(()=>{this._updateOperation.clear()}))}fetch(e,t,n){var r,s;const o=new Zje(e,t,this.textModel.getVersionId()),a=t.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if(!((r=this._updateOperation.value)===null||r===void 0)&&r.request.satisfies(o))return this._updateOperation.value.promise;if(!((s=a.get())===null||s===void 0)&&s.request.satisfies(o))return Promise.resolve(!0);const l=!!this._updateOperation.value;this._updateOperation.clear();const c=new vi,d=(()=>qje(this,void 0,void 0,function*(){if((l||t.triggerKind===Jd.Automatic)&&(yield Gje(this._debounceValue.get(this.textModel))),c.token.isCancellationRequested||this.textModel.getVersionId()!==o.versionId)return!1;const f=new Date,g=yield Vje(this.languageFeaturesService.inlineCompletionsProvider,e,this.textModel,t,c.token,this.languageConfigurationService);if(c.token.isCancellationRequested||this.textModel.getVersionId()!==o.versionId)return!1;const m=new Date;this._debounceValue.update(this.textModel,m.getTime()-f.getTime());const y=new Qje(g,o,this.textModel,this.versionId);if(n){const b=n.toInlineCompletion(void 0);n.canBeReused(this.textModel,e)&&!g.has(b)&&y.prepend(n.inlineCompletion,b.range,!0)}return this._updateOperation.clear(),Hn(b=>{a.set(y,b)}),!0}))(),u=new Yje(o,c,d);return this._updateOperation.value=u,d}clear(e){this._updateOperation.clear(),this.inlineCompletions.set(void 0,e),this.suggestWidgetInlineCompletions.set(void 0,e)}clearSuggestWidgetInlineCompletions(e){var t;!((t=this._updateOperation.value)===null||t===void 0)&&t.request.context.selectedSuggestionInfo&&this._updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,e)}cancelUpdate(){this._updateOperation.clear()}};HO=Kje([DU(3,Fe),DU(4,wn)],HO);function Gje(i,e){return new Promise(t=>{let n;const r=setTimeout(()=>{n&&n.dispose(),t()},i);e&&(n=e.onCancellationRequested(()=>{clearTimeout(r),n&&n.dispose(),t()}))})}class Zje{constructor(e,t,n){this.position=e,this.context=t,this.versionId=n}satisfies(e){return this.position.equals(e.position)&&Xje(this.context.selectedSuggestionInfo,e.context.selectedSuggestionInfo,(t,n)=>t.equals(n))&&(e.context.triggerKind===Jd.Automatic||this.context.triggerKind===Jd.Explicit)&&this.versionId===e.versionId}}function Xje(i,e,t){return!i||!e?i===e:t(i,e)}class Yje{constructor(e,t,n){this.request=e,this.cancellationTokenSource=t,this.promise=n}dispose(){this.cancellationTokenSource.cancel()}}class Qje{get inlineCompletions(){return this._inlineCompletions}constructor(e,t,n,r){this.inlineCompletionProviderResult=e,this.request=t,this.textModel=n,this.versionId=r,this._refCount=1,this._prependedInlineCompletionItems=[],this._rangeVersionIdValue=0,this._rangeVersionId=At(this,o=>{this.versionId.read(o);let a=!1;for(const l of this._inlineCompletions)a=a||l._updateRange(this.textModel);return a&&this._rangeVersionIdValue++,this._rangeVersionIdValue});const s=n.deltaDecorations([],e.completions.map(o=>({range:o.range,options:{description:"inline-completion-tracking-range"}})));this._inlineCompletions=e.completions.map((o,a)=>new IU(o,s[a],this._rangeVersionId))}clone(){return this._refCount++,this}dispose(){if(this._refCount--,this._refCount===0){setTimeout(()=>{this.textModel.isDisposed()||this.textModel.deltaDecorations(this._inlineCompletions.map(e=>e.decorationId),[])},0),this.inlineCompletionProviderResult.dispose();for(const e of this._prependedInlineCompletionItems)e.source.removeRef()}}prepend(e,t,n){n&&e.source.addRef();const r=this.textModel.deltaDecorations([],[{range:t,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new IU(e,r,this._rangeVersionId,t)),this._prependedInlineCompletionItems.push(e)}}class IU{get forwardStable(){var e;return(e=this.inlineCompletion.source.inlineCompletions.enableForwardStability)!==null&&e!==void 0?e:!1}constructor(e,t,n,r){this.inlineCompletion=e,this.decorationId=t,this.rangeVersion=n,this.semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]),this._isValid=!0,this._updatedRange=r??e.range}toInlineCompletion(e){return this.inlineCompletion.withRange(this._getUpdatedRange(e))}toSingleTextEdit(e){return new k1(this._getUpdatedRange(e),this.inlineCompletion.insertText)}isVisible(e,t,n){const r=this._toFilterTextReplacement(n).removeCommonPrefix(e);if(!this._isValid||!this.inlineCompletion.range.getStartPosition().equals(this._getUpdatedRange(n).getStartPosition())||t.lineNumber!==r.range.startLineNumber)return!1;const s=e.getValueInRange(r.range,1).toLowerCase(),o=r.text.toLowerCase(),a=Math.max(0,t.column-r.range.startColumn);let l=o.substring(0,a),c=o.substring(a),d=s.substring(0,a),u=s.substring(a);const h=e.getLineIndentColumn(r.range.startLineNumber);return r.range.startColumn<=h&&(d=d.trimStart(),d.length===0&&(u=u.trimStart()),l=l.trimStart(),l.length===0&&(c=c.trimStart())),l.startsWith(d)&&!!XX(u,c)}canBeReused(e,t){return this._isValid&&this._getUpdatedRange(void 0).containsPosition(t)&&this.isVisible(e,t,void 0)&&!this._isSmallerThanOriginal(void 0)}_toFilterTextReplacement(e){return new k1(this._getUpdatedRange(e),this.inlineCompletion.filterText)}_isSmallerThanOriginal(e){return RU(this._getUpdatedRange(e)).isBefore(RU(this.inlineCompletion.range))}_getUpdatedRange(e){return this.rangeVersion.read(e),this._updatedRange}_updateRange(e){const t=e.getDecorationRange(this.decorationId);return t?this._updatedRange.equalsRange(t)?!1:(this._updatedRange=t,!0):(this._isValid=!1,!0)}}function RU(i){return i.startLineNumber===i.endLineNumber?new U(1,1+i.endColumn-i.startColumn):new U(1+i.endLineNumber-i.startLineNumber,i.endColumn)}var r0=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const ft={Visible:l9,HasFocusedSuggestion:new Ne("suggestWidgetHasFocusedSuggestion",!1,p("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new Ne("suggestWidgetDetailsVisible",!1,p("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new Ne("suggestWidgetMultipleSuggestions",!1,p("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new Ne("suggestionMakesTextEdit",!0,p("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new Ne("acceptSuggestionOnEnter",!0,p("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new Ne("suggestionHasInsertAndReplaceRange",!1,p("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new Ne("suggestionInsertMode",void 0,{type:"string",description:p("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new Ne("suggestionCanResolve",!1,p("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},Nh=new E("suggestWidgetStatusBar");class Jje{constructor(e,t,n,r){var s;this.position=e,this.completion=t,this.container=n,this.provider=r,this.isInvalid=!1,this.score=El.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:(s=t.label)===null||s===void 0?void 0:s.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),this.extensionId=t.extensionId,D.isIRange(t.range)?(this.editStart=new U(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new U(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new U(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||D.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new U(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new U(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new U(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||D.spansMultipleLines(t.range.insert)||D.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof r.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._resolveDuration=0)}get isResolved(){return this._resolveDuration!==void 0}get resolveDuration(){return this._resolveDuration!==void 0?this._resolveDuration:-1}resolve(e){return r0(this,void 0,void 0,function*(){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._resolveDuration=void 0}),n=new qr(!0);this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(r=>{Object.assign(this.completion,r),this._resolveDuration=n.elapsed()},r=>{ql(r)&&(this._resolveCache=void 0,this._resolveDuration=void 0)}).finally(()=>{t.dispose()})}return this._resolveCache})}}class $y{constructor(e=2,t=new Set,n=new Set,r=new Map,s=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=n,this.providerItemsToReuse=r,this.showDeprecated=s}}$y.default=new $y;let eze;function tze(){return eze}class nze{constructor(e,t,n,r){this.items=e,this.needsClipboard=t,this.durations=n,this.disposable=r}}function _9(i,e,t,n=$y.default,r={triggerKind:0},s=xt.None){return r0(this,void 0,void 0,function*(){const o=new qr;t=t.clone();const a=e.getWordAtPosition(t),l=a?new D(t.lineNumber,a.startColumn,t.lineNumber,a.endColumn):D.fromPositions(t),c={replace:l,insert:l.setEndPosition(t.lineNumber,t.column)},d=[],u=new ae,h=[];let f=!1;const g=(y,b,v)=>{var C,w,S;let L=!1;if(!b)return L;for(const T of b.suggestions)if(!n.kindFilter.has(T.kind)){if(!n.showDeprecated&&(!((C=T==null?void 0:T.tags)===null||C===void 0)&&C.includes(1)))continue;T.range||(T.range=c),T.sortText||(T.sortText=typeof T.label=="string"?T.label:T.label.label),!f&&T.insertTextRules&&T.insertTextRules&4&&(f=T1.guessNeedsClipboard(T.insertText)),d.push(new Jje(t,T,b,y)),L=!0}return T3(b)&&u.add(b),h.push({providerName:(w=y._debugDisplayName)!==null&&w!==void 0?w:"unknown_provider",elapsedProvider:(S=b.duration)!==null&&S!==void 0?S:-1,elapsedOverall:v.elapsed()}),L},m=(()=>r0(this,void 0,void 0,function*(){}))();for(const y of i.orderedGroups(e)){let b=!1;if(yield Promise.all(y.map(v=>r0(this,void 0,void 0,function*(){if(n.providerItemsToReuse.has(v)){const C=n.providerItemsToReuse.get(v);C.forEach(w=>d.push(w)),b=b||C.length>0;return}if(!(n.providerFilter.size>0&&!n.providerFilter.has(v)))try{const C=new qr,w=yield v.provideCompletionItems(e,t,r,s);b=g(v,w,C)||b}catch(C){Ii(C)}}))),b||s.isCancellationRequested)break}return yield m,s.isCancellationRequested?(u.dispose(),Promise.reject(new pf)):new nze(d.sort(sze(n.snippetSortOrder)),f,{entries:h,elapsed:o.elapsed()},u)})}function b9(i,e){if(i.sortTextLow&&e.sortTextLow){if(i.sortTextLow<e.sortTextLow)return-1;if(i.sortTextLow>e.sortTextLow)return 1}return i.textLabel<e.textLabel?-1:i.textLabel>e.textLabel?1:i.completion.kind-e.completion.kind}function ize(i,e){if(i.completion.kind!==e.completion.kind){if(i.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return b9(i,e)}function rze(i,e){if(i.completion.kind!==e.completion.kind){if(i.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return b9(i,e)}const ZI=new Map;ZI.set(0,ize);ZI.set(2,rze);ZI.set(1,b9);function sze(i){return ZI.get(i)}Bt.registerCommand("_executeCompletionItemProvider",(i,...e)=>r0(void 0,void 0,void 0,function*(){const[t,n,r,s]=e;dn(Ye.isUri(t)),dn(U.isIPosition(n)),dn(typeof r=="string"||!r),dn(typeof s=="number"||!s);const{completionProvider:o}=i.get(Fe),a=yield i.get(Vs).createModelReference(t);try{const l={incomplete:!1,suggestions:[]},c=[],d=a.object.textEditorModel.validatePosition(n),u=yield _9(o,a.object.textEditorModel,d,void 0,{triggerCharacter:r??void 0,triggerKind:r?1:0});for(const h of u.items)c.length<(s??0)&&c.push(h.resolve(xt.None)),l.incomplete=l.incomplete||h.container.incomplete,l.suggestions.push(h.completion);try{return yield Promise.all(c),l}finally{setTimeout(()=>u.disposable.dispose(),100)}}finally{a.dispose()}}));function oze(i,e){var t;(t=i.getContribution("editor.contrib.suggestController"))===null||t===void 0||t.triggerSuggest(new Set().add(e),void 0,!0)}class i_{static isAllOff(e){return e.other==="off"&&e.comments==="off"&&e.strings==="off"}static isAllOn(e){return e.other==="on"&&e.comments==="on"&&e.strings==="on"}static valueFor(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}}function EU(i,e=Ar){return KAe(i,e)?i.charAt(0).toUpperCase()+i.slice(1):i}var aze=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},lze=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class NU{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){const n=t.resolve(e);if(n!==void 0)return n}}}class AU{constructor(e,t,n,r){this._model=e,this._selection=t,this._selectionIdx=n,this._overtypingCapturer=r}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let n=this._model.getValueInRange(this._selection)||void 0,r=this._selection.startLineNumber!==this._selection.endLineNumber;if(!n&&this._overtypingCapturer){const s=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);s&&(n=s.value,r=s.multiline)}if(n&&r&&e.snippet){const s=this._model.getLineContent(this._selection.startLineNumber),o=pn(s,0,this._selection.startColumn-1);let a=o;e.snippet.walk(c=>c===e?!1:(c instanceof fs&&(a=pn(Kc(c.value).pop())),!0));const l=zg(a,o);n=n.replace(/(\r\n|\r|\n)(.*)/g,(c,d,u)=>`${d}${a.substr(l)}${u}`)}return n}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const n=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return n&&n.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber);if(t==="CURSOR_INDEX")return String(this._selectionIdx);if(t==="CURSOR_NUMBER")return String(this._selectionIdx+1)}}}}class PU{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return vh(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const n=vh(this._model.uri.fsPath),r=n.lastIndexOf(".");return r<=0?n:n.slice(0,r)}else{if(t==="TM_DIRECTORY")return Yq(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel($D(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}class MU{constructor(e,t,n,r){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=n,this._spread=r}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(t){if(this._spread){const n=t.split(/\r\n|\n|\r/).filter(r=>!rG(r));if(n.length===this._selectionCount)return n[this._selectionIdx]}return t}}}let lL=class{constructor(e,t,n){this._model=e,this._selection=t,this._languageConfigurationService=n}resolve(e){const{name:t}=e,n=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),r=this._languageConfigurationService.getLanguageConfiguration(n).comments;if(r){if(t==="LINE_COMMENT")return r.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return r.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return r.blockCommentEndToken||void 0}}};lL=aze([lze(2,wn)],lL);class Tl{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return Tl.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return Tl.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return Tl.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return Tl.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3));if(t==="CURRENT_TIMEZONE_OFFSET"){const n=this._date.getTimezoneOffset(),r=n>0?"-":"+",s=Math.trunc(Math.abs(n/60)),o=s<10?"0"+s:s,a=Math.abs(n)-s*60,l=a<10?"0"+a:a;return r+o+":"+l}}}Tl.dayNames=[p("Sunday","Sunday"),p("Monday","Monday"),p("Tuesday","Tuesday"),p("Wednesday","Wednesday"),p("Thursday","Thursday"),p("Friday","Friday"),p("Saturday","Saturday")];Tl.dayNamesShort=[p("SundayShort","Sun"),p("MondayShort","Mon"),p("TuesdayShort","Tue"),p("WednesdayShort","Wed"),p("ThursdayShort","Thu"),p("FridayShort","Fri"),p("SaturdayShort","Sat")];Tl.monthNames=[p("January","January"),p("February","February"),p("March","March"),p("April","April"),p("May","May"),p("June","June"),p("July","July"),p("August","August"),p("September","September"),p("October","October"),p("November","November"),p("December","December")];Tl.monthNamesShort=[p("JanuaryShort","Jan"),p("FebruaryShort","Feb"),p("MarchShort","Mar"),p("AprilShort","Apr"),p("MayShort","May"),p("JuneShort","Jun"),p("JulyShort","Jul"),p("AugustShort","Aug"),p("SeptemberShort","Sep"),p("OctoberShort","Oct"),p("NovemberShort","Nov"),p("DecemberShort","Dec")];class OU{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=aFe(this._workspaceService.getWorkspace());if(!rFe(t)){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(xP(e))return vh(e.uri.path);let t=vh(e.configPath.path);return t.endsWith(TP)&&(t=t.substr(0,t.length-TP.length-1)),t}_resoveWorkspacePath(e){if(xP(e))return EU(e.uri.fsPath);const t=vh(e.configPath.path);let n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?EU(n):"/"}}class FU{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return VI()}}var cze=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},dze=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},al;class Ko{constructor(e,t,n){this._editor=e,this._snippet=t,this._snippetLineLeadingWhitespace=n,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=i8(t.placeholders,qo.compareByIndex),this._placeholderGroupsIdx=-1}initialize(e){this._offset=e.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const n of this._snippet.placeholders){const r=this._snippet.offset(n),s=this._snippet.fullLen(n),o=D.fromPositions(e.getPositionAt(this._offset+r),e.getPositionAt(this._offset+r+s)),a=n.isFinalTabstop?Ko._decor.inactiveFinal:Ko._decor.inactive,l=t.addDecoration(o,a);this._placeholderDecorations.set(n,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){const r=[];for(const s of this._placeholderGroups[this._placeholderGroupsIdx])if(s.transform){const o=this._placeholderDecorations.get(s),a=this._editor.getModel().getDecorationRange(o),l=this._editor.getModel().getValueInRange(a),c=s.transform.resolve(l).split(/\r\n|\r|\n/);for(let d=1;d<c.length;d++)c[d]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+c[d]);r.push(jn.replace(a,c.join(this._editor.getModel().getEOL())))}r.length>0&&this._editor.executeEdits("snippet.placeholderTransform",r)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const n=this._editor.getModel().changeDecorations(r=>{const s=new Set,o=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const l=this._placeholderDecorations.get(a),c=this._editor.getModel().getDecorationRange(l);o.push(new Be(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),r.changeDecorationOptions(l,a.isFinalTabstop?Ko._decor.activeFinal:Ko._decor.active),s.add(a);for(const d of this._snippet.enclosingPlaceholders(a)){const u=this._placeholderDecorations.get(d);r.changeDecorationOptions(u,d.isFinalTabstop?Ko._decor.activeFinal:Ko._decor.active),s.add(d)}}for(const[a,l]of this._placeholderDecorations)s.has(a)||r.changeDecorationOptions(l,a.isFinalTabstop?Ko._decor.inactiveFinal:Ko._decor.inactive);return o});return t?this.move(e):n??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof qo){const n=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(n).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){if(this._snippet.placeholders.length===0)return!0;if(this._snippet.placeholders.length===1){const[e]=this._snippet.placeholders;if(e.isFinalTabstop&&this._snippet.rightMostDescendant===e)return!0}return!1}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let n;for(const r of t){if(r.isFinalTabstop)break;n||(n=[],e.set(r.index,n));const s=this._placeholderDecorations.get(r),o=this._editor.getModel().getDecorationRange(s);if(!o){e.delete(r.index);break}n.push(o)}}return e}get activeChoice(){if(!this._placeholderDecorations)return;const e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!(e!=null&&e.choice))return;const t=this._placeholderDecorations.get(e);if(!t)return;const n=this._editor.getModel().getDecorationRange(t);if(n)return{range:n,choice:e.choice}}get hasChoice(){let e=!1;return this._snippet.walk(t=>(e=t instanceof lb,!e)),e}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(n=>{for(const r of this._placeholderGroups[this._placeholderGroupsIdx]){const s=e.shift();console.assert(s._offset!==-1),console.assert(!s._placeholderDecorations);const o=s._snippet.placeholderInfo.last.index;for(const l of s._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=r.index+(o+1)/this._nestingLevel:l.index=r.index+l.index/this._nestingLevel;this._snippet.replace(r,s._snippet.children);const a=this._placeholderDecorations.get(r);n.removeDecoration(a),this._placeholderDecorations.delete(r);for(const l of s._snippet.placeholders){const c=s._snippet.offset(l),d=s._snippet.fullLen(l),u=D.fromPositions(t.getPositionAt(s._offset+c),t.getPositionAt(s._offset+c+d)),h=n.addDecoration(u,Ko._decor.inactive);this._placeholderDecorations.set(l,h)}}this._placeholderGroups=i8(this._snippet.placeholders,qo.compareByIndex)})}}Ko._decor={active:dt.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:dt.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:dt.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:dt.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const BU={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let cL=al=class{static adjustWhitespace(e,t,n,r,s){const o=e.getLineContent(t.lineNumber),a=pn(o,0,t.column-1);let l;return r.walk(c=>{if(!(c instanceof fs)||c.parent instanceof lb||s&&!s.has(c))return!0;const d=c.value.split(/\r\n|\r|\n/);if(n){const h=r.offset(c);if(h===0)d[0]=e.normalizeIndentation(d[0]);else{l=l??r.toString();const f=l.charCodeAt(h-1);(f===10||f===13)&&(d[0]=e.normalizeIndentation(a+d[0]))}for(let f=1;f<d.length;f++)d[f]=e.normalizeIndentation(a+d[f])}const u=d.join(e.getEOL());return u!==c.value&&(c.parent.replace(c,[new fs(u)]),l=void 0),!0}),a}static adjustSelection(e,t,n,r){if(n!==0||r!==0){const{positionLineNumber:s,positionColumn:o}=t,a=o-n,l=o+r,c=e.validateRange({startLineNumber:s,startColumn:a,endLineNumber:s,endColumn:l});t=Be.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,t.getDirection())}return t}static createEditsAndSnippetsFromSelections(e,t,n,r,s,o,a,l,c){const d=[],u=[];if(!e.hasModel())return{edits:d,snippets:u};const h=e.getModel(),f=e.invokeWithinContext(w=>w.get(Yg)),g=e.invokeWithinContext(w=>new PU(w.get(a1),h)),m=()=>a,y=h.getValueInRange(al.adjustSelection(h,e.getSelection(),n,0)),b=h.getValueInRange(al.adjustSelection(h,e.getSelection(),0,r)),v=h.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),C=e.getSelections().map((w,S)=>({selection:w,idx:S})).sort((w,S)=>D.compareRangesUsingStarts(w.selection,S.selection));for(const{selection:w,idx:S}of C){let L=al.adjustSelection(h,w,n,0),T=al.adjustSelection(h,w,0,r);y!==h.getValueInRange(L)&&(L=w),b!==h.getValueInRange(T)&&(T=w);const I=w.setStartPosition(L.startLineNumber,L.startColumn).setEndPosition(T.endLineNumber,T.endColumn),R=new T1().parse(t,!0,s),B=I.getStartPosition(),V=al.adjustWhitespace(h,B,o||S>0&&v!==h.getLineFirstNonWhitespaceColumn(w.positionLineNumber),R);R.resolveVariables(new NU([g,new MU(m,S,C.length,e.getOption(78)==="spread"),new AU(h,w,S,l),new lL(h,w,c),new Tl,new OU(f),new FU])),d[S]=jn.replace(I,R.toString()),d[S].identifier={major:S,minor:0},d[S]._isTracked=!0,u[S]=new Ko(e,R,V)}return{edits:d,snippets:u}}static createEditsAndSnippetsFromEdits(e,t,n,r,s,o,a){if(!e.hasModel()||t.length===0)return{edits:[],snippets:[]};const l=[],c=e.getModel(),d=new T1,u=new vw,h=new NU([e.invokeWithinContext(g=>new PU(g.get(a1),c)),new MU(()=>s,0,e.getSelections().length,e.getOption(78)==="spread"),new AU(c,e.getSelection(),0,o),new lL(c,e.getSelection(),a),new Tl,new OU(e.invokeWithinContext(g=>g.get(Yg))),new FU]);t=t.sort((g,m)=>D.compareRangesUsingStarts(g.range,m.range));let f=0;for(let g=0;g<t.length;g++){const{range:m,template:y}=t[g];if(g>0){const S=t[g-1].range,L=D.fromPositions(S.getEndPosition(),m.getStartPosition()),T=new fs(c.getValueInRange(L));u.appendChild(T),f+=T.value.length}const b=d.parseFragment(y,u);al.adjustWhitespace(c,m.getStartPosition(),!0,u,new Set(b)),u.resolveVariables(h);const v=u.toString(),C=v.slice(f);f=v.length;const w=jn.replace(m,C);w.identifier={major:g,minor:0},w._isTracked=!0,l.push(w)}return d.ensureFinalTabstop(u,n,!0),{edits:l,snippets:[new Ko(e,u,"")]}}constructor(e,t,n=BU,r){this._editor=e,this._template=t,this._options=n,this._languageConfigurationService=r,this._templateMerges=[],this._snippets=[]}dispose(){an(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=typeof this._template=="string"?al.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):al.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=t,this._editor.executeEdits("snippet",e,n=>{const r=n.filter(s=>!!s.identifier);for(let s=0;s<t.length;s++)t[s].initialize(r[s].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):r.map(s=>Be.fromPositions(s.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=BU){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:n,snippets:r}=al.createEditsAndSnippetsFromSelections(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",n,s=>{const o=s.filter(l=>!!l.identifier);for(let l=0;l<r.length;l++)r[l].initialize(o[l].textChange);const a=r[0].isTrivialSnippet;if(!a){for(const l of this._snippets)l.merge(r);console.assert(r.length===0)}return this._snippets[0].hasPlaceholder&&!a?this._move(void 0):o.map(l=>Be.fromPositions(l.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const n of this._snippets){const r=n.move(e);t.push(...r)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;const t=new Map;for(const n of this._snippets){const r=n.computePossibleSelections();if(t.size===0)for(const[s,o]of r){o.sort(D.compareRangesUsingStarts);for(const a of e)if(o[0].containsRange(a)){t.set(s,[]);break}}if(t.size===0)return!1;t.forEach((s,o)=>{s.push(...r.get(o))})}e.sort(D.compareRangesUsingStarts);for(const[n,r]of t){if(r.length!==e.length){t.delete(n);continue}r.sort(D.compareRangesUsingStarts);for(let s=0;s<r.length;s++)if(!r[s].containsRange(e[s])){t.delete(n);continue}}return t.size>0}};cL=al=cze([dze(3,wn)],cL);var uze=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},VS=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Dm;const WU={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let yr=Dm=class{static get(e){return e.getContribution(Dm.ID)}constructor(e,t,n,r,s){this._editor=e,this._logService=t,this._languageFeaturesService=n,this._languageConfigurationService=s,this._snippetListener=new ae,this._modelVersionId=-1,this._inSnippet=Dm.InSnippetMode.bindTo(r),this._hasNextTabstop=Dm.HasNextTabstop.bindTo(r),this._hasPrevTabstop=Dm.HasPrevTabstop.bindTo(r)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)===null||e===void 0||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t>"u"?WU:Object.assign(Object.assign({},WU),t))}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){var n;if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof e!="string"&&this.cancel(),this._session?(dn(typeof e=="string"),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new cL(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),!((n=this._session)===null||n===void 0)&&n.hasChoice){const r={_debugDisplayName:"snippetChoiceCompletions",provideCompletionItems:(d,u)=>{if(!this._session||d!==this._editor.getModel()||!U.equals(this._editor.getPosition(),u))return;const{activeChoice:h}=this._session;if(!h||h.choice.options.length===0)return;const f=d.getValueInRange(h.range),g=!!h.choice.options.find(y=>y.value===f),m=[];for(let y=0;y<h.choice.options.length;y++){const b=h.choice.options[y];m.push({kind:13,label:b.value,insertText:b.value,sortText:"a".repeat(y+1),range:h.range,filterText:g?`${f}_${b.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:p("next","Go to next placeholder...")}})}return{suggestions:m}}},s=this._editor.getModel();let o,a=!1;const l=()=>{o==null||o.dispose(),a=!1},c=()=>{a||(o=this._languageFeaturesService.completionProvider.register({language:s.getLanguageId(),pattern:s.uri.fsPath,scheme:s.uri.scheme,exclusive:!0},r),this._snippetListener.add(o),a=!0)};this._choiceCompletions={provider:r,enable:c,disable:l}}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(r=>r.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){var e;if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{activeChoice:t}=this._session;if(!t||!this._choiceCompletions){(e=this._choiceCompletions)===null||e===void 0||e.disable(),this._currentChoice=void 0;return}this._currentChoice!==t.choice&&(this._currentChoice=t.choice,this._choiceCompletions.enable(),queueMicrotask(()=>{oze(this._editor,this._choiceCompletions.provider)}))}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,(t=this._session)===null||t===void 0||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){var e;(e=this._session)===null||e===void 0||e.prev(),this._updateState()}next(){var e;(e=this._session)===null||e===void 0||e.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}};yr.ID="snippetController2";yr.InSnippetMode=new Ne("inSnippetMode",!1,p("inSnippetMode","Whether the editor in current in snippet mode"));yr.HasNextTabstop=new Ne("hasNextTabstop",!1,p("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));yr.HasPrevTabstop=new Ne("hasPrevTabstop",!1,p("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));yr=Dm=uze([VS(1,Vo),VS(2,Fe),VS(3,ot),VS(4,wn)],yr);$t(yr.ID,yr,4);const XI=sr.bindToContribution(yr.get);ye(new XI({id:"jumpToNextSnippetPlaceholder",precondition:re.and(yr.InSnippetMode,yr.HasNextTabstop),handler:i=>i.next(),kbOpts:{weight:100+30,kbExpr:N.editorTextFocus,primary:2}}));ye(new XI({id:"jumpToPrevSnippetPlaceholder",precondition:re.and(yr.InSnippetMode,yr.HasPrevTabstop),handler:i=>i.prev(),kbOpts:{weight:100+30,kbExpr:N.editorTextFocus,primary:1026}}));ye(new XI({id:"leaveSnippet",precondition:yr.InSnippetMode,handler:i=>i.cancel(!0),kbOpts:{weight:100+30,kbExpr:N.editorTextFocus,primary:9,secondary:[1033]}}));ye(new XI({id:"acceptSnippet",precondition:yr.InSnippetMode,handler:i=>i.finish()}));var hze=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},yN=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},xd=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},mo;(function(i){i[i.Undo=0]="Undo",i[i.Redo=1]="Redo",i[i.AcceptWord=2]="AcceptWord",i[i.Other=3]="Other"})(mo||(mo={}));let UO=class extends q{get isAcceptingPartially(){return this._isAcceptingPartially}constructor(e,t,n,r,s,o,a,l,c,d,u,h){super(),this.textModel=e,this.selectedSuggestItem=t,this.cursorPosition=n,this.textModelVersionId=r,this._debounceValue=s,this._suggestPreviewEnabled=o,this._suggestPreviewMode=a,this._inlineSuggestMode=l,this._enabled=c,this._instantiationService=d,this._commandService=u,this._languageConfigurationService=h,this._source=this._register(this._instantiationService.createInstance(HO,this.textModel,this.textModelVersionId,this._debounceValue)),this._isActive=Tn(this,!1),this._forceUpdate=sQ("forceUpdate"),this._selectedInlineCompletionId=Tn(this,void 0),this._isAcceptingPartially=!1,this._preserveCurrentCompletionReasons=new Set([mo.Redo,mo.Undo,mo.AcceptWord]),this._fetchInlineCompletions=KBe({owner:this,createEmptyChangeSummary:()=>({preserveCurrentCompletion:!1,inlineCompletionTriggerKind:Jd.Automatic}),handleChange:(g,m)=>(g.didChange(this.textModelVersionId)&&this._preserveCurrentCompletionReasons.has(g.change)?m.preserveCurrentCompletion=!0:g.didChange(this._forceUpdate)&&(m.inlineCompletionTriggerKind=g.change),!0)},(g,m)=>{if(this._forceUpdate.read(g),!(this._enabled.read(g)&&this.selectedSuggestItem.read(g)||this._isActive.read(g))){this._source.cancelUpdate();return}this.textModelVersionId.read(g);const b=this.selectedInlineCompletion.get(),v=m.preserveCurrentCompletion||b!=null&&b.forwardStable?b:void 0,C=this._source.suggestWidgetInlineCompletions.get(),w=this.selectedSuggestItem.read(g);if(C&&!w){const T=this._source.inlineCompletions.get();Hn(I=>{T&&C.request.versionId>T.request.versionId&&this._source.inlineCompletions.set(C.clone(),I),this._source.clearSuggestWidgetInlineCompletions(I)})}const S=this.cursorPosition.read(g),L={triggerKind:m.inlineCompletionTriggerKind,selectedSuggestionInfo:w==null?void 0:w.toSelectedSuggestionInfo()};return this._source.fetch(S,L,v)}),this._filteredInlineCompletionItems=At(this,g=>{const m=this._source.inlineCompletions.read(g);if(!m)return[];const y=this.cursorPosition.read(g);return m.inlineCompletions.filter(v=>v.isVisible(this.textModel,y,g))}),this.selectedInlineCompletionIndex=At(this,g=>{const m=this._selectedInlineCompletionId.read(g),y=this._filteredInlineCompletionItems.read(g),b=this._selectedInlineCompletionId===void 0?-1:y.findIndex(v=>v.semanticId===m);return b===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):b}),this.selectedInlineCompletion=At(this,g=>{const m=this._filteredInlineCompletionItems.read(g),y=this.selectedInlineCompletionIndex.read(g);return m[y]}),this.lastTriggerKind=this._source.inlineCompletions.map(g=>g==null?void 0:g.request.context.triggerKind),this.inlineCompletionsCount=At(this,g=>{if(this.lastTriggerKind.read(g)===Jd.Explicit)return this._filteredInlineCompletionItems.read(g).length}),this.state=ZV({owner:this,equalityComparer:(g,m)=>!g||!m?g===m:CU(g.ghostText,m.ghostText)&&g.inlineCompletion===m.inlineCompletion&&g.suggestItem===m.suggestItem},g=>{var m;const y=this.textModel,b=this.selectedSuggestItem.read(g);if(b){const v=b.toSingleTextEdit().removeCommonPrefix(y),C=this._computeAugmentedCompletion(v,g);if(!this._suggestPreviewEnabled.read(g)&&!C)return;const S=(m=C==null?void 0:C.edit)!==null&&m!==void 0?m:v,L=C?C.edit.text.length-v.text.length:0,T=this._suggestPreviewMode.read(g),I=this.cursorPosition.read(g),R=S.computeGhostText(y,T,I,L);return{ghostText:R??new oL(S.range.endLineNumber,[]),inlineCompletion:C==null?void 0:C.completion,suggestItem:b}}else{if(!this._isActive.read(g))return;const v=this.selectedInlineCompletion.read(g);if(!v)return;const C=v.toSingleTextEdit(g),w=this._inlineSuggestMode.read(g),S=this.cursorPosition.read(g),L=C.computeGhostText(y,w,S);return L?{ghostText:L,inlineCompletion:v,suggestItem:void 0}:void 0}}),this.ghostText=ZV({owner:this,equalityComparer:CU},g=>{const m=this.state.read(g);if(m)return m.ghostText}),this._register(Ay(this._fetchInlineCompletions));let f;this._register(Cn(g=>{var m,y;const b=this.state.read(g),v=b==null?void 0:b.inlineCompletion;if((v==null?void 0:v.semanticId)!==(f==null?void 0:f.semanticId)&&(f=v,v)){const C=v.inlineCompletion,w=C.source;(y=(m=w.provider).handleItemDidShow)===null||y===void 0||y.call(m,w.inlineCompletions,C.sourceInlineCompletion,C.insertText)}}))}trigger(e){return xd(this,void 0,void 0,function*(){this._isActive.set(!0,e),yield this._fetchInlineCompletions.get()})}triggerExplicitly(e){return xd(this,void 0,void 0,function*(){DM(e,t=>{this._isActive.set(!0,t),this._forceUpdate.trigger(t,Jd.Explicit)}),yield this._fetchInlineCompletions.get()})}stop(e){DM(e,t=>{this._isActive.set(!1,t),this._source.clear(t)})}_computeAugmentedCompletion(e,t){const n=this.textModel,r=this._source.suggestWidgetInlineCompletions.read(t),s=r?r.inlineCompletions:[this.selectedInlineCompletion.read(t)].filter(R0);return BDe(s,a=>{let l=a.toSingleTextEdit(t);return l=l.removeCommonPrefix(n,D.fromPositions(l.range.getStartPosition(),e.range.getEndPosition())),l.augments(e)?{edit:l,completion:a}:void 0})}_deltaSelectedInlineCompletionIndex(e){return xd(this,void 0,void 0,function*(){yield this.triggerExplicitly();const t=this._filteredInlineCompletionItems.get()||[];if(t.length>0){const n=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[n].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)})}next(){return xd(this,void 0,void 0,function*(){yield this._deltaSelectedInlineCompletionIndex(1)})}previous(){return xd(this,void 0,void 0,function*(){yield this._deltaSelectedInlineCompletionIndex(-1)})}accept(e){var t;return xd(this,void 0,void 0,function*(){if(e.getModel()!==this.textModel)throw new Ti;const n=this.state.get();if(!n||n.ghostText.isEmpty()||!n.inlineCompletion)return;const r=n.inlineCompletion.toInlineCompletion(void 0);e.pushUndoStop(),r.snippetInfo?(e.executeEdits("inlineSuggestion.accept",[jn.replaceMove(r.range,""),...r.additionalTextEdits]),e.setPosition(r.snippetInfo.range.getStartPosition()),(t=yr.get(e))===null||t===void 0||t.insert(r.snippetInfo.snippet,{undoStopBefore:!1})):e.executeEdits("inlineSuggestion.accept",[jn.replaceMove(r.range,r.insertText),...r.additionalTextEdits]),r.command&&r.source.addRef(),Hn(s=>{this._source.clear(s),this._isActive.set(!1,s)}),r.command&&(yield this._commandService.executeCommand(r.command.id,...r.command.arguments||[]).then(void 0,Ii),r.source.removeRef())})}acceptNextWord(e){return xd(this,void 0,void 0,function*(){yield this._acceptNext(e,(t,n)=>{const r=this.textModel.getLanguageIdAtPosition(t.lineNumber,t.column),s=this._languageConfigurationService.getLanguageConfiguration(r),o=new RegExp(s.wordDefinition.source,s.wordDefinition.flags.replace("g","")),a=n.match(o);let l=0;a&&a.index!==void 0?a.index===0?l=a[0].length:l=a.index:l=n.length;const d=/\s+/g.exec(n);return d&&d.index!==void 0&&d.index+d[0].length<l&&(l=d.index+d[0].length),l})})}acceptNextLine(e){return xd(this,void 0,void 0,function*(){yield this._acceptNext(e,(t,n)=>{const r=n.match(/\n/);return r&&r.index!==void 0?r.index+1:n.length})})}_acceptNext(e,t){return xd(this,void 0,void 0,function*(){if(e.getModel()!==this.textModel)throw new Ti;const n=this.state.get();if(!n||n.ghostText.isEmpty()||!n.inlineCompletion)return;const r=n.ghostText,s=n.inlineCompletion.toInlineCompletion(void 0);if(s.snippetInfo||s.filterText!==s.insertText){yield this.accept(e);return}const o=r.parts[0],a=new U(r.lineNumber,o.column),l=o.lines.join(`
`),c=t(a,l);if(c===l.length&&r.parts.length===1){this.accept(e);return}const d=l.substring(0,c);this._isAcceptingPartially=!0;try{e.pushUndoStop(),e.executeEdits("inlineSuggestion.accept",[jn.replace(D.fromPositions(a),d)]);const u=FO(d);e.setPosition(OO(a,u))}finally{this._isAcceptingPartially=!1}if(s.source.provider.handlePartialAccept){const u=D.fromPositions(s.range.getStartPosition(),OO(a,FO(d))),h=e.getModel().getValueInRange(u,1);s.source.provider.handlePartialAccept(s.source.inlineCompletions,s.sourceInlineCompletion,h.length)}})}handleSuggestAccepted(e){var t,n;const r=e.toSingleTextEdit().removeCommonPrefix(this.textModel),s=this._computeAugmentedCompletion(r,void 0);if(!s)return;const o=s.completion.inlineCompletion;(n=(t=o.source.provider).handlePartialAccept)===null||n===void 0||n.call(t,o.source.inlineCompletions,o.sourceInlineCompletion,r.text.length)}};UO=hze([yN(9,rt),yN(10,oi),yN(11,wn)],UO);var fze=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},VU=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Cv;class v9{constructor(e){this.name=e}select(e,t,n){if(n.length===0)return 0;const r=n[0].score[0];for(let s=0;s<n.length;s++){const{score:o,completion:a}=n[s];if(o[0]!==r)break;if(a.preselect)return s}return 0}}class Eee extends v9{constructor(){super("first")}memorize(e,t,n){}toJSON(){}fromJSON(){}}class gze extends v9{constructor(){super("recentlyUsed"),this._cache=new bf(300,.66),this._seq=0}memorize(e,t,n){const r=`${e.getLanguageId()}/${n.textLabel}`;this._cache.set(r,{touch:this._seq++,type:n.completion.kind,insertText:n.completion.insertText})}select(e,t,n){if(n.length===0)return 0;const r=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(r))return super.select(e,t,n);const s=n[0].score[0];let o=-1,a=-1,l=-1;for(let c=0;c<n.length&&n[c].score[0]===s;c++){const d=`${e.getLanguageId()}/${n[c].textLabel}`,u=this._cache.peek(d);if(u&&u.touch>l&&u.type===n[c].completion.kind&&u.insertText===n[c].completion.insertText&&(l=u.touch,a=c),n[c].completion.preselect&&o===-1)return o=c}return a!==-1?a:o!==-1?o:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();const t=0;for(const[n,r]of e)r.touch=t,r.type=typeof r.type=="number"?r.type:P0.fromString(r.type),this._cache.set(n,r);this._seq=this._cache.size}}class pze extends v9{constructor(){super("recentlyUsedByPrefix"),this._trie=L_.forStrings(),this._seq=0}memorize(e,t,n){const{word:r}=e.getWordUntilPosition(t),s=`${e.getLanguageId()}/${r}`;this._trie.set(s,{type:n.completion.kind,insertText:n.completion.insertText,touch:this._seq++})}select(e,t,n){const{word:r}=e.getWordUntilPosition(t);if(!r)return super.select(e,t,n);const s=`${e.getLanguageId()}/${r}`;let o=this._trie.get(s);if(o||(o=this._trie.findSubstr(s)),o)for(let a=0;a<n.length;a++){const{kind:l,insertText:c}=n[a].completion;if(l===o.type&&c===o.insertText)return a}return super.select(e,t,n)}toJSON(){const e=[];return this._trie.forEach((t,n)=>e.push([n,t])),e.sort((t,n)=>-(t[1].touch-n[1].touch)).forEach((t,n)=>t[1].touch=n),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,n]of e)n.type=typeof n.type=="number"?n.type:P0.fromString(n.type),this._trie.set(t,n)}}}let Ky=Cv=class{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new ae,this._persistSoon=new fn(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(n=>{n.reason===mk.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,n){this._withStrategy(e,t).memorize(e,t,n),this._persistSoon.schedule()}select(e,t,n){return this._withStrategy(e,t).select(e,t,n)}_withStrategy(e,t){var n;const r=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((n=this._strategy)===null||n===void 0?void 0:n.name)!==r){this._saveState();const s=Cv._strategyCtors.get(r)||Eee;this._strategy=new s;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get(`${Cv._storagePrefix}/${r}`,a);l&&this._strategy.fromJSON(JSON.parse(l))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,n=JSON.stringify(this._strategy);this._storageService.store(`${Cv._storagePrefix}/${this._strategy.name}`,n,t,1)}}};Ky._strategyCtors=new Map([["recentlyUsedByPrefix",pze],["recentlyUsed",gze],["first",Eee]]);Ky._storagePrefix="suggest/memories";Ky=Cv=fze([VU(0,Za),VU(1,Et)],Ky);const YI=Lt("ISuggestMemories");Wt(YI,Ky,1);var mze=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},_ze=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},jO;let qy=jO=class{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=jO.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(n=>n.hasChanged(122)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(122)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const n=this._editor.getModel(),r=this._editor.getSelection(),s=n.getWordAtPosition(r.getStartPosition());if(!s){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(s.endColumn===r.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};qy.AtEnd=new Ne("atEndOfWord",!1);qy=jO=mze([_ze(1,ot)],qy);var bze=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},vze=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},wv;let gp=wv=class{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=wv.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)===null||e===void 0||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},n){if(e.items.length===0){this.reset();return}if(wv._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=n,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,n){let r=n;for(let s=t.items.length;s>0&&(r=(r+t.items.length+(e?1:-1))%t.items.length,!(r===n||!t.items[r].completion.additionalTextEdits));s--);return r}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=wv._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};gp.OtherSuggestions=new Ne("hasOtherSuggestions",!1);gp=wv=bze([vze(1,ot)],gp);class yze{constructor(e,t,n,r){this._disposables=new ae,this._disposables.add(n.onDidSuggest(s=>{s.completionModel.items.length===0&&this.reset()})),this._disposables.add(n.onDidCancel(s=>{this.reset()})),this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(s=>{if(this._active&&!t.isFrozen()&&n.state!==0){const o=s.charCodeAt(s.length-1);this._active.acceptCharacters.has(o)&&e.getOption(0)&&r(this._active.item)}}))}_onItem(e){if(!e||!zr(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new AT;for(const n of e.item.completion.commitCharacters)n.length>0&&t.add(n.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}var Cze=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class _o{provideSelectionRanges(e,t){return Cze(this,void 0,void 0,function*(){const n=[];for(const r of t){const s=[];n.push(s);const o=new Map;yield new Promise(a=>_o._bracketsRightYield(a,0,e,r,o)),yield new Promise(a=>_o._bracketsLeftYield(a,0,e,r,o,s))}return n})}static _bracketsRightYield(e,t,n,r,s){const o=new Map,a=Date.now();for(;;){if(t>=_o._maxRounds){e();break}if(!r){e();break}const l=n.bracketPairs.findNextBracket(r);if(!l){e();break}if(Date.now()-a>_o._maxDuration){setTimeout(()=>_o._bracketsRightYield(e,t+1,n,r,s));break}if(l.bracketInfo.isOpeningBracket){const d=l.bracketInfo.bracketText,u=o.has(d)?o.get(d):0;o.set(d,u+1)}else{const d=l.bracketInfo.getOpeningBrackets()[0].bracketText;let u=o.has(d)?o.get(d):0;if(u-=1,o.set(d,Math.max(0,u)),u<0){let h=s.get(d);h||(h=new ps,s.set(d,h)),h.push(l.range)}}r=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,n,r,s,o){const a=new Map,l=Date.now();for(;;){if(t>=_o._maxRounds&&s.size===0){e();break}if(!r){e();break}const c=n.bracketPairs.findPrevBracket(r);if(!c){e();break}if(Date.now()-l>_o._maxDuration){setTimeout(()=>_o._bracketsLeftYield(e,t+1,n,r,s,o));break}if(c.bracketInfo.isOpeningBracket){const u=c.bracketInfo.bracketText;let h=a.has(u)?a.get(u):0;if(h-=1,a.set(u,Math.max(0,h)),h<0){const f=s.get(u);if(f){const g=f.shift();f.size===0&&s.delete(u);const m=D.fromPositions(c.range.getEndPosition(),g.getStartPosition()),y=D.fromPositions(c.range.getStartPosition(),g.getEndPosition());o.push({range:m}),o.push({range:y}),_o._addBracketLeading(n,y,o)}}}else{const u=c.bracketInfo.getOpeningBrackets()[0].bracketText,h=a.has(u)?a.get(u):0;a.set(u,h+1)}r=c.range.getStartPosition()}}static _addBracketLeading(e,t,n){if(t.startLineNumber===t.endLineNumber)return;const r=t.startLineNumber,s=e.getLineFirstNonWhitespaceColumn(r);s!==0&&s!==t.startColumn&&(n.push({range:D.fromPositions(new U(r,s),t.getEndPosition())}),n.push({range:D.fromPositions(new U(r,1),t.getEndPosition())}));const o=r-1;if(o>0){const a=e.getLineFirstNonWhitespaceColumn(o);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(o)&&(n.push({range:D.fromPositions(new U(o,a),t.getEndPosition())}),n.push({range:D.fromPositions(new U(o,1),t.getEndPosition())}))}}}_o._maxDuration=30;_o._maxRounds=2;var wze=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class bl{static create(e,t){return wze(this,void 0,void 0,function*(){if(!t.getOption(117).localityBonus||!t.hasModel())return bl.None;const n=t.getModel(),r=t.getPosition();if(!e.canComputeWordRanges(n.uri))return bl.None;const[s]=yield new _o().provideSelectionRanges(n,[r]);if(s.length===0)return bl.None;const o=yield e.computeWordRanges(n.uri,s[0].range);if(!o)return bl.None;const a=n.getWordUntilPosition(r);return delete o[a.word],new class extends bl{distance(l,c){if(!r.equals(t.getPosition()))return 0;if(c.kind===17)return 2<<20;const d=typeof c.label=="string"?c.label:c.label.label,u=o[d];if(Tq(u))return 2<<20;const h=D0(u,D.fromPositions(l),D.compareRangesUsingStarts),f=h>=0?u[h]:u[Math.max(0,~h-1)];let g=s.length;for(const m of s){if(!D.containsRange(m.range,f))break;g-=1}return g}}})}}bl.None=new class extends bl{distance(){return 0}};let HU=class{constructor(e,t){this.leadingLineContent=e,this.characterCountDelta=t}};class Yu{constructor(e,t,n,r,s,o,a=eI.default,l=void 0){this.clipboardText=l,this._snippetCompareFn=Yu._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=r,this._options=s,this._refilterKind=1,this._lineContext=n,this._fuzzyScoreOptions=a,o==="top"?this._snippetCompareFn=Yu._compareCompletionItemsSnippetsUp:o==="bottom"&&(this._snippetCompareFn=Yu._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}getItemsByProvider(){return this._ensureCachedState(),this._itemsByProvider}getIncompleteProvider(){this._ensureCachedState();const e=new Set;for(const[t,n]of this.getItemsByProvider())n.length>0&&n[0].container.incomplete&&e.add(t);return e}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._itemsByProvider=new Map;const e=[],{leadingLineContent:t,characterCountDelta:n}=this._lineContext;let r="",s="";const o=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||o.length>2e3?Qg:MFe;for(let c=0;c<o.length;c++){const d=o[c];if(d.isInvalid)continue;const u=this._itemsByProvider.get(d.provider);u?u.push(d):this._itemsByProvider.set(d.provider,[d]);const h=d.position.column-d.editStart.column,f=h+n-(d.position.column-this._column);if(r.length!==f&&(r=f===0?"":t.slice(-f),s=r.toLowerCase()),d.word=r,f===0)d.score=El.Default;else{let g=0;for(;g<h;){const m=r.charCodeAt(g);if(m===32||m===9)g+=1;else break}if(g>=f)d.score=El.Default;else if(typeof d.completion.filterText=="string"){const m=l(r,s,g,d.completion.filterText,d.filterTextLow,0,this._fuzzyScoreOptions);if(!m)continue;_A(d.completion.filterText,d.textLabel)===0?d.score=m:(d.score=EFe(r,s,g,d.textLabel,d.labelLow,0),d.score[0]=m[0])}else{const m=l(r,s,g,d.textLabel,d.labelLow,0,this._fuzzyScoreOptions);if(!m)continue;d.score=m}}d.idx=c,d.distance=this._wordDistance.distance(d.position,d.completion),a.push(d),e.push(d.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?C2(e.length-.85,e,(c,d)=>c-d):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return Yu._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return Yu._compareCompletionItems(e,t)}}var Sze=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Au=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},xze=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},zO;class Mf{static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),n=e.getPosition();t.tokenization.tokenizeIfCheap(n.lineNumber);const r=t.getWordAtPosition(n);return!(!r||r.endColumn!==n.column&&r.startColumn+1!==n.column||!isNaN(Number(r.word)))}constructor(e,t,n){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.triggerOptions=n}}function Tze(i,e,t){if(!e.getContextKeyValue(nr.inlineSuggestionVisible.key))return!0;const n=e.getContextKeyValue(nr.suppressSuggestions.key);return n!==void 0?!n:!i.getOption(62).suppressSuggestions}function kze(i,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const n=e.getContextKeyValue(nr.suppressSuggestions.key);return n!==void 0?!n:!i.getOption(62).suppressSuggestions}let $O=zO=class{constructor(e,t,n,r,s,o,a,l,c){this._editor=e,this._editorWorkerService=t,this._clipboardService=n,this._telemetryService=r,this._logService=s,this._contextKeyService=o,this._configurationService=a,this._languageFeaturesService=l,this._envService=c,this._toDispose=new ae,this._triggerCharacterListener=new ae,this._triggerQuickSuggest=new za,this._triggerState=void 0,this._completionDisposables=new ae,this._onDidCancel=new H,this._onDidTrigger=new H,this._onDidSuggest=new H,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new Be(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let d=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{d=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{d=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(u=>{d||this._onCursorChange(u)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{!d&&this._triggerState!==void 0&&this._refilterCompletionItems()})),this._updateTriggerCharacters()}dispose(){an(this._triggerCharacterListener),an([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(90)||!this._editor.hasModel()||!this._editor.getOption(120))return;const e=new Map;for(const n of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(const r of n.triggerCharacters||[]){let s=e.get(r);s||(s=new Set,s.add(tze()),e.set(r,s)),s.add(n)}const t=n=>{var r;if(!kze(this._editor,this._contextKeyService,this._configurationService)||Mf.shouldAutoTrigger(this._editor))return;if(!n){const a=this._editor.getPosition();n=this._editor.getModel().getLineContent(a.lineNumber).substr(0,a.column-1)}let s="";$g(n.charCodeAt(n.length-1))?zi(n.charCodeAt(n.length-2))&&(s=n.substr(n.length-2)):s=n.charAt(n.length-1);const o=e.get(s);if(o){const a=new Map;if(this._completionModel)for(const[l,c]of this._completionModel.getItemsByProvider())o.has(l)||a.set(l,c);this.trigger({auto:!0,triggerKind:1,triggerCharacter:s,retrigger:!!this._completionModel,clipboardText:(r=this._completionModel)===null||r===void 0?void 0:r.clipboardText,completionOptions:{providerFilter:o,providerItemsToReuse:a}})}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>t()))}get state(){return this._triggerState?this._triggerState.auto?2:1:0}cancel(e=!1){var t;this._triggerState!==void 0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)===null||t===void 0||t.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._triggerState!==void 0&&(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._triggerState.auto,retrigger:!0}))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._triggerState===void 0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._triggerState!==void 0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._triggerState===void 0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){var e;i_.isAllOff(this._editor.getOption(88))||this._editor.getOption(117).snippetsPreventQuickSuggestions&&(!((e=yr.get(this._editor))===null||e===void 0)&&e.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._triggerState!==void 0||!Mf.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;const t=this._editor.getModel(),n=this._editor.getPosition(),r=this._editor.getOption(88);if(!i_.isAllOff(r)){if(!i_.isAllOn(r)){t.tokenization.tokenizeIfCheap(n.lineNumber);const s=t.tokenization.getLineTokens(n.lineNumber),o=s.getStandardTokenType(s.findTokenIndexAtOffset(Math.max(n.column-1-1,0)));if(i_.valueFor(r,o)!=="on")return}Tze(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(t)&&this.trigger({auto:!0})}},this._editor.getOption(89)))}_refilterCompletionItems(){dn(this._editor.hasModel()),dn(this._triggerState!==void 0);const e=this._editor.getModel(),t=this._editor.getPosition(),n=new Mf(e,t,Object.assign(Object.assign({},this._triggerState),{refilter:!0}));this._onNewContext(n)}trigger(e){var t,n,r,s,o,a;if(!this._editor.hasModel())return;const l=this._editor.getModel(),c=new Mf(l,this._editor.getPosition(),e);this.cancel(e.retrigger),this._triggerState=e,this._onDidTrigger.fire({auto:e.auto,shy:(t=e.shy)!==null&&t!==void 0?t:!1,position:this._editor.getPosition()}),this._context=c;let d={triggerKind:(n=e.triggerKind)!==null&&n!==void 0?n:0};e.triggerCharacter&&(d={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new vi;const u=this._editor.getOption(111);let h=1;switch(u){case"top":h=0;break;case"bottom":h=2;break}const{itemKind:f,showDeprecated:g}=zO._createSuggestFilter(this._editor),m=new $y(h,(s=(r=e.completionOptions)===null||r===void 0?void 0:r.kindFilter)!==null&&s!==void 0?s:f,(o=e.completionOptions)===null||o===void 0?void 0:o.providerFilter,(a=e.completionOptions)===null||a===void 0?void 0:a.providerItemsToReuse,g),y=bl.create(this._editorWorkerService,this._editor),b=_9(this._languageFeaturesService.completionProvider,l,this._editor.getPosition(),m,d,this._requestToken.token);Promise.all([b,y]).then(([v,C])=>xze(this,void 0,void 0,function*(){var w;if((w=this._requestToken)===null||w===void 0||w.dispose(),!this._editor.hasModel())return;let S=e==null?void 0:e.clipboardText;if(!S&&v.needsClipboard&&(S=yield this._clipboardService.readText()),this._triggerState===void 0)return;const L=this._editor.getModel(),T=new Mf(L,this._editor.getPosition(),e),I=Object.assign(Object.assign({},eI.default),{firstMatchCanBeWeak:!this._editor.getOption(117).matchOnWordStartOnly});if(this._completionModel=new Yu(v.items,this._context.column,{leadingLineContent:T.leadingLineContent,characterCountDelta:T.column-this._context.column},C,this._editor.getOption(117),this._editor.getOption(111),I,S),this._completionDisposables.add(v.disposable),this._onNewContext(T),this._reportDurationsTelemetry(v.durations),!this._envService.isBuilt||this._envService.isExtensionDevelopment)for(const R of v.items)R.isInvalid&&this._logService.warn(`[suggest] did IGNORE invalid completion item from ${R.provider._debugDisplayName}`,R.completion)})).catch(ut)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static _createSuggestFilter(e){const t=new Set;e.getOption(111)==="none"&&t.add(27);const r=e.getOption(117);return r.showMethods||t.add(0),r.showFunctions||t.add(1),r.showConstructors||t.add(2),r.showFields||t.add(3),r.showVariables||t.add(4),r.showClasses||t.add(5),r.showStructs||t.add(6),r.showInterfaces||t.add(7),r.showModules||t.add(8),r.showProperties||t.add(9),r.showEvents||t.add(10),r.showOperators||t.add(11),r.showUnits||t.add(12),r.showValues||t.add(13),r.showConstants||t.add(14),r.showEnums||t.add(15),r.showEnumMembers||t.add(16),r.showKeywords||t.add(17),r.showWords||t.add(18),r.showColors||t.add(19),r.showFiles||t.add(20),r.showReferences||t.add(21),r.showColors||t.add(22),r.showFolders||t.add(23),r.showTypeParameters||t.add(24),r.showSnippets||t.add(27),r.showUsers||t.add(25),r.showIssues||t.add(26),{itemKind:t,showDeprecated:r.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(pn(e.leadingLineContent)!==pn(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){if(Mf.shouldAutoTrigger(this._editor)&&this._context){const n=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:n}})}return}if(e.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&e.leadingWord.word.length!==0){const t=new Map,n=new Set;for(const[r,s]of this._completionModel.getItemsByProvider())s.length>0&&s[0].container.incomplete?n.add(r):t.set(r,s);this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:n,providerItemsToReuse:t}})}else{const t=this._completionModel.lineContext;let n=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){const r=Mf.shouldAutoTrigger(this._editor);if(!this._context){this.cancel();return}if(r&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});return}if(this._context.triggerOptions.auto){this.cancel();return}else if(this._completionModel.lineContext=t,n=this._completionModel.items.length>0,n&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:e.triggerOptions,isFrozen:n})}}}}};$O=zO=Sze([Au(1,Xa),Au(2,xu),Au(3,Wo),Au(4,Vo),Au(5,ot),Au(6,Et),Au(7,Fe),Au(8,V5)],$O);class QI{constructor(e,t){this._disposables=new ae,this._lastOvertyped=[],this._locked=!1,this._disposables.add(e.onWillType(()=>{if(this._locked||!e.hasModel())return;const n=e.getSelections(),r=n.length;let s=!1;for(let a=0;a<r;a++)if(!n[a].isEmpty()){s=!0;break}if(!s){this._lastOvertyped.length!==0&&(this._lastOvertyped.length=0);return}this._lastOvertyped=[];const o=e.getModel();for(let a=0;a<r;a++){const l=n[a];if(o.getValueLengthInRange(l)>QI._maxSelectionLength)return;this._lastOvertyped[a]={value:o.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}})),this._disposables.add(t.onDidTrigger(n=>{this._locked=!0})),this._disposables.add(t.onDidCancel(n=>{this._locked=!1}))}getLastOvertypedInfo(e){if(e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}QI._maxSelectionLength=51200;var Lze=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},CN=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class y9 extends Jg{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=p({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",this._action.label,y9.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return(t=e.getLabel())===null||t===void 0?void 0:t.replace(/\benter\b/gi,"⏎")}}let KO=class{constructor(e,t,n,r,s){this._menuId=t,this._menuService=r,this._contextKeyService=s,this._menuDisposables=new ae,this.element=se(e,ce(".suggest-status-bar"));const o=a=>a instanceof Wa?n.createInstance(y9,a,void 0):void 0;this._leftActions=new fa(this.element,{actionViewItemProvider:o}),this._rightActions=new fa(this.element,{actionViewItemProvider:o}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this._leftActions.dispose(),this._rightActions.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(this._menuId,this._contextKeyService),t=()=>{const n=[],r=[];for(const[s,o]of e.getActions())s==="left"?n.push(...o):r.push(...o);this._leftActions.clear(),this._leftActions.push(n),this._rightActions.clear(),this._rightActions.push(r)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};KO=Lze([CN(2,rt),CN(3,dd),CN(4,ot)],KO);var Dze=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Ize=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function C9(i){return!!i&&!!(i.completion.documentation||i.completion.detail&&i.completion.detail!==i.completion.label)}let qO=class{constructor(e,t){this._editor=e,this._onDidClose=new H,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new H,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new ae,this._renderDisposeable=new ae,this._borderWidth=1,this._size=new Kt(330,0),this.domNode=ce(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(pu,{editor:e}),this._body=ce(".body"),this._scrollbar=new KC(this._body,{alwaysConsumeMouseWheel:!0}),se(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=se(this._body,ce(".header")),this._close=se(this._header,ce("span"+Qe.asCSSSelector(me.close))),this._close.title=p("details.close","Close"),this._type=se(this._header,ce("p.type")),this._docs=se(this._body,ce("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(50)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(50),n=t.getMassagedFontFamily(),r=e.get(118)||t.fontSize,s=e.get(119)||t.lineHeight,o=t.fontWeight,a=`${r}px`,l=`${s}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${s/r}`,this.domNode.style.fontWeight=o,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=n,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){const e=this._editor.getOption(119)||this._editor.getOption(50).lineHeight,t=this._borderWidth,n=t*2;return{lineHeight:e,borderWidth:t,borderHeight:n,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=p("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var n,r;this._renderDisposeable.clear();let{detail:s,documentation:o}=e.completion;if(t){let a="";a+=`score: ${e.score[0]}
`,a+=`prefix: ${(n=e.word)!==null&&n!==void 0?n:"(no prefix)"}
`,a+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,a+=`distance: ${e.distance} (localityBonus-setting)
`,a+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,a+=`commit_chars: ${(r=e.completion.commitCharacters)===null||r===void 0?void 0:r.join("")}
`,o=new Lr().appendCodeblock("empty",a),s=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!C9(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),s){const a=s.length>1e5?`${s.substr(0,1e5)}…`:s;this._type.textContent=a,this._type.title=a,Gs(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(a))}else _r(this._type),this._type.title="",us(this._type),this.domNode.classList.add("no-type");if(_r(this._docs),typeof o=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=o;else if(o){this._docs.classList.add("markdown-docs"),_r(this._docs);const a=this._markdownRenderer.render(o);this._docs.appendChild(a.element),this._renderDisposeable.add(a),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=a=>{a.preventDefault(),a.stopPropagation()},this._close.onclick=a=>{a.preventDefault(),a.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(e,t){const n=new Kt(e,t);Kt.equals(n,this._size)||(this._size=n,qke(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};qO=Dze([Ize(1,rt)],qO);class Rze{constructor(e,t){this.widget=e,this._editor=t,this._disposables=new ae,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new QB,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let n,r,s=0,o=0;this._disposables.add(this._resizable.onDidWillResize(()=>{n=this._topLeft,r=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(n&&r){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(o=r.width-a.dimension.width,l=!0),a.north&&(s=r.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:n.top+s,left:n.left+o})}a.done&&(n=void 0,r=void 0,s=0,o=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(a=this._userSize)!==null&&a!==void 0?a:this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){var n;const r=e.getBoundingClientRect();this._anchorBox=r,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,(n=this._userSize)!==null&&n!==void 0?n:this.widget.size,t)}_placeAtAnchor(e,t,n){var r;const s=q1(this.getDomNode().ownerDocument.body),o=this.widget.getLayoutInfo(),a=new Kt(220,2*o.lineHeight),l=e.top,c=function(){const C=s.width-(e.left+e.width+o.borderWidth+o.horizontalPadding),w=-o.borderWidth+e.left+e.width,S=new Kt(C,s.height-e.top-o.borderHeight-o.verticalPadding),L=S.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding);return{top:l,left:w,fit:C-t.width,maxSizeTop:S,maxSizeBottom:L,minSize:a.with(Math.min(C,a.width))}}(),d=function(){const C=e.left-o.borderWidth-o.horizontalPadding,w=Math.max(o.horizontalPadding,e.left-t.width-o.borderWidth),S=new Kt(C,s.height-e.top-o.borderHeight-o.verticalPadding),L=S.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding);return{top:l,left:w,fit:C-t.width,maxSizeTop:S,maxSizeBottom:L,minSize:a.with(Math.min(C,a.width))}}(),u=function(){const C=e.left,w=-o.borderWidth+e.top+e.height,S=new Kt(e.width-o.borderHeight,s.height-e.top-e.height-o.verticalPadding);return{top:w,left:C,fit:S.height-t.height,maxSizeBottom:S,maxSizeTop:S,minSize:a.with(S.width)}}(),h=[c,d,u],f=(r=h.find(C=>C.fit>=0))!==null&&r!==void 0?r:h.sort((C,w)=>w.fit-C.fit)[0],g=e.top+e.height-o.borderHeight;let m,y=t.height;const b=Math.max(f.maxSizeTop.height,f.maxSizeBottom.height);y>b&&(y=b);let v;n?y<=f.maxSizeTop.height?(m=!0,v=f.maxSizeTop):(m=!1,v=f.maxSizeBottom):y<=f.maxSizeBottom.height?(m=!1,v=f.maxSizeBottom):(m=!0,v=f.maxSizeTop),this._applyTopLeft({left:f.left,top:m?f.top:g-y}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!m,f===c,m,f!==c),this._resizable.minSize=f.minSize,this._resizable.maxSize=v,this._resizable.layout(y,Math.min(v.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}}var Xd;(function(i){i[i.FILE=0]="FILE",i[i.FOLDER=1]="FOLDER",i[i.ROOT_FOLDER=2]="ROOT_FOLDER"})(Xd||(Xd={}));const Eze=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function HS(i,e,t,n){const r=n===Xd.ROOT_FOLDER?["rootfolder-icon"]:n===Xd.FOLDER?["folder-icon"]:["file-icon"];if(t){let s;if(t.scheme===bt.data)s=qh.parseMetaData(t).get(qh.META_DATA_LABEL);else{const o=t.path.match(Eze);o?(s=US(o[2].toLowerCase()),o[1]&&r.push(`${US(o[1].toLowerCase())}-name-dir-icon`)):s=US(t.authority.toLowerCase())}if(n===Xd.FOLDER)r.push(`${s}-name-folder-icon`);else{if(s){if(r.push(`${s}-name-file-icon`),r.push("name-file-icon"),s.length<=255){const a=s.split(".");for(let l=1;l<a.length;l++)r.push(`${a.slice(l).join(".")}-ext-file-icon`)}r.push("ext-file-icon")}const o=Nze(i,e,t);o&&r.push(`${US(o)}-lang-file-icon`)}}return r}function Nze(i,e,t){if(!t)return null;let n=null;if(t.scheme===bt.data){const s=qh.parseMetaData(t).get(qh.META_DATA_MIME);s&&(n=e.getLanguageIdByMimeType(s))}else{const r=i.getModel(t);r&&(n=r.getLanguageId())}return n&&n!==Eo?n:e.guessLanguageIdByFilepathOrFirstLine(t)}function US(i){return i.replace(/[\11\12\14\15\40]/g,"/")}var Aze=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},wN=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Pu;function Nee(i){return`suggest-aria-id:${i}`}const Pze=gi("suggest-more-info",me.chevronRight,p("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),Mze=new(Pu=class{extract(e,t){if(e.textLabel.match(Pu._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(Pu._regexStrict))return t[0]=e.completion.detail,!0;if(typeof e.completion.documentation=="string"){const n=Pu._regexRelaxed.exec(e.completion.documentation);if(n&&(n.index===0||n.index+n[0].length===e.completion.documentation.length))return t[0]=n[0],!0}return!1}},Pu._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,Pu._regexStrict=new RegExp(`^${Pu._regexRelaxed.source}$`,"i"),Pu);let GO=class{constructor(e,t,n,r){this._editor=e,this._modelService=t,this._languageService=n,this._themeService=r,this._onDidToggleDetails=new H,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=new ae,n=e;n.classList.add("show-file-icons");const r=se(e,ce(".icon")),s=se(r,ce("span.colorspan")),o=se(e,ce(".contents")),a=se(o,ce(".main")),l=se(a,ce(".icon-label.codicon")),c=se(a,ce("span.left")),d=se(a,ce("span.right")),u=new Rk(c,{supportHighlights:!0,supportIcons:!0});t.add(u);const h=se(c,ce("span.signature-label")),f=se(c,ce("span.qualifier-label")),g=se(d,ce("span.details-label")),m=se(d,ce("span.readMore"+Qe.asCSSSelector(Pze)));m.title=p("readMore","Read More");const y=()=>{const b=this._editor.getOptions(),v=b.get(50),C=v.getMassagedFontFamily(),w=v.fontFeatureSettings,S=b.get(118)||v.fontSize,L=b.get(119)||v.lineHeight,T=v.fontWeight,I=v.letterSpacing,R=`${S}px`,B=`${L}px`,V=`${I}px`;n.style.fontSize=R,n.style.fontWeight=T,n.style.letterSpacing=V,a.style.fontFamily=C,a.style.fontFeatureSettings=w,a.style.lineHeight=B,r.style.height=B,r.style.width=B,m.style.height=B,m.style.width=B};return y(),t.add(this._editor.onDidChangeConfiguration(b=>{(b.hasChanged(50)||b.hasChanged(118)||b.hasChanged(119))&&y()})),{root:n,left:c,right:d,icon:r,colorspan:s,iconLabel:u,iconContainer:l,parametersLabel:h,qualifierLabel:f,detailsLabel:g,readMore:m,disposables:t}}renderElement(e,t,n){const{completion:r}=e;n.root.id=Nee(t),n.colorspan.style.backgroundColor="";const s={labelEscapeNewLines:!0,matches:JC(e.score)},o=[];if(r.kind===19&&Mze.extract(e,o))n.icon.className="icon customcolor",n.iconContainer.className="icon hide",n.colorspan.style.backgroundColor=o[0];else if(r.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){n.icon.className="icon hide",n.iconContainer.className="icon hide";const a=HS(this._modelService,this._languageService,Ye.from({scheme:"fake",path:e.textLabel}),Xd.FILE),l=HS(this._modelService,this._languageService,Ye.from({scheme:"fake",path:r.detail}),Xd.FILE);s.extraClasses=a.length>l.length?a:l}else r.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(n.icon.className="icon hide",n.iconContainer.className="icon hide",s.extraClasses=[HS(this._modelService,this._languageService,Ye.from({scheme:"fake",path:e.textLabel}),Xd.FOLDER),HS(this._modelService,this._languageService,Ye.from({scheme:"fake",path:r.detail}),Xd.FOLDER)].flat()):(n.icon.className="icon hide",n.iconContainer.className="",n.iconContainer.classList.add("suggest-icon",...Qe.asClassNameArray(P0.toIcon(r.kind))));r.tags&&r.tags.indexOf(1)>=0&&(s.extraClasses=(s.extraClasses||[]).concat(["deprecated"]),s.matches=[]),n.iconLabel.setLabel(e.textLabel,void 0,s),typeof r.label=="string"?(n.parametersLabel.textContent="",n.detailsLabel.textContent=SN(r.detail||""),n.root.classList.add("string-label")):(n.parametersLabel.textContent=SN(r.label.detail||""),n.detailsLabel.textContent=SN(r.label.description||""),n.root.classList.remove("string-label")),this._editor.getOption(117).showInlineDetails?Gs(n.detailsLabel):us(n.detailsLabel),C9(e)?(n.right.classList.add("can-expand-details"),Gs(n.readMore),n.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},n.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(n.right.classList.remove("can-expand-details"),us(n.readMore),n.readMore.onmousedown=null,n.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};GO=Aze([wN(1,zn),wN(2,Fn),wN(3,qi)],GO);function SN(i){return i.replace(/\r\n|\r|\n/g,"")}var Oze=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},jS=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Fze=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Im;P("editorSuggestWidget.background",{dark:si,light:si,hcDark:si,hcLight:si},p("editorSuggestWidgetBackground","Background color of the suggest widget."));P("editorSuggestWidget.border",{dark:Dc,light:Dc,hcDark:Dc,hcLight:Dc},p("editorSuggestWidgetBorder","Border color of the suggest widget."));const zS=P("editorSuggestWidget.foreground",{dark:La,light:La,hcDark:La,hcLight:La},p("editorSuggestWidgetForeground","Foreground color of the suggest widget."));P("editorSuggestWidget.selectedForeground",{dark:fg,light:fg,hcDark:fg,hcLight:fg},p("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget."));P("editorSuggestWidget.selectedIconForeground",{dark:Vm,light:Vm,hcDark:Vm,hcLight:Vm},p("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));const Bze=P("editorSuggestWidget.selectedBackground",{dark:gg,light:gg,hcDark:gg,hcLight:gg},p("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));P("editorSuggestWidget.highlightForeground",{dark:Da,light:Da,hcDark:Da,hcLight:Da},p("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget."));P("editorSuggestWidget.focusHighlightForeground",{dark:Hw,light:Hw,hcDark:Hw,hcLight:Hw},p("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));P("editorSuggestWidgetStatus.foreground",{dark:ze(zS,.5),light:ze(zS,.5),hcDark:ze(zS,.5),hcLight:ze(zS,.5)},p("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));class Wze{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof Jh}`}restore(){var e;const t=(e=this._service.get(this._key,0))!==null&&e!==void 0?e:"";try{const n=JSON.parse(t);if(Kt.is(n))return Kt.lift(n)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}let Gy=Im=class{constructor(e,t,n,r,s){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._pendingLayout=new vr,this._pendingShowDetails=new vr,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new za,this._disposables=new ae,this._onDidSelect=new Ug,this._onDidFocus=new Ug,this._onDidHide=new H,this._onDidShow=new H,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new H,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new QB,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new Vze(this,e),this._persistedSize=new Wze(t,e);class o{constructor(f,g,m=!1,y=!1){this.persistedSize=f,this.currentSize=g,this.persistHeight=m,this.persistWidth=y}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new o(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(h=>{var f,g,m,y;if(this._resize(h.dimension.width,h.dimension.height),a&&(a.persistHeight=a.persistHeight||!!h.north||!!h.south,a.persistWidth=a.persistWidth||!!h.east||!!h.west),!!h.done){if(a){const{itemHeight:b,defaultSize:v}=this.getLayoutInfo(),C=Math.round(b/2);let{width:w,height:S}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-S)<=C)&&(S=(g=(f=a.persistedSize)===null||f===void 0?void 0:f.height)!==null&&g!==void 0?g:v.height),(!a.persistWidth||Math.abs(a.currentSize.width-w)<=C)&&(w=(y=(m=a.persistedSize)===null||m===void 0?void 0:m.width)!==null&&y!==void 0?y:v.width),this._persistedSize.store(new Kt(w,S))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=se(this.element.domNode,ce(".message")),this._listElement=se(this.element.domNode,ce(".tree"));const l=this._disposables.add(s.createInstance(qO,this.editor));l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new Rze(l,this.editor);const c=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(117).showIcons);c();const d=s.createInstance(GO,this.editor);this._disposables.add(d),this._disposables.add(d.onDidToggleDetails(()=>this.toggleDetails())),this._list=new Ga("SuggestWidget",this._listElement,{getHeight:h=>this.getLayoutInfo().itemHeight,getTemplateId:h=>"suggestion"},[d],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>p("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:h=>{let f=h.textLabel;if(typeof h.completion.label!="string"){const{detail:b,description:v}=h.completion.label;b&&v?f=p("label.full","{0} {1}, {2}",f,b,v):b?f=p("label.detail","{0} {1}",f,b):v&&(f=p("label.desc","{0}, {1}",f,v))}if(!h.isResolved||!this._isDetailsVisible())return f;const{documentation:g,detail:m}=h.completion,y=jg("{0}{1}",m||"",g?typeof g=="string"?g:g.value:"");return p("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",f,y)}}}),this._list.style(eb({listInactiveFocusBackground:Bze,listInactiveFocusOutline:Rn})),this._status=s.createInstance(KO,this.element.domNode,Nh);const u=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(117).showStatusBar);u(),this._disposables.add(r.onDidColorThemeChange(h=>this._onThemeChange(h))),this._onThemeChange(r.getColorTheme()),this._disposables.add(this._list.onMouseDown(h=>this._onListMouseDownOrTap(h))),this._disposables.add(this._list.onTap(h=>this._onListMouseDownOrTap(h))),this._disposables.add(this._list.onDidChangeSelection(h=>this._onListSelection(h))),this._disposables.add(this._list.onDidChangeFocus(h=>this._onListFocus(h))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(h=>{h.hasChanged(117)&&(u(),c())})),this._ctxSuggestWidgetVisible=ft.Visible.bindTo(n),this._ctxSuggestWidgetDetailsVisible=ft.DetailsVisible.bindTo(n),this._ctxSuggestWidgetMultipleSuggestions=ft.MultipleSuggestions.bindTo(n),this._ctxSuggestWidgetHasFocusedSuggestion=ft.HasFocusedSuggestion.bindTo(n),this._disposables.add(bi(this._details.widget.domNode,"keydown",h=>{this._onDetailsKeydown.fire(h)})),this._disposables.add(this.editor.onMouseDown(h=>this._onEditorMouseDown(h)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const n=this._completionModel;n&&(this._onDidSelect.fire({item:e,index:t,model:n}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=Rl(e.type)?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);return}if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);const n=e.elements[0],r=e.indexes[0];n!==this._focusedItem&&((t=this._currentSuggestionDetails)===null||t===void 0||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=n,this._list.reveal(r),this._currentSuggestionDetails=Ui(s=>Fze(this,void 0,void 0,function*(){const o=Hh(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250),a=s.onCancellationRequested(()=>o.dispose());try{return yield n.resolve(s)}finally{o.dispose(),a.dispose()}})),this._currentSuggestionDetails.then(()=>{r>=this._list.length||n!==this._list.element(r)||(this._ignoreFocusEvents=!0,this._list.splice(r,1,[n]),this._list.setFocus([r]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:Nee(r)}))}).catch(ut)),this._onDidFocus.fire({item:n,index:r,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:us(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=Im.LOADING_MESSAGE,us(this._listElement,this._status.element),Gs(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,zh(Im.LOADING_MESSAGE);break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=Im.NO_SUGGESTIONS_MESSAGE,us(this._listElement,this._status.element),Gs(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,zh(Im.NO_SUGGESTIONS_MESSAGE);break;case 3:us(this._messageElement),Gs(this._listElement,this._status.element),this._show();break;case 4:us(this._messageElement),Gs(this._listElement,this._status.element),this._show();break;case 5:us(this._messageElement),Gs(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=Hh(()=>this._setState(1),t)))}showSuggestions(e,t,n,r,s){var o,a;if(this._contentWidget.setPosition(this.editor.getPosition()),(o=this._loadingTimeout)===null||o===void 0||o.dispose(),(a=this._currentSuggestionDetails)===null||a===void 0||a.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),n&&this._state!==2&&this._state!==0){this._setState(4);return}const l=this._completionModel.items.length,c=l===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(l>1),c){this._setState(r?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(n?4:3),this._list.reveal(t,0),this._list.setFocus(s?[]:[t])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=LT(()=>{this._pendingLayout.clear(),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")})}focusSelected(){this._list.length>0&&this._list.setFocus([0])}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(C9(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._pendingShowDetails.value=LT(()=>{this._pendingShowDetails.clear(),this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")})}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;this._pendingLayout.clear(),this._pendingShowDetails.clear(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),n=Math.ceil(this.getLayoutInfo().itemHeight*4.3);t&&t.height<n&&this._persistedSize.store(t.with(void 0,n))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&this._details.show(),this._positionDetails())}_layout(e){var t,n,r;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const s=q1(this.element.domNode.ownerDocument.body),o=this.getLayoutInfo();e||(e=o.defaultSize);let a=e.height,l=e.width;if(this._status.element.style.height=`${o.itemHeight}px`,this._state===2||this._state===1)a=o.itemHeight+o.borderHeight,l=o.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new Kt(l,a),this._contentWidget.setPreference(2);else{const c=s.width-o.borderHeight-2*o.horizontalPadding;l>c&&(l=c);const d=this._completionModel?this._completionModel.stats.pLabelLen*o.typicalHalfwidthCharacterWidth:l,u=o.statusBarHeight+this._list.contentHeight+o.borderHeight,h=o.itemHeight+o.statusBarHeight,f=Mi(this.editor.getDomNode()),g=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),m=f.top+g.top+g.height,y=Math.min(s.height-m-o.verticalPadding,u),b=f.top+g.top-o.verticalPadding,v=Math.min(b,u);let C=Math.min(Math.max(v,y)+o.borderHeight,u);a===((t=this._cappedHeight)===null||t===void 0?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<h&&(a=h),a>C&&(a=C);const w=150;a>y||this._forceRenderingAbove&&b>w?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),C=v):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),C=y),this.element.preferredSize=new Kt(d,o.defaultSize.height),this.element.maxSize=new Kt(c,C),this.element.minSize=new Kt(220,h),this._cappedHeight=a===u?{wanted:(r=(n=this._cappedHeight)===null||n===void 0?void 0:n.wanted)!==null&&r!==void 0?r:e.height,capped:a}:void 0}this._resize(l,a)}_resize(e,t){const{width:n,height:r}=this.element.maxSize;e=Math.min(n,e),t=Math.min(r,t);const{statusBarHeight:s}=this.getLayoutInfo();this._list.layout(t-s,e),this._listElement.style.height=`${t-s}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((e=this._contentWidget.getPosition())===null||e===void 0?void 0:e.preference[0])===2)}getLayoutInfo(){const e=this.editor.getOption(50),t=$s(this.editor.getOption(119)||e.lineHeight,8,1e3),n=!this.editor.getOption(117).showStatusBar||this._state===2||this._state===1?0:t,r=this._details.widget.borderWidth,s=2*r;return{itemHeight:t,statusBarHeight:n,borderWidth:r,borderHeight:s,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new Kt(430,n+12*t+s)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};Gy.LOADING_MESSAGE=p("suggestWidget.loading","Loading...");Gy.NO_SUGGESTIONS_MESSAGE=p("suggestWidget.noSuggestions","No suggestions.");Gy=Im=Oze([jS(1,Za),jS(2,ot),jS(3,qi),jS(4,rt)],Gy);class Vze{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:n,horizontalPadding:r}=this._widget.getLayoutInfo();return new Kt(t+2*n+r,e+2*n)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}var Hze=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},vm=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},ZO;class Uze{constructor(e,t){if(this._model=e,this._position=t,e.getLineMaxColumn(t.lineNumber)!==t.column){const r=e.getOffsetAt(t),s=e.getPositionAt(r+1);this._marker=e.deltaDecorations([],[{range:D.fromPositions(t,s),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}let Ra=ZO=class{static get(e){return e.getContribution(ZO.ID)}constructor(e,t,n,r,s,o,a){this._memoryService=t,this._commandService=n,this._contextKeyService=r,this._instantiationService=s,this._logService=o,this._telemetryService=a,this._lineSuffix=new vr,this._toDispose=new ae,this._selectors=new jze(u=>u.priority),this._onWillInsertSuggestItem=new H,this.onWillInsertSuggestItem=this._onWillInsertSuggestItem.event,this.editor=e,this.model=s.createInstance($O,this.editor),this._selectors.register({priority:0,select:(u,h,f)=>this._memoryService.select(u,h,f)});const l=ft.InsertMode.bindTo(r);l.set(e.getOption(117).insertMode),this._toDispose.add(this.model.onDidTrigger(()=>l.set(e.getOption(117).insertMode))),this.widget=this._toDispose.add(new px(()=>{const u=this._instantiationService.createInstance(Gy,this.editor);this._toDispose.add(u),this._toDispose.add(u.onDidSelect(y=>this._insertSuggestion(y,0),this));const h=new yze(this.editor,u,this.model,y=>this._insertSuggestion(y,2));this._toDispose.add(h);const f=ft.MakesTextEdit.bindTo(this._contextKeyService),g=ft.HasInsertAndReplaceRange.bindTo(this._contextKeyService),m=ft.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(st(()=>{f.reset(),g.reset(),m.reset()})),this._toDispose.add(u.onDidFocus(({item:y})=>{const b=this.editor.getPosition(),v=y.editStart.column,C=b.column;let w=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!y.completion.additionalTextEdits&&!(y.completion.insertTextRules&4)&&C-v===y.completion.insertText.length&&(w=this.editor.getModel().getValueInRange({startLineNumber:b.lineNumber,startColumn:v,endLineNumber:b.lineNumber,endColumn:C})!==y.completion.insertText),f.set(w),g.set(!U.equals(y.editInsertEnd,y.editReplaceEnd)),m.set(!!y.provider.resolveCompletionItem||!!y.completion.documentation||y.completion.detail!==y.completion.label)})),this._toDispose.add(u.onDetailsKeyDown(y=>{if(y.toKeyCodeChord().equals(new fu(!0,!1,!1,!1,33))||Ot&&y.toKeyCodeChord().equals(new fu(!1,!1,!1,!0,33))){y.stopPropagation();return}y.toKeyCodeChord().isModifierKey()||this.editor.focus()})),u})),this._overtypingCapturer=this._toDispose.add(new px(()=>this._toDispose.add(new QI(this.editor,this.model)))),this._alternatives=this._toDispose.add(new px(()=>this._toDispose.add(new gp(this.editor,this._contextKeyService)))),this._toDispose.add(s.createInstance(qy,e)),this._toDispose.add(this.model.onDidTrigger(u=>{this.widget.value.showTriggered(u.auto,u.shy?250:50),this._lineSuffix.value=new Uze(this.editor.getModel(),u.position)})),this._toDispose.add(this.model.onDidSuggest(u=>{if(u.triggerOptions.shy)return;let h=-1;for(const g of this._selectors.itemsOrderedByPriorityDesc)if(h=g.select(this.editor.getModel(),this.editor.getPosition(),u.completionModel.items),h!==-1)break;h===-1&&(h=0);let f=!1;if(u.triggerOptions.auto){const g=this.editor.getOption(117);g.selectionMode==="never"||g.selectionMode==="always"?f=g.selectionMode==="never":g.selectionMode==="whenTriggerCharacter"?f=u.triggerOptions.triggerKind!==1:g.selectionMode==="whenQuickSuggestion"&&(f=u.triggerOptions.triggerKind===1&&!u.triggerOptions.refilter)}this.widget.value.showSuggestions(u.completionModel,h,u.isFrozen,u.triggerOptions.auto,f)})),this._toDispose.add(this.model.onDidCancel(u=>{u.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));const c=ft.AcceptSuggestionsOnEnter.bindTo(r),d=()=>{const u=this.editor.getOption(1);c.set(u==="on"||u==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>d())),d()}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose(),this._onWillInsertSuggestItem.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const n=yr.get(this.editor);if(!n)return;this._onWillInsertSuggestItem.fire({item:e.item});const r=this.editor.getModel(),s=r.getAlternativeVersionId(),{item:o}=e,a=[],l=new vi;t&1||this.editor.pushUndoStop();const c=this.getOverwriteInfo(o,!!(t&8));this._memoryService.memorize(r,this.editor.getPosition(),o);const d=o.isResolved;let u=-1,h=-1;if(Array.isArray(o.completion.additionalTextEdits)){this.model.cancel();const g=Hl.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",o.completion.additionalTextEdits.map(m=>jn.replaceMove(D.lift(m.range),m.text))),g.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!d){const g=new qr;let m;const y=r.onDidChangeContent(w=>{if(w.isFlush){l.cancel(),y.dispose();return}for(const S of w.changes){const L=D.getEndPosition(S.range);(!m||U.isBefore(L,m))&&(m=L)}}),b=t;t|=2;let v=!1;const C=this.editor.onWillType(()=>{C.dispose(),v=!0,b&2||this.editor.pushUndoStop()});a.push(o.resolve(l.token).then(()=>{if(!o.completion.additionalTextEdits||l.token.isCancellationRequested)return;if(m&&o.completion.additionalTextEdits.some(S=>U.isBefore(m,D.getStartPosition(S.range))))return!1;v&&this.editor.pushUndoStop();const w=Hl.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",o.completion.additionalTextEdits.map(S=>jn.replaceMove(D.lift(S.range),S.text))),w.restoreRelativeVerticalPositionOfCursor(this.editor),(v||!(b&2))&&this.editor.pushUndoStop(),!0}).then(w=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",g.elapsed(),w),h=w===!0?1:w===!1?0:-2}).finally(()=>{y.dispose(),C.dispose()}))}let{insertText:f}=o.completion;if(o.completion.insertTextRules&4||(f=T1.escape(f)),this.model.cancel(),n.insert(f,{overwriteBefore:c.overwriteBefore,overwriteAfter:c.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(o.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),o.completion.command)if(o.completion.command.id===yw.id)this.model.trigger({auto:!0,retrigger:!0});else{const g=new qr;a.push(this._commandService.executeCommand(o.completion.command.id,...o.completion.command.arguments?[...o.completion.command.arguments]:[]).catch(m=>{o.completion.extensionId?Ii(m):ut(m)}).finally(()=>{u=g.elapsed()}))}t&4&&this._alternatives.value.set(e,g=>{for(l.cancel();r.canUndo();){s!==r.getAlternativeVersionId()&&r.undo(),this._insertSuggestion(g,3|(t&8?8:0));break}}),this._alertCompletionItem(o),Promise.all(a).finally(()=>{this._reportSuggestionAcceptedTelemetry(o,r,d,u,h),this.model.clear(),l.dispose()})}_reportSuggestionAcceptedTelemetry(e,t,n,r,s){var o,a,l;Math.floor(Math.random()*100)!==0&&this._telemetryService.publicLog2("suggest.acceptedSuggestion",{extensionId:(a=(o=e.extensionId)===null||o===void 0?void 0:o.value)!==null&&a!==void 0?a:"unknown",providerId:(l=e.provider._debugDisplayName)!==null&&l!==void 0?l:"unknown",kind:e.completion.kind,basenameHash:rZ(ha(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:ZAe(t.uri),resolveInfo:e.provider.resolveCompletionItem?n?1:0:-1,resolveDuration:e.resolveDuration,commandDuration:r,additionalEditsAsync:s})}getOverwriteInfo(e,t){dn(this.editor.hasModel());let n=this.editor.getOption(117).insertMode==="replace";t&&(n=!n);const r=e.position.column-e.editStart.column,s=(n?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,o=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:r+o,overwriteAfter:s+a}}_alertCompletionItem(e){if(zr(e.completion.additionalTextEdits)){const t=p("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);jr(t)}}triggerSuggest(e,t,n){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,completionOptions:{providerFilter:e,kindFilter:n?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),n=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},r=s=>{if(s.completion.insertTextRules&4||s.completion.additionalTextEdits)return!0;const o=this.editor.getPosition(),a=s.editStart.column,l=o.column;return l-a!==s.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:o.lineNumber,startColumn:a,endLineNumber:o.lineNumber,endColumn:l})!==s.completion.insertText};Re.once(this.model.onDidTrigger)(s=>{const o=[];Re.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{an(o),n()},void 0,o),this.model.onDidSuggest(({completionModel:a})=>{if(an(o),a.items.length===0){n();return}const l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),c=a.items[l];if(!r(c)){n();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:c,model:a},7)},void 0,o)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const n=this.widget.value.getFocusedItem();let r=0;e&&(r|=4),t&&(r|=8),this._insertSuggestion(n,r)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}focusSuggestion(){this.widget.value.focusSelected()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};Ra.ID="editor.contrib.suggestController";Ra=ZO=Hze([vm(1,YI),vm(2,oi),vm(3,ot),vm(4,rt),vm(5,Vo),vm(6,Wo)],Ra);class jze{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,n)=>this.prioritySelector(n)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class yw extends Me{constructor(){super({id:yw.id,label:p("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:re.and(N.writable,N.hasCompletionItemProvider,ft.Visible.toNegated()),kbOpts:{kbExpr:N.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,n){const r=Ra.get(t);if(!r)return;let s;n&&typeof n=="object"&&n.auto===!0&&(s=!0),r.triggerSuggest(void 0,s,void 0)}}yw.id="editor.action.triggerSuggest";$t(Ra.ID,Ra,2);ue(yw);const Mo=100+90,Ts=sr.bindToContribution(Ra.get);ye(new Ts({id:"acceptSelectedSuggestion",precondition:re.and(ft.Visible,ft.HasFocusedSuggestion),handler(i){i.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:re.and(ft.Visible,N.textInputFocus),weight:Mo},{primary:3,kbExpr:re.and(ft.Visible,N.textInputFocus,ft.AcceptSuggestionsOnEnter,ft.MakesTextEdit),weight:Mo}],menuOpts:[{menuId:Nh,title:p("accept.insert","Insert"),group:"left",order:1,when:ft.HasInsertAndReplaceRange.toNegated()},{menuId:Nh,title:p("accept.insert","Insert"),group:"left",order:1,when:re.and(ft.HasInsertAndReplaceRange,ft.InsertMode.isEqualTo("insert"))},{menuId:Nh,title:p("accept.replace","Replace"),group:"left",order:1,when:re.and(ft.HasInsertAndReplaceRange,ft.InsertMode.isEqualTo("replace"))}]}));ye(new Ts({id:"acceptAlternativeSelectedSuggestion",precondition:re.and(ft.Visible,N.textInputFocus,ft.HasFocusedSuggestion),kbOpts:{weight:Mo,kbExpr:N.textInputFocus,primary:1027,secondary:[1026]},handler(i){i.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:Nh,group:"left",order:2,when:re.and(ft.HasInsertAndReplaceRange,ft.InsertMode.isEqualTo("insert")),title:p("accept.replace","Replace")},{menuId:Nh,group:"left",order:2,when:re.and(ft.HasInsertAndReplaceRange,ft.InsertMode.isEqualTo("replace")),title:p("accept.insert","Insert")}]}));Bt.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");ye(new Ts({id:"hideSuggestWidget",precondition:ft.Visible,handler:i=>i.cancelSuggestWidget(),kbOpts:{weight:Mo,kbExpr:N.textInputFocus,primary:9,secondary:[1033]}}));ye(new Ts({id:"selectNextSuggestion",precondition:re.and(ft.Visible,re.or(ft.MultipleSuggestions,ft.HasFocusedSuggestion.negate())),handler:i=>i.selectNextSuggestion(),kbOpts:{weight:Mo,kbExpr:N.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));ye(new Ts({id:"selectNextPageSuggestion",precondition:re.and(ft.Visible,re.or(ft.MultipleSuggestions,ft.HasFocusedSuggestion.negate())),handler:i=>i.selectNextPageSuggestion(),kbOpts:{weight:Mo,kbExpr:N.textInputFocus,primary:12,secondary:[2060]}}));ye(new Ts({id:"selectLastSuggestion",precondition:re.and(ft.Visible,re.or(ft.MultipleSuggestions,ft.HasFocusedSuggestion.negate())),handler:i=>i.selectLastSuggestion()}));ye(new Ts({id:"selectPrevSuggestion",precondition:re.and(ft.Visible,re.or(ft.MultipleSuggestions,ft.HasFocusedSuggestion.negate())),handler:i=>i.selectPrevSuggestion(),kbOpts:{weight:Mo,kbExpr:N.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));ye(new Ts({id:"selectPrevPageSuggestion",precondition:re.and(ft.Visible,re.or(ft.MultipleSuggestions,ft.HasFocusedSuggestion.negate())),handler:i=>i.selectPrevPageSuggestion(),kbOpts:{weight:Mo,kbExpr:N.textInputFocus,primary:11,secondary:[2059]}}));ye(new Ts({id:"selectFirstSuggestion",precondition:re.and(ft.Visible,re.or(ft.MultipleSuggestions,ft.HasFocusedSuggestion.negate())),handler:i=>i.selectFirstSuggestion()}));ye(new Ts({id:"focusSuggestion",precondition:re.and(ft.Visible,ft.HasFocusedSuggestion.negate()),handler:i=>i.focusSuggestion(),kbOpts:{weight:Mo,kbExpr:N.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}}));ye(new Ts({id:"focusAndAcceptSuggestion",precondition:re.and(ft.Visible,ft.HasFocusedSuggestion.negate()),handler:i=>{i.focusSuggestion(),i.acceptSelectedSuggestion(!0,!1)}}));ye(new Ts({id:"toggleSuggestionDetails",precondition:re.and(ft.Visible,ft.HasFocusedSuggestion),handler:i=>i.toggleSuggestionDetails(),kbOpts:{weight:Mo,kbExpr:N.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:Nh,group:"right",order:1,when:re.and(ft.DetailsVisible,ft.CanResolve),title:p("detail.more","show less")},{menuId:Nh,group:"right",order:1,when:re.and(ft.DetailsVisible.toNegated(),ft.CanResolve),title:p("detail.less","show more")}]}));ye(new Ts({id:"toggleExplainMode",precondition:ft.Visible,handler:i=>i.toggleExplainMode(),kbOpts:{weight:100,primary:2138}}));ye(new Ts({id:"toggleSuggestionFocus",precondition:ft.Visible,handler:i=>i.toggleSuggestionFocus(),kbOpts:{weight:Mo,kbExpr:N.textInputFocus,primary:2570,mac:{primary:778}}}));ye(new Ts({id:"insertBestCompletion",precondition:re.and(N.textInputFocus,re.equals("config.editor.tabCompletion","on"),qy.AtEnd,ft.Visible.toNegated(),gp.OtherSuggestions.toNegated(),yr.InSnippetMode.toNegated()),handler:(i,e)=>{i.triggerSuggestAndAcceptBest(gs(e)?Object.assign({fallback:"tab"},e):{fallback:"tab"})},kbOpts:{weight:Mo,primary:2}}));ye(new Ts({id:"insertNextSuggestion",precondition:re.and(N.textInputFocus,re.equals("config.editor.tabCompletion","on"),gp.OtherSuggestions,ft.Visible.toNegated(),yr.InSnippetMode.toNegated()),handler:i=>i.acceptNextSuggestion(),kbOpts:{weight:Mo,kbExpr:N.textInputFocus,primary:2}}));ye(new Ts({id:"insertPrevSuggestion",precondition:re.and(N.textInputFocus,re.equals("config.editor.tabCompletion","on"),gp.OtherSuggestions,ft.Visible.toNegated(),yr.InSnippetMode.toNegated()),handler:i=>i.acceptPrevSuggestion(),kbOpts:{weight:Mo,kbExpr:N.textInputFocus,primary:1026}}));ue(class extends Me{constructor(){super({id:"editor.action.resetSuggestSize",label:p("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(i,e){var t;(t=Ra.get(e))===null||t===void 0||t.resetWidgetSize()}});class zze extends q{get selectedItem(){return this._selectedItem}constructor(e,t,n,r){super(),this.editor=e,this.suggestControllerPreselector=t,this.checkModelVersion=n,this.onWillAccept=r,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this._selectedItem=Tn(this,void 0),this._register(e.onKeyDown(o=>{o.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(o=>{o.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const s=Ra.get(this.editor);if(s){this._register(s.registerSelector({priority:100,select:(l,c,d)=>{var u;Hn(b=>this.checkModelVersion(b));const h=this.editor.getModel();if(!h)return-1;const f=(u=this.suggestControllerPreselector())===null||u===void 0?void 0:u.removeCommonPrefix(h);if(!f)return-1;const g=U.lift(c),m=d.map((b,v)=>{const w=s0.fromSuggestion(s,h,g,b,this.isShiftKeyPressed).toSingleTextEdit().removeCommonPrefix(h),S=f.augments(w);return{index:v,valid:S,prefixLength:w.text.length,suggestItem:b}}).filter(b=>b&&b.valid&&b.prefixLength>0),y=aZ(m,na(b=>b.prefixLength,Qd));return y?y.index:-1}}));let o=!1;const a=()=>{o||(o=!0,this._register(s.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(s.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.update(!1)})),this._register(s.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(Re.once(s.model.onDidTrigger)(l=>{a()})),this._register(s.onWillInsertSuggestItem(l=>{const c=this.editor.getPosition(),d=this.editor.getModel();if(!c||!d)return;const u=s0.fromSuggestion(s,d,c,l.item,this.isShiftKeyPressed);this.onWillAccept(u)}))}this.update(this._isActive)}update(e){const t=this.getSuggestItemInfo();(this._isActive!==e||!$ze(this._currentSuggestItemInfo,t))&&(this._isActive=e,this._currentSuggestItemInfo=t,Hn(n=>{this.checkModelVersion(n),this._selectedItem.set(this._isActive?this._currentSuggestItemInfo:void 0,n)}))}getSuggestItemInfo(){const e=Ra.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem(),n=this.editor.getPosition(),r=this.editor.getModel();if(!(!t||!n||!r))return s0.fromSuggestion(e,r,n,t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=Ra.get(this.editor);e==null||e.stopForceRenderingAbove()}forceRenderingAbove(){const e=Ra.get(this.editor);e==null||e.forceRenderingAbove()}}class s0{static fromSuggestion(e,t,n,r,s){let{insertText:o}=r.completion,a=!1;if(r.completion.insertTextRules&4){const c=new T1().parse(o);c.children.length<100&&cL.adjustWhitespace(t,n,!0,c),o=c.toString(),a=!0}const l=e.getOverwriteInfo(r,s);return new s0(D.fromPositions(n.delta(0,-l.overwriteBefore),n.delta(0,Math.max(l.overwriteAfter,0))),o,r.completion.kind,a)}constructor(e,t,n,r){this.range=e,this.insertText=t,this.completionItemKind=n,this.isSnippetText=r}equals(e){return this.range.equalsRange(e.range)&&this.insertText===e.insertText&&this.completionItemKind===e.completionItemKind&&this.isSnippetText===e.isSnippetText}toSelectedSuggestionInfo(){return new nG(this.range,this.insertText,this.completionItemKind,this.isSnippetText)}toSingleTextEdit(){return new k1(this.range,this.insertText)}}function $ze(i,e){return i===e?!0:!i||!e?!1:i.equals(e)}var Kze=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Mu=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},XO;let Oo=XO=class extends q{static get(e){return e.getContribution(XO.ID)}constructor(e,t,n,r,s,o,a,l,c){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=n,this.configurationService=r,this.commandService=s,this.debounceService=o,this.languageFeaturesService=a,this.audioCueService=l,this._keybindingService=c,this.model=Pk("inlineCompletionModel",void 0),this.textModelVersionId=Tn(this,-1),this.cursorPosition=Tn(this,new U(1,1)),this.suggestWidgetAdaptor=this._register(new zze(this.editor,()=>{var h,f;return(f=(h=this.model.get())===null||h===void 0?void 0:h.selectedInlineCompletion.get())===null||f===void 0?void 0:f.toSingleTextEdit(void 0)},h=>this.updateObservables(h,mo.Other),h=>{Hn(f=>{var g;this.updateObservables(f,mo.Other),(g=this.model.get())===null||g===void 0||g.handleSuggestAccepted(h)})})),this._enabled=mr(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).enabled),this.ghostTextWidget=this._register(this.instantiationService.createInstance(VO,this.editor,{ghostText:this.model.map((h,f)=>h==null?void 0:h.ghostText.read(f)),minReservedLineCount:Mk(0),targetTextModel:this.model.map(h=>h==null?void 0:h.textModel)})),this._debounceValue=this.debounceService.for(this.languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this._register(new nr(this.contextKeyService,this.model)),this._register(Re.runAndSubscribe(e.onDidChangeModel,()=>Hn(h=>{this.model.set(void 0,h),this.updateObservables(h,mo.Other);const f=e.getModel();if(f){const g=t.createInstance(UO,f,this.suggestWidgetAdaptor.selectedItem,this.cursorPosition,this.textModelVersionId,this._debounceValue,mr(e.onDidChangeConfiguration,()=>e.getOption(117).preview),mr(e.onDidChangeConfiguration,()=>e.getOption(117).previewMode),mr(e.onDidChangeConfiguration,()=>e.getOption(62).mode),this._enabled);this.model.set(g,h)}})));const d=h=>{var f;return h.isUndoing?mo.Undo:h.isRedoing?mo.Redo:!((f=this.model.get())===null||f===void 0)&&f.isAcceptingPartially?mo.AcceptWord:mo.Other};this._register(e.onDidChangeModelContent(h=>Hn(f=>this.updateObservables(f,d(h))))),this._register(e.onDidChangeCursorPosition(h=>Hn(f=>{var g;this.updateObservables(f,mo.Other),(h.reason===3||h.source==="api")&&((g=this.model.get())===null||g===void 0||g.stop(f))}))),this._register(e.onDidType(()=>Hn(h=>{var f;this.updateObservables(h,mo.Other),this._enabled.get()&&((f=this.model.get())===null||f===void 0||f.trigger(h))}))),this._register(this.commandService.onDidExecuteCommand(h=>{new Set([C_.Tab.id,C_.DeleteLeft.id,C_.DeleteRight.id,$J,"acceptSelectedSuggestion"]).has(h.commandId)&&e.hasTextFocus()&&this._enabled.get()&&Hn(g=>{var m;(m=this.model.get())===null||m===void 0||m.trigger(g)})})),this._register(this.editor.onDidBlurEditorWidget(()=>{this.contextKeyService.getContextKeyValue("accessibleViewIsShown")||this.configurationService.getValue("editor.inlineSuggest.keepOnBlur")||e.getOption(62).keepOnBlur||rf.dropDownVisible||Hn(h=>{var f;(f=this.model.get())===null||f===void 0||f.stop(h)})})),this._register(Cn(h=>{var f;const g=(f=this.model.read(h))===null||f===void 0?void 0:f.state.read(h);g!=null&&g.suggestItem?g.ghostText.lineCount>=2&&this.suggestWidgetAdaptor.forceRenderingAbove():this.suggestWidgetAdaptor.stopForceRenderingAbove()})),this._register(st(()=>{this.suggestWidgetAdaptor.stopForceRenderingAbove()}));let u;this._register(Cn(h=>{const f=this.model.read(h),g=f==null?void 0:f.state.read(h);if(!f||!g||!g.inlineCompletion){u=void 0;return}if(g.inlineCompletion.semanticId!==u){u=g.inlineCompletion.semanticId;const m=f.textModel.getLineContent(g.ghostText.lineNumber);this.audioCueService.playAudioCue(Ut.inlineSuggestion).then(()=>{this.editor.getOption(8)&&this.provideScreenReaderUpdate(g.ghostText.renderForScreenReader(m))})}})),this._register(new _O(this.editor,this.model,this.instantiationService)),this._register(this.configurationService.onDidChangeConfiguration(h=>{h.affectsConfiguration("accessibility.verbosity.inlineCompletions")&&this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this.configurationService.getValue("accessibility.verbosity.inlineCompletions")})})),this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this.configurationService.getValue("accessibility.verbosity.inlineCompletions")})}provideScreenReaderUpdate(e){const t=this.contextKeyService.getContextKeyValue("accessibleViewIsShown"),n=this._keybindingService.lookupKeybinding("editor.action.accessibleView");let r;!t&&n&&this.editor.getOption(147)&&(r=p("showAccessibleViewHint","Inspect this in the accessible view ({0})",n.getAriaLabel())),jr(r?e+", "+r:e)}updateObservables(e,t){var n,r;const s=this.editor.getModel();this.textModelVersionId.set((n=s==null?void 0:s.getVersionId())!==null&&n!==void 0?n:-1,e,t),this.cursorPosition.set((r=this.editor.getPosition())!==null&&r!==void 0?r:new U(1,1),e)}shouldShowHoverAt(e){var t;const n=(t=this.model.get())===null||t===void 0?void 0:t.ghostText.get();return n?n.parts.some(r=>e.containsPosition(new U(n.lineNumber,r.column))):!1}shouldShowHoverAtViewZone(e){return this.ghostTextWidget.ownsViewZone(e)}};Oo.ID="editor.contrib.inlineCompletionsController";Oo=XO=Kze([Mu(1,rt),Mu(2,ot),Mu(3,Et),Mu(4,oi),Mu(5,pa),Mu(6,Fe),Mu(7,ow),Mu(8,bn)],Oo);var Sf=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class JI extends Me{constructor(){super({id:JI.ID,label:p("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:re.and(N.writable,nr.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}})}run(e,t){var n;return Sf(this,void 0,void 0,function*(){const r=Oo.get(t);(n=r==null?void 0:r.model.get())===null||n===void 0||n.next()})}}JI.ID=qJ;class eR extends Me{constructor(){super({id:eR.ID,label:p("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:re.and(N.writable,nr.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}})}run(e,t){var n;return Sf(this,void 0,void 0,function*(){const r=Oo.get(t);(n=r==null?void 0:r.model.get())===null||n===void 0||n.previous()})}}eR.ID=KJ;class qze extends Me{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:p("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:N.writable})}run(e,t){var n;return Sf(this,void 0,void 0,function*(){const r=Oo.get(t);(n=r==null?void 0:r.model.get())===null||n===void 0||n.triggerExplicitly()})}}class Gze extends Me{constructor(){super({id:"editor.action.inlineSuggest.acceptNextWord",label:p("action.inlineSuggest.acceptNextWord","Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:re.and(N.writable,nr.inlineSuggestionVisible),kbOpts:{weight:100+1,primary:2065,kbExpr:re.and(N.writable,nr.inlineSuggestionVisible)},menuOpts:[{menuId:E.InlineSuggestionToolbar,title:p("acceptWord","Accept Word"),group:"primary",order:2}]})}run(e,t){var n;return Sf(this,void 0,void 0,function*(){const r=Oo.get(t);yield(n=r==null?void 0:r.model.get())===null||n===void 0?void 0:n.acceptNextWord(r.editor)})}}class Zze extends Me{constructor(){super({id:"editor.action.inlineSuggest.acceptNextLine",label:p("action.inlineSuggest.acceptNextLine","Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:re.and(N.writable,nr.inlineSuggestionVisible),kbOpts:{weight:100+1},menuOpts:[{menuId:E.InlineSuggestionToolbar,title:p("acceptLine","Accept Line"),group:"secondary",order:2}]})}run(e,t){var n;return Sf(this,void 0,void 0,function*(){const r=Oo.get(t);yield(n=r==null?void 0:r.model.get())===null||n===void 0?void 0:n.acceptNextLine(r.editor)})}}class Xze extends Me{constructor(){super({id:$J,label:p("action.inlineSuggest.accept","Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:nr.inlineSuggestionVisible,menuOpts:[{menuId:E.InlineSuggestionToolbar,title:p("accept","Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:re.and(nr.inlineSuggestionVisible,N.tabMovesFocus.toNegated(),nr.inlineSuggestionHasIndentationLessThanTabSize,ft.Visible.toNegated(),N.hoverFocused.toNegated())}})}run(e,t){var n;return Sf(this,void 0,void 0,function*(){const r=Oo.get(t);r&&((n=r.model.get())===null||n===void 0||n.accept(r.editor),r.editor.focus())})}}class tR extends Me{constructor(){super({id:tR.ID,label:p("action.inlineSuggest.hide","Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:nr.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})}run(e,t){return Sf(this,void 0,void 0,function*(){const n=Oo.get(t);Hn(r=>{var s;(s=n==null?void 0:n.model.get())===null||s===void 0||s.stop(r)})})}}tR.ID="editor.action.inlineSuggest.hide";class nR extends Bo{constructor(){super({id:nR.ID,title:p("action.inlineSuggest.alwaysShowToolbar","Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:E.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:re.equals("config.editor.inlineSuggest.showToolbar","always")})}run(e,t){return Sf(this,void 0,void 0,function*(){const n=e.get(Et),s=n.getValue("editor.inlineSuggest.showToolbar")==="always"?"onHover":"always";n.updateValue("editor.inlineSuggest.showToolbar",s)})}}nR.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar";var Yze=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Gb=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class Qze{constructor(e,t,n){this.owner=e,this.range=t,this.controller=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let YO=class{constructor(e,t,n,r,s,o){this._editor=e,this._languageService=t,this._openerService=n,this.accessibilityService=r,this._instantiationService=s,this._telemetryService=o,this.hoverOrdinal=4}suggestHoverAnchor(e){const t=Oo.get(this._editor);if(!t)return null;const n=e.target;if(n.type===8){const r=n.detail;if(t.shouldShowHoverAtViewZone(r.viewZoneId))return new Vx(1e3,this,D.fromPositions(this._editor.getModel().validatePosition(r.positionBefore||r.position)),e.event.posx,e.event.posy,!1)}return n.type===7&&t.shouldShowHoverAt(n.range)?new Vx(1e3,this,n.range,e.event.posx,e.event.posy,!1):n.type===6&&n.detail.mightBeForeignElement&&t.shouldShowHoverAt(n.range)?new Vx(1e3,this,n.range,e.event.posx,e.event.posy,!1):null}computeSync(e,t){if(this._editor.getOption(62).showToolbar==="always")return[];const n=Oo.get(this._editor);return n&&n.shouldShowHoverAt(e.range)?[new Qze(this,e.range,n)]:[]}renderHoverParts(e,t){const n=new ae,r=t[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&!this._editor.getOption(8)&&this.renderScreenReaderText(e,r,n);const s=r.controller.model.get(),o=this._instantiationService.createInstance(rf,this._editor,!1,Mk(null),s.selectedInlineCompletionIndex,s.inlineCompletionsCount,s.selectedInlineCompletion.map(a=>{var l;return(l=a==null?void 0:a.inlineCompletion.source.inlineCompletions.commands)!==null&&l!==void 0?l:[]}));return e.fragment.appendChild(o.getDomNode()),s.triggerExplicitly(),n.add(o),n}renderScreenReaderText(e,t,n){const r=ce,s=r("div.hover-row.markdown-hover"),o=se(s,r("div.hover-contents",{"aria-live":"assertive"})),a=n.add(new pu({editor:this._editor},this._languageService,this._openerService)),l=c=>{n.add(a.onDidRenderAsync(()=>{o.className="hover-contents code-hover-contents",e.onContentsChanged()}));const d=p("inlineSuggestionFollows","Suggestion:"),u=n.add(a.render(new Lr().appendText(d).appendCodeblock("text",c)));o.replaceChildren(u.element)};n.add(Cn(c=>{var d;const u=(d=t.controller.model.read(c))===null||d===void 0?void 0:d.ghostText.read(c);if(u){const h=this._editor.getModel().getLineContent(u.lineNumber);l(u.renderForScreenReader(h))}else br(o)})),e.fragment.appendChild(s)}};YO=Yze([Gb(1,Fn),Gb(2,lo),Gb(3,yu),Gb(4,rt),Gb(5,Wo)],YO);$t(Oo.ID,Oo,3);ue(qze);ue(JI);ue(eR);ue(Gze);ue(Zze);ue(Xze);ue(tR);Nn(nR);Gp.register(YO);function zs(i,e){let t=0;for(let n=0;n<i.length;n++)i.charAt(n)==="	"?t+=e:t++;return t}function o0(i,e,t){i=i<0?0:i;let n="";if(!t){const r=Math.floor(i/e);i=i%e;for(let s=0;s<r;s++)n+="	"}for(let r=0;r<i;r++)n+=" ";return n}var Jze=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},e$e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function Aee(i,e,t,n,r){if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return[];const s=e.getLanguageConfiguration(i.getLanguageId()).indentationRules;if(!s)return[];for(n=Math.min(n,i.getLineCount());t<=n&&s.unIndentedLinePattern;){const y=i.getLineContent(t);if(!s.unIndentedLinePattern.test(y))break;t++}if(t>n-1)return[];const{tabSize:o,indentSize:a,insertSpaces:l}=i.getOptions(),c=(y,b)=>(b=b||1,Xo.shiftIndent(y,y.length+b,o,a,l)),d=(y,b)=>(b=b||1,Xo.unshiftIndent(y,y.length+b,o,a,l)),u=[];let h;const f=i.getLineContent(t);let g=f;if(r!=null){h=r;const y=pn(f);g=h+f.substring(y.length),s.decreaseIndentPattern&&s.decreaseIndentPattern.test(g)&&(h=d(h),g=h+f.substring(y.length)),f!==g&&u.push(jn.replaceMove(new Be(t,1,t,y.length+1),$T(h,a,l)))}else h=pn(f);let m=h;s.increaseIndentPattern&&s.increaseIndentPattern.test(g)?(m=c(m),h=c(h)):s.indentNextLinePattern&&s.indentNextLinePattern.test(g)&&(m=c(m)),t++;for(let y=t;y<=n;y++){const b=i.getLineContent(y),v=pn(b),C=m+b.substring(v.length);s.decreaseIndentPattern&&s.decreaseIndentPattern.test(C)&&(m=d(m),h=d(h)),v!==m&&u.push(jn.replaceMove(new Be(y,1,y,v.length+1),$T(m,a,l))),!(s.unIndentedLinePattern&&s.unIndentedLinePattern.test(b))&&(s.increaseIndentPattern&&s.increaseIndentPattern.test(C)?(h=c(h),m=h):s.indentNextLinePattern&&s.indentNextLinePattern.test(C)?m=c(m):m=h)}return u}class iR extends Me{constructor(){super({id:iR.ID,label:p("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:N.writable})}run(e,t){const n=t.getModel();if(!n)return;const r=n.getOptions(),s=t.getSelection();if(!s)return;const o=new r$e(s,r.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop(),n.updateOptions({insertSpaces:!0})}}iR.ID="editor.action.indentationToSpaces";class rR extends Me{constructor(){super({id:rR.ID,label:p("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:N.writable})}run(e,t){const n=t.getModel();if(!n)return;const r=n.getOptions(),s=t.getSelection();if(!s)return;const o=new s$e(s,r.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop(),n.updateOptions({insertSpaces:!1})}}rR.ID="editor.action.indentationToTabs";class w9 extends Me{constructor(e,t,n){super(n),this.insertSpaces=e,this.displaySizeOnly=t}run(e,t){const n=e.get(Xl),r=e.get(zn),s=t.getModel();if(!s)return;const o=r.getCreationOptions(s.getLanguageId(),s.uri,s.isForSimpleWidget),a=s.getOptions(),l=[1,2,3,4,5,6,7,8].map(d=>({id:d.toString(),label:d.toString(),description:d===o.tabSize&&d===a.tabSize?p("configuredTabSize","Configured Tab Size"):d===o.tabSize?p("defaultTabSize","Default Tab Size"):d===a.tabSize?p("currentTabSize","Current Tab Size"):void 0})),c=Math.min(s.getOptions().tabSize-1,7);setTimeout(()=>{n.pick(l,{placeHolder:p({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:l[c]}).then(d=>{if(d&&s&&!s.isDisposed()){const u=parseInt(d.label,10);this.displaySizeOnly?s.updateOptions({tabSize:u}):s.updateOptions({tabSize:u,indentSize:u,insertSpaces:this.insertSpaces})}})},50)}}class sR extends w9{constructor(){super(!1,!1,{id:sR.ID,label:p("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}sR.ID="editor.action.indentUsingTabs";class oR extends w9{constructor(){super(!0,!1,{id:oR.ID,label:p("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}oR.ID="editor.action.indentUsingSpaces";class aR extends w9{constructor(){super(!0,!0,{id:aR.ID,label:p("changeTabDisplaySize","Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0})}}aR.ID="editor.action.changeTabDisplaySize";class lR extends Me{constructor(){super({id:lR.ID,label:p("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,t){const n=e.get(zn),r=t.getModel();if(!r)return;const s=n.getCreationOptions(r.getLanguageId(),r.uri,r.isForSimpleWidget);r.detectIndentation(s.insertSpaces,s.tabSize)}}lR.ID="editor.action.detectIndentation";class t$e extends Me{constructor(){super({id:"editor.action.reindentlines",label:p("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:N.writable})}run(e,t){const n=e.get(wn),r=t.getModel();if(!r)return;const s=Aee(r,n,1,r.getLineCount());s.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop())}}class n$e extends Me{constructor(){super({id:"editor.action.reindentselectedlines",label:p("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:N.writable})}run(e,t){const n=e.get(wn),r=t.getModel();if(!r)return;const s=t.getSelections();if(s===null)return;const o=[];for(const a of s){let l=a.startLineNumber,c=a.endLineNumber;if(l!==c&&a.endColumn===1&&c--,l===1){if(l===c)continue}else l--;const d=Aee(r,n,l,c);o.push(...d)}o.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop())}}class i$e{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(const n of e)n.range&&typeof n.text=="string"&&this._edits.push(n)}getEditOperations(e,t){for(const r of this._edits)t.addEditOperation(D.lift(r.range),r.text);let n=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),n||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}let Zy=class{constructor(e,t){this.editor=e,this._languageConfigurationService=t,this.callOnDispose=new ae,this.callOnModel=new ae,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(12)<4||this.editor.getOption(55))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){const t=this.editor.getSelections();if(t===null||t.length>1)return;const n=this.editor.getModel();if(!n||!n.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;const r=this.editor.getOption(12),{tabSize:s,indentSize:o,insertSpaces:a}=n.getOptions(),l=[],c={shiftIndent:f=>Xo.shiftIndent(f,f.length+1,s,o,a),unshiftIndent:f=>Xo.unshiftIndent(f,f.length+1,s,o,a)};let d=e.startLineNumber;for(;d<=e.endLineNumber;){if(this.shouldIgnoreLine(n,d)){d++;continue}break}if(d>e.endLineNumber)return;let u=n.getLineContent(d);if(!/\S/.test(u.substring(0,e.startColumn-1))){const f=Bv(r,n,n.getLanguageId(),d,c,this._languageConfigurationService);if(f!==null){const g=pn(u),m=zs(f,s),y=zs(g,s);if(m!==y){const b=o0(m,s,a);l.push({range:new D(d,1,d,g.length+1),text:b}),u=b+u.substr(g.length)}else{const b=ZZ(n,d,this._languageConfigurationService);if(b===0||b===8)return}}}const h=d;for(;d<e.endLineNumber;){if(!/\S/.test(n.getLineContent(d+1))){d++;continue}break}if(d!==e.endLineNumber){const g=Bv(r,{tokenization:{getLineTokens:m=>n.tokenization.getLineTokens(m),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(m,y)=>n.getLanguageIdAtPosition(m,y)},getLineContent:m=>m===h?u:n.getLineContent(m)},n.getLanguageId(),d+1,c,this._languageConfigurationService);if(g!==null){const m=zs(g,s),y=zs(pn(n.getLineContent(d+1)),s);if(m!==y){const b=m-y;for(let v=d+1;v<=e.endLineNumber;v++){const C=n.getLineContent(v),w=pn(C),L=zs(w,s)+b,T=o0(L,s,a);T!==w&&l.push({range:new D(v,1,v,w.length+1),text:T})}}}}if(l.length>0){this.editor.pushUndoStop();const f=new i$e(l,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",f),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.tokenization.forceTokenization(t);const n=e.getLineFirstNonWhitespaceColumn(t);if(n===0)return!0;const r=e.tokenization.getLineTokens(t);if(r.getCount()>0){const s=r.findTokenIndexAtOffset(n);if(s>=0&&r.getStandardTokenType(s)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}};Zy.ID="editor.contrib.autoIndentOnPaste";Zy=Jze([e$e(1,wn)],Zy);function Pee(i,e,t,n){if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;let r="";for(let o=0;o<t;o++)r+=" ";const s=new RegExp(r,"gi");for(let o=1,a=i.getLineCount();o<=a;o++){let l=i.getLineFirstNonWhitespaceColumn(o);if(l===0&&(l=i.getLineMaxColumn(o)),l===1)continue;const c=new D(o,1,o,l),d=i.getValueInRange(c),u=n?d.replace(/\t/ig,r):d.replace(s,"	");e.addEditOperation(c,u)}}class r$e{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),Pee(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class s$e{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),Pee(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}$t(Zy.ID,Zy,2);ue(iR);ue(rR);ue(sR);ue(oR);ue(aR);ue(lR);ue(t$e);ue(n$e);var dL=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class Mee{constructor(e,t){this.range=e,this.direction=t}}class S9{constructor(e,t,n){this.hint=e,this.anchor=t,this.provider=n,this._isResolved=!1}with(e){const t=new S9(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}resolve(e){return dL(this,void 0,void 0,function*(){if(typeof this.provider.resolveInlayHint=="function"){if(this._currentResolve)return yield this._currentResolve,e.isCancellationRequested?void 0:this.resolve(e);this._isResolved||(this._currentResolve=this._doResolve(e).finally(()=>this._currentResolve=void 0)),yield this._currentResolve}})}_doResolve(e){var t,n;return dL(this,void 0,void 0,function*(){try{const r=yield Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=(t=r==null?void 0:r.tooltip)!==null&&t!==void 0?t:this.hint.tooltip,this.hint.label=(n=r==null?void 0:r.label)!==null&&n!==void 0?n:this.hint.label,this._isResolved=!0}catch(r){Ii(r),this._isResolved=!1}})}}class Xy{static create(e,t,n,r){return dL(this,void 0,void 0,function*(){const s=[],o=e.ordered(t).reverse().map(a=>n.map(l=>dL(this,void 0,void 0,function*(){try{const c=yield a.provideInlayHints(t,l,r);c!=null&&c.hints.length&&s.push([c,a])}catch(c){Ii(c)}})));if(yield Promise.all(o.flat()),r.isCancellationRequested||t.isDisposed())throw new pf;return new Xy(n,s,t)})}constructor(e,t,n){this._disposables=new ae,this.ranges=e,this.provider=new Set;const r=[];for(const[s,o]of t){this._disposables.add(s),this.provider.add(o);for(const a of s.hints){const l=n.validatePosition(a.position);let c="before";const d=Xy._getRangeAtPosition(n,l);let u;d.getStartPosition().isBefore(l)?(u=D.fromPositions(d.getStartPosition(),l),c="after"):(u=D.fromPositions(l,d.getEndPosition()),c="before"),r.push(new S9(a,new Mee(u,c),o))}}this.items=r.sort((s,o)=>U.compare(s.hint.position,o.hint.position))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){const n=t.lineNumber,r=e.getWordAtPosition(t);if(r)return new D(n,r.startColumn,n,r.endColumn);e.tokenization.tokenizeIfCheap(n);const s=e.tokenization.getLineTokens(n),o=t.column-1,a=s.findTokenIndexAtOffset(o);let l=s.getStartOffset(a),c=s.getEndOffset(a);return c-l===1&&(l===o&&a>1?(l=s.getStartOffset(a-1),c=s.getEndOffset(a-1)):c===o&&a<s.getCount()-1&&(l=s.getStartOffset(a+1),c=s.getEndOffset(a+1))),new D(n,l+1,n,c+1)}}function o$e(i){return Ye.from({scheme:bt.command,path:i.id,query:i.arguments&&encodeURIComponent(JSON.stringify(i.arguments))}).toString()}var a0=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function a$e(i,e,t,n){var r;return a0(this,void 0,void 0,function*(){const s=i.get(Vs),o=i.get(qa),a=i.get(oi),l=i.get(rt),c=i.get(wi);if(yield n.item.resolve(xt.None),!n.part.location)return;const d=n.part.location,u=[],h=new Set(pr.getMenuItems(E.EditorContext).map(g=>Mm(g)?g.command.id:VI()));for(const g of ts.all())h.has(g.desc.id)&&u.push(new vs(g.desc.id,Wa.label(g.desc,{renderShortTitle:!0}),void 0,!0,()=>a0(this,void 0,void 0,function*(){const m=yield s.createModelReference(d.uri);try{const y=new v1(m.object.textEditorModel,D.getStartPosition(d.range)),b=n.item.anchor.range;yield l.invokeFunction(g.runEditorCommand.bind(g),e,y,b)}finally{m.dispose()}})));if(n.part.command){const{command:g}=n.part;u.push(new rr),u.push(new vs(g.id,g.title,void 0,!0,()=>a0(this,void 0,void 0,function*(){var m;try{yield a.executeCommand(g.id,...(m=g.arguments)!==null&&m!==void 0?m:[])}catch(y){c.notify({severity:GD.Error,source:n.item.provider.displayName,message:y})}})))}const f=e.getOption(126);o.showContextMenu({domForShadowRoot:f&&(r=e.getDomNode())!==null&&r!==void 0?r:void 0,getAnchor:()=>{const g=Mi(t);return{x:g.left,y:g.top+g.height+8}},getActions:()=>u,onHide:()=>{e.focus()},autoSelectFirstItem:!0})})}function Oee(i,e,t,n){return a0(this,void 0,void 0,function*(){const s=yield i.get(Vs).createModelReference(n.uri);yield t.invokeWithinContext(o=>a0(this,void 0,void 0,function*(){const a=e.hasSideBySideModifier,l=o.get(ot),c=Bs.inPeekEditor.getValue(l),d=!a&&t.getOption(87)&&!c;return new bw({openToSide:a,openInPeek:d,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(o,new v1(s.object.textEditorModel,D.getStartPosition(n.range)),D.lift(n.range))})),s.dispose()})}var l$e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},ym=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Rm=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},zx;class uL{constructor(){this._entries=new bf(50)}get(e){const t=uL._key(e);return this._entries.get(t)}set(e,t){const n=uL._key(e);this._entries.set(n,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}const Fee=Lt("IInlayHintsCache");Wt(Fee,uL,1);class QO{constructor(e,t){this.item=e,this.index=t}get part(){const e=this.item.hint.label;return typeof e=="string"?{label:e}:e[this.index]}}class c$e{constructor(e,t){this.part=e,this.hasTriggerModifier=t}}let pp=zx=class{static get(e){var t;return(t=e.getContribution(zx.ID))!==null&&t!==void 0?t:void 0}constructor(e,t,n,r,s,o,a){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=r,this._commandService=s,this._notificationService=o,this._instaService=a,this._disposables=new ae,this._sessionDisposables=new ae,this._decorationsMetadata=new Map,this._ruleFactory=new jC(this._editor),this._activeRenderMode=0,this._debounceInfo=n.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(l=>{l.hasChanged(139)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();const e=this._editor.getOption(139);if(e.enabled==="off")return;const t=this._editor.getModel();if(!t||!this._languageFeaturesService.inlayHintsProvider.has(t))return;const n=this._inlayHintsCache.get(t);n&&this._updateHintsDecorators([t.getFullModelRange()],n),this._sessionDisposables.add(st(()=>{t.isDisposed()||this._cacheHintsForFastRestore(t)}));let r;const s=new Set,o=new fn(()=>Rm(this,void 0,void 0,function*(){const a=Date.now();r==null||r.dispose(!0),r=new vi;const l=t.onWillDispose(()=>r==null?void 0:r.cancel());try{const c=r.token,d=yield Xy.create(this._languageFeaturesService.inlayHintsProvider,t,this._getHintsRanges(),c);if(o.delay=this._debounceInfo.update(t,Date.now()-a),c.isCancellationRequested){d.dispose();return}for(const u of d.provider)typeof u.onDidChangeInlayHints=="function"&&!s.has(u)&&(s.add(u),this._sessionDisposables.add(u.onDidChangeInlayHints(()=>{o.isScheduled()||o.schedule()})));this._sessionDisposables.add(d),this._updateHintsDecorators(d.ranges,d.items),this._cacheHintsForFastRestore(t)}catch(c){ut(c)}finally{r.dispose(),l.dispose()}}),this._debounceInfo.get(t));if(this._sessionDisposables.add(o),this._sessionDisposables.add(st(()=>r==null?void 0:r.dispose(!0))),o.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(a=>{(a.scrollTopChanged||!o.isScheduled())&&o.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeModelContent(a=>{const l=Math.max(o.delay,1250);o.schedule(l)})),e.enabled==="on")this._activeRenderMode=0;else{let a,l;e.enabled==="onUnlessPressed"?(a=0,l=1):(a=1,l=0),this._activeRenderMode=a,this._sessionDisposables.add(Hd.getInstance().event(c=>{if(!this._editor.hasModel())return;const d=c.altKey&&c.ctrlKey&&!(c.shiftKey||c.metaKey)?l:a;if(d!==this._activeRenderMode){this._activeRenderMode=d;const u=this._editor.getModel(),h=this._copyInlayHintsWithCurrentAnchor(u);this._updateHintsDecorators([u.getFullModelRange()],h),o.schedule(0)}}))}this._sessionDisposables.add(this._installDblClickGesture(()=>o.schedule(0))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const e=new ae,t=e.add(new EI(this._editor)),n=new ae;return e.add(n),e.add(t.onMouseMoveOrRelevantKeyDown(r=>{const[s]=r,o=this._getInlayHintLabelPart(s),a=this._editor.getModel();if(!o||!a){n.clear();return}const l=new vi;n.add(st(()=>l.dispose(!0))),o.item.resolve(l.token),this._activeInlayHintPart=o.part.command||o.part.location?new c$e(o,s.hasTriggerModifier):void 0;const c=a.validatePosition(o.item.hint.position).lineNumber,d=new D(c,1,c,a.getLineMaxColumn(c)),u=this._getInlineHintsForRange(d);this._updateHintsDecorators([d],u),n.add(st(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([d],u)}))})),e.add(t.onCancel(()=>n.clear())),e.add(t.onExecute(r=>Rm(this,void 0,void 0,function*(){const s=this._getInlayHintLabelPart(r);if(s){const o=s.part;o.location?this._instaService.invokeFunction(Oee,r,this._editor,o.location):E2.is(o.command)&&(yield this._invokeCommand(o.command,s.item))}}))),e}_getInlineHintsForRange(e){const t=new Set;for(const n of this._decorationsMetadata.values())e.containsRange(n.item.anchor.range)&&t.add(n.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp(t=>Rm(this,void 0,void 0,function*(){if(t.event.detail!==2)return;const n=this._getInlayHintLabelPart(t);if(n&&(t.event.preventDefault(),yield n.item.resolve(xt.None),zr(n.item.hint.textEdits))){const r=n.item.hint.textEdits.map(s=>jn.replace(D.lift(s.range),s.text));this._editor.executeEdits("inlayHint.default",r),e()}}))}_installContextMenu(){return this._editor.onContextMenu(e=>Rm(this,void 0,void 0,function*(){if(!(e.event.target instanceof HTMLElement))return;const t=this._getInlayHintLabelPart(e);t&&(yield this._instaService.invokeFunction(a$e,this._editor,e.event.target,t))}))}_getInlayHintLabelPart(e){var t;if(e.target.type!==6)return;const n=(t=e.target.detail.injectedText)===null||t===void 0?void 0:t.options;if(n instanceof Zh&&(n==null?void 0:n.attachedData)instanceof QO)return n.attachedData}_invokeCommand(e,t){var n;return Rm(this,void 0,void 0,function*(){try{yield this._commandService.executeCommand(e.id,...(n=e.arguments)!==null&&n!==void 0?n:[])}catch(r){this._notificationService.notify({severity:GD.Error,source:t.provider.displayName,message:r})}})}_cacheHintsForFastRestore(e){const t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){const t=new Map;for(const[n,r]of this._decorationsMetadata){if(t.has(r.item))continue;const s=e.getDecorationRange(n);if(s){const o=new Mee(s,r.item.anchor.direction),a=r.item.with({anchor:o});t.set(r.item,a)}}return Array.from(t.values())}_getHintsRanges(){const t=this._editor.getModel(),n=this._editor.getVisibleRangesPlusViewportAboveBelow(),r=[];for(const s of n.sort(D.compareRangesUsingStarts)){const o=t.validateRange(new D(s.startLineNumber-30,s.startColumn,s.endLineNumber+30,s.endColumn));r.length===0||!D.areIntersectingOrTouching(r[r.length-1],o)?r.push(o):r[r.length-1]=D.plusRange(r[r.length-1],o)}return r}_updateHintsDecorators(e,t){var n,r;const s=[],o=(m,y,b,v,C)=>{const w={content:b,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:y.className,cursorStops:v,attachedData:C};s.push({item:m,classNameRef:y,decoration:{range:m.anchor.range,options:{description:"InlayHint",showIfCollapsed:m.anchor.range.isEmpty(),collapseOnReplaceEdit:!m.anchor.range.isEmpty(),stickiness:0,[m.anchor.direction]:this._activeRenderMode===0?w:void 0}}})},a=(m,y)=>{const b=this._ruleFactory.createClassNameRef({width:`${l/3|0}px`,display:"inline-block"});o(m,b," ",y?xl.Right:xl.None)},{fontSize:l,fontFamily:c,padding:d,isUniform:u}=this._getLayoutInfo(),h="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(h,c);for(const m of t){m.hint.paddingLeft&&a(m,!1);const y=typeof m.hint.label=="string"?[{label:m.hint.label}]:m.hint.label;for(let b=0;b<y.length;b++){const v=y[b],C=b===0,w=b===y.length-1,S={fontSize:`${l}px`,fontFamily:`var(${h}), ${Qs.fontFamily}`,verticalAlign:u?"baseline":"middle",unicodeBidi:"isolate"};zr(m.hint.textEdits)&&(S.cursor="default"),this._fillInColors(S,m.hint),(v.command||v.location)&&((n=this._activeInlayHintPart)===null||n===void 0?void 0:n.part.item)===m&&this._activeInlayHintPart.part.index===b&&(S.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(S.color=Zn(zRe),S.cursor="pointer")),d&&(C&&w?(S.padding=`1px ${Math.max(1,l/4)|0}px`,S.borderRadius=`${l/4|0}px`):C?(S.padding=`1px 0 1px ${Math.max(1,l/4)|0}px`,S.borderRadius=`${l/4|0}px 0 0 ${l/4|0}px`):w?(S.padding=`1px ${Math.max(1,l/4)|0}px 1px 0`,S.borderRadius=`0 ${l/4|0}px ${l/4|0}px 0`):S.padding="1px 0 1px 0"),o(m,this._ruleFactory.createClassNameRef(S),d$e(v.label),w&&!m.hint.paddingRight?xl.Right:xl.None,new QO(m,b))}if(m.hint.paddingRight&&a(m,!0),s.length>zx._MAX_DECORATORS)break}const f=[];for(const m of e)for(const{id:y}of(r=this._editor.getDecorationsInRange(m))!==null&&r!==void 0?r:[]){const b=this._decorationsMetadata.get(y);b&&(f.push(y),b.classNameRef.dispose(),this._decorationsMetadata.delete(y))}const g=Hl.capture(this._editor);this._editor.changeDecorations(m=>{const y=m.deltaDecorations(f,s.map(b=>b.decoration));for(let b=0;b<y.length;b++){const v=s[b];this._decorationsMetadata.set(y[b],v)}}),g.restore(this._editor)}_fillInColors(e,t){t.kind===wT.Parameter?(e.backgroundColor=Zn(GRe),e.color=Zn(qRe)):t.kind===wT.Type?(e.backgroundColor=Zn(KRe),e.color=Zn($Re)):(e.backgroundColor=Zn(Kd),e.color=Zn($d))}_getLayoutInfo(){const e=this._editor.getOption(139),t=e.padding,n=this._editor.getOption(52),r=this._editor.getOption(49);let s=e.fontSize;(!s||s<5||s>n)&&(s=n);const o=e.fontFamily||r;return{fontSize:s,fontFamily:o,padding:t,isUniform:!t&&o===r&&s===n}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(const e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}};pp.ID="editor.contrib.InlayHints";pp._MAX_DECORATORS=1500;pp=zx=l$e([ym(1,Fe),ym(2,pa),ym(3,Fee),ym(4,oi),ym(5,wi),ym(6,rt)],pp);function d$e(i){const e=" ";return i.replace(/[ \t]/g,e)}Bt.registerCommand("_executeInlayHintProvider",(i,...e)=>Rm(void 0,void 0,void 0,function*(){const[t,n]=e;dn(Ye.isUri(t)),dn(D.isIRange(n));const{inlayHintsProvider:r}=i.get(Fe),s=yield i.get(Vs).createModelReference(t);try{const o=yield Xy.create(r,s.object.textEditorModel,[D.lift(n)],xt.None),a=o.items.map(l=>l.hint);return setTimeout(()=>o.dispose(),0),a}finally{s.dispose()}}));var u$e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Zb=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},UU=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},h$e=globalThis&&globalThis.__asyncValues||function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=i[s]&&function(o){return new Promise(function(a,l){o=i[s](o),r(a,l,o.done,o.value)})}}function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}};class jU extends Vx{constructor(e,t,n,r){super(10,t,e.item.anchor.range,n,r,!0),this.part=e}}let JO=class extends Yk{constructor(e,t,n,r,s,o){super(e,t,n,r,o),this._resolverService=s,this.hoverOrdinal=6}suggestHoverAnchor(e){var t;if(!pp.get(this._editor)||e.target.type!==6)return null;const r=(t=e.target.detail.injectedText)===null||t===void 0?void 0:t.options;return r instanceof Zh&&r.attachedData instanceof QO?new jU(r.attachedData,this,e.event.posx,e.event.posy):null}computeSync(){return[]}computeAsync(e,t,n){return e instanceof jU?new xi(r=>UU(this,void 0,void 0,function*(){var s,o,a,l;const{part:c}=e;if(yield c.item.resolve(n),n.isCancellationRequested)return;let d;typeof c.item.hint.tooltip=="string"?d=new Lr().appendText(c.item.hint.tooltip):c.item.hint.tooltip&&(d=c.item.hint.tooltip),d&&r.emitOne(new yl(this,e.range,[d],!1,0)),zr(c.item.hint.textEdits)&&r.emitOne(new yl(this,e.range,[new Lr().appendText(p("hint.dbl","Double-click to insert"))],!1,10001));let u;if(typeof c.part.tooltip=="string"?u=new Lr().appendText(c.part.tooltip):c.part.tooltip&&(u=c.part.tooltip),u&&r.emitOne(new yl(this,e.range,[u],!1,1)),c.part.location||c.part.command){let y;const v=this._editor.getOption(77)==="altKey"?Ot?p("links.navigate.kb.meta.mac","cmd + click"):p("links.navigate.kb.meta","ctrl + click"):Ot?p("links.navigate.kb.alt.mac","option + click"):p("links.navigate.kb.alt","alt + click");c.part.location&&c.part.command?y=new Lr().appendText(p("hint.defAndCommand","Go to Definition ({0}), right click for more",v)):c.part.location?y=new Lr().appendText(p("hint.def","Go to Definition ({0})",v)):c.part.command&&(y=new Lr(`[${p("hint.cmd","Execute Command")}](${o$e(c.part.command)} "${c.part.command.title}") (${v})`,{isTrusted:!0})),y&&r.emitOne(new yl(this,e.range,[y],!1,1e4))}const h=yield this._resolveInlayHintLabelPartHover(c,n);try{for(var f=!0,g=h$e(h),m;m=yield g.next(),s=m.done,!s;f=!0){l=m.value,f=!1;const y=l;r.emitOne(y)}}catch(y){o={error:y}}finally{try{!f&&!s&&(a=g.return)&&(yield a.call(g))}finally{if(o)throw o.error}}})):xi.EMPTY}_resolveInlayHintLabelPartHover(e,t){return UU(this,void 0,void 0,function*(){if(!e.part.location)return xi.EMPTY;const{uri:n,range:r}=e.part.location,s=yield this._resolverService.createModelReference(n);try{const o=s.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(o)?e9(this._languageFeaturesService.hoverProvider,o,new U(r.startLineNumber,r.startColumn),t).filter(a=>!d1(a.hover.contents)).map(a=>new yl(this,e.item.anchor.range,a.hover.contents,!1,2+a.ordinal)):xi.EMPTY}finally{s.dispose()}})}};JO=u$e([Zb(1,Fn),Zb(2,lo),Zb(3,Et),Zb(4,Vs),Zb(5,Fe)],JO);$t(pp.ID,pp,1);Gp.register(JO);class f$e{constructor(e,t,n){this._editRange=e,this._originalSelection=t,this._text=n}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new Be(r.endLineNumber,Math.min(this._originalSelection.positionColumn,r.endColumn),r.endLineNumber,Math.min(this._originalSelection.positionColumn,r.endColumn)):new Be(r.endLineNumber,r.endColumn-this._text.length,r.endLineNumber,r.endColumn)}}var g$e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},p$e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},$x;let of=$x=class{static get(e){return e.getContribution($x.ID)}constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}dispose(){}run(e,t){var n;(n=this.currentRequest)===null||n===void 0||n.cancel();const r=this.editor.getSelection(),s=this.editor.getModel();if(!s||!r)return;let o=r;if(o.startLineNumber!==o.endLineNumber)return;const a=new yQ(this.editor,5),l=s.uri;return this.editorWorkerService.canNavigateValueSet(l)?(this.currentRequest=Ui(c=>this.editorWorkerService.navigateValueSet(l,o,t)),this.currentRequest.then(c=>{var d;if(!c||!c.range||!c.value||!a.validate(this.editor))return;const u=D.lift(c.range);let h=c.range;const f=c.value.length-(o.endColumn-o.startColumn);h={startLineNumber:h.startLineNumber,startColumn:h.startColumn,endLineNumber:h.endLineNumber,endColumn:h.startColumn+c.value.length},f>1&&(o=new Be(o.startLineNumber,o.startColumn,o.endLineNumber,o.endColumn+f-1));const g=new f$e(u,o,c.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,g),this.editor.pushUndoStop(),this.decorations.set([{range:h,options:$x.DECORATION}]),(d=this.decorationRemover)===null||d===void 0||d.cancel(),this.decorationRemover=Vh(350),this.decorationRemover.then(()=>this.decorations.clear()).catch(ut)}).catch(ut)):Promise.resolve(void 0)}};of.ID="editor.contrib.inPlaceReplaceController";of.DECORATION=dt.register({description:"in-place-replace",className:"valueSetReplacement"});of=$x=g$e([p$e(1,Xa)],of);class m$e extends Me{constructor(){super({id:"editor.action.inPlaceReplace.up",label:p("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:N.writable,kbOpts:{kbExpr:N.editorTextFocus,primary:3159,weight:100}})}run(e,t){const n=of.get(t);return n?n.run(this.id,!1):Promise.resolve(void 0)}}class _$e extends Me{constructor(){super({id:"editor.action.inPlaceReplace.down",label:p("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:N.writable,kbOpts:{kbExpr:N.editorTextFocus,primary:3161,weight:100}})}run(e,t){const n=of.get(t);return n?n.run(this.id,!0):Promise.resolve(void 0)}}$t(of.ID,of,4);ue(m$e);ue(_$e);class b$e extends Me{constructor(){super({id:"expandLineSelection",label:p("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:N.textInputFocus,primary:2090}})}run(e,t,n){if(n=n||{},!t.hasModel())return;const r=t._getViewModel();r.model.pushStackElement(),r.setCursorStates(n.source,3,ar.expandLineSelection(r,r.getCursorStates())),r.revealPrimaryCursor(n.source,!0)}}ue(b$e);class v$e{constructor(e,t){this._selection=e,this._cursors=t,this._selectionId=null}getEditOperations(e,t){const n=y$e(e,this._cursors);for(let r=0,s=n.length;r<s;r++){const o=n[r];t.addEditOperation(o.range,o.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}function y$e(i,e){e.sort((o,a)=>o.lineNumber===a.lineNumber?o.column-a.column:o.lineNumber-a.lineNumber);for(let o=e.length-2;o>=0;o--)e[o].lineNumber===e[o+1].lineNumber&&e.splice(o,1);const t=[];let n=0,r=0;const s=e.length;for(let o=1,a=i.getLineCount();o<=a;o++){const l=i.getLineContent(o),c=l.length+1;let d=0;if(r<s&&e[r].lineNumber===o&&(d=e[r].column,r++,d===c)||l.length===0)continue;const u=Dl(l);let h=0;if(u===-1)h=1;else if(u!==l.length-1)h=u+2;else continue;h=Math.max(d,h),t[n++]=jn.delete(new D(o,h,o,c))}return t}class Bee{constructor(e,t,n){this._selection=e,this._isCopyingDown=t,this._noop=n||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const r=[];for(let o=n.startLineNumber;o<=n.endLineNumber;o++)r.push(e.getLineContent(o));const s=r.join(`
`);s===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new D(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber+1,1),n.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new D(n.startLineNumber,1,n.startLineNumber,1),s+`
`):t.addEditOperation(new D(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),`
`+s),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let r=n.startLineNumber,s=n.startColumn,o=n.endLineNumber,a=n.endColumn;this._startLineNumberDelta!==0&&(r=r+this._startLineNumberDelta,s=1),this._endLineNumberDelta!==0&&(o=o+this._endLineNumberDelta,a=1),n=Be.createWithDirection(r,s,o,a,this._selectionDirection)}return n}}var C$e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},w$e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let eF=class{constructor(e,t,n,r){this._languageConfigurationService=r,this._selection=e,this._isMovingDown=t,this._autoIndent=n,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){const n=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===n){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let r=this._selection;r.startLineNumber<r.endLineNumber&&r.endColumn===1&&(this._moveEndPositionDown=!0,r=r.setEndPosition(r.endLineNumber-1,e.getLineMaxColumn(r.endLineNumber-1)));const{tabSize:s,indentSize:o,insertSpaces:a}=e.getOptions(),l=this.buildIndentConverter(s,o,a),c={tokenization:{getLineTokens:d=>e.tokenization.getLineTokens(d),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(d,u)=>e.getLanguageIdAtPosition(d,u)},getLineContent:null};if(r.startLineNumber===r.endLineNumber&&e.getLineMaxColumn(r.startLineNumber)===1){const d=r.startLineNumber,u=this._isMovingDown?d+1:d-1;e.getLineMaxColumn(u)===1?t.addEditOperation(new D(1,1,1,1),null):(t.addEditOperation(new D(d,1,d,1),e.getLineContent(u)),t.addEditOperation(new D(u,1,u,e.getLineMaxColumn(u)),null)),r=new Be(u,1,u,1)}else{let d,u;if(this._isMovingDown){d=r.endLineNumber+1,u=e.getLineContent(d),t.addEditOperation(new D(d-1,e.getLineMaxColumn(d-1),d,e.getLineMaxColumn(d)),null);let h=u;if(this.shouldAutoIndent(e,r)){const f=this.matchEnterRule(e,l,s,d,r.startLineNumber-1);if(f!==null){const m=pn(e.getLineContent(d)),y=f+zs(m,s);h=o0(y,s,a)+this.trimStart(u)}else{c.getLineContent=y=>y===r.startLineNumber?e.getLineContent(d):e.getLineContent(y);const m=Bv(this._autoIndent,c,e.getLanguageIdAtPosition(d,1),r.startLineNumber,l,this._languageConfigurationService);if(m!==null){const y=pn(e.getLineContent(d)),b=zs(m,s),v=zs(y,s);b!==v&&(h=o0(b,s,a)+this.trimStart(u))}}t.addEditOperation(new D(r.startLineNumber,1,r.startLineNumber,1),h+`
`);const g=this.matchEnterRuleMovingDown(e,l,s,r.startLineNumber,d,h);if(g!==null)g!==0&&this.getIndentEditsOfMovingBlock(e,t,r,s,a,g);else{c.getLineContent=y=>y===r.startLineNumber?h:y>=r.startLineNumber+1&&y<=r.endLineNumber+1?e.getLineContent(y-1):e.getLineContent(y);const m=Bv(this._autoIndent,c,e.getLanguageIdAtPosition(d,1),r.startLineNumber+1,l,this._languageConfigurationService);if(m!==null){const y=pn(e.getLineContent(r.startLineNumber)),b=zs(m,s),v=zs(y,s);if(b!==v){const C=b-v;this.getIndentEditsOfMovingBlock(e,t,r,s,a,C)}}}}else t.addEditOperation(new D(r.startLineNumber,1,r.startLineNumber,1),h+`
`)}else if(d=r.startLineNumber-1,u=e.getLineContent(d),t.addEditOperation(new D(d,1,d+1,1),null),t.addEditOperation(new D(r.endLineNumber,e.getLineMaxColumn(r.endLineNumber),r.endLineNumber,e.getLineMaxColumn(r.endLineNumber)),`
`+u),this.shouldAutoIndent(e,r)){c.getLineContent=f=>f===d?e.getLineContent(r.startLineNumber):e.getLineContent(f);const h=this.matchEnterRule(e,l,s,r.startLineNumber,r.startLineNumber-2);if(h!==null)h!==0&&this.getIndentEditsOfMovingBlock(e,t,r,s,a,h);else{const f=Bv(this._autoIndent,c,e.getLanguageIdAtPosition(r.startLineNumber,1),d,l,this._languageConfigurationService);if(f!==null){const g=pn(e.getLineContent(r.startLineNumber)),m=zs(f,s),y=zs(g,s);if(m!==y){const b=m-y;this.getIndentEditsOfMovingBlock(e,t,r,s,a,b)}}}}}this._selectionId=t.trackSelection(r)}buildIndentConverter(e,t,n){return{shiftIndent:r=>Xo.shiftIndent(r,r.length+1,e,t,n),unshiftIndent:r=>Xo.unshiftIndent(r,r.length+1,e,t,n)}}parseEnterResult(e,t,n,r,s){if(s){let o=s.indentation;s.indentAction===ki.None||s.indentAction===ki.Indent?o=s.indentation+s.appendText:s.indentAction===ki.IndentOutdent?o=s.indentation:s.indentAction===ki.Outdent&&(o=t.unshiftIndent(s.indentation)+s.appendText);const a=e.getLineContent(r);if(this.trimStart(a).indexOf(this.trimStart(o))>=0){const l=pn(e.getLineContent(r));let c=pn(o);const d=ZZ(e,r,this._languageConfigurationService);d!==null&&d&2&&(c=t.unshiftIndent(c));const u=zs(c,n),h=zs(l,n);return u-h}}return null}matchEnterRuleMovingDown(e,t,n,r,s,o){if(Dl(o)>=0){const a=e.getLineMaxColumn(s),l=y_(this._autoIndent,e,new D(s,a,s,a),this._languageConfigurationService);return this.parseEnterResult(e,t,n,r,l)}else{let a=r-1;for(;a>=1;){const d=e.getLineContent(a);if(Dl(d)>=0)break;a--}if(a<1||r>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=y_(this._autoIndent,e,new D(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,n,r,c)}}matchEnterRule(e,t,n,r,s,o){let a=s;for(;a>=1;){let d;if(a===s&&o!==void 0?d=o:d=e.getLineContent(a),Dl(d)>=0)break;a--}if(a<1||r>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=y_(this._autoIndent,e,new D(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,n,r,c)}trimStart(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;const n=e.getLanguageIdAtPosition(t.startLineNumber,1),r=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(n!==r||this._languageConfigurationService.getLanguageConfiguration(n).indentRulesSupport===null)}getIndentEditsOfMovingBlock(e,t,n,r,s,o){for(let a=n.startLineNumber;a<=n.endLineNumber;a++){const l=e.getLineContent(a),c=pn(l),u=zs(c,r)+o,h=o0(u,r,s);h!==c&&(t.addEditOperation(new D(a,1,a,c.length+1),h),a===n.endLineNumber&&n.endColumn<=c.length+1&&h===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n}};eF=C$e([w$e(3,wn)],eF);class Ah{static getCollator(){return Ah._COLLATOR||(Ah._COLLATOR=new Intl.Collator),Ah._COLLATOR}constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}getEditOperations(e,t){const n=S$e(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,n){if(e===null)return!1;const r=Wee(e,t,n);if(!r)return!1;for(let s=0,o=r.before.length;s<o;s++)if(r.before[s]!==r.after[s])return!0;return!1}}Ah._COLLATOR=null;function Wee(i,e,t){const n=e.startLineNumber;let r=e.endLineNumber;if(e.endColumn===1&&r--,n>=r)return null;const s=[];for(let a=n;a<=r;a++)s.push(i.getLineContent(a));let o=s.slice(0);return o.sort(Ah.getCollator().compare),t===!0&&(o=o.reverse()),{startLineNumber:n,endLineNumber:r,before:s,after:o}}function S$e(i,e,t){const n=Wee(i,e,t);return n?jn.replace(new D(n.startLineNumber,1,n.endLineNumber,i.getLineMaxColumn(n.endLineNumber)),n.after.join(`
`)):null}class Vee extends Me{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const n=t.getSelections().map((o,a)=>({selection:o,index:a,ignore:!1}));n.sort((o,a)=>D.compareRangesUsingStarts(o.selection,a.selection));let r=n[0];for(let o=1;o<n.length;o++){const a=n[o];r.selection.endLineNumber===a.selection.startLineNumber&&(r.index<a.index?a.ignore=!0:(r.ignore=!0,r=a))}const s=[];for(const o of n)s.push(new Bee(o.selection,this.down,o.ignore));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class x$e extends Vee{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:p("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:N.writable,kbOpts:{kbExpr:N.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:E.MenubarSelectionMenu,group:"2_line",title:p({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class T$e extends Vee{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:p("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:N.writable,kbOpts:{kbExpr:N.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:E.MenubarSelectionMenu,group:"2_line",title:p({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class k$e extends Me{constructor(){super({id:"editor.action.duplicateSelection",label:p("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:N.writable,menuOpts:{menuId:E.MenubarSelectionMenu,group:"2_line",title:p({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,n){if(!t.hasModel())return;const r=[],s=t.getSelections(),o=t.getModel();for(const a of s)if(a.isEmpty())r.push(new Bee(a,!0));else{const l=new Be(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);r.push(new p2e(l,o.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}class Hee extends Me{constructor(e,t){super(t),this.down=e}run(e,t){const n=e.get(wn),r=[],s=t.getSelections()||[],o=t.getOption(12);for(const a of s)r.push(new eF(a,this.down,o,n));t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}class L$e extends Hee{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:p("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:N.writable,kbOpts:{kbExpr:N.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:E.MenubarSelectionMenu,group:"2_line",title:p({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class D$e extends Hee{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:p("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:N.writable,kbOpts:{kbExpr:N.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:E.MenubarSelectionMenu,group:"2_line",title:p({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class Uee extends Me{constructor(e,t){super(t),this.descending=e}run(e,t){const n=t.getSelections()||[];for(const s of n)if(!Ah.canRun(t.getModel(),s,this.descending))return;const r=[];for(let s=0,o=n.length;s<o;s++)r[s]=new Ah(n[s],this.descending);t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}class I$e extends Uee{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:p("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:N.writable})}}class R$e extends Uee{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:p("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:N.writable})}}class E$e extends Me{constructor(){super({id:"editor.action.removeDuplicateLines",label:p("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:N.writable})}run(e,t){if(!t.hasModel())return;const n=t.getModel();if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;const r=[],s=[];let o=0;for(const a of t.getSelections()){const l=new Set,c=[];for(let f=a.startLineNumber;f<=a.endLineNumber;f++){const g=n.getLineContent(f);l.has(g)||(c.push(g),l.add(g))}const d=new Be(a.startLineNumber,1,a.endLineNumber,n.getLineMaxColumn(a.endLineNumber)),u=a.startLineNumber-o,h=new Be(u,1,u+c.length-1,c[c.length-1].length);r.push(jn.replace(d,c.join(`
`))),s.push(h),o+=a.endLineNumber-a.startLineNumber+1-c.length}t.pushUndoStop(),t.executeEdits(this.id,r,s),t.pushUndoStop()}}class cR extends Me{constructor(){super({id:cR.ID,label:p("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:N.writable,kbOpts:{kbExpr:N.editorTextFocus,primary:Oi(2089,2102),weight:100}})}run(e,t,n){let r=[];n.reason==="auto-save"&&(r=(t.getSelections()||[]).map(a=>new U(a.positionLineNumber,a.positionColumn)));const s=t.getSelection();if(s===null)return;const o=new v$e(s,r);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop()}}cR.ID="editor.action.trimTrailingWhitespace";class N$e extends Me{constructor(){super({id:"editor.action.deleteLines",label:p("lines.delete","Delete Line"),alias:"Delete Line",precondition:N.writable,kbOpts:{kbExpr:N.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;const n=this._getLinesToRemove(t),r=t.getModel();if(r.getLineCount()===1&&r.getLineMaxColumn(1)===1)return;let s=0;const o=[],a=[];for(let l=0,c=n.length;l<c;l++){const d=n[l];let u=d.startLineNumber,h=d.endLineNumber,f=1,g=r.getLineMaxColumn(h);h<r.getLineCount()?(h+=1,g=1):u>1&&(u-=1,f=r.getLineMaxColumn(u)),o.push(jn.replace(new Be(u,f,h,g),"")),a.push(new Be(u-s,d.positionColumn,u-s,d.positionColumn)),s+=d.endLineNumber-d.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,o,a),t.pushUndoStop()}_getLinesToRemove(e){const t=e.getSelections().map(s=>{let o=s.endLineNumber;return s.startLineNumber<s.endLineNumber&&s.endColumn===1&&(o-=1),{startLineNumber:s.startLineNumber,selectionStartColumn:s.selectionStartColumn,endLineNumber:o,positionColumn:s.positionColumn}});t.sort((s,o)=>s.startLineNumber===o.startLineNumber?s.endLineNumber-o.endLineNumber:s.startLineNumber-o.startLineNumber);const n=[];let r=t[0];for(let s=1;s<t.length;s++)r.endLineNumber+1>=t[s].startLineNumber?r.endLineNumber=t[s].endLineNumber:(n.push(r),r=t[s]);return n.push(r),n}}class A$e extends Me{constructor(){super({id:"editor.action.indentLines",label:p("lines.indent","Indent Line"),alias:"Indent Line",precondition:N.writable,kbOpts:{kbExpr:N.editorTextFocus,primary:2142,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,$n.indent(n.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class P$e extends Me{constructor(){super({id:"editor.action.outdentLines",label:p("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:N.writable,kbOpts:{kbExpr:N.editorTextFocus,primary:2140,weight:100}})}run(e,t){C_.Outdent.runEditorCommand(e,t,null)}}class M$e extends Me{constructor(){super({id:"editor.action.insertLineBefore",label:p("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:N.writable,kbOpts:{kbExpr:N.editorTextFocus,primary:3075,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,$n.lineInsertBefore(n.cursorConfig,t.getModel(),t.getSelections())))}}class O$e extends Me{constructor(){super({id:"editor.action.insertLineAfter",label:p("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:N.writable,kbOpts:{kbExpr:N.editorTextFocus,primary:2051,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,$n.lineInsertAfter(n.cursorConfig,t.getModel(),t.getSelections())))}}class jee extends Me{run(e,t){if(!t.hasModel())return;const n=t.getSelection(),r=this._getRangesToDelete(t),s=[];for(let l=0,c=r.length-1;l<c;l++){const d=r[l],u=r[l+1];D.intersectRanges(d,u)===null?s.push(d):r[l+1]=D.plusRange(d,u)}s.push(r[r.length-1]);const o=this._getEndCursorState(n,s),a=s.map(l=>jn.replace(l,""));t.pushUndoStop(),t.executeEdits(this.id,a,o),t.pushUndoStop()}}class F$e extends jee{constructor(){super({id:"deleteAllLeft",label:p("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:N.writable,kbOpts:{kbExpr:N.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let n=null;const r=[];let s=0;return t.forEach(o=>{let a;if(o.endColumn===1&&s>0){const l=o.startLineNumber-s;a=new Be(l,o.startColumn,l,o.startColumn)}else a=new Be(o.startLineNumber,o.startColumn,o.startLineNumber,o.startColumn);s+=o.endLineNumber-o.startLineNumber,o.intersectRanges(e)?n=a:r.push(a)}),n&&r.unshift(n),r}_getRangesToDelete(e){const t=e.getSelections();if(t===null)return[];let n=t;const r=e.getModel();return r===null?[]:(n.sort(D.compareRangesUsingStarts),n=n.map(s=>{if(s.isEmpty())if(s.startColumn===1){const o=Math.max(1,s.startLineNumber-1),a=s.startLineNumber===1?1:r.getLineLength(o)+1;return new D(o,a,s.startLineNumber,1)}else return new D(s.startLineNumber,1,s.startLineNumber,s.startColumn);else return new D(s.startLineNumber,1,s.endLineNumber,s.endColumn)}),n)}}class B$e extends jee{constructor(){super({id:"deleteAllRight",label:p("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:N.writable,kbOpts:{kbExpr:N.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let n=null;const r=[];for(let s=0,o=t.length,a=0;s<o;s++){const l=t[s],c=new Be(l.startLineNumber-a,l.startColumn,l.startLineNumber-a,l.startColumn);l.intersectRanges(e)?n=c:r.push(c)}return n&&r.unshift(n),r}_getRangesToDelete(e){const t=e.getModel();if(t===null)return[];const n=e.getSelections();if(n===null)return[];const r=n.map(s=>{if(s.isEmpty()){const o=t.getLineMaxColumn(s.startLineNumber);return s.startColumn===o?new D(s.startLineNumber,s.startColumn,s.startLineNumber+1,1):new D(s.startLineNumber,s.startColumn,s.startLineNumber,o)}return s});return r.sort(D.compareRangesUsingStarts),r}}class W$e extends Me{constructor(){super({id:"editor.action.joinLines",label:p("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:N.writable,kbOpts:{kbExpr:N.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){const n=t.getSelections();if(n===null)return;let r=t.getSelection();if(r===null)return;n.sort(D.compareRangesUsingStarts);const s=[],o=n.reduce((h,f)=>h.isEmpty()?h.endLineNumber===f.startLineNumber?(r.equalsSelection(h)&&(r=f),f):f.startLineNumber>h.endLineNumber+1?(s.push(h),f):new Be(h.startLineNumber,h.startColumn,f.endLineNumber,f.endColumn):f.startLineNumber>h.endLineNumber?(s.push(h),f):new Be(h.startLineNumber,h.startColumn,f.endLineNumber,f.endColumn));s.push(o);const a=t.getModel();if(a===null)return;const l=[],c=[];let d=r,u=0;for(let h=0,f=s.length;h<f;h++){const g=s[h],m=g.startLineNumber,y=1;let b=0,v,C;const w=a.getLineLength(g.endLineNumber)-g.endColumn;if(g.isEmpty()||g.startLineNumber===g.endLineNumber){const T=g.getStartPosition();T.lineNumber<a.getLineCount()?(v=m+1,C=a.getLineMaxColumn(v)):(v=T.lineNumber,C=a.getLineMaxColumn(T.lineNumber))}else v=g.endLineNumber,C=a.getLineMaxColumn(v);let S=a.getLineContent(m);for(let T=m+1;T<=v;T++){const I=a.getLineContent(T),R=a.getLineFirstNonWhitespaceColumn(T);if(R>=1){let B=!0;S===""&&(B=!1),B&&(S.charAt(S.length-1)===" "||S.charAt(S.length-1)==="	")&&(B=!1,S=S.replace(/[\s\uFEFF\xA0]+$/g," "));const V=I.substr(R-1);S+=(B?" ":"")+V,B?b=V.length+1:b=V.length}else b=0}const L=new D(m,y,v,C);if(!L.isEmpty()){let T;g.isEmpty()?(l.push(jn.replace(L,S)),T=new Be(L.startLineNumber-u,S.length-b+1,m-u,S.length-b+1)):g.startLineNumber===g.endLineNumber?(l.push(jn.replace(L,S)),T=new Be(g.startLineNumber-u,g.startColumn,g.endLineNumber-u,g.endColumn)):(l.push(jn.replace(L,S)),T=new Be(g.startLineNumber-u,g.startColumn,g.startLineNumber-u,S.length-w)),D.intersectRanges(L,r)!==null?d=T:c.push(T)}u+=L.endLineNumber-L.startLineNumber}c.unshift(d),t.pushUndoStop(),t.executeEdits(this.id,l,c),t.pushUndoStop()}}class V$e extends Me{constructor(){super({id:"editor.action.transpose",label:p("editor.transpose","Transpose Characters around the Cursor"),alias:"Transpose Characters around the Cursor",precondition:N.writable})}run(e,t){const n=t.getSelections();if(n===null)return;const r=t.getModel();if(r===null)return;const s=[];for(let o=0,a=n.length;o<a;o++){const l=n[o];if(!l.isEmpty())continue;const c=l.getStartPosition(),d=r.getLineMaxColumn(c.lineNumber);if(c.column>=d){if(c.lineNumber===r.getLineCount())continue;const u=new D(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),h=r.getValueInRange(u).split("").reverse().join("");s.push(new Sr(new Be(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),h))}else{const u=new D(c.lineNumber,Math.max(1,c.column-1),c.lineNumber,c.column+1),h=r.getValueInRange(u).split("").reverse().join("");s.push(new v5(u,h,new Be(c.lineNumber,c.column+1,c.lineNumber,c.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class cb extends Me{run(e,t){const n=t.getSelections();if(n===null)return;const r=t.getModel();if(r===null)return;const s=t.getOption(129),o=[];for(const a of n)if(a.isEmpty()){const l=a.getStartPosition(),c=t.getConfiguredWordAtPosition(l);if(!c)continue;const d=new D(l.lineNumber,c.startColumn,l.lineNumber,c.endColumn),u=r.getValueInRange(d);o.push(jn.replace(d,this._modifyText(u,s)))}else{const l=r.getValueInRange(a);o.push(jn.replace(a,this._modifyText(l,s)))}t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop()}}class H$e extends cb{constructor(){super({id:"editor.action.transformToUppercase",label:p("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:N.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}class U$e extends cb{constructor(){super({id:"editor.action.transformToLowercase",label:p("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:N.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}class Zp{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}}class Yy extends cb{constructor(){super({id:"editor.action.transformToTitlecase",label:p("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:N.writable})}_modifyText(e,t){const n=Yy.titleBoundary.get();return n?e.toLocaleLowerCase().replace(n,r=>r.toLocaleUpperCase()):e}}Yy.titleBoundary=new Zp("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class Ph extends cb{constructor(){super({id:"editor.action.transformToSnakecase",label:p("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:N.writable})}_modifyText(e,t){const n=Ph.caseBoundary.get(),r=Ph.singleLetters.get();return!n||!r?e:e.replace(n,"$1_$2").replace(r,"$1_$2$3").toLocaleLowerCase()}}Ph.caseBoundary=new Zp("(\\p{Ll})(\\p{Lu})","gmu");Ph.singleLetters=new Zp("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");class Qy extends cb{constructor(){super({id:"editor.action.transformToCamelcase",label:p("editor.transformToCamelcase","Transform to Camel Case"),alias:"Transform to Camel Case",precondition:N.writable})}_modifyText(e,t){const n=Qy.wordBoundary.get();if(!n)return e;const r=e.split(n);return r.shift()+r.map(o=>o.substring(0,1).toLocaleUpperCase()+o.substring(1)).join("")}}Qy.wordBoundary=new Zp("[_\\s-]","gm");class au extends cb{static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every(t=>t.isSupported())}constructor(){super({id:"editor.action.transformToKebabcase",label:p("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:N.writable})}_modifyText(e,t){const n=au.caseBoundary.get(),r=au.singleLetters.get(),s=au.underscoreBoundary.get();return!n||!r||!s?e:e.replace(s,"$1-$3").replace(n,"$1-$2").replace(r,"$1-$2").toLocaleLowerCase()}}au.caseBoundary=new Zp("(\\p{Ll})(\\p{Lu})","gmu");au.singleLetters=new Zp("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu");au.underscoreBoundary=new Zp("(\\S)(_)(\\S)","gm");ue(x$e);ue(T$e);ue(k$e);ue(L$e);ue(D$e);ue(I$e);ue(R$e);ue(E$e);ue(cR);ue(N$e);ue(A$e);ue(P$e);ue(M$e);ue(O$e);ue(F$e);ue(B$e);ue(W$e);ue(V$e);ue(H$e);ue(U$e);Ph.caseBoundary.isSupported()&&Ph.singleLetters.isSupported()&&ue(Ph);Qy.wordBoundary.isSupported()&&ue(Qy);Yy.titleBoundary.isSupported()&&ue(Yy);au.isSupported()&&ue(au);var j$e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},$S=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},tF=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Kx;const zee=new Ne("LinkedEditingInputVisible",!1),z$e="linked-editing-decoration";let af=Kx=class extends q{static get(e){return e.getContribution(Kx.ID)}constructor(e,t,n,r,s){super(),this.languageConfigurationService=r,this._syncRangesToken=0,this._localToDispose=this._register(new ae),this._editor=e,this._providers=n.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=zee.bindTo(t),this._debounceInformation=s.for(this._providers,"Linked Editing",{max:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new ae),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(o=>{(o.hasChanged(69)||o.hasChanged(92))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}reinitialize(e){const t=this._editor.getModel(),n=t!==null&&(this._editor.getOption(69)||this._editor.getOption(92))&&this._providers.has(t);if(n===this._enabled&&!e||(this._enabled=n,this.clearRanges(),this._localToDispose.clear(),!n||t===null))return;this._localToDispose.add(Re.runAndSubscribe(t.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()}));const r=new Ha(this._debounceInformation.get(t)),s=()=>{var l;this._rangeUpdateTriggerPromise=r.trigger(()=>this.updateRanges(),(l=this._debounceDuration)!==null&&l!==void 0?l:this._debounceInformation.get(t))},o=new Ha(0),a=l=>{this._rangeSyncTriggerPromise=o.trigger(()=>this._syncRanges(l))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{s()})),this._localToDispose.add(this._editor.onDidChangeModelContent(l=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const c=this._currentDecorations.getRange(0);if(c&&l.changes.every(d=>c.intersectRanges(d.range))){a(this._syncRangesToken);return}}s()})),this._localToDispose.add({dispose:()=>{r.dispose(),o.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||this._currentDecorations.length===0)return;const t=this._editor.getModel(),n=this._currentDecorations.getRange(0);if(!n||n.startLineNumber!==n.endLineNumber)return this.clearRanges();const r=t.getValueInRange(n);if(this._currentWordPattern){const o=r.match(this._currentWordPattern);if((o?o[0].length:0)!==r.length)return this.clearRanges()}const s=[];for(let o=1,a=this._currentDecorations.length;o<a;o++){const l=this._currentDecorations.getRange(o);if(l)if(l.startLineNumber!==l.endLineNumber)s.push({range:l,text:r});else{let c=t.getValueInRange(l),d=r,u=l.startColumn,h=l.endColumn;const f=zg(c,d);u+=f,c=c.substr(f),d=d.substr(f);const g=xT(c,d);h-=g,c=c.substr(0,c.length-g),d=d.substr(0,d.length-g),(u!==h||d.length!==0)&&s.push({range:new D(l.startLineNumber,u,l.endLineNumber,h),text:d})}}if(s.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const o=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",s),this._editor._getViewModel().setPrevEditOperationType(o)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(e=!1){return tF(this,void 0,void 0,function*(){if(!this._editor.hasModel()){this.clearRanges();return}const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}const n=this._editor.getModel(),r=n.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===r){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){const o=this._currentDecorations.getRange(0);if(o&&o.containsPosition(t))return}}this.clearRanges(),this._currentRequestPosition=t,this._currentRequestModelVersion=r;const s=Ui(o=>tF(this,void 0,void 0,function*(){try{const a=new qr(!1),l=yield $ee(this._providers,n,t,o);if(this._debounceInformation.update(n,a.elapsed()),s!==this._currentRequest||(this._currentRequest=null,r!==n.getVersionId()))return;let c=[];l!=null&&l.ranges&&(c=l.ranges),this._currentWordPattern=(l==null?void 0:l.wordPattern)||this._languageWordPattern;let d=!1;for(let h=0,f=c.length;h<f;h++)if(D.containsPosition(c[h],t)){if(d=!0,h!==0){const g=c[h];c.splice(h,1),c.unshift(g)}break}if(!d){this.clearRanges();return}const u=c.map(h=>({range:h,options:Kx.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations.set(u),this._syncRangesToken++}catch(a){ql(a)||ut(a),(this._currentRequest===s||!this._currentRequest)&&this.clearRanges()}}));return this._currentRequest=s,s})}};af.ID="editor.contrib.linkedEditing";af.DECORATION=dt.register({description:"linked-editing",stickiness:0,className:z$e});af=Kx=j$e([$S(1,ot),$S(2,Fe),$S(3,wn),$S(4,pa)],af);class $$e extends Me{constructor(){super({id:"editor.action.linkedEditing",label:p("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:re.and(N.writable,N.hasRenameProvider),kbOpts:{kbExpr:N.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const n=e.get(Jt),[r,s]=Array.isArray(t)&&t||[void 0,void 0];return Ye.isUri(r)&&U.isIPosition(s)?n.openCodeEditor({resource:r},n.getActiveCodeEditor()).then(o=>{o&&(o.setPosition(s),o.invokeWithinContext(a=>(this.reportTelemetry(a,o),this.run(a,o))))},ut):super.runCommand(e,t)}run(e,t){const n=af.get(t);return n?Promise.resolve(n.updateRanges(!0)):Promise.resolve()}}const K$e=sr.bindToContribution(af.get);ye(new K$e({id:"cancelLinkedEditingInput",precondition:zee,handler:i=>i.clearRanges(),kbOpts:{kbExpr:N.editorTextFocus,weight:100+99,primary:9,secondary:[1033]}}));function $ee(i,e,t,n){const r=i.ordered(e);return zG(r.map(s=>()=>tF(this,void 0,void 0,function*(){try{return yield s.provideLinkedEditingRanges(e,t,n)}catch(o){Ii(o);return}})),s=>!!s&&zr(s==null?void 0:s.ranges))}P("editor.linkedEditingBackground",{dark:K.fromHex("#f00").transparent(.3),light:K.fromHex("#f00").transparent(.3),hcDark:K.fromHex("#f00").transparent(.3),hcLight:K.white},p("editorLinkedEditingBackground","Background color when the editor auto renames on type."));hd("_executeLinkedEditingProvider",(i,e,t)=>{const{linkedEditingRangeProvider:n}=i.get(Fe);return $ee(n,e,t,xt.None)});$t(af.ID,af,1);ue($$e);var Kee=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};let q$e=class{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(e){return Kee(this,void 0,void 0,function*(){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))})}};class hL{constructor(e){this._disposables=new ae;let t=[];for(const[n,r]of e){const s=n.links.map(o=>new q$e(o,r));t=hL._union(t,s),T3(n)&&this._disposables.add(n)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){const n=[];let r,s,o,a;for(r=0,o=0,s=e.length,a=t.length;r<s&&o<a;){const l=e[r],c=t[o];if(D.areIntersectingOrTouching(l.range,c.range)){r++;continue}D.compareRangesUsingStarts(l.range,c.range)<0?(n.push(l),r++):(n.push(c),o++)}for(;r<s;r++)n.push(e[r]);for(;o<a;o++)n.push(t[o]);return n}}function qee(i,e,t){const n=[],r=i.ordered(e).reverse().map((s,o)=>Promise.resolve(s.provideLinks(e,t)).then(a=>{a&&(n[o]=[a,s])},Ii));return Promise.all(r).then(()=>{const s=new hL(zc(n));return t.isCancellationRequested?(s.dispose(),new hL([])):s})}Bt.registerCommand("_executeLinkProvider",(i,...e)=>Kee(void 0,void 0,void 0,function*(){let[t,n]=e;dn(t instanceof Ye),typeof n!="number"&&(n=0);const{linkProvider:r}=i.get(Fe),s=i.get(zn).getModel(t);if(!s)return[];const o=yield qee(r,s,xt.None);if(!o)return[];for(let l=0;l<Math.min(n,o.links.length);l++)yield o.links[l].resolve(xt.None);const a=o.links.slice(0);return o.dispose(),a}));var G$e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},KS=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Z$e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},nF;let L1=nF=class extends q{static get(e){return e.getContribution(nF.ID)}constructor(e,t,n,r,s){super(),this.editor=e,this.openerService=t,this.notificationService=n,this.languageFeaturesService=r,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=s.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new fn(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const o=this._register(new EI(e));this._register(o.onMouseMoveOrRelevantKeyDown(([a,l])=>{this._onEditorMouseMove(a,l)})),this._register(o.onExecute(a=>{this.onEditorMouseUp(a)})),this._register(o.onCancel(a=>{this.cleanUpActiveLinkDecoration()})),this._register(e.onDidChangeConfiguration(a=>{a.hasChanged(70)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(e.onDidChangeModelContent(a=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(e.onDidChangeModel(a=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(e.onDidChangeModelLanguage(a=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(a=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}computeLinksNow(){return Z$e(this,void 0,void 0,function*(){if(!this.editor.hasModel()||!this.editor.getOption(70))return;const e=this.editor.getModel();if(!e.isTooLargeForSyncing()&&this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=Ui(t=>qee(this.providers,e,t));try{const t=new qr(!1);if(this.activeLinksList=yield this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(t){ut(t)}finally{this.computePromise=null}}})}updateDecorations(e){const t=this.editor.getOption(77)==="altKey",n=[],r=Object.keys(this.currentOccurrences);for(const o of r){const a=this.currentOccurrences[o];n.push(a.decorationId)}const s=[];if(e)for(const o of e)s.push(P_.decoration(o,t));this.editor.changeDecorations(o=>{const a=o.deltaDecorations(n,s);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let l=0,c=a.length;l<c;l++){const d=new P_(e[l],a[l]);this.currentOccurrences[d.decorationId]=d}})}_onEditorMouseMove(e,t){const n=this.editor.getOption(77)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const r=this.getLinkOccurrence(e.target.position);r&&this.editor.changeDecorations(s=>{r.activate(s,n),this.activeLinkDecorationId=r.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e=this.editor.getOption(77)==="altKey";if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(n=>{t.deactivate(n,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,n=!1){if(!this.openerService)return;const{link:r}=e;r.resolve(xt.None).then(s=>{if(typeof s=="string"&&this.editor.hasModel()){const o=this.editor.getModel().uri;if(o.scheme===bt.file&&s.startsWith(`${bt.file}:`)){const a=Ye.parse(s);if(a.scheme===bt.file){const l=ic(a);let c=null;l.startsWith("/./")?c=`.${l.substr(1)}`:l.startsWith("//./")&&(c=`.${l.substr(2)}`),c&&(s=XAe(o,c))}}}return this.openerService.open(s,{openToSide:t,fromUserGesture:n,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})},s=>{const o=s instanceof Error?s.message:s;o==="invalid"?this.notificationService.warn(p("invalid.url","Failed to open this link because it is not well-formed: {0}",r.url.toString())):o==="missing"?this.notificationService.warn(p("missing.url","Failed to open this link because its target is missing.")):ut(s)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const n of t){const r=this.currentOccurrences[n.id];if(r)return r}return null}isEnabled(e,t){return!!(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.computeLinks.cancel(),this.activeLinksList&&((e=this.activeLinksList)===null||e===void 0||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}};L1.ID="editor.linkDetector";L1=nF=G$e([KS(1,lo),KS(2,wi),KS(3,Fe),KS(4,pa)],L1);const zU={general:dt.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:dt.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class P_{static decoration(e,t){return{range:e.range,options:P_._getOptions(e,t,!1)}}static _getOptions(e,t,n){const r=Object.assign({},n?zU.active:zU.general);return r.hoverMessage=X$e(e,t),r}constructor(e,t){this.link=e,this.decorationId=t}activate(e,t){e.changeDecorationOptions(this.decorationId,P_._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,P_._getOptions(this.link,t,!1))}}function X$e(i,e){const t=i.url&&/^command:/i.test(i.url.toString()),n=i.tooltip?i.tooltip:t?p("links.navigate.executeCmd","Execute command"):p("links.navigate.follow","Follow link"),r=e?Ot?p("links.navigate.kb.meta.mac","cmd + click"):p("links.navigate.kb.meta","ctrl + click"):Ot?p("links.navigate.kb.alt.mac","option + click"):p("links.navigate.kb.alt","alt + click");if(i.url){let s="";if(/^command:/i.test(i.url.toString())){const a=i.url.toString().match(/^command:([^?#]+)/);if(a){const l=a[1];s=p("tooltip.explanation","Execute command {0}",l)}}return new Lr("",!0).appendLink(i.url.toString(!0).replace(/ /g,"%20"),n,s).appendMarkdown(` (${r})`)}else return new Lr().appendText(`${n} (${r})`)}class Y$e extends Me{constructor(){super({id:"editor.action.openLink",label:p("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){const n=L1.get(t);if(!n||!t.hasModel())return;const r=t.getSelections();for(const s of r){const o=n.getLinkOccurrence(s.getEndPosition());o&&n.openLinkOccurrence(o,!1)}}}$t(L1.ID,L1,1);ue(Y$e);class iF extends q{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown(t=>{const n=this._editor.getOption(116);n>=0&&t.target.type===6&&t.target.position.column>=n&&this._editor.updateOptions({stopRenderingLineAfter:-1})}))}}iF.ID="editor.contrib.longLinesHelper";$t(iF.ID,iF,2);const qS=P("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},p("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0);P("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},p("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0);P("editor.wordHighlightTextBackground",{light:qS,dark:qS,hcDark:qS,hcLight:qS},p("wordHighlightText","Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0);const GS=P("editor.wordHighlightBorder",{light:null,dark:null,hcDark:Rn,hcLight:Rn},p("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable."));P("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:Rn,hcLight:Rn},p("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable."));P("editor.wordHighlightTextBorder",{light:GS,dark:GS,hcDark:GS,hcLight:GS},p("wordHighlightTextBorder","Border color of a textual occurrence for a symbol."));const Q$e=P("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},p("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),J$e=P("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hcDark:"#C0A0C0CC",hcLight:"#C0A0C0CC"},p("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),eKe=P("editorOverviewRuler.wordHighlightTextForeground",{dark:dv,light:dv,hcDark:dv,hcLight:dv},p("overviewRulerWordHighlightTextForeground","Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0),tKe=dt.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:Zn(J$e),position:Ao.Center},minimap:{color:Zn(OD),position:Js.Inline}}),nKe=dt.register({description:"word-highlight-text",stickiness:1,className:"wordHighlightText",overviewRuler:{color:Zn(eKe),position:Ao.Center},minimap:{color:Zn(OD),position:Js.Inline}}),iKe=dt.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:Zn(dv),position:Ao.Center},minimap:{color:Zn(OD),position:Js.Inline}}),rKe=dt.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),sKe=dt.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:Zn(Q$e),position:Ao.Center},minimap:{color:Zn(OD),position:Js.Inline}});function oKe(i){return i===M0.Write?tKe:i===M0.Text?nKe:sKe}function aKe(i){return i?rKe:iKe}Ka((i,e)=>{const t=i.getColor(d5);t&&e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`)});var lKe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},cKe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},rF;function xf(i,e){const t=e.filter(n=>!i.find(r=>r.equals(n)));if(t.length>=1){const n=t.map(s=>`line ${s.viewState.position.lineNumber} column ${s.viewState.position.column}`).join(", "),r=t.length===1?p("cursorAdded","Cursor added: {0}",n):p("cursorsAdded","Cursors added: {0}",n);zh(r)}}class dKe extends Me{constructor(){super({id:"editor.action.insertCursorAbove",label:p("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:N.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:E.MenubarSelectionMenu,group:"3_multi",title:p({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,n){if(!t.hasModel())return;let r=!0;n&&n.logicalLine===!1&&(r=!1);const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const o=s.getCursorStates();s.setCursorStates(n.source,3,ar.addCursorUp(s,o,r)),s.revealTopMostCursor(n.source),xf(o,s.getCursorStates())}}class uKe extends Me{constructor(){super({id:"editor.action.insertCursorBelow",label:p("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:N.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:E.MenubarSelectionMenu,group:"3_multi",title:p({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,n){if(!t.hasModel())return;let r=!0;n&&n.logicalLine===!1&&(r=!1);const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const o=s.getCursorStates();s.setCursorStates(n.source,3,ar.addCursorDown(s,o,r)),s.revealBottomMostCursor(n.source),xf(o,s.getCursorStates())}}class hKe extends Me{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:p("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:N.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:E.MenubarSelectionMenu,group:"3_multi",title:p({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,n){if(!e.isEmpty()){for(let r=e.startLineNumber;r<e.endLineNumber;r++){const s=t.getLineMaxColumn(r);n.push(new Be(r,s,r,s))}e.endColumn>1&&n.push(new Be(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const n=t.getModel(),r=t.getSelections(),s=t._getViewModel(),o=s.getCursorStates(),a=[];r.forEach(l=>this.getCursorsForSelection(l,n,a)),a.length>0&&t.setSelections(a),xf(o,s.getCursorStates())}}class fKe extends Me{constructor(){super({id:"editor.action.addCursorsToBottom",label:p("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),r=t.getModel().getLineCount(),s=[];for(let l=n[0].startLineNumber;l<=r;l++)s.push(new Be(l,n[0].startColumn,l,n[0].endColumn));const o=t._getViewModel(),a=o.getCursorStates();s.length>0&&t.setSelections(s),xf(a,o.getCursorStates())}}class gKe extends Me{constructor(){super({id:"editor.action.addCursorsToTop",label:p("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),r=[];for(let a=n[0].startLineNumber;a>=1;a--)r.push(new Be(a,n[0].startColumn,a,n[0].endColumn));const s=t._getViewModel(),o=s.getCursorStates();r.length>0&&t.setSelections(r),xf(o,s.getCursorStates())}}class ZS{constructor(e,t,n){this.selections=e,this.revealRange=t,this.revealScrollType=n}}class Jy{static create(e,t){if(!e.hasModel())return null;const n=t.getState();if(!e.hasTextFocus()&&n.isRevealed&&n.searchString.length>0)return new Jy(e,t,!1,n.searchString,n.wholeWord,n.matchCase,null);let r=!1,s,o;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(r=!0,s=!0,o=!0):(s=n.wholeWord,o=n.matchCase);const l=e.getSelection();let c,d=null;if(l.isEmpty()){const u=e.getConfiguredWordAtPosition(l.getStartPosition());if(!u)return null;c=u.word,d=new Be(l.startLineNumber,u.startColumn,l.startLineNumber,u.endColumn)}else c=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new Jy(e,t,r,c,s,o,d)}constructor(e,t,n,r,s,o,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=n,this.searchText=r,this.wholeWord=s,this.matchCase=o,this.currentMatch=a}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new ZS(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new ZS(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const r=this.currentMatch;return this.currentMatch=null,r}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(129):null,!1);return n?new Be(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new ZS(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new ZS(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const r=this.currentMatch;return this.currentMatch=null,r}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(129):null,!1);return n?new Be(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(129):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(129):null,!1,1073741824)}}class mp extends q{static get(e){return e.getContribution(mp.ID)}constructor(e){super(),this._sessionDispose=this._register(new ae),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=Jy.create(this._editor,e);if(!t)return;this._session=t;const n={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(n.wholeWordOverride=1,n.matchCaseOverride=1,n.isRegexOverride=2),e.getState().change(n,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(r=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(r=>{(r.matchCase||r.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const n=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return n?new Be(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const r=e.getState().matchCase;if(!Gee(this._editor.getModel(),t,r)){const o=this._editor.getModel(),a=[];for(let l=0,c=t.length;l<c;l++)a[l]=this._expandEmptyToWord(o,t[l]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const n=e.getState();if(n.isRevealed&&n.searchString.length>0&&n.isRegex){const r=this._editor.getModel();n.searchScope?t=r.findMatches(n.searchString,n.searchScope,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(129):null,!1,1073741824):t=r.findMatches(n.searchString,!0,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(129):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(n.searchScope)}if(t.length>0){const r=this._editor.getSelection();for(let s=0,o=t.length;s<o;s++){const a=t[s];if(a.range.intersectRanges(r)){t[s]=t[0],t[0]=a;break}}this._setSelections(t.map(s=>new Be(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn)))}}}mp.ID="editor.contrib.multiCursorController";class db extends Me{run(e,t){const n=mp.get(t);if(!n)return;const r=t._getViewModel();if(r){const s=r.getCursorStates(),o=Cs.get(t);if(o)this._run(n,o);else{const a=e.get(rt).createInstance(Cs,t);this._run(n,a),a.dispose()}xf(s,r.getCursorStates())}}}class pKe extends db{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:p("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:N.focus,primary:2082,weight:100},menuOpts:{menuId:E.MenubarSelectionMenu,group:"3_multi",title:p({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class mKe extends db{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:p("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:E.MenubarSelectionMenu,group:"3_multi",title:p({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class _Ke extends db{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:p("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:N.focus,primary:Oi(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class bKe extends db{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:p("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class vKe extends db{constructor(){super({id:"editor.action.selectHighlights",label:p("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:N.focus,primary:3114,weight:100},menuOpts:{menuId:E.MenubarSelectionMenu,group:"3_multi",title:p({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class yKe extends db{constructor(){super({id:"editor.action.changeAll",label:p("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:re.and(N.writable,N.editorTextFocus),kbOpts:{kbExpr:N.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class CKe{constructor(e,t,n,r,s){this._model=e,this._searchText=t,this._matchCase=n,this._wordSeparators=r,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,s&&this._model===s._model&&this._searchText===s._searchText&&this._matchCase===s._matchCase&&this._wordSeparators===s._wordSeparators&&this._modelVersionId===s._modelVersionId&&(this._cachedFindMatches=s._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(D.compareRangesUsingStarts)),this._cachedFindMatches}}let eC=rF=class extends q{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(107),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new fn(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(r=>{this._isEnabled=e.getOption(107)})),this._register(e.onDidChangeCursorSelection(r=>{this._isEnabled&&(r.selection.isEmpty()?r.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(r=>{this._setState(null)})),this._register(e.onDidChangeModelContent(r=>{this._isEnabled&&this.updateSoon.schedule()}));const n=Cs.get(e);n&&this._register(n.getState().onFindReplaceStateChange(r=>{this._update()})),this.updateSoon.schedule()}_update(){this._setState(rF._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,n){if(!t||!n.hasModel())return null;const r=n.getSelection();if(r.startLineNumber!==r.endLineNumber)return null;const s=mp.get(n);if(!s)return null;const o=Cs.get(n);if(!o)return null;let a=s.getSession(o);if(!a){const d=n.getSelections();if(d.length>1){const h=o.getState().matchCase;if(!Gee(n.getModel(),d,h))return null}a=Jy.create(n,o)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;const l=o.getState(),c=l.matchCase;if(l.isRevealed){let d=l.searchString;c||(d=d.toLowerCase());let u=a.searchText;if(c||(u=u.toLowerCase()),d===u&&a.matchCase===l.matchCase&&a.wholeWord===l.wholeWord&&!l.isRegex)return null}return new CKe(n.getModel(),a.searchText,a.matchCase,a.wholeWord?n.getOption(129):null,e)}_setState(e){if(this.state=e,!this.state){this._decorations.clear();return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const n=this.state.findMatches(),r=this.editor.getSelections();r.sort(D.compareRangesUsingStarts);const s=[];for(let l=0,c=0,d=n.length,u=r.length;l<d;){const h=n[l];if(c>=u)s.push(h),l++;else{const f=D.compareRangesUsingStarts(h,r[c]);f<0?((r[c].isEmpty()||!D.areIntersecting(h,r[c]))&&s.push(h),l++):(f>0||l++,c++)}}const o=this._languageFeaturesService.documentHighlightProvider.has(t)&&this.editor.getOption(80),a=s.map(l=>({range:l,options:aKe(o)}));this._decorations.set(a)}dispose(){this._setState(null),super.dispose()}};eC.ID="editor.contrib.selectionHighlighter";eC=rF=lKe([cKe(1,Fe)],eC);function Gee(i,e,t){const n=$U(i,e[0],!t);for(let r=1,s=e.length;r<s;r++){const o=e[r];if(o.isEmpty())return!1;const a=$U(i,o,!t);if(n!==a)return!1}return!0}function $U(i,e,t){const n=i.getValueInRange(e);return t?n.toLowerCase():n}class wKe extends Me{constructor(){super({id:"editor.action.focusNextCursor",label:p("mutlicursor.focusNextCursor","Focus Next Cursor"),description:{description:p("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,n){if(!t.hasModel())return;const r=t._getViewModel();if(r.cursorConfig.readOnly)return;r.model.pushStackElement();const s=Array.from(r.getCursorStates()),o=s.shift();o&&(s.push(o),r.setCursorStates(n.source,3,s),r.revealPrimaryCursor(n.source,!0),xf(s,r.getCursorStates()))}}class SKe extends Me{constructor(){super({id:"editor.action.focusPreviousCursor",label:p("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),description:{description:p("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,n){if(!t.hasModel())return;const r=t._getViewModel();if(r.cursorConfig.readOnly)return;r.model.pushStackElement();const s=Array.from(r.getCursorStates()),o=s.pop();o&&(s.unshift(o),r.setCursorStates(n.source,3,s),r.revealPrimaryCursor(n.source,!0),xf(s,r.getCursorStates()))}}$t(mp.ID,mp,4);$t(eC.ID,eC,1);ue(dKe);ue(uKe);ue(hKe);ue(pKe);ue(mKe);ue(_Ke);ue(bKe);ue(vKe);ue(yKe);ue(fKe);ue(gKe);ue(wKe);ue(SKe);var Zee=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const _p={Visible:new Ne("parameterHintsVisible",!1),MultipleSignatures:new Ne("parameterHintsMultipleSignatures",!1)};function Xee(i,e,t,n,r){return Zee(this,void 0,void 0,function*(){const s=i.ordered(e);for(const o of s)try{const a=yield o.provideSignatureHelp(e,t,r,n);if(a)return a}catch(a){Ii(a)}})}Bt.registerCommand("_executeSignatureHelpProvider",(i,...e)=>Zee(void 0,void 0,void 0,function*(){const[t,n,r]=e;dn(Ye.isUri(t)),dn(U.isIPosition(n)),dn(typeof r=="string"||!r);const s=i.get(Fe),o=yield i.get(Vs).createModelReference(t);try{const a=yield Xee(s.signatureHelpProvider,o.object.textEditorModel,U.lift(n),{triggerKind:Oc.Invoke,isRetrigger:!1,triggerCharacter:r},xt.None);return a?(setTimeout(()=>a.dispose(),0),a.value):void 0}finally{o.dispose()}}));var xKe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Ku;(function(i){i.Default={type:0};class e{constructor(r,s){this.request=r,this.previouslyActiveHints=s,this.type=2}}i.Pending=e;class t{constructor(r){this.hints=r,this.type=1}}i.Active=t})(Ku||(Ku={}));class dR extends q{constructor(e,t,n=dR.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new H),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=Ku.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new vr),this.triggerChars=new AT,this.retriggerChars=new AT,this.triggerId=0,this.editor=e,this.providers=t,this.throttledDelayer=new Ha(n),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(r=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(r=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(r=>this.onCursorChange(r))),this._register(this.editor.onDidChangeModelContent(r=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(r=>this.onDidType(r))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=Ku.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const n=this.editor.getModel();if(!n||!this.providers.has(n))return;const r=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(r),t).catch(ut)}next(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t%e===e-1,r=this.editor.getOption(85).cycle;if((e<2||n)&&!r){this.cancel();return}this.updateActiveSignature(n&&r?0:t+1)}previous(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t===0,r=this.editor.getOption(85).cycle;if((e<2||n)&&!r){this.cancel();return}this.updateActiveSignature(n&&r?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new Ku.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:e})),this._onChangedHints.fire(this.state.hints))}doTrigger(e){return xKe(this,void 0,void 0,function*(){const t=this.state.type===1||this.state.type===2,n=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const r=this._pendingTriggers.reduce(TKe);this._pendingTriggers=[];const s={triggerKind:r.triggerKind,triggerCharacter:r.triggerCharacter,isRetrigger:t,activeSignatureHelp:n};if(!this.editor.hasModel())return!1;const o=this.editor.getModel(),a=this.editor.getPosition();this.state=new Ku.Pending(Ui(l=>Xee(this.providers,o,a,s,l)),n);try{const l=yield this.state.request;return e!==this.triggerId?(l==null||l.dispose(),!1):!l||!l.value.signatures||l.value.signatures.length===0?(l==null||l.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new Ku.Active(l.value),this._lastSignatureHelpResult.value=l,this._onChangedHints.fire(this.state.hints),!0)}catch(l){return e===this.triggerId&&(this.state=Ku.Default),ut(l),!1}})}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars.clear(),this.retriggerChars.clear();const e=this.editor.getModel();if(e)for(const t of this.providers.ordered(e)){for(const n of t.signatureHelpTriggerCharacters||[])if(n.length){const r=n.charCodeAt(0);this.triggerChars.add(r),this.retriggerChars.add(r)}for(const n of t.signatureHelpRetriggerCharacters||[])n.length&&this.retriggerChars.add(n.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,n=e.charCodeAt(t);(this.triggerChars.has(n)||this.isTriggered&&this.retriggerChars.has(n))&&this.trigger({triggerKind:Oc.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:Oc.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:Oc.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(85).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}dR.DEFAULT_DELAY=120;function TKe(i,e){switch(e.triggerKind){case Oc.Invoke:return e;case Oc.ContentChange:return i;case Oc.TriggerCharacter:default:return e}}var kKe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},xN=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},sF;const ho=ce,LKe=gi("parameter-hints-next",me.chevronDown,p("parameterHintsNextIcon","Icon for show next parameter hint.")),DKe=gi("parameter-hints-previous",me.chevronUp,p("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let fL=sF=class extends q{constructor(e,t,n,r,s){super(),this.editor=e,this.model=t,this.renderDisposeables=this._register(new ae),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new pu({editor:e},s,r)),this.keyVisible=_p.Visible.bindTo(n),this.keyMultipleSignatures=_p.MultipleSignatures.bindTo(n)}createParameterHintDOMNodes(){const e=ho(".editor-widget.parameter-hints-widget"),t=se(e,ho(".phwrapper"));t.tabIndex=-1;const n=se(t,ho(".controls")),r=se(n,ho(".button"+Qe.asCSSSelector(DKe))),s=se(n,ho(".overloads")),o=se(n,ho(".button"+Qe.asCSSSelector(LKe)));this._register(ee(r,"click",h=>{_t.stop(h),this.previous()})),this._register(ee(o,"click",h=>{_t.stop(h),this.next()}));const a=ho(".body"),l=new KC(a,{alwaysConsumeMouseWheel:!0});this._register(l),t.appendChild(l.getDomNode());const c=se(a,ho(".signature")),d=se(a,ho(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:c,overloads:s,docs:d,scrollbar:l},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(h=>{this.visible&&this.editor.layoutContentWidget(this)}));const u=()=>{if(!this.domNodes)return;const h=this.editor.getOption(50);this.domNodes.element.style.fontSize=`${h.fontSize}px`,this.domNodes.element.style.lineHeight=`${h.lineHeight/h.fontSize}`};u(),this._register(Re.chain(this.editor.onDidChangeConfiguration.bind(this.editor),h=>h.filter(f=>f.hasChanged(50)))(u)),this._register(this.editor.onDidLayoutChange(h=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{var e;(e=this.domNodes)===null||e===void 0||e.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){var e;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,(e=this.domNodes)===null||e===void 0||e.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;const n=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",n),this.keyMultipleSignatures.set(n),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const r=e.signatures[e.activeSignature];if(!r)return;const s=se(this.domNodes.signature,ho(".code")),o=this.editor.getOption(50);s.style.fontSize=`${o.fontSize}px`,s.style.fontFamily=o.fontFamily;const a=r.parameters.length>0,l=(t=r.activeParameter)!==null&&t!==void 0?t:e.activeParameter;if(a)this.renderParameters(s,r,l);else{const u=se(s,ho("span"));u.textContent=r.label}const c=r.parameters[l];if(c!=null&&c.documentation){const u=ho("span.documentation");if(typeof c.documentation=="string")u.textContent=c.documentation;else{const h=this.renderMarkdownDocs(c.documentation);u.appendChild(h.element)}se(this.domNodes.docs,ho("p",{},u))}if(r.documentation!==void 0)if(typeof r.documentation=="string")se(this.domNodes.docs,ho("p",{},r.documentation));else{const u=this.renderMarkdownDocs(r.documentation);se(this.domNodes.docs,u.element)}const d=this.hasDocs(r,c);if(this.domNodes.signature.classList.toggle("has-docs",d),this.domNodes.docs.classList.toggle("empty",!d),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,c){let u="";const h=r.parameters[l];Array.isArray(h.label)?u=r.label.substring(h.label[0],h.label[1]):u=h.label,h.documentation&&(u+=typeof h.documentation=="string"?`, ${h.documentation}`:`, ${h.documentation.value}`),r.documentation&&(u+=typeof r.documentation=="string"?`, ${r.documentation}`:`, ${r.documentation.value}`),this.announcedLabel!==u&&(jr(p("hint","{0}, hint",u)),this.announcedLabel=u)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var n;(n=this.domNodes)===null||n===void 0||n.scrollbar.scanDomNode()}}));return t.element.classList.add("markdown-docs"),t}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&cg(t.documentation).length>0||t&&typeof t.documentation=="object"&&cg(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&cg(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&cg(e.documentation.value).length>0)}renderParameters(e,t,n){const[r,s]=this.getParameterLabelOffsets(t,n),o=document.createElement("span");o.textContent=t.label.substring(0,r);const a=document.createElement("span");a.textContent=t.label.substring(r,s),a.className="parameter active";const l=document.createElement("span");l.textContent=t.label.substring(s),se(e,o,a,l)}getParameterLabelOffsets(e,t){const n=e.parameters[t];if(n){if(Array.isArray(n.label))return n.label;if(n.label.length){const r=new RegExp(`(\\W|^)${No(n.label)}(?=\\W|$)`,"g");r.test(e.label);const s=r.lastIndex-n.label.length;return s>=0?[s,r.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return sF.ID}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const n=this.domNodes.element.getElementsByClassName("phwrapper");n.length&&(n[0].style.maxHeight=t)}};fL.ID="editor.widget.parameterHintsWidget";fL=sF=kKe([xN(2,ot),xN(3,lo),xN(4,Fn)],fL);P("editorHoverWidget.highlightForeground",{dark:Da,light:Da,hcDark:Da,hcLight:Da},p("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));var IKe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},KU=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},oF;let bp=oF=class extends q{static get(e){return e.getContribution(oF.ID)}constructor(e,t,n){super(),this.editor=e,this.model=this._register(new dR(e,n.signatureHelpProvider)),this._register(this.model.onChangedHints(r=>{var s;r?(this.widget.value.show(),this.widget.value.render(r)):(s=this.widget.rawValue)===null||s===void 0||s.hide()})),this.widget=new _f(()=>this._register(t.createInstance(fL,this.editor,this.model)))}cancel(){this.model.cancel()}previous(){var e;(e=this.widget.rawValue)===null||e===void 0||e.previous()}next(){var e;(e=this.widget.rawValue)===null||e===void 0||e.next()}trigger(e){this.model.trigger(e,0)}};bp.ID="editor.controller.parameterHints";bp=oF=IKe([KU(1,rt),KU(2,Fe)],bp);class RKe extends Me{constructor(){super({id:"editor.action.triggerParameterHints",label:p("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:N.hasSignatureHelpProvider,kbOpts:{kbExpr:N.editorTextFocus,primary:3082,weight:100}})}run(e,t){const n=bp.get(t);n==null||n.trigger({triggerKind:Oc.Invoke})}}$t(bp.ID,bp,2);ue(RKe);const x9=100+75,T9=sr.bindToContribution(bp.get);ye(new T9({id:"closeParameterHints",precondition:_p.Visible,handler:i=>i.cancel(),kbOpts:{weight:x9,kbExpr:N.focus,primary:9,secondary:[1033]}}));ye(new T9({id:"showPrevParameterHint",precondition:re.and(_p.Visible,_p.MultipleSignatures),handler:i=>i.previous(),kbOpts:{weight:x9,kbExpr:N.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));ye(new T9({id:"showNextParameterHint",precondition:re.and(_p.Visible,_p.MultipleSignatures),handler:i=>i.next(),kbOpts:{weight:x9,kbExpr:N.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var EKe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},TN=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const uR=new Ne("renameInputVisible",!1,p("renameInputVisible","Whether the rename input widget is visible"));let aF=class{constructor(e,t,n,r,s){this._editor=e,this._acceptKeybindings=t,this._themeService=n,this._keybindingService=r,this._disposables=new ae,this.allowEditorOverflow=!0,this._visibleContextKey=uR.bindTo(s),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(o=>{o.hasChanged(50)&&this._updateFont()})),this._disposables.add(n.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",p("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode}_updateStyles(e){var t,n,r,s;if(!this._input||!this._domNode)return;const o=e.getColor(xc),a=e.getColor(a5);this._domNode.style.backgroundColor=String((t=e.getColor(si))!==null&&t!==void 0?t:""),this._domNode.style.boxShadow=o?` 0 0 8px 2px ${o}`:"",this._domNode.style.border=a?`1px solid ${a}`:"",this._domNode.style.color=String((n=e.getColor(wZ))!==null&&n!==void 0?n:""),this._input.style.backgroundColor=String((r=e.getColor(CZ))!==null&&r!==void 0?r:"");const l=e.getColor(SZ);this._input.style.borderWidth=l?"1px":"0px",this._input.style.borderStyle=l?"solid":"none",this._input.style.borderColor=(s=l==null?void 0:l.toString())!==null&&s!==void 0?s:"none"}_updateFont(){if(!this._input||!this._label)return;const e=this._editor.getOption(50);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize=`${e.fontSize}px`,this._label.style.fontSize=`${e.fontSize*.8}px`}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}beforeRender(){var e,t;const[n,r]=this._acceptKeybindings;return this._label.innerText=p({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(e=this._keybindingService.lookupKeybinding(n))===null||e===void 0?void 0:e.getLabel(),(t=this._keybindingService.lookupKeybinding(r))===null||t===void 0?void 0:t.getLabel()),null}afterRender(e){e||this.cancelInput(!0)}acceptInput(e){var t;(t=this._currentAcceptInput)===null||t===void 0||t.call(this,e)}cancelInput(e){var t;(t=this._currentCancelInput)===null||t===void 0||t.call(this,e)}getInput(e,t,n,r,s,o){this._domNode.classList.toggle("preview",s),this._position=new U(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",n.toString()),this._input.setAttribute("selectionEnd",r.toString()),this._input.size=Math.max((e.endColumn-e.startColumn)*1.1,20);const a=new ae;return new Promise(l=>{this._currentCancelInput=c=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,l(c),!0),this._currentAcceptInput=c=>{if(this._input.value.trim().length===0||this._input.value===t){this.cancelInput(!0);return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,l({newName:this._input.value,wantsPreview:s&&c})},a.add(o.onCancellationRequested(()=>this.cancelInput(!0))),a.add(this._editor.onDidBlurEditorWidget(()=>{var c;return this.cancelInput(!(!((c=this._domNode)===null||c===void 0)&&c.ownerDocument.hasFocus()))})),this._show()}).finally(()=>{a.dispose(),this._hide()})}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))},100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}};aF=EKe([TN(2,qi),TN(3,bn),TN(4,ot)],aF);var NKe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Of=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Ng=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},lF;class k9{constructor(e,t,n){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=n.ordered(e)}hasProvider(){return this._providers.length>0}resolveRenameLocation(e){return Ng(this,void 0,void 0,function*(){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const r=this._providers[this._providerRenameIdx];if(!r.resolveRenameLocation)break;const s=yield r.resolveRenameLocation(this.model,this.position,e);if(s){if(s.rejectReason){t.push(s.rejectReason);continue}return s}}const n=this.model.getWordAtPosition(this.position);return n?{range:new D(this.position.lineNumber,n.startColumn,this.position.lineNumber,n.endColumn),text:n.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:D.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}})}provideRenameEdits(e,t){return Ng(this,void 0,void 0,function*(){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)})}_provideRenameEdits(e,t,n,r){return Ng(this,void 0,void 0,function*(){const s=this._providers[t];if(!s)return{edits:[],rejectReason:n.join(`
`)};const o=yield s.provideRenameEdits(this.model,this.position,e,r);if(o){if(o.rejectReason)return this._provideRenameEdits(e,t+1,n.concat(o.rejectReason),r)}else return this._provideRenameEdits(e,t+1,n.concat(p("no result","No result.")),r);return o})}}function AKe(i,e,t,n){return Ng(this,void 0,void 0,function*(){const r=new k9(e,t,i),s=yield r.resolveRenameLocation(xt.None);return s!=null&&s.rejectReason?{edits:[],rejectReason:s.rejectReason}:r.provideRenameEdits(n,xt.None)})}let vp=lF=class{static get(e){return e.getContribution(lF.ID)}constructor(e,t,n,r,s,o,a,l){this.editor=e,this._instaService=t,this._notificationService=n,this._bulkEditService=r,this._progressService=s,this._logService=o,this._configService=a,this._languageFeaturesService=l,this._disposableStore=new ae,this._cts=new vi,this._renameInputField=this._disposableStore.add(this._instaService.createInstance(aF,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}run(){var e,t;return Ng(this,void 0,void 0,function*(){if(this._cts.dispose(!0),this._cts=new vi,!this.editor.hasModel())return;const n=this.editor.getPosition(),r=new k9(this.editor.getModel(),n,this._languageFeaturesService.renameProvider);if(!r.hasProvider())return;const s=new Xh(this.editor,5,void 0,this._cts.token);let o;try{const g=r.resolveRenameLocation(s.token);this._progressService.showWhile(g,250),o=yield g}catch(g){(e=eo.get(this.editor))===null||e===void 0||e.showMessage(g||p("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),n);return}finally{s.dispose()}if(!o)return;if(o.rejectReason){(t=eo.get(this.editor))===null||t===void 0||t.showMessage(o.rejectReason,n);return}if(s.token.isCancellationRequested)return;const a=new Xh(this.editor,5,o.range,this._cts.token),l=this.editor.getSelection();let c=0,d=o.text.length;!D.isEmpty(l)&&!D.spansMultipleLines(l)&&D.containsRange(o.range,l)&&(c=Math.max(0,l.startColumn-o.range.startColumn),d=Math.min(o.range.endColumn,l.endColumn)-o.range.startColumn);const u=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),h=yield this._renameInputField.getInput(o.range,o.text,c,d,u,a.token);if(typeof h=="boolean"){h&&this.editor.focus(),a.dispose();return}this.editor.focus();const f=SD(r.provideRenameEdits(h.newName,a.token),a.token).then(g=>Ng(this,void 0,void 0,function*(){if(!(!g||!this.editor.hasModel())){if(g.rejectReason){this._notificationService.info(g.rejectReason);return}this.editor.setSelection(D.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(g,{editor:this.editor,showPreview:h.wantsPreview,label:p("label","Renaming '{0}' to '{1}'",o==null?void 0:o.text,h.newName),code:"undoredo.rename",quotableLabel:p("quotableLabel","Renaming {0} to {1}",o==null?void 0:o.text,h.newName),respectAutoSaveConfig:!0}).then(m=>{m.ariaSummary&&jr(p("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",o.text,h.newName,m.ariaSummary))}).catch(m=>{this._notificationService.error(p("rename.failedApply","Rename failed to apply edits")),this._logService.error(m)})}}),g=>{this._notificationService.error(p("rename.failed","Rename failed to compute edits")),this._logService.error(g)}).finally(()=>{a.dispose()});return this._progressService.showWhile(f,250),f})}acceptRenameInput(e){this._renameInputField.acceptInput(e)}cancelRenameInput(){this._renameInputField.cancelInput(!0)}};vp.ID="editor.contrib.renameController";vp=lF=NKe([Of(1,rt),Of(2,wi),Of(3,QC),Of(4,Cf),Of(5,Vo),Of(6,J3),Of(7,Fe)],vp);class PKe extends Me{constructor(){super({id:"editor.action.rename",label:p("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:re.and(N.writable,N.hasRenameProvider),kbOpts:{kbExpr:N.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const n=e.get(Jt),[r,s]=Array.isArray(t)&&t||[void 0,void 0];return Ye.isUri(r)&&U.isIPosition(s)?n.openCodeEditor({resource:r},n.getActiveCodeEditor()).then(o=>{o&&(o.setPosition(s),o.invokeWithinContext(a=>(this.reportTelemetry(a,o),this.run(a,o))))},ut):super.runCommand(e,t)}run(e,t){const n=vp.get(t);return n?n.run():Promise.resolve()}}$t(vp.ID,vp,4);ue(PKe);const L9=sr.bindToContribution(vp.get);ye(new L9({id:"acceptRenameInput",precondition:uR,handler:i=>i.acceptRenameInput(!1),kbOpts:{weight:100+99,kbExpr:re.and(N.focus,re.not("isComposing")),primary:3}}));ye(new L9({id:"acceptRenameInputWithPreview",precondition:re.and(uR,re.has("config.editor.rename.enablePreview")),handler:i=>i.acceptRenameInput(!0),kbOpts:{weight:100+99,kbExpr:re.and(N.focus,re.not("isComposing")),primary:1024+3}}));ye(new L9({id:"cancelRenameInput",precondition:uR,handler:i=>i.cancelRenameInput(),kbOpts:{weight:100+99,kbExpr:N.focus,primary:9,secondary:[1033]}}));hd("_executeDocumentRenameProvider",function(i,e,t,...n){const[r]=n;dn(typeof r=="string");const{renameProvider:s}=i.get(Fe);return AKe(s,e,t,r)});hd("_executePrepareRename",function(i,e,t){return Ng(this,void 0,void 0,function*(){const{renameProvider:n}=i.get(Fe),s=yield new k9(e,t,n).resolveRenameLocation(xt.None);if(s!=null&&s.rejectReason)throw new Error(s.rejectReason);return s})});qn.as(Zl.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:p("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});function MKe(i){for(let e=0,t=i.length;e<t;e+=4){const n=i[e+0],r=i[e+1],s=i[e+2],o=i[e+3];i[e+0]=o,i[e+1]=s,i[e+2]=r,i[e+3]=n}}function OKe(i){const e=new Uint8Array(i.buffer,i.byteOffset,i.length*4);return Mq()||MKe(e),LD.wrap(e)}function Yee(i){const e=new Uint32Array(FKe(i));let t=0;if(e[t++]=i.id,i.type==="full")e[t++]=1,e[t++]=i.data.length,e.set(i.data,t),t+=i.data.length;else{e[t++]=2,e[t++]=i.deltas.length;for(const n of i.deltas)e[t++]=n.start,e[t++]=n.deleteCount,n.data?(e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length):e[t++]=0}return OKe(e)}function FKe(i){let e=0;if(e+=1+1,i.type==="full")e+=1+i.data.length;else{e+=1,e+=(1+1+1)*i.deltas.length;for(const t of i.deltas)t.data&&(e+=t.data.length)}return e}var lf=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function hR(i){return i&&!!i.data}function Qee(i){return i&&Array.isArray(i.edits)}class BKe{constructor(e,t,n){this.provider=e,this.tokens=t,this.error=n}}function Jee(i,e){return i.has(e)}function WKe(i,e){const t=i.orderedGroups(e);return t.length>0?t[0]:[]}function ete(i,e,t,n,r){return lf(this,void 0,void 0,function*(){const s=WKe(i,e),o=yield Promise.all(s.map(a=>lf(this,void 0,void 0,function*(){let l,c=null;try{l=yield a.provideDocumentSemanticTokens(e,a===t?n:null,r)}catch(d){c=d,l=null}return(!l||!hR(l)&&!Qee(l))&&(l=null),new BKe(a,l,c)})));for(const a of o){if(a.error)throw a.error;if(a.tokens)return a}return o.length>0?o[0]:null})}function VKe(i,e){const t=i.orderedGroups(e);return t.length>0?t[0]:null}class HKe{constructor(e,t){this.provider=e,this.tokens=t}}function UKe(i,e){return i.has(e)}function tte(i,e){const t=i.orderedGroups(e);return t.length>0?t[0]:[]}function D9(i,e,t,n){return lf(this,void 0,void 0,function*(){const r=tte(i,e),s=yield Promise.all(r.map(o=>lf(this,void 0,void 0,function*(){let a;try{a=yield o.provideDocumentRangeSemanticTokens(e,t,n)}catch(l){Ii(l),a=null}return(!a||!hR(a))&&(a=null),new HKe(o,a)})));for(const o of s)if(o.tokens)return o;return s.length>0?s[0]:null})}Bt.registerCommand("_provideDocumentSemanticTokensLegend",(i,...e)=>lf(void 0,void 0,void 0,function*(){const[t]=e;dn(t instanceof Ye);const n=i.get(zn).getModel(t);if(!n)return;const{documentSemanticTokensProvider:r}=i.get(Fe),s=VKe(r,n);return s?s[0].getLegend():i.get(oi).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)}));Bt.registerCommand("_provideDocumentSemanticTokens",(i,...e)=>lf(void 0,void 0,void 0,function*(){const[t]=e;dn(t instanceof Ye);const n=i.get(zn).getModel(t);if(!n)return;const{documentSemanticTokensProvider:r}=i.get(Fe);if(!Jee(r,n))return i.get(oi).executeCommand("_provideDocumentRangeSemanticTokens",t,n.getFullModelRange());const s=yield ete(r,n,null,null,xt.None);if(!s)return;const{provider:o,tokens:a}=s;if(!a||!hR(a))return;const l=Yee({id:0,type:"full",data:a.data});return a.resultId&&o.releaseDocumentSemanticTokens(a.resultId),l}));Bt.registerCommand("_provideDocumentRangeSemanticTokensLegend",(i,...e)=>lf(void 0,void 0,void 0,function*(){const[t,n]=e;dn(t instanceof Ye);const r=i.get(zn).getModel(t);if(!r)return;const{documentRangeSemanticTokensProvider:s}=i.get(Fe),o=tte(s,r);if(o.length===0)return;if(o.length===1)return o[0].getLegend();if(!n||!D.isIRange(n))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),o[0].getLegend();const a=yield D9(s,r,D.lift(n),xt.None);if(a)return a.provider.getLegend()}));Bt.registerCommand("_provideDocumentRangeSemanticTokens",(i,...e)=>lf(void 0,void 0,void 0,function*(){const[t,n]=e;dn(t instanceof Ye),dn(D.isIRange(n));const r=i.get(zn).getModel(t);if(!r)return;const{documentRangeSemanticTokensProvider:s}=i.get(Fe),o=yield D9(s,r,D.lift(n),xt.None);if(!(!o||!o.tokens))return Yee({id:0,type:"full",data:o.tokens.data})}));const I9="editor.semanticHighlighting";function cF(i,e,t){var n;const r=(n=t.getValue(I9,{overrideIdentifier:i.getLanguageId(),resource:i.uri}))===null||n===void 0?void 0:n.enabled;return typeof r=="boolean"?r:e.getColorTheme().semanticHighlighting}var nte=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},uc=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},ju;let dF=class extends q{constructor(e,t,n,r,s,o){super(),this._watchers=Object.create(null);const a=d=>{this._watchers[d.uri.toString()]=new tC(d,e,n,s,o)},l=(d,u)=>{u.dispose(),delete this._watchers[d.uri.toString()]},c=()=>{for(const d of t.getModels()){const u=this._watchers[d.uri.toString()];cF(d,n,r)?u||a(d):u&&l(d,u)}};this._register(t.onModelAdded(d=>{cF(d,n,r)&&a(d)})),this._register(t.onModelRemoved(d=>{const u=this._watchers[d.uri.toString()];u&&l(d,u)})),this._register(r.onDidChangeConfiguration(d=>{d.affectsConfiguration(I9)&&c()})),this._register(n.onDidColorThemeChange(c))}dispose(){for(const e of Object.values(this._watchers))e.dispose();super.dispose()}};dF=nte([uc(0,ZD),uc(1,zn),uc(2,qi),uc(3,Et),uc(4,pa),uc(5,Fe)],dF);let tC=ju=class extends q{constructor(e,t,n,r,s){super(),this._semanticTokensStylingService=t,this._isDisposed=!1,this._model=e,this._provider=s.documentSemanticTokensProvider,this._debounceInformation=r.for(this._provider,"DocumentSemanticTokens",{min:ju.REQUEST_MIN_DELAY,max:ju.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new fn(()=>this._fetchDocumentSemanticTokensNow(),ju.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._providersChangedDuringRequest=!1,this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeAttached(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const o=()=>{an(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const a of this._provider.all(e))typeof a.onDidChange=="function"&&this._documentProvidersChangeListeners.push(a.onDidChange(()=>{if(this._currentDocumentRequestCancellationTokenSource){this._providersChangedDuringRequest=!0;return}this._fetchDocumentSemanticTokens.schedule(0)}))};o(),this._register(this._provider.onDidChange(()=>{o(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(n.onDidColorThemeChange(a=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),an(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[],this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!Jee(this._provider,this._model)){this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1);return}if(!this._model.isAttachedToEditor())return;const e=new vi,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,n=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,r=ete(this._provider,this._model,t,n,e.token);this._currentDocumentRequestCancellationTokenSource=e,this._providersChangedDuringRequest=!1;const s=[],o=this._model.onDidChangeContent(l=>{s.push(l)}),a=new qr(!1);r.then(l=>{if(this._debounceInformation.update(this._model,a.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),!l)this._setDocumentSemanticTokens(null,null,null,s);else{const{provider:c,tokens:d}=l,u=this._semanticTokensStylingService.getStyling(c);this._setDocumentSemanticTokens(c,d||null,u,s)}},l=>{l&&(ql(l)||typeof l.message=="string"&&l.message.indexOf("busy")!==-1)||ut(l),this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),(s.length>0||this._providersChangedDuringRequest)&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(e,t,n,r,s){s=Math.min(s,n.length-r,e.length-t);for(let o=0;o<s;o++)n[r+o]=e[t+o]}_setDocumentSemanticTokens(e,t,n,r){const s=this._currentDocumentResponse,o=()=>{(r.length>0||this._providersChangedDuringRequest)&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!n){this._model.tokenization.setSemanticTokens(null,!1);return}if(!t){this._model.tokenization.setSemanticTokens(null,!0),o();return}if(Qee(t)){if(!s){this._model.tokenization.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:s.data};else{let a=0;for(const h of t.edits)a+=(h.data?h.data.length:0)-h.deleteCount;const l=s.data,c=new Uint32Array(l.length+a);let d=l.length,u=c.length;for(let h=t.edits.length-1;h>=0;h--){const f=t.edits[h];if(f.start>l.length){n.warnInvalidEditStart(s.resultId,t.resultId,h,f.start,l.length),this._model.tokenization.setSemanticTokens(null,!0);return}const g=d-(f.start+f.deleteCount);g>0&&(ju._copy(l,d-g,c,u-g,g),u-=g),f.data&&(ju._copy(f.data,0,c,u-f.data.length,f.data.length),u-=f.data.length),d=f.start}d>0&&ju._copy(l,0,c,0,d),t={resultId:t.resultId,data:c}}}if(hR(t)){this._currentDocumentResponse=new jKe(e,t.resultId,t.data);const a=FX(t,n,this._model.getLanguageId());if(r.length>0)for(const l of r)for(const c of a)for(const d of l.changes)c.applyEdit(d.range,d.text);this._model.tokenization.setSemanticTokens(a,!0)}else this._model.tokenization.setSemanticTokens(null,!0);o()}};tC.REQUEST_MIN_DELAY=300;tC.REQUEST_MAX_DELAY=2e3;tC=ju=nte([uc(1,ZD),uc(2,qi),uc(3,pa),uc(4,Fe)],tC);class jKe{constructor(e,t,n){this.provider=e,this.resultId=t,this.data=n}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}mI(dF);var zKe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Xb=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let nC=class extends q{constructor(e,t,n,r,s,o){super(),this._semanticTokensStylingService=t,this._themeService=n,this._configurationService=r,this._editor=e,this._provider=o.documentRangeSemanticTokensProvider,this._debounceInformation=s.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new fn(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];const a=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange(()=>{a()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),a()})),this._register(this._editor.onDidChangeModelContent(l=>{this._cancelAll(),a()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),a()})),this._register(this._configurationService.onDidChangeConfiguration(l=>{l.affectsConfiguration(I9)&&(this._cancelAll(),a())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),a()})),a()}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,n=this._outstandingRequests.length;t<n;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.tokenization.hasCompleteSemanticTokens())return;if(!cF(e,this._themeService,this._configurationService)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}if(!UKe(this._provider,e)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(n=>this._requestRange(e,n)))}_requestRange(e,t){const n=e.getVersionId(),r=Ui(o=>Promise.resolve(D9(this._provider,e,t,o))),s=new qr(!1);return r.then(o=>{if(this._debounceInformation.update(e,s.elapsed()),!o||!o.tokens||e.isDisposed()||e.getVersionId()!==n)return;const{provider:a,tokens:l}=o,c=this._semanticTokensStylingService.getStyling(a);e.tokenization.setPartialSemanticTokens(t,FX(l,c,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(r),()=>this._removeOutstandingRequest(r)),r}};nC.ID="editor.contrib.viewportSemanticTokens";nC=zKe([Xb(1,ZD),Xb(2,qi),Xb(3,Et),Xb(4,pa),Xb(5,Fe)],nC);$t(nC.ID,nC,1);class $Ke{constructor(e=!0){this.selectSubwords=e}provideSelectionRanges(e,t){const n=[];for(const r of t){const s=[];n.push(s),this.selectSubwords&&this._addInWordRanges(s,e,r),this._addWordRanges(s,e,r),this._addWhitespaceLine(s,e,r),s.push({range:e.getFullModelRange()})}return n}_addInWordRanges(e,t,n){const r=t.getWordAtPosition(n);if(!r)return;const{word:s,startColumn:o}=r,a=n.column-o;let l=a,c=a,d=0;for(;l>=0;l--){const u=s.charCodeAt(l);if(l!==a&&(u===95||u===45))break;if(eh(u)&&lc(d))break;d=u}for(l+=1;c<s.length;c++){const u=s.charCodeAt(c);if(lc(u)&&eh(d))break;if(u===95||u===45)break;d=u}l<c&&e.push({range:new D(n.lineNumber,o+l,n.lineNumber,o+c)})}_addWordRanges(e,t,n){const r=t.getWordAtPosition(n);r&&e.push({range:new D(n.lineNumber,r.startColumn,n.lineNumber,r.endColumn)})}_addWhitespaceLine(e,t,n){t.getLineLength(n.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(n.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(n.lineNumber)===0&&e.push({range:new D(n.lineNumber,1,n.lineNumber,t.getLineMaxColumn(n.lineNumber))})}}var KKe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},qKe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},fR=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},uF;class R9{constructor(e,t){this.index=e,this.ranges=t}mov(e){const t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const n=new R9(t,this.ranges);return n.ranges[t].equalsRange(this.ranges[this.index])?n.mov(e):n}}let D1=uF=class{static get(e){return e.getContribution(uF.ID)}constructor(e,t){this._editor=e,this._languageFeaturesService=t,this._ignoreSelection=!1}dispose(){var e;(e=this._selectionListener)===null||e===void 0||e.dispose()}run(e){return fR(this,void 0,void 0,function*(){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),n=this._editor.getModel();if(this._state||(yield rte(this._languageFeaturesService.selectionRangeProvider,n,t.map(s=>s.getPosition()),this._editor.getOption(112),xt.None).then(s=>{var o;if(!(!zr(s)||s.length!==t.length)&&!(!this._editor.hasModel()||!fi(this._editor.getSelections(),t,(a,l)=>a.equalsSelection(l)))){for(let a=0;a<s.length;a++)s[a]=s[a].filter(l=>l.containsPosition(t[a].getStartPosition())&&l.containsPosition(t[a].getEndPosition())),s[a].unshift(t[a]);this._state=s.map(a=>new R9(0,a)),(o=this._selectionListener)===null||o===void 0||o.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)===null||a===void 0||a.dispose(),this._state=void 0)})}})),!this._state)return;this._state=this._state.map(s=>s.mov(e));const r=this._state.map(s=>Be.fromPositions(s.ranges[s.index].getStartPosition(),s.ranges[s.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(r)}finally{this._ignoreSelection=!1}})}};D1.ID="editor.contrib.smartSelectController";D1=uF=KKe([qKe(1,Fe)],D1);class ite extends Me{constructor(e,t){super(t),this._forward=e}run(e,t){return fR(this,void 0,void 0,function*(){const n=D1.get(t);n&&(yield n.run(this._forward))})}}class GKe extends ite{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:p("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:N.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:E.MenubarSelectionMenu,group:"1_basic",title:p({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}Bt.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class ZKe extends ite{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:p("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:N.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:E.MenubarSelectionMenu,group:"1_basic",title:p({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}$t(D1.ID,D1,4);ue(GKe);ue(ZKe);function rte(i,e,t,n,r){return fR(this,void 0,void 0,function*(){const s=i.all(e).concat(new $Ke(n.selectSubwords));s.length===1&&s.unshift(new _o);const o=[],a=[];for(const l of s)o.push(Promise.resolve(l.provideSelectionRanges(e,t,r)).then(c=>{if(zr(c)&&c.length===t.length)for(let d=0;d<t.length;d++){a[d]||(a[d]=[]);for(const u of c[d])D.isIRange(u.range)&&D.containsPosition(u.range,t[d])&&a[d].push(D.lift(u.range))}},Ii));return yield Promise.all(o),a.map(l=>{if(l.length===0)return[];l.sort((h,f)=>U.isBefore(h.getStartPosition(),f.getStartPosition())?1:U.isBefore(f.getStartPosition(),h.getStartPosition())||U.isBefore(h.getEndPosition(),f.getEndPosition())?-1:U.isBefore(f.getEndPosition(),h.getEndPosition())?1:0);const c=[];let d;for(const h of l)(!d||D.containsRange(h,d)&&!D.equalsRange(h,d))&&(c.push(h),d=h);if(!n.selectLeadingAndTrailingWhitespace)return c;const u=[c[0]];for(let h=1;h<c.length;h++){const f=c[h-1],g=c[h];if(g.startLineNumber!==f.startLineNumber||g.endLineNumber!==f.endLineNumber){const m=new D(f.startLineNumber,e.getLineFirstNonWhitespaceColumn(f.startLineNumber),f.endLineNumber,e.getLineLastNonWhitespaceColumn(f.endLineNumber));m.containsRange(f)&&!m.equalsRange(f)&&g.containsRange(m)&&!g.equalsRange(m)&&u.push(m);const y=new D(f.startLineNumber,1,f.endLineNumber,e.getLineMaxColumn(f.endLineNumber));y.containsRange(f)&&!y.equalsRange(m)&&g.containsRange(y)&&!g.equalsRange(y)&&u.push(y)}u.push(g)}return u})})}Bt.registerCommand("_executeSelectionRangeProvider",function(i,...e){return fR(this,void 0,void 0,function*(){const[t,n]=e;dn(Ye.isUri(t));const r=i.get(Fe).selectionRangeProvider,s=yield i.get(Vs).createModelReference(t);try{return rte(r,s.object.textEditorModel,n,{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},xt.None)}finally{s.dispose()}})});const XKe=Object.freeze({View:{value:p("view","View"),original:"View"},Help:{value:p("help","Help"),original:"Help"},Test:{value:p("test","Test"),original:"Test"},File:{value:p("file","File"),original:"File"},Preferences:{value:p("preferences","Preferences"),original:"Preferences"},Developer:{value:p({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer"),original:"Developer"}});var YKe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class qU{constructor(e,t,n,r=null){this.startLineNumbers=e,this.endLineNumbers=t,this.lastLineRelativePosition=n,this.showEndForLine=r}equals(e){return!!e&&this.lastLineRelativePosition===e.lastLineRelativePosition&&this.showEndForLine===e.showEndForLine&&fi(this.startLineNumbers,e.startLineNumbers)&&fi(this.endLineNumbers,e.endLineNumbers)}}const GU=vu("stickyScrollViewLayer",{createHTML:i=>i}),kN="data-sticky-line-index",ZU="data-sticky-is-line",QKe="data-sticky-is-line-number",XU="data-sticky-is-folding-icon";class JKe extends q{constructor(e){super(),this._editor=e,this._foldingIconStore=new ae,this._rootDomNode=document.createElement("div"),this._lineNumbersDomNode=document.createElement("div"),this._linesDomNodeScrollable=document.createElement("div"),this._linesDomNode=document.createElement("div"),this._lineHeight=this._editor.getOption(66),this._stickyLines=[],this._lineNumbers=[],this._lastLineRelativePosition=0,this._minContentWidthInPx=0,this._isOnGlyphMargin=!1,this._lineNumbersDomNode.className="sticky-widget-line-numbers",this._lineNumbersDomNode.setAttribute("role","none"),this._linesDomNode.className="sticky-widget-lines",this._linesDomNode.setAttribute("role","list"),this._linesDomNodeScrollable.className="sticky-widget-lines-scrollable",this._linesDomNodeScrollable.appendChild(this._linesDomNode),this._rootDomNode.className="sticky-widget",this._rootDomNode.classList.toggle("peek",e instanceof Jh),this._rootDomNode.appendChild(this._lineNumbersDomNode),this._rootDomNode.appendChild(this._linesDomNodeScrollable);const t=()=>{this._linesDomNode.style.left=this._editor.getOption(114).scrollWithEditor?`-${this._editor.getScrollLeft()}px`:"0px"};this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(114)&&t(),n.hasChanged(66)&&(this._lineHeight=this._editor.getOption(66))})),this._register(this._editor.onDidScrollChange(n=>{n.scrollLeftChanged&&t(),n.scrollWidthChanged&&this._updateWidgetWidth()})),this._register(this._editor.onDidChangeModel(()=>{t(),this._updateWidgetWidth()})),this._register(this._foldingIconStore),t(),this._register(this._editor.onDidLayoutChange(n=>{this._updateWidgetWidth()})),this._updateWidgetWidth()}get lineNumbers(){return this._lineNumbers}get lineNumberCount(){return this._lineNumbers.length}getStickyLineForLine(e){return this._stickyLines.find(t=>t.lineNumber===e)}getCurrentLines(){return this._lineNumbers}setState(e,t,n=1/0){if((!this._previousState&&!e||this._previousState&&this._previousState.equals(e))&&n===1/0)return;this._previousState=e;const r=this._stickyLines;if(this._clearStickyWidget(),!e||!this._editor._getViewModel())return;if(e.startLineNumbers.length*this._lineHeight+e.lastLineRelativePosition>0){this._lastLineRelativePosition=e.lastLineRelativePosition;const o=[...e.startLineNumbers];e.showEndForLine!==null&&(o[e.showEndForLine]=e.endLineNumbers[e.showEndForLine]),this._lineNumbers=o}else this._lastLineRelativePosition=0,this._lineNumbers=[];this._renderRootNode(r,t,n)}_updateWidgetWidth(){const e=this._editor.getLayoutInfo(),t=e.contentLeft;this._lineNumbersDomNode.style.width=`${t}px`,this._linesDomNodeScrollable.style.setProperty("--vscode-editorStickyScroll-scrollableWidth",`${this._editor.getScrollWidth()-e.verticalScrollbarWidth}px`),this._rootDomNode.style.width=`${e.width-e.verticalScrollbarWidth}px`}_clearStickyWidget(){this._stickyLines=[],this._foldingIconStore.clear(),_r(this._lineNumbersDomNode),_r(this._linesDomNode),this._rootDomNode.style.display="none"}_useFoldingOpacityTransition(e){this._lineNumbersDomNode.style.setProperty("--vscode-editorStickyScroll-foldingOpacityTransition",`opacity ${e?.5:0}s`)}_setFoldingIconsVisibility(e){for(const t of this._stickyLines){const n=t.foldingIcon;n&&n.setVisible(e?!0:n.isCollapsed)}}_renderRootNode(e,t,n=1/0){return YKe(this,void 0,void 0,function*(){const r=this._editor.getLayoutInfo();for(const[o,a]of this._lineNumbers.entries()){const l=e[o],c=a>=n||(l==null?void 0:l.lineNumber)!==a?this._renderChildNode(o,a,t,r):this._updateTopAndZIndexOfStickyLine(l);c&&(this._linesDomNode.appendChild(c.lineDomNode),this._lineNumbersDomNode.appendChild(c.lineNumberDomNode),this._stickyLines.push(c))}t&&(this._setFoldingHoverListeners(),this._useFoldingOpacityTransition(!this._isOnGlyphMargin));const s=this._lineNumbers.length*this._lineHeight+this._lastLineRelativePosition;if(s===0){this._clearStickyWidget();return}this._rootDomNode.style.display="block",this._lineNumbersDomNode.style.height=`${s}px`,this._linesDomNodeScrollable.style.height=`${s}px`,this._rootDomNode.style.height=`${s}px`,this._rootDomNode.style.marginLeft="0px",this._updateMinContentWidth(),this._editor.layoutOverlayWidget(this)})}_setFoldingHoverListeners(){this._editor.getOption(109)==="mouseover"&&(this._foldingIconStore.add(ee(this._lineNumbersDomNode,Ce.MOUSE_ENTER,t=>{this._isOnGlyphMargin=!0,this._setFoldingIconsVisibility(!0)})),this._foldingIconStore.add(ee(this._lineNumbersDomNode,Ce.MOUSE_LEAVE,()=>{this._isOnGlyphMargin=!1,this._useFoldingOpacityTransition(!0),this._setFoldingIconsVisibility(!1)})))}_renderChildNode(e,t,n,r){const s=this._editor._getViewModel();if(!s)return;const o=s.coordinatesConverter.convertModelPositionToViewPosition(new U(t,1)).lineNumber,a=s.getViewLineRenderingData(o),l=this._editor.getOption(67);let c;try{c=Ys.filter(a.inlineDecorations,o,a.minColumn,a.maxColumn)}catch{c=[]}const d=new vf(!0,!0,a.content,a.continuesWithWrappedLine,a.isBasicASCII,a.containsRTL,0,a.tokens,c,a.tabSize,a.startVisibleColumn,1,1,1,500,"none",!0,!0,null),u=new Z1(2e3),h=HC(d,u);let f;GU?f=GU.createHTML(u.build()):f=u.build();const g=document.createElement("span");g.setAttribute(kN,String(e)),g.setAttribute(ZU,""),g.setAttribute("role","listitem"),g.tabIndex=0,g.className="sticky-line-content",g.classList.add(`stickyLine${t}`),g.style.lineHeight=`${this._lineHeight}px`,g.innerHTML=f;const m=document.createElement("span");m.setAttribute(kN,String(e)),m.setAttribute(QKe,""),m.className="sticky-line-number",m.style.lineHeight=`${this._lineHeight}px`;const y=r.contentLeft;m.style.width=`${y}px`;const b=document.createElement("span");l.renderType===1||l.renderType===3&&t%10===0?b.innerText=t.toString():l.renderType===2&&(b.innerText=Math.abs(t-this._editor.getPosition().lineNumber).toString()),b.className="sticky-line-number-inner",b.style.lineHeight=`${this._lineHeight}px`,b.style.width=`${r.lineNumbersWidth}px`,b.style.paddingLeft=`${r.lineNumbersLeft}px`,m.appendChild(b);const v=this._renderFoldingIconForLine(n,t);v&&m.appendChild(v.domNode),this._editor.applyFontInfo(g),this._editor.applyFontInfo(b),m.style.lineHeight=`${this._lineHeight}px`,g.style.lineHeight=`${this._lineHeight}px`,m.style.height=`${this._lineHeight}px`,g.style.height=`${this._lineHeight}px`;const C=new eqe(e,t,g,m,v,h.characterMapping);return this._updateTopAndZIndexOfStickyLine(C)}_updateTopAndZIndexOfStickyLine(e){var t;const n=e.index,r=e.lineDomNode,s=e.lineNumberDomNode,o=n===this._lineNumbers.length-1,a="0",l="1";r.style.zIndex=o?a:l,s.style.zIndex=o?a:l;const c=`${n*this._lineHeight+this._lastLineRelativePosition+(!((t=e.foldingIcon)===null||t===void 0)&&t.isCollapsed?1:0)}px`,d=`${n*this._lineHeight}px`;return r.style.top=o?c:d,s.style.top=o?c:d,e}_renderFoldingIconForLine(e,t){const n=this._editor.getOption(109);if(!e||n==="never")return;const r=e.regions,s=r.findRange(t),o=r.getStartLineNumber(s);if(!(t===o))return;const l=r.isCollapsed(s),c=new tqe(l,o,r.getEndLineNumber(s),this._lineHeight);return c.setVisible(this._isOnGlyphMargin?!0:l||n==="always"),c.domNode.setAttribute(XU,""),c}_updateMinContentWidth(){this._minContentWidthInPx=0;for(const e of this._stickyLines)e.lineDomNode.scrollWidth>this._minContentWidthInPx&&(this._minContentWidthInPx=e.lineDomNode.scrollWidth);this._minContentWidthInPx+=this._editor.getLayoutInfo().verticalScrollbarWidth}getId(){return"editor.contrib.stickyScrollWidget"}getDomNode(){return this._rootDomNode}getPosition(){return{preference:null}}getMinContentWidthInPx(){return this._minContentWidthInPx}focusLineWithIndex(e){0<=e&&e<this._stickyLines.length&&this._stickyLines[e].lineDomNode.focus()}getEditorPositionFromNode(e){if(!e||e.children.length>0)return null;const t=this._getRenderedStickyLineFromChildDomNode(e);if(!t)return null;const n=g5(t.characterMapping,e,0);return new U(t.lineNumber,n)}getLineNumberFromChildDomNode(e){var t,n;return(n=(t=this._getRenderedStickyLineFromChildDomNode(e))===null||t===void 0?void 0:t.lineNumber)!==null&&n!==void 0?n:null}_getRenderedStickyLineFromChildDomNode(e){const t=this.getLineIndexFromChildDomNode(e);return t===null||t<0||t>=this._stickyLines.length?null:this._stickyLines[t]}getLineIndexFromChildDomNode(e){const t=this._getAttributeValue(e,kN);return t?parseInt(t,10):null}isInStickyLine(e){return this._getAttributeValue(e,ZU)!==void 0}isInFoldingIconDomNode(e){return this._getAttributeValue(e,XU)!==void 0}_getAttributeValue(e,t){for(;e&&e!==this._rootDomNode;){const n=e.getAttribute(t);if(n!==null)return n;e=e.parentElement}}}class eqe{constructor(e,t,n,r,s,o){this.index=e,this.lineNumber=t,this.lineDomNode=n,this.lineNumberDomNode=r,this.foldingIcon=s,this.characterMapping=o}}class tqe{constructor(e,t,n,r){this.isCollapsed=e,this.foldingStartLine=t,this.foldingEndLine=n,this.dimension=r,this.domNode=document.createElement("div"),this.domNode.style.width=`${r}px`,this.domNode.style.height=`${r}px`,this.domNode.className=Qe.asClassName(e?qI:KI)}setVisible(e){this.domNode.style.cursor=e?"pointer":"default",this.domNode.style.opacity=e?"1":"0"}}class l0{constructor(e,t){this.startLineNumber=e,this.endLineNumber=t}}class gL{constructor(e,t,n){this.range=e,this.children=t,this.parent=n}}class ste{constructor(e,t,n,r){this.uri=e,this.version=t,this.element=n,this.outlineProviderId=r}}var gR=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},iC=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},YU=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},c0;(function(i){i.OUTLINE_MODEL="outlineModel",i.FOLDING_PROVIDER_MODEL="foldingProviderModel",i.INDENTATION_MODEL="indentationModel"})(c0||(c0={}));var fh;(function(i){i[i.VALID=0]="VALID",i[i.INVALID=1]="INVALID",i[i.CANCELED=2]="CANCELED"})(fh||(fh={}));let hF=class extends q{constructor(e,t,n,r){super(),this._editor=e,this._languageConfigurationService=t,this._languageFeaturesService=n,this._modelProviders=[],this._modelPromise=null,this._updateScheduler=this._register(new Ha(300)),this._updateOperation=this._register(new ae);const s=new fF(n),o=new pF(this._editor,n),a=new gF(this._editor,t);switch(r){case c0.OUTLINE_MODEL:this._modelProviders.push(s),this._modelProviders.push(o),this._modelProviders.push(a);break;case c0.FOLDING_PROVIDER_MODEL:this._modelProviders.push(o),this._modelProviders.push(a);break;case c0.INDENTATION_MODEL:this._modelProviders.push(a);break}}_cancelModelPromise(){this._modelPromise&&(this._modelPromise.cancel(),this._modelPromise=null)}update(e,t,n){return YU(this,void 0,void 0,function*(){return this._updateOperation.clear(),this._updateOperation.add({dispose:()=>{this._cancelModelPromise(),this._updateScheduler.cancel()}}),this._cancelModelPromise(),yield this._updateScheduler.trigger(()=>YU(this,void 0,void 0,function*(){for(const r of this._modelProviders){const{statusPromise:s,modelPromise:o}=r.computeStickyModel(e,t,n);this._modelPromise=o;const a=yield s;if(this._modelPromise!==o)return null;switch(a){case fh.CANCELED:return this._updateOperation.clear(),null;case fh.VALID:return r.stickyModel}}return null})).catch(r=>(ut(r),null))})}};hF=gR([iC(1,wn),iC(2,Fe)],hF);class ote{constructor(){this._stickyModel=null}get stickyModel(){return this._stickyModel}_invalid(){return this._stickyModel=null,fh.INVALID}computeStickyModel(e,t,n){if(n.isCancellationRequested||!this.isProviderValid(e))return{statusPromise:this._invalid(),modelPromise:null};const r=Ui(s=>this.createModelFromProvider(e,t,s));return{statusPromise:r.then(s=>this.isModelValid(s)?n.isCancellationRequested?fh.CANCELED:(this._stickyModel=this.createStickyModel(e,t,n,s),fh.VALID):this._invalid()).then(void 0,s=>(ut(s),fh.CANCELED)),modelPromise:r}}isModelValid(e){return!0}isProviderValid(e){return!0}}let fF=class extends ote{constructor(e){super(),this._languageFeaturesService=e}createModelFromProvider(e,t,n){return Pd.create(this._languageFeaturesService.documentSymbolProvider,e,n)}createStickyModel(e,t,n,r){var s;const{stickyOutlineElement:o,providerID:a}=this._stickyModelFromOutlineModel(r,(s=this._stickyModel)===null||s===void 0?void 0:s.outlineProviderId);return new ste(e.uri,t,o,a)}isModelValid(e){return e&&e.children.size>0}_stickyModelFromOutlineModel(e,t){let n;if(St.first(e.children.values())instanceof Iee){const a=St.find(e.children.values(),l=>l.id===t);if(a)n=a.children;else{let l="",c=-1,d;for(const[u,h]of e.children.entries()){const f=this._findSumOfRangesOfGroup(h);f>c&&(d=h,c=f,l=h.id)}t=l,n=d.children}}else n=e.children;const r=[],s=Array.from(n.values()).sort((a,l)=>{const c=new l0(a.symbol.range.startLineNumber,a.symbol.range.endLineNumber),d=new l0(l.symbol.range.startLineNumber,l.symbol.range.endLineNumber);return this._comparator(c,d)});for(const a of s)r.push(this._stickyModelFromOutlineElement(a,a.symbol.selectionRange.startLineNumber));return{stickyOutlineElement:new gL(void 0,r,void 0),providerID:t}}_stickyModelFromOutlineElement(e,t){const n=[];for(const s of e.children.values())if(s.symbol.selectionRange.startLineNumber!==s.symbol.range.endLineNumber)if(s.symbol.selectionRange.startLineNumber!==t)n.push(this._stickyModelFromOutlineElement(s,s.symbol.selectionRange.startLineNumber));else for(const o of s.children.values())n.push(this._stickyModelFromOutlineElement(o,s.symbol.selectionRange.startLineNumber));n.sort((s,o)=>this._comparator(s.range,o.range));const r=new l0(e.symbol.selectionRange.startLineNumber,e.symbol.range.endLineNumber);return new gL(r,n,void 0)}_comparator(e,t){return e.startLineNumber!==t.startLineNumber?e.startLineNumber-t.startLineNumber:t.endLineNumber-e.endLineNumber}_findSumOfRangesOfGroup(e){let t=0;for(const n of e.children.values())t+=this._findSumOfRangesOfGroup(n);return e instanceof PO?t+e.symbol.range.endLineNumber-e.symbol.selectionRange.startLineNumber:t}};fF=gR([iC(0,Fe)],fF);class ate extends ote{constructor(e){super(),this._foldingLimitReporter=new kee(e)}createStickyModel(e,t,n,r){const s=this._fromFoldingRegions(r);return new ste(e.uri,t,s,void 0)}isModelValid(e){return e!==null}_fromFoldingRegions(e){const t=e.length,n=[],r=new gL(void 0,[],void 0);for(let s=0;s<t;s++){const o=e.getParentIndex(s);let a;o!==-1?a=n[o]:a=r;const l=new gL(new l0(e.getStartLineNumber(s),e.getEndLineNumber(s)+1),[],a);a.children.push(l),n.push(l)}return r}}let gF=class extends ate{constructor(e,t){super(e),this._languageConfigurationService=t}createModelFromProvider(e,t,n){return new h9(e,this._languageConfigurationService,this._foldingLimitReporter).compute(n)}};gF=gR([iC(1,wn)],gF);let pF=class extends ate{constructor(e,t){super(e),this._languageFeaturesService=t}isProviderValid(e){return nd.getFoldingRangeProviders(this._languageFeaturesService,e).length>0}createModelFromProvider(e,t,n){const r=nd.getFoldingRangeProviders(this._languageFeaturesService,e);return new g9(e,r,()=>this.createModelFromProvider(e,t,n),this._foldingLimitReporter,void 0).compute(n)}};pF=gR([iC(1,Fe)],pF);var nqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},QU=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},JU=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class iqe{constructor(e,t,n){this.startLineNumber=e,this.endLineNumber=t,this.nestingDepth=n}}let mF=class extends q{constructor(e,t,n){super(),this._languageFeaturesService=t,this._languageConfigurationService=n,this._onDidChangeStickyScroll=this._register(new H),this.onDidChangeStickyScroll=this._onDidChangeStickyScroll.event,this._options=null,this._model=null,this._cts=null,this._stickyModelProvider=null,this._editor=e,this._sessionStore=this._register(new ae),this._updateSoon=this._register(new fn(()=>this.update(),50)),this._register(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(114)&&this.readConfiguration()})),this.readConfiguration()}readConfiguration(){this._stickyModelProvider=null,this._sessionStore.clear(),this._options=this._editor.getOption(114),this._options.enabled&&(this._stickyModelProvider=this._sessionStore.add(new hF(this._editor,this._languageConfigurationService,this._languageFeaturesService,this._options.defaultModel)),this._sessionStore.add(this._editor.onDidChangeModel(()=>{this._model=null,this._onDidChangeStickyScroll.fire(),this.update()})),this._sessionStore.add(this._editor.onDidChangeHiddenAreas(()=>this.update())),this._sessionStore.add(this._editor.onDidChangeModelContent(()=>this._updateSoon.schedule())),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>this.update())),this.update())}getVersionId(){var e;return(e=this._model)===null||e===void 0?void 0:e.version}update(){var e;return JU(this,void 0,void 0,function*(){(e=this._cts)===null||e===void 0||e.dispose(!0),this._cts=new vi,yield this.updateStickyModel(this._cts.token),this._onDidChangeStickyScroll.fire()})}updateStickyModel(e){return JU(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._stickyModelProvider||this._editor.getModel().isTooLargeForTokenization()){this._model=null;return}const t=this._editor.getModel(),n=t.getVersionId(),r=yield this._stickyModelProvider.update(t,n,e);e.isCancellationRequested||(this._model=r)})}updateIndex(e){return e===-1?e=0:e<0&&(e=-e-2),e}getCandidateStickyLinesIntersectingFromStickyModel(e,t,n,r,s){if(t.children.length===0)return;let o=s;const a=[];for(let d=0;d<t.children.length;d++){const u=t.children[d];u.range&&a.push(u.range.startLineNumber)}const l=this.updateIndex(D0(a,e.startLineNumber,(d,u)=>d-u)),c=this.updateIndex(D0(a,e.startLineNumber+r,(d,u)=>d-u));for(let d=l;d<=c;d++){const u=t.children[d];if(!u)return;if(u.range){const h=u.range.startLineNumber,f=u.range.endLineNumber;e.startLineNumber<=f+1&&h-1<=e.endLineNumber&&h!==o&&(o=h,n.push(new iqe(h,f-1,r+1)),this.getCandidateStickyLinesIntersectingFromStickyModel(e,u,n,r+1,h))}else this.getCandidateStickyLinesIntersectingFromStickyModel(e,u,n,r,s)}}getCandidateStickyLinesIntersecting(e){var t,n;if(!(!((t=this._model)===null||t===void 0)&&t.element))return[];let r=[];this.getCandidateStickyLinesIntersectingFromStickyModel(e,this._model.element,r,0,-1);const s=(n=this._editor._getViewModel())===null||n===void 0?void 0:n.getHiddenAreas();if(s)for(const o of s)r=r.filter(a=>!(a.startLineNumber>=o.startLineNumber&&a.endLineNumber<=o.endLineNumber+1));return r}};mF=nqe([QU(1,Fe),QU(2,wn)],mF);var rqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Cm=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},LN=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},_F;let id=_F=class extends q{constructor(e,t,n,r,s,o,a){super(),this._editor=e,this._contextMenuService=t,this._languageFeaturesService=n,this._instaService=r,this._contextKeyService=a,this._sessionStore=new ae,this._foldingModel=null,this._maxStickyLines=Number.MAX_SAFE_INTEGER,this._candidateDefinitionsLength=-1,this._focusedStickyElementIndex=-1,this._enabled=!1,this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1,this._endLineNumbers=[],this._showEndForLine=null,this._stickyScrollWidget=new JKe(this._editor),this._stickyLineCandidateProvider=new mF(this._editor,n,s),this._register(this._stickyScrollWidget),this._register(this._stickyLineCandidateProvider),this._widgetState=new qU([],[],0),this._readConfiguration();const l=this._stickyScrollWidget.getDomNode();this._register(this._editor.onDidChangeConfiguration(d=>{(d.hasChanged(114)||d.hasChanged(72)||d.hasChanged(66)||d.hasChanged(109))&&this._readConfiguration()})),this._register(ee(l,Ce.CONTEXT_MENU,d=>LN(this,void 0,void 0,function*(){this._onContextMenu(d)}))),this._stickyScrollFocusedContextKey=N.stickyScrollFocused.bindTo(this._contextKeyService),this._stickyScrollVisibleContextKey=N.stickyScrollVisible.bindTo(this._contextKeyService);const c=this._register(qc(l));this._register(c.onDidBlur(d=>{this._positionRevealed===!1&&l.clientHeight===0?(this._focusedStickyElementIndex=-1,this.focus()):this._disposeFocusStickyScrollStore()})),this._register(c.onDidFocus(d=>{this.focus()})),this._registerMouseListeners(),this._register(ee(l,Ce.MOUSE_DOWN,d=>{this._onMouseDown=!0}))}static get(e){return e.getContribution(_F.ID)}_disposeFocusStickyScrollStore(){var e;this._stickyScrollFocusedContextKey.set(!1),(e=this._focusDisposableStore)===null||e===void 0||e.dispose(),this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1}focus(){if(this._onMouseDown){this._onMouseDown=!1,this._editor.focus();return}this._stickyScrollFocusedContextKey.get()!==!0&&(this._focused=!0,this._focusDisposableStore=new ae,this._stickyScrollFocusedContextKey.set(!0),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumbers.length-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}focusNext(){this._focusedStickyElementIndex<this._stickyScrollWidget.lineNumberCount-1&&this._focusNav(!0)}focusPrevious(){this._focusedStickyElementIndex>0&&this._focusNav(!1)}selectEditor(){this._editor.focus()}_focusNav(e){this._focusedStickyElementIndex=e?this._focusedStickyElementIndex+1:this._focusedStickyElementIndex-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex)}goToFocused(){const e=this._stickyScrollWidget.lineNumbers;this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:e[this._focusedStickyElementIndex],column:1})}_revealPosition(e){this._reveaInEditor(e,()=>this._editor.revealPosition(e))}_revealLineInCenterIfOutsideViewport(e){this._reveaInEditor(e,()=>this._editor.revealLineInCenterIfOutsideViewport(e.lineNumber,0))}_reveaInEditor(e,t){this._focused&&this._disposeFocusStickyScrollStore(),this._positionRevealed=!0,t(),this._editor.setSelection(D.fromPositions(e)),this._editor.focus()}_registerMouseListeners(){const e=this._register(new ae),t=this._register(new EI(this._editor,{extractLineNumberFromMouseEvent:s=>{const o=this._stickyScrollWidget.getEditorPositionFromNode(s.target.element);return o?o.lineNumber:0}})),n=s=>{if(!this._editor.hasModel()||s.target.type!==12||s.target.detail!==this._stickyScrollWidget.getId())return null;const o=s.target.element;if(!o||o.innerText!==o.innerHTML)return null;const a=this._stickyScrollWidget.getEditorPositionFromNode(o);return a?{range:new D(a.lineNumber,a.column,a.lineNumber,a.column+o.innerText.length),textElement:o}:null},r=this._stickyScrollWidget.getDomNode();this._register(bi(r,Ce.CLICK,s=>{if(s.ctrlKey||s.altKey||s.metaKey||!s.leftButton)return;if(s.shiftKey){const c=this._stickyScrollWidget.getLineIndexFromChildDomNode(s.target);if(c===null)return;const d=new U(this._endLineNumbers[c],1);this._revealLineInCenterIfOutsideViewport(d);return}if(this._stickyScrollWidget.isInFoldingIconDomNode(s.target)){const c=this._stickyScrollWidget.getLineNumberFromChildDomNode(s.target);this._toggleFoldingRegionForLine(c);return}if(!this._stickyScrollWidget.isInStickyLine(s.target))return;let l=this._stickyScrollWidget.getEditorPositionFromNode(s.target);if(!l){const c=this._stickyScrollWidget.getLineNumberFromChildDomNode(s.target);if(c===null)return;l=new U(c,1)}this._revealPosition(l)})),this._register(bi(r,Ce.MOUSE_MOVE,s=>{if(s.shiftKey){const o=this._stickyScrollWidget.getLineIndexFromChildDomNode(s.target);if(o===null||this._showEndForLine!==null&&this._showEndForLine===o)return;this._showEndForLine=o,this._renderStickyScroll();return}this._showEndForLine!==null&&(this._showEndForLine=null,this._renderStickyScroll())})),this._register(ee(r,Ce.MOUSE_LEAVE,s=>{this._showEndForLine!==null&&(this._showEndForLine=null,this._renderStickyScroll())})),this._register(t.onMouseMoveOrRelevantKeyDown(([s,o])=>{const a=n(s);if(!a||!s.hasTriggerModifier||!this._editor.hasModel()){e.clear();return}const{range:l,textElement:c}=a;if(!l.equalsRange(this._stickyRangeProjectedOnEditor))this._stickyRangeProjectedOnEditor=l,e.clear();else if(c.style.textDecoration==="underline")return;const d=new vi;e.add(st(()=>d.dispose(!0)));let u;FI(this._languageFeaturesService.definitionProvider,this._editor.getModel(),new U(l.startLineNumber,l.startColumn+1),d.token).then(h=>{if(!d.token.isCancellationRequested)if(h.length!==0){this._candidateDefinitionsLength=h.length;const f=c;u!==f?(e.clear(),u=f,u.style.textDecoration="underline",e.add(st(()=>{u.style.textDecoration="none"}))):u||(u=f,u.style.textDecoration="underline",e.add(st(()=>{u.style.textDecoration="none"})))}else e.clear()})})),this._register(t.onCancel(()=>{e.clear()})),this._register(t.onExecute(s=>LN(this,void 0,void 0,function*(){if(s.target.type!==12||s.target.detail!==this._stickyScrollWidget.getId())return;const o=this._stickyScrollWidget.getEditorPositionFromNode(s.target.element);o&&(this._candidateDefinitionsLength>1&&(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:o.lineNumber,column:1})),this._instaService.invokeFunction(Oee,s,this._editor,{uri:this._editor.getModel().uri,range:this._stickyRangeProjectedOnEditor}))})))}_onContextMenu(e){const t=new Qo(e);this._contextMenuService.showContextMenu({menuId:E.StickyScrollContext,getAnchor:()=>t})}_toggleFoldingRegionForLine(e){if(!this._foldingModel||e===null)return;const t=this._stickyScrollWidget.getStickyLineForLine(e),n=t==null?void 0:t.foldingIcon;if(!n)return;Cee(this._foldingModel,Number.MAX_VALUE,[e]),n.isCollapsed=!n.isCollapsed;const r=(n.isCollapsed?this._editor.getTopForLineNumber(n.foldingEndLine):this._editor.getTopForLineNumber(n.foldingStartLine))-this._editor.getOption(66)*t.index+1;this._editor.setScrollTop(r),this._renderStickyScroll(e)}_readConfiguration(){const e=this._editor.getOption(114);if(e.enabled===!1){this._editor.removeOverlayWidget(this._stickyScrollWidget),this._sessionStore.clear(),this._enabled=!1;return}else e.enabled&&!this._enabled&&(this._editor.addOverlayWidget(this._stickyScrollWidget),this._sessionStore.add(this._editor.onDidScrollChange(n=>{n.scrollTopChanged&&(this._showEndForLine=null,this._renderStickyScroll())})),this._sessionStore.add(this._editor.onDidLayoutChange(()=>this._onDidResize())),this._sessionStore.add(this._editor.onDidChangeModelTokens(n=>this._onTokensChange(n))),this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(()=>{this._showEndForLine=null,this._renderStickyScroll()})),this._enabled=!0);this._editor.getOption(67).renderType===2&&this._sessionStore.add(this._editor.onDidChangeCursorPosition(()=>{this._showEndForLine=null,this._renderStickyScroll()}))}_needsUpdate(e){const t=this._stickyScrollWidget.getCurrentLines();for(const n of t)for(const r of e.ranges)if(n>=r.fromLineNumber&&n<=r.toLineNumber)return!0;return!1}_onTokensChange(e){this._needsUpdate(e)&&this._renderStickyScroll(-1)}_onDidResize(){const t=this._editor.getLayoutInfo().height/this._editor.getOption(66);this._maxStickyLines=Math.round(t*.25)}_renderStickyScroll(e=1/0){var t,n;return LN(this,void 0,void 0,function*(){const r=this._editor.getModel();if(!r||r.isTooLargeForTokenization()){this._foldingModel=null,this._stickyScrollWidget.setState(void 0,null,e);return}const s=this._stickyLineCandidateProvider.getVersionId();if(s===void 0||s===r.getVersionId())if(this._foldingModel=(n=yield(t=nd.get(this._editor))===null||t===void 0?void 0:t.getFoldingModel())!==null&&n!==void 0?n:null,this._widgetState=this.findScrollWidgetState(),this._stickyScrollVisibleContextKey.set(this._widgetState.startLineNumbers.length!==0),!this._focused)this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,e);else if(this._focusedStickyElementIndex===-1)this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,e),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1,this._focusedStickyElementIndex!==-1&&this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);else{const o=this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,e),this._stickyScrollWidget.lineNumberCount===0?this._focusedStickyElementIndex=-1:(this._stickyScrollWidget.lineNumbers.includes(o)||(this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1),this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}})}findScrollWidgetState(){const e=this._editor.getOption(66),t=Math.min(this._maxStickyLines,this._editor.getOption(114).maxLineCount),n=this._editor.getScrollTop();let r=0;const s=[],o=[],a=this._editor.getVisibleRanges();if(a.length!==0){const l=new l0(a[0].startLineNumber,a[a.length-1].endLineNumber),c=this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(l);for(const d of c){const u=d.startLineNumber,h=d.endLineNumber,f=d.nestingDepth;if(h-u>0){const g=(f-1)*e,m=f*e,y=this._editor.getBottomForLineNumber(u)-n,b=this._editor.getTopForLineNumber(h)-n,v=this._editor.getBottomForLineNumber(h)-n;if(g>b&&g<=v){s.push(u),o.push(h+1),r=v-m;break}else m>y&&m<=v&&(s.push(u),o.push(h+1));if(s.length===t)break}}}return this._endLineNumbers=o,new qU(s,o,r,this._showEndForLine)}dispose(){super.dispose(),this._sessionStore.dispose()}};id.ID="store.contrib.stickyScrollController";id=_F=rqe([Cm(1,qa),Cm(2,Fe),Cm(3,rt),Cm(4,wn),Cm(5,pa),Cm(6,ot)],id);var sqe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class oqe extends Bo{constructor(){super({id:"editor.action.toggleStickyScroll",title:{value:p("toggleStickyScroll","Toggle Sticky Scroll"),mnemonicTitle:p({key:"mitoggleStickyScroll",comment:["&& denotes a mnemonic"]},"&&Toggle Sticky Scroll"),original:"Toggle Sticky Scroll"},category:XKe.View,toggled:{condition:re.equals("config.editor.stickyScroll.enabled",!0),title:p("stickyScroll","Sticky Scroll"),mnemonicTitle:p({key:"miStickyScroll",comment:["&& denotes a mnemonic"]},"&&Sticky Scroll")},menu:[{id:E.CommandPalette},{id:E.MenubarAppearanceMenu,group:"4_editor",order:3},{id:E.StickyScrollContext}]})}run(e){return sqe(this,void 0,void 0,function*(){const t=e.get(Et),n=!t.getValue("editor.stickyScroll.enabled");return t.updateValue("editor.stickyScroll.enabled",n)})}}const pR=100;class aqe extends Gl{constructor(){super({id:"editor.action.focusStickyScroll",title:{value:p("focusStickyScroll","Focus Sticky Scroll"),mnemonicTitle:p({key:"mifocusStickyScroll",comment:["&& denotes a mnemonic"]},"&&Focus Sticky Scroll"),original:"Focus Sticky Scroll"},precondition:re.and(re.has("config.editor.stickyScroll.enabled"),N.stickyScrollVisible),menu:[{id:E.CommandPalette}]})}runEditorCommand(e,t){var n;(n=id.get(t))===null||n===void 0||n.focus()}}class lqe extends Gl{constructor(){super({id:"editor.action.selectNextStickyScrollLine",title:{value:p("selectNextStickyScrollLine.title","Select next sticky scroll line"),original:"Select next sticky scroll line"},precondition:N.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:pR,primary:18}})}runEditorCommand(e,t){var n;(n=id.get(t))===null||n===void 0||n.focusNext()}}class cqe extends Gl{constructor(){super({id:"editor.action.selectPreviousStickyScrollLine",title:{value:p("selectPreviousStickyScrollLine.title","Select previous sticky scroll line"),original:"Select previous sticky scroll line"},precondition:N.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:pR,primary:16}})}runEditorCommand(e,t){var n;(n=id.get(t))===null||n===void 0||n.focusPrevious()}}class dqe extends Gl{constructor(){super({id:"editor.action.goToFocusedStickyScrollLine",title:{value:p("goToFocusedStickyScrollLine.title","Go to focused sticky scroll line"),original:"Go to focused sticky scroll line"},precondition:N.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:pR,primary:3}})}runEditorCommand(e,t){var n;(n=id.get(t))===null||n===void 0||n.goToFocused()}}class uqe extends Gl{constructor(){super({id:"editor.action.selectEditor",title:{value:p("selectEditor.title","Select Editor"),original:"Select Editor"},precondition:N.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:pR,primary:9}})}runEditorCommand(e,t){var n;(n=id.get(t))===null||n===void 0||n.selectEditor()}}$t(id.ID,id,1);Nn(oqe);Nn(aqe);Nn(cqe);Nn(lqe);Nn(dqe);Nn(uqe);var E9=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Ag=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},hqe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},$f;class fqe{constructor(e,t,n,r,s,o){this.range=e,this.insertText=t,this.filterText=n,this.additionalTextEdits=r,this.command=s,this.completion=o}}let bF=class extends Mxe{constructor(e,t,n,r,s,o){super(s.disposable),this.model=e,this.line=t,this.word=n,this.completionModel=r,this._suggestMemoryService=o}canBeReused(e,t,n){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===n.startColumn&&this.word.endColumn<n.endColumn&&this.completionModel.getIncompleteProvider().size===0}get items(){var e;const t=[],{items:n}=this.completionModel,r=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},n),s=St.slice(n,r),o=St.slice(n,0,r);let a=5;for(const l of St.concat(s,o)){if(l.score===El.Default)continue;const c=new D(l.editStart.lineNumber,l.editStart.column,l.editInsertEnd.lineNumber,l.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),d=l.completion.insertTextRules&&l.completion.insertTextRules&4?{snippet:l.completion.insertText}:l.completion.insertText;t.push(new fqe(c,d,(e=l.filterTextLow)!==null&&e!==void 0?e:l.labelLow,l.completion.additionalTextEdits,l.completion.command,l)),a-->=0&&l.resolve(xt.None)}return t}};bF=E9([Ag(5,YI)],bF);let vF=class{constructor(e,t,n,r){this._getEditorOption=e,this._languageFeatureService=t,this._clipboardService=n,this._suggestMemoryService=r}provideInlineCompletions(e,t,n,r){var s;return hqe(this,void 0,void 0,function*(){if(n.selectedSuggestionInfo)return;const o=this._getEditorOption(88,e);if(i_.isAllOff(o))return;e.tokenization.tokenizeIfCheap(t.lineNumber);const a=e.tokenization.getLineTokens(t.lineNumber),l=a.getStandardTokenType(a.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(i_.valueFor(o,l)!=="inline")return;let c=e.getWordAtPosition(t),d;if(c!=null&&c.word||(d=this._getTriggerCharacterInfo(e,t)),!(c!=null&&c.word)&&!d||(c||(c=e.getWordUntilPosition(t)),c.endColumn!==t.column))return;let u;const h=e.getValueInRange(new D(t.lineNumber,1,t.lineNumber,t.column));if(!d&&(!((s=this._lastResult)===null||s===void 0)&&s.canBeReused(e,t.lineNumber,c))){const f=new HU(h,t.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=f,this._lastResult.acquire(),u=this._lastResult}else{const f=yield _9(this._languageFeatureService.completionProvider,e,t,new $y(void 0,void 0,d==null?void 0:d.providers),d&&{triggerKind:1,triggerCharacter:d.ch},r);let g;f.needsClipboard&&(g=yield this._clipboardService.readText());const m=new Yu(f.items,t.column,new HU(h,0),bl.None,this._getEditorOption(117,e),this._getEditorOption(111,e),{boostFullMatch:!1,firstMatchCanBeWeak:!1},g);u=new bF(e,t.lineNumber,c,m,f,this._suggestMemoryService)}return this._lastResult=u,u})}handleItemDidShow(e,t){t.completion.resolve(xt.None)}freeInlineCompletions(e){e.release()}_getTriggerCharacterInfo(e,t){var n;const r=e.getValueInRange(D.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),s=new Set;for(const o of this._languageFeatureService.completionProvider.all(e))!((n=o.triggerCharacters)===null||n===void 0)&&n.includes(r)&&s.add(o);if(s.size!==0)return{providers:s,ch:r}}};vF=E9([Ag(1,Fe),Ag(2,xu),Ag(3,YI)],vF);let pL=$f=class{constructor(e,t,n,r){if(++$f._counter===1){const s=r.createInstance(vF,(o,a)=>{var l;return((l=n.listCodeEditors().find(d=>d.getModel()===a))!==null&&l!==void 0?l:e).getOption(o)});$f._disposable=t.inlineCompletionsProvider.register("*",s)}}dispose(){var e;--$f._counter===0&&((e=$f._disposable)===null||e===void 0||e.dispose(),$f._disposable=void 0)}};pL._counter=0;pL=$f=E9([Ag(1,Fe),Ag(2,Jt),Ag(3,rt)],pL);$t("suggest.inlineCompletionsProvider",pL,0);class gqe extends Me{constructor(){super({id:"editor.action.forceRetokenize",label:p("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getModel();n.tokenization.resetTokenization();const r=new qr;n.tokenization.forceTokenization(n.getLineCount()),r.stop(),console.log(`tokenization took ${r.elapsed()}`)}}ue(gqe);class mR extends Bo{constructor(){super({id:mR.ID,title:{value:p({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),original:"Toggle Tab Key Moves Focus"},precondition:void 0,keybinding:{primary:2091,mac:{primary:1323},weight:100},f1:!0})}run(){const t=!Q_.getTabFocusMode();Q_.setTabFocusMode(t),jr(t?p("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):p("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}mR.ID="editor.action.toggleTabFocusMode";Nn(mR);var pqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},mqe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let yF=class extends q{get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}constructor(e,t,n={},r){var s;super(),this._link=t,this._enabled=!0,this.el=se(e,ce("a.monaco-link",{tabIndex:(s=t.tabIndex)!==null&&s!==void 0?s:0,href:t.href,title:t.title},t.label)),this.el.setAttribute("role","button");const o=this._register(new Dt(this.el,"click")),a=this._register(new Dt(this.el,"keypress")),l=Re.chain(a.event,u=>u.map(h=>new kn(h)).filter(h=>h.keyCode===3)),c=this._register(new Dt(this.el,yn.Tap)).event;this._register(vn.addTarget(this.el));const d=Re.any(o.event,l,c);this._register(d(u=>{this.enabled&&(_t.stop(u,!0),n!=null&&n.opener?n.opener(this._link.href):r.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}};yF=pqe([mqe(3,lo)],yF);var lte=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},cte=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const _qe=26;let CF=class extends q{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(wF))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show(Object.assign(Object.assign({},e),{onClose:()=>{var t;this.hide(),(t=e.onClose)===null||t===void 0||t.call(e)}})),this._editor.setBanner(this.banner.element,_qe)}};CF=lte([cte(1,rt)],CF);let wF=class extends q{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(pu,{}),this.element=ce("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const t=ce("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){_r(this.element)}show(e){_r(this.element);const t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);const n=se(this.element,ce("div.icon-container"));n.setAttribute("aria-hidden","true"),e.icon&&n.appendChild(ce(`div${Qe.asCSSSelector(e.icon)}`));const r=se(this.element,ce("div.message-container"));if(r.setAttribute("aria-hidden","true"),r.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=se(this.element,ce("div.message-actions-container")),e.actions)for(const o of e.actions)this._register(this.instantiationService.createInstance(yF,this.messageActionsContainer,Object.assign(Object.assign({},o),{tabIndex:-1}),{}));const s=se(this.element,ce("div.action-container"));this.actionBar=this._register(new fa(s)),this.actionBar.push(this._register(new vs("banner.close","Close Banner",Qe.asClassName(GY),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};wF=lte([cte(0,rt)],wF);var N9=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},M_=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Wr=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const bqe=gi("extensions-warning-message",me.warning,p("warningIcon","Icon shown with a warning message in the extensions editor."));let I1=class extends q{constructor(e,t,n,r){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=n,this._highlighter=null,this._bannerClosed=!1,this._updateState=s=>{if(s&&s.hasMore){if(this._bannerClosed)return;const o=Math.max(s.ambiguousCharacterCount,s.nonBasicAsciiCharacterCount,s.invisibleCharacterCount);let a;if(s.nonBasicAsciiCharacterCount>=o)a={message:p("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new hb};else if(s.ambiguousCharacterCount>=o)a={message:p("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new Tf};else if(s.invisibleCharacterCount>=o)a={message:p("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new ub};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:a.message,icon:bqe,actions:[{label:a.command.shortLabel,href:`command:${a.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(r.createInstance(CF,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(124),this._register(n.onDidChangeTrust(s=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(s=>{s.hasChanged(124)&&(this._options=e.getOption(124),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const e=vqe(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(n=>n===!1))return;const t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,includeStrings:e.includeStrings,allowedCodePoints:Object.keys(e.allowedCharacters).map(n=>n.codePointAt(0)),allowedLocales:Object.keys(e.allowedLocales).map(n=>n==="_os"?new Intl.NumberFormat().resolvedOptions().locale:n==="_vscode"?FSe:n)};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new SF(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new yqe(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}};I1.ID="editor.contrib.unicodeHighlighter";I1=N9([M_(1,Xa),M_(2,KX),M_(3,rt)],I1);function vqe(i,e){return{nonBasicASCII:e.nonBasicASCII===po?!i:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===po?!i:e.includeComments,includeStrings:e.includeStrings===po?!i:e.includeStrings,allowedCharacters:e.allowedCharacters,allowedLocales:e.allowedLocales}}let SF=class extends q{constructor(e,t,n,r){super(),this._editor=e,this._options=t,this._updateState=n,this._editorWorkerService=r,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new fn(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.isDisposed()||this._model.getVersionId()!==e)return;this._updateState(t);const n=[];if(!t.hasMore)for(const r of t.ranges)n.push({range:r,options:mL.instance.getDecorationFromOptions(this._options)});this._decorations.set(n)})}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel();if(!P5(t,e))return null;const n=t.getValueInRange(e.range);return{reason:dte(n,this._options),inComment:M5(t,e),inString:O5(t,e)}}};SF=N9([M_(3,Xa)],SF);class yqe extends q{constructor(e,t,n){super(),this._editor=e,this._options=t,this._updateState=n,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new fn(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._editor.getVisibleRanges(),t=[],n={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const r of e){const s=Z3.computeUnicodeHighlights(this._model,this._options,r);for(const o of s.ranges)n.ranges.push(o);n.ambiguousCharacterCount+=n.ambiguousCharacterCount,n.invisibleCharacterCount+=n.invisibleCharacterCount,n.nonBasicAsciiCharacterCount+=n.nonBasicAsciiCharacterCount,n.hasMore=n.hasMore||s.hasMore}if(!n.hasMore)for(const r of n.ranges)t.push({range:r,options:mL.instance.getDecorationFromOptions(this._options)});this._updateState(n),this._decorations.set(t)}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel(),n=t.getValueInRange(e.range);return P5(t,e)?{reason:dte(n,this._options),inComment:M5(t,e),inString:O5(t,e)}:null}}let xF=class{constructor(e,t,n){this._editor=e,this._languageService=t,this._openerService=n,this.hoverOrdinal=5}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),r=this._editor.getContribution(I1.ID);if(!r)return[];const s=[],o=new Set;let a=300;for(const l of t){const c=r.getDecorationInfo(l);if(!c)continue;const u=n.getValueInRange(l.range).codePointAt(0),h=DN(u);let f;switch(c.reason.kind){case 0:{OC(c.reason.confusableWith)?f=p("unicodeHighlight.characterIsAmbiguousASCII","The character {0} could be confused with the ASCII character {1}, which is more common in source code.",h,DN(c.reason.confusableWith.codePointAt(0))):f=p("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",h,DN(c.reason.confusableWith.codePointAt(0)));break}case 1:f=p("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",h);break;case 2:f=p("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",h);break}if(o.has(f))continue;o.add(f);const g={codePoint:u,reason:c.reason,inComment:c.inComment,inString:c.inString},m=p("unicodeHighlight.adjustSettings","Adjust settings"),y=`command:${Cw.ID}?${encodeURIComponent(JSON.stringify(g))}`,b=new Lr("",!0).appendMarkdown(f).appendText(" ").appendLink(y,m);s.push(new yl(this,l.range,[b],!1,a++))}return s}renderHoverParts(e,t){return VJ(e,t,this._editor,this._languageService,this._openerService)}};xF=N9([M_(1,Fn),M_(2,lo)],xF);function TF(i){return`U+${i.toString(16).padStart(4,"0")}`}function DN(i){let e=`\`${TF(i)}\``;return Fc.isInvisibleCharacter(i)||(e+=` "${`${Cqe(i)}`}"`),e}function Cqe(i){return i===96?"`` ` ``":"`"+String.fromCodePoint(i)+"`"}function dte(i,e){return Z3.computeUnicodeHighlightReason(i,e)}class mL{constructor(){this.map=new Map}getDecorationFromOptions(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}getDecoration(e,t){const n=`${e}${t}`;let r=this.map.get(n);return r||(r=dt.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:t}),this.map.set(n,r)),r}}mL.instance=new mL;class wqe extends Me{constructor(){super({id:Tf.ID,label:p("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}),this.shortLabel=p("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments")}run(e,t,n){return Wr(this,void 0,void 0,function*(){const r=e==null?void 0:e.get(Et);r&&this.runAction(r)})}runAction(e){return Wr(this,void 0,void 0,function*(){yield e.updateValue(As.includeComments,!1,2)})}}class Sqe extends Me{constructor(){super({id:Tf.ID,label:p("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}),this.shortLabel=p("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings")}run(e,t,n){return Wr(this,void 0,void 0,function*(){const r=e==null?void 0:e.get(Et);r&&this.runAction(r)})}runAction(e){return Wr(this,void 0,void 0,function*(){yield e.updateValue(As.includeStrings,!1,2)})}}class Tf extends Me{constructor(){super({id:Tf.ID,label:p("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=p("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}run(e,t,n){return Wr(this,void 0,void 0,function*(){const r=e==null?void 0:e.get(Et);r&&this.runAction(r)})}runAction(e){return Wr(this,void 0,void 0,function*(){yield e.updateValue(As.ambiguousCharacters,!1,2)})}}Tf.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";class ub extends Me{constructor(){super({id:ub.ID,label:p("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=p("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}run(e,t,n){return Wr(this,void 0,void 0,function*(){const r=e==null?void 0:e.get(Et);r&&this.runAction(r)})}runAction(e){return Wr(this,void 0,void 0,function*(){yield e.updateValue(As.invisibleCharacters,!1,2)})}}ub.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";class hb extends Me{constructor(){super({id:hb.ID,label:p("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=p("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}run(e,t,n){return Wr(this,void 0,void 0,function*(){const r=e==null?void 0:e.get(Et);r&&this.runAction(r)})}runAction(e){return Wr(this,void 0,void 0,function*(){yield e.updateValue(As.nonBasicASCII,!1,2)})}}hb.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";class Cw extends Me{constructor(){super({id:Cw.ID,label:p("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}run(e,t,n){return Wr(this,void 0,void 0,function*(){const{codePoint:r,reason:s,inString:o,inComment:a}=n,l=String.fromCodePoint(r),c=e.get(Xl),d=e.get(Et);function u(g){return Fc.isInvisibleCharacter(g)?p("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",TF(g)):p("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`${TF(g)} "${l}"`)}const h=[];if(s.kind===0)for(const g of s.notAmbiguousInLocales)h.push({label:p("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',g),run:()=>Wr(this,void 0,void 0,function*(){Tqe(d,[g])})});if(h.push({label:u(r),run:()=>xqe(d,[r])}),a){const g=new wqe;h.push({label:g.label,run:()=>Wr(this,void 0,void 0,function*(){return g.runAction(d)})})}else if(o){const g=new Sqe;h.push({label:g.label,run:()=>Wr(this,void 0,void 0,function*(){return g.runAction(d)})})}if(s.kind===0){const g=new Tf;h.push({label:g.label,run:()=>Wr(this,void 0,void 0,function*(){return g.runAction(d)})})}else if(s.kind===1){const g=new ub;h.push({label:g.label,run:()=>Wr(this,void 0,void 0,function*(){return g.runAction(d)})})}else if(s.kind===2){const g=new hb;h.push({label:g.label,run:()=>Wr(this,void 0,void 0,function*(){return g.runAction(d)})})}else kqe(s);const f=yield c.pick(h,{title:p("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options")});f&&(yield f.run())})}}Cw.ID="editor.action.unicodeHighlight.showExcludeOptions";function xqe(i,e){return Wr(this,void 0,void 0,function*(){const t=i.getValue(As.allowedCharacters);let n;typeof t=="object"&&t?n=t:n={};for(const r of e)n[String.fromCodePoint(r)]=!0;yield i.updateValue(As.allowedCharacters,n,2)})}function Tqe(i,e){var t;return Wr(this,void 0,void 0,function*(){const n=(t=i.inspect(As.allowedLocales).user)===null||t===void 0?void 0:t.value;let r;typeof n=="object"&&n?r=Object.assign({},n):r={};for(const s of e)r[s]=!0;yield i.updateValue(As.allowedLocales,r,2)})}function kqe(i){throw new Error(`Unexpected value: ${i}`)}ue(Tf);ue(ub);ue(hb);ue(Cw);$t(I1.ID,I1,1);Gp.register(xF);var Lqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},ej=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Dqe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const ute="ignoreUnusualLineTerminators";function Iqe(i,e,t){i.setModelProperty(e.uri,ute,t)}function Rqe(i,e){return i.getModelProperty(e.uri,ute)}let rC=class extends q{constructor(e,t,n){super(),this._editor=e,this._dialogService=t,this._codeEditorService=n,this._isPresentingDialog=!1,this._config=this._editor.getOption(125),this._register(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(125)&&(this._config=this._editor.getOption(125),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(r=>{r.isUndoing||this._checkForUnusualLineTerminators()})),this._checkForUnusualLineTerminators()}_checkForUnusualLineTerminators(){return Dqe(this,void 0,void 0,function*(){if(this._config==="off"||!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||Rqe(this._codeEditorService,e)===!0||this._editor.getOption(90))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(this._isPresentingDialog)return;let n;try{this._isPresentingDialog=!0,n=yield this._dialogService.confirm({title:p("unusualLineTerminators.title","Unusual Line Terminators"),message:p("unusualLineTerminators.message","Detected unusual line terminators"),detail:p("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",ha(e.uri)),primaryButton:p({key:"unusualLineTerminators.fix",comment:["&& denotes a mnemonic"]},"&&Remove Unusual Line Terminators"),cancelButton:p("unusualLineTerminators.ignore","Ignore")})}finally{this._isPresentingDialog=!1}if(!n.confirmed){Iqe(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())})}};rC.ID="editor.contrib.unusualLineTerminatorsDetector";rC=Lqe([ej(1,YC),ej(2,Jt)],rC);$t(rC.ID,rC,1);var Eqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},tj=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},kF;const _R=new Ne("hasWordHighlights",!1);function hte(i,e,t,n){const r=i.ordered(e);return zG(r.map(s=>()=>Promise.resolve(s.provideDocumentHighlights(e,t,n)).then(void 0,Ii)),zr)}class fte{constructor(e,t,n){this._model=e,this._selection=t,this._wordSeparators=n,this._wordRange=this._getCurrentWordRange(e,t),this._result=null}get result(){return this._result||(this._result=Ui(e=>this._compute(this._model,this._selection,this._wordSeparators,e))),this._result}_getCurrentWordRange(e,t){const n=e.getWordAtPosition(t.getPosition());return n?new D(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):null}isValid(e,t,n){const r=t.startLineNumber,s=t.startColumn,o=t.endColumn,a=this._getCurrentWordRange(e,t);let l=!!(this._wordRange&&this._wordRange.equalsRange(a));for(let c=0,d=n.length;!l&&c<d;c++){const u=n.getRange(c);u&&u.startLineNumber===r&&u.startColumn<=s&&u.endColumn>=o&&(l=!0)}return l}cancel(){this.result.cancel()}}class Nqe extends fte{constructor(e,t,n,r){super(e,t,n),this._providers=r}_compute(e,t,n,r){return hte(this._providers,e,t.getPosition(),r).then(s=>s||[])}}class Aqe extends fte{constructor(e,t,n){super(e,t,n),this._selectionIsEmpty=t.isEmpty()}_compute(e,t,n,r){return Vh(250,r).then(()=>{if(!t.isEmpty())return[];const s=e.getWordAtPosition(t.getPosition());return!s||s.word.length>1e3?[]:e.findMatches(s.word,!0,!1,!0,n,!1).map(a=>({range:a.range,kind:M0.Text}))})}isValid(e,t,n){const r=t.isEmpty();return this._selectionIsEmpty!==r?!1:super.isValid(e,t,n)}}function Pqe(i,e,t,n){return i.has(e)?new Nqe(e,t,n,i):new Aqe(e,t,n)}hd("_executeDocumentHighlights",(i,e,t)=>{const n=i.get(Fe);return hte(n.documentHighlightProvider,e,t,xt.None)});class Mqe{constructor(e,t,n,r){this.toUnhook=new ae,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this.providers=t,this.linkedHighlighters=n,this._hasWordHighlights=_R.bindTo(r),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(80),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(s=>{this._ignorePositionChangeEvent||this.occurrencesHighlight&&this._onPositionChanged(s)})),this.toUnhook.add(e.onDidChangeModelContent(s=>{this._stopAll()})),this.toUnhook.add(e.onDidChangeConfiguration(s=>{const o=this.editor.getOption(80);this.occurrencesHighlight!==o&&(this.occurrencesHighlight=o,this._stopAll())})),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}hasDecorations(){return this.decorations.length>0}restore(){this.occurrencesHighlight&&this._run()}_getSortedHighlights(){return this.decorations.getRanges().sort(D.compareRangesUsingStarts)}moveNext(){const e=this._getSortedHighlights(),n=(e.findIndex(s=>s.containsPosition(this.editor.getPosition()))+1)%e.length,r=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(r.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(r);const s=this._getWord();if(s){const o=this.editor.getModel().getLineContent(r.startLineNumber);jr(`${o}, ${n+1} of ${e.length} for '${s.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){const e=this._getSortedHighlights(),n=(e.findIndex(s=>s.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,r=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(r.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(r);const s=this._getWord();if(s){const o=this.editor.getModel().getLineContent(r.startLineNumber);jr(`${o}, ${n+1} of ${e.length} for '${s.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeDecorations(){this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1))}_stopAll(){this._removeDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){if(!this.occurrencesHighlight){this._stopAll();return}if(e.reason!==3){this._stopAll();return}this._run()}_getWord(){const e=this.editor.getSelection(),t=e.startLineNumber,n=e.startColumn;return this.model.getWordAtPosition({lineNumber:t,column:n})}_run(){const e=this.editor.getSelection();if(e.startLineNumber!==e.endLineNumber){this._stopAll();return}const t=e.startColumn,n=e.endColumn,r=this._getWord();if(!r||r.startColumn>t||r.endColumn<n){this._stopAll();return}const s=this.workerRequest&&this.workerRequest.isValid(this.model,e,this.decorations);if(this.lastCursorPositionChangeTime=new Date().getTime(),s)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();const o=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=Pqe(this.providers,this.model,this.editor.getSelection(),this.editor.getOption(129)),this.workerRequest.result.then(a=>{o===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=a||[],this._beginRenderDecorations())},ut)}}_beginRenderDecorations(){const e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){this.renderDecorationsTimer=-1;const e=[];for(const t of this.workerRequestValue)t.range&&e.push({range:t.range,options:oKe(t.kind)});this.decorations.set(e),this._hasWordHighlights.set(this.hasDecorations());for(const t of this.linkedHighlighters())(t==null?void 0:t.editor.getModel())===this.editor.getModel()&&(t._stopAll(),t.decorations.set(e),t._hasWordHighlights.set(t.hasDecorations()))}dispose(){this._stopAll(),this.toUnhook.dispose()}}let yp=kF=class extends q{static get(e){return e.getContribution(kF.ID)}constructor(e,t,n){super(),this.wordHighlighter=null,this.linkedContributions=new Set;const r=()=>{e.hasModel()&&!e.getModel().isTooLargeForTokenization()&&(this.wordHighlighter=new Mqe(e,n.documentHighlightProvider,()=>St.map(this.linkedContributions,s=>s.wordHighlighter),t))};this._register(e.onDidChangeModel(s=>{this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),r()})),r()}saveViewState(){return!!(this.wordHighlighter&&this.wordHighlighter.hasDecorations())}moveNext(){var e;(e=this.wordHighlighter)===null||e===void 0||e.moveNext()}moveBack(){var e;(e=this.wordHighlighter)===null||e===void 0||e.moveBack()}restoreViewState(e){this.wordHighlighter&&e&&this.wordHighlighter.restore()}dispose(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),super.dispose()}};yp.ID="editor.contrib.wordHighlighter";yp=kF=Eqe([tj(1,ot),tj(2,Fe)],yp);class gte extends Me{constructor(e,t){super(t),this._isNext=e}run(e,t){const n=yp.get(t);n&&(this._isNext?n.moveNext():n.moveBack())}}class Oqe extends gte{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:p("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:_R,kbOpts:{kbExpr:N.editorTextFocus,primary:65,weight:100}})}}class Fqe extends gte{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:p("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:_R,kbOpts:{kbExpr:N.editorTextFocus,primary:1089,weight:100}})}}class Bqe extends Me{constructor(){super({id:"editor.action.wordHighlight.trigger",label:p("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:_R.toNegated(),kbOpts:{kbExpr:N.editorTextFocus,primary:0,weight:100}})}run(e,t,n){const r=yp.get(t);r&&r.restoreViewState(!0)}}$t(yp.ID,yp,0);ue(Oqe);ue(Fqe);ue(Bqe);class bR extends sr{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){if(!t.hasModel())return;const r=da(t.getOption(129)),s=t.getModel(),a=t.getSelections().map(l=>{const c=new U(l.positionLineNumber,l.positionColumn),d=this._move(r,s,c,this._wordNavigationType);return this._moveTo(l,d,this._inSelectionMode)});if(s.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,a.map(l=>Ht.fromModelSelection(l))),a.length===1){const l=new U(a[0].positionLineNumber,a[0].positionColumn);t.revealPosition(l,0)}}_moveTo(e,t,n){return n?new Be(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new Be(t.lineNumber,t.column,t.lineNumber,t.column)}}class kf extends bR{_move(e,t,n,r){return Yt.moveWordLeft(e,t,n,r)}}class Lf extends bR{_move(e,t,n,r){return Yt.moveWordRight(e,t,n,r)}}class Wqe extends kf{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}class Vqe extends kf{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}class Hqe extends kf{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:re.and(N.textInputFocus,(e=re.and(UC,oI))===null||e===void 0?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}}class Uqe extends kf{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}class jqe extends kf{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}class zqe extends kf{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:re.and(N.textInputFocus,(e=re.and(UC,oI))===null||e===void 0?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}}class $qe extends kf{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,n,r){return super._move(da(Kl.wordSeparators.defaultValue),t,n,r)}}class Kqe extends kf{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,n,r){return super._move(da(Kl.wordSeparators.defaultValue),t,n,r)}}class qqe extends Lf{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}class Gqe extends Lf{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:re.and(N.textInputFocus,(e=re.and(UC,oI))===null||e===void 0?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}}class Zqe extends Lf{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}class Xqe extends Lf{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}class Yqe extends Lf{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:re.and(N.textInputFocus,(e=re.and(UC,oI))===null||e===void 0?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}}class Qqe extends Lf{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}class Jqe extends Lf{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,n,r){return super._move(da(Kl.wordSeparators.defaultValue),t,n,r)}}class eGe extends Lf{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,n,r){return super._move(da(Kl.wordSeparators.defaultValue),t,n,r)}}class vR extends sr{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){const r=e.get(wn);if(!t.hasModel())return;const s=da(t.getOption(129)),o=t.getModel(),a=t.getSelections(),l=t.getOption(6),c=t.getOption(11),d=r.getLanguageConfiguration(o.getLanguageId()).getAutoClosingPairs(),u=t._getViewModel(),h=a.map(f=>{const g=this._delete({wordSeparators:s,model:o,selection:f,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(9),autoClosingBrackets:l,autoClosingQuotes:c,autoClosingPairs:d,autoClosedCharacters:u.getCursorAutoClosedCharacters()},this._wordNavigationType);return new Sr(g,"")});t.pushUndoStop(),t.executeCommands(this.id,h),t.pushUndoStop()}}class A9 extends vR{_delete(e,t){const n=Yt.deleteWordLeft(e,t);return n||new D(1,1,1,1)}}class P9 extends vR{_delete(e,t){const n=Yt.deleteWordRight(e,t);if(n)return n;const r=e.model.getLineCount(),s=e.model.getLineMaxColumn(r);return new D(r,s,r,s)}}class tGe extends A9{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:N.writable})}}class nGe extends A9{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:N.writable})}}class iGe extends A9{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:N.writable,kbOpts:{kbExpr:N.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}class rGe extends P9{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:N.writable})}}class sGe extends P9{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:N.writable})}}class oGe extends P9{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:N.writable,kbOpts:{kbExpr:N.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}class aGe extends Me{constructor(){super({id:"deleteInsideWord",precondition:N.writable,label:p("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,n){if(!t.hasModel())return;const r=da(t.getOption(129)),s=t.getModel(),a=t.getSelections().map(l=>{const c=Yt.deleteInsideWord(r,s,l);return new Sr(c,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}}ye(new Wqe);ye(new Vqe);ye(new Hqe);ye(new Uqe);ye(new jqe);ye(new zqe);ye(new qqe);ye(new Gqe);ye(new Zqe);ye(new Xqe);ye(new Yqe);ye(new Qqe);ye(new $qe);ye(new Kqe);ye(new Jqe);ye(new eGe);ye(new tGe);ye(new nGe);ye(new iGe);ye(new rGe);ye(new sGe);ye(new oGe);ue(aGe);class lGe extends vR{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:N.writable,kbOpts:{kbExpr:N.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){const n=VD.deleteWordPartLeft(e);return n||new D(1,1,1,1)}}class cGe extends vR{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:N.writable,kbOpts:{kbExpr:N.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){const n=VD.deleteWordPartRight(e);if(n)return n;const r=e.model.getLineCount(),s=e.model.getLineMaxColumn(r);return new D(r,s,r,s)}}class pte extends bR{_move(e,t,n,r){return VD.moveWordPartLeft(e,t,n)}}class dGe extends pte{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:N.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}Bt.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class uGe extends pte{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:N.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}Bt.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class mte extends bR{_move(e,t,n,r){return VD.moveWordPartRight(e,t,n)}}class hGe extends mte{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:N.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}class fGe extends mte{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:N.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}ye(new lGe);ye(new cGe);ye(new dGe);ye(new uGe);ye(new hGe);ye(new fGe);class LF extends q{constructor(e){super(),this.editor=e,this._register(this.editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit()))}_onDidAttemptReadOnlyEdit(){const e=eo.get(this.editor);if(e&&this.editor.hasModel()){let t=this.editor.getOptions().get(91);t||(this.editor.isSimpleWidget?t=new Lr(p("editor.simple.readonly","Cannot edit in read-only input")):t=new Lr(p("editor.readonly","Cannot edit in read-only editor"))),e.showMessage(t,this.editor.getPosition())}}}LF.ID="editor.contrib.readOnlyMessageController";$t(LF.ID,LF,2);class DF extends q{constructor(e){super(),this.editor=e,this.widget=null,Ol&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const e=!this.editor.getOption(90);!this.widget&&e?this.widget=new yR(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}}DF.ID="editor.contrib.iPadShowKeyboard";class yR extends q{constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(ee(this._domNode,"touchstart",t=>{this.editor.focus()})),this._register(ee(this._domNode,"focus",t=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return yR.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}}yR.ID="editor.contrib.ShowKeyboardWidget";$t(DF.ID,DF,3);var gGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},nj=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},IF;let R1=IF=class extends q{static get(e){return e.getContribution(IF.ID)}constructor(e,t,n){super(),this._editor=e,this._languageService=n,this._widget=null,this._register(this._editor.onDidChangeModel(r=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(r=>this.stop())),this._register(Gn.onDidChange(r=>this.stop())),this._register(this._editor.onKeyUp(r=>r.keyCode===9&&this.stop()))}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new CR(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}};R1.ID="editor.contrib.inspectTokens";R1=IF=gGe([nj(1,Ho),nj(2,Fn)],R1);class pGe extends Me{constructor(){super({id:"editor.action.inspectTokens",label:kP.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){const n=R1.get(t);n==null||n.launch()}}function mGe(i){let e="";for(let t=0,n=i.length;t<n;t++){const r=i.charCodeAt(t);switch(r){case 9:e+="→";break;case 32:e+="·";break;default:e+=String.fromCharCode(r)}}return e}function _Ge(i,e){const t=Gn.get(e);if(t)return t;const n=i.encodeLanguageId(e);return{getInitialState:()=>Y_,tokenize:(r,s,o)=>t5(e,o),tokenizeEncoded:(r,s,o)=>AD(n,o)}}class CR extends q{constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._languageService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=_Ge(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(n=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return CR._ID}_compute(e){const t=this._getTokensAtLine(e.lineNumber);let n=0;for(let l=t.tokens1.length-1;l>=0;l--){const c=t.tokens1[l];if(e.column-1>=c.offset){n=l;break}}let r=0;for(let l=t.tokens2.length>>>1;l>=0;l--)if(e.column-1>=t.tokens2[l<<1]){r=l;break}const s=this._model.getLineContent(e.lineNumber);let o="";if(n<t.tokens1.length){const l=t.tokens1[n].offset,c=n+1<t.tokens1.length?t.tokens1[n+1].offset:s.length;o=s.substring(l,c)}br(this._domNode,ce("h2.tm-token",void 0,mGe(o),ce("span.tm-token-length",void 0,`${o.length} ${o.length===1?"char":"chars"}`))),se(this._domNode,ce("hr.tokens-inspect-separator",{style:"clear:both"}));const a=(r<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(r<<1)+1]):null;se(this._domNode,ce("table.tm-metadata-table",void 0,ce("tbody",void 0,ce("tr",void 0,ce("td.tm-metadata-key",void 0,"language"),ce("td.tm-metadata-value",void 0,`${a?a.languageId:"-?-"}`)),ce("tr",void 0,ce("td.tm-metadata-key",void 0,"token type"),ce("td.tm-metadata-value",void 0,`${a?this._tokenTypeToString(a.tokenType):"-?-"}`)),ce("tr",void 0,ce("td.tm-metadata-key",void 0,"font style"),ce("td.tm-metadata-value",void 0,`${a?this._fontStyleToString(a.fontStyle):"-?-"}`)),ce("tr",void 0,ce("td.tm-metadata-key",void 0,"foreground"),ce("td.tm-metadata-value",void 0,`${a?K.Format.CSS.formatHex(a.foreground):"-?-"}`)),ce("tr",void 0,ce("td.tm-metadata-key",void 0,"background"),ce("td.tm-metadata-value",void 0,`${a?K.Format.CSS.formatHex(a.background):"-?-"}`))))),se(this._domNode,ce("hr.tokens-inspect-separator")),n<t.tokens1.length&&se(this._domNode,ce("span.tm-token-type",void 0,t.tokens1[n].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){const t=Gn.getColorMap(),n=kr.getLanguageId(e),r=kr.getTokenType(e),s=kr.getFontStyle(e),o=kr.getForeground(e),a=kr.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(n),tokenType:r,fontStyle:s,foreground:t[o],background:t[a]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return e&1&&(t+="italic "),e&2&&(t+="bold "),e&4&&(t+="underline "),e&8&&(t+="strikethrough "),t.length===0&&(t="---"),t}_getTokensAtLine(e){const t=this._getStateBeforeLine(e),n=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t),r=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(e),!0,t);return{startState:t,tokens1:n.tokens,tokens2:r.tokens,endState:n.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let n=1;n<e;n++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(n),!0,t).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}CR._ID="editor.contrib.inspectTokensWidget";$t(R1.ID,R1,4);ue(pGe);var bGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},ij=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Sv;let _L=Sv=class{constructor(e,t){this.quickInputService=e,this.keybindingService=t,this.registry=qn.as(Hp.Quickaccess)}provide(e){const t=new ae;return t.add(e.onDidAccept(()=>{const[n]=e.selectedItems;n&&this.quickInputService.quickAccess.show(n.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(n=>{const r=this.registry.getQuickAccessProvider(n.substr(Sv.PREFIX.length));r&&r.prefix&&r.prefix!==Sv.PREFIX&&this.quickInputService.quickAccess.show(r.prefix,{preserveValue:!0})})),e.items=this.getQuickAccessProviders().filter(n=>n.prefix!==Sv.PREFIX),t}getQuickAccessProviders(){return this.registry.getQuickAccessProviders().sort((t,n)=>t.prefix.localeCompare(n.prefix)).flatMap(t=>this.createPicks(t))}createPicks(e){return e.helpEntries.map(t=>{const n=t.prefix||e.prefix,r=n||"…";return{prefix:n,label:r,keybinding:t.commandId?this.keybindingService.lookupKeybinding(t.commandId):void 0,ariaLabel:p("helpPickAriaLabel","{0}, {1}",r,t.description),description:t.description}})}};_L.PREFIX="?";_L=Sv=bGe([ij(0,Xl),ij(1,bn)],_L);qn.as(Hp.Quickaccess).registerQuickAccessProvider({ctor:_L,prefix:"",helpEntries:[{description:LP.helpQuickAccessActionLabel}]});class _te{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t){var n;const r=new ae;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const s=r.add(new vr);return s.value=this.doProvide(e,t),r.add(this.onDidActiveTextEditorControlChange(()=>{s.value=void 0,s.value=this.doProvide(e,t)})),r}doProvide(e,t){var n;const r=new ae,s=this.activeTextEditorControl;if(s&&this.canProvideWithTextEditor(s)){const o={editor:s},a=wQ(s);if(a){let l=(n=s.saveViewState())!==null&&n!==void 0?n:void 0;r.add(a.onDidChangeCursorPosition(()=>{var c;l=(c=s.saveViewState())!==null&&c!==void 0?c:void 0})),o.restoreViewState=()=>{l&&s===this.activeTextEditorControl&&s.restoreViewState(l)},r.add(Fh(t.onCancellationRequested)(()=>{var c;return(c=o.restoreViewState)===null||c===void 0?void 0:c.call(o)}))}r.add(st(()=>this.clearDecorations(s))),r.add(this.provideWithTextEditor(o,e,t))}else r.add(this.provideWithoutTextEditor(e,t));return r}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus();const n=e.getModel();n&&"getLineContent"in n&&zh(`${n.getLineContent(t.range.startLineNumber)}`)}getModel(e){var t;return CQ(e)?(t=e.getModel())===null||t===void 0?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(n=>{const r=[];this.rangeHighlightDecorationId&&(r.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),r.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const s=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:Zn(HZ),position:Ao.Full}}}],[o,a]=n.deltaDecorations(r,s);this.rangeHighlightDecorationId={rangeHighlightId:o,overviewRulerDecorationId:a}})}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(n=>{n.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}class wR extends _te{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=p("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,q.None}provideWithTextEditor(e,t,n){const r=e.editor,s=new ae;s.add(t.onDidAccept(l=>{const[c]=t.selectedItems;if(c){if(!this.isValidLineNumber(r,c.lineNumber))return;this.gotoLocation(e,{range:this.toRange(c.lineNumber,c.column),keyMods:t.keyMods,preserveFocus:l.inBackground}),l.inBackground||t.hide()}}));const o=()=>{const l=this.parsePosition(r,t.value.trim().substr(wR.PREFIX.length)),c=this.getPickLabel(r,l.lineNumber,l.column);if(t.items=[{lineNumber:l.lineNumber,column:l.column,label:c}],t.ariaLabel=c,!this.isValidLineNumber(r,l.lineNumber)){this.clearDecorations(r);return}const d=this.toRange(l.lineNumber,l.column);r.revealRangeInCenter(d,0),this.addDecorations(r,d)};o(),s.add(t.onDidChangeValue(()=>o()));const a=wQ(r);return a&&a.getOptions().get(67).renderType===2&&(a.updateOptions({lineNumbers:"on"}),s.add(st(()=>a.updateOptions({lineNumbers:"relative"})))),s}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const n=t.split(/,|:|#/).map(s=>parseInt(s,10)).filter(s=>!isNaN(s)),r=this.lineCount(e)+1;return{lineNumber:n[0]>0?n[0]:r+n[0],column:n[1]}}getPickLabel(e,t,n){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,n)?p("gotoLineColumnLabel","Go to line {0} and character {1}.",t,n):p("gotoLineLabel","Go to line {0}.",t);const r=e.getPosition()||{lineNumber:1,column:1},s=this.lineCount(e);return s>1?p("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",r.lineNumber,r.column,s):p("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",r.lineNumber,r.column)}isValidLineNumber(e,t){return!t||typeof t!="number"?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,n){if(!n||typeof n!="number")return!1;const r=this.getModel(e);if(!r)return!1;const s={lineNumber:t,column:n};return r.validatePosition(s).equals(s)}lineCount(e){var t,n;return(n=(t=this.getModel(e))===null||t===void 0?void 0:t.getLineCount())!==null&&n!==void 0?n:0}}wR.PREFIX=":";var vGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},yGe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let sC=class extends wR{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=Re.None}get activeTextEditorControl(){var e;return(e=this.editorService.getFocusedCodeEditor())!==null&&e!==void 0?e:void 0}};sC=vGe([yGe(0,Jt)],sC);let M9=class bte extends Me{constructor(){super({id:bte.ID,label:dk.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:N.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(Xl).quickAccess.show(sC.PREFIX)}};M9.ID="editor.action.gotoLine";ue(M9);qn.as(Hp.Quickaccess).registerQuickAccessProvider({ctor:sC,prefix:sC.PREFIX,helpEntries:[{description:dk.gotoLineActionLabel,commandId:M9.ID}]});const vte=[void 0,[]];function IN(i,e,t=0,n=0){const r=e;return r.values&&r.values.length>1?CGe(i,r.values,t,n):yte(i,e,t,n)}function CGe(i,e,t,n){let r=0;const s=[];for(const o of e){const[a,l]=yte(i,o,t,n);if(typeof a!="number")return vte;r+=a,s.push(...l)}return[r,wGe(s)]}function yte(i,e,t,n){const r=Qg(e.original,e.originalLowercase,t,i,i.toLowerCase(),n,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return r?[r[0],JC(r)]:vte}function wGe(i){const e=i.sort((r,s)=>r.start-s.start),t=[];let n;for(const r of e)!n||!SGe(n,r)?(n=r,t.push(r)):(n.start=Math.min(n.start,r.start),n.end=Math.max(n.end,r.end));return t}function SGe(i,e){return!(i.end<e.start||e.end<i.start)}function rj(i){return i.startsWith('"')&&i.endsWith('"')}const Cte=" ";function RF(i){typeof i!="string"&&(i="");const e=i.toLowerCase(),{pathNormalized:t,normalized:n,normalizedLowercase:r}=sj(i),s=t.indexOf(Ll)>=0,o=rj(i);let a;const l=i.split(Cte);if(l.length>1)for(const c of l){const d=rj(c),{pathNormalized:u,normalized:h,normalizedLowercase:f}=sj(c);h&&(a||(a=[]),a.push({original:c,originalLowercase:c.toLowerCase(),pathNormalized:u,normalized:h,normalizedLowercase:f,expectContiguousMatch:d}))}return{original:i,originalLowercase:e,pathNormalized:t,normalized:n,normalizedLowercase:r,values:a,containsPathSeparator:s,expectContiguousMatch:o}}function sj(i){let e;Ar?e=i.replace(/\//g,Ll):e=i.replace(/\\/g,Ll);const t=CTe(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}function oj(i){return Array.isArray(i)?RF(i.map(e=>e.original).join(Cte)):RF(i.original)}var xGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},aj=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Yb=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},O_;let Wc=O_=class extends _te{constructor(e,t,n=Object.create(null)){super(n),this._languageFeaturesService=e,this._outlineModelService=t,this.options=n,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,p("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),q.None}provideWithTextEditor(e,t,n){const r=e.editor,s=this.getModel(r);return s?this._languageFeaturesService.documentSymbolProvider.has(s)?this.doProvideWithEditorSymbols(e,s,t,n):this.doProvideWithoutEditorSymbols(e,s,t,n):q.None}doProvideWithoutEditorSymbols(e,t,n,r){const s=new ae;return this.provideLabelPick(n,p("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),Yb(this,void 0,void 0,function*(){!(yield this.waitForLanguageSymbolRegistry(t,s))||r.isCancellationRequested||s.add(this.doProvideWithEditorSymbols(e,t,n,r))}),s}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}waitForLanguageSymbolRegistry(e,t){return Yb(this,void 0,void 0,function*(){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;const n=new xD,r=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(r.dispose(),n.complete(!0))}));return t.add(st(()=>n.complete(!1))),n.p})}doProvideWithEditorSymbols(e,t,n,r){var s;const o=e.editor,a=new ae;a.add(n.onDidAccept(u=>{const[h]=n.selectedItems;h&&h.range&&(this.gotoLocation(e,{range:h.range.selection,keyMods:n.keyMods,preserveFocus:u.inBackground}),u.inBackground||n.hide())})),a.add(n.onDidTriggerItemButton(({item:u})=>{u&&u.range&&(this.gotoLocation(e,{range:u.range.selection,keyMods:n.keyMods,forceSideBySide:!0}),n.hide())}));const l=this.getDocumentSymbols(t,r);let c;const d=u=>Yb(this,void 0,void 0,function*(){c==null||c.dispose(!0),n.busy=!1,c=new vi(r),n.busy=!0;try{const h=RF(n.value.substr(O_.PREFIX.length).trim()),f=yield this.doGetSymbolPicks(l,h,void 0,c.token);if(r.isCancellationRequested)return;if(f.length>0){if(n.items=f,u&&h.original.length===0){const g=MT(f,m=>!!(m.type!=="separator"&&m.range&&D.containsPosition(m.range.decoration,u)));g&&(n.activeItems=[g])}}else h.original.length>0?this.provideLabelPick(n,p("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(n,p("noSymbolResults","No editor symbols"))}finally{r.isCancellationRequested||(n.busy=!1)}});return a.add(n.onDidChangeValue(()=>d(void 0))),d((s=o.getSelection())===null||s===void 0?void 0:s.getPosition()),a.add(n.onDidChangeActive(()=>{const[u]=n.activeItems;u&&u.range&&(o.revealRangeInCenter(u.range.selection,0),this.addDecorations(o,u.range.decoration))})),a}doGetSymbolPicks(e,t,n,r){var s,o;return Yb(this,void 0,void 0,function*(){const a=yield e;if(r.isCancellationRequested)return[];const l=t.original.indexOf(O_.SCOPE_PREFIX)===0,c=l?1:0;let d,u;t.values&&t.values.length>1?(d=oj(t.values[0]),u=oj(t.values.slice(1))):d=t;let h;const f=(o=(s=this.options)===null||s===void 0?void 0:s.openSideBySideDirection)===null||o===void 0?void 0:o.call(s);f&&(h=[{iconClass:f==="right"?Qe.asClassName(me.splitHorizontal):Qe.asClassName(me.splitVertical),tooltip:f==="right"?p("openToSide","Open to the Side"):p("openToBottom","Open to the Bottom")}]);const g=[];for(let b=0;b<a.length;b++){const v=a[b],C=vTe(v.name),w=`$(${CT.toIcon(v.kind).id}) ${C}`,S=w.length-C.length;let L=v.containerName;n!=null&&n.extraContainerLabel&&(L?L=`${n.extraContainerLabel} • ${L}`:L=n.extraContainerLabel);let T,I,R,B;if(t.original.length>c){let F=!1;if(d!==t&&([T,I]=IN(w,Object.assign(Object.assign({},t),{values:void 0}),c,S),typeof T=="number"&&(F=!0)),typeof T!="number"&&([T,I]=IN(w,d,c,S),typeof T!="number"))continue;if(!F&&u){if(L&&u.original.length>0&&([R,B]=IN(L,u)),typeof R!="number")continue;typeof T=="number"&&(T+=R)}}const V=v.tags&&v.tags.indexOf(1)>=0;g.push({index:b,kind:v.kind,score:T,label:w,ariaLabel:pTe(v.name,v.kind),description:L,highlights:V?void 0:{label:I,description:B},range:{selection:D.collapseToStart(v.selectionRange),decoration:v.range},strikethrough:V,buttons:h})}const m=g.sort((b,v)=>l?this.compareByKindAndScore(b,v):this.compareByScore(b,v));let y=[];if(l){let w=function(){v&&typeof b=="number"&&C>0&&(v.label=jg(EN[b]||RN,C))},b,v,C=0;for(const S of m)b!==S.kind?(w(),b=S.kind,C=1,v={type:"separator"},y.push(v)):C++,y.push(S);w()}else m.length>0&&(y=[{label:p("symbols","symbols ({0})",g.length),type:"separator"},...m]);return y})}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const n=EN[e.kind]||RN,r=EN[t.kind]||RN,s=n.localeCompare(r);return s===0?this.compareByScore(e,t):s}getDocumentSymbols(e,t){return Yb(this,void 0,void 0,function*(){const n=yield this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:n.asListOfDocumentSymbols()})}};Wc.PREFIX="@";Wc.SCOPE_PREFIX=":";Wc.PREFIX_BY_CATEGORY=`${O_.PREFIX}${O_.SCOPE_PREFIX}`;Wc=O_=xGe([aj(0,Fe),aj(1,GI)],Wc);const RN=p("property","properties ({0})"),EN={5:p("method","methods ({0})"),11:p("function","functions ({0})"),8:p("_constructor","constructors ({0})"),12:p("variable","variables ({0})"),4:p("class","classes ({0})"),22:p("struct","structs ({0})"),23:p("event","events ({0})"),24:p("operator","operators ({0})"),10:p("interface","interfaces ({0})"),2:p("namespace","namespaces ({0})"),3:p("package","packages ({0})"),25:p("typeParameter","type parameters ({0})"),1:p("modules","modules ({0})"),6:p("property","properties ({0})"),9:p("enum","enumerations ({0})"),21:p("enumMember","enumeration members ({0})"),14:p("string","strings ({0})"),0:p("file","files ({0})"),17:p("array","arrays ({0})"),15:p("number","numbers ({0})"),16:p("boolean","booleans ({0})"),18:p("object","objects ({0})"),19:p("key","keys ({0})"),7:p("field","fields ({0})"),13:p("constant","constants ({0})")};var TGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},NN=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let EF=class extends Wc{constructor(e,t,n){super(t,n),this.editorService=e,this.onDidActiveTextEditorControlChange=Re.None}get activeTextEditorControl(){var e;return(e=this.editorService.getFocusedCodeEditor())!==null&&e!==void 0?e:void 0}};EF=TGe([NN(0,Jt),NN(1,Fe),NN(2,GI)],EF);class ww extends Me{constructor(){super({id:ww.ID,label:py.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:N.hasDocumentSymbolProvider,kbOpts:{kbExpr:N.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(Xl).quickAccess.show(Wc.PREFIX,{itemActivation:ul.NONE})}}ww.ID="editor.action.quickOutline";ue(ww);qn.as(Hp.Quickaccess).registerQuickAccessProvider({ctor:EF,prefix:Wc.PREFIX,helpEntries:[{description:py.quickOutlineActionLabel,prefix:Wc.PREFIX,commandId:ww.ID},{description:py.quickOutlineByCategoryActionLabel,prefix:Wc.PREFIX_BY_CATEGORY}]});function AN(i,e){return e&&(i.stack||i.stacktrace)?p("stackTrace.format","{0}: {1}",cj(i),lj(i.stack)||lj(i.stacktrace)):cj(i)}function lj(i){return Array.isArray(i)?i.join(`
`):i}function cj(i){return i.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${i.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof i.code=="string"&&typeof i.errno=="number"&&typeof i.syscall=="string"?p("nodeExceptionMessage","A system error occurred ({0})",i.message):i.message||p("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function wte(i=null,e=!1){if(!i)return p("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(i)){const t=zc(i),n=wte(t[0],e);return t.length>1?p("error.moreErrors","{0} ({1} errors in total)",n,t.length):n}if(bs(i))return i;if(i.detail){const t=i.detail;if(t.error)return AN(t.error,e);if(t.exception)return AN(t.exception,e)}return i.stack?AN(i,e):i.message?i.message:p("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function kGe(i){var e;const t=new Map;for(const n of i)t.set(n,((e=t.get(n))!==null&&e!==void 0?e:0)+1);return t}class d0{constructor(){this.chunkCount=0,this.chunkOccurrences=new Map,this.documents=new Map}calculateScores(e,t){const n=this.computeEmbedding(e),r=new Map,s=[];for(const[o,a]of this.documents){if(t.isCancellationRequested)return[];for(const l of a.chunks){const c=this.computeSimilarityScore(l,n,r);c>0&&s.push({key:o,score:c})}}return s}static termFrequencies(e){return kGe(d0.splitTerms(e))}static*splitTerms(e){const t=n=>n.toLowerCase();for(const[n]of e.matchAll(/\b\p{Letter}[\p{Letter}\d]{2,}\b/gu)){yield t(n);const r=n.split(new RegExp("(?<=[a-z])(?=[A-Z])","g"));if(r.length>1)for(const s of r)s.length>2&&/\p{Letter}{3,}/gu.test(s)&&(yield t(s))}}updateDocuments(e){var t;for(const{key:n}of e)this.deleteDocument(n);for(const n of e){const r=[];for(const s of n.textChunks){const o=d0.termFrequencies(s);for(const a of o.keys())this.chunkOccurrences.set(a,((t=this.chunkOccurrences.get(a))!==null&&t!==void 0?t:0)+1);r.push({text:s,tf:o})}this.chunkCount+=r.length,this.documents.set(n.key,{chunks:r})}return this}deleteDocument(e){const t=this.documents.get(e);if(t){this.documents.delete(e),this.chunkCount-=t.chunks.length;for(const n of t.chunks)for(const r of n.tf.keys()){const s=this.chunkOccurrences.get(r);if(typeof s=="number"){const o=s-1;o<=0?this.chunkOccurrences.delete(r):this.chunkOccurrences.set(r,o)}}}}computeSimilarityScore(e,t,n){let r=0;for(const[s,o]of Object.entries(t)){const a=e.tf.get(s);if(!a)continue;let l=n.get(s);typeof l!="number"&&(l=this.computeIdf(s),n.set(s,l));const c=a*l;r+=c*o}return r}computeEmbedding(e){const t=d0.termFrequencies(e);return this.computeTfidf(t)}computeIdf(e){var t;const n=(t=this.chunkOccurrences.get(e))!==null&&t!==void 0?t:0;return n>0?Math.log((this.chunkCount+1)/n):0}computeTfidf(e){const t=Object.create(null);for(const[n,r]of e){const s=this.computeIdf(n);s>0&&(t[n]=r*s)}return t}}function LGe(i){var e,t;const n=i.slice(0);n.sort((s,o)=>o.score-s.score);const r=(t=(e=n[0])===null||e===void 0?void 0:e.score)!==null&&t!==void 0?t:0;if(r>0)for(const s of n)s.score/=r;return n}var Qb=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},r_;(function(i){i[i.NO_ACTION=0]="NO_ACTION",i[i.CLOSE_PICKER=1]="CLOSE_PICKER",i[i.REFRESH_PICKER=2]="REFRESH_PICKER",i[i.REMOVE_ITEM=3]="REMOVE_ITEM"})(r_||(r_={}));function PN(i){const e=i;return Array.isArray(e.items)}function dj(i){const e=i;return!!e.picks&&e.additionalPicks instanceof Promise}class DGe extends q{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t,n){var r;const s=new ae;e.canAcceptInBackground=!!(!((r=this.options)===null||r===void 0)&&r.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let o;const a=s.add(new vr),l=()=>Qb(this,void 0,void 0,function*(){const c=a.value=new ae;o==null||o.dispose(!0),e.busy=!1,o=new vi(t);const d=o.token,u=e.value.substr(this.prefix.length).trim(),h=this._getPicks(u,c,d,n),f=(m,y)=>{var b;let v,C;if(PN(m)?(v=m.items,C=m.active):v=m,v.length===0){if(y)return!1;(u.length>0||e.hideInput)&&(!((b=this.options)===null||b===void 0)&&b.noResultsPick)&&(E0(this.options.noResultsPick)?v=[this.options.noResultsPick(u)]:v=[this.options.noResultsPick])}return e.items=v,C&&(e.activeItems=[C]),!0},g=m=>Qb(this,void 0,void 0,function*(){let y=!1,b=!1;yield Promise.all([(()=>Qb(this,void 0,void 0,function*(){typeof m.mergeDelay=="number"&&(yield Vh(m.mergeDelay),d.isCancellationRequested)||b||(y=f(m.picks,!0))}))(),(()=>Qb(this,void 0,void 0,function*(){e.busy=!0;try{const v=yield m.additionalPicks;if(d.isCancellationRequested)return;let C,w;PN(m.picks)?(C=m.picks.items,w=m.picks.active):C=m.picks;let S,L;if(PN(v)?(S=v.items,L=v.active):S=v,S.length>0||!y){let T;if(!w&&!L){const I=e.activeItems[0];I&&C.indexOf(I)!==-1&&(T=I)}f({items:[...C,...S],active:w||L||T})}}finally{d.isCancellationRequested||(e.busy=!1),b=!0}}))()])});if(h!==null)if(dj(h))yield g(h);else if(!(h instanceof Promise))f(h);else{e.busy=!0;try{const m=yield h;if(d.isCancellationRequested)return;dj(m)?yield g(m):f(m)}finally{d.isCancellationRequested||(e.busy=!1)}}});return s.add(e.onDidChangeValue(()=>l())),l(),s.add(e.onDidAccept(c=>{const[d]=e.selectedItems;typeof(d==null?void 0:d.accept)=="function"&&(c.inBackground||e.hide(),d.accept(e.keyMods,c))})),s.add(e.onDidTriggerItemButton(({button:c,item:d})=>Qb(this,void 0,void 0,function*(){var u,h;if(typeof d.trigger=="function"){const f=(h=(u=d.buttons)===null||u===void 0?void 0:u.indexOf(c))!==null&&h!==void 0?h:-1;if(f>=0){const g=d.trigger(f,e.keyMods),m=typeof g=="number"?g:yield g;if(t.isCancellationRequested)return;switch(m){case r_.NO_ACTION:break;case r_.CLOSE_PICKER:e.hide();break;case r_.REFRESH_PICKER:l();break;case r_.REMOVE_ITEM:{const y=e.items.indexOf(d);if(y!==-1){const b=e.items.slice(),v=b.splice(y,1),C=e.activeItems.filter(S=>S!==v[0]),w=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=b,C&&(e.activeItems=C),e.keepScrollPosition=w}break}}}}}))),s}}var Ste=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},og=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},MN=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Kf,ji;let Cp=Kf=class extends DGe{constructor(e,t,n,r,s,o){super(Kf.PREFIX,e),this.instantiationService=t,this.keybindingService=n,this.commandService=r,this.telemetryService=s,this.dialogService=o,this.commandsHistory=this._register(this.instantiationService.createInstance(wp)),this.options=e}_getPicks(e,t,n,r){var s,o,a,l;return MN(this,void 0,void 0,function*(){const c=yield this.getCommandPicks(n);if(n.isCancellationRequested)return[];const d=Fh(()=>{const b=new d0;b.updateDocuments(c.map(C=>({key:C.commandId,textChunks:[C.label+(C.commandAlias?` ${C.commandAlias}`:"")]})));const v=b.calculateScores(e,n);return LGe(v).filter(C=>C.score>Kf.TFIDF_THRESHOLD).slice(0,Kf.TFIDF_MAX_RESULTS)}),u=[];for(const b of c){const v=(s=Kf.WORD_FILTER(e,b.label))!==null&&s!==void 0?s:void 0,C=b.commandAlias&&(o=Kf.WORD_FILTER(e,b.commandAlias))!==null&&o!==void 0?o:void 0;if(v||C)b.highlights={label:v,detail:this.options.showAlias?C:void 0},u.push(b);else if(e===b.commandId)u.push(b);else if(e.length>=3){const w=d();if(n.isCancellationRequested)return[];const S=w.find(L=>L.key===b.commandId);S&&(b.tfIdfScore=S.score,u.push(b))}}const h=new Map;for(const b of u){const v=h.get(b.label);v?(b.description=b.commandId,v.description=v.commandId):h.set(b.label,b)}u.sort((b,v)=>{if(b.tfIdfScore&&v.tfIdfScore)return b.tfIdfScore===v.tfIdfScore?b.label.localeCompare(v.label):v.tfIdfScore-b.tfIdfScore;if(b.tfIdfScore)return 1;if(v.tfIdfScore)return-1;const C=this.commandsHistory.peek(b.commandId),w=this.commandsHistory.peek(v.commandId);if(C&&w)return C>w?-1:1;if(C)return-1;if(w)return 1;if(this.options.suggestedCommandIds){const S=this.options.suggestedCommandIds.has(b.commandId),L=this.options.suggestedCommandIds.has(v.commandId);if(S&&L)return 0;if(S)return-1;if(L)return 1}return b.label.localeCompare(v.label)});const f=[];let g=!1,m=!0,y=!!this.options.suggestedCommandIds;for(let b=0;b<u.length;b++){const v=u[b];b===0&&this.commandsHistory.peek(v.commandId)&&(f.push({type:"separator",label:p("recentlyUsed","recently used")}),g=!0),m&&v.tfIdfScore!==void 0&&(f.push({type:"separator",label:p("suggested","similar commands")}),m=!1),y&&v.tfIdfScore===void 0&&!this.commandsHistory.peek(v.commandId)&&(!((a=this.options.suggestedCommandIds)===null||a===void 0)&&a.has(v.commandId))&&(f.push({type:"separator",label:p("commonlyUsed","commonly used")}),g=!0,y=!1),g&&v.tfIdfScore===void 0&&!this.commandsHistory.peek(v.commandId)&&!(!((l=this.options.suggestedCommandIds)===null||l===void 0)&&l.has(v.commandId))&&(f.push({type:"separator",label:p("morecCommands","other commands")}),g=!1),f.push(this.toCommandPick(v,r))}return this.hasAdditionalCommandPicks(e,n)?{picks:f,additionalPicks:(()=>MN(this,void 0,void 0,function*(){var b;const v=yield this.getAdditionalCommandPicks(c,u,e,n);if(n.isCancellationRequested)return[];const C=v.map(w=>this.toCommandPick(w,r));return m&&((b=C[0])===null||b===void 0?void 0:b.type)!=="separator"&&C.unshift({type:"separator",label:p("suggested","similar commands")}),C}))()}:f})}toCommandPick(e,t){if(e.type==="separator")return e;const n=this.keybindingService.lookupKeybinding(e.commandId),r=n?p("commandPickAriaLabelWithKeybinding","{0}, {1}",e.label,n.getAriaLabel()):e.label;return Object.assign(Object.assign({},e),{ariaLabel:r,detail:this.options.showAlias&&e.commandAlias!==e.label?e.commandAlias:void 0,keybinding:n,accept:()=>MN(this,void 0,void 0,function*(){var s,o;this.commandsHistory.push(e.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.commandId,from:(s=t==null?void 0:t.from)!==null&&s!==void 0?s:"quick open"});try{!((o=e.args)===null||o===void 0)&&o.length?yield this.commandService.executeCommand(e.commandId,...e.args):yield this.commandService.executeCommand(e.commandId)}catch(a){ql(a)||this.dialogService.error(p("canNotRun","Command '{0}' resulted in an error",e.label),wte(a))}})})}};Cp.PREFIX=">";Cp.TFIDF_THRESHOLD=.5;Cp.TFIDF_MAX_RESULTS=5;Cp.WORD_FILTER=K5(vy,LFe,ZX);Cp=Kf=Ste([og(1,rt),og(2,bn),og(3,oi),og(4,Wo),og(5,YC)],Cp);let wp=ji=class extends q{constructor(e,t){super(),this.storageService=e,this.configurationService=t,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>this.updateConfiguration(e)))}updateConfiguration(e){e&&!e.affectsConfiguration("workbench.commandPalette.history")||(this.configuredCommandsHistoryLength=ji.getConfiguredCommandHistoryLength(this.configurationService),ji.cache&&ji.cache.limit!==this.configuredCommandsHistoryLength&&(ji.cache.limit=this.configuredCommandsHistoryLength,ji.saveState(this.storageService)))}load(){const e=this.storageService.get(ji.PREF_KEY_CACHE,0);let t;if(e)try{t=JSON.parse(e)}catch{}const n=ji.cache=new bf(this.configuredCommandsHistoryLength,1);if(t){let r;t.usesLRU?r=t.entries:r=t.entries.sort((s,o)=>s.value-o.value),r.forEach(s=>n.set(s.key,s.value))}ji.counter=this.storageService.getNumber(ji.PREF_KEY_COUNTER,0,ji.counter)}push(e){ji.cache&&(ji.cache.set(e,ji.counter++),ji.saveState(this.storageService))}peek(e){var t;return(t=ji.cache)===null||t===void 0?void 0:t.peek(e)}static saveState(e){if(!ji.cache)return;const t={usesLRU:!0,entries:[]};ji.cache.forEach((n,r)=>t.entries.push({key:r,value:n})),e.store(ji.PREF_KEY_CACHE,JSON.stringify(t),0,0),e.store(ji.PREF_KEY_COUNTER,ji.counter,0,0)}static getConfiguredCommandHistoryLength(e){var t,n;const s=(n=(t=e.getValue().workbench)===null||t===void 0?void 0:t.commandPalette)===null||n===void 0?void 0:n.history;return typeof s=="number"?s:ji.DEFAULT_COMMANDS_HISTORY_LENGTH}};wp.DEFAULT_COMMANDS_HISTORY_LENGTH=50;wp.PREF_KEY_CACHE="commandPalette.mru.cache";wp.PREF_KEY_COUNTER="commandPalette.mru.counter";wp.counter=1;wp=ji=Ste([og(0,Za),og(1,Et)],wp);class IGe extends Cp{constructor(e,t,n,r,s,o){super(e,t,n,r,s,o)}getCodeEditorCommandPicks(){const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const n of e.getSupportedActions())t.push({commandId:n.id,commandAlias:n.alias,label:Q5(n.label)||n.id});return t}}var RGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},wm=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},uj=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};let oC=class extends IGe{get activeTextEditorControl(){var e;return(e=this.codeEditorService.getFocusedCodeEditor())!==null&&e!==void 0?e:void 0}constructor(e,t,n,r,s,o){super({showAlias:!1},e,n,r,s,o),this.codeEditorService=t}getCommandPicks(){return uj(this,void 0,void 0,function*(){return this.getCodeEditorCommandPicks()})}hasAdditionalCommandPicks(){return!1}getAdditionalCommandPicks(){return uj(this,void 0,void 0,function*(){return[]})}};oC=RGe([wm(0,rt),wm(1,Jt),wm(2,bn),wm(3,oi),wm(4,Wo),wm(5,YC)],oC);class Sw extends Me{constructor(){super({id:Sw.ID,label:uk.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:N.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(Xl).quickAccess.show(oC.PREFIX)}}Sw.ID="editor.action.quickCommand";ue(Sw);qn.as(Hp.Quickaccess).registerQuickAccessProvider({ctor:oC,prefix:oC.PREFIX,helpEntries:[{description:uk.quickCommandHelp,commandId:Sw.ID}]});var EGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Sm=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let NF=class extends tf{constructor(e,t,n,r,s,o,a){super(!0,e,t,n,r,s,o,a)}};NF=EGe([Sm(1,ot),Sm(2,Jt),Sm(3,wi),Sm(4,rt),Sm(5,Za),Sm(6,Et)],NF);$t(tf.ID,NF,4);class NGe extends Me{constructor(){super({id:"editor.action.toggleHighContrast",label:DP.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){const n=e.get(Ho),r=n.getColorTheme();Rl(r.type)?(n.setTheme(this._originalThemeName||(t1(r.type)?E_:Vd)),this._originalThemeName=null):(n.setTheme(t1(r.type)?Dg:Ig),this._originalThemeName=r.themeName)}}ue(NGe);const AGe="vs-dark",PGe=!0,MGe=[{token:"",background:"282a36"},{token:"library.function",foreground:"#03d400"},{token:"keyword",foreground:"#50fa7b"},{background:"282a36",token:""},{foreground:"6272a4",token:"comment"},{foreground:"f1fa8c",token:"string"},{foreground:"bd93f9",token:"constant.numeric"},{foreground:"bd93f9",token:"constant.language"},{foreground:"bd93f9",token:"constant.character"},{foreground:"bd93f9",token:"constant.other"},{foreground:"ffb86c",token:"variable.other.readwrite.instance"},{foreground:"ff79c6",token:"constant.character.escaped"},{foreground:"ff79c6",token:"constant.character.escape"},{foreground:"ff79c6",token:"string source"},{foreground:"ff79c6",token:"string source.ruby"},{foreground:"ff79c6",token:"keyword"},{foreground:"ff79c6",token:"storage"},{foreground:"8be9fd",fontStyle:"italic",token:"storage.type"},{foreground:"50fa7b",fontStyle:"underline",token:"entity.name.class"},{foreground:"50fa7b",fontStyle:"italic underline",token:"entity.other.inherited-class"},{foreground:"50fa7b",token:"entity.name.function"},{foreground:"ffb86c",fontStyle:"italic",token:"variable.parameter"},{foreground:"ff79c6",token:"entity.name.tag"},{foreground:"50fa7b",token:"entity.other.attribute-name"},{foreground:"8be9fd",token:"support.function"},{foreground:"6be5fd",token:"support.constant"},{foreground:"66d9ef",fontStyle:" italic",token:"support.type"},{foreground:"66d9ef",fontStyle:" italic",token:"support.class"},{foreground:"f8f8f0",background:"ff79c6",token:"invalid"},{foreground:"f8f8f0",background:"bd93f9",token:"invalid.deprecated"},{foreground:"cfcfc2",token:"meta.structure.dictionary.json string.quoted.double.json"},{foreground:"6272a4",token:"meta.diff"},{foreground:"6272a4",token:"meta.diff.header"},{foreground:"ff79c6",token:"markup.deleted"},{foreground:"50fa7b",token:"markup.inserted"},{foreground:"e6db74",token:"markup.changed"},{foreground:"bd93f9",token:"constant.numeric.line-number.find-in-files - match"},{foreground:"e6db74",token:"entity.name.filename"},{foreground:"f83333",token:"message.error"},{foreground:"eeeeee",token:"punctuation.definition.string.begin.json - meta.structure.dictionary.value.json"},{foreground:"eeeeee",token:"punctuation.definition.string.end.json - meta.structure.dictionary.value.json"},{foreground:"8be9fd",token:"meta.structure.dictionary.json string.quoted.double.json"},{foreground:"f1fa8c",token:"meta.structure.dictionary.value.json string.quoted.double.json"},{foreground:"50fa7b",token:"meta meta meta meta meta meta meta.structure.dictionary.value string"},{foreground:"ffb86c",token:"meta meta meta meta meta meta.structure.dictionary.value string"},{foreground:"ff79c6",token:"meta meta meta meta meta.structure.dictionary.value string"},{foreground:"bd93f9",token:"meta meta meta meta.structure.dictionary.value string"},{foreground:"50fa7b",token:"meta meta meta.structure.dictionary.value string"},{foreground:"ffb86c",token:"meta meta.structure.dictionary.value string"}],OGe={"editor.foreground":"#f8f8f2","editor.background":"#282a36","editor.selectionBackground":"#44475a","editor.lineHighlightBackground":"#44475a","editorCursor.foreground":"#f8f8f0","editorWhitespace.foreground":"#3B3A32","editorIndentGuide.activeBackground":"#9D550FB0","editor.selectionHighlightBorder":"#222218"},FGe={base:AGe,inherit:PGe,rules:MGe,colors:OGe},BGe=`namespace globalThis {\r
  declare function length<T extends any[]>(list: T[]): number\r
}\r
`,WGe=`type MaybePatterns<T, U> =\r
  | {\r
      Just: (value: T) => U\r
      Nothing: () => U\r
    }\r
  | {\r
      _: () => U\r
    }\r
interface AlwaysJust {\r
  kind: "$$MaybeAlwaysJust"\r
}\r
type ExtractMaybe<T, TDefault> = T extends never ? TDefault : T | TDefault\r
interface MaybeTypeRef {\r
  /** Takes a value and wraps it in a \`Just\` */\r
  of<T>(value: T): Maybe<T>\r
  /** Returns \`Nothing\` */\r
  empty(): Nothing\r
  /** Returns \`Nothing\` */\r
  zero(): Nothing\r
  /** Takes a value and returns \`Nothing\` if the value is null or undefined, otherwise a \`Just\` is returned */\r
  fromNullable<T>(value: T | undefined | null | void): Maybe<T>\r
  /** Takes a value and returns Nothing if the value is falsy, otherwise a Just is returned */\r
  fromFalsy<T>(value: T | undefined | null | void): Maybe<T>\r
  /** Takes a predicate and a value, passes the value to the predicate and returns a Just if it returns true, otherwise a Nothing is returned */\r
  fromPredicate<T>(pred: (value: T) => boolean): (value: T) => Maybe<T>\r
  fromPredicate<T>(pred: (value: T) => boolean, value: T): Maybe<T>\r
  /** Returns only the \`Just\` values in a list */\r
  catMaybes<T>(list: readonly Maybe<T>[]): T[]\r
  /** Maps over a list of values and returns a list of all resulting \`Just\` values */\r
  mapMaybe<T, U>(f: (value: T) => Maybe<U>): (list: readonly T[]) => U[]\r
  mapMaybe<T, U>(f: (value: T) => Maybe<U>, list: readonly T[]): U[]\r
  /** Calls a function that may throw and wraps the result in a \`Just\` if successful or \`Nothing\` if an error is caught */\r
  encase<T>(thunk: () => T): Maybe<T>\r
  isMaybe<T>(x: unknown): x is Maybe<T>\r
  /** Turns a list of \`Maybe\`s into an \`Maybe\` of list if all items are \`Just\` */\r
  sequence<T>(maybes: readonly Maybe<T>[]): Maybe<T[]>\r
  "fantasy-land/of"<T>(value: T): Maybe<T>\r
  "fantasy-land/empty"(): Nothing\r
  "fantasy-land/zero"(): Nothing\r
}\r
interface Maybe<T> {\r
  /** Returns true if \`this\` is \`Just\`, otherwise it returns false */\r
  isJust(): this is AlwaysJust\r
  /** Returns true if \`this\` is \`Nothing\`, otherwise it returns false */\r
  isNothing(): this is Nothing\r
  inspect(): string\r
  toString(): string\r
  toJSON(): T\r
  /** Compares the values inside \`this\` and the argument, returns true if both are Nothing or if the values are equal */\r
  equals(other: Maybe<T>): boolean\r
  /** Transforms the value inside \`this\` with a given function. Returns \`Nothing\` if \`this\` is \`Nothing\` */\r
  map<U>(f: (value: T) => U): Maybe<U>\r
  /** Maps \`this\` with a \`Maybe\` function */\r
  ap<U>(maybeF: Maybe<(value: T) => U>): Maybe<U>\r
  /** Returns the first \`Just\` between \`this\` and another \`Maybe\` or \`Nothing\` if both \`this\` and the argument are \`Nothing\` */\r
  alt(other: Maybe<T>): Maybe<T>\r
  /** Lazy version of \`alt\` */\r
  altLazy(other: () => Maybe<T>): Maybe<T>\r
  /** Transforms \`this\` with a function that returns a \`Maybe\`. Useful for chaining many computations that may result in a missing value */\r
  chain<U>(f: (value: T) => Maybe<U>): Maybe<U>\r
  /** Transforms \`this\` with a function that returns a nullable value. Equivalent to \`m.chain(x => Maybe.fromNullable(f(x)))\` */\r
  chainNullable<U>(f: (value: T) => U | undefined | null | void): Maybe<U>\r
  /** Flattens nested Maybes. \`m.join()\` is equivalent to \`m.chain(x => x)\` */\r
  join<U>(this: Maybe<Maybe<U>>): Maybe<U>\r
  /** Takes a reducer and an initial value and returns the initial value if \`this\` is \`Nothing\` or the result of applying the function to the initial value and the value inside \`this\` */\r
  reduce<U>(reducer: (accumulator: U, value: T) => U, initialValue: U): U\r
  /** Returns \`this\` if it's \`Nothing\`, otherwise it returns the result of applying the function argument to \`this\` and wrapping it in a \`Just\` */\r
  extend<U>(f: (value: Maybe<T>) => U): Maybe<U>\r
  /** Returns the value inside \`this\` or throws an error if \`this\` is \`Nothing\` */\r
  unsafeCoerce(): T\r
  /** Structural pattern matching for \`Maybe\` in the form of a function */\r
  caseOf<U>(patterns: MaybePatterns<T, U>): U\r
  /** Returns the default value if \`this\` is \`Nothing\`, otherwise it return the value inside \`this\` */\r
  orDefault(defaultValue: T): T\r
  /** Lazy version of \`orDefault\`. Takes a function that returns the default value, that function will be called only if \`this\` is \`Nothing\` */\r
  orDefaultLazy(getDefaultValue: () => T): T\r
  /** Returns empty list if the \`Maybe\` is \`Nothing\` or a list where the only element is the value of \`Just\` */\r
  toList(): T[]\r
  /** Maps over \`this\` and returns the resulting value or returns the default value if \`this\` is \`Nothing\` */\r
  mapOrDefault<U>(f: (value: T) => U, defaultValue: U): U\r
  /** Returns the value inside \`this\` or undefined if \`this\` is \`Nothing\`. Use \`extractNullable\` if you need a null returned instead */\r
  extract(): this extends AlwaysJust ? T : ExtractMaybe<T, undefined>\r
  /** Returns the value inside \`this\` or null if \`this\` is \`Nothing\`. Use \`extract\` if you need an undefined returned instead */\r
  extractNullable(): this extends AlwaysJust ? T : ExtractMaybe<T, null>\r
  /** Constructs a \`Right\` from a \`Just\` or a \`Left\` with a provided left value if \`this\` is \`Nothing\` */\r
  toEither<L>(left: L): Either<L, T>\r
  /** Runs an effect if \`this\` is \`Just\`, returns \`this\` to make chaining other methods possible */\r
  ifJust(effect: (value: T) => any): this\r
  /** Runs an effect if \`this\` is \`Nothing\`, returns \`this\` to make chaining other methods possible */\r
  ifNothing(effect: () => any): this\r
  /** Takes a predicate function and returns \`this\` if the predicate returns true or Nothing if it returns false */\r
  filter<U extends T>(pred: (value: T) => value is U): Maybe<U>\r
  /** Takes a predicate function and returns \`this\` if the predicate returns true or Nothing if it returns false */\r
  filter(pred: (value: T) => boolean): Maybe<T>\r
  "fantasy-land/equals"(other: Maybe<T>): boolean\r
  "fantasy-land/map"<U>(f: (value: T) => U): Maybe<U>\r
  "fantasy-land/ap"<U>(maybeF: Maybe<(value: T) => U>): Maybe<U>\r
  "fantasy-land/alt"(other: Maybe<T>): Maybe<T>\r
  "fantasy-land/chain"<U>(f: (value: T) => Maybe<U>): Maybe<U>\r
  "fantasy-land/reduce"<U>(\r
    reducer: (accumulator: U, value: T) => U,\r
    initialValue: U\r
  ): U\r
  "fantasy-land/extend"<U>(f: (value: Maybe<T>) => U): Maybe<U>\r
  "fantasy-land/filter"<U extends T>(pred: (value: T) => boolean): Maybe<U>\r
  "fantasy-land/filter"(pred: (value: T) => boolean): Maybe<T>\r
}\r
declare const Maybe: MaybeTypeRef\r
declare class Nothing implements Maybe<never> {\r
  private __value\r
  isJust(): boolean\r
  isNothing(): boolean\r
  inspect(): string\r
  toString(): string\r
  toJSON(): never\r
  equals<T>(other: Maybe<T>): boolean\r
  map<U>(_: (value: never) => U): Maybe<U>\r
  ap<U>(_: Maybe<(value: never) => U>): Maybe<U>\r
  alt<T>(other: Maybe<T>): Maybe<T>\r
  altLazy<T>(other: () => Maybe<T>): Maybe<T>\r
  chain<U>(_: (value: never) => Maybe<U>): Maybe<U>\r
  chainNullable<U>(_: (value: never) => U | undefined | null | void): Maybe<U>\r
  join<U>(this: Maybe<Maybe<U>>): Maybe<U>\r
  reduce<U>(_: (accumulator: U, value: never) => U, initialValue: U): U\r
  extend<U>(_: (value: Maybe<never>) => U): Maybe<U>\r
  unsafeCoerce<T>(): T\r
  caseOf<U>(patterns: MaybePatterns<never, U>): U\r
  orDefault<T>(defaultValue: T): T\r
  orDefaultLazy<T>(getDefaultValue: () => T): T\r
  toList<T>(): T[]\r
  mapOrDefault<U>(_: (value: never) => U, defaultValue: U): U\r
  extract(): this extends AlwaysJust ? never : ExtractMaybe<never, undefined>\r
  extractNullable(): this extends AlwaysJust ? never : ExtractMaybe<never, null>\r
  toEither<L, T>(left: L): Either<L, T>\r
  ifJust(_: (value: never) => any): this\r
  ifNothing(effect: () => any): this\r
  filter(_: (value: never) => boolean): Maybe<never>\r
  "fantasy-land/equals": <T>(other: Maybe<T>) => boolean\r
  "fantasy-land/map": <U>(_: (value: never) => U) => Maybe<U>\r
  "fantasy-land/ap": <U>(_: Maybe<(value: never) => U>) => Maybe<U>\r
  "fantasy-land/alt": <T>(other: Maybe<T>) => Maybe<T>\r
  "fantasy-land/chain": <U>(_: (value: never) => Maybe<U>) => Maybe<U>\r
  "fantasy-land/reduce": <U>(\r
    _: (accumulator: U, value: never) => U,\r
    initialValue: U\r
  ) => U\r
  "fantasy-land/extend": <U>(_: (value: Maybe<never>) => U) => Maybe<U>\r
  "fantasy-land/filter": (_: (value: never) => boolean) => Maybe<never>\r
}\r
/** Constructs a Just. Represents an optional value that exists */\r
declare const just: <T>(value: T) => Maybe<T>\r
/** Represents a missing value, you can think of it as a smart 'null' */\r
declare const nothing: Nothing\r
\r
type EitherPatterns<L, R, T> =\r
  | {\r
      Left: (l: L) => T\r
      Right: (r: R) => T\r
    }\r
  | {\r
      _: () => T\r
    }\r
interface EitherTypeRef {\r
  /** Takes a value and wraps it in a \`Right\` */\r
  of<L, R>(value: R): Either<L, R>\r
  /** Takes a list of \`Either\`s and returns a list of all \`Left\` values */\r
  lefts<L, R>(list: readonly Either<L, R>[]): L[]\r
  /** Takes a list of \`Either\`s and returns a list of all \`Right\` values */\r
  rights<L, R>(list: readonly Either<L, R>[]): R[]\r
  /** Calls a function and returns a \`Right\` with the return value or an exception wrapped in a \`Left\` in case of failure */\r
  encase<L extends Error, R>(throwsF: () => R): Either<L, R>\r
  /** Turns a list of \`Either\`s into an \`Either\` of list */\r
  sequence<L, R>(eithers: readonly Either<L, R>[]): Either<L, R[]>\r
  isEither<L, R>(x: unknown): x is Either<L, R>\r
  "fantasy-land/of"<L, R>(value: R): Either<L, R>\r
}\r
interface Either<L, R> {\r
  /** Returns true if \`this\` is \`Left\`, otherwise it returns false */\r
  isLeft(): this is Either<L, never>\r
  /** Returns true if \`this\` is \`Right\`, otherwise it returns false */\r
  isRight(): this is Either<never, R>\r
  toJSON(): L | R\r
  inspect(): string\r
  toString(): string\r
  /** Given two functions, maps the value inside \`this\` using the first if \`this\` is \`Left\` or using the second one if \`this\` is \`Right\`.\r
   * If both functions return the same type consider using \`Either#either\` instead\r
   */\r
  bimap<L2, R2>(f: (value: L) => L2, g: (value: R) => R2): Either<L2, R2>\r
  /** Maps the \`Right\` value of \`this\`, acts like an identity if \`this\` is \`Left\` */\r
  map<R2>(f: (value: R) => R2): Either<L, R2>\r
  /** Maps the \`Left\` value of \`this\`, acts like an identity if \`this\` is \`Right\` */\r
  mapLeft<L2>(f: (value: L) => L2): Either<L2, R>\r
  /** Applies a \`Right\` function over a \`Right\` value. Returns \`Left\` if either \`this\` or the function are \`Left\` */\r
  ap<L2, R2>(other: Either<L2, (value: R) => R2>): Either<L | L2, R2>\r
  /** Compares \`this\` to another \`Either\`, returns false if the constructors or the values inside are different, e.g. \`Right(5).equals(Left(5))\` is false */\r
  equals(other: Either<L, R>): boolean\r
  /** Transforms \`this\` with a function that returns an \`Either\`. Useful for chaining many computations that may fail */\r
  chain<L2, R2>(f: (value: R) => Either<L2, R2>): Either<L | L2, R2>\r
  /** The same as Either#chain but executes the transformation function only if the value is Left. Useful for recovering from errors */\r
  chainLeft<L2, R2>(f: (value: L) => Either<L2, R2>): Either<L2, R | R2>\r
  /** Flattens nested Eithers. \`e.join()\` is equivalent to \`e.chain(x => x)\` */\r
  join<L2, R2>(this: Either<L, Either<L2, R2>>): Either<L | L2, R2>\r
  /** Returns the first \`Right\` between \`this\` and another \`Either\` or the \`Left\` in the argument if both \`this\` and the argument are \`Left\` */\r
  alt(other: Either<L, R>): Either<L, R>\r
  /** Lazy version of \`alt\` */\r
  altLazy(other: () => Either<L, R>): Either<L, R>\r
  /** Takes a reducer and an initial value and returns the initial value if \`this\` is \`Left\` or the result of applying the function to the initial value and the value inside \`this\` */\r
  reduce<T>(reducer: (accumulator: T, value: R) => T, initialValue: T): T\r
  /** Returns \`this\` if it's a \`Left\`, otherwise it returns the result of applying the function argument to \`this\` and wrapping it in a \`Right\` */\r
  extend<R2>(f: (value: Either<L, R>) => R2): Either<L, R2>\r
  /** Returns the value inside \`this\` if it's a \`Right\` or either throws the value or a generic exception depending on whether the value is an Error */\r
  unsafeCoerce(): R\r
  /** Structural pattern matching for \`Either\` in the form of a function */\r
  caseOf<T>(patterns: EitherPatterns<L, R, T>): T\r
  /** Returns the value inside \`this\` if it\\'s \`Left\` or a default value if \`this\` is \`Right\` */\r
  leftOrDefault(defaultValue: L): L\r
  /** Returns the value inside \`this\` if it\\'s \`Right\` or a default value if \`this\` is \`Left\` */\r
  orDefault(defaultValue: R): R\r
  /** Lazy version of \`orDefault\`. Takes a function that returns the default value, that function will be called only if \`this\` is \`Left\` */\r
  orDefaultLazy(getDefaultValue: () => R): R\r
  /** Lazy version of \`leftOrDefault\`. Takes a function that returns the default value, that function will be called only if \`this\` is \`Right\` */\r
  leftOrDefaultLazy(getDefaultValue: () => L): L\r
  /** Runs an effect if \`this\` is \`Left\`, returns \`this\` to make chaining other methods possible */\r
  ifLeft(effect: (value: L) => any): this\r
  /** Runs an effect if \`this\` is \`Right\`, returns \`this\` to make chaining other methods possible */\r
  ifRight(effect: (value: R) => any): this\r
  /** Constructs a \`Just\` with the value of \`this\` if it\\'s \`Right\` or a \`Nothing\` if \`this\` is \`Left\` */\r
  toMaybe(): Maybe<R>\r
  /** Constructs a \`Just\` with the value of \`this\` if it\\'s \`Left\` or a \`Nothing\` if \`this\` is \`Right\` */\r
  leftToMaybe(): Maybe<L>\r
  /** Extracts the value out of \`this\` */\r
  extract(): L | R\r
  /** Returns \`Right\` if \`this\` is \`Left\` and vice versa */\r
  swap(): Either<R, L>\r
  "fantasy-land/bimap"<L2, R2>(\r
    f: (value: L) => L2,\r
    g: (value: R) => R2\r
  ): Either<L2, R2>\r
  "fantasy-land/map"<R2>(f: (value: R) => R2): Either<L, R2>\r
  "fantasy-land/ap"<R2>(other: Either<L, (value: R) => R2>): Either<L, R2>\r
  "fantasy-land/equals"(other: Either<L, R>): boolean\r
  "fantasy-land/chain"<L2, R2>(\r
    f: (value: R) => Either<L2, R2>\r
  ): Either<L | L2, R2>\r
  "fantasy-land/alt"(other: Either<L, R>): Either<L, R>\r
  "fantasy-land/reduce"<T>(\r
    reducer: (accumulator: T, value: R) => T,\r
    initialValue: T\r
  ): T\r
  "fantasy-land/extend"<R2>(f: (value: Either<L, R>) => R2): Either<L, R2>\r
}\r
declare const Either: EitherTypeRef\r
declare const left: <L, R = never>(value: L) => Either<L, R>\r
declare const right: <R, L = never>(value: R) => Either<L, R>\r
\r
interface TupleTypeRef {\r
  <F, S>(fst: F, snd: S): Tuple<F, S>\r
  /** Applies two functions over a single value and constructs a tuple from the results */\r
  fanout<F, S, T>(f: (value: T) => F, g: (value: T) => S, value: T): Tuple<F, S>\r
  fanout<F, S, T>(\r
    f: (value: T) => F,\r
    g: (value: T) => S\r
  ): (value: T) => Tuple<F, S>\r
  fanout<F, T>(\r
    f: (value: T) => F\r
  ): <S>(g: (value: T) => S) => (value: T) => Tuple<F, S>\r
  /** Constructs a tuple from an array with two elements */\r
  fromArray<F, S>([fst, snd]: [F, S]): Tuple<F, S>\r
}\r
interface Tuple<F, S> extends Iterable<F | S>, ArrayLike<F | S> {\r
  0: F\r
  1: S\r
  [index: number]: F | S\r
  length: 2\r
  toJSON(): [F, S]\r
  inspect(): string\r
  toString(): string\r
  /** Returns the first value of \`this\` */\r
  fst(): F\r
  /** Returns the second value of \`this\` */\r
  snd(): S\r
  /** Compares the values inside \`this\` and another tuple */\r
  equals(other: Tuple<F, S>): boolean\r
  /** Transforms the two values inside \`this\` with two mapper functions */\r
  bimap<F2, S2>(f: (fst: F) => F2, g: (snd: S) => S2): Tuple<F2, S2>\r
  /** Applies a function to the first value of \`this\` */\r
  mapFirst<F2>(f: (fst: F) => F2): Tuple<F2, S>\r
  /** Applies a function to the second value of \`this\` */\r
  map<S2>(f: (snd: S) => S2): Tuple<F, S2>\r
  /** A somewhat arbitrary implementation of Foldable for Tuple, the reducer will be passed the initial value and the second value inside \`this\` as arguments */\r
  reduce<T>(reducer: (accumulator: T, value: S) => T, initialValue: T): T\r
  /** Returns an array with 2 elements - the values inside \`this\` */\r
  toArray(): [F, S]\r
  /** Swaps the values inside \`this\` */\r
  swap(): Tuple<S, F>\r
  /** Applies the second value of a tuple to the second value of \`this\` */\r
  ap<T, S2>(f: Tuple<T, (value: S) => S2>): Tuple<F, S2>\r
  /** Tests whether both elements in the tuple pass the test implemented by the provided function */\r
  every(pred: (value: F | S) => boolean): boolean\r
  /** Tests whether at least one element in the tuple passes the test implemented by the provided function */\r
  some(pred: (value: F | S) => boolean): boolean\r
  "fantasy-land/equals"(other: Tuple<F, S>): boolean\r
  "fantasy-land/bimap"<F2, S2>(\r
    f: (fst: F) => F2,\r
    g: (snd: S) => S2\r
  ): Tuple<F2, S2>\r
  "fantasy-land/map"<S2>(f: (snd: S) => S2): Tuple<F, S2>\r
  "fantasy-land/reduce"<T>(\r
    reducer: (accumulator: T, value: S) => T,\r
    initialValue: T\r
  ): T\r
  "fantasy-land/ap"<T, S2>(f: Tuple<T, (value: S) => S2>): Tuple<F, S2>\r
}\r
declare const Tuple: TupleTypeRef\r
\r
type NonEmptyListCompliant<T> = T[] & {\r
  0: T\r
}\r
interface NonEmptyListTypeRef {\r
  /** Typecasts an array with at least one element into a \`NonEmptyList\`. Works only if the compiler can confirm that the array has one or more elements */\r
  <T extends NonEmptyListCompliant<T[number]>>(list: T): NonEmptyList<T[number]>\r
  /** Returns a \`Just NonEmptyList\` if the parameter has one or more elements, otherwise it returns \`Nothing\` */\r
  fromArray<T>(source: readonly T[]): Maybe<NonEmptyList<T>>\r
  /** Converts a \`Tuple\` to a \`NonEmptyList\` */\r
  fromTuple<T, U>(source: Tuple<T, U>): NonEmptyList<T | U>\r
  /** Typecasts any array into a \`NonEmptyList\`, but throws an exception if the array is empty. Use \`fromArray\` as a safe alternative */\r
  unsafeCoerce<T>(source: readonly T[]): NonEmptyList<T>\r
  /** Returns true and narrows the type if the passed array has one or more elements */\r
  isNonEmpty<T>(list: readonly T[]): list is NonEmptyList<T>\r
  /** The same function as \\\`List#head\\\`, but it doesn't return a Maybe as a NonEmptyList will always have a head */\r
  head<T>(list: NonEmptyList<T>): T\r
  /** The same function as \\\`List#last\\\`, but it doesn't return a Maybe as a NonEmptyList will always have a last element */\r
  last<T>(list: NonEmptyList<T>): T\r
  /** The same function as \\\`List#tail\\\`, but it doesn't return a Maybe as a NonEmptyList will always have a tail (although it may be of length 0) */\r
  tail<T>(list: NonEmptyList<T>): T[]\r
}\r
interface NonEmptyList<T> extends NonEmptyListCompliant<T> {\r
  map<U>(\r
    this: NonEmptyList<T>,\r
    callbackfn: (value: T, index: number, array: NonEmptyList<T>) => U,\r
    thisArg?: any\r
  ): NonEmptyList<U>\r
  reverse(this: NonEmptyList<T>): NonEmptyList<T>\r
  concat(...items: ConcatArray<T>[]): NonEmptyList<T>\r
  concat(...items: (T | ConcatArray<T>)[]): NonEmptyList<T>\r
}\r
declare const NonEmptyList: NonEmptyListTypeRef\r
\r
/** Special type used when you want to do the opposite of \`GetType\` - define a Codec for an existing type. The problem is that due to technical limitations optional properties are hard to generate in TypeScript so Codec generates properties of type "T | undefined" instead, which is not compatible */\r
type FromType<T> = {\r
  [P in keyof Required<T>]: Pick<T, P> extends Required<Pick<T, P>>\r
    ? T[P]\r
    : T[P] | undefined\r
}\r
/** You can use this to get a free type from any codec */\r
type GetType<T extends Codec<any>> = T extends Codec<infer U> ? U : never\r
interface Codec<T> {\r
  /** Takes a JSON value and runs the decode function the codec was constructed with. All of purify's built-in codecs return a descriptive error message in case the decode fails */\r
  decode: (input: unknown) => Either<string, T>\r
  /** Takes a runtime value and turns it into a JSON value using the encode function the codec was constructed with. Most of purify's built-in codecs have no custom encode method and they just return the same value, but you could add custom serialization logic for your custom codecs. */\r
  encode: <U = unknown>(input: T) => U\r
  /** The same as the decode method, but throws an exception on failure. Please only use as an escape hatch */\r
  unsafeDecode: (input: unknown) => T\r
  schema: () => any\r
}\r
declare const Codec: {\r
  /** Creates a codec for any JSON object */\r
  interface<T extends Record<string, Codec<any>>>(\r
    properties: T\r
  ): Codec<{ [k in keyof T]: GetType<T[k]> }>\r
  /** Creates a codec for any type, you can add your own deserialization/validation logic in the decode argument */\r
  custom<T_1>({\r
    decode,\r
    encode,\r
    schema\r
  }: {\r
    decode: (value: unknown) => Either<string, T_1>\r
    encode: (value: T_1) => any\r
    schema?: (() => object) | undefined\r
  }): Codec<T_1>\r
}\r
/** A codec for any string value. Most of the time you will use it to implement an interface codec (see the Codec#interface example above). Encoding a string acts like the identity function */\r
declare const string: Codec<string>\r
/** A codec for any number value. This includes anything that has a typeof number - NaN, Infinity etc. Encoding a number acts like the identity function */\r
declare const number: Codec<number>\r
/** A codec for null only */\r
declare const nullType: Codec<null>\r
declare const optional: <T>(codec: Codec<T>) => Codec<T | undefined>\r
/** A codec for a value T or null. Keep in mind if you use \`nullable\` inside \`Codec.interface\` the property will still be required */\r
declare const nullable: <T>(codec: Codec<T>) => Codec<T | null>\r
/** A codec for a boolean value */\r
declare const boolean: Codec<boolean>\r
/** A codec that can never fail, but of course you get no type information. Encoding an unknown acts like the identity function */\r
declare const unknown: Codec<unknown>\r
/** A codec for a TypeScript enum */\r
declare const enumeration: <T extends Record<string, string | number>>(\r
  e: T\r
) => Codec<T[keyof T]>\r
/** A codec combinator that receives a list of codecs and runs them one after another during decode and resolves to whichever returns Right or to Left if all fail */\r
declare const oneOf: <T extends [Codec<any>, ...Codec<any>[]]>(\r
  codecs: T\r
) => Codec<GetType<T extends (infer U)[] ? U : never>>\r
/** A codec for an array */\r
declare const array: <T>(codec: Codec<T>) => Codec<T[]>\r
/** A codec for an object without specific properties, its restrictions are equivalent to the Record<K, V> type so you can only check for number and string keys */\r
declare const record: <K extends string | number | symbol, V>(\r
  keyCodec: Codec<K>,\r
  valueCodec: Codec<V>\r
) => Codec<Record<K, V>>\r
/** A codec that only succeeds decoding when the value is exactly what you've constructed the codec with */\r
declare const exactly: <T extends (string | number | boolean)[]>(\r
  ...expectedValues: T\r
) => Codec<T[number]>\r
/** A special codec used when dealing with recursive data structures, it allows a codec to be recursively defined by itself */\r
declare const lazy: <T>(getCodec: () => Codec<T>) => Codec<T>\r
/** A codec for purify's Maybe type. Encode runs Maybe#toJSON, which effectively returns the value inside if it's a Just or undefined if it's Nothing */\r
declare const maybe: <T>(codec: Codec<T>) => Codec<Maybe<T>>\r
/** A codec for purify's NEL type */\r
declare const nonEmptyList: <T>(codec: Codec<T>) => Codec<NonEmptyList<T>>\r
/** The same as the array decoder, but accepts a fixed amount of array elements and you can specify each element type, much like the tuple type */\r
declare const tuple: <TS extends [Codec<any>, ...Codec<any>[]]>(\r
  codecs: TS\r
) => Codec<{ [i in keyof TS]: TS[i] extends Codec<infer U> ? U : never }>\r
/** A codec for a parsable date string, on successful decoding it resolves to a Date object. The validity of the date string during decoding is decided by the browser implementation of Date.parse. Encode runs toISOString on the passed in date object */\r
declare const date: Codec<Date>\r
/** Creates an intersection between two codecs. If the provided codecs are not for an object, the second decode result will be returned */\r
declare const intersect: <T, U>(t: Codec<T>, u: Codec<U>) => Codec<T & U>\r
/** A codec for the built-in Map type */\r
declare const map: <K, V>(\r
  keyCodec: Codec<K>,\r
  valueCodec: Codec<V>\r
) => Codec<Map<K, V>>\r
type ExpectedType =\r
  | "string"\r
  | "number"\r
  | "boolean"\r
  | "object"\r
  | "array"\r
  | "null"\r
  | "undefined"\r
  | "enum"\r
type ReceivedType =\r
  | "string"\r
  | "number"\r
  | "boolean"\r
  | "object"\r
  | "array"\r
  | "null"\r
  | "undefined"\r
  | "bigint"\r
  | "symbol"\r
  | "function"\r
type DecodeError =\r
  | {\r
      type: "property"\r
      property: string\r
      error: DecodeError\r
    }\r
  | {\r
      type: "index"\r
      index: number\r
      error: DecodeError\r
    }\r
  | {\r
      type: "oneOf"\r
      errors: DecodeError[]\r
    }\r
  | {\r
      type: "failure"\r
      expectedType?: ExpectedType\r
      receivedType: ReceivedType\r
      receivedValue?: unknown\r
    }\r
  | {\r
      type: "custom"\r
      message: string\r
    }\r
/** Turns a string error message produced by a built-in purify codec into a meta object */\r
declare const parseError: (error: string) => DecodeError\r
\r
/** The identity function, returns the value it was given */\r
declare const identity: <T>(x: T) => T\r
/** Returns a function that always returns the same value. Also known as \`const\` in other languages */\r
declare const always: <T>(x: T) => <U>(y: U) => T\r
declare const enum Order {\r
  LT = "LT",\r
  EQ = "EQ",\r
  GT = "GT"\r
}\r
/** Compares two values using the default "<" and ">" operators */\r
declare const compare: <T>(x: T, y: T) => Order\r
/** Maps the Order enum to the values expected by the standard ECMAScript library when doing comparison (Array.prototype.sort, for example) */\r
declare const orderToNumber: (order: Order) => number\r
type TupleOfLength<T extends any[]> = Extract<\r
  {\r
    [K in keyof T]: any\r
  },\r
  any[]\r
>\r
type CurriedFn<TAllArgs extends any[], TReturn> = <\r
  TProvidedArgs extends TAllArgs extends [infer TFirstArg, ...infer TRestOfArgs]\r
    ? [TFirstArg, ...Partial<TRestOfArgs>]\r
    : never\r
>(\r
  ...args: TProvidedArgs\r
) => TProvidedArgs extends TAllArgs\r
  ? TReturn\r
  : TAllArgs extends [...TupleOfLength<TProvidedArgs>, ...infer TRestOfArgs]\r
  ? CurriedFn<TRestOfArgs, TReturn>\r
  : never\r
/** Takes a function that receives multiple arguments and returns a "curried" version of that function that can take any number of those arguments and if they are less than needed a new function that takes the rest of them will be returned */\r
declare const curry: <TArgs extends any[], TReturn>(\r
  fn: (...args: TArgs) => TReturn\r
) => CurriedFn<TArgs, TReturn>\r
\r
/** Returns the first element which satisfies a predicate. A more typesafe version of the already existing List.prototype.find */\r
declare function find<T>(\r
  f: (x: T, index: number, arr: T[]) => boolean,\r
  list: T[]\r
): Maybe<T>\r
declare function find<T>(\r
  f: (x: T, index: number, arr: T[]) => boolean\r
): (list: T[]) => Maybe<T>\r
/** Returns the index of the first element which satisfies a predicate. A more typesafe version of the already existing List.prototype.findIndex */\r
declare function findIndex<T>(\r
  f: (x: T, index: number, arr: T[]) => boolean,\r
  list: T[]\r
): Maybe<number>\r
declare function findIndex<T>(\r
  f: (x: T, index: number, arr: T[]) => boolean\r
): (list: T[]) => Maybe<number>\r
/** Returns the element at a given index of a list */\r
declare function at<T>(index: number, list: readonly T[]): Maybe<T>\r
declare function at<T>(index: number): (list: readonly T[]) => Maybe<T>\r
/** Sorts an array with the given comparison function */\r
declare function sort<T>(\r
  compare: (a: T, b: T) => Order,\r
  list: readonly T[]\r
): T[]\r
declare function sort<T>(\r
  compare: (a: T, b: T) => Order\r
): (list: readonly T[]) => T[]\r
declare const List: {\r
  init: <T>(list: readonly T[]) => Maybe<T[]>\r
  uncons: <T_1>(list: readonly T_1[]) => Maybe<Tuple<T_1, T_1[]>>\r
  at: typeof at\r
  head: <T_2>(list: readonly T_2[]) => Maybe<T_2>\r
  last: <T_3>(list: readonly T_3[]) => Maybe<T_3>\r
  tail: <T_4>(list: readonly T_4[]) => Maybe<T_4[]>\r
  find: typeof find\r
  findIndex: typeof findIndex\r
  sum: (list: readonly number[]) => number\r
  sort: typeof sort\r
}\r
\r
interface EitherAsyncTypeRef {\r
  /** Constructs an \`EitherAsync\` object from a function that takes an object full of helpers that let you lift things into the \`EitherAsync\` context and returns a Promise */\r
  <L, R>(\r
    runPromise: (helpers: EitherAsyncHelpers<L>) => PromiseLike<R>\r
  ): EitherAsync<L, R>\r
  /** Constructs an \`EitherAsync\` object from a function that returns an Either wrapped in a Promise */\r
  fromPromise<L, R>(f: () => PromiseLike<Either<L, R>>): EitherAsync<L, R>\r
  /** Constructs an \`EitherAsync\` object from an Either */\r
  liftEither<L, R>(either: Either<L, R>): EitherAsync<L, R>\r
  /** Takes a list of \`EitherAsync\`s and returns a Promise that will resolve with all \`Left\` values. Internally it uses \`Promise.all\` to wait for all results */\r
  lefts<L, R>(list: readonly EitherAsync<L, R>[]): Promise<L[]>\r
  /** Takes a list of \`EitherAsync\`s and returns a Promise that will resolve with all \`Right\` values. Internally it uses \`Promise.all\` to wait for all results */\r
  rights<L, R>(list: readonly EitherAsync<L, R>[]): Promise<R[]>\r
  /** Turns a list of \`EitherAsync\`s into an \`EitherAsync\` of list. The returned \`Promise\` will be rejected as soon as a single \`EitherAsync\` resolves to a \`Left\`, it will not wait for all Promises to resolve and since \`EitherAsync\` is lazy, unlike \`Promise\`, the remaining async operations will not be executed at all */\r
  sequence<L, R>(eas: readonly EitherAsync<L, R>[]): EitherAsync<L, R[]>\r
  /** The same as \`EitherAsync.sequence\`, but it will run all async operations at the same time rather than sequentially */\r
  all<L, R>(eas: readonly EitherAsync<L, R>[]): EitherAsync<L, R[]>\r
}\r
interface EitherAsyncValue<R> extends PromiseLike<R> {}\r
interface EitherAsyncHelpers<L> {\r
  /** Allows you to take a regular Either value and lift it to the \`EitherAsync\` context. Awaiting a lifted Either will give you the \`Right\` value inside. If the Either is Left then the function will exit immediately and EitherAsync will resolve to that Left after running it */\r
  liftEither<R>(either: Either<L, R>): EitherAsyncValue<R>\r
  /** Allows you to take an Either inside a Promise and lift it to the \`EitherAsync\` context. Awaiting a lifted Promise<Either> will give you the \`Right\` value inside the Either. If the Either is Left or the Promise is rejected then the function will exit immediately and MaybeAsync will resolve to that Left or the rejection value after running it */\r
  fromPromise<R>(promise: PromiseLike<Either<L, R>>): EitherAsyncValue<R>\r
  /** A type safe version of throwing an exception. Unlike the Error constructor, which will take anything, throwE only accepts values of the same type as the Left part of the Either */\r
  throwE(error: L): never\r
}\r
interface EitherAsync<L, R> extends PromiseLike<Either<L, R>> {\r
  /**\r
   * It's important to remember how \`run\` will behave because in an\r
   * async context there are other ways for a function to fail other\r
   * than to return a Nothing, for example:\r
   * If any of the computations inside EitherAsync resolved to a Left,\r
   * \`run\` will return a Promise resolved to that Left.\r
   * If any of the promises were to be rejected then \`run\` will return\r
   * a Promise resolved to a Left with the rejection value inside\r
   * If an exception is thrown then \`run\` will return a Promise\r
   * resolved to a Left with the exception inside\r
   * If none of the above happen then a promise resolved to the\r
   * returned value wrapped in a Right will be returned\r
   */\r
  run(): Promise<Either<L, R>>\r
  /** Given two functions, maps the value that the Promise inside \`this\` resolves to using the first if it is \`Left\` or using the second one if it is \`Right\` */\r
  bimap<L2, R2>(\r
    f: (value: L) => L2,\r
    g: (value: R) => R2\r
  ): EitherAsync<Awaited<L2>, Awaited<R2>>\r
  /** Transforms the \`Right\` value of \`this\` with a given function. If the \`EitherAsync\` that is being mapped resolves to a Left then the mapping function won't be called and \`run\` will resolve the whole thing to that Left, just like the regular Either#map */\r
  map<R2>(f: (value: R) => R2): EitherAsync<L, Awaited<R2>>\r
  /** Maps the \`Left\` value of \`this\`, acts like an identity if \`this\` is \`Right\` */\r
  mapLeft<L2>(f: (value: L) => L2): EitherAsync<Awaited<L2>, R>\r
  /** Transforms \`this\` with a function that returns a \`EitherAsync\`. Behaviour is the same as the regular Either#chain */\r
  chain<L2, R2>(\r
    f: (value: R) => PromiseLike<Either<L2, R2>>\r
  ): EitherAsync<L | L2, R2>\r
  /** The same as EitherAsync#chain but executes the transformation function only if the value is Left. Useful for recovering from errors */\r
  chainLeft<L2, R2>(\r
    f: (value: L) => PromiseLike<Either<L2, R2>>\r
  ): EitherAsync<L2, R | R2>\r
  /** Flattens an \`Either\` nested inside an \`EitherAsync\`. \`e.join()\` is equivalent to \`e.chain(async x => x)\` */\r
  join<L2, R2>(this: EitherAsync<L, Either<L2, R2>>): EitherAsync<L | L2, R2>\r
  /** Converts \`this\` to a MaybeAsync, discarding any error values */\r
  toMaybeAsync(): MaybeAsync<R>\r
  /** Returns \`Right\` if \`this\` is \`Left\` and vice versa */\r
  swap(): EitherAsync<R, L>\r
  /** Runs an effect if \`this\` is \`Left\`, returns \`this\` to make chaining other methods possible */\r
  ifLeft(effect: (value: L) => any): EitherAsync<L, R>\r
  /** Runs an effect if \`this\` is \`Right\`, returns \`this\` to make chaining other methods possible */\r
  ifRight(effect: (value: R) => any): EitherAsync<L, R>\r
  /** Applies a \`Right\` function wrapped in \`EitherAsync\` over a future \`Right\` value. Returns \`Left\` if either the \`this\` resolves to a \`Left\` or the function is \`Left\` */\r
  ap<L2, R2>(\r
    other: PromiseLike<Either<L2, (value: R) => R2>>\r
  ): EitherAsync<L | L2, Awaited<R2>>\r
  /** Returns the first \`Right\` between the future value of \`this\` and another \`EitherAsync\` or the \`Left\` in the argument if both \`this\` and the argument resolve to \`Left\` */\r
  alt(other: EitherAsync<L, R>): EitherAsync<L, R>\r
  /** Returns \`this\` if it resolves to a \`Left\`, otherwise it returns the result of applying the function argument to \`this\` and wrapping it in a \`Right\` */\r
  extend<R2>(f: (value: EitherAsync<L, R>) => R2): EitherAsync<L, Awaited<R2>>\r
  /** Returns a Promise that resolves to the value inside \`this\` if it\\'s \`Left\` or a default value if \`this\` is \`Right\` */\r
  leftOrDefault(defaultValue: L): Promise<L>\r
  /** Returns a Promise that resolves to the value inside \`this\` if it\\'s \`Right\` or a default value if \`this\` is \`Left\` */\r
  orDefault(defaultValue: R): Promise<R>\r
  /** Useful if you are not interested in the result of an operation */\r
  void(): EitherAsync<L, void>\r
  /** Structural pattern matching for \`EitherAsync\` in the form of a function */\r
  caseOf<T>(patterns: EitherPatterns<L, R, T>): Promise<T>\r
  finally(effect: () => any): EitherAsync<L, R>\r
  "fantasy-land/chain"<R2>(\r
    f: (value: R) => PromiseLike<Either<L, R2>>\r
  ): EitherAsync<L, R2>\r
  "fantasy-land/alt"(other: EitherAsync<L, R>): EitherAsync<L, R>\r
  /** WARNING: This is implemented only for Promise compatibility. Please use \`chain\` instead. */\r
  then: PromiseLike<Either<L, R>>["then"]\r
}\r
declare const EitherAsync: EitherAsyncTypeRef\r
\r
interface MaybeAsyncTypeRef {\r
  /** Constructs a MaybeAsync object from a function that takes an object full of helpers that let you lift things into the MaybeAsync context and returns a Promise */\r
  <T>(runPromise: (helpers: MaybeAsyncHelpers) => PromiseLike<T>): MaybeAsync<T>\r
  /** Constructs an MaybeAsync object from a function that returns a Maybe wrapped in a Promise */\r
  fromPromise<T>(f: () => Promise<Maybe<T>>): MaybeAsync<T>\r
  /** Constructs an MaybeAsync object from a Maybe */\r
  liftMaybe<T>(maybe: Maybe<T>): MaybeAsync<T>\r
  /** Takes a list of \`MaybeAsync\`s and returns a Promise that will resolve with all \`Just\` values. Internally it uses \`Promise.all\` to wait for all results */\r
  catMaybes<T>(list: readonly MaybeAsync<T>[]): Promise<T[]>\r
}\r
interface MaybeAsyncValue<T> extends PromiseLike<T> {}\r
interface MaybeAsyncHelpers {\r
  /** Allows you to take a regular Maybe value and lift it to the MaybeAsync context. Awaiting a lifted Maybe will give you the value inside. If the Maybe is Nothing then the function will exit immediately and MaybeAsync will resolve to Nothing after running it */\r
  liftMaybe<T>(maybe: Maybe<T>): MaybeAsyncValue<T>\r
  /** Allows you to take a Maybe inside a Promise and lift it to the MaybeAsync context. Awaiting a lifted Promise<Maybe> will give you the value inside the Maybe. If the Maybe is Nothing or the Promise is rejected then the function will exit immediately and MaybeAsync will resolve to Nothing after running it */\r
  fromPromise<T>(promise: PromiseLike<Maybe<T>>): MaybeAsyncValue<T>\r
}\r
interface MaybeAsync<T> extends PromiseLike<Maybe<T>> {\r
  /**\r
   * It's important to remember how \`run\` will behave because in an\r
   * async context there are other ways for a function to fail other\r
   * than to return a Nothing, for example:\r
   * If any of the computations inside MaybeAsync resolved to Nothing,\r
   * \`run\` will return a Promise resolved to Nothing.\r
   * If any of the promises were to be rejected then \`run\` will return\r
   * a Promise resolved to Nothing.\r
   * If an exception is thrown then \`run\` will return a Promise\r
   * resolved to Nothing.\r
   * If none of the above happen then a promise resolved to the\r
   * returned value wrapped in a Just will be returned.\r
   */\r
  run(): Promise<Maybe<T>>\r
  /** Transforms the value inside \`this\` with a given function. If the MaybeAsync that is being mapped resolves to Nothing then the mapping function won't be called and \`run\` will resolve the whole thing to Nothing, just like the regular Maybe#map */\r
  map<U>(f: (value: T) => U): MaybeAsync<Awaited<U>>\r
  /** Transforms \`this\` with a function that returns a \`MaybeAsync\`. Behaviour is the same as the regular Maybe#chain */\r
  chain<U>(f: (value: T) => PromiseLike<Maybe<U>>): MaybeAsync<U>\r
  /** Converts \`this\` to a EitherAsync with a default error value */\r
  toEitherAsync<L>(error: L): EitherAsync<L, T>\r
  /** Runs an effect if \`this\` is \`Just\`, returns \`this\` to make chaining other methods possible */\r
  ifJust(effect: (value: T) => any): MaybeAsync<T>\r
  /** Runs an effect if \`this\` is \`Nothing\`, returns \`this\` to make chaining other methods possible */\r
  ifNothing(effect: () => any): MaybeAsync<T>\r
  /** Returns the default value if \`this\` is \`Nothing\`, otherwise it returns a Promise that will resolve to the value inside \`this\` */\r
  orDefault(defaultValue: T): Promise<T>\r
  /** Maps the future value of \`this\` with another future \`Maybe\` function */\r
  ap<U>(maybeF: PromiseLike<Maybe<(value: T) => U>>): MaybeAsync<Awaited<U>>\r
  /** Returns the first \`Just\` between the future value of \`this\` and another future \`Maybe\` or future \`Nothing\` if both \`this\` and the argument are \`Nothing\` */\r
  alt(other: MaybeAsync<T>): MaybeAsync<T>\r
  /** Returns \`this\` if it resolves to \`Nothing\`, otherwise it returns the result of applying the function argument to the value of \`this\` and wrapping it in a \`Just\` */\r
  extend<U>(f: (value: MaybeAsync<T>) => U): MaybeAsync<Awaited<U>>\r
  /** Takes a predicate function and returns \`this\` if the predicate, applied to the resolved value, is true or Nothing if it's false */\r
  filter<U extends T>(pred: (value: T) => value is U): MaybeAsync<U>\r
  /** Takes a predicate function and returns \`this\` if the predicate, applied to the resolved value, is true or Nothing if it's false */\r
  filter(pred: (value: T) => boolean): MaybeAsync<T>\r
  /** Flattens a \`Maybe\` nested inside a \`MaybeAsync\`. \`m.join()\` is equivalent to \`m.chain(async x => x)\` */\r
  join<U>(this: MaybeAsync<Maybe<U>>): MaybeAsync<U>\r
  /** Useful if you are not interested in the result of an operation */\r
  void(): MaybeAsync<void>\r
  /** Structural pattern matching for \`MaybeAsync\` in the form of a function */\r
  caseOf<U>(patterns: MaybePatterns<T, U>): Promise<U>\r
  finally(effect: () => any): MaybeAsync<T>\r
  "fantasy-land/chain"<U>(f: (value: T) => PromiseLike<Maybe<U>>): MaybeAsync<U>\r
  "fantasy-land/alt"(other: MaybeAsync<T>): MaybeAsync<T>\r
  "fantasy-land/filter"<U extends T>(\r
    pred: (value: T) => value is U\r
  ): MaybeAsync<U>\r
  "fantasy-land/filter"(pred: (value: T) => boolean): MaybeAsync<T>\r
  /** WARNING: This is implemented only for Promise compatibility. Please use \`chain\` instead. */\r
  then: PromiseLike<Maybe<T>>["then"]\r
}\r
declare const MaybeAsync: MaybeAsyncTypeRef\r
`,VGe=`// Minimum TypeScript Version: 2.4\r
/* eslint-disable no-shadow */\r
\r
interface Functor<T> {\r
  map<U>(fn: (t: T) => U): Functor<U>\r
}\r
\r
interface Apply<T> extends Functor<T> {\r
  ap<U>(fn: Apply<(t: T) => U>): Apply<U>\r
}\r
\r
interface Foldable<T> {\r
  reduce<Acc>(fn: (acc: Acc, val: T) => Acc, initAcc: Acc): Acc\r
}\r
\r
interface Filterable<T> {\r
  filter(fn: (t: T) => Boolean): Filterable<T>\r
}\r
\r
interface Semigroup {\r
  // https://www.typescriptlang.org/docs/handbook/advanced-types.html#polymorphic-this-types\r
  concat(other: this): this\r
}\r
\r
interface Catamorphism<T> {\r
  cata<T1>(leftFn: (v: T1) => T, rightFn: (v: T1) => T): T\r
}\r
\r
type SettledPromiseStatus = "fulfilled" | "rejected"\r
\r
interface SettledPromise<T> {\r
  status: SettledPromiseStatus\r
  value: T\r
}\r
\r
type Variadic<T1, T2> = (...args: T1[]) => T2\r
\r
type Pred = (...a: any[]) => boolean\r
\r
interface Dictionary<T> {\r
  [key: string]: T\r
}\r
\r
type DictPred<T> = (value: T, key: string) => boolean\r
type Primitive = string | number | bigint | boolean | undefined | null | symbol\r
\r
/**\r
 * Checks if input value is \`Array\`.\r
 */\r
declare function isArray(val: any): val is any[]\r
\r
/**\r
 * Checks whether the passed value is iterable.\r
 */\r
declare function isIterable<T>(val: any): val is Iterable<T>\r
\r
/**\r
 * Checks if input value is an empty \`Array\`.\r
 */\r
declare function isEmptyArray(val: any): val is any[]\r
\r
/**\r
 * Checks if input value is \`Boolean\`.\r
 */\r
declare function isBoolean(val: any): val is boolean\r
\r
/**\r
 * Checks if value is a primitive data type. There are 6 primitive data types: \`string\`, \`number\`, \`bigint\`, \`boolean\`, \`undefined\`, \`symbol\` and a special case of \`null\`.\r
 * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Primitive_values\r
 * for definition of what sub-types comprise a primitive.\r
 */\r
declare function isPrimitive<T>(val: T | Primitive): val is Primitive\r
\r
/**\r
 * Checks if value is not a primitive data type. There are 6 primitive data types: \`string\`, \`number\`, \`bigint\`, \`boolean\`, \`undefined\`, \`symbol\` and a special case of \`null\`.\r
 */\r
declare function isNotPrimitive<T>(val: T | Primitive): val is T\r
\r
/**\r
 * Checks if an object exists in another object's prototype chain.\r
 */\r
declare function isPrototypeOf(type: object, object: object): boolean\r
declare function isPrototypeOf(type: object): (object: object) => boolean\r
\r
/**\r
 * Returns \`true\` if the given value is its type's empty value, \`null\` or \`undefined\`.\r
 */\r
declare function isNilOrEmpty(val: any): boolean\r
\r
/**\r
 * Returns \`true\` if the given value is not its type's empty value, nor \`null\` nor \`undefined\`.\r
 */\r
declare function isNotNilOrEmpty(val: any): boolean\r
\r
/**\r
 * Checks if input value is complement of \`Array\`.\r
 */\r
declare function isNotArray(val: any): boolean\r
\r
/**\r
 * Checks if input value is a non empty \`Array\`.\r
 */\r
declare function isNonEmptyArray(val: any): val is any[]\r
\r
/**\r
 * Checks if input value is complement of \`Boolean\`.\r
 */\r
declare function isNotBoolean(val: any): boolean\r
\r
/**\r
 * Returns true if the given value is not its type's empty value; \`false\` otherwise.\r
 */\r
declare function isNotEmpty(val: any): boolean\r
\r
/**\r
 * Checks if input value is complement of \`null\` or \`undefined\`.\r
 */\r
/* tslint:disable-next-line:no-null-undefined-union null or undefined is the accurate type here */\r
declare function isNotNil<T>(val: T | null | undefined): val is T\r
\r
/**\r
 * Checks if input value is complement of \`null\`.\r
 */\r
declare function isNotNull(val: any): boolean\r
\r
/**\r
 * Checks if input value is complement of \`String\`.\r
 */\r
declare function isNotString(val: any): boolean\r
\r
/**\r
 * Checks if input value is a non empty \`String\`.\r
 */\r
declare function isNonEmptyString(val: any): boolean\r
\r
/**\r
 * Checks if input value is complement \`undefined\`.\r
 */\r
declare function isNotUndefined(val: any): boolean\r
\r
/**\r
 * Checks if input value is \`Symbol\`.\r
 */\r
declare function isSymbol(val: any): val is Symbol\r
\r
/**\r
 * Checks if input value is \`null\`.\r
 */\r
declare function isNull(val: any): val is null\r
\r
/**\r
 * Checks if input value is \`String\`.\r
 */\r
declare function isString(val: any): val is string\r
\r
/**\r
 * Checks if input value is an empty \`String\`.\r
 */\r
declare function isEmptyString(val: any): val is string\r
\r
/**\r
 * Checks if input value is \`undefined\`.\r
 */\r
declare function isUndefined(val: any): val is undefined\r
\r
/**\r
 * Tests whether or not an object is similar to an array.\r
 */\r
declare function isArrayLike(val: any): boolean\r
\r
/**\r
 * Tests whether or not an object is similar to an array.\r
 */\r
declare function isNotArrayLike(val: any): boolean\r
\r
/**\r
 * Checks if input value is \`Generator Function\`.\r
 */\r
declare function isGeneratorFunction(val: any): val is Function\r
\r
/**\r
 * Checks if input value is complement of \`Generator Function\`.\r
 */\r
declare function isNotGeneratorFunction(val: any): boolean\r
\r
/**\r
 * Checks if input value is \`Async Function\`.\r
 */\r
declare function isAsyncFunction(val: any): val is Function\r
\r
/**\r
 * Checks if input value is complement of \`Async Function\`.\r
 */\r
declare function isNotAsyncFunction(val: any): boolean\r
\r
/**\r
 * Checks if input value is \`Function\`.\r
 */\r
declare function isFunction(val: any): val is Function\r
\r
/**\r
 * Checks if input value is complement of \`Function\`.\r
 */\r
declare function isNotFunction(val: any): boolean\r
\r
/**\r
 * Checks if input value is language type of \`Object\`.\r
 */\r
declare function isObj(val: any): val is {} | Function\r
declare function isObject(val: any): val is {} | Function // alias\r
\r
/**\r
 * Checks if input value is complement of language type of \`Object\`.\r
 */\r
declare function isNotObj(val: any): boolean\r
declare function isNotObject(val: any): boolean // alias\r
\r
/**\r
 * Checks if value is object-like. A value is object-like if it's not null and has a typeof result of "object".\r
 */\r
declare function isObjLike(val: any): val is object\r
declare function isObjectLike(val: any): val is object // alias\r
\r
/**\r
 * Checks if value is not object-like.\r
 * A value is object-like if it's not null and has a typeof result of "object".\r
 */\r
declare function isNotObjLike(val: any): boolean\r
declare function isNotObjectLike(val: any): boolean // alias\r
\r
/**\r
 * Check to see if an object is a plain object (created using \`{}\`, \`new Object()\` or \`Object.create(null)\`).\r
 */\r
declare function isPlainObj(val: any): val is object\r
declare function isPlainObject(val: any): val is object // alias\r
\r
/**\r
 * Check to see if an object is not a plain object\r
 * (created using \`{}\`, \`new Object()\` or \`Object.create(null)\`).\r
 */\r
declare function isNotPlainObj(val: any): boolean\r
declare function isNotPlainObject(val: any): boolean // alias\r
\r
/**\r
 * Checks if value is \`Date\` object.\r
 */\r
declare function isDate(val: any): val is Date\r
\r
/**\r
 * Checks if value is complement of \`Date\` object.\r
 */\r
declare function isNotDate(val: any): boolean\r
\r
/**\r
 * Checks if value is valid \`Date\` object.\r
 */\r
declare function isValidDate(val: any): val is Date\r
\r
/**\r
 * Checks if value is complement of valid \`Date\` object.\r
 */\r
declare function isNotValidDate(val: any): boolean\r
\r
/**\r
 * Checks if value is complement of valid \`Date\` object.\r
 */\r
declare function isInvalidDate(val: any): boolean // alias of isNotValidDate\r
\r
/**\r
 * Checks if value is \`Map\`.\r
 */\r
declare function isMap(val: any): val is Map<any, any>\r
\r
/**\r
 * Checks if value is complement of \`Map\` object.\r
 */\r
declare function isNotMap(val: any): boolean\r
\r
/**\r
 * Checks whether the passed value is \`NaN\` and its type is \`Number\`.\r
 * It is a more robust version of the original, global isNaN().\r
 */\r
declare function isNaN(val: any): val is typeof NaN\r
\r
/**\r
 * Checks if value is a natural number.\r
 * Natural numbers correspond to all non-negative integers and 0.\r
 */\r
declare function isNaturalNumber(val: any): boolean\r
\r
/**\r
 * Checks whether the passed value is complement of \`NaN\` and its type is not \`Number\`.\r
 */\r
declare function isNotNaN(val: any): boolean\r
\r
/**\r
 * Checks if value is a \`Number\` primitive or object.\r
 */\r
declare function isNumber(val: any): val is number\r
\r
/**\r
 * Checks if value is a complement of \`Number\` primitive or object.\r
 */\r
declare function isNotNumber(val: any): boolean\r
\r
/**\r
 * Checks if value is a positive \`Number\` primitive or object. Zero is considered neither\r
 * positive or negative.\r
 */\r
declare function isPositive(val: any): val is number\r
\r
/**\r
 * Checks if value is a negative \`Number\` primitive or object. Zero is considered neither\r
 * positive or negative.\r
 */\r
declare function isNegative(val: any): val is number\r
\r
/**\r
 * Checks if value is a positive zero (+0).\r
 */\r
declare function isPositiveZero(val: any): boolean\r
\r
/**\r
 * Checks if value is a negative zero (-0).\r
 */\r
declare function isNegativeZero(val: any): boolean\r
\r
/**\r
 * Checks if value is a non-positive \`Number\` primitive or object. This includes all\r
 * negative numbers and zero.\r
 */\r
declare function isNonPositive(val: any): val is number\r
\r
/**\r
 * Checks if value is a non-negative \`Number\` primitive or object. This includes all\r
 * positive numbers and zero.\r
 */\r
declare function isNonNegative(val: any): val is number\r
\r
/**\r
 * Checks whether the passed value is a finite \`Number\`.\r
 */\r
declare function isFinite(val: any): boolean\r
\r
/**\r
 * Checks whether the passed value is complement of finite \`Number\`.\r
 */\r
declare function isNotFinite(val: any): boolean\r
\r
/**\r
 * Checks whether the passed value is an \`integer\`.\r
 */\r
declare function isInteger(val: any): val is number\r
\r
/**\r
 * Checks whether the passed value is a signed 32 bit \`integer\`.\r
 */\r
declare function isInteger32(val: any): boolean\r
\r
/**\r
 * Checks whether the passed value is an unsigned 32 bit integer number.\r
 */\r
declare function isUinteger32(val: any): boolean\r
declare function isUint32(val: any): boolean // alias\r
\r
/**\r
 * Checks whether the passed value is complement of \`integer\`.\r
 */\r
declare function isNotInteger(val: any): boolean\r
\r
/**\r
 * Checks if value is a BigInt.\r
 */\r
declare function isBigInt(val: any): boolean\r
\r
/**\r
 * Returns \`true\` if the given value is its type's empty value, \`false\`, \`undefined\`\r
 * as well as strings containing only whitespace characters; \`false\` otherwise.\r
 */\r
declare function isBlank(val: any): boolean\r
\r
/**\r
 * Checks whether the passed value is a \`float\`.\r
 */\r
declare function isFloat(val: any): val is number\r
\r
/**\r
 * Checks whether the passed value is a safe \`integer\`.\r
 */\r
declare function isSafeInteger(val: any): boolean\r
\r
/**\r
 * Checks whether the passed value is complement of a \`float\`.\r
 */\r
declare function isNotFloat(val: any): boolean\r
\r
/**\r
 * Checks if value is a valid \`Number\`. A valid \`Number\` is a number that is not \`NaN\`,\r
 * \`Infinity\` or \`-Infinity\`.\r
 */\r
declare function isValidNumber(val: any): boolean\r
\r
/**\r
 * Checks if value is not a valid \`Number\`. A valid \`Number\` is a number that is not \`NaN\`,\r
 * \`Infinity\` or \`-Infinity\`.\r
 */\r
declare function isNotValidNumber(val: any): boolean\r
\r
/**\r
 * Checks if value is odd integer number.\r
 * An odd number is an integer which is not a multiple DIVISIBLE of two.\r
 */\r
declare function isOdd(val: any): boolean\r
\r
/**\r
 * Checks if value is even integer number.\r
 * An even number is an integer which is "evenly divisible" by two.\r
 * Zero is an even number because zero divided by two equals zero,\r
 * which despite not being a natural number, is an integer.\r
 * Even numbers are either positive or negative.\r
 */\r
declare function isEven(val: any): boolean\r
\r
/**\r
 * Checks if \`value\` is an \`Error\`, \`EvalError\`, \`RangeError\`, \`ReferenceError\`, \`SyntaxError\`, \`TypeError\` or \`URIError\` object.\r
 */\r
declare function isError(val: any): val is Error\r
\r
/**\r
 * Checks if input value is a pair.\r
 */\r
declare function isPair(val: any): val is any[]\r
\r
/**\r
 * Checks if input value is complement of a pair.\r
 */\r
declare function isNotPair(val: any): boolean\r
\r
/**\r
 * Checks if value is \`RegExp\` object.\r
 */\r
declare function isRegExp(val: any): boolean\r
\r
/**\r
 * Checks if value is \`Set\`.\r
 */\r
declare function isSet(val: any): val is Set<any>\r
\r
/**\r
 * Checks if value is complement of \`Set\` object.\r
 */\r
declare function isNotSet(val: any): boolean\r
\r
/**\r
 * Checks if value is complement of \`RegExp\` object.\r
 */\r
declare function isNotRegExp(val: any): boolean\r
\r
/**\r
 * Checks if input value is a sparse Array.\r
 * An array with at least one "empty slot" in it is often called a "sparse array."\r
 * Empty slot doesn't mean that the slot contains \`null\` or \`undefined\` values,\r
 * but rather that the slots don't exist.\r
 */\r
declare function isSparseArray(val: any): boolean\r
\r
/**\r
 * Checks whether the passed value is\r
 * {@link https://github.com/getify/You-Dont-Know-JS/blob/9959fc904d584bbf0b02cf41c192f74ff4238581/types-grammar/ch4.md#the-curious-case-of-the-|a sentinel value}.\r
 */\r
declare function isSentinelValue(val: any): boolean\r
\r
/**\r
 * A function that returns \`undefined\`.\r
 */\r
declare function stubUndefined(): undefined\r
\r
/**\r
 * A function that returns \`null\`.\r
 */\r
declare function stubNull(): null\r
\r
/**\r
 * A function that returns new empty array on every call.\r
 */\r
declare function stubArray(): any[]\r
\r
/**\r
 * This function returns a new empty object.\r
 */\r
declare function stubObj(): {}\r
declare function stubObject(): {} // alias\r
\r
/**\r
 * A function that returns empty string.\r
 */\r
declare function stubString(): ""\r
\r
/**\r
 * A function that performs no operations.\r
 */\r
declare function noop(...args: any[]): undefined\r
\r
/**\r
 * Picks values from list by indexes.\r
 */\r
declare function pickIndexes<T>(indexes: number[], list: T[]): T[]\r
declare function pickIndexes(indexes: number[]): <T>(list: T[]) => T[]\r
\r
/**\r
 * Creates a list from arguments.\r
 */\r
declare function list(...items: any[]): any[]\r
\r
/**\r
 * Returns a singleton array containing the value provided.\r
 * If value is already an array, it is returned as is.\r
 */\r
declare function ensureArray<T>(value: T | T[]): T[]\r
\r
/**\r
 * Returns the result of concatenating the given lists or strings.\r
 * Note: RA.concatAll expects all elements to be of the same type.\r
 * It will throw an error if you concat an Array with a non-Array value.\r
 * Dispatches to the concat method of the preceding element, if present.\r
 * Can also concatenate multiple elements of a [fantasy-land compatible semigroup](https://github.com/fantasyland/fantasy-land#semigroup).\r
 * Returns undefined if empty array was passed.\r
 */\r
declare function concatAll<S extends Semigroup>(\r
  foldable: Foldable<S>\r
): S | undefined\r
\r
/**\r
 * Returns the result of concatenating the given lists or strings.\r
 */\r
declare function concatRight<T extends any[]>(firstList: T, secondList: T): T\r
declare function concatRight<T extends any[]>(\r
  firstList: T\r
): (secondList: T) => T\r
declare function concatRight(firstList: string, secondList: string): string\r
declare function concatRight(firstList: string): (secondList: string) => string\r
\r
/**\r
 * Acts as multiple path: arrays of paths in, array of values out. Preserves order.\r
 */\r
declare function paths(ps: Array<Array<string | number>>, obj: object): any[]\r
declare function paths(\r
  ps: Array<Array<string | number>>\r
): (obj: object) => any[]\r
\r
/**\r
 * If the given, non-null object has a value at the given path, returns the value at that path.\r
 * Otherwise returns the result of invoking the provided function with the object.\r
 */\r
declare function pathOrLazy<T>(\r
  defaultValueFn: () => T,\r
  path: Array<number | string>,\r
  obj: object\r
): T\r
declare function pathOrLazy<T>(\r
  defaultValueFn: () => T,\r
  path: Array<number | string>\r
): (obj: object) => T\r
declare function pathOrLazy<T>(defaultValueFn: () => T): {\r
  (path: Array<number | string>, obj: object): T\r
  (path: Array<number | string>): (obj: object) => T\r
}\r
\r
/**\r
 * "lifts" a function to be the specified arity, so that it may "map over" objects that satisfy\r
 * the Apply spec of fantasy land.\r
 */\r
declare function liftFN<T>(arity: number, fn: Variadic<Apply<T>, T>): Apply<T>\r
declare function liftFN(\r
  arity: number\r
): <T>(fn: Variadic<Apply<T>, T>) => Apply<T>\r
\r
/**\r
 * "lifts" a function of arity > 1 so that it may "map over" objects that satisfy\r
 * the Apply spec of fantasy land.\r
 */\r
declare function liftF<T>(fn: Variadic<Apply<T>, T>): Apply<T>\r
\r
/**\r
 * The catamorphism for either. If the either is right than the right function will be executed with\r
 * the right value and the value of the function returned. Otherwise the left function\r
 * will be called with the left value.\r
 */\r
declare function cata<V1, V2, T1, T2>(\r
  leftFn: (leftValue: V1) => T1,\r
  rightFn: (rightValue: V2) => T2,\r
  either: Catamorphism<V1 | V2>\r
): T1 | T2\r
declare function cata<V1, V2, T1, T2>(\r
  leftFn: (leftValue: V1) => T1,\r
  rightFn: (rightValue: V2) => T2\r
): (either: Catamorphism<V1 | V2>) => T1 | T2\r
declare function cata<V1, V2, T1, T2>(\r
  leftFn: (leftValue: V1) => T1\r
): {\r
  (rightFn: (rightValue: V2) => T2, either: Catamorphism<V1 | V2>): T1 | T2\r
  (rightFn: (rightValue: V2) => T2): (either: Catamorphism<V1 | V2>) => T1 | T2\r
}\r
\r
/**\r
 * Creates a new object with the own properties of the provided object, but the\r
 * keys renamed according to the keysMap object as \`{oldKey: newKey}\`.\r
 * When some key is not found in the keysMap, then it's passed as-is.\r
 */\r
type PickRenameMulti<\r
  R extends { [K: string]: string },\r
  T extends { [s in keyof R]: any }\r
> = {\r
  [P in keyof T as P extends keyof R ? R[P] : P]: T[P]\r
}\r
declare function renameKeys<\r
  MAP extends Dictionary<string>,\r
  OBJ extends { readonly [s in keyof MAP]: any }\r
>(keysMap: MAP, obj: OBJ): PickRenameMulti<MAP, OBJ>\r
declare function renameKeys<MAP extends Dictionary<string>>(\r
  keysMap: MAP\r
): <OBJ extends { readonly [s in keyof MAP]: any }>(\r
  obj: OBJ\r
) => PickRenameMulti<MAP, OBJ>\r
\r
type Keyable = string | number | symbol\r
type RenameObjectKey<\r
  OKey extends keyof OBJ, // eslint-disable-line no-use-before-define\r
  OBJ extends { readonly [s in OKey]: any },\r
  NKey extends Keyable\r
> = Omit<OBJ, OKey> & Record<NKey, OBJ[OKey]>\r
/**\r
 * Creates a new object with the own properties of the provided object, but a\r
 * single key is renamed from \`oldKey\` to \`newKey\`.\r
 */\r
declare function renameKey<OKey extends Keyable>(\r
  oldKey: OKey\r
): <NKey extends Keyable>(\r
  newKey: NKey\r
) => <OBJ extends { readonly [s in OKey]: any }>(\r
  obj: OBJ\r
) => RenameObjectKey<OKey, OBJ, NKey>\r
declare function renameKey<OKey extends Keyable, NKey extends Keyable>(\r
  oldKey: OKey,\r
  newKey: NKey\r
): <OBJ extends { readonly [s in OKey]: any }>(\r
  obj: OBJ\r
) => RenameObjectKey<OKey, OBJ, NKey>\r
declare function renameKey<\r
  OKey extends keyof OBJ, // eslint-disable-line no-use-before-define\r
  OBJ extends { readonly [s in OKey]: any },\r
  NKey extends Keyable\r
>(oldKey: OKey, newKey: NKey, obj: OBJ): RenameObjectKey<OKey, OBJ, NKey>\r
\r
/**\r
 * Creates a new object with the own properties of the provided object, and the\r
 * keys copied according to the keysMap object as \`{oldKey: newKey}\`.\r
 * When no key from the keysMap is found, then a shallow clone of an object is returned.\r
 */\r
declare function copyKeys(keysMap: Dictionary<string>, obj: object): object\r
declare function copyKeys(keysMap: Dictionary<string>): (obj: object) => object\r
\r
/**\r
 * Creates a new object with the own properties of the provided object, but the\r
 * keys renamed according to logic of renaming function.\r
 */\r
declare function renameKeysWith(\r
  renameFn: (key: string) => string,\r
  obj: object\r
): object\r
declare function renameKeysWith(\r
  renameFn: (key: string) => string\r
): (obj: object) => object\r
\r
/**\r
 * Creates a new object with the own properties of the provided object, but the\r
 * key \`key\` renamed according to logic of renaming function.\r
 */\r
declare function renameKeyWith(\r
  renameFn: (key: string) => string,\r
  key: string,\r
  obj: object\r
): object\r
declare function renameKeyWith(\r
  renameFn: (key: string) => string,\r
  key: string\r
): (obj: object) => object\r
declare function renameKeyWith(renameFn: (key: string) => string): {\r
  (key: string, obj: object): object\r
  (key: string): (obj: object) => object\r
}\r
\r
/**\r
 * Functional equivalent of merging object properties with object spread.\r
 */\r
declare function mergeProps(ps: string[], obj: object): object\r
declare function mergeProps(ps: string[]): (obj: object) => object\r
\r
/**\r
 * Merge objects under corresponding paths.\r
 */\r
declare function mergePaths(\r
  paths: Array<Array<string | number>>,\r
  obj: object\r
): object\r
declare function mergePaths(\r
  paths: Array<Array<string | number>>\r
): (obj: object) => object\r
\r
/**\r
 * Create a new object with the own properties of the object under the \`p\`\r
 * merged with the own properties of the provided \`source\`.\r
 * If a key exists in both objects, the value from the \`source\` object will be used.\r
 */\r
declare function mergeProp(p: string, source: object, obj: object): object\r
declare function mergeProp(p: string, source: object): (obj: object) => object\r
declare function mergeProp(p: string): {\r
  (source: object, obj: object): object\r
  (source: object): (obj: object) => object\r
}\r
\r
/**\r
 * Create a new object with the own properties of the object under the \`path\`\r
 * merged with the own properties of the provided \`source\`.\r
 * If a key exists in both objects, the value from the \`source\` object will be used.\r
 */\r
declare function mergePath(\r
  path: Array<string | number>,\r
  source: object,\r
  obj: object\r
): object\r
declare function mergePath(\r
  path: Array<string | number>,\r
  source: object\r
): (obj: object) => object\r
declare function mergePath(path: Array<string | number>): {\r
  (source: object, obj: object): object\r
  (source: object): (obj: object) => object\r
}\r
\r
/**\r
 * Returns a partial copy of an object containing only the keys\r
 * that don't satisfy the supplied predicate.\r
 */\r
declare function omitBy<T, U extends Dictionary<T>>(\r
  pred: DictPred<T>,\r
  obj: U\r
): U\r
declare function omitBy<T, U extends Dictionary<T>>(\r
  pred: DictPred<T>\r
): (obj: U) => U\r
\r
/**\r
 * Weave a configuration into function returning the runnable monad like \`Reader\` or \`Free\`.\r
 */\r
declare function weave(fn: Function, config: any): Function\r
declare function weave(fn: Function): (config: any) => Function\r
\r
/**\r
 * Weave a configuration into function returning the runnable monad like \`Reader\` or \`Free\`.\r
 */\r
declare function weaveLazy(fn: Function, configAccessor: Function): Function\r
declare function weaveLazy(fn: Function): (configAccessor: Function) => Function\r
\r
/**\r
 * Returns a curried equivalent of the provided function, with the specified arity.\r
 * This function is like curryN, except that the provided arguments order is reversed.\r
 */\r
declare function curryRightN(arity: number, fn: Function): Function\r
declare function curryRightN(arity: number): (fn: Function) => Function\r
\r
/**\r
 * Returns a curried equivalent of the provided function.\r
 * This function is like curry, except that the provided arguments order is reversed.\r
 */\r
declare function curryRight(fn: Function): Function\r
\r
/**\r
 * {@link http://ramdajs.com/docs/#map|R.map} function that more closely resembles Array.prototype.map.\r
 * It takes two new parameters to its callback function: the current index, and the entire list.\r
 */\r
declare function mapIndexed<T, U>(\r
  iterator: (elem: T, key: number, list: T[]) => U,\r
  list: ReadonlyArray<T>\r
): U[]\r
declare function mapIndexed<T, U>(\r
  iterator: (elem: T, key: number, list: T[]) => U\r
): (list: ReadonlyArray<T>) => U[]\r
declare function mapIndexed<T, U>(\r
  iterator: (elem: T, key: number, list: Dictionary<T>) => U,\r
  list: Dictionary<T>\r
): Dictionary<U>\r
declare function mapIndexed<T, U>(\r
  iterator: (elem: T, key: number, list: Dictionary<T>) => U\r
): (list: Dictionary<T>) => Dictionary<U>\r
declare function mapIndexed<T, U>(\r
  iterator: (elem: T, key: number, list: Functor<T>) => U,\r
  list: Functor<T>\r
): Functor<U>\r
declare function mapIndexed<T, U>(\r
  iterator: (elem: T, key: number, list: Functor<T>) => U\r
): (list: Functor<T>) => Functor<U>\r
declare function mapIndexed(\r
  iterator: (char: string, key: number, str: string) => string,\r
  str: string\r
): string[]\r
declare function mapIndexed(\r
  iterator: (char: string, key: number, str: string) => string\r
): (str: string) => string[]\r
\r
/**\r
 * {@link http://ramdajs.com/docs/#reduce|R.reduce} function that more closely resembles Array.prototype.reduce.\r
 * It takes two new parameters to its callback function: the current index, and the entire list.\r
 */\r
declare function reduceIndexed<T, TResult, R extends T[]>(\r
  iterator: (acc: TResult, elem: T, key: number, list: R) => TResult,\r
  acc: TResult,\r
  list: R\r
): TResult\r
declare function reduceIndexed<T, TResult, R extends T[]>(\r
  iterator: (acc: TResult, elem: T, key: number, list: R) => TResult,\r
  acc: TResult\r
): (list: R) => TResult\r
declare function reduceIndexed<T, TResult, R extends T[]>(\r
  iterator: (acc: TResult, elem: T, key: number, list: R) => TResult\r
): {\r
  (acc: TResult): (list: R) => TResult\r
  (acc: TResult, list: R): TResult\r
}\r
\r
/**\r
 * {@link http://ramdajs.com/docs/#filter|R.filter} function that more closely resembles \`Array.prototype.filter\`.\r
 * It takes two new parameters to its callback function: the current index, and the entire list.\r
 *\r
 * \`filterIndexed\` implementation is simple: \`\r
 *  const filterIndexed = R.addIndex(R.filter);\r
 * \`\r
 */\r
declare function filterIndexed<T>(\r
  iterator: (elem: T, idx: number, list: T[]) => Boolean,\r
  list: ReadonlyArray<T>\r
): T[]\r
declare function filterIndexed<T>(\r
  iterator: (elem: T, idx: number, list: T[]) => Boolean\r
): (list: ReadonlyArray<T>) => T[]\r
declare function filterIndexed<T>(\r
  iterator: (elem: T, idx: number, list: Dictionary<T>) => Boolean,\r
  list: Dictionary<T>\r
): Dictionary<T>\r
declare function filterIndexed<T>(\r
  iterator: (elem: T, idx: number, list: Dictionary<T>) => Boolean\r
): (list: Dictionary<T>) => Dictionary<T>\r
declare function filterIndexed<T>(\r
  iterator: (elem: T, idx: number, list: Filterable<T>) => Boolean,\r
  list: Filterable<T>\r
): Filterable<T>\r
declare function filterIndexed<T>(\r
  iterator: (elem: T, idx: number, list: Filterable<T>) => Boolean\r
): (list: Filterable<T>) => Filterable<Boolean>\r
declare function filterIndexed(\r
  iterator: (char: string, idx: number, str: string) => Boolean,\r
  str: string\r
): string[]\r
declare function filterIndexed(\r
  iterator: (char: string, idx: number, str: string) => Boolean\r
): (str: string) => string[]\r
\r
/**\r
 * Given an \`Iterable\`(arrays are \`Iterable\`), or a promise of an \`Iterable\`,\r
 * which produces promises (or a mix of promises and values),\r
 * iterate over all the values in the \`Iterable\` into an array and\r
 * reduce the array to a value using the given iterator function.\r
 */\r
declare function reduceP<T, TResult, R extends T[]>(\r
  fn: (acc: TResult, elem: T) => TResult,\r
  acc: TResult,\r
  list: R\r
): TResult\r
declare function reduceP<T, TResult, R extends T[]>(\r
  fn: (acc: TResult, elem: T) => TResult,\r
  acc: TResult\r
): (list: R) => TResult\r
declare function reduceP<T, TResult, R extends T[]>(\r
  fn: (acc: TResult, elem: T) => TResult\r
): {\r
  (acc: TResult, list: R): TResult\r
  (acc: TResult): (list: R) => TResult\r
}\r
\r
/**\r
 * Given an \`Iterable\`(arrays are \`Iterable\`), or a promise of an \`Iterable\`,\r
 * which produces promises (or a mix of promises and values),\r
 * iterate over all the values in the \`Iterable\` into an array and\r
 * reduce the array to a value using the given iterator function.\r
 *\r
 * Similar to {@link RA.reduceP|reduceP} except moves through the input list from the right to the left.\r
 * The iterator function receives two values: (value, acc),\r
 * while the arguments' order of reduceP's iterator function is (acc, value).\r
 */\r
declare function reduceRightP<T, TResult, R extends T[]>(\r
  fn: (elem: T, acc: TResult) => TResult,\r
  acc: TResult,\r
  list: R\r
): TResult\r
declare function reduceRightP<T, TResult, R extends T[]>(\r
  fn: (elem: T, acc: TResult) => TResult,\r
  acc: TResult\r
): (list: R) => TResult\r
declare function reduceRightP<T, TResult, R extends T[]>(\r
  fn: (elem: T, acc: TResult) => TResult\r
): {\r
  (acc: TResult, list: R): TResult\r
  (acc: TResult): (list: R) => TResult\r
}\r
/**\r
 * Returns \`true\` if data structure focused by the given lens equals provided value.\r
 */\r
declare function lensEq(lens: Function, value: any, data: any): boolean\r
declare function lensEq(lens: Function, value: any): (data: any) => boolean\r
declare function lensEq(lens: Function): (value: any) => (data: any) => boolean\r
\r
/**\r
 * Returns \`false\` if data structure focused by the given lens equals provided value.\r
 */\r
declare function lensNotEq(lens: Function, value: any, data: any): boolean\r
declare function lensNotEq(lens: Function, value: any): (data: any) => boolean\r
declare function lensNotEq(\r
  lens: Function\r
): (value: any) => (data: any) => boolean\r
\r
/**\r
 * Returns \`true\` if data structure focused by the given lens satisfies the predicate.\r
 * Note that the predicate is expected to return boolean value and will be evaluated\r
 * as \`false\` unless the predicate returns \`true\`.\r
 */\r
declare function lensSatisfies(\r
  predicate: Function,\r
  lens: Function,\r
  data: any\r
): boolean\r
declare function lensSatisfies(\r
  predicate: Function,\r
  lens: Function\r
): (data: any) => boolean\r
declare function lensSatisfies(\r
  predicate: Function\r
): (lens: Function) => (data: any) => boolean\r
\r
/**\r
 * Returns \`true\` if data structure focused by the given lens doesn't satisfy the predicate.\r
 * Note that the predicate is expected to return boolean value.\r
 */\r
declare function lensNotSatisfy(\r
  predicate: Function,\r
  lens: Function,\r
  data: any\r
): boolean\r
declare function lensNotSatisfy(\r
  predicate: Function,\r
  lens: Function\r
): (data: any) => boolean\r
declare function lensNotSatisfy(\r
  predicate: Function\r
): (lens: Function) => (data: any) => boolean\r
\r
/**\r
 * Returns a "view" of the given data structure, determined by the given lens\r
 * The lens's focus determines which portion of the data structure is visible.\r
 * Returns the defaultValue if "view" is null, undefined or NaN; otherwise the "view" is returned.\r
 */\r
declare function viewOr(defaultValue: any, lens: Function, data: any): any\r
declare function viewOr(defaultValue: any, lens: Function): (data: any) => any\r
declare function viewOr(\r
  defaultValue: any\r
): (lens: Function) => (data: any) => any\r
\r
/**\r
 * Defines an isomorphism that will work like a lens. It takes two functions.\r
 * The function that converts and the function that recovers.\r
 */\r
\r
declare function lensIso(to: Function, from: Function): Function\r
declare function lensIso(to: Function): (from: Function) => Function\r
declare namespace lensIso {\r
  function from(lens: Function): Function\r
}\r
\r
/**\r
 * Creates a [Traversable](https://github.com/fantasyland/fantasy-land#traversable) lens\r
 * from an [Applicative](https://github.com/fantasyland/fantasy-land#applicative)-returning function.\r
 *\r
 * When executed, it maps an [Applicative](https://github.com/fantasyland/fantasy-land#applicative)-returning\r
 * function over a [Traversable](https://github.com/fantasyland/fantasy-land#traversable),\r
 * then uses [\`sequence\`](#sequence) to transform the resulting Traversable of Applicative\r
 * into an Applicative of Traversable.\r
 *\r
 * Dispatches to the \`traverse\` method of the third argument, if present.\r
 */\r
declare function lensTraverse(of: Function): Function\r
\r
/**\r
 * Returns true if the specified object property is not equal,\r
 * in R.equals terms, to the given value; false otherwise.\r
 */\r
declare function propNotEq(\r
  prop: string | number,\r
  value: any,\r
  obj: object\r
): boolean\r
declare function propNotEq(\r
  prop: string | number,\r
  value: any\r
): (obj: object) => boolean\r
declare function propNotEq(prop: string | number): {\r
  (value: any, obj: object): boolean\r
  (value: any): (obj: object) => boolean\r
}\r
\r
/**\r
 * Determines whether a nested path on an object doesn't have a specific value,\r
 * in R.equals terms. Most likely used to filter a list.\r
 */\r
declare function pathNotEq(\r
  path: Array<string | number>,\r
  value: any,\r
  obj: object\r
): boolean\r
declare function pathNotEq(\r
  path: Array<string | number>,\r
  value: any\r
): (obj: object) => boolean\r
declare function pathNotEq(path: Array<string | number>): {\r
  (value: any, obj: object): boolean\r
  (value: any): (obj: object) => boolean\r
}\r
\r
/**\r
 * Checks if \`value\` is between \`low\` and up to but not including \`high\`.\r
 */\r
declare function inRange(low: number, high: number, value: number): boolean\r
declare function inRange(low: number, high: number): (value: number) => boolean\r
declare function inRange(low: number): {\r
  (high: number, value: number): boolean\r
  (high: number): (value: number) => boolean\r
}\r
\r
/**\r
 * Spreads object under property path onto provided object.\r
 */\r
declare function spreadPath(path: Array<string | number>, obj: object): object\r
declare function spreadPath(\r
  path: Array<string | number>\r
): (obj: object) => object\r
\r
/**\r
 * Spreads object under property onto provided object.\r
 */\r
declare function spreadProp(prop: string | number, obj: object): object\r
declare function spreadProp(prop: string | number): (obj: object) => object\r
\r
/**\r
 * Flattens a property path so that its fields are spread out into the provided object.\r
 */\r
declare function flattenPath(path: Array<string | number>, obj: object): object\r
declare function flattenPath(\r
  path: Array<string | number>\r
): (obj: object) => object\r
\r
/**\r
 * Flattens a property so that its fields are spread out into the provided object.\r
 */\r
declare function flattenProp(prop: string | number, obj: object): object\r
declare function flattenProp(prop: string | number): (obj: object) => object\r
\r
/**\r
 * Creates a new object out of a list of keys and a list of values by applying the function\r
 * to each equally-positioned pair in the lists.\r
 * Key/value pairing is truncated to the length of the shorter of the two lists.\r
 */\r
declare function zipObjWith<T, U, V>(\r
  fn: (value: T, key: U) => [string, V],\r
  keys: U[],\r
  values: T[]\r
): { [k: string]: V }\r
declare function zipObjWith<T, U, V>(\r
  fn: (value: T, key: U) => [string, V]\r
): (keys: U[], values: T[]) => { [k: string]: V }\r
declare function zipObjWith<T, U, V>(\r
  fn: (value: T, key: U) => [string, V]\r
): {\r
  (keys: U[], values: T[]): { [k: string]: V }\r
  (keys: U[]): (values: T[]) => { [k: string]: V }\r
}\r
\r
/**\r
 * Creates a new list out of the supplied object by applying the function to each key/value pairing.\r
 */\r
declare function unzipObjWith<T, U, V>(\r
  fn: (v: T, k: string) => [U, V],\r
  obj: { [k: string]: T }\r
): [U[], V[]]\r
declare function unzipObjWith<T, U, V>(\r
  fn: (v: T, k: string) => [U, V]\r
): (obj: { [k: string]: T }) => [U[], V[]]\r
\r
/**\r
 * Composable shortcut for \`Promise.all\`.\r
 *\r
 * The \`allP\` method returns a single Promise that resolves when all of the promises\r
 * in the iterable argument have resolved or when the iterable argument contains no promises.\r
 * It rejects with the reason of the first promise that rejects.\r
 */\r
declare function allP<T>(iterable: Iterable<T>): Promise<T[]>\r
\r
/**\r
 * Returns a Promise that is resolved with an array of reasons when all of the provided Promises reject, or rejected when any Promise is resolved.\r
 * This pattern is like allP, but fulfillments and rejections are transposed - rejections become the fulfillment values and vice versa.\r
 */\r
declare function noneP<T>(iterable: Iterable<T | Promise<T>>): Promise<T[]>\r
\r
/**\r
 * allSettledP returns a promise that is fulfilled with an array of promise state snapshots,\r
 * but only after all the original promises have settled, i.e. become either fulfilled or rejected.\r
 * We say that a promise is settled if it is not pending, i.e. if it is either fulfilled or rejected.\r
 */\r
declare function allSettledP<T>(\r
  iterable: Iterable<T>\r
): Promise<Array<SettledPromise<T>>>\r
\r
/**\r
 * Returns a promise that is fulfilled by the first given promise to be fulfilled,\r
 * or rejected with an array of rejection reasons if all of the given promises are rejected.\r
 */\r
declare function anyP<T>(iterable: Iterable<T>): Promise<T>\r
declare function firstP<T>(iterable: Iterable<T>): Promise<T> // alias\r
\r
/**\r
 * Returns a promise that is fulfilled by the last given promise to be fulfilled,\r
 * or rejected with an array of rejection reasons if all of the given promises are rejected.\r
 */\r
declare function lastP<T>(iterable: Iterable<T>): Promise<T>\r
\r
/**\r
 * Composable shortcut for \`Promise.resolve\`.\r
 *\r
 * Returns a Promise object that is resolved with the given value.\r
 * If the value is a thenable (i.e. has a "then" method), the returned promise will\r
 * "follow" that thenable, adopting its eventual state.\r
 */\r
declare function resolveP<T>(value?: T): Promise<T>\r
\r
/**\r
 * Composable shortcut for \`Promise.reject\`.\r
 *\r
 * Returns a Promise object that is rejected with the given reason.\r
 */\r
declare function rejectP<T>(value?: T): Promise<T>\r
\r
/**\r
 * Creates a promise which resolves/rejects after the specified milliseconds.\r
 */\r
declare function delayP(milliseconds: number): Promise<undefined>\r
declare function delayP<T>(options: { timeout: number; value: T }): Promise<T>\r
declare namespace delayP {\r
  function reject(milliseconds: number): Promise<undefined>\r
  function reject<T>(options: { timeout: number; value: T }): Promise<T>\r
}\r
\r
/**\r
 * Composable shortcut for \`Promise.catch\`.\r
 * The catchP function returns a Promise. It takes two arguments: a callback function for the rejections of the Promise\r
 * and the promise instance itself.\r
 */\r
declare function catchP<A, B = unknown>(\r
  onRejected: (error: any) => B | Promise<B>,\r
  promise: Promise<A>\r
): Promise<A | B>\r
declare function catchP<A, B = unknown>(\r
  onRejected: (error: any) => B | Promise<B>\r
): (promise: Promise<A>) => Promise<A | B>\r
\r
/**\r
 * Composable shortcut for \`Promise.then\` that allows for success and failure call backs.\r
 * The thenCatchP function returns a Promise. It takes three arguments: a callback function for the success of the Promise,\r
 * a callback function for the failure of the Promise, and the promise instance itself.\r
 */\r
declare function thenCatchP<A, B>(\r
  onFulfilled: Function,\r
  onRejected: (error: any) => B | Promise<B>,\r
  thenable: Promise<A>\r
): Promise<A | B>\r
declare function thenCatchP<A, B>(\r
  onFulfilled: Function,\r
  onRejected: (error: any) => B | Promise<B>\r
): (thenable: Promise<A>) => Promise<A | B>\r
declare function thenCatchP<A, B>(\r
  onFulfilled: Function\r
): (\r
  onRejected: (error: any) => B | Promise<B>\r
) => (thenable: Promise<A>) => Promise<A | B>\r
\r
/**\r
 * Runs the given list of functions in order with the supplied object, then returns the object.\r
 * Also known as the normal order sequencing combinator.\r
 *\r
 * Acts as a transducer if a transformer is given as second parameter.\r
 */\r
declare function seq<T>(fns: Function[], x: T): T\r
declare function seq<T>(fns: Function[]): (x: T) => T\r
declare function sequencing<T>(fns: Function[], x: T): T // alias\r
declare function sequencing<T>(fns: Function[]): (x: T) => T // alias\r
\r
/**\r
 * Returns the elements of the given list or string (or object with a slice method)\r
 * from fromIndex (inclusive).\r
 * Dispatches to the slice method of the third argument, if present.\r
 */\r
declare function sliceFrom<T>(\r
  fromIndex: number,\r
  list: string | T[]\r
): string | T[]\r
declare function sliceFrom(\r
  fromIndex: number\r
): <T>(list: string | T[]) => string | T[]\r
\r
/**\r
 * Returns the elements of the given list or string (or object with a slice method)\r
 * to toIndex (exclusive).\r
 * Dispatches to the slice method of the second argument, if present.\r
 */\r
declare function sliceTo<T>(toIndex: number, list: string | T[]): string | T[]\r
declare function sliceTo(\r
  toIndex: number\r
): <T>(list: string | T[]) => string | T[]\r
\r
/**\r
 * Returns a partial copy of an array omitting the indexes specified.\r
 */\r
declare function omitIndexes<T>(indexes: number[], list: T[]): T[]\r
declare function omitIndexes(indexes: number[]): <T>(list: T[]) => T[]\r
\r
/**\r
 * Returns \`true\` if the supplied list or string has a length greater than \`valueLength\`.\r
 */\r
declare function lengthGt<T>(valueLength: number, list: string | T[]): boolean\r
declare function lengthGt(\r
  valueLength: number\r
): <T>(list: string | T[]) => boolean\r
\r
/**\r
 * Returns \`true\` if the supplied list or string has a length less than \`valueLength\`.\r
 */\r
declare function lengthLt<T>(valueLength: number, list: string | T[]): boolean\r
declare function lengthLt(\r
  valueLength: number\r
): <T>(list: string | T[]) => boolean\r
\r
/**\r
 * Returns \`true\` if the supplied list or string has a length less than or equal to\r
 * \`valueLength\`.\r
 */\r
declare function lengthLte<T>(valueLength: number, list: string | T[]): boolean\r
declare function lengthLte(\r
  valueLength: number\r
): <T>(list: string | T[]) => boolean\r
\r
/**\r
 * Returns \`true\` if the supplied list or string has a length greater than or equal to\r
 * \`valueLength\`.\r
 */\r
declare function lengthGte<T>(valueLength: number, list: string | T[]): boolean\r
declare function lengthGte(\r
  valueLength: number\r
): <T>(list: string | T[]) => boolean\r
\r
/**\r
 * Returns \`true\` if the supplied list or string has a length equal to \`valueLength\`.\r
 */\r
declare function lengthEq<T>(valueLength: number, list: string | T[]): boolean\r
declare function lengthEq(\r
  valueLength: number\r
): <T>(list: string | T[]) => boolean\r
\r
/**\r
 * Returns \`true\` if the supplied list or string has a length not equal to \`valueLength\`.\r
 */\r
declare function lengthNotEq<T>(\r
  valueLength: number,\r
  list: string | T[]\r
): boolean\r
declare function lengthNotEq(\r
  valueLength: number\r
): <T>(list: string | T[]) => boolean\r
\r
/**\r
 *  Returns true if all items in the list are equivalent using \`R.equals\` for equality comparisons.\r
 */\r
declare function allEqual<T>(list: T[]): boolean\r
\r
/**\r
 * Returns \`true\` if its arguments are not equivalent, \`false\` otherwise. Handles\r
 * cyclical data structures.\r
 *\r
 * Dispatches symmetrically to the \`equals\` methods of both arguments, if\r
 * present.\r
 */\r
declare function notEqual(a: any, b: any): boolean\r
declare function notEqual(a: any): (b: any) => boolean\r
\r
/**\r
 * Constructs and returns a new string which contains the specified\r
 * number of copies of the string on which it was called, concatenated together.\r
 */\r
declare function repeatStr(value: string, count: number): string\r
declare function repeatStr(value: string): (count: number) => string\r
\r
/*\r
 * Returns true if all items in the list are equivalent using \`R.identical\` for equality comparisons.\r
 */\r
declare function allIdentical<T>(list: T[]): boolean\r
\r
/*\r
 * Returns true if all items in the list are equivalent to user provided value using \`R.identical\` for equality comparisons.\r
 */\r
declare function allIdenticalTo<T>(val: T, list: T[]): boolean\r
declare function allIdenticalTo<T>(val: T): (list: T[]) => boolean\r
\r
/*\r
 * Returns true if all items in the list are equivalent to user provided value using \`R.equals\` for equality comparisons.\r
 */\r
declare function allEqualTo<T>(val: T, list: T[]): boolean\r
declare function allEqualTo<T>(val: T): <T>(list: T[]) => boolean\r
\r
/*\r
 * Flattens the list to the specified depth.\r
 */\r
declare function flattenDepth<T>(depth: number, list: T[]): T[]\r
declare function flattenDepth(depth: number): (list: any[]) => any[]\r
\r
/**\r
 * Checks if input value is a \`thenable\`.\r
 * \`thenable\` is an object or function that defines a \`then\` method.\r
 */\r
declare function isThenable(val: any): boolean\r
\r
/**\r
 * Checks if input value is a native \`Promise\`.\r
 * The Promise object represents the eventual completion (or failure)\r
 * of an asynchronous operation, and its resulting value.\r
 */\r
declare function isPromise(val: any): val is Promise<any>\r
\r
/**\r
 * Checks if input value is the Boolean primitive \`true\`. Will return false for Boolean\r
 * objects created using the \`Boolean\` function as a constructor.\r
 */\r
declare function isTrue(val: any): boolean\r
\r
/**\r
 * Checks if input value is the Boolean primitive \`false\`. Will return false for Boolean objects created using the \`Boolean\` function as a constructor.\r
 */\r
declare function isFalse(val: any): boolean\r
\r
/**\r
 * In JavaScript, a \`truthy\` value is a value that is considered true\r
 * when evaluated in a Boolean context. All values are truthy unless\r
 * they are defined as falsy (i.e., except for \`false\`, \`0\`, \`""\`, \`null\`, \`undefined\`, and \`NaN\`).\r
 */\r
declare function isTruthy(val: any): boolean\r
\r
/**\r
 * A falsy value is a value that translates to false when evaluated in a Boolean context.\r
 * Falsy values are \`false\`, \`0\`, \`""\`, \`null\`, \`undefined\`, and \`NaN\`.\r
 */\r
declare function isFalsy(val: any): boolean\r
\r
/**\r
 * Returns the second argument if predicate function returns \`true\`,\r
 * otherwise the third argument is returned.\r
 */\r
declare function defaultWhen<DefVal, Val>(\r
  predicate: Function,\r
  defaultVal: DefVal,\r
  val: Val\r
): DefVal | Val\r
declare function defaultWhen<DefVal, Val>(\r
  predicate: Function,\r
  defaultVal: DefVal\r
): (val: Val) => DefVal | Val\r
declare function defaultWhen(\r
  predicate: Function\r
): <DefVal, Val>(defaultVal: DefVal) => (val: Val) => DefVal | Val\r
\r
/**\r
 * Returns the first element of the list which matches the predicate.\r
 * Returns default value if no element matches or matched element is \`null\`, \`undefined\` or \`NaN\`.\r
 * Dispatches to the find method of the second argument, if present.\r
 * Acts as a transducer if a transformer is given in list position.\r
 */\r
declare function findOr<DefVal, T>(\r
  defaultVal: DefVal,\r
  predicate: (element: T) => boolean,\r
  list: ReadonlyArray<T>\r
): T | DefVal\r
declare function findOr<DefVal, T>(\r
  defaultVal: DefVal,\r
  predicate: (element: T) => boolean\r
): (list: ReadonlyArray<T>) => T | DefVal\r
declare function findOr<DefVal, T>(\r
  defaultVal: DefVal\r
): {\r
  (predicate: (element: T) => boolean, list: ReadonlyArray<T>): T | DefVal\r
  (predicate: (element: T) => boolean): (list: ReadonlyArray<T>) => T | DefVal\r
}\r
\r
/**\r
 * Y-combinator\r
 *\r
 * The Y combinator is an interesting function which only works with functional languages,\r
 * showing how recursion can still be done even without any variable or function declarations,\r
 * only functions and parameters\r
 */\r
declare function Y(le: Function): Function\r
\r
/**\r
 * A function which calls the two provided functions and returns the complement of \`&&\`ing\r
 * the results. It returns true if the first function is false-y and the complement of the\r
 * second function otherwise. Note that this is short-circuited, meaning that the second\r
 * function will not be invoked if the first returns a false-y value. In short it will\r
 * return true unless both predicates return true.\r
 *\r
 * In addition to functions, \`RA.notBoth\` also accepts any fantasy-land compatible\r
 * applicative functor.\r
 */\r
declare function notBoth(\r
  firstPredicate: Function,\r
  secondPredicate: Function\r
): Function\r
\r
/**\r
 * A function which calls the two provided functions and returns the complement of \`||\`ing\r
 * the results. It returns false if the first function is truth-y and the complement of the\r
 * second function otherwise. Note that this is short-circuited, meaning that the second\r
 * function will not be invoked if the first returns a truth-y value. In short it will\r
 * return true if neither predicate returns true.\r
 *\r
 * In addition to functions, \`RA.neither\` also accepts any fantasy-land compatible\r
 * applicative functor.\r
 */\r
declare function neither(\r
  firstPredicate: Function,\r
  secondPredicate: Function\r
): Function\r
\r
/**\r
 * Returns false if both arguments are truesy; true otherwise.\r
 */\r
declare function nand(a: any, b: any): Boolean\r
declare function nand(a: any): (b: any) => Boolean\r
\r
/**\r
 * Returns true if both arguments are falsy; false otherwise.\r
 */\r
declare function nor(a: any, b: any): Boolean\r
declare function nor(a: any): (b: any) => Boolean\r
\r
/**\r
 * Takes a list of predicates and returns a predicate that returns true for a given list of\r
 * arguments if one or more of the provided predicates is not satisfied by those arguments.\r
 * It is the complement of Ramda's allPass.\r
 *\r
 * The function returned is a curried function whose arity matches that of the\r
 * highest-arity predicate.\r
 */\r
declare function notAllPass(predicates: Function[]): Function\r
\r
/**\r
 * Takes a list of predicates and returns a predicate that returns true for a given list of\r
 * arguments if none of the provided predicates are satisfied by those arguments. It is the\r
 * complement of Ramda's anyPass.\r
 *\r
 * The function returned is a curried function whose arity matches that of the\r
 * highest-arity predicate.\r
 */\r
declare function nonePass(predicates: Function[]): Function\r
\r
/**\r
 * Takes a combining predicate and a list of functions and returns a function which will map\r
 * the arguments it receives to the list of functions and returns the result of passing the\r
 * values returned from each function to the combining predicate. A combining predicate is a\r
 * function that combines a list of Boolean values into a single Boolean value, such as\r
 * \`R.any\` or \`R.all\`. It will test each value using \`RA.isTruthy\`, meaning the functions\r
 * don't necessarily have to be predicates.\r
 *\r
 * The function returned is curried to the number of functions supplied, and if called with\r
 * more arguments than functions, any remaining arguments are passed in to the combining\r
 * predicate untouched.\r
 */\r
declare function argsPass<T>(\r
  combiningPredicate: (fn: (a: T) => boolean) => (list: T[]) => boolean,\r
  predicates: Pred[]\r
): Pred\r
declare function argsPass<T>(\r
  combiningPredicate: (fn: (a: T) => boolean) => (list: T[]) => boolean\r
): (predicates: Pred[]) => Pred\r
\r
/**\r
 * Returns a function which is called with the given arguments. If any of the given arguments are null or undefined,\r
 * the corresponding default value for that argument is used instead.\r
 */\r
declare function fnull(fn: Function, defaults: any[]): Function\r
declare function fnull(fn: Function): (defaults: any[]) => Function\r
\r
/**\r
 * Accepts a function with any arity and returns a function with arity of zero.\r
 * The returned function ignores any arguments supplied to it.\r
 */\r
declare function dropArgs(fn: Function): Function\r
\r
/**\r
 * Creates an array with all falsy values removed.\r
 * The values false, null, 0, "", undefined, and NaN are falsy.\r
 */\r
declare function compact<T>(\r
  list: T[]\r
): Array<Exclude<NonNullable<T>, false | "" | 0>>\r
\r
/**\r
 * Returns a new list containing the contents of the given list, followed by the given\r
 * element. Like {@link http://ramdajs.com/docs/#append|R.append} but with argument order\r
 * reversed.\r
 */\r
declare function appendFlipped<T>(list: T[], val: any): T[]\r
declare function appendFlipped<T>(list: T[]): (val: any) => T[]\r
\r
/**\r
 * Returns true if the specified value is equal, in R.equals terms,\r
 * to at least one element of the given list or false otherwise.\r
 * Given list can be a string.\r
 *\r
 * Like {@link http://ramdajs.com/docs/#contains|R.includes} but with argument order reversed.\r
 */\r
declare function included<T>(list: T[], val: T): boolean\r
declare function included<T>(list: T[]): (val: T) => boolean\r
\r
/**\r
 * Can be used as a way to compose multiple invokers together to form polymorphic functions,\r
 * or functions that exhibit different behaviors based on their argument(s).\r
 * Consumes dispatching functions and keep trying to invoke each in turn, until a non-nil value is returned.\r
 *\r
 * Accepts a list of dispatching functions and returns a new function.\r
 * When invoked, this new function is applied to some arguments,\r
 * each dispatching function is applied to those same arguments until one of the\r
 * dispatching functions returns a non-nil value.\r
 */\r
declare function dispatch(functions: Function[]): Function\r
\r
/**\r
 * Returns a new list with the item at the position \`fromIdx\` moved to the position \`toIdx\`.\r
 * If the \`toIdx\` is out of the \`list\` range, the item will be placed at the last position\r
 * of the \`list\`. When negative indices are provided, the behavior of the move is\r
 * unspecified.\r
 */\r
declare function move<T>(fromIdx: number, toIdx: number, list: T[]): T[]\r
declare function move<T>(fromIdx: number): (toIdx: number, list: T[]) => T[]\r
declare function move<T>(fromIdx: number): {\r
  (toIdx: number, list: T[]): T[]\r
  (toIdx: number): (list: T[]) => T[]\r
}\r
\r
/**\r
 * Returns the value of a number rounded to the nearest integer.\r
 */\r
declare function round(val: number): number\r
\r
/**\r
 * Subtracts its first argument from its second argument.\r
 */\r
declare function subtractNum(subtrahend: number, minuend: number): number\r
declare function subtractNum(subtrahend: number): (minuend: number) => number\r
\r
/**\r
 * Returns the smallest integer greater than or equal to a given number.\r
 *\r
 * Note: ceil(null) returns integer 0 and does not give a NaN error.\r
 */\r
declare function ceil(val: number): number\r
\r
/**\r
 * Returns the largest integer less than or equal to a given number.\r
 *\r
 * Note: floor(null) returns integer 0 and do not give a NaN error.\r
 */\r
declare function floor(val: number): number\r
\r
/**\r
 * Returns the integer part of a number by removing any fractional digits.\r
 *\r
 */\r
declare function trunc(val: number): number\r
\r
/**\r
 * Returns the sign of a number, indicating whether the number is positive, negative or zero.\r
 */\r
declare function sign(val: number): number\r
\r
/**\r
 * Takes a generator function and returns an async function.\r
 * The async function returned is a curried function whose arity matches that of the generator function.\r
 *\r
 * Note: This function is handy for environments that does support generators but doesn't support async/await.\r
 */\r
declare function async(generatorFn: Function): Function\r
\r
/**\r
 * Replace all substring matches in a string with a replacement.\r
 */\r
declare function replaceAll(\r
  searchValue: string | RegExp,\r
  replaceValue: string,\r
  str: string\r
): string\r
declare function replaceAll(\r
  searchValue: string | RegExp\r
): (replaceValue: string, str: string) => string\r
declare function replaceAll(searchValue: string | RegExp): {\r
  (replaceValue: string, str: string): string\r
  (replaceValue: string): (str: string) => string\r
}\r
\r
/**\r
 * Escapes the RegExp special characters.\r
 */\r
declare function escapeRegExp(val: string): string\r
\r
/**\r
 * Divides two numbers, where the second number is divided by the first number.\r
 */\r
declare function divideNum(divisor: number, dividend: number): number\r
declare function divideNum(divisor: number): (dividend: number) => number\r
\r
/**\r
 * Identity type.\r
 */\r
declare const Identity: Function\r
\r
/**\r
 * Converts value to an array.\r
 */\r
declare function toArray<T>(iterable: Iterable<T> | T): any[]\r
\r
/**\r
 * Returns true if all items in the list are unique. \`R.equals\` is used to determine equality.\r
 */\r
declare function allUnique<T>(list: T[]): boolean\r
\r
/**\r
 * Returns true if at least one item of the list is repeated. \`R.equals\` is used to determine equality.\r
 */\r
declare function notAllUnique<T>(list: T[]): boolean\r
\r
/**\r
 * Removes whitespace from the beginning of a string\r
 */\r
declare function trimStart(value: string): string\r
declare function trimLeft(value: string): string\r
\r
/**\r
 * Removes whitespace from the end of a string.\r
 */\r
declare function trimEnd(value: string): string\r
declare function trimRight(value: string): string\r
\r
/**\r
 * Removes specified characters from the end of a string.\r
 */\r
declare function trimCharsEnd(chars: string, value: string): string\r
declare function trimCharsEnd(chars: string): (value: string) => string\r
\r
/**\r
 * Removes specified characters from the beginning of a string.\r
 */\r
declare function trimCharsStart(chars: string, value: string): string\r
declare function trimCharsStart(chars: string): (value: string) => string\r
\r
/**\r
 * The function pads the current string with a given string\r
 * (repeated, if needed) so that the resulting string reaches a given length.\r
 * The padding is applied from the end of the current string.\r
 */\r
declare function padCharsEnd(\r
  padString: string,\r
  targetLength: number,\r
  value: string\r
): string\r
declare function padCharsEnd(\r
  padString: string,\r
  targetLength: number\r
): (value: string) => string\r
declare function padCharsEnd(\r
  padString: string\r
): (targetLength: number, value: string) => string\r
\r
/**\r
 * The function pads the current string with an empty string\r
 * so that the resulting string reaches a given length.\r
 * The padding is applied from the end of the current string.\r
 */\r
declare function padEnd(targetLength: number, value: string): string\r
declare function padEnd(targetLength: number): (value: string) => string\r
\r
/**\r
 * The function pads the current string with a given string\r
 * (repeated, if needed) so that the resulting string reaches a given lenght.\r
 * The padding is applied to the start of the current string.\r
 */\r
declare function padCharsStart(\r
  padString: string,\r
  targetLength: number,\r
  value: string\r
): string\r
declare function padCharsStart(\r
  padString: string,\r
  targetLength: number\r
): (value: string) => string\r
declare function padCharsStart(\r
  padString: string\r
): (targetLength: number, value: string) => string\r
\r
/**\r
 * Pads string on the left side if it's shorter than length.\r
 */\r
declare function padStart(targetLength: number, value: string): string\r
declare function padStart(targetLength: number): (value: string) => string\r
\r
/**\r
 * Sort a list of objects by a property.\r
 */\r
declare function sortByProp<T>(prop: string | number, list: readonly T[]): T[]\r
declare function sortByProp(\r
  prop: string | number\r
): <T>(list: readonly T[]) => T[]\r
\r
/**\r
 * Sort a list of objects by a list of props (if first prop value is equivalent, sort by second, etc).\r
 */\r
declare function sortByProps(props: string[], list: object[]): object[]\r
declare function sortByProps(props: string[]): (list: object[]) => object[]\r
\r
/**\r
 * When given a number n and an array, returns an array containing every nth element.\r
 */\r
declare function skipTake<T>(n: number, list: T[]): T[]\r
declare function skipTake<T>(n: number): (list: T[]) => T[]\r
\r
/**\r
 * Sort a list of objects by a list of paths (if first path value is equivalent, sort by second, etc).\r
 */\r
declare function sortByPaths(props: string[][], list: object[]): object[]\r
declare function sortByPaths(props: string[][]): (list: object[]) => object[]\r
\r
/**\r
 * Determine if input value is an indexed data type.\r
 */\r
declare function isIndexed(val: any): val is string | any[]\r
\r
/**\r
 * Invokes the method at path of object with given arguments.\r
 */\r
declare function invokeArgs(\r
  pathToMethod: string[],\r
  args: any[],\r
  obj: object\r
): any\r
declare function invokeArgs(\r
  pathToMethod: string[],\r
  args: any[]\r
): (obj: object) => any\r
declare function invokeArgs(\r
  pathToMethod: string[]\r
): (args: any[], obj: object) => any\r
\r
/**\r
 * Invokes the method at path of object.\r
 */\r
declare function invoke(pathToMethod: string[], obj: object): any\r
declare function invoke(pathToMethod: string[]): (obj: object) => any\r
\r
/**\r
 * Converts double-precision 64-bit binary format IEEE 754 to signed 32 bit integer number.\r
 */\r
declare function toInteger32(n: number): number\r
declare function toInt32(n: number): number // alias\r
\r
/**\r
 * Converts double-precision 64-bit binary format IEEE 754 to unsigned 32 bit integer number.\r
 */\r
declare function toUinteger32(val: number): number\r
declare function toUint32(val: number): number // alias\r
\r
/**\r
 * Converts value to a number.\r
 */\r
declare function toNumber(val: any): number\r
\r
/**\r
 * Creates an array of numbers (positive and/or negative) progressing from start up to, but not including, end.\r
 *\r
 * \`Note\`: JavaScript follows the IEEE-754 standard for resolving floating-point values which can produce unexpected results.\r
 */\r
declare function rangeStep(step: number, from: number, to: number): number[]\r
declare function rangeStep(step: number, from: number): (to: number) => number[]\r
declare function rangeStep(step: number): {\r
  (from: number, to: number): number[]\r
  (from: number): (to: number) => number[]\r
}\r
\r
/**\r
 * Returns true if two lists have at least one element common to both lists.\r
 */\r
declare function overlaps<T>(list1: T[], list2: T[]): boolean\r
declare function overlaps<T>(list1: T[]): (list2: T[]) => boolean\r
`,HGe=`/**\r
 * Check whether \`A1\` is equal to \`A2\` or not.\r
 * @param A1\r
 * @param A2\r
 * @returns [[Boolean]]\r
 * @example\r
 * \`\`\`ts\r
 * import {A} from 'ts-toolbelt'\r
 *\r
 * type test0 = A.Equals<42 | 0, 42 | 0>                    // true\r
 * type test1 = A.Equals<{a: string}, {b: string}>          // false\r
 * type test3 = A.Equals<{a: string}, {readonly a: string}> // false\r
 * \`\`\`\r
 */\r
declare type Equals<A1 extends any, A2 extends any> = (<A>() => A extends A2\r
  ? 1\r
  : 0) extends <A>() => A extends A1 ? 1 : 0\r
  ? 1\r
  : 0\r
\r
declare type Boolean = 0 | 1\r
\r
/**\r
 * Describes index keys for any type\r
 */\r
declare type Key = string | number | symbol\r
\r
/**\r
 * A [[List]]\r
 * @param A its type\r
 * @returns [[List]]\r
 * @example\r
 * \`\`\`ts\r
 * type list0 = [1, 2, 3]\r
 * type list1 = number[]\r
 * \`\`\`\r
 */\r
declare type List<A = any> = ReadonlyArray<A>\r
\r
/**\r
 * Get in \`O\` the type of a field of key \`K\`\r
 * @param O to extract from\r
 * @param K to extract at\r
 * @returns [[Any]]\r
 * @example\r
 * \`\`\`ts\r
 * import {O} from 'ts-toolbelt'\r
 *\r
 * type User = {\r
 *  info: {\r
 *      name: string\r
 *      age: number\r
 *      payment: {}\r
 *  }\r
 *  id: number\r
 * }\r
 *\r
 * type test0 = O.At<User, 'id'> // number\r
 * \`\`\`\r
 */\r
declare type At<A extends any, K extends Key> = A extends List\r
  ? number extends A["length"]\r
    ? K extends number | \`\${number}\`\r
      ? A[never] | undefined\r
      : undefined\r
    : K extends keyof A\r
    ? A[K]\r
    : undefined\r
  : unknown extends A\r
  ? unknown\r
  : K extends keyof A\r
  ? A[K]\r
  : undefined\r
\r
/**\r
 * Ask TS to re-check that \`A1\` extends \`A2\`.\r
 * And if it fails, \`A2\` will be enforced anyway.\r
 * Can also be used to add constraints on parameters.\r
 * @param A1 to check against\r
 * @param A2 to cast to\r
 * @returns \`A1 | A2\`\r
 * @example\r
 * \`\`\`ts\r
 * import {A} from 'ts-toolbelt'\r
 *\r
 * type test0 = A.Cast<'42', string> // '42'\r
 * type test1 = A.Cast<'42', number> // number\r
 * \`\`\`\r
 */\r
declare type Cast<A1 extends any, A2 extends any> = A1 extends A2 ? A1 : A2\r
\r
/**\r
 * Describes the depth strategy when modifying types\r
 */\r
declare type Depth = "flat" | "deep"\r
/**\r
 * Make an object properties (all) \`never\`. We use this to intersect \`object\`s and\r
 * preserve the combine modifiers like \`+readonly\` and \`?optional\`.\r
 */\r
declare type Anyfy<O extends object> = {\r
  [K in keyof O]: any\r
}\r
\r
/**\r
 * @hidden\r
 */\r
declare type BuiltIn =\r
  | Function\r
  | Error\r
  | Date\r
  | {\r
      readonly [Symbol.toStringTag]: string\r
    }\r
  | RegExp\r
  | Generator\r
\r
/**\r
 * Check whether \`U\` contains \`U1\`\r
 * @param U to be inspected\r
 * @param U1 to check within\r
 * @returns [[Boolean]]\r
 * @example\r
 * \`\`\`ts\r
 * \`\`\`\r
 */\r
declare type Has<U extends any, U1 extends any> = [U1] extends [U] ? 1 : 0\r
\r
/**\r
 * Check whether \`A1\` is part of \`A2\` or not. The difference with\r
 * \`extends\` is that it forces a [[Boolean]] return.\r
 * @param A1\r
 * @param A2\r
 * @returns [[Boolean]]\r
 * @example\r
 * \`\`\`ts\r
 * import {A} from 'ts-toolbelt'\r
 *\r
 * type test0 = A.Extends<'a' | 'b', 'b'> // Boolean\r
 * type test1 = A.Extends<'a', 'a' | 'b'> // True\r
 *\r
 * type test2 = A.Extends<{a: string}, {a: any}>      // True\r
 * type test3 = A.Extends<{a: any}, {a: any, b: any}> // False\r
 *\r
 * type test4 = A.Extends<never, never> // False\r
 * /// Nothing cannot extend nothing, use \`A.Equals\`\r
 * \`\`\`\r
 */\r
declare type Extends<A1 extends any, A2 extends any> = [A1] extends [never]\r
  ? 0\r
  : A1 extends A2\r
  ? 1\r
  : 0\r
\r
declare const _: unique symbol\r
/**\r
 * A placeholder that is used in various ways\r
 */\r
declare type x = typeof _ & {}\r
\r
/**\r
 * Logical \`&&\` operator (behaves like the JS one)\r
 * @param B1 Left-hand side\r
 * @param B2 Right-hand side\r
 * @returns [[Boolean]]\r
 * @example\r
 * \`\`\`ts\r
 * import {B} from 'ts-toolbelt'\r
 *\r
 * type test0 = B.And<B.True, B.False>          // False\r
 * type test1 = B.And<B.True, B.True>           // True\r
 * type test2 = B.And<B.True | B.False, B.True> // Boolean\r
 * \`\`\`\r
 */\r
declare type And<B1 extends Boolean, B2 extends Boolean> = {\r
  0: {\r
    0: 0\r
    1: 0\r
  }\r
  1: {\r
    0: 0\r
    1: 1\r
  }\r
}[B1][B2]\r
\r
/**\r
 * Logical \`!\` operator (behaves like the JS one)\r
 * @param B to negate\r
 * @returns [[Boolean]]\r
 * @example\r
 * \`\`\`ts\r
 * import {B} from 'ts-toolbelt'\r
 *\r
 * type test0 = B.Not<B.True>  // False\r
 * type test1 = B.Not<B.False> // True\r
 * \`\`\`\r
 */\r
declare type Not<B extends Boolean> = {\r
  0: 1\r
  1: 0\r
}[B]\r
\r
/**\r
 * Logical \`||\` operator (behaves like the JS one)\r
 * @param B1 Left-hand side\r
 * @param B2 Right-hand side\r
 * @returns [[Boolean]]\r
 * @example\r
 * \`\`\`ts\r
 * import {B} from 'ts-toolbelt'\r
 *\r
 * type test0 = B.Or<B.True, B.False>    // True\r
 * type test1 = B.Or<B.True, B.True>     // True\r
 * type test2 = B.Or<B.Boolean, B.False> // Boolean\r
 * \`\`\`\r
 */\r
declare type Or<B1 extends Boolean, B2 extends Boolean> = {\r
  0: {\r
    0: 0\r
    1: 1\r
  }\r
  1: {\r
    0: 1\r
    1: 1\r
  }\r
}[B1][B2]\r
\r
/**\r
 * An entry of \`IterationMap\`\r
 */\r
declare type Iteration = [\r
  value: number,\r
  sign: "-" | "0" | "+",\r
  prev: keyof IterationMap,\r
  next: keyof IterationMap,\r
  oppo: keyof IterationMap\r
]\r
declare type IterationMap = {\r
  __: [number, "-" | "0" | "+", "__", "__", "__"]\r
  "-100": [-100, "-", "__", "-99", "100"]\r
  "-99": [-99, "-", "-100", "-98", "99"]\r
  "-98": [-98, "-", "-99", "-97", "98"]\r
  "-97": [-97, "-", "-98", "-96", "97"]\r
  "-96": [-96, "-", "-97", "-95", "96"]\r
  "-95": [-95, "-", "-96", "-94", "95"]\r
  "-94": [-94, "-", "-95", "-93", "94"]\r
  "-93": [-93, "-", "-94", "-92", "93"]\r
  "-92": [-92, "-", "-93", "-91", "92"]\r
  "-91": [-91, "-", "-92", "-90", "91"]\r
  "-90": [-90, "-", "-91", "-89", "90"]\r
  "-89": [-89, "-", "-90", "-88", "89"]\r
  "-88": [-88, "-", "-89", "-87", "88"]\r
  "-87": [-87, "-", "-88", "-86", "87"]\r
  "-86": [-86, "-", "-87", "-85", "86"]\r
  "-85": [-85, "-", "-86", "-84", "85"]\r
  "-84": [-84, "-", "-85", "-83", "84"]\r
  "-83": [-83, "-", "-84", "-82", "83"]\r
  "-82": [-82, "-", "-83", "-81", "82"]\r
  "-81": [-81, "-", "-82", "-80", "81"]\r
  "-80": [-80, "-", "-81", "-79", "80"]\r
  "-79": [-79, "-", "-80", "-78", "79"]\r
  "-78": [-78, "-", "-79", "-77", "78"]\r
  "-77": [-77, "-", "-78", "-76", "77"]\r
  "-76": [-76, "-", "-77", "-75", "76"]\r
  "-75": [-75, "-", "-76", "-74", "75"]\r
  "-74": [-74, "-", "-75", "-73", "74"]\r
  "-73": [-73, "-", "-74", "-72", "73"]\r
  "-72": [-72, "-", "-73", "-71", "72"]\r
  "-71": [-71, "-", "-72", "-70", "71"]\r
  "-70": [-70, "-", "-71", "-69", "70"]\r
  "-69": [-69, "-", "-70", "-68", "69"]\r
  "-68": [-68, "-", "-69", "-67", "68"]\r
  "-67": [-67, "-", "-68", "-66", "67"]\r
  "-66": [-66, "-", "-67", "-65", "66"]\r
  "-65": [-65, "-", "-66", "-64", "65"]\r
  "-64": [-64, "-", "-65", "-63", "64"]\r
  "-63": [-63, "-", "-64", "-62", "63"]\r
  "-62": [-62, "-", "-63", "-61", "62"]\r
  "-61": [-61, "-", "-62", "-60", "61"]\r
  "-60": [-60, "-", "-61", "-59", "60"]\r
  "-59": [-59, "-", "-60", "-58", "59"]\r
  "-58": [-58, "-", "-59", "-57", "58"]\r
  "-57": [-57, "-", "-58", "-56", "57"]\r
  "-56": [-56, "-", "-57", "-55", "56"]\r
  "-55": [-55, "-", "-56", "-54", "55"]\r
  "-54": [-54, "-", "-55", "-53", "54"]\r
  "-53": [-53, "-", "-54", "-52", "53"]\r
  "-52": [-52, "-", "-53", "-51", "52"]\r
  "-51": [-51, "-", "-52", "-50", "51"]\r
  "-50": [-50, "-", "-51", "-49", "50"]\r
  "-49": [-49, "-", "-50", "-48", "49"]\r
  "-48": [-48, "-", "-49", "-47", "48"]\r
  "-47": [-47, "-", "-48", "-46", "47"]\r
  "-46": [-46, "-", "-47", "-45", "46"]\r
  "-45": [-45, "-", "-46", "-44", "45"]\r
  "-44": [-44, "-", "-45", "-43", "44"]\r
  "-43": [-43, "-", "-44", "-42", "43"]\r
  "-42": [-42, "-", "-43", "-41", "42"]\r
  "-41": [-41, "-", "-42", "-40", "41"]\r
  "-40": [-40, "-", "-41", "-39", "40"]\r
  "-39": [-39, "-", "-40", "-38", "39"]\r
  "-38": [-38, "-", "-39", "-37", "38"]\r
  "-37": [-37, "-", "-38", "-36", "37"]\r
  "-36": [-36, "-", "-37", "-35", "36"]\r
  "-35": [-35, "-", "-36", "-34", "35"]\r
  "-34": [-34, "-", "-35", "-33", "34"]\r
  "-33": [-33, "-", "-34", "-32", "33"]\r
  "-32": [-32, "-", "-33", "-31", "32"]\r
  "-31": [-31, "-", "-32", "-30", "31"]\r
  "-30": [-30, "-", "-31", "-29", "30"]\r
  "-29": [-29, "-", "-30", "-28", "29"]\r
  "-28": [-28, "-", "-29", "-27", "28"]\r
  "-27": [-27, "-", "-28", "-26", "27"]\r
  "-26": [-26, "-", "-27", "-25", "26"]\r
  "-25": [-25, "-", "-26", "-24", "25"]\r
  "-24": [-24, "-", "-25", "-23", "24"]\r
  "-23": [-23, "-", "-24", "-22", "23"]\r
  "-22": [-22, "-", "-23", "-21", "22"]\r
  "-21": [-21, "-", "-22", "-20", "21"]\r
  "-20": [-20, "-", "-21", "-19", "20"]\r
  "-19": [-19, "-", "-20", "-18", "19"]\r
  "-18": [-18, "-", "-19", "-17", "18"]\r
  "-17": [-17, "-", "-18", "-16", "17"]\r
  "-16": [-16, "-", "-17", "-15", "16"]\r
  "-15": [-15, "-", "-16", "-14", "15"]\r
  "-14": [-14, "-", "-15", "-13", "14"]\r
  "-13": [-13, "-", "-14", "-12", "13"]\r
  "-12": [-12, "-", "-13", "-11", "12"]\r
  "-11": [-11, "-", "-12", "-10", "11"]\r
  "-10": [-10, "-", "-11", "-9", "10"]\r
  "-9": [-9, "-", "-10", "-8", "9"]\r
  "-8": [-8, "-", "-9", "-7", "8"]\r
  "-7": [-7, "-", "-8", "-6", "7"]\r
  "-6": [-6, "-", "-7", "-5", "6"]\r
  "-5": [-5, "-", "-6", "-4", "5"]\r
  "-4": [-4, "-", "-5", "-3", "4"]\r
  "-3": [-3, "-", "-4", "-2", "3"]\r
  "-2": [-2, "-", "-3", "-1", "2"]\r
  "-1": [-1, "-", "-2", "0", "1"]\r
  "0": [0, "0", "-1", "1", "0"]\r
  "1": [1, "+", "0", "2", "-1"]\r
  "2": [2, "+", "1", "3", "-2"]\r
  "3": [3, "+", "2", "4", "-3"]\r
  "4": [4, "+", "3", "5", "-4"]\r
  "5": [5, "+", "4", "6", "-5"]\r
  "6": [6, "+", "5", "7", "-6"]\r
  "7": [7, "+", "6", "8", "-7"]\r
  "8": [8, "+", "7", "9", "-8"]\r
  "9": [9, "+", "8", "10", "-9"]\r
  "10": [10, "+", "9", "11", "-10"]\r
  "11": [11, "+", "10", "12", "-11"]\r
  "12": [12, "+", "11", "13", "-12"]\r
  "13": [13, "+", "12", "14", "-13"]\r
  "14": [14, "+", "13", "15", "-14"]\r
  "15": [15, "+", "14", "16", "-15"]\r
  "16": [16, "+", "15", "17", "-16"]\r
  "17": [17, "+", "16", "18", "-17"]\r
  "18": [18, "+", "17", "19", "-18"]\r
  "19": [19, "+", "18", "20", "-19"]\r
  "20": [20, "+", "19", "21", "-20"]\r
  "21": [21, "+", "20", "22", "-21"]\r
  "22": [22, "+", "21", "23", "-22"]\r
  "23": [23, "+", "22", "24", "-23"]\r
  "24": [24, "+", "23", "25", "-24"]\r
  "25": [25, "+", "24", "26", "-25"]\r
  "26": [26, "+", "25", "27", "-26"]\r
  "27": [27, "+", "26", "28", "-27"]\r
  "28": [28, "+", "27", "29", "-28"]\r
  "29": [29, "+", "28", "30", "-29"]\r
  "30": [30, "+", "29", "31", "-30"]\r
  "31": [31, "+", "30", "32", "-31"]\r
  "32": [32, "+", "31", "33", "-32"]\r
  "33": [33, "+", "32", "34", "-33"]\r
  "34": [34, "+", "33", "35", "-34"]\r
  "35": [35, "+", "34", "36", "-35"]\r
  "36": [36, "+", "35", "37", "-36"]\r
  "37": [37, "+", "36", "38", "-37"]\r
  "38": [38, "+", "37", "39", "-38"]\r
  "39": [39, "+", "38", "40", "-39"]\r
  "40": [40, "+", "39", "41", "-40"]\r
  "41": [41, "+", "40", "42", "-41"]\r
  "42": [42, "+", "41", "43", "-42"]\r
  "43": [43, "+", "42", "44", "-43"]\r
  "44": [44, "+", "43", "45", "-44"]\r
  "45": [45, "+", "44", "46", "-45"]\r
  "46": [46, "+", "45", "47", "-46"]\r
  "47": [47, "+", "46", "48", "-47"]\r
  "48": [48, "+", "47", "49", "-48"]\r
  "49": [49, "+", "48", "50", "-49"]\r
  "50": [50, "+", "49", "51", "-50"]\r
  "51": [51, "+", "50", "52", "-51"]\r
  "52": [52, "+", "51", "53", "-52"]\r
  "53": [53, "+", "52", "54", "-53"]\r
  "54": [54, "+", "53", "55", "-54"]\r
  "55": [55, "+", "54", "56", "-55"]\r
  "56": [56, "+", "55", "57", "-56"]\r
  "57": [57, "+", "56", "58", "-57"]\r
  "58": [58, "+", "57", "59", "-58"]\r
  "59": [59, "+", "58", "60", "-59"]\r
  "60": [60, "+", "59", "61", "-60"]\r
  "61": [61, "+", "60", "62", "-61"]\r
  "62": [62, "+", "61", "63", "-62"]\r
  "63": [63, "+", "62", "64", "-63"]\r
  "64": [64, "+", "63", "65", "-64"]\r
  "65": [65, "+", "64", "66", "-65"]\r
  "66": [66, "+", "65", "67", "-66"]\r
  "67": [67, "+", "66", "68", "-67"]\r
  "68": [68, "+", "67", "69", "-68"]\r
  "69": [69, "+", "68", "70", "-69"]\r
  "70": [70, "+", "69", "71", "-70"]\r
  "71": [71, "+", "70", "72", "-71"]\r
  "72": [72, "+", "71", "73", "-72"]\r
  "73": [73, "+", "72", "74", "-73"]\r
  "74": [74, "+", "73", "75", "-74"]\r
  "75": [75, "+", "74", "76", "-75"]\r
  "76": [76, "+", "75", "77", "-76"]\r
  "77": [77, "+", "76", "78", "-77"]\r
  "78": [78, "+", "77", "79", "-78"]\r
  "79": [79, "+", "78", "80", "-79"]\r
  "80": [80, "+", "79", "81", "-80"]\r
  "81": [81, "+", "80", "82", "-81"]\r
  "82": [82, "+", "81", "83", "-82"]\r
  "83": [83, "+", "82", "84", "-83"]\r
  "84": [84, "+", "83", "85", "-84"]\r
  "85": [85, "+", "84", "86", "-85"]\r
  "86": [86, "+", "85", "87", "-86"]\r
  "87": [87, "+", "86", "88", "-87"]\r
  "88": [88, "+", "87", "89", "-88"]\r
  "89": [89, "+", "88", "90", "-89"]\r
  "90": [90, "+", "89", "91", "-90"]\r
  "91": [91, "+", "90", "92", "-91"]\r
  "92": [92, "+", "91", "93", "-92"]\r
  "93": [93, "+", "92", "94", "-93"]\r
  "94": [94, "+", "93", "95", "-94"]\r
  "95": [95, "+", "94", "96", "-95"]\r
  "96": [96, "+", "95", "97", "-96"]\r
  "97": [97, "+", "96", "98", "-97"]\r
  "98": [98, "+", "97", "99", "-98"]\r
  "99": [99, "+", "98", "100", "-99"]\r
  "100": [100, "+", "99", "__", "-100"]\r
}\r
\r
/**\r
 * Move \`I\`'s position forward\r
 * @param I to move\r
 * @returns [[Iteration]]\r
 * @example\r
 * \`\`\`ts\r
 * import {I} from 'ts-toolbelt'\r
 *\r
 * type i = I.IterationOf<'20'>\r
 *\r
 * type test0 = I.Pos<i>         // 20\r
 * type test1 = I.Pos<I.Next<i>> // 21\r
 * \`\`\`\r
 */\r
declare type Next<I extends Iteration> = IterationMap[I[3]]\r
\r
/**\r
 * Move \`I\`'s position backwards\r
 * @param I to move\r
 * @returns [[Iteration]]\r
 * @example\r
 * \`\`\`ts\r
 * import {I} from 'ts-toolbelt'\r
 *\r
 * type i = I.IterationOf<'20'>\r
 *\r
 * type test0 = I.Pos<i>         // 20\r
 * type test1 = I.Pos<I.Prev<i>> // 19\r
 * \`\`\`\r
 */\r
declare type Prev<I extends Iteration> = IterationMap[I[2]]\r
\r
/**\r
 * Transform a number into an [[Iteration]]\r
 * (to use [[Prev]], [[Next]], & [[Pos]])\r
 * @param N to transform\r
 * @returns [[Iteration]]\r
 * @example\r
 * \`\`\`ts\r
 * import {I} from 'ts-toolbelt'\r
 *\r
 * type i = I.IterationOf<0> // ["-1", "1", "0", 0, "0"]\r
 *\r
 * type next = I.Next<i>       // ["0", "2", "1", 1, "+"]\r
 * type prev = I.Prev<i>       // ["-2", "0", "-1", -1, "-"]\r
 *\r
 * type nnext = I.Pos<next>    // +1\r
 * type nprev = I.Pos<prev>    // -1\r
 * \`\`\`\r
 */\r
declare type IterationOf<N extends number> = \`\${N}\` extends keyof IterationMap\r
  ? IterationMap[\`\${N}\`]\r
  : IterationMap["__"]\r
\r
/**\r
 * Get the position of \`I\` (**number**)\r
 * @param I to query\r
 * @returns \`number\`\r
 * @example\r
 * \`\`\`ts\r
 * import {I} from 'ts-toolbelt'\r
 *\r
 * type i = I.IterationOf<'20'>\r
 *\r
 * type test0 = I.Pos<i>         // 20\r
 * type test1 = I.Pos<I.Next<i>> // 21\r
 * \`\`\`\r
 */\r
declare type Pos<I extends Iteration> = I[0]\r
\r
/**\r
 * Get the length of \`L\`\r
 * @param L to get length\r
 * @returns [[String]] or \`number\`\r
 * @example\r
 * \`\`\`ts\r
 * \`\`\`\r
 */\r
declare type Length<L extends List> = L["length"]\r
\r
/**\r
 * Remove the first item out of a [[List]]\r
 * @param L\r
 * @returns [[List]]\r
 * @example\r
 * \`\`\`ts\r
 * \`\`\`\r
 */\r
declare type Tail<L extends List> = L extends readonly []\r
  ? L\r
  : L extends readonly [any?, ...infer LTail]\r
  ? LTail\r
  : L\r
\r
/**\r
 * Alias to create a [[Function]]\r
 * @param P parameters\r
 * @param R return type\r
 * @returns [[Function]]\r
 * @example\r
 * \`\`\`ts\r
 * import {F} from 'ts-toolbelt'\r
 *\r
 * type test0 = F.Function<[string, number], boolean>\r
 * /// (args_0: string, args_1: number) => boolean\r
 * \`\`\`\r
 */\r
declare type Function$1<P extends List = any, R extends any = any> = (\r
  ...args: P\r
) => R\r
\r
/**\r
 * Attach \`L1\` at the end of \`L\`\r
 * @param L to concat with\r
 * @param L1 to be attached\r
 * @returns [[List]]\r
 * @example\r
 * \`\`\`ts\r
 * import {L} from 'ts-toolbelt'\r
 *\r
 * type test0 = L.Concat<[1, 2], [3, 4]> // [1, 2, 3, 4]\r
 * type test1 = L.Concat<[1, 2], [[3], 4]> // [1, 2, [3], 4]\r
 * type test2 = L.Concat<[1, 2], number[]> // [1, 2, ...number[]]\r
 * type test3 = L.Concat<readonly [1, 2], readonly [3]> // [1, 2, 3]\r
 * \`\`\`\r
 */\r
declare type Concat<L extends List, L1 extends List> = [...L, ...L1]\r
\r
/**\r
 * Extract parameters from a [[Function]]\r
 * @param F to extract from\r
 * @returns [[List]]\r
 * @example\r
 * \`\`\`ts\r
 * import {F} from 'ts-toolbelt'\r
 *\r
 * const fn = (name: string, age: number) => {}\r
 *\r
 * type test0 = F.ParamsOf<typeof fn>                         // [string, number]\r
 *\r
 * type test1 = F.ParamsOf<(name: string, age: number) => {}> // [string, number]\r
 * \`\`\`\r
 */\r
declare type Parameters$1<F extends Function$1> = F extends (\r
  ...args: infer L\r
) => any\r
  ? L\r
  : never\r
\r
/**\r
 * Extract the return type of a [[Function]]\r
 * @param F to extract from\r
 * @returns [[Any]]\r
 * @example\r
 * \`\`\`ts\r
 * import {F} from 'ts-toolbelt'\r
 *\r
 * const fn = () => true\r
 *\r
 * type test0 = F.ReturnOf<typeof fn>  // boolean\r
 *\r
 * type test1 = F.ReturnOf<() => true> // true\r
 * \`\`\`\r
 */\r
declare type Return<F extends Function$1> = F extends (...args: List) => infer R\r
  ? R\r
  : never\r
\r
/**\r
 * Remove \`M\` out of \`U\`\r
 * @param U to remove from\r
 * @param M to remove out\r
 * @returns [[Union]]\r
 * @example\r
 * \`\`\`ts\r
 * \`\`\`\r
 */\r
declare type Exclude$1<U extends any, M extends any> = U extends M ? never : U\r
\r
/**\r
 * Remove \`undefined\` & \`null\` out of \`U\`\r
 * @param U to make non-nullable\r
 * @returns [[Union]]\r
 * @example\r
 * \`\`\`ts\r
 * \`\`\`\r
 */\r
declare type NonNullable$1<U extends any> = Exclude$1<U, undefined | null>\r
\r
/**\r
 * @hidden\r
 */\r
declare type __Pick<O extends object, K extends keyof O> = {\r
  [P in K]: O[P]\r
} & {}\r
/**\r
 * @hidden\r
 */\r
declare type _Pick<O extends object, K extends Key> = __Pick<O, keyof O & K>\r
\r
/**\r
 * @hidden\r
 */\r
declare type _Omit<O extends object, K extends Key> = _Pick<\r
  O,\r
  Exclude$1<keyof O, K>\r
>\r
\r
/**\r
 * @hidden\r
 */\r
declare type NonNullableFlat<O> = {\r
  [K in keyof O]: NonNullable$1<O[K]>\r
} & {}\r
\r
/**\r
 * @hidden\r
 */\r
declare type _RequiredKeys<O extends object> = {\r
  [K in keyof O]-?: {} extends Pick<O, K> ? never : K\r
}[keyof O]\r
/**\r
 * Get the keys of \`O\` that are required\r
 * @param O\r
 * @returns [[Key]]\r
 * @example\r
 * \`\`\`ts\r
 * \`\`\`\r
 */\r
declare type RequiredKeys$1<O extends object> = O extends unknown\r
  ? _RequiredKeys<O>\r
  : never\r
\r
/**\r
 * Transform a [[List]] into an [[Object]] equivalent\r
 * @param L to transform\r
 * @returns [[Object]]\r
 * @example\r
 * \`\`\`ts\r
 * \`\`\`\r
 */\r
declare type ObjectOf<O extends List> = O extends unknown\r
  ? number extends Length<O>\r
    ? _Pick<O, number>\r
    : _Omit<O, keyof any[]>\r
  : never\r
\r
/**\r
 * Get the keys of \`L\` that are readonly\r
 * @param L\r
 * @returns [[Key]]\r
 * @example\r
 * \`\`\`ts\r
 * \`\`\`\r
 */\r
declare type RequiredKeys<L extends List> = RequiredKeys$1<ObjectOf<L>>\r
\r
/**\r
 * @hidden\r
 */\r
declare type _SplitParams<\r
  P extends List,\r
  PSplit extends List[] = [],\r
  PRest extends List = Tail<P>\r
> = {\r
  0: P extends [...infer A, ...PRest]\r
    ? _SplitParams<Tail<P>, [...PSplit, A], Tail<PRest>>\r
    : never\r
  1: PSplit\r
  2: P[number][][]\r
}[number extends Length<P> ? 2 : P extends [] ? 1 : 0]\r
/**\r
 * Splits tuples to preserve their labels\r
 * @hidden\r
 */\r
declare type SplitParams<P extends List> = _SplitParams<P> extends infer X\r
  ? Cast<X, List[]>\r
  : never\r
/**\r
 * @hidden\r
 */\r
declare type _JoinParams<PSplit extends List[], L extends List = []> = {\r
  0: _JoinParams<Tail<PSplit>, [...L, ...PSplit[0]]>\r
  1: L\r
  2: PSplit[number][]\r
}[number extends Length<PSplit> ? 2 : PSplit extends [] ? 1 : 0]\r
/**\r
 * Undoes the job of [[SplitParams]]\r
 * @hidden\r
 */\r
declare type JoinParams<P extends List[]> = _JoinParams<P> extends infer X\r
  ? Cast<X, List>\r
  : never\r
/**\r
 * @hidden\r
 */\r
declare type GapOf<\r
  L1 extends List,\r
  L2 extends List[],\r
  LN extends List,\r
  I extends Iteration\r
> = L1[Pos<I>] extends x ? Concat<LN, L2[Pos<I>]> : LN\r
/**\r
 * @hidden\r
 */\r
declare type _GapsOf<\r
  L1 extends List,\r
  L2 extends List[],\r
  LN extends List = [],\r
  L2D extends List[] = L2,\r
  I extends Iteration = IterationOf<0>\r
> = {\r
  0: _GapsOf<L1, L2, GapOf<L1, L2, LN, I>, Tail<L2D>, Next<I>>\r
  1: Concat<LN, JoinParams<L2D>>\r
}[Extends<Pos<I>, Length<L1>>]\r
/**\r
 * @hidden\r
 */\r
declare type GapsOf<L1 extends List, L2 extends List> = _GapsOf<\r
  L1,\r
  SplitParams<L2>\r
> extends infer X\r
  ? Cast<X, List>\r
  : never\r
/**\r
 * @hidden\r
 */\r
declare type Gaps<L extends List> = Cast<\r
  NonNullableFlat<{\r
    [K in keyof L]?: L[K] | x\r
  }>,\r
  List\r
>\r
/**\r
 * Curry a [[Function]]\r
 * @param F to curry\r
 * @returns [[Function]]\r
 * @example\r
 * \`\`\`ts\r
 * import {F} from 'ts-toolbelt'\r
 *\r
 * /// If you are looking for creating types for \`curry\`\r
 * /// It handles placeholders and variable arguments\r
 * declare function curry<Fn extends F.Function>(fn: Fn): F.Curry<Fn>\r
 * \`\`\`\r
 */\r
declare type Curry<F extends Function$1> = <\r
  P extends Gaps<Parameters$1<F>>,\r
  G extends List = GapsOf<P, Parameters$1<F>>,\r
  R extends any = Return<F>\r
>(\r
  ...p: Gaps<Parameters$1<F>> | P\r
) => RequiredKeys<G> extends never ? R : Curry<(...p: G) => R>\r
\r
/**\r
 * Update the fields of \`O\` with the ones of \`O1\`\r
 * (only the existing fields will be updated)\r
 * @param O to update\r
 * @param O1 to update with\r
 * @returns [[Object]]\r
 * @example\r
 * \`\`\`ts\r
 * \`\`\`\r
 */\r
declare type Overwrite<O extends object, O1 extends object> = {\r
  [K in keyof O]: K extends keyof O1 ? O1[K] : O[K]\r
} & {}\r
\r
/** @ignore */ /** */\r
\r
/**\r
 * Remove \`?\` & \`readonly\` from a [[List]]\r
 */\r
declare type Naked<L extends List> = Overwrite<Required<L>, L>\r
\r
/**\r
 * All primitive types\r
 */\r
declare type Primitive =\r
  | boolean\r
  | string\r
  | number\r
  | bigint\r
  | symbol\r
  | undefined\r
  | null\r
\r
/**\r
 * Add an element \`A\` at the beginning of \`L\`\r
 * @param L to append to\r
 * @param A to be added to\r
 * @returns [[List]]\r
 * @example\r
 * \`\`\`ts\r
 * \`\`\`\r
 */\r
declare type Prepend<L extends List, A extends any> = [A, ...L]\r
\r
/**\r
 * Describes how to perform iterations\r
 */\r
declare type Way = "->" | "<-"\r
\r
/**\r
 * @hidden\r
 */\r
declare type _OptionalKeys<O extends object> = {\r
  [K in keyof O]-?: {} extends Pick<O, K> ? K : never\r
}[keyof O]\r
\r
/**\r
 * @hidden\r
 */\r
declare type Longer<L extends List, L1 extends List> = L extends unknown\r
  ? L1 extends unknown\r
    ? {\r
        0: 0\r
        1: 1\r
      }[Has<RequiredKeys<L>, RequiredKeys<L1>>]\r
    : never\r
  : never\r
/**\r
 * @hidden\r
 */\r
declare type MergeProp<\r
  OK,\r
  O1K,\r
  fill,\r
  OOKeys extends Key,\r
  K extends Key\r
> = K extends OOKeys\r
  ? Exclude$1<OK, undefined> | O1K\r
  : [OK] extends [never]\r
  ? O1K\r
  : OK extends fill\r
  ? O1K\r
  : OK\r
/**\r
 * @hidden\r
 */\r
declare type MergeFlatObject<\r
  O extends object,\r
  O1 extends object,\r
  fill,\r
  OOKeys extends Key = _OptionalKeys<O>\r
> = {\r
  [K in keyof (Anyfy<O> & O1)]: MergeProp<At<O, K>, At<O1, K>, fill, OOKeys, K>\r
} & {}\r
/**\r
 * @hidden\r
 */\r
declare type MergeFlatList<\r
  L extends List,\r
  L1 extends List,\r
  ignore extends object,\r
  fill,\r
  LOK extends Key = _OptionalKeys<L>\r
> = number extends Length<L | L1>\r
  ? MergeFlatChoice<L[number], L1[number], ignore, fill>[]\r
  : Longer<L, L1> extends 1\r
  ? {\r
      [K in keyof L]: MergeProp<L[K], At<L1, K>, fill, LOK, K>\r
    }\r
  : {\r
      [K in keyof L1]: MergeProp<At<L, K>, L1[K], fill, LOK, K>\r
    }\r
/**\r
 * @hidden\r
 */\r
declare type MergeFlatChoice<\r
  O extends object,\r
  O1 extends object,\r
  ignore extends object,\r
  fill\r
> = O extends ignore\r
  ? O\r
  : O1 extends ignore\r
  ? O\r
  : O extends List\r
  ? O1 extends List\r
    ? MergeFlatList<O, O1, ignore, fill>\r
    : MergeFlatObject<O, O1, fill>\r
  : MergeFlatObject<O, O1, fill>\r
/**\r
 * @hidden\r
 */\r
declare type MergeFlat<\r
  O extends object,\r
  O1 extends object,\r
  ignore extends object = BuiltIn,\r
  fill = undefined\r
> = O extends unknown\r
  ? O1 extends unknown\r
    ? MergeFlatChoice<O, O1, ignore, fill>\r
    : never\r
  : never\r
/**\r
 * @hidden\r
 */\r
declare type MergeDeepList<\r
  L extends List,\r
  L1 extends List,\r
  ignore extends object,\r
  fill\r
> = number extends Length<L | L1>\r
  ? MergeDeepChoice<L[number], L1[number], ignore, fill, never, any>[]\r
  : Longer<L, L1> extends 1\r
  ? {\r
      [K in keyof L]: MergeDeepChoice<\r
        L[K],\r
        At<L1, K>,\r
        ignore,\r
        fill,\r
        _OptionalKeys<L>,\r
        K\r
      >\r
    }\r
  : {\r
      [K in keyof L1]: MergeDeepChoice<\r
        At<L, K>,\r
        L1[K],\r
        ignore,\r
        fill,\r
        _OptionalKeys<L>,\r
        K\r
      >\r
    }\r
/**\r
 * @hidden\r
 */\r
declare type MergeDeepObject<\r
  O extends object,\r
  O1 extends object,\r
  ignore extends object,\r
  fill,\r
  OOKeys extends Key = _OptionalKeys<O>\r
> = {\r
  [K in keyof (Anyfy<O> & O1)]: MergeDeepChoice<\r
    At<O, K>,\r
    At<O1, K>,\r
    ignore,\r
    fill,\r
    OOKeys,\r
    K\r
  >\r
}\r
/**\r
 * @hidden\r
 */\r
declare type MergeDeepChoice<\r
  OK,\r
  O1K,\r
  ignore extends object,\r
  fill,\r
  OOKeys extends Key,\r
  K extends Key\r
> = [OK] extends [never]\r
  ? MergeProp<OK, O1K, fill, OOKeys, K>\r
  : [O1K] extends [never]\r
  ? MergeProp<OK, O1K, fill, OOKeys, K>\r
  : OK extends ignore\r
  ? MergeProp<OK, O1K, fill, OOKeys, K>\r
  : O1K extends ignore\r
  ? MergeProp<OK, O1K, fill, OOKeys, K>\r
  : OK extends List\r
  ? O1K extends List\r
    ? MergeDeepList<OK, O1K, ignore, fill>\r
    : MergeProp<OK, O1K, fill, OOKeys, K>\r
  : OK extends object\r
  ? O1K extends object\r
    ? MergeDeepObject<OK, O1K, ignore, fill>\r
    : MergeProp<OK, O1K, fill, OOKeys, K>\r
  : MergeProp<OK, O1K, fill, OOKeys, K>\r
/**\r
 * @hidden\r
 */\r
declare type MergeDeep<\r
  O extends object,\r
  O1 extends object,\r
  ignore extends object,\r
  fill\r
> = O extends unknown\r
  ? O1 extends unknown\r
    ? MergeDeepChoice<O, O1, ignore, fill, "x", "y">\r
    : never\r
  : never\r
/**\r
 * Accurately merge the fields of \`O\` with the ones of \`O1\`. It is\r
 * equivalent to the spread operator in JavaScript. [[Union]]s and [[Optional]]\r
 * fields will be handled gracefully.\r
 *\r
 * (⚠️ needs \`--strictNullChecks\` enabled)\r
 * @param O to complete\r
 * @param O1 to copy from\r
 * @param depth (?=\`'flat'\`) 'deep' to do it deeply\r
 * @param ignore (?=\`BuiltIn\`) types not to merge\r
 * @param fill (?=\`undefined\`) types of \`O\` to be replaced with ones of \`O1\`\r
 * @returns [[Object]]\r
 * @example\r
 * \`\`\`ts\r
 * import {O} from 'ts-toolbelt'\r
 *\r
 * type O = {\r
 *  name?: string\r
 *  age? : number\r
 *  zip? : string\r
 *  pay  : {\r
 *      cvv?: number\r
 *  }\r
 * }\r
 *\r
 * type O1 = {\r
 *  age : number\r
 *  zip?: number\r
 *  city: string\r
 *  pay : {\r
 *      cvv : number\r
 *      ccn?: string\r
 *  }\r
 * }\r
 *\r
 * type test = O.Merge<O, O1, 'deep'>\r
 * // {\r
 * //     name?: string;\r
 * //     age: number;\r
 * //     zip?: string | number;\r
 * //     pay: {\r
 * //         cvv: number;\r
 * //         ccn?: string;\r
 * //     };\r
 * //     city: string;\r
 * // }\r
 * \`\`\`\r
 */\r
declare type Merge$1<\r
  O extends object,\r
  O1 extends object,\r
  depth extends Depth = "flat",\r
  ignore extends object = BuiltIn,\r
  fill extends any = undefined\r
> = {\r
  flat: MergeFlat<O, O1, ignore, fill>\r
  deep: MergeDeep<O, O1, ignore, fill>\r
}[depth]\r
\r
/**\r
 * Add an element \`A\` at the end of \`L\`.\r
 * @param L to append to\r
 * @param A to be added to\r
 * @returns [[List]]\r
 * @example\r
 * \`\`\`ts\r
 * import {L} from 'ts-toolbelt'\r
 *\r
 * type test0 = L.Append<[1, 2, 3], 4> // [1, 2, 3, 4]\r
 * type test1 = L.Append<[], 'a'> // ['a']\r
 * type test2 = L.Append<readonly ['a', 'b'], 'c'> // ['a', 'b', 'c']\r
 * type test3 = L.Append<[1, 2], [3, 4]> // [1, 2, [3, 4]]\r
 * \`\`\`\r
 */\r
declare type Append<L extends List, A extends any> = [...L, A]\r
\r
/**\r
 * @hidden\r
 */\r
declare type __Assign<\r
  O extends object,\r
  Os extends List<object>,\r
  depth extends Depth,\r
  ignore extends object,\r
  fill extends any,\r
  I extends Iteration = IterationOf<0>\r
> = {\r
  0: __Assign<\r
    Merge$1<Os[Pos<I>], O, depth, ignore, fill>,\r
    Os,\r
    depth,\r
    ignore,\r
    fill,\r
    Next<I>\r
  >\r
  1: O\r
}[Extends<Pos<I>, Length<Os>>]\r
/**\r
 * @hidden\r
 */\r
declare type _Assign<\r
  O extends object,\r
  Os extends List<object>,\r
  depth extends Depth,\r
  ignore extends object,\r
  fill extends any\r
> = __Assign<O, Os, depth, ignore, fill> extends infer X\r
  ? Cast<X, object>\r
  : never\r
/**\r
 * Assign a list of [[Object]] into \`O\` with [[Merge]]. Merges from right to\r
 * left, first items get overridden by the next ones (last-in overrides).\r
 * @param O to assign to\r
 * @param Os to assign\r
 * @param depth (?=\`'flat'\`) 'deep' to do it deeply\r
 * @param ignore (?=\`BuiltIn\`) types not to merge\r
 * @param fill (?=\`undefined\`) types of \`O\` to be replaced with ones of \`O1\`\r
 * @returns [[Object]]\r
 * @example\r
 * \`\`\`ts\r
 * \`\`\`\r
 */\r
declare type Assign<\r
  O extends object,\r
  Os extends List<object>,\r
  depth extends Depth = "flat",\r
  ignore extends object = BuiltIn,\r
  fill extends any = undefined\r
> = O extends unknown\r
  ? Os extends unknown\r
    ? _Assign<O, Os, depth, ignore, fill>\r
    : never\r
  : never\r
\r
/**\r
 * Transform a [[List]] into an [[Union]]\r
 * @param L to transform\r
 * @returns [[Any]]\r
 * @example\r
 * \`\`\`ts\r
 * \`\`\`\r
 */\r
declare type UnionOf<L extends List> = L[number]\r
\r
/**\r
 * @hidden\r
 */\r
declare type UnNestLoose<L extends List> = (UnionOf<L> extends infer UL\r
  ? UL extends unknown\r
    ? UL extends List\r
      ? UnionOf<UL>\r
      : UL\r
    : never\r
  : never)[] & {}\r
/**\r
 * @hidden\r
 */\r
declare type Flatter<\r
  L extends List,\r
  LN extends List,\r
  I extends Iteration\r
> = L[Pos<I>] extends infer LP\r
  ? LP extends List\r
    ? Concat<LN, L[Pos<I>]>\r
    : Append<LN, L[Pos<I>]>\r
  : never\r
/**\r
 * @hidden\r
 */\r
declare type UnNestStrict<\r
  L extends List,\r
  LN extends List = [],\r
  I extends Iteration = IterationOf<0>\r
> = {\r
  0: UnNestStrict<L, Flatter<L, LN, I>, Next<I>>\r
  1: LN\r
}[Extends<Pos<I>, Length<L>>]\r
/**\r
 * @hidden\r
 */\r
declare type __UnNest<L extends List, strict extends Boolean> = {\r
  0: UnNestLoose<L>\r
  1: UnNestStrict<L>\r
}[And<Not<Extends<number, Length<L>>>, strict>]\r
/**\r
 * @hidden\r
 */\r
declare type _UnNest<L extends List, strict extends Boolean> = __UnNest<\r
  Naked<L>,\r
  strict\r
> extends infer X\r
  ? Cast<X, List>\r
  : never\r
/**\r
 * Remove a dimension of \`L\`\r
 * @param L to un-nest\r
 * @param strict (?=\`1\`) \`0\` to not preserve tuples\r
 * @returns [[List]]\r
 * @example\r
 * \`\`\`ts\r
 * \`\`\`\r
 */\r
declare type UnNest<\r
  L extends List,\r
  strict extends Boolean = 1\r
> = L extends unknown ? _UnNest<L, strict> : never\r
\r
/**\r
 * @hidden\r
 */\r
declare type __Flatten<\r
  L extends List,\r
  LO extends List,\r
  strict extends Boolean,\r
  limit extends Iteration,\r
  I extends Iteration = IterationOf<0>\r
> = {\r
  0: __Flatten<_UnNest<L, strict>, L, strict, limit, Next<I>>\r
  1: L\r
}[Or<Equals<L, LO>, Extends<limit, I>>]\r
/**\r
 * @hidden\r
 */\r
declare type _Flatten<\r
  L extends List,\r
  strict extends Boolean,\r
  limit extends number = number\r
> = __Flatten<L, [], strict, IterationOf<limit>> extends infer X\r
  ? Cast<X, List>\r
  : never\r
/**\r
 * Remove all dimensions of \`L\` (10 max)\r
 * @param L to un-nest\r
 * @param strict (?=\`1\`) \`0\` to not preserve tuples\r
 * @param limit (?=\`string\`) to stop un-nesting at\r
 * @returns [[List]]\r
 * @example\r
 * \`\`\`ts\r
 * \`\`\`\r
 */\r
declare type Flatten<\r
  L extends List,\r
  strict extends Boolean = 1,\r
  limit extends number = number\r
> = L extends unknown ? _Flatten<L, strict, limit> : never\r
\r
/**\r
 * starts in reverse from \`N\` till \`N\` = 0\r
 * @hidden\r
 */\r
declare type TakeForth<\r
  L extends List,\r
  N extends Iteration,\r
  I extends Iteration = Prev<N>,\r
  LN extends List = []\r
> = {\r
  0: TakeForth<L, N, Prev<I>, Prepend<LN, L[Pos<I>]>>\r
  1: LN\r
}[Extends<-1, Pos<I>>]\r
/**\r
 * starts in reverse from the end till \`N\` = 0\r
 * @hidden\r
 */\r
declare type TakeBack<L extends List, N extends Iteration> = {\r
  0: TakeBack<Tail<L>, Prev<N>>\r
  1: L\r
}[Extends<0, Pos<N>>]\r
/**\r
 * @hidden\r
 */\r
declare type __Take<L extends List, N extends Iteration, way extends Way> = {\r
  "->": TakeForth<L, N>\r
  "<-": TakeBack<L, N>\r
}[way]\r
/**\r
 * @hidden\r
 */\r
declare type _Take<\r
  L extends List,\r
  N extends number,\r
  way extends Way = "->"\r
> = __Take<L, IterationOf<N>, way> extends infer X ? Cast<X, List> : never\r
/**\r
 * Extract \`N\` entries out of \`L\`\r
 * @param L to extract from\r
 * @param N to extract out\r
 * @param way (?=\`'->'\`) to extract from end\r
 * @returns [[List]]\r
 * @example\r
 * \`\`\`ts\r
 * \`\`\`\r
 */\r
declare type Take$1<\r
  L extends List,\r
  N extends number,\r
  way extends Way = "->"\r
> = L extends unknown ? (N extends unknown ? _Take<L, N, way> : never) : never\r
\r
/**\r
 * Accurately merge the fields of \`L\` with the ones of \`L1\`. It is\r
 * equivalent to the spread operator in JavaScript. [[Union]]s and [[Optional]]\r
 * fields will be handled gracefully.\r
 *\r
 * (⚠️ needs \`--strictNullChecks\` enabled)\r
 * @param L to complete\r
 * @param L1 to copy from\r
 * @param depth (?=\`'flat'\`) 'deep' to do it deeply\r
 * @param ignore (?=\`BuiltIn\`) types not to merge\r
 * @param fill (?=\`undefined\`) types of \`O\` to be replaced with ones of \`O1\`\r
 * @returns [[List]]\r
 * @example\r
 * \`\`\`ts\r
 * \`\`\`\r
 */\r
declare type Merge<\r
  L extends List,\r
  L1 extends List,\r
  depth extends Depth = "flat",\r
  ignore extends object = BuiltIn,\r
  fill extends any = undefined\r
> = Cast<Merge$1<L, L1, depth, ignore, fill>, List>\r
\r
/**\r
 * Recursively Update a deep property from a given path\r
 *\r
 * @param Keys array of keeps into the object\r
 * @param U The object to change\r
 * @param T the next type at the key path\r
 *\r
 * <created by @harris-miller>\r
 */\r
type DeepModify<Keys extends readonly PropertyKey[], U, T> = Keys extends [\r
  infer K,\r
  ...infer Rest\r
]\r
  ? K extends keyof U\r
    ? Rest extends readonly []\r
      ? Omit<U, K> & Record<K, T>\r
      : Rest extends readonly PropertyKey[]\r
      ? Omit<U, K> & Record<K, DeepModify<Rest, U[K], T>>\r
      : never\r
    : never\r
  : never\r
\r
// Here lies a loose collection of tools that compute types for the functions in "index.d.ts"\r
// The goal of this file is to keep "index.d.ts" readable as well as hiding implementations\r
\r
// WHEN ADDING A NEW TOOL\r
// - Add documentation for the tool you've created\r
// - Add <created by @username> on your tool's docs\r
\r
// TODO\r
// - Types need proper descriptions, so that we know what they do\r
\r
/**\r
 * Array of functions to compose/pipe with.\r
 */\r
type AtLeastOneFunctionsFlow<TArgs extends any[], TResult> =\r
  | [\r
      (...args: TArgs) => any,\r
      ...Array<(args: any) => any>,\r
      (...args: any[]) => TResult\r
    ]\r
  | [(...args: TArgs) => TResult]\r
type AtLeastOneFunctionsFlowFromRightToLeft<TArgs extends any[], TResult> =\r
  | [\r
      (...args: any) => TResult,\r
      ...Array<(args: any) => any>,\r
      (...args: TArgs) => any\r
    ]\r
  | [(...args: TArgs) => TResult]\r
\r
/**\r
 * R.cond's [predicate, transform] pair.\r
 */\r
type CondPair<T extends any[], R> = [(...val: T) => boolean, (...val: T) => R]\r
\r
/**\r
 * R.cond's [predicate, transform] pair in a typeguarded version\r
 */\r
type CondPairTypeguard<T, TFiltered extends T, R> = [\r
  (value: T) => value is TFiltered,\r
  (value: TFiltered) => R\r
]\r
\r
/**\r
 * A conditional type to use with default values. (defaultTo, propOr, etc)\r
 * <created by @lax4mike>\r
 */\r
type DefaultTo<Fallback, Value> = Value extends null | undefined\r
  ? Fallback | Exclude<Value, null | undefined>\r
  : Value\r
\r
/**\r
 * Represents all objects evolvable with Evolver E\r
 * @param E\r
 */\r
type Evolvable<E extends Evolver> = {\r
  [P in keyof E]?: Evolved<E[P]>\r
}\r
\r
/**\r
 * <needs description>\r
 * @param O\r
 * @param E\r
 */\r
type Evolve<O extends Evolvable<E>, E extends Evolver> = {\r
  [P in keyof O]: P extends keyof E ? EvolveValue<O[P], E[P]> : O[P]\r
}\r
\r
/**\r
 * <needs description>\r
 * @param A\r
 */\r
type Evolved<A> = A extends (value: infer V) => any\r
  ? V\r
  : A extends Evolver\r
  ? Evolvable<A>\r
  : never\r
\r
/**\r
 * A set of transformation to run as part of an evolve\r
 * @param T - the type to be evolved\r
 */\r
type Evolver<T extends Evolvable<any> = any> = {\r
  // if T[K] isn't evolvable, don't allow nesting for that property\r
  [key in keyof Partial<T>]:\r
    | ((value: T[key]) => T[key])\r
    | (T[key] extends Evolvable<any> ? Evolver<T[key]> : never)\r
}\r
\r
/**\r
 * <needs description>\r
 * @param O\r
 * @param E\r
 */\r
type EvolveNestedValue<O, E extends Evolver> = O extends object\r
  ? O extends Evolvable<E>\r
    ? Evolve<O, E>\r
    : never\r
  : never\r
\r
/**\r
 * <needs description>\r
 * @param V\r
 * @param E\r
 */\r
type EvolveValue<V, E> = E extends (value: V) => any\r
  ? ReturnType<E>\r
  : E extends Evolver\r
  ? EvolveNestedValue<V, E>\r
  : never\r
\r
/**\r
 * All falsy JavaScript values representable by the type system.\r
 *\r
 * @note Actually there are six (seven) falsy values in JS - the sixth being \`NaN\`;\r
 * the seventh being \`document.all\`. However \`NaN\` is not a valid literal type,\r
 * and \`document.all\` is an object so it's probably not a good idea to add it either.\r
 */\r
type Falsy = undefined | null | 0 | "" | false\r
\r
/**\r
 * A functor satisfying the FantasyLand spec\r
 * @param A\r
 */\r
type Functor<A> =\r
  | {\r
      ["fantasy-land/map"]: <B>(fn: (a: A) => B) => Functor<B>\r
      [key: string]: any\r
    }\r
  | { map: <B>(fn: (a: A) => B) => Functor<B>; [key: string]: any }\r
\r
/**\r
 * A Functor - a simple type representing a Functor that used \`map\` is the method prop name\r
 */\r
type FunctorMap<A> = {\r
  map<B>(fn: (a: A) => B): FunctorMap<B>\r
}\r
\r
/**\r
 * A FantasyLand Functor - a simple type representing a Functor wiih the fantasy-land specific prop name\r
 */\r
type FunctorFantasyLand<A> = {\r
  ["fantasy-land/map"]<B>(fn: (a: A) => B): FunctorFantasyLand<B>\r
}\r
\r
/**\r
 * R.any dispatches to \`.any\` of the second argument, if present.\r
 * This type infers the type of the first argument of that method and returns it\r
 */\r
type InferAnyAType<T> = T extends {\r
  any: (fn: (a: infer A) => boolean) => boolean\r
}\r
  ? A\r
  : never\r
\r
/**\r
 * A pair containing the key and corresponding value of an object.\r
 * @param K Key type\r
 * @param V Value type\r
 */\r
type KeyValuePair<K, V> = [K, V]\r
\r
/**\r
 * <needs description>\r
 * @param S Type of the full object\r
 * @param A Type of the lens focus\r
 */\r
type Lens<S, A> = (functorFactory: (a: A) => Functor<A>) => (s: S) => Functor<S>\r
\r
/**\r
 * Returns true if T1 array length less than or equal to length of array T2, else returns false\r
 *\r
 * @param T1 First readonly array\r
 * @param T2 Second readonly array\r
 *\r
 * <created by @valerii15298>\r
 */\r
type Arr1LessThanOrEqual<\r
  T1 extends ReadonlyArray<any>,\r
  T2 extends ReadonlyArray<any>\r
> = T1["length"] extends T2["length"]\r
  ? true\r
  : T2["length"] extends 0\r
  ? false\r
  : // eslint-disable-next-line @typescript-eslint/no-unused-vars\r
  T2 extends readonly [infer First, ...infer Rest]\r
  ? Arr1LessThanOrEqual<T1, Rest>\r
  : never\r
\r
/**\r
 * R.all dispatches to \`.all\` of the second argument, if present.\r
 * This type infers the type of the first argument of that method and returns it\r
 */\r
type InferAllAType<T> = T extends {\r
  all: (fn: (a: infer A) => boolean) => boolean\r
}\r
  ? A\r
  : never\r
\r
/**\r
 * Return true if types T1 and T2 can intersect, e.g. both are primitives or both are objects.\r
 * Taking into account branded types too.\r
 *\r
 * @param T1 First readonly array\r
 * @param T2 Second readonly array\r
 *\r
 * <created by @valerii15298>\r
 */\r
type Intersectable<T1, T2> = [T1] extends [T2]\r
  ? true\r
  : [T2] extends [T1]\r
  ? true\r
  : [T1] extends [object]\r
  ? [T2] extends [object]\r
    ? true\r
    : false\r
  : [T1] extends [Primitive]\r
  ? [T2] extends [Primitive]\r
    ? true\r
    : false\r
  : false\r
\r
/**\r
 * Check if type \`T\` is \`any\`\r
 *\r
 * @param T Type to check\r
 *\r
 * <created by @valerii15298>\r
 */\r
type IsAny<T> = 0 extends 1 & T ? true : false\r
\r
/**\r
 * Intersection when produced result can be usable type.\r
 * For example type \`{a: any} & number\` will not be reduced to \`never\`\r
 *  but \`Intersection<{a: any}, number>\` will be \`never\`\r
 * If one of type is any, another type will be returned.\r
 *\r
 * @param T1\r
 * @param T2\r
 *\r
 * <created by @valerii15298>\r
 */\r
type Intersection<T1, T2> = Intersectable<T1, T2> extends true\r
  ? IsAny<T1> extends true\r
    ? T2\r
    : IsAny<T2> extends true\r
    ? T1\r
    : T1 & T2\r
  : never\r
\r
/**\r
 * Merge second array with first one,\r
 * resulting array will have the same length as array T1,\r
 * every item in new array will be item from first array(T1) by corresponding index\r
 * intersected with item from second array(also with the same index) if such exist\r
 *\r
 * examples:\r
 *   \`mergeArrWithLeft<[1, number, number, string], [number, 2, 7]>\` => \`[1, 2, 7, string]\`\r
 *   \`mergeArrWithLeft<[1, string], [number, "exact text", number, any]>\` => \`[1, "exact text"]\`\r
 *\r
 * @param T1\r
 * @param T2\r
 *\r
 * <created by @valerii15298>\r
 */\r
type mergeArrWithLeft<\r
  T1 extends ReadonlyArray<any>,\r
  T2 extends ReadonlyArray<any>\r
> = readonly [\r
  ...{\r
    readonly [Index in keyof T1]: Index extends keyof T2\r
      ? Intersection<T1[Index], T2[Index]>\r
      : T1[Index]\r
  }\r
]\r
\r
/**\r
 * The same as mergeArrWithLeft but will merge smaller array to larger one,\r
 * so that data will not be lost and maximum length array will be returned\r
 *\r
 * example: MergeArrays<[1, number], [number, 2, string]>\r
 *   will result to => [1, 2, string]\r
 *\r
 * @param T1\r
 * @param T2\r
 *\r
 * <created by @valerii15298>\r
 */\r
type MergeArrays<\r
  T1 extends ReadonlyArray<any>,\r
  T2 extends ReadonlyArray<any>\r
> = Arr1LessThanOrEqual<T1, T2> extends true\r
  ? mergeArrWithLeft<T2, T1>\r
  : mergeArrWithLeft<T1, T2>\r
\r
/**\r
 * Given array of functions will return new array which will be constructed\r
 * merging all functions parameters array using mergeArrays generic.\r
 *\r
 * If provided array is not array of functions, return type will be empty array([])\r
 *\r
 * @param T Array of functions\r
 *\r
 * <created by @valerii15298>\r
 */\r
type LargestArgumentsList<T extends ReadonlyArray<any>> = T extends readonly [\r
  (...args: infer Args) => any,\r
  ...infer Rest\r
]\r
  ? MergeArrays<LargestArgumentsList<Rest>, Args>\r
  : readonly []\r
\r
/**\r
 * Checks if type is \`never\`\r
 *\r
 * Returns \`true\` if type is \`never\`, else returns \`false\`\r
 *\r
 * @param T Type to check\r
 *\r
 * <created by @valerii15298>\r
 */\r
type IsNever<T> = [T] extends [never] ? true : false\r
\r
/**\r
 * Checks if array of types is contains \`never\` type\r
 *\r
 * Returns \`true\` if array contains \`never\` type, else returns \`false\`\r
 *\r
 * @param T Array of types to check\r
 *\r
 * <created by @valerii15298>\r
 */\r
type HasNever<T extends readonly any[]> = T extends readonly [\r
  infer First,\r
  ...infer Rest\r
]\r
  ? IsNever<First> extends true\r
    ? true\r
    : HasNever<Rest>\r
  : false\r
\r
/**\r
 * Checks if corresponding types of arguments in functions overlap(have at least one type in common, except never)\r
 *\r
 * Returns \`unknown\` if arguments types overlap, else returns \`ErrorMsg\`\r
 *\r
 * @param T Type to check\r
 *\r
 * <created by @valerii15298>\r
 */\r
type IfFunctionsArgumentsDoNotOverlap<\r
  T extends ReadonlyArray<Fn>,\r
  ErrorMsg extends string\r
> = HasNever<LargestArgumentsList<T>> extends true ? ErrorMsg : unknown\r
\r
/**\r
 * Predicate for an object containing the key.\r
 */\r
type ObjPred<T = unknown> = (\r
  value: any,\r
  key: unknown extends T ? string : keyof T\r
) => boolean\r
\r
/**\r
 * Values that can be compared using the relational operators \`<\`/\`<=\`/\`>\`/\`>=\`\r
 */\r
type Ord = number | string | boolean | Date\r
\r
/**\r
 * \`a\` is less than \`b\`\r
 */\r
type LT = -1\r
/**\r
 * \`a\` is equal to \`b\`\r
 */\r
type EQ = 0\r
/**\r
 * \`a\` is greater than \`b\`\r
 */\r
type GT = 1\r
\r
/**\r
 * Represents two values' order\r
 */\r
type Ordering = LT | EQ | GT\r
\r
/**\r
 * An object with at least one of its properties beeing of type \`Key\`.\r
 *\r
 * @example\r
 * \`\`\`\r
 * // $ExpectType { foo: unknown } | { bar: unknown }\r
 * type Foo = ObjectHavingSome<"foo" | "bar">\r
 * \`\`\`\r
 */\r
// Implementation taken from\r
// https://github.com/piotrwitek/utility-types/blob/df2502ef504c4ba8bd9de81a45baef112b7921d0/src/mapped-types.ts#L351-L362\r
type ObjectHavingSome<Key extends PropertyKey> = {\r
  [K in Key]: { [P in K]: unknown }\r
}[Key]\r
\r
/**\r
 * Composition of \`Partial\` and \`Record\` types\r
 */\r
type PartialRecord<K extends keyof any, T> = Partial<Record<K, T>>\r
\r
/**\r
 * <needs description>\r
 */\r
type Path = Array<number | string>\r
\r
/**\r
 * A placeholder used to skip parameters, instead adding a parameter to the returned function.\r
 */\r
type Placeholder = x & { "@@functional/placeholder": true }\r
\r
/**\r
 * A runtime-branded value used to stop \`reduce\` and \`transduce\` early.\r
 * @param A The type of the contained value\r
 */\r
interface Reduced<A> {\r
  "@@transducer/value": A\r
  "@@transducer/reduced": true\r
}\r
\r
/**\r
 * A type representing any function. Useful as a generic constraint.\r
 */\r
type Fn = (...args: any[]) => unknown\r
\r
/**\r
 * Converts an array of functions to an array of their return types.\r
 * @param A The array of functions\r
 */\r
type ReturnTypesOfFns<A extends ReadonlyArray<Fn>> = A extends readonly [\r
  (...args: any[]) => infer H,\r
  ...infer R\r
]\r
  ? R extends readonly Fn[]\r
    ? readonly [H, ...ReturnTypesOfFns<R>]\r
    : readonly []\r
  : readonly []\r
\r
/**\r
 * Converts an array of functions taking a single parameter to an array of their parameter types.\r
 * @param A The array of functions\r
 */\r
type InputTypesOfFns<A extends ReadonlyArray<Fn>> = A extends [\r
  infer H,\r
  ...infer R\r
]\r
  ? H extends Fn\r
    ? R extends Fn[]\r
      ? [Parameters<H>[0], ...InputTypesOfFns<R>]\r
      : []\r
    : []\r
  : []\r
\r
/**\r
 * If \`T\` is a union, \`T[keyof T]\` (cf. \`map\` and \`values\` in \`index.d.ts\`) contains the types of object values that are common across the union (i.e., an intersection).\r
 * Because we want to include the types of all values, including those that occur in some, but not all members of the union, we first define \`ValueOfUnion\`.\r
 * @see https://stackoverflow.com/a/60085683\r
 * @param T The (possible) union\r
 */\r
type ValueOfUnion<T> = T extends infer U ? U[keyof U] : never\r
\r
/**\r
 * Take first \`N\` types of an Tuple\r
 * @param N Length of prefix to take\r
 * @param Tuple Input tuple type\r
 */\r
type Take<\r
  N extends number,\r
  Tuple extends any[],\r
  ReturnTuple extends any[] = []\r
> = ReturnTuple["length"] extends N\r
  ? ReturnTuple\r
  : Tuple extends [infer X, ...infer Xs]\r
  ? Take<N, Xs, [...ReturnTuple, X]>\r
  : never\r
\r
/**\r
 * A homogeneous tuple of length \`N\`.\r
 * @param T Type of every element of the tuple\r
 * @param N Length of the tuple\r
 */\r
type Tuple<T, N extends number> = N extends N\r
  ? number extends N\r
    ? T[]\r
    : _TupleOf<T, N, []>\r
  : never\r
type _TupleOf<T, N extends number, R extends unknown[]> = R["length"] extends N\r
  ? R\r
  : _TupleOf<T, N, [T, ...R]>\r
\r
/**\r
 * Map tuple of ordinary type to tuple of array type\r
 * [string, number] -> [string[], number[]]\r
 */\r
type ToTupleOfArray<Tuple extends any[]> = Tuple extends []\r
  ? []\r
  : Tuple extends [infer X, ...infer Xs]\r
  ? [X[], ...ToTupleOfArray<Xs>]\r
  : never\r
\r
/**\r
 * Map tuple of ordinary type to tuple of function type\r
 * @param R Parameter type of every function\r
 * @param Tuple Return type of every function\r
 */\r
type ToTupleOfFunction<R, Tuple extends any[]> = Tuple extends []\r
  ? []\r
  : Tuple extends [infer X, ...infer Xs]\r
  ? [(arg: R) => X, ...ToTupleOfFunction<R, Xs>]\r
  : never\r
\r
/**\r
 * Getter of property from any value. Supports objects, arrays, tuples and maybe values\r
 *\r
 * @param T Value type\r
 * @param P Maybe key type\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * type K = Prop<{ x: number } | undefined, 'x'>\r
 * type L = Prop<[1, ...string[]] | undefined, 0>\r
 * type M = Prop<[1, ...string[]] | undefined, 1>\r
 * \`\`\`\r
 *\r
 * <created by @anion155>\r
 */\r
type Prop<T, P extends keyof never> = P extends keyof Exclude<T, undefined>\r
  ? T extends undefined\r
    ? undefined\r
    : T[Extract<P, keyof T>]\r
  : undefined\r
\r
/**\r
 * When you have \`gt = <T extends Ord>(a: T, b: T) => boolean\`, \`a\` and \`b\` are different strings, and \`T\` defaults to \`string\r
 * However, \`gt = <T extends Ord>(a: T) => (b: T) => boolean\`, because \`a\` is evaluated without \`b\`, \`T\` is the literal of \`a\`\r
 * \`WidenLiteral\` exists to go from a literal type to its base type, eg\r
 * * \`"foobar"\` -> \`string\`\r
 * * \`1\` -> \`number\`\r
 * * \`true\` -> \`boolean\r
 * @see https://stackoverflow.com/a/56333836/10107466\r
 *\r
 * <created by @harris-miller>\r
 */\r
type WidenLiterals<T> = T extends boolean\r
  ? boolean\r
  : T extends string\r
  ? string\r
  : T extends number\r
  ? number\r
  : T\r
\r
/**\r
 * Extract the types from an array\r
 * Works with Tuples, eg \`ElementOf<typeof ['p1', 'p2']>\` => \`'p1' | 'p2'\`\r
 *\r
 * <created by @harris-miller>\r
 */\r
type ElementOf<Type extends readonly any[]> =\r
  Type extends readonly (infer Values)[] ? Values : never\r
\r
/**\r
 * Convenance type function to extract keys of an object as a tuple literal\r
 *\r
 * <created by @harris-miller>\r
 */\r
type KeysAsTuple<T> = [keyof T, ...(keyof T)[]]\r
\r
/**\r
 * A special placeholder value used to specify "gaps" within curried functions,\r
 * allowing partial application of any combination of arguments, regardless of\r
 * their positions.\r
 *\r
 * If \`g\` is a curried ternary function and \`_\` is \`R.__\`, the following are\r
 * equivalent:\r
 *\r
 *   - \`g(1, 2, 3)\`\r
 *   - \`g(_, 2, 3)(1)\`\r
 *   - \`g(_, _, 3)(1)(2)\`\r
 *   - \`g(_, _, 3)(1, 2)\`\r
 *   - \`g(_, 2, _)(1, 3)\`\r
 *   - \`g(_, 2)(1)(3)\`\r
 *   - \`g(_, 2)(1, 3)\`\r
 *   - \`g(_, 2)(_, 3)(1)\`\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const greet = R.replace('{name}', R.__, 'Hello, {name}!');\r
 * greet('Alice'); //=> 'Hello, Alice!'\r
 * \`\`\`\r
 */\r
declare const __: Placeholder\r
\r
/**\r
 * Adds two values.\r
 *\r
 * See also {@link subtract}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.add(2, 3);       //=>  5\r
 * R.add(7)(10);      //=> 17\r
 * \`\`\`\r
 */\r
declare function add(a: number): (b: number) => number\r
declare function add(a: number, b: number): number\r
\r
/**\r
 * Creates a new list iteration function from an existing one by adding two new\r
 * parameters to its callback function: the current index, and the entire list.\r
 *\r
 * This would turn, for instance, [\`R.map\`](#map) function into one that\r
 * more closely resembles \`Array.prototype.map\`. Note that this will only work\r
 * for functions in which the iteration callback function is the first\r
 * parameter, and where the list is the last parameter. (This latter might be\r
 * unimportant if the list parameter is not used.)\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const mapIndexed = R.addIndex(R.map);\r
 * mapIndexed((val, idx) => idx + '-' + val, ['f', 'o', 'o', 'b', 'a', 'r']);\r
 * //=> ['0-f', '1-o', '2-o', '3-b', '4-a', '5-r']\r
 * \`\`\`\r
 */\r
declare function addIndex<T>(\r
  fn: (f: (item: T) => void, list: readonly T[]) => T[]\r
): Curry<(a: (item: T, idx: number, list: T[]) => void, b: readonly T[]) => T[]>\r
// Special case for filter\r
declare function addIndex<T>(\r
  fn: (f: (item: T) => boolean, list: readonly T[]) => T[]\r
): Curry<\r
  (a: (item: T, idx: number, list: T[]) => boolean, b: readonly T[]) => T[]\r
>\r
// Special case for map\r
declare function addIndex<T, U>(\r
  fn: (f: (item: T) => U, list: readonly T[]) => U[]\r
): Curry<(a: (item: T, idx: number, list: T[]) => U, b: readonly T[]) => U[]>\r
// Special case for reduce\r
declare function addIndex<T, U>(\r
  fn: (f: (acc: U, item: T) => U, aci: U, list: readonly T[]) => U\r
): Curry<\r
  (\r
    a: (acc: U, item: T, idx: number, list: T[]) => U,\r
    b: U,\r
    c: readonly T[]\r
  ) => U\r
>\r
\r
/**\r
 * Applies a function to the value at the given index of an array, returning a\r
 * new copy of the array with the element at the given index replaced with the\r
 * result of the function application.\r
 *\r
 * See also {@link update}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.adjust(1, R.toUpper, ['a', 'b', 'c', 'd']);      //=> ['a', 'B', 'c', 'd']\r
 * R.adjust(-1, R.toUpper, ['a', 'b', 'c', 'd']);     //=> ['a', 'b', 'c', 'D']\r
 * \`\`\`\r
 */\r
declare function adjust(index: number): {\r
  // adjust(index)(fn, list)\r
  <T>(fn: (a: T) => T, list: readonly T[]): T[]\r
  // adjust(index)(__, list)(fn)\r
  <T>(__: Placeholder, list: readonly T[]): (fn: (a: T) => T) => T[]\r
  // adjust(index)(fn)(list)\r
  <T>(fn: (a: T) => T): (list: readonly T[]) => T[]\r
}\r
\r
// adjust(__, fn)\r
declare function adjust<T>(\r
  __: Placeholder,\r
  fn: (a: T) => T\r
): {\r
  // adjust(__, fn)(list)(index)\r
  (list: readonly T[]): (index: number) => T[]\r
  // adjust(__, fn)(__, index)(list)\r
  (__: Placeholder, index: number): (list: readonly T[]) => T[]\r
  // adjust(__, fn)(list, index)\r
  (list: readonly T[], index: number): T[]\r
}\r
\r
declare function adjust<T>(\r
  index: number,\r
  fn: (a: T) => T\r
): (list: readonly T[]) => T[]\r
\r
// adjust(index, fn)(list)\r
declare function adjust<T>(\r
  index: number,\r
  fn: (a: T) => T\r
): (list: readonly T[]) => T[]\r
// adjust(index, fn)(list)\r
declare function adjust<T>(\r
  index: number,\r
  fn: (a: T) => T\r
): (list: readonly T[]) => T[]\r
\r
// adjust(__, __, list)\r
declare function adjust<T>(\r
  __: Placeholder,\r
  __2: Placeholder,\r
  list: readonly T[]\r
): {\r
  // adjust(__, __, list)(index)(fn)\r
  (index: number): (fn: (a: T) => T) => T[]\r
  // adjust(__, __, list)(__, fn)(index)\r
  (__3: Placeholder, fn: (a: T) => T): (index: number) => T[]\r
  // adjust(__, __, list)(index, fn)\r
  (index: number, fn: (a: T) => T): T[]\r
}\r
// adjust(index, __, list)(fn)\r
declare function adjust<T>(\r
  index: number,\r
  __: Placeholder,\r
  list: readonly T[]\r
): (fn: (a: T) => T) => T[]\r
// adjust(__, fn, list)(index)\r
declare function adjust<T>(\r
  __: Placeholder,\r
  fn: (a: T) => T,\r
  list: readonly T[]\r
): (index: number) => T[]\r
\r
// adjust(index, fn, list)\r
declare function adjust<T>(\r
  index: number,\r
  fn: (a: T) => T,\r
  list: readonly T[]\r
): T[]\r
\r
/**\r
 * Returns \`true\` if all elements of the list match the predicate, \`false\` if\r
 * there are any that don't.\r
 *\r
 * Dispatches to the \`all\` method of the second argument, if present.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link any}, {@link none}, {@link transduce}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const equals3 = R.equals(3);\r
 * R.all(equals3)([3, 3, 3, 3]); //=> true\r
 * R.all(equals3)([3, 3, 1, 3]); //=> false\r
 * \`\`\`\r
 */\r
declare function all<T>(fn: (a: T) => boolean): {\r
  // all (fn)({ all })\r
  <U extends { all: (fn: (a: T) => boolean) => boolean }>(obj: U): boolean\r
  // all (fn)(list)\r
  (list: readonly T[]): boolean\r
}\r
\r
// all(__, { all })(fn)\r
declare function all<U extends { all: (fn: (a: any) => boolean) => boolean }>(\r
  __: Placeholder,\r
  obj: U\r
): (fn: (a: InferAllAType<U>) => boolean) => boolean\r
// all(__, list)(fn)\r
declare function all<T>(\r
  __: Placeholder,\r
  list: readonly T[]\r
): (fn: (a: T) => boolean) => boolean\r
\r
// all(fn, { all })\r
declare function all<T, U extends { all: (fn: (a: T) => boolean) => boolean }>(\r
  fn: (a: T) => boolean,\r
  obj: U\r
): boolean\r
// all(fn, list)\r
declare function all<T>(fn: (a: T) => boolean, list: readonly T[]): boolean\r
\r
/**\r
 * Takes a list of predicates and returns a predicate that returns true for a\r
 * given list of arguments if every one of the provided predicates is satisfied\r
 * by those arguments.\r
 *\r
 * The function returned is a curried function whose arity matches that of the\r
 * highest-arity predicate.\r
 *\r
 * See also {@link anyPass}, {@link both}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const isQueen = R.propEq('rank', 'Q');\r
 * const isSpade = R.propEq('suit', '♠︎');\r
 * const isQueenOfSpades = R.allPass([isQueen, isSpade]);\r
 *\r
 * isQueenOfSpades({rank: 'Q', suit: '♣︎'}); //=> false\r
 * isQueenOfSpades({rank: 'Q', suit: '♠︎'}); //=> true\r
 * \`\`\`\r
 */\r
declare function allPass<T, TF1 extends T, TF2 extends T>(\r
  predicates: [(a: T) => a is TF1, (a: T) => a is TF2]\r
): (a: T) => a is TF1 & TF2\r
declare function allPass<T, TF1 extends T, TF2 extends T, TF3 extends T>(\r
  predicates: [(a: T) => a is TF1, (a: T) => a is TF2, (a: T) => a is TF3]\r
): (a: T) => a is TF1 & TF2 & TF3\r
declare function allPass<\r
  T,\r
  TF1 extends T,\r
  TF2 extends T,\r
  TF3 extends T,\r
  TF4 extends T\r
>(\r
  predicates: [\r
    (a: T) => a is TF1,\r
    (a: T) => a is TF2,\r
    (a: T) => a is TF3,\r
    (a: T) => a is TF4\r
  ]\r
): (a: T) => a is TF1 & TF2 & TF3 & TF4\r
declare function allPass<\r
  T,\r
  TF1 extends T,\r
  TF2 extends T,\r
  TF3 extends T,\r
  TF4 extends T,\r
  TF5 extends T\r
>(\r
  predicates: [\r
    (a: T) => a is TF1,\r
    (a: T) => a is TF2,\r
    (a: T) => a is TF3,\r
    (a: T) => a is TF4,\r
    (a: T) => a is TF5\r
  ]\r
): (a: T) => a is TF1 & TF2 & TF3 & TF4 & TF5\r
declare function allPass<\r
  T,\r
  TF1 extends T,\r
  TF2 extends T,\r
  TF3 extends T,\r
  TF4 extends T,\r
  TF5 extends T,\r
  TF6 extends T\r
>(\r
  predicates: [\r
    (a: T) => a is TF1,\r
    (a: T) => a is TF2,\r
    (a: T) => a is TF3,\r
    (a: T) => a is TF4,\r
    (a: T) => a is TF5,\r
    (a: T) => a is TF6\r
  ]\r
): (a: T) => a is TF1 & TF2 & TF3 & TF4 & TF5 & TF6\r
declare function allPass<F extends (...args: any[]) => boolean>(\r
  predicates: readonly F[]\r
): F\r
\r
/**\r
 * Returns a function that always returns the given value. Note that for\r
 * non-primitives the value returned is a reference to the original value.\r
 *\r
 * This function is known as \`const\`, \`constant\`, or \`K\` (for K combinator) in\r
 * other languages and libraries.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const t = R.always('Tee');\r
 * t(); //=> 'Tee'\r
 * \`\`\`\r
 */\r
declare function always<T>(val: T): (...args: unknown[]) => T\r
\r
/**\r
 * Returns the first argument if it is falsy, otherwise the second argument.\r
 * Acts as the boolean \`and\` statement if both inputs are \`Boolean\`s.\r
 *\r
 * See also {@link both}, {@link or}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.and(true, true); //=> true\r
 * R.and(true, false); //=> false\r
 * R.and(false, true); //=> false\r
 * R.and(false, false); //=> false\r
 * \`\`\`\r
 */\r
declare function and<A>(a: A): <B>(b: B) => A | B\r
declare function and<B>(__: Placeholder, b: B): <A>(a: A) => A | B\r
declare function and<A, B>(a: A, b: B): A | B\r
\r
/**\r
 * Returns the result of applying the onSuccess function to the value inside\r
 * a successfully resolved promise. This is useful for working with promises\r
 * inside function compositions.\r
 *\r
 * See also {@link otherwise}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const makeQuery = email => ({ query: { email }});\r
 * const fetchMember = request =>\r
 *   Promise.resolve({ firstName: 'Bob', lastName: 'Loblaw', id: 42 });\r
 *\r
 * //getMemberName :: String -> Promise ({ firstName, lastName })\r
 * const getMemberName = R.pipe(\r
 *   makeQuery,\r
 *   fetchMember,\r
 *   R.andThen(R.pick(['firstName', 'lastName']))\r
 * );\r
 *\r
 * getMemberName('bob@gmail.com').then(console.log);\r
 * \`\`\`\r
 */\r
declare function andThen<A, B>(\r
  onSuccess: (a: A) => B | Promise<B>\r
): (promise: Promise<A>) => Promise<B>\r
declare function andThen<A>(\r
  __: Placeholder,\r
  promise: Promise<A>\r
): <B>(onSuccess: (a: A) => B | Promise<B>) => Promise<B>\r
declare function andThen<A, B>(\r
  onSuccess: (a: A) => B | Promise<B>,\r
  promise: Promise<A>\r
): Promise<B>\r
\r
/**\r
 * Returns \`true\` if at least one of the elements of the list match the predicate,\r
 * \`false\` otherwise.\r
 *\r
 * Dispatches to the \`any\` method of the second argument, if present.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link all}, {@link none}, {@link transduce}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const lessThan0 = R.flip(R.lt)(0);\r
 * const lessThan2 = R.flip(R.lt)(2);\r
 * R.any(lessThan0)([1, 2]); //=> false\r
 * R.any(lessThan2)([1, 2]); //=> true\r
 * \`\`\`\r
 */\r
declare function any<T>(fn: (a: T) => boolean): {\r
  // any(fn)(list)\r
  (list: readonly T[]): boolean\r
  // all (fn)({ any })\r
  <U extends { any: (fn: (a: T) => boolean) => boolean }>(obj: U): boolean\r
}\r
\r
// any(__, list)(fn)\r
declare function any<T>(\r
  __: Placeholder,\r
  list: readonly T[]\r
): (fn: (a: T) => boolean) => boolean\r
// any(__, { any })(fn)\r
declare function any<U extends { any: (fn: (a: any) => boolean) => boolean }>(\r
  ___: Placeholder,\r
  obj: U\r
): (fn: (a: InferAnyAType<U>) => boolean) => boolean\r
\r
// any(fn, list)\r
declare function any<T>(fn: (a: T) => boolean, list: readonly T[]): boolean\r
// any(fn, { any })\r
declare function any<T, U extends { any: (fn: (a: T) => boolean) => boolean }>(\r
  fn: (a: T) => boolean,\r
  obj: U\r
): boolean\r
\r
/**\r
 * Takes a list of predicates and returns a predicate that returns true for a\r
 * given list of arguments if at least one of the provided predicates is\r
 * satisfied by those arguments.\r
 *\r
 * The function returned is a curried function whose arity matches that of the\r
 * highest-arity predicate.\r
 *\r
 * See also {@link allPass}, {@link either}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const isClub = R.propEq('suit', '♣');\r
 * const isSpade = R.propEq('suit', '♠');\r
 * const isBlackCard = R.anyPass([isClub, isSpade]);\r
 *\r
 * isBlackCard({rank: '10', suit: '♣'}); //=> true\r
 * isBlackCard({rank: 'Q', suit: '♠'}); //=> true\r
 * isBlackCard({rank: 'Q', suit: '♦'}); //=> false\r
 * \`\`\`\r
 */\r
declare function anyPass<T, TF1 extends T, TF2 extends T>(\r
  predicates: [(a: T) => a is TF1, (a: T) => a is TF2]\r
): (a: T) => a is TF1 | TF2\r
declare function anyPass<T, TF1 extends T, TF2 extends T, TF3 extends T>(\r
  predicates: [(a: T) => a is TF1, (a: T) => a is TF2, (a: T) => a is TF3]\r
): (a: T) => a is TF1 | TF2 | TF3\r
declare function anyPass<T, TF1 extends T, TF2 extends T, TF3 extends T>(\r
  predicates: [(a: T) => a is TF1, (a: T) => a is TF2, (a: T) => a is TF3]\r
): (a: T) => a is TF1 | TF2 | TF3\r
declare function anyPass<\r
  T,\r
  TF1 extends T,\r
  TF2 extends T,\r
  TF3 extends T,\r
  TF4 extends T\r
>(\r
  predicates: [\r
    (a: T) => a is TF1,\r
    (a: T) => a is TF2,\r
    (a: T) => a is TF3,\r
    (a: T) => a is TF4\r
  ]\r
): (a: T) => a is TF1 | TF2 | TF3 | TF4\r
declare function anyPass<\r
  T,\r
  TF1 extends T,\r
  TF2 extends T,\r
  TF3 extends T,\r
  TF4 extends T,\r
  TF5 extends T\r
>(\r
  predicates: [\r
    (a: T) => a is TF1,\r
    (a: T) => a is TF2,\r
    (a: T) => a is TF3,\r
    (a: T) => a is TF4,\r
    (a: T) => a is TF5\r
  ]\r
): (a: T) => a is TF1 | TF2 | TF3 | TF4 | TF5\r
declare function anyPass<\r
  T,\r
  TF1 extends T,\r
  TF2 extends T,\r
  TF3 extends T,\r
  TF4 extends T,\r
  TF5 extends T,\r
  TF6 extends T\r
>(\r
  predicates: [\r
    (a: T) => a is TF1,\r
    (a: T) => a is TF2,\r
    (a: T) => a is TF3,\r
    (a: T) => a is TF4,\r
    (a: T) => a is TF5,\r
    (a: T) => a is TF6\r
  ]\r
): (a: T) => a is TF1 | TF2 | TF3 | TF4 | TF5 | TF6\r
declare function anyPass<F extends (...args: any[]) => boolean>(\r
  predicates: readonly F[]\r
): F\r
\r
/**\r
 * ap applies a list of functions to a list of values.\r
 *\r
 * Dispatches to the \`ap\` method of the first argument, if present. Also\r
 * treats curried functions as applicatives.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.ap([R.multiply(2), R.add(3)], [1,2,3]); //=> [2, 4, 6, 4, 5, 6]\r
 * R.ap([R.concat('tasty '), R.toUpper], ['pizza', 'salad']); //=> ["tasty pizza", "tasty salad", "PIZZA", "SALAD"]\r
 *\r
 * // R.ap can also be used as S combinator\r
 * // when only two functions are passed\r
 * R.ap(R.concat, R.toUpper)('Ramda') //=> 'RamdaRAMDA'\r
 * \`\`\`\r
 */\r
declare function ap<T, U>(\r
  fns: ReadonlyArray<(a: T) => U>\r
): (vs: readonly T[]) => U[]\r
declare function ap<R, A, B>(\r
  fn: (r: R, a: A) => B,\r
  fn1: (r: R) => A\r
): (r: R) => B\r
declare function ap<T, U>(\r
  fns: ReadonlyArray<(a: T) => U>,\r
  vs: readonly T[]\r
): U[]\r
\r
/**\r
 * Returns a new list, composed of n-tuples of consecutive elements. If \`n\` is\r
 * greater than the length of the list, an empty list is returned.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link transduce}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.aperture(2, [1, 2, 3, 4, 5]); //=> [[1, 2], [2, 3], [3, 4], [4, 5]]\r
 * R.aperture(3, [1, 2, 3, 4, 5]); //=> [[1, 2, 3], [2, 3, 4], [3, 4, 5]]\r
 * R.aperture(7, [1, 2, 3, 4, 5]); //=> []\r
 * \`\`\`\r
 */\r
declare function aperture<N extends number>(\r
  n: N\r
): <T>(list: readonly T[]) => Array<Tuple<T, N>> | []\r
declare function aperture<T>(\r
  __: Placeholder,\r
  list: readonly T[]\r
): <N extends number>(n: N) => Array<Tuple<T, N>> | []\r
declare function aperture<N extends number, T>(\r
  n: N,\r
  list: readonly T[]\r
): Array<Tuple<T, N>> | []\r
\r
/**\r
 * Returns a new list containing the contents of the given list, followed by\r
 * the given element.\r
 *\r
 * See also {@link prepend}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.append('tests', ['write', 'more']); //=> ['write', 'more', 'tests']\r
 * R.append('tests', []); //=> ['tests']\r
 * R.append(['tests'], ['write', 'more']); //=> ['write', 'more', ['tests']]\r
 * \`\`\`\r
 */\r
declare function append<T>(el: T): (list: readonly T[]) => T[]\r
// append(__, list)(el)\r
declare function append<T>(__: Placeholder, list: readonly T[]): (el: T) => T[]\r
// append(el, list)\r
declare function append<T>(el: T, list: readonly T[]): T[]\r
\r
/**\r
 * Applies function \`fn\` to the argument list \`args\`. This is useful for\r
 * creating a fixed-arity function from a variadic function. \`fn\` should be a\r
 * bound function if context is significant.\r
 *\r
 * See also {@link call}, {@link unapply}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const nums = [1, 2, 3, -99, 42, 6, 7];\r
 * R.apply(Math.max, nums); //=> 42\r
 * \`\`\`\r
 */\r
declare function apply<F extends (...args: readonly any[]) => any>(\r
  fn: F\r
): (args: Parameters<F>) => ReturnType<F>\r
// apply(args, fn)\r
// overload Placeholder options with versions for 1-to-5 args for best constraining\r
declare function apply<A extends readonly [any]>(\r
  __: Placeholder,\r
  args: A\r
): <F extends (...args: A) => any>(fn: F) => ReturnType<F>\r
declare function apply<A extends readonly [any, any]>(\r
  __: Placeholder,\r
  args: A\r
): <F extends (...args: A) => any>(fn: F) => ReturnType<F>\r
declare function apply<A extends readonly [any, any, any]>(\r
  __: Placeholder,\r
  args: A\r
): <F extends (...args: A) => any>(fn: F) => ReturnType<F>\r
declare function apply<A extends readonly [any, any, any, any]>(\r
  __: Placeholder,\r
  args: A\r
): <F extends (...args: A) => any>(fn: F) => ReturnType<F>\r
declare function apply<A extends readonly [any, any, any, any, any]>(\r
  __: Placeholder,\r
  args: A\r
): <F extends (...args: A) => any>(fn: F) => ReturnType<F>\r
declare function apply<A extends readonly any[]>(\r
  __: Placeholder,\r
  args: A\r
): <F extends (...args: A) => any>(fn: F) => ReturnType<F>\r
// apply(args, fn)\r
declare function apply<F extends (...args: readonly any[]) => any>(\r
  fn: F,\r
  args: Parameters<F>\r
): ReturnType<F>\r
\r
/**\r
 * Given a spec object recursively mapping properties to functions, creates a\r
 * function producing an object of the same structure, by mapping each property\r
 * to the result of calling its associated function with the supplied arguments.\r
 *\r
 * See also {@link converge}, {@link juxt}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const getMetrics = R.applySpec({\r
 *   sum: R.add,\r
 *   nested: { mul: R.multiply }\r
 * });\r
 * getMetrics(2, 4); // => { sum: 6, nested: { mul: 8 } }\r
 * \`\`\`\r
 */\r
declare function applySpec<\r
  Obj extends Record<string, (...args: readonly any[]) => any>\r
>(\r
  obj: Obj\r
): (...args: Parameters<Obj[keyof Obj]>) => {\r
  [Key in keyof Obj]: ReturnType<Obj[Key]>\r
}\r
declare function applySpec<T>(obj: any): (...args: readonly any[]) => T\r
\r
/**\r
 * Takes a value and applies a function to it.\r
 *\r
 * This function is also known as the \`thrush\` combinator.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const t42 = R.applyTo(42);\r
 * t42(R.identity); //=> 42\r
 * t42(R.add(1)); //=> 43\r
 * \`\`\`\r
 */\r
declare function applyTo<T>(el: T): <U>(fn: (t: T) => U) => U\r
declare function applyTo<T, U>(el: T, fn: (t: T) => U): U\r
\r
/**\r
 * Makes an ascending comparator function out of a function that returns a value\r
 * that can be compared with \`<\` and \`>\`.\r
 *\r
 * See also {@link descend}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const byAge = R.ascend(R.prop('age'));\r
 * const people = [\r
 *   { name: 'Emma', age: 70 },\r
 *   { name: 'Peter', age: 78 },\r
 *   { name: 'Mikhail', age: 62 },\r
 * ];\r
 * const peopleByYoungestFirst = R.sort(byAge, people);\r
 *   //=> [{ name: 'Mikhail', age: 62 },{ name: 'Emma', age: 70 }, { name: 'Peter', age: 78 }]\r
 * \`\`\`\r
 */\r
declare function ascend<T>(fn: (obj: T) => Ord): (a: T, b: T) => Ordering\r
declare function ascend<T>(fn: (obj: T) => Ord, a: T, b: T): Ordering\r
\r
/**\r
 * Makes a shallow clone of an object, setting or overriding the specified\r
 * property with the given value. Note that this copies and flattens prototype\r
 * properties onto the new object as well. All non-primitive properties are\r
 * copied by reference.\r
 *\r
 * See also {@link dissoc}, {@link pick}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.assoc('c', 3, {a: 1, b: 2}); //=> {a: 1, b: 2, c: 3}\r
 * \`\`\`\r
 */\r
declare function assoc<T, U>(\r
  __: Placeholder,\r
  val: T,\r
  obj: U\r
): <K extends string>(\r
  prop: K\r
) => K extends keyof U\r
  ? T extends U[K]\r
    ? U\r
    : Record<K, T> & Omit<U, K>\r
  : U & Record<K, T>\r
// assoc(prop, __, obj)(val), when K is keyof obj, tests if val is typeof obj[prop] for best return type\r
declare function assoc<U, K extends keyof U>(\r
  prop: K,\r
  __: Placeholder,\r
  obj: U\r
): <T>(val: T) => T extends U[K] ? U : Record<K, T> & Omit<U, K>\r
// assoc(prop, __, obj)(val), when prop is not keyof obj\r
declare function assoc<U, K extends string>(\r
  prop: K,\r
  __: Placeholder,\r
  obj: U\r
): <T>(val: T) => U & Record<K, T>\r
// assoc(prop, val, obj) when prop is keyof obj and val is same type\r
declare function assoc<K extends keyof U, U>(prop: K, val: U[K], obj: U): U\r
// assoc(prop, val, obj) when prop is keyof obj  and val is not same type\r
declare function assoc<T, K extends keyof U, U>(\r
  prop: K,\r
  val: T,\r
  obj: U\r
): Record<K, T> & Omit<U, K>\r
// assoc(prop, val, obj) when prop is not keyof obj\r
declare function assoc<T, U, K extends string>(\r
  prop: K,\r
  val: T,\r
  obj: U\r
): U & Record<K, T>\r
\r
// assoc(__, val)\r
declare function assoc<T>(\r
  __: Placeholder,\r
  val: T\r
): {\r
  // assoc(__, val)(__, obj)\r
  <U>(\r
    __2: Placeholder,\r
    obj: U\r
  ): {\r
    // assoc(__, val)(__, obj)(prop), prop is keyof obj, tests if val is typeof obj[prop] for best return type\r
    <K extends keyof U>(prop: K): U[K] extends T ? U : Record<K, T> & Omit<U, K>\r
    // assoc(__, val)(__, obj)(prop), prop is not keyof obj\r
    <K extends string>(prop: K): U & Record<K, T>\r
  }\r
  // assoc(__, val)(prop, obj), when obj has key prop, tests if val is typeof obj[prop] for best return type\r
  <K extends keyof U, U>(\r
    prop: K,\r
    obj: U\r
  ): U[K] extends T ? U : Record<K, T> & Omit<U, K>\r
  // assoc(__, val)(prop, obj), when obj does not have key prop\r
  <K extends string, U>(prop: K, obj: U): U & Record<K, T>\r
\r
  // assoc(__, val)(prop)\r
  <K extends string>(\r
    prop: K\r
  ): {\r
    // assoc(__, val)(prop)(obj) when obj has key prop, tests if val is typeof obj[prop] for best return type\r
    <U extends Record<K, any>>(\r
      obj: U\r
    ): U[K] extends T ? U : Record<K, T> & Omit<U, K>\r
    // assoc(__, val)(prop)(obj) when obj does not have key prop\r
    <U>(obj: U): U & Record<K, T>\r
  }\r
}\r
\r
// assoc(prop, val)\r
declare function assoc<T, K extends string>(\r
  prop: K,\r
  val: T\r
): {\r
  // assoc(prop, val)(obj), when obj has key prop, tests if val is typeof obj[prop] for best return type\r
  <U extends Record<K, any>>(\r
    obj: U\r
  ): U[K] extends T ? U : Record<K, T> & Omit<U, K>\r
  // assoc(prop, val)(obj), when obj does not have key prop\r
  <U>(obj: U): U & Record<K, T>\r
}\r
\r
// assoc(prop)\r
declare function assoc<K extends string>(\r
  prop: K\r
): {\r
  // assoc(prop)(__, obj) when prop is keyof obj\r
  <U extends Record<K, any>>(\r
    __: Placeholder,\r
    obj: U\r
  ): {\r
    // assoc(prop)(__, obj)(val) if val is typeof obj[prop]\r
    <T extends U[K]>(val: T): U\r
    // assoc(prop)(__, obj)(val) if val is not typeof obj[prop]\r
    <T>(val: T): Record<K, T> & Omit<U, K>\r
  }\r
  // assoc(prop)(__, obj) when prop is not keyof obj\r
  <U>(__: Placeholder, obj: U): <T>(val: T) => U & Record<K, T>\r
\r
  // assoc(prop)(val, obj) when obj has key prop, tests if val is typeof obj[prop] for best return type\r
  <T, U extends Record<K, any>>(\r
    val: T,\r
    obj: U\r
  ): U[K] extends T ? U : Record<K, T> & Omit<U, K>\r
  // assoc(prop)(val, obj) when obj does not have a key prop\r
  <T, U>(val: T, obj: U): U & Record<K, T>\r
\r
  // assoc(prop)(val)\r
  <T>(val: T): {\r
    // assoc(prop)(val)(obj) when obj has key prop and val is typeof obj[prop]\r
    <U extends Record<K, T>>(obj: U): U\r
    // assoc(prop)(val)(obj) when obj has key prop and val is not typeof obj[prop]\r
    <U extends Record<K, any>>(obj: U): Record<K, T> & Omit<U, K>\r
    // assoc(prop)(val)(obj) when obj does not have key prop\r
    <U>(obj: U): U & Record<K, T>\r
  }\r
}\r
\r
/**\r
 * Makes a shallow clone of an object, setting or overriding the nodes required\r
 * to create the given path, and placing the specific value at the tail end of\r
 * that path. Note that this copies and flattens prototype properties onto the\r
 * new object as well. All non-primitive properties are copied by reference.\r
 *\r
 * See also {@link dissocPath}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.assocPath(['a', 'b', 'c'], 42, {a: {b: {c: 0}}}); //=> {a: {b: {c: 42}}}\r
 *\r
 * // Any missing or non-object keys in path will be overridden\r
 * R.assocPath(['a', 'b', 'c'], 42, {a: 5}); //=> {a: {b: {c: 42}}}\r
 * \`\`\`\r
 */\r
declare function assocPath<T, U>(path: Path): Curry<(a: T, b: U) => U>\r
declare function assocPath<T, U>(path: Path, val: T): (obj: U) => U\r
declare function assocPath<T, U>(\r
  __: Placeholder,\r
  val: T,\r
  obj: U\r
): (path: Path) => U\r
declare function assocPath<T, U>(\r
  path: Path,\r
  __: Placeholder,\r
  obj: U\r
): (val: T) => U\r
declare function assocPath<T, U>(path: Path, val: T, obj: U): U\r
\r
/**\r
 * Wraps a function of any arity (including nullary) in a function that accepts\r
 * exactly 2 parameters. Any extraneous parameters will not be passed to the\r
 * supplied function.\r
 *\r
 * See also {@link nAry}, {@link unary}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const takesThreeArgs = function(a, b, c) {\r
 *   return [a, b, c];\r
 * };\r
 * takesThreeArgs.length; //=> 3\r
 * takesThreeArgs(1, 2, 3); //=> [1, 2, 3]\r
 *\r
 * const takesTwoArgs = R.binary(takesThreeArgs);\r
 * takesTwoArgs.length; //=> 2\r
 * // Only 2 arguments are passed to the wrapped function\r
 * takesTwoArgs(1, 2, 3); //=> [1, 2, undefined]\r
 * \`\`\`\r
 */\r
declare function binary<T extends (...arg: any) => any>(\r
  fn: T\r
): (...arg: Take$1<Parameters<T>, 2>) => ReturnType<T>\r
\r
/**\r
 * Creates a function that is bound to a context.\r
 * Note: \`R.bind\` does not provide the additional argument-binding capabilities of\r
 * [Function.prototype.bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind).\r
 *\r
 * See also {@link partial}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const log = R.bind(console.log, console);\r
 * R.pipe(R.assoc('a', 2), R.tap(log), R.assoc('a', 3))({a: 1}); //=> {a: 3}\r
 * // logs {a: 2}\r
 * \`\`\`\r
 */\r
declare function bind<F extends (...args: readonly any[]) => any, T>(\r
  fn: F\r
): (thisObj: T) => (...args: Parameters<F>) => ReturnType<F>\r
declare function bind<F extends (...args: readonly any[]) => any, T>(\r
  fn: F,\r
  thisObj: T\r
): (...args: Parameters<F>) => ReturnType<F>\r
\r
/**\r
 * A function which calls the two provided functions and returns the \`&&\`\r
 * of the results.\r
 * It returns the result of the first function if it is false-y and the result\r
 * of the second function otherwise. Note that this is short-circuited,\r
 * meaning that the second function will not be invoked if the first returns a\r
 * false-y value.\r
 *\r
 * In addition to functions, \`R.both\` also accepts any fantasy-land compatible\r
 * applicative functor.\r
 *\r
 * See also {@link either}, {@link allPass}, {@link and}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const gt10 = R.gt(R.__, 10)\r
 * const lt20 = R.lt(R.__, 20)\r
 * const f = R.both(gt10, lt20);\r
 * f(15); //=> true\r
 * f(30); //=> false\r
 *\r
 * R.both(Maybe.Just(false), Maybe.Just(55)); // => Maybe.Just(false)\r
 * R.both([false, false, 'a'], [11]); //=> [false, false, 11]\r
 * \`\`\`\r
 */\r
declare function both<T, RT1 extends T>(\r
  f: (a: T) => a is RT1\r
): <RT2 extends T>(g: (a: T) => a is RT2) => (a: T) => a is RT1 & RT2\r
declare function both<Args extends any[]>(\r
  f: (...args: Args) => boolean\r
): (g: (...args: Args) => boolean) => (...args: Args) => boolean\r
// both(f, g) => (x: T) => boolean\r
declare function both<T, RT1 extends T, RT2 extends T>(\r
  f: (a: T) => a is RT1,\r
  g: (a: T) => a is RT2\r
): (a: T) => a is RT1 & RT2\r
declare function both<Args extends any[]>(\r
  f: (...args: Args) => boolean,\r
  g: (...args: Args) => boolean\r
): (...args: Args) => boolean\r
\r
/**\r
 * Returns the result of calling its first argument with the remaining\r
 * arguments. This is occasionally useful as a converging function for\r
 * [\`R.converge\`](#converge): the first branch can produce a function while the\r
 * remaining branches produce values to be passed to that function as its\r
 * arguments.\r
 *\r
 * See also {@link apply}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.call(R.add, 1, 2); //=> 3\r
 *\r
 * const indentN = R.pipe(\r
 *   R.repeat(' '),\r
 *   R.join(''),\r
 *   R.replace(/^(?!$)/gm)\r
 * );\r
 *\r
 * const format = R.converge(\r
 *   R.call,\r
 *   [\r
 *     R.pipe(R.prop('indent'), indentN),\r
 *     R.prop('value')\r
 *   ]\r
 * );\r
 *\r
 * format({indent: 2, value: 'foo\\nbar\\nbaz\\n'}); //=> '  foo\\n  bar\\n  baz\\n'\r
 * \`\`\`\r
 */\r
declare function call<T extends (...args: readonly any[]) => any>(\r
  fn: T,\r
  ...args: Parameters<T>\r
): ReturnType<T>\r
\r
/**\r
 * \`chain\` maps a function over a list and concatenates the results. \`chain\`\r
 * is also known as \`flatMap\` in some libraries.\r
 *\r
 * Dispatches to the \`chain\` method of the second argument, if present,\r
 * according to the [FantasyLand Chain spec](https://github.com/fantasyland/fantasy-land#chain).\r
 *\r
 * If second argument is a function, \`chain(f, g)(x)\` is equivalent to \`f(g(x), x)\`.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const duplicate = n => [n, n];\r
 * R.chain(duplicate, [1, 2, 3]); //=> [1, 1, 2, 2, 3, 3]\r
 *\r
 * R.chain(R.append, R.head)([1, 2, 3]); //=> [1, 2, 3, 1]\r
 * \`\`\`\r
 */\r
declare function chain<A, B>(\r
  fn: (n: A) => readonly B[],\r
  list: readonly A[]\r
): B[]\r
// chain(fn)(list)\r
declare function chain<A, B>(\r
  fn: (n: A) => readonly B[]\r
): (list: readonly A[]) => B[]\r
\r
// chain(fn, monad)\r
declare function chain<A, Ma extends { chain: (fn: (a: A) => Mb) => Mb }, Mb>(\r
  fn: (a: A) => Mb,\r
  monad: Ma\r
): Mb\r
// chain(fn)(monad)\r
declare function chain<A, Ma extends { chain: (fn: (a: A) => Mb) => Mb }, Mb>(\r
  fn: (a: A) => Mb\r
): (monad: Ma) => Mb\r
\r
// chain (f, g)(x)\r
declare function chain<A, B, R>(\r
  aToMb: (a: A, r: R) => B,\r
  Ma: (r: R) => A\r
): (r: R) => B\r
// chain (f)(g)(x)\r
declare function chain<A, B, R>(\r
  aToMb: (a: A, r: R) => B\r
): (Ma: (r: R) => A) => (r: R) => B\r
\r
// TODO: types for transducer variation\r
\r
/**\r
 * Restricts a number to be within a range.\r
 *\r
 * Also works for other ordered types such as Strings and Dates.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.clamp(1, 10, -5) // => 1\r
 * R.clamp(1, 10, 15) // => 10\r
 * R.clamp(1, 10, 4)  // => 4\r
 * \`\`\`\r
 */\r
declare function clamp<T>(min: T): {\r
  (max: T): (value: T) => T\r
  (max: T, value: T): T\r
}\r
declare function clamp<T>(min: T, max: T): (value: T) => T\r
declare function clamp<T>(min: T, max: T, value: T): T\r
\r
/**\r
 * Creates a deep copy of the source that can be used in place of the source\r
 * object without retaining any references to it.\r
 * The source object may contain (nested) \`Array\`s and \`Object\`s,\r
 * \`Number\`s, \`String\`s, \`Boolean\`s and \`Date\`s.\r
 * \`Function\`s are assigned by reference rather than copied.\r
 *\r
 * Dispatches to a \`clone\` method if present.\r
 *\r
 * Note that if the source object has multiple nodes that share a reference,\r
 * the returned object will have the same structure, but the references will\r
 * be pointed to the location within the cloned value.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const objects = [{}, {}, {}];\r
 * const objectsClone = R.clone(objects);\r
 * objects === objectsClone; //=> false\r
 * objects[0] === objectsClone[0]; //=> false\r
 * \`\`\`\r
 */\r
declare function clone<T>(value: readonly T[]): T[]\r
declare function clone<T>(value: T): T\r
\r
/**\r
 * Splits a list into sub-lists, based on the result of calling a key-returning function on each element,\r
 * and grouping the results according to values returned.\r
 *\r
 * See also {@link groupBy}, {@link partition}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.collectBy(R.prop('type'), [\r
 *   {type: 'breakfast', item: '☕️'},\r
 *   {type: 'lunch', item: '🌯'},\r
 *   {type: 'dinner', item: '🍝'},\r
 *   {type: 'breakfast', item: '🥐'},\r
 *   {type: 'lunch', item: '🍕'}\r
 * ]);\r
 *\r
 * // [ [ {type: 'breakfast', item: '☕️'},\r
 * //     {type: 'breakfast', item: '🥐'} ],\r
 * //   [ {type: 'lunch', item: '🌯'},\r
 * //     {type: 'lunch', item: '🍕'} ],\r
 * //   [ {type: 'dinner', item: '🍝'} ] ]\r
 * \`\`\`\r
 */\r
declare function collectBy<T, K extends PropertyKey>(\r
  keyFn: (value: T) => K\r
): (list: readonly T[]) => T[][]\r
declare function collectBy<T, K extends PropertyKey>(\r
  keyFn: (value: T) => K,\r
  list: readonly T[]\r
): T[][]\r
\r
/**\r
 * Makes a comparator function out of a function that reports whether the first\r
 * element is less than the second.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const byAge = R.comparator((a, b) => a.age < b.age);\r
 * const people = [\r
 *   { name: 'Emma', age: 70 },\r
 *   { name: 'Peter', age: 78 },\r
 *   { name: 'Mikhail', age: 62 },\r
 * ];\r
 * const peopleByIncreasingAge = R.sort(byAge, people);\r
 *   //=> [{ name: 'Mikhail', age: 62 },{ name: 'Emma', age: 70 }, { name: 'Peter', age: 78 }]\r
 * \`\`\`\r
 */\r
declare function comparator<T>(\r
  pred: (a: T, b: T) => boolean\r
): (x: T, y: T) => Ordering\r
\r
/**\r
 * Takes a function \`f\` and returns a function \`g\` such that if called with the same arguments\r
 * when \`f\` returns a "truthy" value, \`g\` returns \`false\` and when \`f\` returns a "falsy" value \`g\` returns \`true\`.\r
 *\r
 * \`R.complement\` may be applied to any functor\r
 *\r
 * See also {@link not}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const isNotNil = R.complement(R.isNil);\r
 * R.isNil(null); //=> true\r
 * isNotNil(null); //=> false\r
 * R.isNil(7); //=> false\r
 * isNotNil(7); //=> true\r
 * \`\`\`\r
 */\r
declare function complement<T, TFiltered extends T>(\r
  pred: (value: T) => value is TFiltered\r
): (value: T) => value is Exclude<T, TFiltered>\r
declare function complement<TArgs extends any[]>(\r
  pred: (...args: TArgs) => unknown\r
): (...args: TArgs) => boolean\r
\r
/**\r
 * Performs right-to-left function composition. The last argument may have\r
 * any arity; the remaining arguments must be unary.\r
 *\r
 * **Note:** The result of compose is not automatically curried.\r
 *\r
 * See also {@link pipe}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const classyGreeting = (firstName, lastName) => "The name's " + lastName + ", " + firstName + " " + lastName\r
 * const yellGreeting = R.compose(R.toUpper, classyGreeting);\r
 * yellGreeting('James', 'Bond'); //=> "THE NAME'S BOND, JAMES BOND"\r
 *\r
 * R.compose(Math.abs, R.add(1), R.multiply(2))(-4) //=> 7\r
 * \`\`\`\r
 */\r
declare function compose<\r
  TArgs extends any[],\r
  R1,\r
  R2,\r
  R3,\r
  R4,\r
  R5,\r
  R6,\r
  R7,\r
  TResult\r
>(\r
  ...func: [\r
    fnLast: (a: any) => TResult,\r
    ...func: Array<(a: any) => any>,\r
    f7: (a: R6) => R7,\r
    f6: (a: R5) => R6,\r
    f5: (a: R4) => R5,\r
    f4: (a: R3) => R4,\r
    f3: (a: R2) => R3,\r
    f2: (a: R1) => R2,\r
    f1: (...args: TArgs) => R1\r
  ]\r
): (...args: TArgs) => TResult\r
// fallback overload if number of composed functions greater than 7\r
declare function compose<TArgs extends any[], R1, R2, R3, R4, R5, R6, R7>(\r
  f7: (a: R6) => R7,\r
  f6: (a: R5) => R6,\r
  f5: (a: R4) => R5,\r
  f4: (a: R3) => R4,\r
  f3: (a: R2) => R3,\r
  f2: (a: R1) => R2,\r
  f1: (...args: TArgs) => R1\r
): (...args: TArgs) => R7\r
declare function compose<TArgs extends any[], R1, R2, R3, R4, R5, R6, R7>(\r
  f7: (a: R6) => R7,\r
  f6: (a: R5) => R6,\r
  f5: (a: R4) => R5,\r
  f4: (a: R3) => R4,\r
  f3: (a: R2) => R3,\r
  f2: (a: R1) => R2,\r
  f1: (...args: TArgs) => R1\r
): (...args: TArgs) => R7\r
declare function compose<TArgs extends any[], R1, R2, R3, R4, R5, R6>(\r
  f6: (a: R5) => R6,\r
  f5: (a: R4) => R5,\r
  f4: (a: R3) => R4,\r
  f3: (a: R2) => R3,\r
  f2: (a: R1) => R2,\r
  f1: (...args: TArgs) => R1\r
): (...args: TArgs) => R6\r
declare function compose<TArgs extends any[], R1, R2, R3, R4, R5>(\r
  f5: (a: R4) => R5,\r
  f4: (a: R3) => R4,\r
  f3: (a: R2) => R3,\r
  f2: (a: R1) => R2,\r
  f1: (...args: TArgs) => R1\r
): (...args: TArgs) => R5\r
declare function compose<TArgs extends any[], R1, R2, R3, R4>(\r
  f4: (a: R3) => R4,\r
  f3: (a: R2) => R3,\r
  f2: (a: R1) => R2,\r
  f1: (...args: TArgs) => R1\r
): (...args: TArgs) => R4\r
declare function compose<TArgs extends any[], R1, R2, R3>(\r
  f3: (a: R2) => R3,\r
  f2: (a: R1) => R2,\r
  f1: (...args: TArgs) => R1\r
): (...args: TArgs) => R3\r
declare function compose<TArgs extends any[], R1, R2>(\r
  f2: (a: R1) => R2,\r
  f1: (...args: TArgs) => R1\r
): (...args: TArgs) => R2\r
declare function compose<TArgs extends any[], R1>(\r
  f1: (...args: TArgs) => R1\r
): (...args: TArgs) => R1\r
\r
/**\r
 * Performs right-to-left function composition using transforming function. The last function may have\r
 * any arity; the remaining functions must be unary. Unlike \`compose\`, functions are passed in an array.\r
 *\r
 * **Note:** The result of composeWith is not automatically curried. Transforming function is not used\r
 * on the last argument.\r
 *\r
 * See also {@link compose}, {@link pipeWith}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const composeWhileNotNil = R.composeWith((f, res) => R.isNil(res) ? res : f(res));\r
 *\r
 * composeWhileNotNil([R.inc, R.prop('age')])({age: 1}) //=> 2\r
 * composeWhileNotNil([R.inc, R.prop('age')])({}) //=> undefined\r
 * \`\`\`\r
 */\r
declare function composeWith(\r
  transformer: (fn: (...args: any[]) => any, intermediatResult: any) => any\r
): <TArgs extends any[], TResult>(\r
  fns: AtLeastOneFunctionsFlowFromRightToLeft<TArgs, TResult>\r
) => (...args: TArgs) => TResult\r
declare function composeWith<TArgs extends any[], TResult>(\r
  transformer: (fn: (...args: any[]) => any, intermediatResult: any) => any,\r
  fns: AtLeastOneFunctionsFlowFromRightToLeft<TArgs, TResult>\r
): (...args: TArgs) => TResult\r
\r
/**\r
 * Returns the result of concatenating the given lists or strings.\r
 *\r
 * Note: \`R.concat\` expects both arguments to be of the same type,\r
 * unlike the native \`Array.prototype.concat\` method. It will throw\r
 * an error if you \`concat\` an Array with a non-Array value.\r
 *\r
 * Dispatches to the \`concat\` method of the first argument, if present.\r
 * Can also concatenate two members of a [fantasy-land\r
 * compatible semigroup](https://github.com/fantasyland/fantasy-land#semigroup).\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.concat('ABC', 'DEF'); // 'ABCDEF'\r
 * R.concat([4, 5, 6], [1, 2, 3]); //=> [4, 5, 6, 1, 2, 3]\r
 * R.concat([], []); //=> []\r
 * \`\`\`\r
 */\r
declare function concat<S1 extends string>(\r
  s1: S1\r
): <S2 extends string>(s2: S2) => string extends S1 | S2 ? string : \`\${S1}\${S2}\`\r
// concat(list)(list)\r
declare function concat<T>(list1: readonly T[]): (list2: readonly T[]) => T[]\r
// concat(__, string)(string)\r
declare function concat<S2 extends string>(\r
  __: Placeholder,\r
  s2: S2\r
): <S1 extends string>(s1: S1) => string extends S1 | S2 ? string : \`\${S1}\${S2}\`\r
// concat(__, list)(list)\r
declare function concat<T2>(\r
  __: Placeholder,\r
  list2: readonly T2[]\r
): <T1>(\r
  list1: readonly T2[] extends readonly T1[] ? readonly T1[] : never\r
) => T1[]\r
// concat(string, string)\r
declare function concat<S1 extends string, S2 extends string>(\r
  s1: S1,\r
  s2: S2\r
): string extends S1 | S2 ? string : \`\${S1}\${S2}\`\r
// concat(list, list)\r
// if you don't do 2 types here the single T will collapse list1 and list2 when you have tuples of the same type, which is incorrect behavior\r
declare function concat<T1, T2 extends T1>(\r
  list1: readonly T1[],\r
  list2: readonly T2[]\r
): T1[]\r
\r
/**\r
 * Returns a function, \`fn\`, which encapsulates \`if/else, if/else, ...\` logic.\r
 * \`R.cond\` takes a list of [predicate, transformer] pairs. All of the arguments\r
 * to \`fn\` are applied to each of the predicates in turn until one returns a\r
 * "truthy" value, at which point \`fn\` returns the result of applying its\r
 * arguments to the corresponding transformer. If none of the predicates\r
 * matches, \`fn\` returns undefined.\r
 *\r
 * **Please note**: This is not a direct substitute for a \`switch\` statement.\r
 * Remember that both elements of every pair passed to \`cond\` are *functions*,\r
 * and \`cond\` returns a function.\r
 *\r
 * See also {@link ifElse}, {@link unless}, {@link when}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const fn = R.cond([\r
 *   [R.equals(0),   R.always('water freezes at 0°C')],\r
 *   [R.equals(100), R.always('water boils at 100°C')],\r
 *   [R.T,           temp => 'nothing special happens at ' + temp + '°C']\r
 * ]);\r
 * fn(0); //=> 'water freezes at 0°C'\r
 * fn(50); //=> 'nothing special happens at 50°C'\r
 * fn(100); //=> 'water boils at 100°C'\r
 * \`\`\`\r
 */\r
declare function cond<T, TF1 extends T, R>(\r
  pairs: [CondPairTypeguard<T, TF1, R>]\r
): (value: T) => R\r
declare function cond<T, TF1 extends T, TF2 extends T, R>(\r
  pairs: [CondPairTypeguard<T, TF1, R>, CondPairTypeguard<T, TF2, R>]\r
): (value: T) => R\r
declare function cond<T, TF1 extends T, TF2 extends T, TF3 extends T, R>(\r
  pairs: [\r
    CondPairTypeguard<T, TF1, R>,\r
    CondPairTypeguard<T, TF2, R>,\r
    CondPairTypeguard<T, TF3, R>\r
  ]\r
): (value: T) => R\r
declare function cond<\r
  T,\r
  TF1 extends T,\r
  TF2 extends T,\r
  TF3 extends T,\r
  TF4 extends T,\r
  R\r
>(\r
  pairs: [\r
    CondPairTypeguard<T, TF1, R>,\r
    CondPairTypeguard<T, TF2, R>,\r
    CondPairTypeguard<T, TF3, R>,\r
    CondPairTypeguard<T, TF4, R>\r
  ]\r
): (value: T) => R\r
declare function cond<\r
  T,\r
  TF1 extends T,\r
  TF2 extends T,\r
  TF3 extends T,\r
  TF4 extends T,\r
  TF5 extends T,\r
  R\r
>(\r
  pairs: [\r
    CondPairTypeguard<T, TF1, R>,\r
    CondPairTypeguard<T, TF2, R>,\r
    CondPairTypeguard<T, TF3, R>,\r
    CondPairTypeguard<T, TF4, R>,\r
    CondPairTypeguard<T, TF5, R>\r
  ]\r
): (value: T) => R\r
declare function cond<\r
  T,\r
  TF1 extends T,\r
  TF2 extends T,\r
  TF3 extends T,\r
  TF4 extends T,\r
  TF5 extends T,\r
  TF6 extends T,\r
  R\r
>(\r
  pairs: [\r
    CondPairTypeguard<T, TF1, R>,\r
    CondPairTypeguard<T, TF2, R>,\r
    CondPairTypeguard<T, TF3, R>,\r
    CondPairTypeguard<T, TF4, R>,\r
    CondPairTypeguard<T, TF5, R>,\r
    CondPairTypeguard<T, TF6, R>\r
  ]\r
): (value: T) => R\r
declare function cond<\r
  T,\r
  TF1 extends T,\r
  TF2 extends T,\r
  TF3 extends T,\r
  TF4 extends T,\r
  TF5 extends T,\r
  TF6 extends T,\r
  TF7 extends T,\r
  R\r
>(\r
  pairs: [\r
    CondPairTypeguard<T, TF1, R>,\r
    CondPairTypeguard<T, TF2, R>,\r
    CondPairTypeguard<T, TF3, R>,\r
    CondPairTypeguard<T, TF4, R>,\r
    CondPairTypeguard<T, TF5, R>,\r
    CondPairTypeguard<T, TF6, R>,\r
    CondPairTypeguard<T, TF7, R>\r
  ]\r
): (value: T) => R\r
declare function cond<\r
  T,\r
  TF1 extends T,\r
  TF2 extends T,\r
  TF3 extends T,\r
  TF4 extends T,\r
  TF5 extends T,\r
  TF6 extends T,\r
  TF7 extends T,\r
  TF8 extends T,\r
  R\r
>(\r
  pairs: [\r
    CondPairTypeguard<T, TF1, R>,\r
    CondPairTypeguard<T, TF2, R>,\r
    CondPairTypeguard<T, TF3, R>,\r
    CondPairTypeguard<T, TF4, R>,\r
    CondPairTypeguard<T, TF5, R>,\r
    CondPairTypeguard<T, TF6, R>,\r
    CondPairTypeguard<T, TF7, R>,\r
    CondPairTypeguard<T, TF8, R>\r
  ]\r
): (value: T) => R\r
declare function cond<\r
  T,\r
  TF1 extends T,\r
  TF2 extends T,\r
  TF3 extends T,\r
  TF4 extends T,\r
  TF5 extends T,\r
  TF6 extends T,\r
  TF7 extends T,\r
  TF8 extends T,\r
  TF9 extends T,\r
  R\r
>(\r
  pairs: [\r
    CondPairTypeguard<T, TF1, R>,\r
    CondPairTypeguard<T, TF2, R>,\r
    CondPairTypeguard<T, TF3, R>,\r
    CondPairTypeguard<T, TF4, R>,\r
    CondPairTypeguard<T, TF5, R>,\r
    CondPairTypeguard<T, TF6, R>,\r
    CondPairTypeguard<T, TF7, R>,\r
    CondPairTypeguard<T, TF8, R>,\r
    CondPairTypeguard<T, TF9, R>\r
  ]\r
): (value: T) => R\r
declare function cond<\r
  T,\r
  TF1 extends T,\r
  TF2 extends T,\r
  TF3 extends T,\r
  TF4 extends T,\r
  TF5 extends T,\r
  TF6 extends T,\r
  TF7 extends T,\r
  TF8 extends T,\r
  TF9 extends T,\r
  TF10 extends T,\r
  R\r
>(\r
  pairs: [\r
    CondPairTypeguard<T, TF1, R>,\r
    CondPairTypeguard<T, TF2, R>,\r
    CondPairTypeguard<T, TF3, R>,\r
    CondPairTypeguard<T, TF4, R>,\r
    CondPairTypeguard<T, TF5, R>,\r
    CondPairTypeguard<T, TF6, R>,\r
    CondPairTypeguard<T, TF7, R>,\r
    CondPairTypeguard<T, TF8, R>,\r
    CondPairTypeguard<T, TF9, R>,\r
    CondPairTypeguard<T, TF10, R>\r
  ]\r
): (value: T) => R\r
declare function cond<T extends any[], R>(\r
  pairs: Array<CondPair<T, R>>\r
): (...args: T) => R\r
\r
/**\r
 * Wraps a constructor function inside a curried function that can be called\r
 * with the same arguments and returns the same type.\r
 *\r
 * See also {@link invoker}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * // Constructor function\r
 * function Animal(kind) {\r
 *   this.kind = kind;\r
 * };\r
 * Animal.prototype.sighting = function() {\r
 *   return "It's a " + this.kind + "!";\r
 * }\r
 *\r
 * const AnimalConstructor = R.construct(Animal)\r
 *\r
 * // Notice we no longer need the 'new' keyword:\r
 * AnimalConstructor('Pig'); //=> {"kind": "Pig", "sighting": function (){...}};\r
 *\r
 * const animalTypes = ["Lion", "Tiger", "Bear"];\r
 * const animalSighting = R.invoker(0, 'sighting');\r
 * const sightNewAnimal = R.compose(animalSighting, AnimalConstructor);\r
 * R.map(sightNewAnimal, animalTypes); //=> ["It's a Lion!", "It's a Tiger!", "It's a Bear!"]\r
 * \`\`\`\r
 */\r
declare function construct<A extends any[], T>(\r
  constructor: { new (...a: A): T } | ((...a: A) => T)\r
): Curry<(...a: A) => T>\r
\r
/**\r
 * Wraps a constructor function inside a curried function that can be called\r
 * with the same arguments and returns the same type. The arity of the function\r
 * returned is specified to allow using variadic constructor functions.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * // Variadic Constructor function\r
 * function Salad() {\r
 *   this.ingredients = arguments;\r
 * }\r
 *\r
 * Salad.prototype.recipe = function() {\r
 *   const instructions = R.map(ingredient => 'Add a dollop of ' + ingredient, this.ingredients);\r
 *   return R.join('\\n', instructions);\r
 * };\r
 *\r
 * const ThreeLayerSalad = R.constructN(3, Salad);\r
 *\r
 * // Notice we no longer need the 'new' keyword, and the constructor is curried for 3 arguments.\r
 * const salad = ThreeLayerSalad('Mayonnaise')('Potato Chips')('Ketchup');\r
 *\r
 * console.log(salad.recipe());\r
 * // Add a dollop of Mayonnaise\r
 * // Add a dollop of Potato Chips\r
 * // Add a dollop of Ketchup\r
 * \`\`\`\r
 */\r
declare function constructN<A extends any[], T, N extends number>(\r
  n: N,\r
  constructor: { new (...a: A): T } | ((...a: A) => T)\r
): Curry<(...a: mergeArrWithLeft<Tuple<any, N>, A>) => T>\r
\r
/**\r
 * Accepts a converging function and a list of branching functions and returns\r
 * a new function. The arity of the new function is the same as the arity of\r
 * the longest branching function. When invoked, this new function is applied\r
 * to some arguments, and each branching function is applied to those same\r
 * arguments. The results of each branching function are passed as arguments\r
 * to the converging function to produce the return value.\r
 *\r
 * See also {@link useWith}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const average = R.converge(R.divide, [R.sum, R.length])\r
 * average([1, 2, 3, 4, 5, 6, 7]) //=> 4\r
 *\r
 * const strangeConcat = R.converge(R.concat, [R.toUpper, R.toLower])\r
 * strangeConcat("Yodel") //=> "YODELyodel"\r
 * \`\`\`\r
 */\r
declare function converge<\r
  TResult,\r
  FunctionsList extends ReadonlyArray<Fn> &\r
    IfFunctionsArgumentsDoNotOverlap<\r
      _Fns,\r
      "Functions arguments types must overlap"\r
    >,\r
  _Fns extends ReadonlyArray<Fn> = FunctionsList\r
>(\r
  converging: (...args: ReturnTypesOfFns<FunctionsList>) => TResult,\r
  branches: FunctionsList\r
): Curry<(...args: LargestArgumentsList<FunctionsList>) => TResult>\r
declare function converge<\r
  CArgs extends ReadonlyArray<any>,\r
  TResult,\r
  FunctionsList extends readonly [\r
    ...{\r
      [Index in keyof CArgs]: (...args: ReadonlyArray<any>) => CArgs[Index]\r
    }\r
  ] &\r
    IfFunctionsArgumentsDoNotOverlap<\r
      _Fns,\r
      "Functions arguments types must overlap"\r
    >,\r
  _Fns extends ReadonlyArray<Fn> = FunctionsList\r
>(\r
  converging: (...args: CArgs) => TResult,\r
  branches: FunctionsList\r
): Curry<(...args: LargestArgumentsList<FunctionsList>) => TResult>\r
\r
/**\r
 * Returns the number of items in a given \`list\` matching the predicate \`f\`\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const even = x => x % 2 == 0;\r
 *\r
 * R.count(even, [1, 2, 3, 4, 5]); // => 2\r
 * R.map(R.count(even), [[1, 1, 1], [2, 3, 4, 5], [6]]); // => [0, 2, 1]\r
 * \`\`\`\r
 */\r
declare function count<T>(fn: (a: T) => boolean): (list: readonly T[]) => number\r
declare function count<T>(fn: (a: T) => boolean, list: readonly T[]): number\r
\r
/**\r
 * Counts the elements of a list according to how many match each value of a\r
 * key generated by the supplied function. Returns an object mapping the keys\r
 * produced by \`fn\` to the number of occurrences in the list. Note that all\r
 * keys are coerced to strings because of how JavaScript objects work.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const numbers = [1.0, 1.1, 1.2, 2.0, 3.0, 2.2];\r
 * R.countBy(Math.floor)(numbers);    //=> {'1': 3, '2': 2, '3': 1}\r
 *\r
 * const letters = ['a', 'b', 'A', 'a', 'B', 'c'];\r
 * R.countBy(R.toLower)(letters);   //=> {'a': 3, 'b': 2, 'c': 1}\r
 * \`\`\`\r
 */\r
declare function countBy<T>(\r
  fn: (a: T) => string | number\r
): (list: readonly T[]) => { [index: string]: number }\r
declare function countBy<T>(\r
  fn: (a: T) => string | number,\r
  list: readonly T[]\r
): { [index: string]: number }\r
\r
/**\r
 * Returns a curried equivalent of the provided function. The curried function\r
 * has two unusual capabilities. First, its arguments needn't be provided one\r
 * at a time. If \`f\` is a ternary function and \`g\` is \`R.curry(f)\`, the\r
 * following are equivalent:\r
 *\r
 *   - \`g(1)(2)(3)\`\r
 *   - \`g(1)(2, 3)\`\r
 *   - \`g(1, 2)(3)\`\r
 *   - \`g(1, 2, 3)\`\r
 *\r
 * Secondly, the special placeholder value [\`R.__\`](#__) may be used to specify\r
 * "gaps", allowing partial application of any combination of arguments,\r
 * regardless of their positions. If \`g\` is as above and \`_\` is [\`R.__\`](#__),\r
 * the following are equivalent:\r
 *\r
 *   - \`g(1, 2, 3)\`\r
 *   - \`g(_, 2, 3)(1)\`\r
 *   - \`g(_, _, 3)(1)(2)\`\r
 *   - \`g(_, _, 3)(1, 2)\`\r
 *   - \`g(_, 2)(1)(3)\`\r
 *   - \`g(_, 2)(1, 3)\`\r
 *   - \`g(_, 2)(_, 3)(1)\`\r
 *\r
 * Please note that default parameters don't count towards a [function arity](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/length)\r
 * and therefore \`curry\` won't work well with those:\r
 *\r
 * \`\`\`\r
 * const h = R.curry((a, b, c = 2) => a + b + c);\r
 *\r
 * h(40);\r
 * //=> function (waits for \`b\`)\r
 *\r
 * h(39)(1);\r
 * //=> 42\r
 *\r
 * h(1)(2, 3);\r
 * //=> 6\r
 *\r
 * h(1)(2)(7);\r
 * //=> Error! (\`3\` is not a function!)\r
 * \`\`\`\r
 *\r
 * See also {@link curryN}, {@link partial}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const addFourNumbers = (a, b, c, d) => a + b + c + d;\r
 *\r
 * const curriedAddFourNumbers = R.curry(addFourNumbers);\r
 * const f = curriedAddFourNumbers(1, 2);\r
 * const g = f(3);\r
 * g(4); //=> 10\r
 * \`\`\`\r
 */\r
declare function curry<F extends (...args: any) => any>(f: F): Curry<F>\r
\r
/**\r
 * Returns a curried equivalent of the provided function, with the specified\r
 * arity. The curried function has two unusual capabilities. First, its\r
 * arguments needn't be provided one at a time. If \`g\` is \`R.curryN(3, f)\`, the\r
 * following are equivalent:\r
 *\r
 *   - \`g(1)(2)(3)\`\r
 *   - \`g(1)(2, 3)\`\r
 *   - \`g(1, 2)(3)\`\r
 *   - \`g(1, 2, 3)\`\r
 *\r
 * Secondly, the special placeholder value [\`R.__\`](#__) may be used to specify\r
 * "gaps", allowing partial application of any combination of arguments,\r
 * regardless of their positions. If \`g\` is as above and \`_\` is [\`R.__\`](#__),\r
 * the following are equivalent:\r
 *\r
 *   - \`g(1, 2, 3)\`\r
 *   - \`g(_, 2, 3)(1)\`\r
 *   - \`g(_, _, 3)(1)(2)\`\r
 *   - \`g(_, _, 3)(1, 2)\`\r
 *   - \`g(_, 2)(1)(3)\`\r
 *   - \`g(_, 2)(1, 3)\`\r
 *   - \`g(_, 2)(_, 3)(1)\`\r
 *\r
 * See also {@link curry}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const sumArgs = (...args) => R.sum(args);\r
 *\r
 * const curriedAddFourNumbers = R.curryN(4, sumArgs);\r
 * const f = curriedAddFourNumbers(1, 2);\r
 * const g = f(3);\r
 * g(4); //=> 10\r
 * \`\`\`\r
 */\r
declare function curryN<N extends number>(\r
  length: N\r
): <F extends (...args: any) => any>(\r
  fn: F\r
) => Curry<(...a: Take$1<Parameters<F>, N>) => ReturnType<F>>\r
declare function curryN<N extends number, F extends (...args: any) => any>(\r
  length: N,\r
  fn: F\r
): Curry<(...a: Take$1<Parameters<F>, N>) => ReturnType<F>>\r
\r
/**\r
 * Decrements its argument.\r
 *\r
 * See also {@link inc}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.dec(42); //=> 41\r
 * \`\`\`\r
 */\r
declare function dec(n: number): number\r
\r
/**\r
 * Returns the second argument if it is not \`null\`, \`undefined\` or \`NaN\`;\r
 * otherwise the first argument is returned.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const defaultTo42 = R.defaultTo(42);\r
 *\r
 * defaultTo42(null);  //=> 42\r
 * defaultTo42(undefined);  //=> 42\r
 * defaultTo42(false);  //=> false\r
 * defaultTo42('Ramda');  //=> 'Ramda'\r
 * // parseInt('string') results in NaN\r
 * defaultTo42(parseInt('string')); //=> 42\r
 * \`\`\`\r
 */\r
declare function defaultTo<Fallback>(\r
  a: Fallback\r
): <Value>(b: Value) => DefaultTo<Fallback, Value>\r
declare function defaultTo<Value>(\r
  __: Placeholder,\r
  b: Value\r
): <Fallback>(a: Fallback) => DefaultTo<Fallback, Value>\r
declare function defaultTo<Fallback, Value>(\r
  a: Fallback,\r
  b: Value\r
): DefaultTo<Fallback, Value>\r
\r
/**\r
 * Makes a descending comparator function out of a function that returns a value\r
 * that can be compared with \`<\` and \`>\`.\r
 *\r
 * See also {@link ascend}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const byAge = R.descend(R.prop('age'));\r
 * const people = [\r
 *   { name: 'Emma', age: 70 },\r
 *   { name: 'Peter', age: 78 },\r
 *   { name: 'Mikhail', age: 62 },\r
 * ];\r
 * const peopleByOldestFirst = R.sort(byAge, people);\r
 *   //=> [{ name: 'Peter', age: 78 }, { name: 'Emma', age: 70 }, { name: 'Mikhail', age: 62 }]\r
 * \`\`\`\r
 */\r
declare function descend<T>(fn: (obj: T) => Ord): (a: T, b: T) => Ordering\r
declare function descend<T>(fn: (obj: T) => Ord, a: T, b: T): Ordering\r
\r
/**\r
 * Finds the set (i.e. no duplicates) of all elements in the first list not\r
 * contained in the second list. Objects and Arrays are compared in terms of\r
 * value equality, not reference equality.\r
 *\r
 * See also {@link differenceWith}, {@link symmetricDifference}, {@link symmetricDifferenceWith}, {@link without}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.difference([1,2,3,4], [7,6,5,4,3]); //=> [1,2]\r
 * R.difference([7,6,5,4,3], [1,2,3,4]); //=> [7,6,5]\r
 * R.difference([{a: 1}, {b: 2}], [{a: 1}, {c: 3}]) //=> [{b: 2}]\r
 * \`\`\`\r
 */\r
declare function difference<T>(\r
  list1: readonly T[]\r
): (list2: readonly T[]) => T[]\r
declare function difference<T>(list1: readonly T[], list2: readonly T[]): T[]\r
\r
/**\r
 * Finds the set (i.e. no duplicates) of all elements in the first list not\r
 * contained in the second list. Duplication is determined according to the\r
 * value returned by applying the supplied predicate to two list elements.\r
 *\r
 * See also {@link difference}, {@link symmetricDifference}, {@link symmetricDifferenceWith}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const cmp = (x, y) => x.a === y.a;\r
 * const l1 = [{a: 1}, {a: 2}, {a: 3}];\r
 * const l2 = [{a: 3}, {a: 4}];\r
 * R.differenceWith(cmp, l1, l2); //=> [{a: 1}, {a: 2}]\r
 *\r
 * R.differenceWith(R.equals, [1, 2, 3, 3, 3], []); //=> [1, 2, 3]\r
 * R.differenceWith(R.equals, [1, 2, 3, 3, 3], [1]); //=> [2, 3]\r
 * \`\`\`\r
 */\r
declare function differenceWith<T1, T2>(\r
  pred: (a: T1, b: T2) => boolean\r
): (list1: readonly T1[], list2: readonly T2[]) => T1[]\r
declare function differenceWith<T1, T2>(\r
  pred: (a: T1, b: T2) => boolean,\r
  list1: readonly T1[]\r
): (list2: readonly T2[]) => T1[]\r
declare function differenceWith<T1, T2>(\r
  pred: (a: T1, b: T2) => boolean,\r
  list1: readonly T1[],\r
  list2: readonly T2[]\r
): T1[]\r
\r
/**\r
 * Returns a new object that does not contain a \`prop\` property.\r
 *\r
 * See also {@link assoc}, {@link omit}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.dissoc('b', {a: 1, b: 2, c: 3}); //=> {a: 1, c: 3}\r
 * \`\`\`\r
 */\r
declare function dissoc<K extends string | number>(\r
  prop: K\r
): <T extends object>(obj: T) => Omit<T, K>\r
declare function dissoc<T extends object, K extends keyof T>(\r
  prop: K,\r
  obj: T\r
): Omit<T, K>\r
\r
/**\r
 * Makes a shallow clone of an object. Note that this copies and flattens\r
 * prototype properties onto the new object as well. All non-primitive\r
 * properties are copied by reference.\r
 */\r
declare function dissocPath<T>(path: Path): (obj: any) => T\r
declare function dissocPath<T>(path: Path, obj: any): T\r
\r
/**\r
 * Divides two numbers. Equivalent to \`a / b\`.\r
 *\r
 * See also {@link multiply}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.divide(71, 100); //=> 0.71\r
 *\r
 * const half = R.divide(R.__, 2);\r
 * half(42); //=> 21\r
 *\r
 * const reciprocal = R.divide(1);\r
 * reciprocal(4);   //=> 0.25\r
 * \`\`\`\r
 */\r
declare function divide(a: number): (b: number) => number\r
declare function divide(__: Placeholder, b: number): (a: number) => number\r
declare function divide(a: number, b: number): number\r
\r
/**\r
 * Returns all but the first \`n\` elements of the given list, string, or\r
 * transducer/transformer (or object with a \`drop\` method).\r
 *\r
 * Dispatches to the \`drop\` method of the second argument, if present.\r
 *\r
 * See also {@link take}, {@link transduce}, {@link dropLast}, {@link dropWhile}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.drop(1, ['foo', 'bar', 'baz']); //=> ['bar', 'baz']\r
 * R.drop(2, ['foo', 'bar', 'baz']); //=> ['baz']\r
 * R.drop(3, ['foo', 'bar', 'baz']); //=> []\r
 * R.drop(4, ['foo', 'bar', 'baz']); //=> []\r
 * R.drop(3, 'ramda');               //=> 'da'\r
 * \`\`\`\r
 */\r
declare function drop<T>(n: number): {\r
  (xs: string): string\r
  (xs: readonly T[]): T[]\r
}\r
declare function drop(n: number, xs: string): string\r
declare function drop<T>(n: number, xs: readonly T[]): T[]\r
\r
/**\r
 * Returns a list containing all but the last \`n\` elements of the given \`list\`.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link takeLast}, {@link drop}, {@link dropWhile}, {@link dropLastWhile}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.dropLast(1, ['foo', 'bar', 'baz']); //=> ['foo', 'bar']\r
 * R.dropLast(2, ['foo', 'bar', 'baz']); //=> ['foo']\r
 * R.dropLast(3, ['foo', 'bar', 'baz']); //=> []\r
 * R.dropLast(4, ['foo', 'bar', 'baz']); //=> []\r
 * R.dropLast(3, 'ramda');               //=> 'ra'\r
 * \`\`\`\r
 */\r
declare function dropLast<T>(n: number): {\r
  (xs: string): string\r
  (xs: readonly T[]): T[]\r
}\r
declare function dropLast<T>(n: number, xs: readonly T[]): T[]\r
declare function dropLast(n: number, xs: string): string\r
\r
/**\r
 * Returns a new list excluding all the tailing elements of a given list which\r
 * satisfy the supplied predicate function. It passes each value from the right\r
 * to the supplied predicate function, skipping elements until the predicate\r
 * function returns a \`falsy\` value. The predicate function is applied to one argument:\r
 * *(value)*.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link takeLastWhile}, {@link addIndex}, {@link drop}, {@link dropWhile}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const lteThree = x => x <= 3;\r
 *\r
 * R.dropLastWhile(lteThree, [1, 2, 3, 4, 3, 2, 1]); //=> [1, 2, 3, 4]\r
 *\r
 * R.dropLastWhile(x => x !== 'd' , 'Ramda'); //=> 'Ramd'\r
 * \`\`\`\r
 */\r
declare function dropLastWhile<T>(\r
  fn: (a: T) => boolean\r
): (list: readonly T[]) => T[]\r
declare function dropLastWhile<T>(\r
  fn: (a: T) => boolean,\r
  list: readonly T[]\r
): T[]\r
\r
/**\r
 * Returns a new list without any consecutively repeating elements.\r
 * [\`R.equals\`](#equals) is used to determine equality.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link transduce}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.dropRepeats([1, 1, 1, 2, 3, 4, 4, 2, 2]); //=> [1, 2, 3, 4, 2]\r
 * \`\`\`\r
 */\r
declare function dropRepeats<T>(list: readonly T[]): T[]\r
\r
/**\r
 * Returns a new list without any consecutively repeating elements,\r
 * based upon the value returned by applying the supplied function to\r
 * each list element. [\`R.equals\`](#equals) is used to determine equality.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link transduce}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.dropRepeatsBy(Math.abs, [1, -1, -1, 2, 3, -4, 4, 2, 2]); //=> [1, 2, 3, -4, 2]\r
 * \`\`\`\r
 */\r
declare function dropRepeatsBy<T, U>(\r
  fn: (a: T) => U\r
): (list: readonly T[]) => T[]\r
declare function dropRepeatsBy<T, U>(fn: (a: T) => U, list: readonly T[]): T[]\r
\r
/**\r
 * Returns a new list without any consecutively repeating elements. Equality is\r
 * determined by applying the supplied predicate to each pair of consecutive elements. The\r
 * first element in a series of equal elements will be preserved.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link transduce}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const l = [1, -1, 1, 3, 4, -4, -4, -5, 5, 3, 3];\r
 * R.dropRepeatsWith(R.eqBy(Math.abs), l); //=> [1, 3, 4, -5, 3]\r
 * \`\`\`\r
 */\r
declare function dropRepeatsWith<T>(\r
  predicate: (left: T, right: T) => boolean\r
): (list: readonly T[]) => T[]\r
declare function dropRepeatsWith<T>(\r
  predicate: (left: T, right: T) => boolean,\r
  list: readonly T[]\r
): T[]\r
\r
/**\r
 * Returns a new list excluding the leading elements of a given list which\r
 * satisfy the supplied predicate function. It passes each value to the supplied\r
 * predicate function, skipping elements while the predicate function returns\r
 * \`true\`. The predicate function is applied to one argument: *(value)*.\r
 *\r
 * Dispatches to the \`dropWhile\` method of the second argument, if present.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link takeWhile}, {@link transduce}, {@link addIndex}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const lteTwo = x => x <= 2;\r
 *\r
 * R.dropWhile(lteTwo, [1, 2, 3, 4, 3, 2, 1]); //=> [3, 4, 3, 2, 1]\r
 *\r
 * R.dropWhile(x => x !== 'd' , 'Ramda'); //=> 'da'\r
 * \`\`\`\r
 */\r
declare function dropWhile<T>(\r
  fn: (a: T) => boolean\r
): (list: readonly T[]) => T[]\r
declare function dropWhile<T>(fn: (a: T) => boolean, list: readonly T[]): T[]\r
\r
/**\r
 * A function wrapping calls to the two functions in an \`||\` operation,\r
 * returning the result of the first function if it is truth-y and the result\r
 * of the second function otherwise. Note that this is short-circuited,\r
 * meaning that the second function will not be invoked if the first returns a\r
 * truth-y value.\r
 *\r
 * In addition to functions, \`R.either\` also accepts any fantasy-land compatible\r
 * applicative functor.\r
 *\r
 * See also {@link both}, {@link anyPass}, {@link or}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const gt10 = x => x > 10;\r
 * const even = x => x % 2 === 0;\r
 * const f = R.either(gt10, even);\r
 * f(101); //=> true\r
 * f(8); //=> true\r
 *\r
 * R.either(Maybe.Just(false), Maybe.Just(55)); // => Maybe.Just(55)\r
 * R.either([false, false, 'a'], [11]) // => [11, 11, "a"]\r
 * \`\`\`\r
 */\r
declare function either<Fn extends (...args: any[]) => boolean>(\r
  f: Fn\r
): (g: Fn) => Fn\r
declare function either<Fn extends (...args: any[]) => boolean>(\r
  f: Fn,\r
  g: Fn\r
): Fn\r
\r
/**\r
 * Returns the empty value of its argument's type. Ramda defines the empty\r
 * value of Array (\`[]\`), Object (\`{}\`), String (\`''\`),\r
 * TypedArray (\`Uint8Array []\`, \`Float32Array []\`, etc), and Arguments. Other\r
 * types are supported if they define \`<Type>.empty\`,\r
 * \`<Type>.prototype.empty\` or implement the\r
 * [FantasyLand Monoid spec](https://github.com/fantasyland/fantasy-land#monoid).\r
 *\r
 * Dispatches to the \`empty\` method of the first argument, if present.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.empty(Just(42));               //=> Nothing()\r
 * R.empty([1, 2, 3]);              //=> []\r
 * R.empty('unicorns');             //=> ''\r
 * R.empty({x: 1, y: 2});           //=> {}\r
 * R.empty(Uint8Array.from('123')); //=> Uint8Array []\r
 * \`\`\`\r
 */\r
declare function empty<T>(x: T): T\r
\r
/**\r
 * Checks if a list ends with the provided sublist.\r
 *\r
 * Similarly, checks if a string ends with the provided substring.\r
 *\r
 * See also {@link startsWith}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.endsWith('c', 'abc')                //=> true\r
 * R.endsWith('b', 'abc')                //=> false\r
 * R.endsWith(['c'], ['a', 'b', 'c'])    //=> true\r
 * R.endsWith(['b'], ['a', 'b', 'c'])    //=> false\r
 * \`\`\`\r
 */\r
declare function endsWith(substr: string): (str: string) => boolean\r
declare function endsWith<T>(\r
  subList: readonly T[]\r
): (list: readonly T[]) => boolean\r
declare function endsWith(substr: string, str: string): boolean\r
declare function endsWith<T>(subList: readonly T[], list: readonly T[]): boolean\r
\r
/**\r
 * Takes a function and two values in its domain and returns \`true\` if the\r
 * values map to the same value in the codomain; \`false\` otherwise.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.eqBy(Math.abs, 5, -5); //=> true\r
 * \`\`\`\r
 */\r
declare function eqBy<T>(fn: (a: T) => unknown): {\r
  (a: T): (b: T) => boolean\r
  (a: T, b: T): boolean\r
}\r
declare function eqBy<T>(fn: (a: T) => unknown, a: T): (b: T) => boolean\r
declare function eqBy<T>(fn: (a: T) => unknown, a: T, b: T): boolean\r
\r
/**\r
 * Reports whether two objects have the same value, in [\`R.equals\`](#equals)\r
 * terms, for the specified property. Useful as a curried predicate.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const o1 = { a: 1, b: 2, c: 3, d: 4 };\r
 * const o2 = { a: 10, b: 20, c: 3, d: 40 };\r
 * R.eqProps('a', o1, o2); //=> false\r
 * R.eqProps('c', o1, o2); //=> true\r
 * \`\`\`\r
 */\r
declare function eqProps<P extends string>(\r
  prop: P\r
): <T, U>(obj1: Record<P, T>, obj2: Record<P, U>) => boolean\r
declare function eqProps<T>(prop: string, obj1: T): <U>(obj2: U) => boolean\r
declare function eqProps<T, U>(prop: string, obj1: T, obj2: U): boolean\r
\r
/**\r
 * Returns \`true\` if its arguments are equivalent, \`false\` otherwise. Handles\r
 * cyclical data structures.\r
 *\r
 * Dispatches symmetrically to the \`equals\` methods of both arguments, if\r
 * present.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.equals(1, 1); //=> true\r
 * R.equals(1, '1'); //=> false\r
 * R.equals([1, 2, 3], [1, 2, 3]); //=> true\r
 *\r
 * const a = {}; a.v = a;\r
 * const b = {}; b.v = b;\r
 * R.equals(a, b); //=> true\r
 * \`\`\`\r
 */\r
declare function equals<T>(a: T): (b: T) => boolean\r
declare function equals<T>(__: Placeholder, b: T): (a: T) => boolean\r
declare function equals<T>(a: T, b: T): boolean\r
\r
/**\r
 * Creates a new object by recursively evolving a shallow copy of \`object\`,\r
 * according to the \`transformation\` functions. All non-primitive properties\r
 * are copied by reference.\r
 *\r
 * A \`transformation\` function will not be invoked if its corresponding key\r
 * does not exist in the evolved object.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const tomato = {firstName: '  Tomato ', data: {elapsed: 100, remaining: 1400}, id:123};\r
 * const transformations = {\r
 *   firstName: R.trim,\r
 *   lastName: R.trim, // Will not get invoked.\r
 *   data: {elapsed: R.add(1), remaining: R.add(-1)}\r
 * };\r
 * R.evolve(transformations, tomato); //=> {firstName: 'Tomato', data: {elapsed: 101, remaining: 1399}, id:123}\r
 * \`\`\`\r
 */\r
declare function evolve<E extends Evolver>(\r
  transformations: E\r
): <V extends Evolvable<E>>(obj: V) => Evolve<V, E>\r
declare function evolve<E extends Evolver, V extends Evolvable<E>>(\r
  transformations: E,\r
  obj: V\r
): Evolve<V, E>\r
\r
/**\r
 * A function that always returns \`false\`. Any passed in parameters are ignored.\r
 *\r
 * See also {@link T}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.F(); //=> false\r
 * \`\`\`\r
 */\r
declare function F(...args: unknown[]): false\r
\r
/**\r
 * Takes a predicate and a \`Filterable\`, and returns a new filterable of the\r
 * same type containing the members of the given filterable which satisfy the\r
 * given predicate. Filterable objects include plain objects or any object\r
 * that has a filter method such as \`Array\`.\r
 *\r
 * Dispatches to the \`filter\` method of the second argument, if present.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link reject}, {@link transduce}, {@link addIndex}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const isEven = n => n % 2 === 0;\r
 *\r
 * R.filter(isEven, [1, 2, 3, 4]); //=> [2, 4]\r
 *\r
 * R.filter(isEven, {a: 1, b: 2, c: 3, d: 4}); //=> {b: 2, d: 4}\r
 * \`\`\`\r
 */\r
declare function filter<A, P extends A>(\r
  pred: (val: A) => val is P\r
): {\r
  <B extends A>(list: readonly B[]): P[]\r
  <B extends A>(dict: Record<string, B>): Record<string, P>\r
}\r
declare function filter<T>(\r
  pred: (value: T) => boolean\r
): <P extends T, C extends readonly P[] | Record<string, P>>(collection: C) => C\r
declare function filter<T, P extends T>(\r
  pred: (val: T) => val is P,\r
  list: readonly T[]\r
): P[]\r
declare function filter<T, P extends T>(\r
  pred: (val: T) => val is P,\r
  dict: Record<string, T>\r
): Record<string, P>\r
declare function filter<T, C extends readonly T[] | Record<string, T>>(\r
  pred: (value: T) => boolean,\r
  collection: C\r
): C\r
\r
/**\r
 * Returns the first element of the list which matches the predicate, or\r
 * \`undefined\` if no element matches.\r
 *\r
 * Dispatches to the \`find\` method of the second argument, if present.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link transduce}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const xs = [{a: 1}, {a: 2}, {a: 3}];\r
 * R.find(R.propEq('a', 2))(xs); //=> {a: 2}\r
 * R.find(R.propEq('a', 4))(xs); //=> undefined\r
 * \`\`\`\r
 */\r
declare function find<T, P extends T>(\r
  pred: (val: T) => val is P\r
): (list: readonly T[]) => P | undefined\r
declare function find<T>(\r
  pred: (val: T) => boolean\r
): (list: readonly T[]) => T | undefined\r
declare function find<T, P extends T>(\r
  pred: (val: T) => val is P,\r
  list: readonly T[]\r
): P | undefined\r
declare function find<T>(\r
  pred: (val: T) => boolean,\r
  list: readonly T[]\r
): T | undefined\r
\r
/**\r
 * Returns the index of the first element of the list which matches the\r
 * predicate, or \`-1\` if no element matches.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link transduce}, {@link indexOf}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const xs = [{a: 1}, {a: 2}, {a: 3}];\r
 * R.findIndex(R.propEq('a', 2))(xs); //=> 1\r
 * R.findIndex(R.propEq('a', 4))(xs); //=> -1\r
 * \`\`\`\r
 */\r
declare function findIndex<T>(\r
  fn: (a: T) => boolean\r
): (list: readonly T[]) => number\r
declare function findIndex<T>(fn: (a: T) => boolean, list: readonly T[]): number\r
\r
/**\r
 * Returns the last element of the list which matches the predicate, or\r
 * \`undefined\` if no element matches.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link transduce}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const xs = [{a: 1, b: 0}, {a:1, b: 1}];\r
 * R.findLast(R.propEq('a', 1))(xs); //=> {a: 1, b: 1}\r
 * R.findLast(R.propEq('a', 4))(xs); //=> undefined\r
 * \`\`\`\r
 */\r
declare function findLast<T, P extends T>(\r
  pred: (val: T) => val is P\r
): (list: readonly T[]) => P | undefined\r
declare function findLast<T>(\r
  pred: (val: T) => boolean\r
): (list: readonly T[]) => T | undefined\r
declare function findLast<T, P extends T>(\r
  pred: (val: T) => val is P,\r
  list: readonly T[]\r
): P | undefined\r
declare function findLast<T>(\r
  pred: (val: T) => boolean,\r
  list: readonly T[]\r
): T | undefined\r
\r
/**\r
 * Returns the index of the last element of the list which matches the\r
 * predicate, or \`-1\` if no element matches.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link transduce}, {@link lastIndexOf}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const xs = [{a: 1, b: 0}, {a:1, b: 1}];\r
 * R.findLastIndex(R.propEq('a', 1))(xs); //=> 1\r
 * R.findLastIndex(R.propEq('a', 4))(xs); //=> -1\r
 * \`\`\`\r
 */\r
declare function findLastIndex<T>(\r
  fn: (a: T) => boolean\r
): (list: readonly T[]) => number\r
declare function findLastIndex<T>(\r
  fn: (a: T) => boolean,\r
  list: readonly T[]\r
): number\r
\r
/**\r
 * Returns a new list by pulling every item out of it (and all its sub-arrays)\r
 * and putting them in a new array, depth-first.\r
 *\r
 * See also {@link unnest}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.flatten([1, 2, [3, 4], 5, [6, [7, 8, [9, [10, 11], 12]]]]);\r
 * //=> [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]\r
 * \`\`\`\r
 */\r
declare function flatten<T extends readonly any[]>(list: T): Flatten<T>\r
\r
/**\r
 * Returns a new function much like the supplied one, except that the first two\r
 * arguments' order is reversed.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const mergeThree = (a, b, c) => [].concat(a, b, c);\r
 *\r
 * mergeThree(1, 2, 3); //=> [1, 2, 3]\r
 *\r
 * R.flip(mergeThree)(1, 2, 3); //=> [2, 1, 3]\r
 * \`\`\`\r
 */\r
declare function flip<T, U, TResult>(\r
  fn: (arg0: T, arg1: U) => TResult\r
): {\r
  (arg1: U): (arg0: T) => TResult\r
  (arg1: U, arg0: T): TResult\r
}\r
declare function flip<\r
  F extends (...args: any) => any,\r
  P extends Parameters$1<F>\r
>(fn: F): Curry<(...args: Merge<[P[1], P[0]], P>) => Return<F>>\r
\r
/**\r
 * Iterate over an input \`list\`, calling a provided function \`fn\` for each\r
 * element in the list.\r
 *\r
 * \`fn\` receives one argument: *(value)*.\r
 *\r
 * Note: \`R.forEach\` does not skip deleted or unassigned indices (sparse\r
 * arrays), unlike the native \`Array.prototype.forEach\` method. For more\r
 * details on this behavior, see:\r
 * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach#Description\r
 *\r
 * Also note that, unlike \`Array.prototype.forEach\`, Ramda's \`forEach\` returns\r
 * the original array. In some libraries this function is named \`each\`.\r
 *\r
 * Dispatches to the \`forEach\` method of the second argument, if present.\r
 *\r
 * See also {@link addIndex}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const printXPlusFive = x => console.log(x + 5);\r
 * R.forEach(printXPlusFive, [1, 2, 3]); //=> [1, 2, 3]\r
 * // logs 6\r
 * // logs 7\r
 * // logs 8\r
 * \`\`\`\r
 */\r
declare function forEach<T>(\r
  fn: (x: T) => void\r
): <U extends readonly T[]>(list: U) => U\r
declare function forEach<U extends readonly any[] = readonly any[]>(\r
  __: Placeholder,\r
  list: U\r
): (fn: (x: U extends readonly (infer T)[] ? T : never) => void) => U\r
declare function forEach<T, U extends readonly T[] = readonly T[]>(\r
  fn: (x: T) => void,\r
  list: U\r
): U\r
\r
/**\r
 * Iterate over an input \`object\`, calling a provided function \`fn\` for each\r
 * key and value in the object.\r
 *\r
 * \`fn\` receives three argument: *(value, key, obj)*.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const printKeyConcatValue = (value, key) => console.log(key + ':' + value);\r
 * R.forEachObjIndexed(printKeyConcatValue, {x: 1, y: 2}); //=> {x: 1, y: 2}\r
 * // logs x:1\r
 * // logs y:2\r
 * \`\`\`\r
 */\r
declare function forEachObjIndexed<T>(\r
  fn: (value: T[keyof T], key: keyof T, obj: T) => void\r
): (obj: T) => T\r
declare function forEachObjIndexed<T>(\r
  fn: (value: T[keyof T], key: keyof T, obj: T) => void,\r
  obj: T\r
): T\r
\r
/**\r
 * Creates a new object from a list key-value pairs. If a key appears in\r
 * multiple pairs, the rightmost pair is included in the object.\r
 *\r
 * See also {@link toPairs}, {@link pair}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.fromPairs([['a', 1], ['b', 2], ['c', 3]]); //=> {a: 1, b: 2, c: 3}\r
 * \`\`\`\r
 */\r
declare function fromPairs<K extends PropertyKey, V>(\r
  pairs: readonly [K, V][]\r
): { [P in K]: V }\r
\r
/**\r
 * Splits a list into sub-lists stored in an object, based on the result of\r
 * calling a key-returning function on each element, and grouping the\r
 * results according to values returned.\r
 *\r
 * Dispatches to the \`groupBy\` method of the second argument, if present.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link reduceBy}, {@link transduce}, {@link indexBy}, {@link collectBy}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const byGrade = R.groupBy(function(student) {\r
 *   const score = student.score;\r
 *   return score < 65 ? 'F' :\r
 *          score < 70 ? 'D' :\r
 *          score < 80 ? 'C' :\r
 *          score < 90 ? 'B' : 'A';\r
 * });\r
 * const students = [{name: 'Abby', score: 84},\r
 *                 {name: 'Eddy', score: 58},\r
 *                 // ...\r
 *                 {name: 'Jack', score: 69}];\r
 * byGrade(students);\r
 * // {\r
 * //   'A': [{name: 'Dianne', score: 99}],\r
 * //   'B': [{name: 'Abby', score: 84}]\r
 * //   // ...,\r
 * //   'F': [{name: 'Eddy', score: 58}]\r
 * // }\r
 * \`\`\`\r
 */\r
declare function groupBy<T, K extends string = string>(\r
  fn: (a: T) => K\r
): (list: readonly T[]) => Partial<Record<K, T[]>>\r
declare function groupBy<T>(\r
  __: Placeholder,\r
  list: readonly T[]\r
): <K extends string = string>(fn: (a: T) => K) => Partial<Record<K, T[]>>\r
declare function groupBy<T, K extends string = string>(\r
  fn: (a: T) => K,\r
  list: readonly T[]\r
): Partial<Record<K, T[]>>\r
\r
/**\r
 * Takes a list and returns a list of lists where each sublist's elements are\r
 * all satisfied pairwise comparison according to the provided function.\r
 * Only adjacent elements are passed to the comparison function.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.groupWith(R.equals, [0, 1, 1, 2, 3, 5, 8, 13, 21])\r
 * //=> [[0], [1, 1], [2], [3], [5], [8], [13], [21]]\r
 *\r
 * R.groupWith((a, b) => a + 1 === b, [0, 1, 1, 2, 3, 5, 8, 13, 21])\r
 * //=> [[0, 1], [1, 2, 3], [5], [8], [13], [21]]\r
 *\r
 * R.groupWith((a, b) => a % 2 === b % 2, [0, 1, 1, 2, 3, 5, 8, 13, 21])\r
 * //=> [[0], [1, 1], [2], [3, 5], [8], [13, 21]]\r
 *\r
 * const isVowel = R.test(/^[aeiou]$/i);\r
 * R.groupWith(R.eqBy(isVowel), 'aestiou')\r
 * //=> ['ae', 'st', 'iou']\r
 * \`\`\`\r
 */\r
declare function groupWith<T>(fn: (a: T, b: T) => boolean): {\r
  (list: string): string[]\r
  (list: readonly T[]): T[][]\r
}\r
declare function groupWith<T>(\r
  fn: (a: T, b: T) => boolean,\r
  list: string\r
): string[]\r
declare function groupWith<T>(\r
  fn: (a: T, b: T) => boolean,\r
  list: readonly T[]\r
): T[][]\r
\r
/**\r
 * Returns \`true\` if the first argument is greater than the second; \`false\`\r
 * otherwise.\r
 *\r
 * See also {@link lt}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.gt(2, 1); //=> true\r
 * R.gt(2, 2); //=> false\r
 * R.gt(2, 3); //=> false\r
 * R.gt('a', 'z'); //=> false\r
 * R.gt('z', 'a'); //=> true\r
 * \`\`\`\r
 */\r
declare function gt<T extends Ord>(a: T): (b: WidenLiterals<T>) => boolean\r
declare function gt<T extends Ord>(\r
  __: Placeholder,\r
  b: T\r
): (a: WidenLiterals<T>) => boolean\r
declare function gt<T extends Ord>(a: T, b: T): boolean\r
\r
/**\r
 * Returns \`true\` if the first argument is greater than or equal to the second;\r
 * \`false\` otherwise.\r
 *\r
 * See also {@link lte}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.gte(2, 1); //=> true\r
 * R.gte(2, 2); //=> true\r
 * R.gte(2, 3); //=> false\r
 * R.gte('a', 'z'); //=> false\r
 * R.gte('z', 'a'); //=> true\r
 * \`\`\`\r
 */\r
declare function gte<T extends Ord>(a: T): (b: WidenLiterals<T>) => boolean\r
declare function gte<T extends Ord>(\r
  __: Placeholder,\r
  b: T\r
): (a: WidenLiterals<T>) => boolean\r
declare function gte<T extends Ord>(a: T, b: T): boolean\r
\r
/**\r
 * Returns whether or not an object has an own property with the specified name\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const hasName = R.has('name');\r
 * hasName({name: 'alice'});   //=> true\r
 * hasName({name: 'bob'});     //=> true\r
 * hasName({});                //=> false\r
 *\r
 * const point = {x: 0, y: 0};\r
 * const pointHas = R.has(R.__, point);\r
 * pointHas('x');  //=> true\r
 * pointHas('y');  //=> true\r
 * pointHas('z');  //=> false\r
 * \`\`\`\r
 */\r
declare function has<K extends PropertyKey>(\r
  prop: K\r
): (obj: unknown) => obj is ObjectHavingSome<K>\r
declare function has(\r
  __: Placeholder,\r
  obj: unknown\r
): <P extends PropertyKey>(s: P) => boolean\r
declare function has<K extends PropertyKey>(\r
  prop: K,\r
  obj: unknown\r
): obj is ObjectHavingSome<K>\r
\r
/**\r
 * Returns whether or not an object or its prototype chain has a property with\r
 * the specified name\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * function Rectangle(width, height) {\r
 *   this.width = width;\r
 *   this.height = height;\r
 * }\r
 * Rectangle.prototype.area = function() {\r
 *   return this.width * this.height;\r
 * };\r
 *\r
 * const square = new Rectangle(2, 2);\r
 * R.hasIn('width', square);  //=> true\r
 * R.hasIn('area', square);  //=> true\r
 * \`\`\`\r
 */\r
declare function hasIn(s: string): <T>(obj: T) => boolean\r
declare function hasIn<T>(s: string, obj: T): boolean\r
\r
/**\r
 * Returns whether or not a path exists in an object. Only the object's\r
 * own properties are checked.\r
 *\r
 * See also {@link has}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.hasPath(['a', 'b'], {a: {b: 2}});         // => true\r
 * R.hasPath(['a', 'b'], {a: {b: undefined}}); // => true\r
 * R.hasPath(['a', 'b'], {a: {c: 2}});         // => false\r
 * R.hasPath(['a', 'b'], {});                  // => false\r
 * \`\`\`\r
 */\r
declare function hasPath(list: readonly string[]): <T>(obj: T) => boolean\r
declare function hasPath<T>(list: readonly string[], obj: T): boolean\r
\r
/**\r
 * Returns the first element of the given list or string. In some libraries\r
 * this function is named \`first\`.\r
 *\r
 * See also {@link tail}, {@link init}, {@link last}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.head(['fi', 'fo', 'fum']); //=> 'fi'\r
 * R.head([]); //=> undefined\r
 *\r
 * R.head('abc'); //=> 'a'\r
 * R.head(''); //=> ''\r
 * \`\`\`\r
 */\r
declare function head(str: string): string\r
// empty tuple - purposefully \`never\`. \`head\` should never work on tuple type with no length\r
declare function head(list: readonly []): never\r
// non-empty tuple\r
declare function head<T1, TRest>(list: readonly [T1, ...TRest[]]): T1\r
// arrays, because these could be empty, they return \`T | undefined\`\r
// this is no different than the tuple form since \`T[]\` can be empty at runtime\r
declare function head<T>(list: readonly T[]): T | undefined\r
\r
/**\r
 * Returns true if its arguments are identical, false otherwise. Values are\r
 * identical if they reference the same memory. \`NaN\` is identical to \`NaN\`;\r
 * \`0\` and \`-0\` are not identical.\r
 *\r
 * Note this is merely a curried version of ES6 \`Object.is\`.\r
 *\r
 * \`identical\` does not support the \`__\` placeholder.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const o = {};\r
 * R.identical(o, o); //=> true\r
 * R.identical(1, 1); //=> true\r
 * R.identical(1, '1'); //=> false\r
 * R.identical([], []); //=> false\r
 * R.identical(0, -0); //=> false\r
 * R.identical(NaN, NaN); //=> true\r
 * \`\`\`\r
 */\r
declare function identical<T>(a: T): (b: T) => boolean\r
declare function identical<T>(a: T, b: T): boolean\r
\r
/**\r
 * A function that does nothing but return the parameter supplied to it. Good\r
 * as a default or placeholder function.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.identity(1); //=> 1\r
 *\r
 * const obj = {};\r
 * R.identity(obj) === obj; //=> true\r
 * \`\`\`\r
 */\r
declare function identity<T>(a: T): T\r
\r
/**\r
 * Creates a function that will process either the \`onTrue\` or the \`onFalse\`\r
 * function depending upon the result of the \`condition\` predicate.\r
 *\r
 * Note that \`ifElse\` takes its arity from the longest of the three functions passed to it.\r
 *\r
 * See also {@link unless}, {@link when}, {@link cond}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const incCount = R.ifElse(\r
 *   R.has('count'),\r
 *   R.over(R.lensProp('count'), R.inc),\r
 *   R.assoc('count', 1)\r
 * );\r
 * incCount({ count: 1 }); //=> { count: 2 }\r
 * incCount({});           //=> { count: 1 }\r
 * \`\`\`\r
 */\r
declare function ifElse<T, TF extends T, TOnTrueResult, TOnFalseResult>(\r
  pred: (a: T) => a is TF,\r
  onTrue: (a: TF) => TOnTrueResult,\r
  onFalse: (a: Exclude<T, TF>) => TOnFalseResult\r
): (a: T) => TOnTrueResult | TOnFalseResult\r
declare function ifElse<\r
  TArgs extends readonly any[],\r
  TOnTrueResult,\r
  TOnFalseResult\r
>(\r
  fn: (...args: TArgs) => boolean,\r
  onTrue: (...args: TArgs) => TOnTrueResult,\r
  onFalse: (...args: TArgs) => TOnFalseResult\r
): (...args: TArgs) => TOnTrueResult | TOnFalseResult\r
\r
/**\r
 * Increments its argument.\r
 *\r
 * See also {@link dec}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.inc(42); //=> 43\r
 * \`\`\`\r
 */\r
declare function inc(n: number): number\r
\r
/**\r
 * Returns \`true\` if the specified value is equal, in [\`R.equals\`](#equals)\r
 * terms, to at least one element of the given list; \`false\` otherwise.\r
 * Also works with strings.\r
 *\r
 * See also {@link any}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.includes(3, [1, 2, 3]); //=> true\r
 * R.includes(4, [1, 2, 3]); //=> false\r
 * R.includes({ name: 'Fred' }, [{ name: 'Fred' }]); //=> true\r
 * R.includes([42], [[42]]); //=> true\r
 * R.includes('ba', 'banana'); //=>true\r
 * \`\`\`\r
 */\r
declare function includes(\r
  s: string\r
): (list: readonly string[] | string) => boolean\r
declare function includes<T>(target: T): (list: readonly T[]) => boolean\r
\r
declare function includes(__: Placeholder, list: string): (s: string) => boolean\r
declare function includes<T>(\r
  __: Placeholder,\r
  list: readonly T[]\r
): (target: T) => boolean\r
\r
declare function includes(s: string, list: string): boolean\r
declare function includes<T>(target: T, list: readonly T[]): boolean\r
\r
/**\r
 * Given a function that generates a key, turns a list of objects into an\r
 * object indexing the objects by the given key. Note that if multiple\r
 * objects generate the same value for the indexing key only the last value\r
 * will be included in the generated object.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link groupBy}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const list = [{id: 'xyz', title: 'A'}, {id: 'abc', title: 'B'}];\r
 * R.indexBy(R.prop('id'), list);\r
 * //=> {abc: {id: 'abc', title: 'B'}, xyz: {id: 'xyz', title: 'A'}}\r
 * \`\`\`\r
 */\r
declare function indexBy<T, K extends string | number = string>(\r
  fn: (a: T) => K\r
): (list: readonly T[]) => { [key in K]: T }\r
declare function indexBy<T, K extends string | number | undefined = string>(\r
  fn: (a: T) => K | undefined\r
): (list: readonly T[]) => { [key in NonNullable<K>]?: T }\r
declare function indexBy<T, K extends string | number = string>(\r
  fn: (a: T) => K,\r
  list: readonly T[]\r
): { [key in K]: T }\r
declare function indexBy<T, K extends string | number | undefined = string>(\r
  fn: (a: T) => K,\r
  list: readonly T[]\r
): { [key in NonNullable<K>]?: T }\r
\r
/**\r
 * Returns the position of the first occurrence of an item in an array, or -1\r
 * if the item is not included in the array. [\`R.equals\`](#equals) is used to\r
 * determine equality.\r
 *\r
 * See also {@link lastIndexOf}, {@link findIndex}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.indexOf(3, [1,2,3,4]); //=> 2\r
 * R.indexOf(10, [1,2,3,4]); //=> -1\r
 * \`\`\`\r
 */\r
declare function indexOf(\r
  target: string\r
): (list: readonly string[] | string) => number\r
declare function indexOf<T>(target: T): (list: readonly T[]) => number\r
declare function indexOf(\r
  target: string,\r
  list: readonly string[] | string\r
): number\r
declare function indexOf<T>(target: T, list: readonly T[]): number\r
\r
/**\r
 * Returns all but the last element of the given list or string.\r
 *\r
 * See also {@link last}, {@link head}, {@link tail}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.init([1, 2, 3]);  //=> [1, 2]\r
 * R.init([1, 2]);     //=> [1]\r
 * R.init([1]);        //=> []\r
 * R.init([]);         //=> []\r
 *\r
 * R.init('abc');  //=> 'ab'\r
 * R.init('ab');   //=> 'a'\r
 * R.init('a');    //=> ''\r
 * R.init('');     //=> ''\r
 * \`\`\`\r
 */\r
declare function init(list: string): string\r
declare function init<T>(list: readonly T[]): T[]\r
\r
/**\r
 * Takes a predicate \`pred\`, a list \`xs\`, and a list \`ys\`, and returns a list\r
 * \`xs'\` comprising each of the elements of \`xs\` which is equal to one or more\r
 * elements of \`ys\` according to \`pred\`.\r
 *\r
 * \`pred\` must be a binary function expecting an element from each list.\r
 *\r
 * \`xs\`, \`ys\`, and \`xs'\` are treated as sets, semantically, so ordering should\r
 * not be significant, but since \`xs'\` is ordered the implementation guarantees\r
 * that its values are in the same order as they appear in \`xs\`. Duplicates are\r
 * not removed, so \`xs'\` may contain duplicates if \`xs\` contains duplicates.\r
 *\r
 * See also {@link intersection}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.innerJoin(\r
 *   (record, id) => record.id === id,\r
 *   [{id: 824, name: 'Richie Furay'},\r
 *    {id: 956, name: 'Dewey Martin'},\r
 *    {id: 313, name: 'Bruce Palmer'},\r
 *    {id: 456, name: 'Stephen Stills'},\r
 *    {id: 177, name: 'Neil Young'}],\r
 *   [177, 456, 999]\r
 * );\r
 * //=> [{id: 456, name: 'Stephen Stills'}, {id: 177, name: 'Neil Young'}]\r
 * \`\`\`\r
 */\r
declare function innerJoin<T1, T2>(\r
  pred: (a: T1, b: T2) => boolean\r
): (list1: readonly T1[], list2: readonly T2[]) => T1[]\r
declare function innerJoin<T1, T2>(\r
  pred: (a: T1, b: T2) => boolean,\r
  list1: readonly T1[]\r
): (list2: readonly T2[]) => T1[]\r
declare function innerJoin<T1, T2>(\r
  pred: (a: T1, b: T2) => boolean,\r
  list1: readonly T1[],\r
  list2: readonly T2[]\r
): T1[]\r
\r
/**\r
 * Inserts the supplied element into the list, at the specified \`index\`. _Note that\r
 *\r
 * this is not destructive_: it returns a copy of the list with the changes.\r
 * <small>No lists have been harmed in the application of this function.</small>\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.insert(2, 'x', [1,2,3,4]); //=> [1,2,'x',3,4]\r
 * \`\`\`\r
 */\r
declare function insert(index: number): <T>(elt: T, list: readonly T[]) => T[]\r
declare function insert<T>(index: number, elt: T): (list: readonly T[]) => T[]\r
declare function insert<T>(index: number, elt: T, list: readonly T[]): T[]\r
\r
/**\r
 * Inserts the sub-list into the list, at the specified \`index\`. _Note that this is not\r
 * destructive_: it returns a copy of the list with the changes.\r
 * <small>No lists have been harmed in the application of this function.</small>\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.insertAll(2, ['x','y','z'], [1,2,3,4]); //=> [1,2,'x','y','z',3,4]\r
 * \`\`\`\r
 */\r
declare function insertAll(\r
  index: number\r
): <T>(elts: readonly T[], list: readonly T[]) => T[]\r
declare function insertAll<T>(\r
  index: number,\r
  elts: readonly T[]\r
): (list: readonly T[]) => T[]\r
declare function insertAll<T>(\r
  index: number,\r
  elts: readonly T[],\r
  list: readonly T[]\r
): T[]\r
\r
/**\r
 * Combines two lists into a set (i.e. no duplicates) composed of those\r
 * elements common to both lists.\r
 *\r
 * See also {@link innerJoin}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.intersection([1,2,3,4], [7,6,5,4,3]); //=> [4, 3]\r
 * \`\`\`\r
 */\r
declare function intersection<T>(\r
  list1: readonly T[]\r
): (list2: readonly T[]) => T[]\r
declare function intersection<T>(list1: readonly T[], list2: readonly T[]): T[]\r
\r
/**\r
 * Creates a new list with the separator interposed between elements.\r
 *\r
 * Dispatches to the \`intersperse\` method of the second argument, if present.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.intersperse('a', ['b', 'n', 'n', 's']); //=> ['b', 'a', 'n', 'a', 'n', 'a', 's']\r
 * \`\`\`\r
 */\r
declare function intersperse<T>(separator: T): (list: readonly T[]) => T[]\r
declare function intersperse<T>(separator: T, list: readonly T[]): T[]\r
\r
/**\r
 * Transforms the items of the list with the transducer and appends the\r
 * transformed items to the accumulator using an appropriate iterator function\r
 * based on the accumulator type.\r
 *\r
 * The accumulator can be an array, string, object or a transformer. Iterated\r
 * items will be appended to arrays and concatenated to strings. Objects will\r
 * be merged directly or 2-item arrays will be merged as key, value pairs.\r
 *\r
 * The accumulator can also be a transformer object that provides a 2-arity\r
 * reducing iterator function, step, 0-arity initial value function, init, and\r
 * 1-arity result extraction function result. The step function is used as the\r
 * iterator function in reduce. The result function is used to convert the\r
 * final accumulator into the return type and in most cases is R.identity. The\r
 * init function is used to provide the initial accumulator.\r
 *\r
 * The iteration is performed with [\`R.reduce\`](#reduce) after initializing the\r
 * transducer.\r
 *\r
 * See also {@link transduce}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const numbers = [1, 2, 3, 4];\r
 * const transducer = R.compose(R.map(R.add(1)), R.take(2));\r
 *\r
 * R.into([], transducer, numbers); //=> [2, 3]\r
 *\r
 * const intoArray = R.into([]);\r
 * intoArray(transducer, numbers); //=> [2, 3]\r
 * \`\`\`\r
 */\r
declare function into(\r
  acc: any\r
): <T>(xf: (...a: readonly any[]) => any, list: readonly T[]) => T[]\r
declare function into<T>(\r
  acc: any,\r
  xf: (...a: readonly any[]) => any,\r
  list: readonly T[]\r
): T[]\r
declare function into<T, R>(\r
  acc: any,\r
  xf: (...a: readonly any[]) => R[],\r
  list: readonly T[]\r
): R[]\r
declare function into(\r
  acc: any,\r
  xf: (...a: readonly any[]) => any\r
): <T>(list: readonly T[]) => T[]\r
\r
/**\r
 * Same as [\`R.invertObj\`](#invertObj), however this accounts for objects with\r
 * duplicate values by putting the values into an array.\r
 *\r
 * See also {@link invertObj}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const raceResultsByFirstName = {\r
 *   first: 'alice',\r
 *   second: 'jake',\r
 *   third: 'alice',\r
 * };\r
 * R.invert(raceResultsByFirstName);\r
 * //=> { 'alice': ['first', 'third'], 'jake':['second'] }\r
 * \`\`\`\r
 */\r
declare function invert<T>(obj: T): { [index: string]: string[] }\r
\r
/**\r
 * Returns a new object with the keys of the given object as values, and the\r
 * values of the given object, which are coerced to strings, as keys. Note\r
 * that the last key found is preferred when handling the same value.\r
 *\r
 * See also {@link invert}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const raceResults = {\r
 *   first: 'alice',\r
 *   second: 'jake'\r
 * };\r
 * R.invertObj(raceResults);\r
 * //=> { 'alice': 'first', 'jake':'second' }\r
 *\r
 * // Alternatively:\r
 * const raceResults = ['alice', 'jake'];\r
 * R.invertObj(raceResults);\r
 * //=> { 'alice': '0', 'jake':'1' }\r
 * \`\`\`\r
 */\r
declare function invertObj(\r
  obj: { [index: string]: string } | { [index: number]: string }\r
): { [index: string]: string }\r
\r
/**\r
 * Given an \`arity\` (Number) and a \`name\` (String) the \`invoker\` function\r
 * returns a curried function that takes \`arity\` arguments and a \`context\`\r
 * object. It will "invoke" the \`name\`'d function (a method) on the \`context\`\r
 * object.\r
 *\r
 * See also {@link construct}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * // A function with no arguments\r
 * const asJson = invoker(0, "json")\r
 * // Just like calling .then((response) => response.json())\r
 * fetch("http://example.com/index.json").then(asJson)\r
 *\r
 * // A function with one argument\r
 * const sliceFrom = invoker(1, 'slice');\r
 * sliceFrom(6, 'abcdefghijklm'); //=> 'ghijklm'\r
 *\r
 * // A function with two arguments\r
 * const sliceFrom6 = invoker(2, 'slice')(6);\r
 * sliceFrom6(8, 'abcdefghijklm'); //=> 'gh'\r
 *\r
 * // NOTE: You can't simply pass some of the arguments to the initial invoker function.\r
 * const firstCreditCardSection = invoker(2, "slice", 0, 4)\r
 * firstCreditCardSection("4242 4242 4242 4242") // => Function<...>\r
 *\r
 * // Since invoker returns a curried function, you may partially apply it to create the function you need.\r
 * const firstCreditCardSection = invoker(2, "slice")(0, 4)\r
 * firstCreditCardSection("4242 4242 4242 4242") // => "4242"\r
 * \`\`\`\r
 */\r
declare function invoker(\r
  arity: number,\r
  method: string\r
): (...a: readonly any[]) => any\r
\r
/**\r
 * See if an object (i.e. \`val\`) is an instance of the supplied constructor. This\r
 * function will check up the inheritance chain, if any.\r
 * If \`val\` was created using \`Object.create\`, \`R.is(Object, val) === true\`.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.is(Object, {}); //=> true\r
 * R.is(Number, 1); //=> true\r
 * R.is(Object, 1); //=> false\r
 * R.is(String, 's'); //=> true\r
 * R.is(String, new String('')); //=> true\r
 * R.is(Object, new String('')); //=> true\r
 * R.is(Object, 's'); //=> false\r
 * R.is(Number, {}); //=> false\r
 * \`\`\`\r
 */\r
declare function is<C extends (...args: any[]) => any>(\r
  ctor: C\r
): (val: any) => val is ReturnType<C>\r
declare function is<C extends new (...args: any[]) => any>(\r
  ctor: C\r
): (val: any) => val is InstanceType<C>\r
declare function is<C extends (...args: any[]) => any>(\r
  ctor: C,\r
  val: any\r
): val is ReturnType<C>\r
declare function is<C extends new (...args: any[]) => any>(\r
  ctor: C,\r
  val: any\r
): val is InstanceType<C>\r
\r
/**\r
 * Returns \`true\` if the given value is its type's empty value; \`false\`\r
 * otherwise.\r
 *\r
 * See also {@link empty}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.isEmpty([1, 2, 3]);           //=> false\r
 * R.isEmpty([]);                  //=> true\r
 * R.isEmpty('');                  //=> true\r
 * R.isEmpty(null);                //=> false\r
 * R.isEmpty({});                  //=> true\r
 * R.isEmpty({length: 0});         //=> false\r
 * R.isEmpty(Uint8Array.from('')); //=> true\r
 * \`\`\`\r
 */\r
declare function isEmpty(value: any): boolean\r
\r
/**\r
 * Checks if the input value is \`null\` or \`undefined\`.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.isNil(null); //=> true\r
 * R.isNil(undefined); //=> true\r
 * R.isNil(0); //=> false\r
 * R.isNil([]); //=> false\r
 * \`\`\`\r
 */\r
declare function isNil(value: any): value is null | undefined\r
\r
/**\r
 * Checks if the input value is not \`null\` and not \`undefined\`.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.isNotNil(null); //=> false\r
 * R.isNotNil(undefined); //=> false\r
 * R.isNotNil(0); //=> true\r
 * R.isNotNil([]); //=> true\r
 * \`\`\`\r
 */\r
declare function isNotNil<T>(value: T): value is NonNullable<T>\r
\r
/**\r
 * Returns a string made by inserting the \`separator\` between each element and\r
 * concatenating all the elements into a single string.\r
 *\r
 * See also {@link split}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const spacer = R.join(' ');\r
 * spacer(['a', 2, 3.4]);   //=> 'a 2 3.4'\r
 * R.join('|', [1, 2, 3]);    //=> '1|2|3'\r
 * \`\`\`\r
 */\r
declare function join(x: string): (xs: readonly any[]) => string\r
declare function join(x: string, xs: readonly any[]): string\r
\r
/**\r
 * juxt applies a list of functions to a list of values.\r
 *\r
 * See also {@link applySpec}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const getRange = R.juxt([Math.min, Math.max]);\r
 * getRange(3, 4, 9, -3); //=> [-3, 9]\r
 * \`\`\`\r
 */\r
declare function juxt<A extends any[], R1>(\r
  fns: [(...a: A) => R1]\r
): (...a: A) => [R1]\r
declare function juxt<A extends any[], R1, R2>(\r
  fns: [(...a: A) => R1, (...a: A) => R2]\r
): (...a: A) => [R1, R2]\r
declare function juxt<A extends any[], R1, R2, R3>(\r
  fns: [(...a: A) => R1, (...a: A) => R2, (...a: A) => R3]\r
): (...a: A) => [R1, R2, R3]\r
declare function juxt<A extends any[], R1, R2, R3, R4>(\r
  fns: [(...a: A) => R1, (...a: A) => R2, (...a: A) => R3, (...a: A) => R4]\r
): (...a: A) => [R1, R2, R3, R4]\r
declare function juxt<A extends any[], R1, R2, R3, R4, R5>(\r
  fns: [\r
    (...a: A) => R1,\r
    (...a: A) => R2,\r
    (...a: A) => R3,\r
    (...a: A) => R4,\r
    (...a: A) => R5\r
  ]\r
): (...a: A) => [R1, R2, R3, R4, R5]\r
declare function juxt<A extends any[], U>(\r
  fns: Array<(...args: A) => U>\r
): (...args: A) => U[]\r
\r
/**\r
 * #__PURE__\r
 */\r
declare function keys<T extends object>(x: T): Array<keyof T>\r
\r
/**\r
 * Returns a list containing the names of all the properties of the supplied\r
 * object, including prototype properties.\r
 * Note that the order of the output array is not guaranteed to be consistent\r
 * across different JS platforms.\r
 *\r
 * See also {@link keys}, {@link valuesIn}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const F = function() { this.x = 'X'; };\r
 * F.prototype.y = 'Y';\r
 * const f = new F();\r
 * R.keysIn(f); //=> ['x', 'y']\r
 * \`\`\`\r
 */\r
declare function keysIn<T>(obj: T): string[]\r
\r
/**\r
 * Returns the last element of the given list or string.\r
 *\r
 * See also {@link init}, {@link head}, {@link tail}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.last(['fi', 'fo', 'fum']); //=> 'fum'\r
 * R.last([]); //=> undefined\r
 *\r
 * R.last('abc'); //=> 'c'\r
 * R.last(''); //=> ''\r
 * \`\`\`\r
 */\r
declare function last(str: string): string\r
declare function last(list: readonly []): undefined\r
declare function last<T extends any>(list: readonly T[]): T | undefined\r
\r
/**\r
 * Returns the position of the last occurrence of an item in an array, or -1 if\r
 * the item is not included in the array. [\`R.equals\`](#equals) is used to\r
 * determine equality.\r
 *\r
 * See also {@link indexOf}, {@link findLastIndex}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.lastIndexOf(3, [-1,3,3,0,1,2,3,4]); //=> 6\r
 * R.lastIndexOf(10, [1,2,3,4]); //=> -1\r
 * \`\`\`\r
 */\r
declare function lastIndexOf(\r
  target: string\r
): (list: readonly string[] | string) => number\r
declare function lastIndexOf<T>(target: T): (list: readonly T[]) => number\r
declare function lastIndexOf(\r
  target: string,\r
  list: readonly string[] | string\r
): number\r
declare function lastIndexOf<T>(target: T, list: readonly T[]): number\r
\r
/**\r
 * Returns the number of elements in the array by returning \`list.length\`.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.length([]); //=> 0\r
 * R.length([1, 2, 3]); //=> 3\r
 * \`\`\`\r
 */\r
declare function length<T extends { length: number }>(list: T): number\r
\r
/**\r
 * Returns a lens for the given getter and setter functions. The getter "gets"\r
 * the value of the focus; the setter "sets" the value of the focus. The setter\r
 * should not mutate the data structure.\r
 *\r
 * See also {@link view}, {@link set}, {@link over}, {@link lensIndex}, {@link lensProp}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const xLens = R.lens(R.prop('x'), R.assoc('x'));\r
 *\r
 * R.view(xLens, {x: 1, y: 2});            //=> 1\r
 * R.set(xLens, 4, {x: 1, y: 2});          //=> {x: 4, y: 2}\r
 * R.over(xLens, R.negate, {x: 1, y: 2});  //=> {x: -1, y: 2}\r
 * \`\`\`\r
 */\r
declare function lens<S, A>(\r
  getter: (s: S) => A,\r
  setter: (a: A, s: S) => S\r
): Lens<S, A>\r
\r
/**\r
 * Returns a lens whose focus is the specified index.\r
 *\r
 * See also {@link view}, {@link set}, {@link over}, {@link nth}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const headLens = R.lensIndex(0);\r
 *\r
 * R.view(headLens, ['a', 'b', 'c']);            //=> 'a'\r
 * R.set(headLens, 'x', ['a', 'b', 'c']);        //=> ['x', 'b', 'c']\r
 * R.over(headLens, R.toUpper, ['a', 'b', 'c']); //=> ['A', 'b', 'c']\r
 * \`\`\`\r
 */\r
declare function lensIndex<A>(n: number): Lens<A[], A>\r
declare function lensIndex<A extends any[], N extends number>(\r
  n: N\r
): Lens<A, A[N]>\r
\r
/**\r
 * Returns a lens whose focus is the specified path.\r
 *\r
 * See also {@link view}, {@link set}, {@link over}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const xHeadYLens = R.lensPath(['x', 0, 'y']);\r
 *\r
 * R.view(xHeadYLens, {x: [{y: 2, z: 3}, {y: 4, z: 5}]});\r
 * //=> 2\r
 * R.set(xHeadYLens, 1, {x: [{y: 2, z: 3}, {y: 4, z: 5}]});\r
 * //=> {x: [{y: 1, z: 3}, {y: 4, z: 5}]}\r
 * R.over(xHeadYLens, R.negate, {x: [{y: 2, z: 3}, {y: 4, z: 5}]});\r
 * //=> {x: [{y: -2, z: 3}, {y: 4, z: 5}]}\r
 * \`\`\`\r
 */\r
declare function lensPath<S, K0 extends keyof S = keyof S>(\r
  path: [K0]\r
): Lens<S, S[K0]>\r
declare function lensPath<\r
  S,\r
  K0 extends keyof S = keyof S,\r
  K1 extends keyof S[K0] = keyof S[K0]\r
>(path: [K0, K1]): Lens<S, S[K0][K1]>\r
declare function lensPath<\r
  S,\r
  K0 extends keyof S = keyof S,\r
  K1 extends keyof S[K0] = keyof S[K0],\r
  K2 extends keyof S[K0][K1] = keyof S[K0][K1]\r
>(path: [K0, K1, K2]): Lens<S, S[K0][K1][K2]>\r
declare function lensPath<\r
  S,\r
  K0 extends keyof S = keyof S,\r
  K1 extends keyof S[K0] = keyof S[K0],\r
  K2 extends keyof S[K0][K1] = keyof S[K0][K1],\r
  K3 extends keyof S[K0][K1][K2] = keyof S[K0][K1][K2]\r
>(path: [K0, K1, K2, K3]): Lens<S, S[K0][K1][K2][K3]>\r
declare function lensPath<\r
  S,\r
  K0 extends keyof S = keyof S,\r
  K1 extends keyof S[K0] = keyof S[K0],\r
  K2 extends keyof S[K0][K1] = keyof S[K0][K1],\r
  K3 extends keyof S[K0][K1][K2] = keyof S[K0][K1][K2],\r
  K4 extends keyof S[K0][K1][K2][K3] = keyof S[K0][K1][K2][K3]\r
>(path: [K0, K1, K2, K3, K4]): Lens<S, S[K0][K1][K2][K3][K4]>\r
declare function lensPath<\r
  S,\r
  K0 extends keyof S = keyof S,\r
  K1 extends keyof S[K0] = keyof S[K0],\r
  K2 extends keyof S[K0][K1] = keyof S[K0][K1],\r
  K3 extends keyof S[K0][K1][K2] = keyof S[K0][K1][K2],\r
  K4 extends keyof S[K0][K1][K2][K3] = keyof S[K0][K1][K2][K3],\r
  K5 extends keyof S[K0][K1][K2][K3][K4] = keyof S[K0][K1][K2][K3][K4]\r
>(path: [K0, K1, K2, K3, K4, K5]): Lens<S, S[K0][K1][K2][K3][K4][K5]>\r
declare function lensPath<S = any, A = any>(path: Path): Lens<S, A>\r
\r
/**\r
 * Returns a lens whose focus is the specified property.\r
 *\r
 * See also {@link view}, {@link set}, {@link over}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const xLens = R.lensProp('x');\r
 *\r
 * R.view(xLens, {x: 1, y: 2});            //=> 1\r
 * R.set(xLens, 4, {x: 1, y: 2});          //=> {x: 4, y: 2}\r
 * R.over(xLens, R.negate, {x: 1, y: 2});  //=> {x: -1, y: 2}\r
 * \`\`\`\r
 */\r
declare function lensProp<S, K extends keyof S = keyof S>(\r
  prop: K\r
): Lens<S, S[K]>\r
\r
/**\r
 * "lifts" a function of arity >= 1 so that it may "map over" a list, Function or other\r
 * object that satisfies the [FantasyLand Apply spec](https://github.com/fantasyland/fantasy-land#apply).\r
 *\r
 * See also {@link liftN}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const madd3 = R.lift((a, b, c) => a + b + c);\r
 *\r
 * madd3([100, 200], [30, 40], [5, 6, 7]); //=> [135, 136, 137, 145, 146, 147, 235, 236, 237, 245, 246, 247]\r
 *\r
 * const madd5 = R.lift((a, b, c, d, e) => a + b + c + d + e);\r
 *\r
 * madd5([10, 20], [1], [2, 3], [4], [100, 200]); //=> [117, 217, 118, 218, 127, 227, 128, 228]\r
 * \`\`\`\r
 */\r
declare function lift<F extends (...args: readonly any[]) => any>(\r
  fn: F\r
): {\r
  (...args: ToTupleOfArray<Parameters<F>>): Array<ReturnType<F>>\r
  <R>(...args: ToTupleOfFunction<R, Parameters<F>>): (arg: R) => ReturnType<F>\r
}\r
\r
/**\r
 * "lifts" a function to be the specified arity, so that it may "map over" that\r
 * many lists, Functions or other objects that satisfy the [FantasyLand Apply spec](https://github.com/fantasyland/fantasy-land#apply).\r
 *\r
 * See also {@link lift}, {@link ap}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const madd3 = R.liftN(3, (...args) => R.sum(args));\r
 * madd3([1,2,3], [1,2,3], [1]); //=> [3, 4, 5, 4, 5, 6, 5, 6, 7]\r
 * \`\`\`\r
 */\r
declare function liftN<\r
  N extends number,\r
  F extends (...args: readonly any[]) => any\r
>(\r
  n: N,\r
  fn: F\r
): {\r
  (...args: Take<N, ToTupleOfArray<Parameters<F>>>): Array<ReturnType<F>>\r
  <R>(\r
    ...args: Take<N, ToTupleOfFunction<R, Parameters<F>>>\r
  ): (arg: R) => ReturnType<F>\r
}\r
\r
/**\r
 * Returns \`true\` if the first argument is less than the second; \`false\`\r
 * otherwise.\r
 *\r
 * See also {@link gt}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.lt(2, 1); //=> false\r
 * R.lt(2, 2); //=> false\r
 * R.lt(2, 3); //=> true\r
 * R.lt('a', 'z'); //=> true\r
 * R.lt('z', 'a'); //=> false\r
 * \`\`\`\r
 */\r
declare function lt<T extends Ord>(a: T): (b: WidenLiterals<T>) => boolean\r
declare function lt<T extends Ord>(\r
  __: Placeholder,\r
  b: T\r
): (a: WidenLiterals<T>) => boolean\r
declare function lt<T extends Ord>(a: T, b: T): boolean\r
\r
/**\r
 * Returns \`true\` if the first argument is less than or equal to the second;\r
 * \`false\` otherwise.\r
 *\r
 * See also {@link gte}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.lte(2, 1); //=> false\r
 * R.lte(2, 2); //=> true\r
 * R.lte(2, 3); //=> true\r
 * R.lte('a', 'z'); //=> true\r
 * R.lte('z', 'a'); //=> false\r
 * \`\`\`\r
 */\r
declare function lte<T extends Ord>(a: T): (b: WidenLiterals<T>) => boolean\r
declare function lte<T extends Ord>(\r
  __: Placeholder,\r
  b: T\r
): (a: WidenLiterals<T>) => boolean\r
declare function lte<T extends Ord>(a: T, b: T): boolean\r
\r
/**\r
 * Takes a function and\r
 * a [functor](https://github.com/fantasyland/fantasy-land#functor),\r
 * applies the function to each of the functor's values, and returns\r
 * a functor of the same shape.\r
 *\r
 * Ramda provides suitable \`map\` implementations for \`Array\` and \`Object\`,\r
 * so this function may be applied to \`[1, 2, 3]\` or \`{x: 1, y: 2, z: 3}\`.\r
 *\r
 * Dispatches to the \`map\` method of the second argument, if present.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * Also treats functions as functors and will compose them together.\r
 *\r
 * See also {@link transduce}, {@link addIndex}, {@link pluck}, {@link project}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const double = x => x * 2;\r
 *\r
 * R.map(double, [1, 2, 3]); //=> [2, 4, 6]\r
 *\r
 * R.map(double, {x: 1, y: 2, z: 3}); //=> {x: 2, y: 4, z: 6}\r
 * \`\`\`\r
 */\r
declare function map<A, B>(\r
  fn: (x: A) => B\r
): {\r
  // first and last def are the same and are here on purpose\r
  // the list variant needs to come before the FunctorMap ones, because \`T[]\` is a \`FunctorMap<T>\`\r
  (list: readonly A[]): B[]\r
  (functor: FunctorFantasyLand<A>): FunctorFantasyLand<B>\r
  (functor: FunctorMap<A>): FunctorMap<B>\r
  <U extends Record<PropertyKey, A>>(dict: U): Record<keyof U, B>\r
  // it also needs to be here when you pass map as an argument to a function, eg \`compose(map(fn))\`\r
  (list: readonly A[]): B[]\r
}\r
\r
// map(__, list)\r
declare function map<A>(\r
  __: Placeholder,\r
  list: readonly A[]\r
): <B>(fn: (x: A) => B) => B[]\r
declare function map<A>(\r
  __: Placeholder,\r
  obj: FunctorFantasyLand<A>\r
): <B>(fn: (a: A) => B) => FunctorFantasyLand<B>\r
declare function map<A>(\r
  __: Placeholder,\r
  obj: FunctorMap<A>\r
): <B>(fn: (a: A) => B) => FunctorMap<B>\r
declare function map<U extends object>(\r
  __: Placeholder,\r
  dict: U\r
): <B>(fn: (x: ValueOfUnion<B>) => B) => Record<keyof U, B>\r
// map(fn, list)\r
// first and last def are the same and are here on purpose\r
// the list variant needs to come before the FunctorMap ones, because \`T[]\` is a \`FunctorMap<T>\`\r
declare function map<A, B>(fn: (x: A) => B, list: readonly A[]): B[]\r
declare function map<A, B>(\r
  fn: (x: A) => B,\r
  obj: FunctorFantasyLand<A>\r
): FunctorFantasyLand<B>\r
declare function map<A, B>(fn: (x: A) => B, obj: FunctorMap<A>): FunctorMap<B>\r
declare function map<U extends object, B>(\r
  fn: (x: ValueOfUnion<U>) => B,\r
  dict: U\r
): Record<keyof U, B>\r
// it also needs to be here when you pass map as an argument to a function, eg \`flip(map)\`\r
declare function map<A, B>(fn: (x: A) => B, list: readonly A[]): B[]\r
\r
/**\r
 * The \`mapAccum\` function behaves like a combination of map and reduce; it\r
 * applies a function to each element of a list, passing an accumulating\r
 * parameter from left to right, and returning a final value of this\r
 * accumulator together with the new list.\r
 *\r
 * The iterator function receives two arguments, *acc* and *value*, and should\r
 * return a tuple *[acc, value]*.\r
 *\r
 * See also {@link scan}, {@link addIndex}, {@link mapAccumRight}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const digits = ['1', '2', '3', '4'];\r
 * const appender = (a, b) => [a + b, a + b];\r
 *\r
 * R.mapAccum(appender, 0, digits); //=> ['01234', ['01', '012', '0123', '01234']]\r
 * \`\`\`\r
 */\r
declare function mapAccum<T, U, TResult>(\r
  fn: (acc: U, value: T) => [U, TResult]\r
): (acc: U, list: readonly T[]) => [U, TResult[]]\r
declare function mapAccum<T, U, TResult>(\r
  fn: (acc: U, value: T) => [U, TResult],\r
  acc: U\r
): (list: readonly T[]) => [U, TResult[]]\r
declare function mapAccum<T, U, TResult>(\r
  fn: (acc: U, value: T) => [U, TResult],\r
  acc: U,\r
  list: readonly T[]\r
): [U, TResult[]]\r
\r
/**\r
 * The \`mapAccumRight\` function behaves like a combination of map and reduce; it\r
 * applies a function to each element of a list, passing an accumulating\r
 * parameter from right to left, and returning a final value of this\r
 * accumulator together with the new list.\r
 *\r
 * Similar to [\`mapAccum\`](#mapAccum), except moves through the input list from\r
 * the right to the left.\r
 *\r
 * The iterator function receives two arguments, *acc* and *value*, and should\r
 * return a tuple *[acc, value]*.\r
 *\r
 * See also {@link addIndex}, {@link mapAccum}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const digits = ['1', '2', '3', '4'];\r
 * const appender = (a, b) => [b + a, b + a];\r
 *\r
 * R.mapAccumRight(appender, 5, digits); //=> ['12345', ['12345', '2345', '345', '45']]\r
 * \`\`\`\r
 */\r
declare function mapAccumRight<T, U, TResult>(\r
  fn: (acc: U, value: T) => [U, TResult]\r
): (acc: U, list: readonly T[]) => [U, TResult[]]\r
declare function mapAccumRight<T, U, TResult>(\r
  fn: (acc: U, value: T) => [U, TResult],\r
  acc: U\r
): (list: readonly T[]) => [U, TResult[]]\r
declare function mapAccumRight<T, U, TResult>(\r
  fn: (acc: U, value: T) => [U, TResult],\r
  acc: U,\r
  list: readonly T[]\r
): [U, TResult[]]\r
\r
/**\r
 * An Object-specific version of [\`map\`](#map). The function is applied to three\r
 * arguments: *(value, key, obj)*. If only the value is significant, use\r
 * [\`map\`](#map) instead.\r
 *\r
 * See also {@link map}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const xyz = { x: 1, y: 2, z: 3 };\r
 * const prependKeyAndDouble = (num, key, obj) => key + (num * 2);\r
 *\r
 * R.mapObjIndexed(prependKeyAndDouble, xyz); //=> { x: 'x2', y: 'y4', z: 'z6' }\r
 * \`\`\`\r
 */\r
declare function mapObjIndexed<T, TResult, TKey extends string>(\r
  fn: (value: T, key: TKey, obj?: Record<TKey, T>) => TResult\r
): (obj: Record<TKey, T>) => Record<TKey, TResult>\r
declare function mapObjIndexed<T, TResult, TKey extends string>(\r
  fn: (value: T, key: TKey, obj?: PartialRecord<TKey, T>) => TResult\r
): (obj: Record<TKey, T>) => PartialRecord<TKey, TResult>\r
declare function mapObjIndexed<T, TResult, TKey extends string>(\r
  fn: (value: T, key: TKey, obj?: Record<TKey, T>) => TResult,\r
  obj: Record<TKey, T>\r
): Record<TKey, TResult>\r
declare function mapObjIndexed<T, TResult, TKey extends string>(\r
  fn: (value: T, key: TKey, obj?: Record<TKey, T>) => TResult,\r
  obj: PartialRecord<TKey, T>\r
): PartialRecord<TKey, TResult>\r
declare function mapObjIndexed<T, TResult>(\r
  fn: (\r
    value: T,\r
    key: string,\r
    obj?: {\r
      [key: string]: T\r
    }\r
  ) => TResult,\r
  obj: {\r
    [key: string]: T\r
  }\r
): {\r
  [key: string]: TResult\r
}\r
\r
/**\r
 * Tests a regular expression against a String. Note that this function will\r
 * return an empty array when there are no matches. This differs from\r
 * [\`String.prototype.match\`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/match)\r
 * which returns \`null\` when there are no matches.\r
 *\r
 * See also {@link test}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.match(/([a-z]a)/g, 'bananas'); //=> ['ba', 'na', 'na']\r
 * R.match(/a/, 'b'); //=> []\r
 * R.match(/a/, null); //=> TypeError: null does not have a method named "match"\r
 * \`\`\`\r
 */\r
declare function match(regexp: RegExp): (str: string) => string[]\r
declare function match(regexp: RegExp, str: string): string[]\r
\r
/**\r
 * \`mathMod\` behaves like the modulo operator should mathematically, unlike the\r
 * \`%\` operator (and by extension, [\`R.modulo\`](#modulo)). So while\r
 * \`-17 % 5\` is \`-2\`, \`mathMod(-17, 5)\` is \`3\`. \`mathMod\` requires Integer\r
 * arguments, and returns NaN when the modulus is zero or negative.\r
 *\r
 * See also {@link modulo}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.mathMod(-17, 5);  //=> 3\r
 * R.mathMod(17, 5);   //=> 2\r
 * R.mathMod(17, -5);  //=> NaN\r
 * R.mathMod(17, 0);   //=> NaN\r
 * R.mathMod(17.2, 5); //=> NaN\r
 * R.mathMod(17, 5.3); //=> NaN\r
 *\r
 * const clock = R.mathMod(R.__, 12);\r
 * clock(15); //=> 3\r
 * clock(24); //=> 0\r
 *\r
 * const seventeenMod = R.mathMod(17);\r
 * seventeenMod(3);  //=> 2\r
 * seventeenMod(4);  //=> 1\r
 * seventeenMod(10); //=> 7\r
 * \`\`\`\r
 */\r
declare function mathMod(a: number): (b: number) => number\r
declare function mathMod(__: Placeholder, b: number): (a: number) => number\r
declare function mathMod(a: number, b: number): number\r
\r
/**\r
 * Returns the larger of its two arguments.\r
 *\r
 * See also {@link maxBy}, {@link min}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.max(789, 123); //=> 789\r
 * R.max('a', 'b'); //=> 'b'\r
 * \`\`\`\r
 */\r
declare function max<T extends Ord>(a: T): (b: T) => T\r
declare function max<T extends Ord>(a: T, b: T): T\r
\r
/**\r
 * Takes a function and two values, and returns whichever value produces the\r
 * larger result when passed to the provided function.\r
 *\r
 * See also {@link max}, {@link minBy}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * //  square :: Number -> Number\r
 * const square = n => n * n;\r
 *\r
 * R.maxBy(square, -3, 2); //=> -3\r
 *\r
 * R.reduce(R.maxBy(square), 0, [3, -5, 4, 1, -2]); //=> -5\r
 * R.reduce(R.maxBy(square), 0, []); //=> 0\r
 * \`\`\`\r
 */\r
declare function maxBy<T>(keyFn: (a: T) => Ord): Curry<(a: T, b: T) => T>\r
declare function maxBy<T>(keyFn: (a: T) => Ord, a: T): (b: T) => T\r
declare function maxBy<T>(keyFn: (a: T) => Ord, a: T, b: T): T\r
\r
/**\r
 * Returns the mean of the given list of numbers.\r
 *\r
 * See also {@link median}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.mean([2, 7, 9]); //=> 6\r
 * R.mean([]); //=> NaN\r
 * \`\`\`\r
 */\r
declare function mean(list: readonly number[]): number\r
\r
/**\r
 * Returns the median of the given list of numbers.\r
 *\r
 * See also {@link mean}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.median([2, 9, 7]); //=> 7\r
 * R.median([7, 2, 10, 9]); //=> 8\r
 * R.median([]); //=> NaN\r
 * \`\`\`\r
 */\r
declare function median(list: readonly number[]): number\r
\r
/**\r
 * Takes a string-returning function \`keyGen\` and a function \`fn\` and returns\r
 * a new function that returns cached results for subsequent\r
 * calls with the same arguments.\r
 *\r
 * When the function is invoked, \`keyGen\` is applied to the same arguments\r
 * and its result becomes the cache key. If the cache contains something\r
 * under that key, the function simply returns it and does not invoke \`fn\` at all.\r
 *\r
 * Otherwise \`fn\` is applied to the same arguments and its return value\r
 * is cached under that key and returned by the function.\r
 *\r
 * Care must be taken when implementing \`keyGen\` to avoid key collision,\r
 * or if tracking references, memory leaks and mutating arguments.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const withAge = memoizeWith(o => \`\${o.birth}/\${o.death}\`, ({birth, death}) => {\r
 * //                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^\r
 * //                          keyGen                        fn\r
 *   console.log(\`computing age for \${birth}/\${death}\`);\r
 *   return ({birth, death, age: death - birth});\r
 * });\r
 *\r
 * withAge({birth: 1921, death: 1999});\r
 * //=> LOG: computing age for 1921/1999\r
 * //=> {birth: 1921, death: 1999, age: 78} (returned from fn)\r
 *\r
 * withAge({birth: 1921, death: 1999});\r
 * //=> {birth: 1921, death: 1999, age: 78} (returned from cache)\r
 * \`\`\`\r
 */\r
declare function memoizeWith<T extends (...args: readonly any[]) => any>(\r
  keyFn: (...v: Parameters<T>) => string,\r
  fn: T\r
): T\r
\r
/**\r
 * Creates one new object with the own properties from a list of objects.\r
 * If a key exists in more than one object, the value from the last\r
 * object it exists in will be used.\r
 *\r
 * See also {@link reduce}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.mergeAll([{foo:1},{bar:2},{baz:3}]); //=> {foo:1,bar:2,baz:3}\r
 * R.mergeAll([{foo:1},{foo:2},{bar:2}]); //=> {foo:2,bar:2}\r
 * \`\`\`\r
 */\r
declare function mergeAll<T extends object, Ts extends readonly object[]>(\r
  list: [T, ...Ts]\r
): Assign<T, Ts>\r
// for when passing in an \`T[]\` where all the objects are the same shape \`mergeAll([obj1, obj2, obj3]: T[])\r
// this just returns T\r
declare function mergeAll<T>(list: readonly T[]): T\r
\r
/**\r
 * Creates a new object with the own properties of the first object merged with\r
 * the own properties of the second object. If a key exists in both objects:\r
 * - and both values are objects, the two values will be recursively merged\r
 * - otherwise the value from the first object will be used.\r
 *\r
 * See also {@link merge}, {@link mergeDeepRight}, {@link mergeDeepWith}, {@link mergeDeepWithKey}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.mergeDeepLeft({ name: 'fred', age: 10, contact: { email: 'moo@example.com' }},\r
 *                 { age: 40, contact: { email: 'baa@example.com' }});\r
 * //=> { name: 'fred', age: 10, contact: { email: 'moo@example.com' }}\r
 * \`\`\`\r
 */\r
declare function mergeDeepLeft<L extends object>(\r
  l: L\r
): <R extends object>(r: R) => Assign<R, [L], "deep">\r
declare function mergeDeepLeft<L extends object, R extends object>(\r
  l: L,\r
  r: R\r
): Assign<R, [L], "deep">\r
\r
/**\r
 * Creates a new object with the own properties of the first object merged with\r
 * the own properties of the second object. If a key exists in both objects:\r
 * - and both values are objects, the two values will be recursively merged\r
 * - otherwise the value from the second object will be used.\r
 *\r
 * See also {@link merge}, {@link mergeDeepLeft}, {@link mergeDeepWith}, {@link mergeDeepWithKey}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.mergeDeepRight({ name: 'fred', age: 10, contact: { email: 'moo@example.com' }},\r
 *                  { age: 40, contact: { email: 'baa@example.com' }});\r
 * //=> { name: 'fred', age: 40, contact: { email: 'baa@example.com' }}\r
 * \`\`\`\r
 */\r
declare function mergeDeepRight<L extends object>(\r
  l: L\r
): <R extends object>(r: R) => Assign<L, [R], "deep">\r
declare function mergeDeepRight<L extends object, R extends object>(\r
  l: L,\r
  r: R\r
): Assign<L, [R], "deep">\r
\r
/**\r
 * Creates a new object with the own properties of the two provided objects.\r
 * If a key exists in both objects:\r
 * - and both associated values are also objects then the values will be\r
 *   recursively merged.\r
 * - otherwise the provided function is applied to associated values using the\r
 *   resulting value as the new value associated with the key.\r
 * If a key only exists in one object, the value will be associated with the key\r
 * of the resulting object.\r
 *\r
 * See also {@link mergeWith}, {@link mergeDeepWithKey}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.mergeDeepWith(R.concat,\r
 *                 { a: true, c: { values: [10, 20] }},\r
 *                 { b: true, c: { values: [15, 35] }});\r
 * //=> { a: true, b: true, c: { values: [10, 20, 15, 35] }}\r
 * \`\`\`\r
 */\r
declare function mergeDeepWith<T1, T2>(\r
  fn: (x: any, z: any) => any\r
): (a: T1, b: T2) => any\r
declare function mergeDeepWith<T1, T2>(\r
  fn: (x: any, z: any) => any,\r
  a: T1\r
): (b: T2) => any\r
declare function mergeDeepWith<T1, T2>(\r
  fn: (x: any, z: any) => any,\r
  a: T1,\r
  b: T2\r
): any\r
\r
/**\r
 * Creates a new object with the own properties of the two provided objects.\r
 * If a key exists in both objects:\r
 * - and both associated values are also objects then the values will be\r
 *   recursively merged.\r
 * - otherwise the provided function is applied to the key and associated values\r
 *   using the resulting value as the new value associated with the key.\r
 * If a key only exists in one object, the value will be associated with the key\r
 * of the resulting object.\r
 *\r
 * See also {@link mergeWithKey}, {@link mergeDeepWith}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * let concatValues = (k, l, r) => k == 'values' ? R.concat(l, r) : r\r
 * R.mergeDeepWithKey(concatValues,\r
 *                    { a: true, c: { thing: 'foo', values: [10, 20] }},\r
 *                    { b: true, c: { thing: 'bar', values: [15, 35] }});\r
 * //=> { a: true, b: true, c: { thing: 'bar', values: [10, 20, 15, 35] }}\r
 * \`\`\`\r
 */\r
declare function mergeDeepWithKey<T1, T2>(\r
  fn: (k: string, x: any, z: any) => any\r
): (a: T1, b: T2) => any\r
declare function mergeDeepWithKey<T1, T2>(\r
  fn: (k: string, x: any, z: any) => any,\r
  a: T1\r
): (b: T2) => any\r
declare function mergeDeepWithKey<T1, T2>(\r
  fn: (k: string, x: any, z: any) => any,\r
  a: T1,\r
  b: T2\r
): any\r
\r
/**\r
 * Create a new object with the own properties of the first object merged with\r
 * the own properties of the second object. If a key exists in both objects,\r
 * the value from the first object will be used.\r
 *\r
 * See also {@link mergeRight}, {@link mergeDeepLeft}, {@link mergeWith}, {@link mergeWithKey}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.mergeLeft({ 'age': 40 }, { 'name': 'fred', 'age': 10 });\r
 * //=> { 'name': 'fred', 'age': 40 }\r
 *\r
 * const resetToDefault = R.mergeLeft({x: 0});\r
 * resetToDefault({x: 5, y: 2}); //=> {x: 0, y: 2}\r
 * \`\`\`\r
 */\r
declare function mergeLeft<L extends object>(\r
  l: L\r
): <R extends object>(r: R) => Assign<R, [L], "flat">\r
declare function mergeLeft<L extends object, R extends object>(\r
  l: L,\r
  r: R\r
): Assign<R, [L], "flat">\r
\r
/**\r
 * Create a new object with the own properties of the first object merged with\r
 * the own properties of the second object. If a key exists in both objects,\r
 * the value from the second object will be used.\r
 *\r
 * See also {@link mergeLeft}, {@link mergeDeepRight}, {@link mergeWith}, {@link mergeWithKey}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.mergeRight({ 'name': 'fred', 'age': 10 }, { 'age': 40 });\r
 * //=> { 'name': 'fred', 'age': 40 }\r
 *\r
 * const withDefaults = R.mergeRight({x: 0, y: 0});\r
 * withDefaults({y: 2}); //=> {x: 0, y: 2}\r
 * \`\`\`\r
 */\r
declare function mergeRight<L extends object>(\r
  l: L\r
): <R extends object>(r: R) => Assign<L, [R], "flat">\r
declare function mergeRight<L extends object, R extends object>(\r
  l: L,\r
  r: R\r
): Assign<L, [R], "flat">\r
\r
/**\r
 * Creates a new object with the own properties of the two provided objects. If\r
 * a key exists in both objects, the provided function is applied to the values\r
 * associated with the key in each object, with the result being used as the\r
 * value associated with the key in the returned object.\r
 *\r
 * See also {@link mergeDeepWith}, {@link merge}, {@link mergeWithKey}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.mergeWith(R.concat,\r
 *             { a: true, values: [10, 20] },\r
 *             { b: true, values: [15, 35] });\r
 * //=> { a: true, b: true, values: [10, 20, 15, 35] }\r
 * \`\`\`\r
 */\r
declare function mergeWith(\r
  fn: (x: any, z: any) => any\r
): <U, V>(a: U, b: V) => any\r
declare function mergeWith<U>(\r
  fn: (x: any, z: any) => any,\r
  a: U\r
): <V>(b: V) => any\r
declare function mergeWith<U, V>(fn: (x: any, z: any) => any, a: U, b: V): any\r
\r
/**\r
 * Creates a new object with the own properties of the two provided objects. If\r
 * a key exists in both objects, the provided function is applied to the key\r
 * and the values associated with the key in each object, with the result being\r
 * used as the value associated with the key in the returned object.\r
 *\r
 * See also {@link mergeDeepWithKey}, {@link merge}, {@link mergeWith}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * let concatValues = (k, l, r) => k == 'values' ? R.concat(l, r) : r\r
 * R.mergeWithKey(concatValues,\r
 *                { a: true, thing: 'foo', values: [10, 20] },\r
 *                { b: true, thing: 'bar', values: [15, 35] });\r
 * //=> { a: true, b: true, thing: 'bar', values: [10, 20, 15, 35] }\r
 * \`\`\`\r
 */\r
declare function mergeWithKey(\r
  fn: (str: string, x: any, z: any) => any\r
): <U, V>(a: U, b: V) => any\r
declare function mergeWithKey<U>(\r
  fn: (str: string, x: any, z: any) => any,\r
  a: U\r
): <V>(b: V) => any\r
declare function mergeWithKey<U, V>(\r
  fn: (str: string, x: any, z: any) => any,\r
  a: U,\r
  b: V\r
): any\r
\r
/**\r
 * Returns the smaller of its two arguments.\r
 *\r
 * See also {@link minBy}, {@link max}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.min(789, 123); //=> 123\r
 * R.min('a', 'b'); //=> 'a'\r
 * \`\`\`\r
 */\r
declare function min<T extends Ord>(a: T): (b: T) => T\r
declare function min<T extends Ord>(a: T, b: T): T\r
\r
/**\r
 * Takes a function and two values, and returns whichever value produces the\r
 * smaller result when passed to the provided function.\r
 *\r
 * See also {@link min}, {@link maxBy}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * //  square :: Number -> Number\r
 * const square = n => n * n;\r
 *\r
 * R.minBy(square, -3, 2); //=> 2\r
 *\r
 * R.reduce(R.minBy(square), Infinity, [3, -5, 4, 1, -2]); //=> 1\r
 * R.reduce(R.minBy(square), Infinity, []); //=> Infinity\r
 * \`\`\`\r
 */\r
declare function minBy<T>(keyFn: (a: T) => Ord): Curry<(a: T, b: T) => T>\r
declare function minBy<T>(keyFn: (a: T) => Ord, a: T): (b: T) => T\r
declare function minBy<T>(keyFn: (a: T) => Ord, a: T, b: T): T\r
\r
/**\r
 * Creates a copy of the passed object by applying an \`fn\` function to the given \`prop\` property.\r
 *\r
 * The function will not be invoked, and the object will not change\r
 * if its corresponding property does not exist in the object.\r
 * All non-primitive properties are copied to the new object by reference.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const person = {name: 'James', age: 20, pets: ['dog', 'cat']};\r
 * R.modify('age', R.add(1), person); //=> {name: 'James', age: 21, pets: ['dog', 'cat']}\r
 * R.modify('pets', R.append('turtle'), person); //=> {name: 'James', age: 20, pets: ['dog', 'cat', 'turtle']}\r
 * \`\`\`\r
 */\r
declare function modify<K extends string, A, P>(\r
  prop: K,\r
  fn: (a: A) => P\r
): <T extends Record<K, A>>(target: T) => Omit<T, K> & Record<K, P>\r
\r
declare function modify<T extends object, K extends keyof T, P>(\r
  prop: K,\r
  fn: (a: T[K]) => P,\r
  obj: T\r
): Omit<T, K> & Record<K, P>\r
\r
/**\r
 * Creates a shallow clone of the passed object by applying an \`fn\` function\r
 * to the value at the given path.\r
 *\r
 * The function will not be invoked, and the object will not change\r
 * if its corresponding path does not exist in the object.\r
 * All non-primitive properties are copied to the new object by reference.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const person = {name: 'James', address: { zipCode: '90216' }};\r
 * R.modifyPath(['address', 'zipCode'], R.reverse, person); //=> {name: 'James', address: { zipCode: '61209' }}\r
 *\r
 * // Can handle arrays too\r
 * const person = {name: 'James', addresses: [{ zipCode: '90216' }]};\r
 * R.modifyPath(['addresses', 0, 'zipCode'], R.reverse, person); //=> {name: 'James', addresses: [{ zipCode: '61209' }]}\r
 * \`\`\`\r
 */\r
declare function modifyPath<K0 extends keyof U, U, T>(\r
  path: [K0],\r
  fn: (value: U[K0]) => T,\r
  obj: U\r
): DeepModify<[K0], U, T>\r
declare function modifyPath<K0 extends keyof U, K1 extends keyof U[K0], U, T>(\r
  path: [K0, K1],\r
  fn: (value: U[K0][K1]) => T,\r
  obj: U\r
): DeepModify<[K0, K1], U, T>\r
declare function modifyPath<\r
  K0 extends keyof U,\r
  K1 extends keyof U[K0],\r
  K2 extends keyof U[K0][K1],\r
  U,\r
  T\r
>(\r
  path: [K0, K1, K2],\r
  fn: (value: U[K0][K1][K2]) => T,\r
  obj: U\r
): DeepModify<[K0, K1, K2], U, T>\r
declare function modifyPath<\r
  K0 extends keyof U,\r
  K1 extends keyof U[K0],\r
  K2 extends keyof U[K0][K1],\r
  K3 extends keyof U[K0][K1][K2],\r
  U,\r
  T\r
>(\r
  path: [K0, K1, K2, K3],\r
  fn: (value: U[K0][K1][K2][K3]) => T,\r
  obj: U\r
): DeepModify<[K0, K1, K2, K3], U, T>\r
declare function modifyPath<\r
  K0 extends keyof U,\r
  K1 extends keyof U[K0],\r
  K2 extends keyof U[K0][K1],\r
  K3 extends keyof U[K0][K1][K2],\r
  K4 extends keyof U[K0][K1][K2][K3],\r
  U,\r
  T\r
>(\r
  path: [K0, K1, K2, K3, K4],\r
  fn: (value: U[K0][K1][K2][K3][K4]) => T,\r
  obj: U\r
): DeepModify<[K0, K1, K2, K3, K4], U, T>\r
declare function modifyPath<\r
  K0 extends keyof U,\r
  K1 extends keyof U[K0],\r
  K2 extends keyof U[K0][K1],\r
  K3 extends keyof U[K0][K1][K2],\r
  K4 extends keyof U[K0][K1][K2][K3],\r
  K5 extends keyof U[K0][K1][K2][K3][K4],\r
  U,\r
  T\r
>(\r
  path: [K0, K1, K2, K3, K4, K5],\r
  fn: (value: U[K0][K1][K2][K3][K4][K5]) => T,\r
  obj: U\r
): DeepModify<[K0, K1, K2, K3, K4, K5], U, T>\r
declare function modifyPath<\r
  K0 extends keyof U,\r
  K1 extends keyof U[K0],\r
  K2 extends keyof U[K0][K1],\r
  K3 extends keyof U[K0][K1][K2],\r
  K4 extends keyof U[K0][K1][K2][K3],\r
  K5 extends keyof U[K0][K1][K2][K3][K4],\r
  K6 extends keyof U[K0][K1][K2][K3][K4][K5],\r
  U,\r
  T\r
>(\r
  path: [K0, K1, K2, K3, K4, K5, K6],\r
  fn: (value: U[K0][K1][K2][K3][K4][K5][K6]) => T,\r
  obj: U\r
): DeepModify<[K0, K1, K2, K3, K4, K5, K6], U, T>\r
// backup type\r
// for unknown path, or key-chain larger than 6, allow user to set output type B and input type A\r
declare function modifyPath<B, A = any>(\r
  path: Path,\r
  fn: (a: any) => any,\r
  obj: A\r
): B\r
\r
/**\r
 * Divides the first parameter by the second and returns the remainder. Note\r
 * that this function preserves the JavaScript-style behavior for modulo. For\r
 * mathematical modulo see [\`mathMod\`](#mathMod).\r
 *\r
 * See also {@link mathMod}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.modulo(17, 3); //=> 2\r
 * // JS behavior:\r
 * R.modulo(-17, 3); //=> -2\r
 * R.modulo(17, -3); //=> 2\r
 *\r
 * const isOdd = R.modulo(R.__, 2);\r
 * isOdd(42); //=> 0\r
 * isOdd(21); //=> 1\r
 * \`\`\`\r
 */\r
declare function modulo(a: number): (b: number) => number\r
declare function modulo(__: Placeholder, b: number): (a: number) => number\r
declare function modulo(a: number, b: number): number\r
\r
/**\r
 * Move an item, at index \`from\`, to index \`to\`, in a list of elements.\r
 * A new list will be created containing the new elements order.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.move(0, 2, ['a', 'b', 'c', 'd', 'e', 'f']); //=> ['b', 'c', 'a', 'd', 'e', 'f']\r
 * R.move(-1, 0, ['a', 'b', 'c', 'd', 'e', 'f']); //=> ['f', 'a', 'b', 'c', 'd', 'e'] list rotation\r
 * \`\`\`\r
 */\r
declare function move(from: number): {\r
  (to: number): <T>(list: readonly T[]) => T[]\r
  <T>(to: number, list: readonly T[]): T[]\r
}\r
declare function move(from: number, to: number): <T>(list: readonly T[]) => T[]\r
declare function move<T>(from: number, to: number, list: readonly T[]): T[]\r
\r
/**\r
 * Multiplies two numbers. Equivalent to \`a * b\` but curried.\r
 *\r
 * See also {@link divide}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const double = R.multiply(2);\r
 * const triple = R.multiply(3);\r
 * double(3);       //=>  6\r
 * triple(4);       //=> 12\r
 * R.multiply(2, 5);  //=> 10\r
 * \`\`\`\r
 */\r
declare function multiply(a: number): (b: number) => number\r
declare function multiply(a: number, b: number): number\r
\r
/**\r
 * Wraps a function of any arity (including nullary) in a function that accepts\r
 * exactly \`n\` parameters. Any extraneous parameters will not be passed to the\r
 * supplied function.\r
 *\r
 * See also {@link binary}, {@link unary}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const takesTwoArgs = (a, b) => [a, b];\r
 *\r
 * takesTwoArgs.length; //=> 2\r
 * takesTwoArgs(1, 2); //=> [1, 2]\r
 *\r
 * const takesOneArg = R.nAry(1, takesTwoArgs);\r
 * takesOneArg.length; //=> 1\r
 * // Only \`n\` arguments are passed to the wrapped function\r
 * takesOneArg(1, 2); //=> [1, undefined]\r
 * \`\`\`\r
 */\r
declare function nAry<N extends number>(\r
  n: N\r
): <T extends (...arg: any) => unknown>(\r
  fn: T\r
) => (...arg: Take$1<Parameters<T>, N>) => ReturnType<T>\r
declare function nAry<N extends number, T extends (...arg: any) => unknown>(\r
  n: N,\r
  fn: T\r
): (...arg: Take$1<Parameters<T>, N>) => ReturnType<T>\r
\r
/**\r
 * Negates its argument.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.negate(42); //=> -42\r
 * \`\`\`\r
 */\r
declare function negate(n: number): number\r
\r
/**\r
 * Returns \`true\` if no elements of the list match the predicate, \`false\`\r
 * otherwise.\r
 *\r
 * Dispatches to the \`all\` method of the second argument, if present.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link all}, {@link any}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const isEven = n => n % 2 === 0;\r
 * const isOdd = n => n % 2 !== 0;\r
 *\r
 * R.none(isEven, [1, 3, 5, 7, 9, 11]); //=> true\r
 * R.none(isOdd, [1, 3, 5, 7, 8, 11]); //=> false\r
 * \`\`\`\r
 */\r
declare function none<T>(fn: (a: T) => boolean): (list: readonly T[]) => boolean\r
declare function none<T>(fn: (a: T) => boolean, list: readonly T[]): boolean\r
\r
/**\r
 * A function that returns the \`!\` of its argument. It will return \`true\` when\r
 * passed false-y value, and \`false\` when passed a truth-y one.\r
 *\r
 * See also {@link complement}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.not(true); //=> false\r
 * R.not(false); //=> true\r
 * R.not(0); //=> true\r
 * R.not(1); //=> false\r
 * \`\`\`\r
 */\r
declare function not(value: any): boolean\r
\r
/**\r
 * Returns the nth element of the given list or string. If n is negative the\r
 * element at index length + n is returned.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const list = ['foo', 'bar', 'baz', 'quux'];\r
 * R.nth(1, list); //=> 'bar'\r
 * R.nth(-1, list); //=> 'quux'\r
 * R.nth(-99, list); //=> undefined\r
 *\r
 * R.nth(2, 'abc'); //=> 'c'\r
 * R.nth(3, 'abc'); //=> ''\r
 * \`\`\`\r
 */\r
declare function nth(\r
  n: number\r
): <T extends readonly any[] | string>(\r
  list: T\r
) => (T extends Array<infer E> ? E : string) | undefined\r
declare function nth(n: number, list: string): string\r
declare function nth<T>(n: number, list: readonly T[]): T | undefined\r
\r
/**\r
 * Returns a function which returns its nth argument.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.nthArg(1)('a', 'b', 'c'); //=> 'b'\r
 * R.nthArg(-1)('a', 'b', 'c'); //=> 'c'\r
 * \`\`\`\r
 */\r
declare function nthArg(n: number): (...a: readonly any[]) => any\r
\r
/**\r
 * \`o\` is a curried composition function that returns a unary function.\r
 * Like [\`compose\`](#compose), \`o\` performs right-to-left function composition.\r
 * Unlike [\`compose\`](#compose), the rightmost function passed to \`o\` will be\r
 * invoked with only one argument. Also, unlike [\`compose\`](#compose), \`o\` is\r
 * limited to accepting only 2 unary functions. The name o was chosen because\r
 * of its similarity to the mathematical composition operator ∘.\r
 *\r
 * See also {@link compose}, {@link pipe}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const classyGreeting = name => "The name's " + name.last + ", " + name.first + " " + name.last\r
 * const yellGreeting = R.o(R.toUpper, classyGreeting);\r
 * yellGreeting({first: 'James', last: 'Bond'}); //=> "THE NAME'S BOND, JAMES BOND"\r
 *\r
 * R.o(R.multiply(10), R.add(10))(-4) //=> 60\r
 * \`\`\`\r
 */\r
declare function o<T2, R>(\r
  f: (x: T2) => R\r
): {\r
  <T1>(g: (x: T1) => T2): (v: T1) => R\r
  <T1>(g: (x: T1) => T2, v: T1): R\r
}\r
declare function o<T1, T2, R>(f: (x: T2) => R, g: (x: T1) => T2): (v: T1) => R\r
declare function o<T1, T2, R>(f: (x: T2) => R, g: (x: T1) => T2, v: T1): R\r
\r
/**\r
 * Creates an object containing a single key:value pair.\r
 *\r
 * See also {@link pair}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const matchPhrases = R.compose(\r
 *   R.objOf('must'),\r
 *   R.map(R.objOf('match_phrase'))\r
 * );\r
 * matchPhrases(['foo', 'bar', 'baz']); //=> {must: [{match_phrase: 'foo'}, {match_phrase: 'bar'}, {match_phrase: 'baz'}]}\r
 * \`\`\`\r
 */\r
declare function objOf<K extends string>(key: K): <T>(value: T) => Record<K, T>\r
declare function objOf<T, K extends string>(key: K, value: T): Record<K, T>\r
\r
/**\r
 * Given a constructor and a value, returns a new instance of that constructor\r
 * containing the value.\r
 *\r
 * Dispatches to the \`fantasy-land/of\` method of the constructor first (if present)\r
 * or to the \`of\` method last (if present). When neither are present, wraps the\r
 * value in an array.\r
 *\r
 * Note this \`of\` is different from the ES6 \`of\`; See\r
 * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/of\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.of(Array, 42);   //=> [42]\r
 * R.of(Array, [42]); //=> [[42]]\r
 * R.of(Maybe, 42);   //=> Maybe.Just(42)\r
 * \`\`\`\r
 */\r
declare function of<Ctor extends { of: (value: any) => any }>(\r
  ctor: Ctor\r
): <T extends Parameters<Ctor["of"]>[0]>(\r
  val: T\r
) => Ctor extends ArrayConstructor ? T[] : ReturnType<Ctor["of"]>\r
// of(__, val)(ctor)\r
declare function of<T>(\r
  __: Placeholder,\r
  val: T\r
): <Ctor extends { of: (value: any) => any }>(\r
  ctor: Ctor\r
) => Ctor extends ArrayConstructor ? T[] : ReturnType<Ctor["of"]>\r
// of(ctor, val)\r
declare function of<\r
  Ctor extends { of: (value: any) => any },\r
  T extends Parameters<Ctor["of"]>[0]\r
>(\r
  ctor: Ctor,\r
  val: T\r
): Ctor extends ArrayConstructor ? T[] : ReturnType<Ctor["of"]>\r
\r
/**\r
 * Returns a partial copy of an object omitting the keys specified.\r
 *\r
 * See also {@link pick}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.omit(['a', 'd'], {a: 1, b: 2, c: 3, d: 4}); //=> {b: 2, c: 3}\r
 * \`\`\`\r
 */\r
declare function omit<K extends string>(\r
  names: readonly K[]\r
): <T>(obj: T) => Omit<T, K>\r
declare function omit<T, K extends string>(\r
  names: readonly K[],\r
  obj: T\r
): Omit<T, K>\r
\r
/**\r
 * Takes a binary function \`f\`, a unary function \`g\`, and two values.\r
 * Applies \`g\` to each value, then applies the result of each to \`f\`.\r
 *\r
 * Also known as the P combinator.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const eqBy = R.on((a, b) => a === b);\r
 * eqBy(R.prop('a'), {b:0, a:1}, {a:1}) //=> true;\r
 *\r
 * const containsInsensitive = R.on(R.includes, R.toLower);\r
 * containsInsensitive('o', 'FOO'); //=> true\r
 * \`\`\`\r
 */\r
declare function on<U, R>(\r
  combine: (a: U, b: U) => R\r
): {\r
  <T>(transform: (value: T) => U): {\r
    (a: T): (b: T) => R\r
    (a: T, b: T): R\r
  }\r
  <T>(transform: (value: T) => U, a: T): (b: T) => R\r
  <T>(transform: (value: T) => U, a: T, b: T): R\r
}\r
\r
// For manually specifying overloads\r
declare function on<T, U, R>(\r
  combine: (a: U, b: U) => R\r
): {\r
  (transform: (value: T) => U): {\r
    (a: T): (b: T) => R\r
    (a: T, b: T): R\r
  }\r
  (transform: (value: T) => U, a: T): (b: T) => R\r
  (transform: (value: T) => U, a: T, b: T): R\r
}\r
\r
declare function on<T, U, R>(\r
  combine: (a: U, b: U) => R,\r
  transform: (value: T) => U\r
): {\r
  (a: T): (b: T) => R\r
  (a: T, b: T): R\r
}\r
declare function on<T, U, R>(\r
  combine: (a: U, b: U) => R,\r
  transform: (value: T) => U,\r
  a: T\r
): (b: T) => R\r
declare function on<T, U, R>(\r
  combine: (a: U, b: U) => R,\r
  transform: (value: T) => U,\r
  a: T,\r
  b: T\r
): R\r
\r
/**\r
 * Accepts a function \`fn\` and returns a function that guards invocation of\r
 * \`fn\` such that \`fn\` can only ever be called once, no matter how many times\r
 * the returned function is invoked. The first value calculated is returned in\r
 * subsequent invocations.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const addOneOnce = R.once(x => x + 1);\r
 * addOneOnce(10); //=> 11\r
 * addOneOnce(addOneOnce(50)); //=> 11\r
 * \`\`\`\r
 */\r
declare function once<F extends (...a: readonly any[]) => any>(fn: F): F\r
\r
/**\r
 * Returns the first argument if it is truthy, otherwise the second argument.\r
 * Acts as the boolean \`or\` statement if both inputs are \`Boolean\`s.\r
 *\r
 * See also {@link either}, {@link and}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.or(true, true); //=> true\r
 * R.or(true, false); //=> true\r
 * R.or(false, true); //=> true\r
 * R.or(false, false); //=> false\r
 * \`\`\`\r
 */\r
declare function or<T>(a: T | Falsy): <U>(b: U) => T | U\r
declare function or<T, U>(a: T | Falsy, b: U): T | U\r
\r
/**\r
 * Returns the result of applying the onFailure function to the value inside\r
 * a failed promise. This is useful for handling rejected promises\r
 * inside function compositions.\r
 *\r
 * See also {@link andThen}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const failedFetch = id => Promise.reject('bad ID');\r
 * const useDefault = () => ({ firstName: 'Bob', lastName: 'Loblaw' });\r
 *\r
 * //recoverFromFailure :: String -> Promise ({ firstName, lastName })\r
 * const recoverFromFailure = R.pipe(\r
 *   failedFetch,\r
 *   R.otherwise(useDefault),\r
 *   R.andThen(R.pick(['firstName', 'lastName'])),\r
 * );\r
 * recoverFromFailure(12345).then(console.log);\r
 * \`\`\`\r
 */\r
declare function otherwise<A, B>(\r
  onError: (error: any) => B | Promise<B>\r
): (promise: Promise<A>) => Promise<B>\r
declare function otherwise<A, B>(\r
  onError: (error: any) => B | Promise<B>,\r
  promise: Promise<A>\r
): Promise<B>\r
\r
/**\r
 * Returns the result of "setting" the portion of the given data structure\r
 * focused by the given lens to the result of applying the given function to\r
 * the focused value.\r
 *\r
 * See also {@link view}, {@link set}, {@link lens}, {@link lensIndex}, {@link lensProp}, {@link lensPath}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const headLens = R.lensIndex(0);\r
 *\r
 * R.over(headLens, R.toUpper, ['foo', 'bar', 'baz']); //=> ['FOO', 'bar', 'baz']\r
 * \`\`\`\r
 */\r
declare function over<S, A>(\r
  lens: Lens<S, A>\r
): {\r
  (fn: (a: A) => A): (value: S) => S\r
  (fn: (a: A) => A, value: S): S\r
}\r
declare function over<S, A>(lens: Lens<S, A>, fn: (a: A) => A): (value: S) => S\r
declare function over<S, A>(lens: Lens<S, A>, fn: (a: A) => A, value: S): S\r
\r
/**\r
 * Takes two arguments, \`fst\` and \`snd\`, and returns \`[fst, snd]\`.\r
 *\r
 * See also {@link objOf}, {@link of}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.pair('foo', 'bar'); //=> ['foo', 'bar']\r
 * \`\`\`\r
 */\r
declare function pair<F>(fst: F): <S>(snd: S) => [F, S]\r
declare function pair<F, S>(fst: F, snd: S): [F, S]\r
\r
/**\r
 * Takes a function \`f\` and a list of arguments, and returns a function \`g\`.\r
 * When applied, \`g\` returns the result of applying \`f\` to the arguments\r
 * provided initially followed by the arguments provided to \`g\`.\r
 *\r
 * See also {@link partialRight}, {@link curry}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const multiply2 = (a, b) => a * b;\r
 * const double = R.partial(multiply2, [2]);\r
 * double(3); //=> 6\r
 *\r
 * const greet = (salutation, title, firstName, lastName) =>\r
 *   salutation + ', ' + title + ' ' + firstName + ' ' + lastName + '!';\r
 *\r
 * const sayHello = R.partial(greet, ['Hello']);\r
 * const sayHelloToMs = R.partial(sayHello, ['Ms.']);\r
 * sayHelloToMs('Jane', 'Jones'); //=> 'Hello, Ms. Jane Jones!'\r
 * \`\`\`\r
 */\r
declare function partial<V0, V1, T>(\r
  fn: (x0: V0, x1: V1) => T,\r
  args: [V0]\r
): (x1: V1) => T\r
declare function partial<V0, V1, V2, T>(\r
  fn: (x0: V0, x1: V1, x2: V2) => T,\r
  args: [V0, V1]\r
): (x2: V2) => T\r
declare function partial<V0, V1, V2, T>(\r
  fn: (x0: V0, x1: V1, x2: V2) => T,\r
  args: [V0]\r
): (x1: V1, x2: V2) => T\r
declare function partial<V0, V1, V2, V3, T>(\r
  fn: (x0: V0, x1: V1, x2: V2, x3: V3) => T,\r
  args: [V0, V1, V2]\r
): (x2: V3) => T\r
declare function partial<V0, V1, V2, V3, T>(\r
  fn: (x0: V0, x1: V1, x2: V2, x3: V3) => T,\r
  args: [V0, V1]\r
): (x2: V2, x3: V3) => T\r
declare function partial<V0, V1, V2, V3, T>(\r
  fn: (x0: V0, x1: V1, x2: V2, x3: V3) => T,\r
  args: [V0]\r
): (x1: V1, x2: V2, x3: V3) => T\r
declare function partial<T>(\r
  fn: (...a: readonly any[]) => T,\r
  args: readonly any[]\r
): (...a: readonly any[]) => T\r
\r
/**\r
 * Takes a function \`f\` and an object, and returns a function \`g\`.\r
 * When applied, \`g\` returns the result of applying \`f\` to the object\r
 * provided initially merged deeply (right) with the object provided as an argument to \`g\`.\r
 *\r
 * See also {@link partial}, {@link partialRight}, {@link curry}, {@link mergeDeepRight}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const multiply2 = ({ a, b }) => a * b;\r
 * const double = R.partialObject(multiply2, { a: 2 });\r
 * double({ b: 2 }); //=> 4\r
 *\r
 * const greet = ({ salutation, title, firstName, lastName }) =>\r
 *   salutation + ', ' + title + ' ' + firstName + ' ' + lastName + '!';\r
 *\r
 * const sayHello = R.partialObject(greet, { salutation: 'Hello' });\r
 * const sayHelloToMs = R.partialObject(sayHello, { title: 'Ms.' });\r
 * sayHelloToMs({ firstName: 'Jane', lastName: 'Jones' }); //=> 'Hello, Ms. Jane Jones!'\r
 * \`\`\`\r
 */\r
declare function partialObject<T, R>(\r
  fn: (value: T) => R\r
): <P1>(partial: P1) => (value: Omit<T, keyof P1>) => R\r
declare function partialObject<T extends P1, P1, R>(\r
  fn: (value: T) => R,\r
  partial: P1\r
): (value: Omit<T, keyof P1>) => R\r
\r
/**\r
 * Takes a function \`f\` and a list of arguments, and returns a function \`g\`.\r
 * When applied, \`g\` returns the result of applying \`f\` to the arguments\r
 * provided to \`g\` followed by the arguments provided initially.\r
 *\r
 * See also {@link partial}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const greet = (salutation, title, firstName, lastName) =>\r
 *   salutation + ', ' + title + ' ' + firstName + ' ' + lastName + '!';\r
 *\r
 * const greetMsJaneJones = R.partialRight(greet, ['Ms.', 'Jane', 'Jones']);\r
 *\r
 * greetMsJaneJones('Hello'); //=> 'Hello, Ms. Jane Jones!'\r
 * \`\`\`\r
 */\r
declare function partialRight<V0, V1, T>(\r
  fn: (x0: V0, x1: V1) => T,\r
  args: [V1]\r
): (x1: V0) => T\r
declare function partialRight<V0, V1, V2, T>(\r
  fn: (x0: V0, x1: V1, x2: V2) => T,\r
  args: [V1, V2]\r
): (x2: V0) => T\r
declare function partialRight<V0, V1, V2, T>(\r
  fn: (x0: V0, x1: V1, x2: V2) => T,\r
  args: [V2]\r
): (x1: V0, x2: V1) => T\r
declare function partialRight<V0, V1, V2, V3, T>(\r
  fn: (x0: V0, x1: V1, x2: V2, x3: V3) => T,\r
  args: [V1, V2, V3]\r
): (x0: V0) => T\r
declare function partialRight<V0, V1, V2, V3, T>(\r
  fn: (x0: V0, x1: V1, x2: V2, x3: V3) => T,\r
  args: [V2, V3]\r
): (x0: V0, x1: V1) => T\r
declare function partialRight<V0, V1, V2, V3, T>(\r
  fn: (x0: V0, x1: V1, x2: V2, x3: V3) => T,\r
  args: [V3]\r
): (x0: V0, x1: V1, x2: V2) => T\r
declare function partialRight<T>(\r
  fn: (...a: readonly any[]) => T,\r
  args: readonly any[]\r
): (...a: readonly any[]) => T\r
\r
/**\r
 * Takes a predicate and a list or other \`Filterable\` object and returns the\r
 * pair of filterable objects of the same type of elements which do and do not\r
 * satisfy, the predicate, respectively. Filterable objects include plain objects or any object\r
 * that has a filter method such as \`Array\`.\r
 *\r
 * See also {@link filter}, {@link reject}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.partition(R.includes('s'), ['sss', 'ttt', 'foo', 'bars']);\r
 * // => [ [ 'sss', 'bars' ],  [ 'ttt', 'foo' ] ]\r
 *\r
 * R.partition(R.includes('s'), { a: 'sss', b: 'ttt', foo: 'bars' });\r
 * // => [ { a: 'sss', foo: 'bars' }, { b: 'ttt' }  ]\r
 * \`\`\`\r
 */\r
declare function partition(\r
  fn: (a: string) => boolean\r
): (list: readonly string[]) => [string[], string[]]\r
declare function partition<T>(\r
  fn: (a: T) => boolean\r
): (list: readonly T[]) => [T[], T[]]\r
declare function partition(\r
  fn: (a: string) => boolean,\r
  list: readonly string[]\r
): [string[], string[]]\r
declare function partition<T>(\r
  fn: (a: T) => boolean,\r
  list: readonly T[]\r
): [T[], T[]]\r
\r
/**\r
 * Retrieves the value at a given path. The nodes of the path can be arbitrary strings or non-negative integers.\r
 * For anything else, the value is unspecified. Integer paths are meant to index arrays, strings are meant for objects.\r
 *\r
 * See also {@link prop}, {@link nth}, {@link assocPath}, {@link dissocPath}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.path(['a', 'b'], {a: {b: 2}}); //=> 2\r
 * R.path(['a', 'b'], {c: {b: 2}}); //=> undefined\r
 * R.path(['a', 'b', 0], {a: {b: [1, 2, 3]}}); //=> 1\r
 * R.path(['a', 'b', -2], {a: {b: [1, 2, 3]}}); //=> 2\r
 * R.path([2], {'2': 2}); //=> 2\r
 * R.path([-2], {'-2': 'a'}); //=> undefined\r
 * \`\`\`\r
 */\r
declare function path<S, K0 extends keyof S = keyof S>(\r
  path: [K0],\r
  obj: S\r
): S[K0]\r
declare function path<\r
  S,\r
  K0 extends keyof S = keyof S,\r
  K1 extends keyof S[K0] = keyof S[K0]\r
>(path: [K0, K1], obj: S): S[K0][K1]\r
declare function path<\r
  S,\r
  K0 extends keyof S = keyof S,\r
  K1 extends keyof S[K0] = keyof S[K0],\r
  K2 extends keyof S[K0][K1] = keyof S[K0][K1]\r
>(path: [K0, K1, K2], obj: S): S[K0][K1][K2]\r
declare function path<\r
  S,\r
  K0 extends keyof S = keyof S,\r
  K1 extends keyof S[K0] = keyof S[K0],\r
  K2 extends keyof S[K0][K1] = keyof S[K0][K1],\r
  K3 extends keyof S[K0][K1][K2] = keyof S[K0][K1][K2]\r
>(path: [K0, K1, K2, K3], obj: S): S[K0][K1][K2][K3]\r
declare function path<\r
  S,\r
  K0 extends keyof S = keyof S,\r
  K1 extends keyof S[K0] = keyof S[K0],\r
  K2 extends keyof S[K0][K1] = keyof S[K0][K1],\r
  K3 extends keyof S[K0][K1][K2] = keyof S[K0][K1][K2],\r
  K4 extends keyof S[K0][K1][K2][K3] = keyof S[K0][K1][K2][K3]\r
>(path: [K0, K1, K2, K3, K4], obj: S): S[K0][K1][K2][K3][K4]\r
declare function path<\r
  S,\r
  K0 extends keyof S = keyof S,\r
  K1 extends keyof S[K0] = keyof S[K0],\r
  K2 extends keyof S[K0][K1] = keyof S[K0][K1],\r
  K3 extends keyof S[K0][K1][K2] = keyof S[K0][K1][K2],\r
  K4 extends keyof S[K0][K1][K2][K3] = keyof S[K0][K1][K2][K3],\r
  K5 extends keyof S[K0][K1][K2][K3][K4] = keyof S[K0][K1][K2][K3][K4]\r
>(path: [K0, K1, K2, K3, K4, K5], obj: S): S[K0][K1][K2][K3][K4][K5]\r
declare function path<T>(path: Path, obj: any): T | undefined\r
declare function path<T>(path: Path): (obj: any) => T | undefined\r
\r
/**\r
 * Determines whether a nested path on an object has a specific value, in\r
 * [\`R.equals\`](#equals) terms. Most likely used to filter a list.\r
 *\r
 * See also {@link whereEq}, {@link propEq}, {@link pathSatisfies}, {@link equals}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const user1 = { address: { zipCode: 90210 } };\r
 * const user2 = { address: { zipCode: 55555 } };\r
 * const user3 = { name: 'Bob' };\r
 * const users = [ user1, user2, user3 ];\r
 * const isFamous = R.pathEq(90210, ['address', 'zipCode']);\r
 * R.filter(isFamous, users); //=> [ user1 ]\r
 * \`\`\`\r
 */\r
declare function pathEq(val: any): {\r
  (path: Path): (obj: any) => boolean\r
  (path: Path, obj: any): boolean\r
}\r
declare function pathEq(val: any, path: Path): (obj: any) => boolean\r
declare function pathEq(val: any, path: Path, obj: any): boolean\r
\r
/**\r
 * If the given, non-null object has a value at the given path, returns the\r
 * value at that path. Otherwise returns the provided default value.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.pathOr('N/A', ['a', 'b'], {a: {b: 2}}); //=> 2\r
 * R.pathOr('N/A', ['a', 'b'], {c: {b: 2}}); //=> "N/A"\r
 * \`\`\`\r
 */\r
declare function pathOr<T>(defaultValue: T): Curry<(a: Path, b: any) => T>\r
declare function pathOr<T>(defaultValue: T, path: Path): (obj: any) => T\r
declare function pathOr<T>(defaultValue: T, path: Path, obj: any): T\r
\r
/**\r
 * Retrieves the values at given paths of an object.\r
 *\r
 * See also {@link path}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.paths([['a', 'b'], ['p', 0, 'q']], {a: {b: 2}, p: [{q: 3}]}); //=> [2, 3]\r
 * R.paths([['a', 'b'], ['p', 'r']], {a: {b: 2}, p: [{q: 3}]}); //=> [2, undefined]\r
 * \`\`\`\r
 */\r
declare function paths<T>(paths: Path[]): (obj: any) => Array<T | undefined>\r
declare function paths<T>(paths: Path[], obj: any): Array<T | undefined>\r
\r
/**\r
 * Returns \`true\` if the specified object property at given path satisfies the\r
 * given predicate; \`false\` otherwise.\r
 *\r
 * See also {@link propSatisfies}, {@link path}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.pathSatisfies(y => y > 0, ['x', 'y'], {x: {y: 2}}); //=> true\r
 * R.pathSatisfies(R.is(Object), [], {x: {y: 2}}); //=> true\r
 * \`\`\`\r
 */\r
declare function pathSatisfies<T, U>(\r
  pred: (val: T) => boolean\r
): Curry<(a: Path, b: U) => boolean>\r
declare function pathSatisfies<T, U>(\r
  pred: (val: T) => boolean,\r
  path: Path\r
): (obj: U) => boolean\r
declare function pathSatisfies<T, U>(\r
  pred: (val: T) => boolean,\r
  path: Path,\r
  obj: U\r
): boolean\r
\r
/**\r
 * Returns a partial copy of an object containing only the keys specified. If\r
 * the key does not exist, the property is ignored.\r
 *\r
 * See also {@link omit}, {@link props}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.pick(['a', 'd'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1, d: 4}\r
 * R.pick(['a', 'e', 'f'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1}\r
 * \`\`\`\r
 */\r
declare function pick<\r
  const Names extends readonly [PropertyKey, ...PropertyKey[]]\r
>(\r
  names: Names\r
): <U extends Record<ElementOf<Names>, any>>(\r
  obj: U\r
) => string extends keyof U\r
  ? Record<string, U[keyof U]>\r
  : Pick<U, ElementOf<Names>>\r
declare function pick<\r
  U,\r
  const Names extends readonly [keyof U, ...(keyof U)[]]\r
>(\r
  names: Names,\r
  obj: U\r
): string extends keyof U\r
  ? Record<string, U[keyof U]>\r
  : Pick<U, ElementOf<Names>>\r
\r
/**\r
 * Similar to \`pick\` except that this one includes a \`key: undefined\` pair for\r
 * properties that don't exist.\r
 *\r
 * See also {@link pick}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.pickAll(['a', 'd'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1, d: 4}\r
 * R.pickAll(['a', 'e', 'f'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1, e: undefined, f: undefined}\r
 * \`\`\`\r
 */\r
declare function pickAll(names: readonly string[]): <T, U>(obj: T) => U\r
declare function pickAll<T, K extends keyof T>(\r
  names: readonly K[],\r
  obj: T\r
): Pick<T, K>\r
declare function pickAll<T, U>(names: readonly string[], obj: T): U\r
\r
/**\r
 * Returns a partial copy of an object containing only the keys that satisfy\r
 * the supplied predicate.\r
 *\r
 * See also {@link pick}, {@link filter}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const isUpperCase = (val, key) => key.toUpperCase() === key;\r
 * R.pickBy(isUpperCase, {a: 1, b: 2, A: 3, B: 4}); //=> {A: 3, B: 4}\r
 * \`\`\`\r
 */\r
declare function pickBy<T>(pred: ObjPred<T>): <U, V extends T>(obj: V) => U\r
declare function pickBy<T, U>(pred: ObjPred<T>, obj: T): U\r
\r
/**\r
 * Performs left-to-right function composition. The first argument may have\r
 * any arity; the remaining arguments must be unary.\r
 *\r
 * In some libraries this function is named \`sequence\`.\r
 *\r
 * **Note:** The result of pipe is not automatically curried.\r
 *\r
 * See also {@link compose}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const f = R.pipe(Math.pow, R.negate, R.inc);\r
 *\r
 * f(3, 4); // -(3^4) + 1\r
 * \`\`\`\r
 */\r
declare function pipe<TArgs extends any[], R1, R2, R3, R4, R5, R6, R7, TResult>(\r
  ...funcs: [\r
    f1: (...args: TArgs) => R1,\r
    f2: (a: R1) => R2,\r
    f3: (a: R2) => R3,\r
    f4: (a: R3) => R4,\r
    f5: (a: R4) => R5,\r
    f6: (a: R5) => R6,\r
    f7: (a: R6) => R7,\r
    ...func: Array<(a: any) => any>,\r
    fnLast: (a: any) => TResult\r
  ]\r
): (...args: TArgs) => TResult\r
// fallback overload if number of piped functions greater than 7\r
declare function pipe<TArgs extends any[], R1, R2, R3, R4, R5, R6, R7>(\r
  f1: (...args: TArgs) => R1,\r
  f2: (a: R1) => R2,\r
  f3: (a: R2) => R3,\r
  f4: (a: R3) => R4,\r
  f5: (a: R4) => R5,\r
  f6: (a: R5) => R6,\r
  f7: (a: R6) => R7\r
): (...args: TArgs) => R7\r
declare function pipe<TArgs extends any[], R1, R2, R3, R4, R5, R6>(\r
  f1: (...args: TArgs) => R1,\r
  f2: (a: R1) => R2,\r
  f3: (a: R2) => R3,\r
  f4: (a: R3) => R4,\r
  f5: (a: R4) => R5,\r
  f6: (a: R5) => R6\r
): (...args: TArgs) => R6\r
declare function pipe<TArgs extends any[], R1, R2, R3, R4, R5>(\r
  f1: (...args: TArgs) => R1,\r
  f2: (a: R1) => R2,\r
  f3: (a: R2) => R3,\r
  f4: (a: R3) => R4,\r
  f5: (a: R4) => R5\r
): (...args: TArgs) => R5\r
declare function pipe<TArgs extends any[], R1, R2, R3, R4>(\r
  f1: (...args: TArgs) => R1,\r
  f2: (a: R1) => R2,\r
  f3: (a: R2) => R3,\r
  f4: (a: R3) => R4\r
): (...args: TArgs) => R4\r
declare function pipe<TArgs extends any[], R1, R2, R3>(\r
  f1: (...args: TArgs) => R1,\r
  f2: (a: R1) => R2,\r
  f3: (a: R2) => R3\r
): (...args: TArgs) => R3\r
declare function pipe<TArgs extends any[], R1, R2>(\r
  f1: (...args: TArgs) => R1,\r
  f2: (a: R1) => R2\r
): (...args: TArgs) => R2\r
declare function pipe<TArgs extends any[], R1>(\r
  f1: (...args: TArgs) => R1\r
): (...args: TArgs) => R1\r
\r
/**\r
 * Performs left-to-right function composition using transforming function. The first function may have\r
 * any arity; the remaining functions must be unary.\r
 *\r
 * **Note:** The result of pipeWith is not automatically curried. Transforming function is not used on the\r
 * first argument.\r
 *\r
 * See also {@link composeWith}, {@link pipe}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const pipeWhileNotNil = R.pipeWith((f, res) => R.isNil(res) ? res : f(res));\r
 * const f = pipeWhileNotNil([Math.pow, R.negate, R.inc])\r
 *\r
 * f(3, 4); // -(3^4) + 1\r
 * \`\`\`\r
 */\r
declare function pipeWith(\r
  transformer: (fn: (...args: any[]) => any, intermediatResult: any) => any\r
): <TArgs extends any[], TResult>(\r
  fns: AtLeastOneFunctionsFlow<TArgs, TResult>\r
) => (...args: TArgs) => TResult\r
declare function pipeWith<TArgs extends any[], TResult>(\r
  transformer: (fn: (...args: any[]) => any, intermediatResult: any) => any,\r
  fns: AtLeastOneFunctionsFlow<TArgs, TResult>\r
): (...args: TArgs) => TResult\r
\r
/**\r
 * Returns a new list by plucking the same named property off all objects in\r
 * the list supplied.\r
 *\r
 * \`pluck\` will work on\r
 * any [functor](https://github.com/fantasyland/fantasy-land#functor) in\r
 * addition to arrays, as it is equivalent to \`R.map(R.prop(k), f)\`.\r
 *\r
 * See also {@link project}, {@link prop}, {@link props}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * var getAges = R.pluck('age');\r
 * getAges([{name: 'fred', age: 29}, {name: 'wilma', age: 27}]); //=> [29, 27]\r
 *\r
 * R.pluck(0, [[1, 2], [3, 4]]);               //=> [1, 3]\r
 * R.pluck('val', {a: {val: 3}, b: {val: 5}}); //=> {a: 3, b: 5}\r
 * \`\`\`\r
 */\r
declare function pluck<K extends PropertyKey>(\r
  prop: K extends Placeholder ? never : K\r
): {\r
  <U extends readonly unknown[] | Record<K, any>>(\r
    obj: Record<PropertyKey, U>\r
  ): U extends readonly (infer T)[]\r
    ? T[]\r
    : U extends Record<K, infer T>\r
    ? T[]\r
    : never\r
  <U extends readonly unknown[] | Record<K, any>>(\r
    list: U[]\r
  ): U extends readonly (infer T)[]\r
    ? T[]\r
    : U extends Record<K, infer T>\r
    ? T[]\r
    : never\r
}\r
declare function pluck<U>(\r
  __: Placeholder,\r
  obj: Record<PropertyKey, U>\r
): <K extends keyof U>(prop: K) => Array<U[K]>\r
declare function pluck<U>(\r
  __: Placeholder,\r
  list: readonly U[]\r
): <K extends keyof U>(prop: K) => Array<U[K]>\r
declare function pluck<K extends keyof U, U>(\r
  prop: K,\r
  obj: Record<PropertyKey, U>\r
): Array<U[K]>\r
declare function pluck<K extends keyof U, U>(\r
  prop: K,\r
  list: readonly U[]\r
): Array<U[K]>\r
\r
/**\r
 * Returns a new list with the given element at the front, followed by the\r
 * contents of the list.\r
 *\r
 * See also {@link append}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.prepend('fee', ['fi', 'fo', 'fum']); //=> ['fee', 'fi', 'fo', 'fum']\r
 * \`\`\`\r
 */\r
declare function prepend<T>(el: T): (list: readonly T[]) => T[]\r
declare function prepend<T>(el: T, list: readonly T[]): T[]\r
\r
/**\r
 * Multiplies together all the elements of a list.\r
 *\r
 * See also {@link reduce}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.product([2,4,6,8,100,1]); //=> 38400\r
 * \`\`\`\r
 */\r
declare function product(list: readonly number[]): number\r
\r
/**\r
 * Reasonable analog to SQL \`select\` statement.\r
 *\r
 * See also {@link pluck}, {@link props}, {@link prop}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const abby = {name: 'Abby', age: 7, hair: 'blond', grade: 2};\r
 * const fred = {name: 'Fred', age: 12, hair: 'brown', grade: 7};\r
 * const kids = [abby, fred];\r
 * R.project(['name', 'grade'], kids); //=> [{name: 'Abby', grade: 2}, {name: 'Fred', grade: 7}]\r
 * \`\`\`\r
 */\r
declare function project<T, U>(\r
  props: readonly string[]\r
): (objs: readonly T[]) => U[]\r
declare function project<T, U>(\r
  props: readonly string[],\r
  objs: readonly T[]\r
): U[]\r
\r
/**\r
 * Takes two functions as pre- and post- processors respectively for a third function,\r
 * i.e. \`promap(f, g, h)(x) === g(h(f(x)))\`.\r
 *\r
 * Dispatches to the \`promap\` method of the third argument, if present,\r
 * according to the [FantasyLand Profunctor spec](https://github.com/fantasyland/fantasy-land#profunctor).\r
 *\r
 * Acts as a transducer if a transformer is given in profunctor position.\r
 *\r
 * See also {@link transduce}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const decodeChar = R.promap(s => s.charCodeAt(), String.fromCharCode, R.add(-8))\r
 * const decodeString = R.promap(R.split(''), R.join(''), R.map(decodeChar))\r
 * decodeString("ziuli") //=> "ramda"\r
 * \`\`\`\r
 */\r
declare function promap<A, B>(\r
  pre: (value: A) => B\r
): <C, D>(post: (value: C) => D, fn: (value: B) => C) => (value: A) => D\r
declare function promap<A, B, C, D>(\r
  pre: (value: A) => B,\r
  post: (value: C) => D\r
): (fn: (value: B) => C) => (value: A) => D\r
declare function promap<A, B, C, D>(\r
  pre: (value: A) => B,\r
  post: (value: C) => D,\r
  fn: (value: B) => C\r
): (value: A) => D\r
\r
/**\r
 * Returns a function that when supplied an object returns the indicated\r
 * property of that object, if it exists.\r
 *\r
 * See also {@link path}, {@link props}, {@link pluck}, {@link project}, {@link nth}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.prop('x', {x: 100}); //=> 100\r
 * R.prop('x', {}); //=> undefined\r
 * R.prop(0, [100]); //=> 100\r
 * R.compose(R.inc, R.prop('x'))({ x: 3 }) //=> 4\r
 * \`\`\`\r
 */\r
declare function prop<K extends PropertyKey>(\r
  prop: K extends Placeholder ? never : K\r
): <U extends Record<K, unknown>>(obj: U) => U[K]\r
// prop(__, obj)(key)\r
declare function prop<U>(\r
  __: Placeholder,\r
  obj: U\r
): <K extends keyof U>(prop: K) => U[K]\r
// prop(key, obj)\r
declare function prop<K extends keyof U, U>(prop: K, obj: U): U[K]\r
\r
/**\r
 * Returns \`true\` if the specified object property is equal, in\r
 * [\`R.equals\`](#equals) terms, to the given value; \`false\` otherwise.\r
 * You can test multiple properties with [\`R.whereEq\`](#whereEq),\r
 * and test nested path property with [\`R.pathEq\`](#pathEq).\r
 *\r
 * See also {@link whereEq}, {@link pathEq}, {@link propSatisfies}, {@link equals}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const abby = {name: 'Abby', age: 7, hair: 'blond'};\r
 * const fred = {name: 'Fred', age: 12, hair: 'brown'};\r
 * const rusty = {name: 'Rusty', age: 10, hair: 'brown'};\r
 * const alois = {name: 'Alois', age: 15, disposition: 'surly'};\r
 * const kids = [abby, fred, rusty, alois];\r
 * const hasBrownHair = R.propEq('brown', 'hair');\r
 * R.filter(hasBrownHair, kids); //=> [fred, rusty]\r
 * \`\`\`\r
 */\r
declare function propEq<T>(val: T): {\r
  <K extends PropertyKey>(name: K): (obj: Record<K, T>) => boolean\r
  <K extends PropertyKey>(name: K, obj: Record<K, T>): boolean\r
}\r
declare function propEq<T, K extends PropertyKey>(\r
  val: T,\r
  name: K\r
): (obj: Record<K, T>) => boolean\r
declare function propEq<K extends keyof U, U>(\r
  val: U[K],\r
  name: K,\r
  obj: U\r
): boolean\r
\r
/**\r
 * Returns \`true\` if the specified object property is of the given type;\r
 * \`false\` otherwise.\r
 *\r
 * See also {@link is}, {@link propSatisfies}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.propIs(Number, 'x', {x: 1, y: 2});  //=> true\r
 * R.propIs(Number, 'x', {x: 'foo'});    //=> false\r
 * R.propIs(Number, 'x', {});            //=> false\r
 * \`\`\`\r
 */\r
declare function propIs<C extends (...args: any[]) => any, K extends keyof any>(\r
  type: C,\r
  name: K,\r
  obj: any\r
): obj is Record<K, ReturnType<C>>\r
declare function propIs<\r
  C extends new (...args: any[]) => any,\r
  K extends keyof any\r
>(type: C, name: K, obj: any): obj is Record<K, InstanceType<C>>\r
declare function propIs<C extends (...args: any[]) => any, K extends keyof any>(\r
  type: C,\r
  name: K\r
): (obj: any) => obj is Record<K, ReturnType<C>>\r
declare function propIs<\r
  C extends new (...args: any[]) => any,\r
  K extends keyof any\r
>(type: C, name: K): (obj: any) => obj is Record<K, InstanceType<C>>\r
declare function propIs<C extends (...args: any[]) => any>(\r
  type: C\r
): {\r
  <K extends keyof any>(name: K, obj: any): obj is Record<K, ReturnType<C>>\r
  <K extends keyof any>(name: K): (obj: any) => obj is Record<K, ReturnType<C>>\r
}\r
declare function propIs<C extends new (...args: any[]) => any>(\r
  type: C\r
): {\r
  <K extends keyof any>(name: K, obj: any): obj is Record<K, InstanceType<C>>\r
  <K extends keyof any>(\r
    name: K\r
  ): (obj: any) => obj is Record<K, InstanceType<C>>\r
}\r
\r
/**\r
 * Return the specified property of the given non-null object if the property\r
 * is present and it's value is not \`null\`, \`undefined\` or \`NaN\`.\r
 *\r
 * Otherwise the first argument is returned.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const alice = {\r
 *   name: 'ALICE',\r
 *   age: 101\r
 * };\r
 * const favorite = R.prop('favoriteLibrary');\r
 * const favoriteWithDefault = R.propOr('Ramda', 'favoriteLibrary');\r
 *\r
 * favorite(alice);  //=> undefined\r
 * favoriteWithDefault(alice);  //=> 'Ramda'\r
 * \`\`\`\r
 */\r
declare function propOr<T>(val: T): {\r
  (p: string): <U, V>(obj: U) => V\r
  <U, V>(p: string, obj: U): V\r
}\r
declare function propOr<T>(val: T, p: string): <U, V>(obj: U) => V\r
declare function propOr<U>(\r
  __: Placeholder,\r
  p: string,\r
  obj: U\r
): <T, V>(val: T) => V\r
declare function propOr<T, U>(\r
  val: T,\r
  __: Placeholder,\r
  obj: U\r
): <V>(p: string) => V\r
declare function propOr<T, U, V>(val: T, p: string, obj: U): V\r
\r
/**\r
 * Acts as multiple \`prop\`: array of keys in, array of values out. Preserves\r
 * order.\r
 *\r
 * See also {@link prop}, {@link pluck}, {@link project}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.props(['x', 'y'], {x: 1, y: 2}); //=> [1, 2]\r
 * R.props(['c', 'a', 'b'], {b: 2, a: 1}); //=> [undefined, 1, 2]\r
 *\r
 * const fullName = R.compose(R.join(' '), R.props(['first', 'last']));\r
 * fullName({last: 'Bullet-Tooth', age: 33, first: 'Tony'}); //=> 'Tony Bullet-Tooth'\r
 * \`\`\`\r
 */\r
declare function props<P extends string, T>(\r
  ps: readonly P[]\r
): (obj: Record<P, T>) => T[]\r
declare function props<P extends string>(\r
  ps: readonly P[]\r
): <T>(obj: Record<P, T>) => T[]\r
declare function props<P extends string, T>(\r
  ps: readonly P[],\r
  obj: Record<P, T>\r
): T[]\r
\r
/**\r
 * Returns \`true\` if the specified object property satisfies the given\r
 * predicate; \`false\` otherwise. You can test multiple properties with\r
 * [\`R.where\`](#where).\r
 *\r
 * See also {@link where}, {@link propEq}, {@link propIs}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.propSatisfies(x => x > 0, 'x', {x: 1, y: 2}); //=> true\r
 * \`\`\`\r
 */\r
declare function propSatisfies<P, K extends keyof any>(\r
  pred: (val: any) => val is P,\r
  name: K,\r
  obj: any\r
): obj is Record<K, P>\r
declare function propSatisfies<P, K extends keyof any>(\r
  pred: (val: any) => val is P,\r
  name: K\r
): (obj: any) => obj is Record<K, P>\r
declare function propSatisfies<P>(pred: (val: any) => val is P): {\r
  <K extends keyof any>(name: K, obj: any): obj is Record<K, P>\r
  <K extends keyof any>(name: K): (obj: any) => obj is Record<K, P>\r
}\r
declare function propSatisfies(\r
  pred: (val: any) => boolean,\r
  name: keyof any,\r
  obj: any\r
): boolean\r
declare function propSatisfies(\r
  pred: (val: any) => boolean,\r
  name: keyof any\r
): (obj: any) => boolean\r
declare function propSatisfies(\r
  pred: (val: any) => boolean\r
): Curry<(a: keyof any, b: any) => boolean>\r
\r
/**\r
 * Returns a list of numbers from \`from\` (inclusive) to \`to\` (exclusive).\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.range(1, 5);    //=> [1, 2, 3, 4]\r
 * R.range(50, 53);  //=> [50, 51, 52]\r
 * \`\`\`\r
 */\r
declare function range(from: number): (to: number) => number[]\r
declare function range(from: number, to: number): number[]\r
\r
/**\r
 * Returns a single item by iterating through the list, successively calling\r
 * the iterator function and passing it an accumulator value and the current\r
 * value from the array, and then passing the result to the next call.\r
 *\r
 * The iterator function receives two values: *(acc, value)*. It may use\r
 * [\`R.reduced\`](#reduced) to shortcut the iteration.\r
 *\r
 * The arguments' order of [\`reduceRight\`](#reduceRight)'s iterator function\r
 * is *(value, acc)*.\r
 *\r
 * Note: \`R.reduce\` does not skip deleted or unassigned indices (sparse\r
 * arrays), unlike the native \`Array.prototype.reduce\` method. For more details\r
 * on this behavior, see:\r
 * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce#Description\r
 *\r
 * Be cautious of mutating and returning the accumulator. If you reuse it across\r
 * invocations, it will continue to accumulate onto the same value. The general\r
 * recommendation is to always return a new value. If you can't do so for\r
 * performance reasons, then be sure to reinitialize the accumulator on each\r
 * invocation.\r
 *\r
 * Dispatches to the \`reduce\` method of the third argument, if present. When\r
 * doing so, it is up to the user to handle the [\`R.reduced\`](#reduced)\r
 * shortcuting, as this is not implemented by \`reduce\`.\r
 *\r
 * See also {@link reduced}, {@link addIndex}, {@link reduceRight}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.reduce(R.subtract, 0, [1, 2, 3, 4]) // => ((((0 - 1) - 2) - 3) - 4) = -10\r
 * //          -               -10\r
 * //         / \\              / \\\r
 * //        -   4           -6   4\r
 * //       / \\              / \\\r
 * //      -   3   ==>     -3   3\r
 * //     / \\              / \\\r
 * //    -   2           -1   2\r
 * //   / \\              / \\\r
 * //  0   1            0   1\r
 * \`\`\`\r
 */\r
declare function reduce<T, U>(\r
  f: (acc: U, elem: T) => U | Reduced<U>\r
): {\r
  // reduce(f)(acc)(list)\r
  (acc: U): (list: readonly T[]) => U\r
  // reduce(f)(__, list)(acc)\r
  (__: Placeholder, list: readonly T[]): (acc: U) => U\r
  // reduce(f)(acc, list)\r
  (acc: U, list: readonly T[]): U\r
}\r
// reduce(__, acc)\r
declare function reduce<U>(\r
  __: Placeholder,\r
  acc: U\r
): {\r
  // reduce(__, acc)(f)(list)\r
  <T>(f: (acc: U, elem: T) => U | Reduced<U>): (list: readonly T[]) => U\r
  // reduce(__, acc)(__, list)(f)\r
  <T>(\r
    __: Placeholder,\r
    list: readonly T[]\r
  ): (f: (acc: U, elem: T) => U | Reduced<U>) => U\r
  // reduce(__, acc)(f, list)\r
  <T>(f: (acc: U, elem: T) => U | Reduced<U>, list: readonly T[]): U\r
}\r
// reduce(f, acc)(list)\r
declare function reduce<T, U>(\r
  f: (acc: U, elem: T) => U | Reduced<U>,\r
  acc: U\r
): (list: readonly T[]) => U\r
// reduce(_, _, list)\r
declare function reduce<T>(\r
  __: Placeholder,\r
  __2: Placeholder,\r
  list: readonly T[]\r
): {\r
  // reduce(__, __, list)(f)(acc)\r
  <U>(f: (acc: U, elem: T) => U | Reduced<U>): (acc: U) => U\r
  // reduce(__, __, list)(__, acc)(f)\r
  <U>(__: Placeholder, acc: U): (f: (acc: U, elem: T) => U | Reduced<U>) => U\r
  // reduce(__, __, list)(f, acc)\r
  <U>(f: (acc: U, elem: T) => U | Reduced<U>, acc: U): U\r
}\r
// reduce(f, _, list)(acc)\r
declare function reduce<T, U>(\r
  f: (acc: U, elem: T) => U | Reduced<U>,\r
  __: Placeholder,\r
  list: readonly T[]\r
): (acc: U) => U\r
// reduce(__, acc, list)(f)\r
declare function reduce<T, U>(\r
  __: Placeholder,\r
  acc: U,\r
  list: readonly T[]\r
): (f: (acc: U, elem: T) => U | Reduced<U>) => U\r
// reduce(f, acc, list)\r
declare function reduce<T, U>(\r
  f: (acc: U, elem: T) => U | Reduced<U>,\r
  acc: U,\r
  list: readonly T[]\r
): U\r
\r
/**\r
 * Groups the elements of the list according to the result of calling\r
 * the String-returning function \`keyFn\` on each element and reduces the elements\r
 * of each group to a single value via the reducer function \`valueFn\`.\r
 *\r
 * The value function receives two values: *(acc, value)*. It may use\r
 * [\`R.reduced\`](#reduced) to short circuit the iteration.\r
 *\r
 * This function is basically a more general [\`groupBy\`](#groupBy) function.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link groupBy}, {@link reduce}, {@link reduced}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const groupNames = (acc, {name}) => acc.concat(name)\r
 * const toGrade = ({score}) =>\r
 *   score < 65 ? 'F' :\r
 *   score < 70 ? 'D' :\r
 *   score < 80 ? 'C' :\r
 *   score < 90 ? 'B' : 'A'\r
 *\r
 * var students = [\r
 *   {name: 'Abby', score: 83},\r
 *   {name: 'Bart', score: 62},\r
 *   {name: 'Curt', score: 88},\r
 *   {name: 'Dora', score: 92},\r
 * ]\r
 *\r
 * reduceBy(groupNames, [], toGrade, students)\r
 * //=> {"A": ["Dora"], "B": ["Abby", "Curt"], "F": ["Bart"]}\r
 * \`\`\`\r
 */\r
declare function reduceBy<T, TResult>(\r
  valueFn: (acc: TResult, elem: T) => TResult\r
): Curry<\r
  (\r
    a: TResult,\r
    b: (elem: T) => string,\r
    c: readonly T[]\r
  ) => { [index: string]: TResult }\r
>\r
declare function reduceBy<T, TResult>(\r
  valueFn: (acc: TResult, elem: T) => TResult,\r
  acc: TResult\r
): Curry<\r
  (a: (elem: T) => string, b: readonly T[]) => { [index: string]: TResult }\r
>\r
declare function reduceBy<T, TResult>(\r
  valueFn: (acc: TResult, elem: T) => TResult,\r
  acc: TResult,\r
  keyFn: (elem: T) => string\r
): (list: readonly T[]) => { [index: string]: TResult }\r
declare function reduceBy<T, TResult>(\r
  valueFn: (acc: TResult, elem: T) => TResult,\r
  acc: TResult,\r
  keyFn: (elem: T) => string,\r
  list: readonly T[]\r
): { [index: string]: TResult }\r
\r
/**\r
 * Returns a value wrapped to indicate that it is the final value of the reduce\r
 * and transduce functions. The returned value should be considered a black\r
 * box: the internal structure is not guaranteed to be stable.\r
 *\r
 * This optimization is available to the below functions:\r
 * - [\`reduce\`](#reduce)\r
 * - [\`reduceWhile\`](#reduceWhile)\r
 * - [\`reduceBy\`](#reduceBy)\r
 * - [\`reduceRight\`](#reduceRight)\r
 * - [\`transduce\`](#transduce)\r
 *\r
 * See also {@link reduce}, {@link reduceWhile}, {@link reduceBy}, {@link reduceRight}, {@link transduce}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.reduce(\r
 *  (acc, item) => item > 3 ? R.reduced(acc) : acc.concat(item),\r
 *  [],\r
 *  [1, 2, 3, 4, 5]) // [1, 2, 3]\r
 * \`\`\`\r
 */\r
declare function reduced<T>(elem: T): Reduced<T>\r
\r
/**\r
 * Returns a single item by iterating through the list, successively calling\r
 * the iterator function and passing it an accumulator value and the current\r
 * value from the array, and then passing the result to the next call.\r
 *\r
 * Similar to [\`reduce\`](#reduce), except moves through the input list from the\r
 * right to the left.\r
 *\r
 * The iterator function receives two values: *(value, acc)*, while the arguments'\r
 * order of \`reduce\`'s iterator function is *(acc, value)*. \`reduceRight\` may use [\`reduced\`](#reduced)\r
 * to short circuit the iteration.\r
 *\r
 * Note: \`R.reduceRight\` does not skip deleted or unassigned indices (sparse\r
 * arrays), unlike the native \`Array.prototype.reduceRight\` method. For more details\r
 * on this behavior, see:\r
 * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduceRight#Description\r
 *\r
 * Be cautious of mutating and returning the accumulator. If you reuse it across\r
 * invocations, it will continue to accumulate onto the same value. The general\r
 * recommendation is to always return a new value. If you can't do so for\r
 * performance reasons, then be sure to reinitialize the accumulator on each\r
 * invocation.\r
 *\r
 * See also {@link reduce}, {@link addIndex}, {@link reduced}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.reduceRight(R.subtract, 0, [1, 2, 3, 4]) // => (1 - (2 - (3 - (4 - 0)))) = -2\r
 * //    -               -2\r
 * //   / \\              / \\\r
 * //  1   -            1   3\r
 * //     / \\              / \\\r
 * //    2   -     ==>    2  -1\r
 * //       / \\              / \\\r
 * //      3   -            3   4\r
 * //         / \\              / \\\r
 * //        4   0            4   0\r
 * \`\`\`\r
 */\r
declare function reduceRight<T, TResult>(\r
  fn: (elem: T, acc: TResult) => TResult\r
): (acc: TResult, list: readonly T[]) => TResult\r
declare function reduceRight<T, TResult>(\r
  fn: (elem: T, acc: TResult) => TResult,\r
  acc: TResult\r
): (list: readonly T[]) => TResult\r
declare function reduceRight<T, TResult>(\r
  fn: (elem: T, acc: TResult) => TResult,\r
  acc: TResult,\r
  list: readonly T[]\r
): TResult\r
\r
/**\r
 * Like [\`reduce\`](#reduce), \`reduceWhile\` returns a single item by iterating\r
 * through the list, successively calling the iterator function. \`reduceWhile\`\r
 * also takes a predicate that is evaluated before each step. If the predicate\r
 * returns \`false\`, it "short-circuits" the iteration and returns the current\r
 * value of the accumulator. \`reduceWhile\` may alternatively be short-circuited\r
 * via [\`reduced\`](#reduced).\r
 *\r
 * See also {@link reduce}, {@link reduced}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const isOdd = (acc, x) => x % 2 !== 0;\r
 * const xs = [1, 3, 5, 60, 777, 800];\r
 * R.reduceWhile(isOdd, R.add, 0, xs); //=> 9\r
 *\r
 * const ys = [2, 4, 6]\r
 * R.reduceWhile(isOdd, R.add, 111, ys); //=> 111\r
 * \`\`\`\r
 */\r
declare function reduceWhile<T, TResult>(\r
  predicate: (acc: TResult, elem: T) => boolean\r
): Curry<\r
  (\r
    a: (acc: TResult, elem: T) => TResult,\r
    b: TResult,\r
    c: readonly T[]\r
  ) => TResult\r
>\r
declare function reduceWhile<T, TResult>(\r
  predicate: (acc: TResult, elem: T) => boolean,\r
  fn: (acc: TResult, elem: T) => TResult\r
): Curry<(a: TResult, b: readonly T[]) => TResult>\r
declare function reduceWhile<T, TResult>(\r
  predicate: (acc: TResult, elem: T) => boolean,\r
  fn: (acc: TResult, elem: T) => TResult,\r
  acc: TResult\r
): (list: readonly T[]) => TResult\r
declare function reduceWhile<T, TResult>(\r
  predicate: (acc: TResult, elem: T) => boolean,\r
  fn: (acc: TResult, elem: T) => TResult,\r
  acc: TResult,\r
  list: readonly T[]\r
): TResult\r
\r
/**\r
 * The complement of [\`filter\`](#filter).\r
 *\r
 * Acts as a transducer if a transformer is given in list position. Filterable\r
 * objects include plain objects or any object that has a filter method such\r
 * as \`Array\`.\r
 *\r
 * See also {@link filter}, {@link transduce}, {@link addIndex}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const isOdd = (n) => n % 2 !== 0;\r
 *\r
 * R.reject(isOdd, [1, 2, 3, 4]); //=> [2, 4]\r
 *\r
 * R.reject(isOdd, {a: 1, b: 2, c: 3, d: 4}); //=> {b: 2, d: 4}\r
 * \`\`\`\r
 */\r
declare function reject<A, P extends A>(\r
  pred: (val: A) => val is P\r
): {\r
  <B extends A>(list: readonly B[]): Array<Exclude<B, P>>\r
  <B extends A>(dict: Record<string, B>): Record<string, Exclude<B, P>>\r
}\r
declare function reject<T>(\r
  pred: (value: T) => boolean\r
): <P extends T, C extends readonly P[] | Record<string, P>>(collection: C) => C\r
declare function reject<A, B extends A, P extends A>(\r
  pred: (val: A) => val is P,\r
  list: readonly B[]\r
): Array<Exclude<B, P>>\r
declare function reject<A, B extends A, P extends A>(\r
  pred: (val: A) => val is P,\r
  dict: Record<string, B>\r
): Record<string, Exclude<B, P>>\r
declare function reject<T, C extends readonly T[] | Record<string, T>>(\r
  pred: (value: T) => boolean,\r
  collection: C\r
): C\r
\r
/**\r
 * Removes the sub-list of \`list\` starting at index \`start\` and containing\r
 * \`count\` elements. _Note that this is not destructive_: it returns a copy of\r
 * the list with the changes.\r
 * <small>No lists have been harmed in the application of this function.</small>\r
 *\r
 * See also {@link without}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.remove(2, 3, [1,2,3,4,5,6,7,8]); //=> [1,2,6,7,8]\r
 * \`\`\`\r
 */\r
declare function remove(start: number): {\r
  (count: number): <T>(list: readonly T[]) => T[]\r
  <T>(count: number, list: readonly T[]): T[]\r
}\r
declare function remove(\r
  start: number,\r
  count: number\r
): <T>(list: readonly T[]) => T[]\r
declare function remove<T>(\r
  start: number,\r
  count: number,\r
  list: readonly T[]\r
): T[]\r
\r
/**\r
 * Returns a fixed list of size \`n\` containing a specified identical value.\r
 *\r
 * See also {@link times}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.repeat('hi', 5); //=> ['hi', 'hi', 'hi', 'hi', 'hi']\r
 *\r
 * const obj = {};\r
 * const repeatedObjs = R.repeat(obj, 5); //=> [{}, {}, {}, {}, {}]\r
 * repeatedObjs[0] === repeatedObjs[1]; //=> true\r
 * \`\`\`\r
 */\r
declare function repeat<T>(a: T): (n: number) => T[]\r
declare function repeat<T>(a: T, n: number): T[]\r
\r
/**\r
 * Replace a substring or regex match in a string with a replacement.\r
 *\r
 * The first two parameters correspond to the parameters of the\r
 * \`String.prototype.replace()\` function, so the second parameter can also be a\r
 * function.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.replace('foo', 'bar', 'foo foo foo'); //=> 'bar foo foo'\r
 * R.replace(/foo/, 'bar', 'foo foo foo'); //=> 'bar foo foo'\r
 *\r
 * // Use the "g" (global) flag to replace all occurrences:\r
 * R.replace(/foo/g, 'bar', 'foo foo foo'); //=> 'bar bar bar'\r
 * \`\`\`\r
 */\r
declare function replace(\r
  pattern: RegExp | string\r
): (\r
  replacement: string | ((match: string, ...args: readonly any[]) => string)\r
) => (str: string) => string\r
declare function replace(\r
  pattern: RegExp | string,\r
  replacement: string | ((match: string, ...args: readonly any[]) => string)\r
): (str: string) => string\r
declare function replace(\r
  pattern: RegExp | string,\r
  replacement: string | ((match: string, ...args: readonly any[]) => string),\r
  str: string\r
): string\r
\r
/**\r
 * Returns a new list or string with the elements or characters in reverse\r
 * order.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.reverse([1, 2, 3]);  //=> [3, 2, 1]\r
 * R.reverse([1, 2]);     //=> [2, 1]\r
 * R.reverse([1]);        //=> [1]\r
 * R.reverse([]);         //=> []\r
 *\r
 * R.reverse('abc');      //=> 'cba'\r
 * R.reverse('ab');       //=> 'ba'\r
 * R.reverse('a');        //=> 'a'\r
 * R.reverse('');         //=> ''\r
 * \`\`\`\r
 */\r
declare function reverse(str: string): string\r
declare function reverse<T>(list: readonly T[]): T[]\r
\r
/**\r
 * Scan is similar to [\`reduce\`](#reduce), but returns a list of successively\r
 * reduced values from the left.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link reduce}, {@link mapAccum}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const numbers = [1, 2, 3, 4];\r
 * const factorials = R.scan(R.multiply, 1, numbers); //=> [1, 1, 2, 6, 24]\r
 * \`\`\`\r
 */\r
declare function scan<T, TResult>(\r
  fn: (acc: TResult, elem: T) => any\r
): {\r
  (acc: TResult): (list: readonly T[]) => TResult[]\r
  (acc: TResult, list: readonly T[]): TResult[]\r
}\r
declare function scan<T, TResult>(\r
  fn: (acc: TResult, elem: T) => any,\r
  acc: TResult\r
): (list: readonly T[]) => TResult[]\r
declare function scan<T, TResult>(\r
  fn: (acc: TResult, elem: T) => any,\r
  acc: TResult,\r
  list: readonly T[]\r
): TResult[]\r
\r
/**\r
 * Returns the result of "setting" the portion of the given data structure\r
 * focused by the given lens to the given value.\r
 *\r
 * See also {@link view}, {@link over}, {@link lens}, {@link lensIndex}, {@link lensProp}, {@link lensPath}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const xLens = R.lensProp('x');\r
 *\r
 * R.set(xLens, 4, {x: 1, y: 2});  //=> {x: 4, y: 2}\r
 * R.set(xLens, 8, {x: 1, y: 2});  //=> {x: 8, y: 2}\r
 * \`\`\`\r
 */\r
declare function set<S, A>(\r
  lens: Lens<S, A>\r
): {\r
  (a: A): (obj: S) => S\r
  (a: A, obj: S): S\r
}\r
declare function set<S, A>(lens: Lens<S, A>, a: A): (obj: S) => S\r
declare function set<S, A>(lens: Lens<S, A>, a: A, obj: S): S\r
\r
/**\r
 * Returns the elements of the given list or string (or object with a \`slice\`\r
 * method) from \`fromIndex\` (inclusive) to \`toIndex\` (exclusive).\r
 *\r
 * Dispatches to the \`slice\` method of the third argument, if present.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.slice(1, 3, ['a', 'b', 'c', 'd']);        //=> ['b', 'c']\r
 * R.slice(1, Infinity, ['a', 'b', 'c', 'd']); //=> ['b', 'c', 'd']\r
 * R.slice(0, -1, ['a', 'b', 'c', 'd']);       //=> ['a', 'b', 'c']\r
 * R.slice(-3, -1, ['a', 'b', 'c', 'd']);      //=> ['b', 'c']\r
 * R.slice(0, 3, 'ramda');                     //=> 'ram'\r
 * \`\`\`\r
 */\r
declare function slice(a: number): {\r
  (b: number, list: string): string\r
  <T>(b: number, list: readonly T[]): T[]\r
}\r
declare function slice(\r
  a: number,\r
  b: number\r
): {\r
  (list: string): string\r
  <T>(list: readonly T[]): T[]\r
}\r
declare function slice(a: number, b: number, list: string): string\r
declare function slice<T>(a: number, b: number, list: readonly T[]): T[]\r
\r
/**\r
 * Returns a copy of the list, sorted according to the comparator function,\r
 * which should accept two values at a time and return a negative number if the\r
 * first value is smaller, a positive number if it's larger, and zero if they\r
 * are equal. Please note that this is a **copy** of the list. It does not\r
 * modify the original.\r
 *\r
 * See also {@link ascend}, {@link descend}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const diff = function(a, b) { return a - b; };\r
 * R.sort(diff, [4,2,7,5]); //=> [2, 4, 5, 7]\r
 * \`\`\`\r
 */\r
declare function sort<T>(\r
  fn: (a: T, b: T) => number\r
): (list: readonly T[]) => T[]\r
declare function sort<T>(fn: (a: T, b: T) => number, list: readonly T[]): T[]\r
\r
/**\r
 * Sorts the list according to the supplied function.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const sortByFirstItem = R.sortBy(R.prop(0));\r
 * const pairs = [[-1, 1], [-2, 2], [-3, 3]];\r
 * sortByFirstItem(pairs); //=> [[-3, 3], [-2, 2], [-1, 1]]\r
 *\r
 * const sortByNameCaseInsensitive = R.sortBy(R.compose(R.toLower, R.prop('name')));\r
 * const alice = {\r
 *   name: 'ALICE',\r
 *   age: 101\r
 * };\r
 * const bob = {\r
 *   name: 'Bob',\r
 *   age: -10\r
 * };\r
 * const clara = {\r
 *   name: 'clara',\r
 *   age: 314.159\r
 * };\r
 * const people = [clara, bob, alice];\r
 * sortByNameCaseInsensitive(people); //=> [alice, bob, clara]\r
 * \`\`\`\r
 */\r
declare function sortBy<T>(fn: (a: T) => Ord): (list: readonly T[]) => T[]\r
declare function sortBy(fn: (a: any) => Ord): <T>(list: readonly T[]) => T[]\r
declare function sortBy<T>(fn: (a: T) => Ord, list: readonly T[]): T[]\r
\r
/**\r
 * Sorts a list according to a list of comparators.\r
 *\r
 * See also {@link ascend}, {@link descend}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const alice = {\r
 *   name: 'alice',\r
 *   age: 40\r
 * };\r
 * const bob = {\r
 *   name: 'bob',\r
 *   age: 30\r
 * };\r
 * const clara = {\r
 *   name: 'clara',\r
 *   age: 40\r
 * };\r
 * const people = [clara, bob, alice];\r
 * const ageNameSort = R.sortWith([\r
 *   R.descend(R.prop('age')),\r
 *   R.ascend(R.prop('name'))\r
 * ]);\r
 * ageNameSort(people); //=> [alice, clara, bob]\r
 * \`\`\`\r
 */\r
declare function sortWith<T>(\r
  fns: Array<(a: T, b: T) => number>\r
): (list: readonly T[]) => T[]\r
declare function sortWith<T>(\r
  fns: Array<(a: T, b: T) => number>,\r
  list: readonly T[]\r
): T[]\r
\r
/**\r
 * Splits a string into an array of strings based on the given\r
 * separator.\r
 *\r
 * See also {@link join}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const pathComponents = R.split('/');\r
 * R.tail(pathComponents('/usr/local/bin/node')); //=> ['usr', 'local', 'bin', 'node']\r
 *\r
 * R.split('.', 'a.b.c.xyz.d'); //=> ['a', 'b', 'c', 'xyz', 'd']\r
 * \`\`\`\r
 */\r
declare function split(sep: string | RegExp): (str: string) => string[]\r
declare function split(sep: string | RegExp, str: string): string[]\r
\r
/**\r
 * Splits a given list or string at a given index.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.splitAt(1, [1, 2, 3]);          //=> [[1], [2, 3]]\r
 * R.splitAt(5, 'hello world');      //=> ['hello', ' world']\r
 * R.splitAt(-1, 'foobar');          //=> ['fooba', 'r']\r
 * \`\`\`\r
 */\r
declare function splitAt(index: number): {\r
  <T>(list: readonly T[]): [T[], T[]]\r
  (list: string): [string, string]\r
}\r
declare function splitAt<T>(index: number, list: readonly T[]): [T[], T[]]\r
declare function splitAt(index: number, list: string): [string, string]\r
\r
/**\r
 * Splits a collection into slices of the specified length.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.splitEvery(3, [1, 2, 3, 4, 5, 6, 7]); //=> [[1, 2, 3], [4, 5, 6], [7]]\r
 * R.splitEvery(3, 'foobarbaz'); //=> ['foo', 'bar', 'baz']\r
 * \`\`\`\r
 */\r
declare function splitEvery(a: number): {\r
  (list: string): string[]\r
  <T>(list: readonly T[]): T[][]\r
}\r
declare function splitEvery(a: number, list: string): string[]\r
declare function splitEvery<T>(a: number, list: readonly T[]): T[][]\r
\r
/**\r
 * Takes a list and a predicate and returns a pair of lists with the following properties:\r
 *\r
 *  - the result of concatenating the two output lists is equivalent to the input list;\r
 *  - none of the elements of the first output list satisfies the predicate; and\r
 *  - if the second output list is non-empty, its first element satisfies the predicate.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.splitWhen(R.equals(2), [1, 2, 3, 1, 2, 3]);   //=> [[1], [2, 3, 1, 2, 3]]\r
 * \`\`\`\r
 */\r
declare function splitWhen<T>(\r
  pred: (val: T) => boolean\r
): <U extends T>(list: readonly U[]) => [U[], U[]]\r
declare function splitWhen<T>(\r
  pred: (val: T) => boolean,\r
  list: readonly T[]\r
): [T[], T[]]\r
\r
/**\r
 * Splits an array into slices on every occurrence of a value.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.splitWhenever(R.equals(2), [1, 2, 3, 2, 4, 5, 2, 6, 7]); //=> [[1], [3], [4, 5], [6, 7]]\r
 * \`\`\`\r
 */\r
declare function splitWhenever<T>(\r
  pred: (a: T) => boolean\r
): <U extends T>(list: U[]) => U[][]\r
declare function splitWhenever<T>(pred: (a: T) => boolean, list: T[]): T[][]\r
\r
/**\r
 * Checks if a list starts with the provided sublist.\r
 *\r
 * Similarly, checks if a string starts with the provided substring.\r
 *\r
 * See also {@link endsWith}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.startsWith('a', 'abc')                //=> true\r
 * R.startsWith('b', 'abc')                //=> false\r
 * R.startsWith(['a'], ['a', 'b', 'c'])    //=> true\r
 * R.startsWith(['b'], ['a', 'b', 'c'])    //=> false\r
 * \`\`\`\r
 */\r
declare function startsWith<T>(\r
  subList: readonly T[]\r
): (list: readonly T[]) => boolean\r
declare function startsWith(substr: string): (str: string) => boolean\r
declare function startsWith<T>(\r
  subList: readonly T[],\r
  list: readonly T[]\r
): boolean\r
declare function startsWith(substr: string, str: string): boolean\r
\r
/**\r
 * Subtracts its second argument from its first argument.\r
 *\r
 * See also {@link add}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.subtract(10, 8); //=> 2\r
 *\r
 * const minus5 = R.subtract(R.__, 5);\r
 * minus5(17); //=> 12\r
 *\r
 * const complementaryAngle = R.subtract(90);\r
 * complementaryAngle(30); //=> 60\r
 * complementaryAngle(72); //=> 18\r
 * \`\`\`\r
 */\r
declare function subtract(a: number): (b: number) => number\r
declare function subtract(__: Placeholder, b: number): (a: number) => number\r
declare function subtract(a: number, b: number): number\r
\r
/**\r
 * Adds together all the elements of a list.\r
 *\r
 * See also {@link reduce}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.sum([2,4,6,8,100,1]); //=> 121\r
 * \`\`\`\r
 */\r
declare function sum(list: readonly number[]): number\r
\r
/**\r
 * Swap an item, at index \`indexA\` with another item, at index \`indexB\`, in an object or a list of elements.\r
 * A new result will be created containing the new elements order.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.swap(0, 2, ['a', 'b', 'c', 'd', 'e', 'f']); //=> ['c', 'b', 'a', 'd', 'e', 'f']\r
 * R.swap(-1, 0, ['a', 'b', 'c', 'd', 'e', 'f']); //=> ['f', 'b', 'c', 'd', 'e', 'a'] list rotation\r
 * R.swap('a', 'b', {a: 1, b: 2}); //=> {a: 2, b: 2}\r
 * R.swap(0, 2, 'foo'); //=> 'oof'\r
 * \`\`\`\r
 */\r
declare function swap(indexA: number): {\r
  // swap(indexA)(indexB)(list)\r
  (indexB: number): <T>(list: readonly T[]) => T[]\r
  // swap(indexA)(__, list)(indexB)\r
  <T>(__: Placeholder, list: readonly T[]): (indexB: number) => T[]\r
  // swap(indexA)(indexB, list)\r
  <T>(indexB: number, list: readonly T[]): T[]\r
}\r
\r
// swap(__, indexB)\r
declare function swap(\r
  __: Placeholder,\r
  indexB: number\r
): {\r
  // swap(__, indexB)(indexA)(list)\r
  (indexA: number): <T>(list: readonly T[]) => T[]\r
  // swap(__, indexB)(__, list)(indexA)\r
  <T>(__2: Placeholder, list: readonly T[]): (indexA: number) => T[]\r
  // swap(__, indexB)(indexA, list)\r
  <T>(indexA: number, list: readonly T[]): T[]\r
}\r
\r
// swap(indexA, indexB)(list)\r
declare function swap(\r
  indexA: number,\r
  indexB: number\r
): <T>(list: readonly T[]) => T[]\r
\r
// swap(__, __, list)\r
declare function swap<T>(\r
  __: Placeholder,\r
  __2: Placeholder,\r
  list: readonly T[]\r
): {\r
  // swap(__, __, list)(indexA)(indexB)\r
  (indexA: number): (indexB: number) => T[]\r
  // swap(__, __, list)(__, indexB)(indexA)\r
  (__3: Placeholder, indexB: number): (indexA: number) => T[]\r
  // swap(__, __, list)(indexA, indexB)\r
  (indexA: number, indexB: number): T[]\r
}\r
\r
// swap(indexA, __, list)(indexB)\r
declare function swap<T>(\r
  indexA: number,\r
  __: Placeholder,\r
  list: readonly T[]\r
): (indexB: number) => T[]\r
\r
// swap(__, indexB, list)(indexA)\r
declare function swap<T>(\r
  __: Placeholder,\r
  indexB: number,\r
  list: readonly T[]\r
): (indexA: number) => T[]\r
\r
// swap(indexA, indexB, list)\r
declare function swap<T>(\r
  indexA: number,\r
  indexB: number,\r
  list: readonly T[]\r
): T[]\r
\r
/**\r
 * Finds the set (i.e. no duplicates) of all elements contained in the first or\r
 * second list, but not both.\r
 *\r
 * See also {@link symmetricDifferenceWith}, {@link difference}, {@link differenceWith}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.symmetricDifference([1,2,3,4], [7,6,5,4,3]); //=> [1,2,7,6,5]\r
 * R.symmetricDifference([7,6,5,4,3], [1,2,3,4]); //=> [7,6,5,1,2]\r
 * \`\`\`\r
 */\r
declare function symmetricDifference<T>(\r
  list: readonly T[]\r
): <T>(list: readonly T[]) => T[]\r
declare function symmetricDifference<T>(\r
  list1: readonly T[],\r
  list2: readonly T[]\r
): T[]\r
\r
/**\r
 * Finds the set (i.e. no duplicates) of all elements contained in the first or\r
 * second list, but not both. Duplication is determined according to the value\r
 * returned by applying the supplied predicate to two list elements.\r
 *\r
 * See also {@link symmetricDifference}, {@link difference}, {@link differenceWith}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const eqA = R.eqBy(R.prop('a'));\r
 * const l1 = [{a: 1}, {a: 2}, {a: 3}, {a: 4}];\r
 * const l2 = [{a: 3}, {a: 4}, {a: 5}, {a: 6}];\r
 * R.symmetricDifferenceWith(eqA, l1, l2); //=> [{a: 1}, {a: 2}, {a: 5}, {a: 6}]\r
 * \`\`\`\r
 */\r
declare function symmetricDifferenceWith<T>(\r
  pred: (a: T, b: T) => boolean\r
): Curry<(a: readonly T[], b: readonly T[]) => T[]>\r
\r
declare function symmetricDifferenceWith<T>(\r
  pred: (a: T, b: T) => boolean,\r
  list1: readonly T[],\r
  list2: readonly T[]\r
): T[]\r
\r
/**\r
 * A function that always returns \`true\`. Any passed in parameters are ignored.\r
 *\r
 * See also {@link F}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.T(); //=> true\r
 * \`\`\`\r
 */\r
declare function T(...args: unknown[]): true\r
\r
/**\r
 * Returns all but the first element of the given list or string (or object\r
 * with a \`tail\` method).\r
 *\r
 * Dispatches to the \`slice\` method of the first argument, if present.\r
 *\r
 * See also {@link head}, {@link init}, {@link last}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.tail([1, 2, 3]);  //=> [2, 3]\r
 * R.tail([1, 2]);     //=> [2]\r
 * R.tail([1]);        //=> []\r
 * R.tail([]);         //=> []\r
 *\r
 * R.tail('abc');  //=> 'bc'\r
 * R.tail('ab');   //=> 'b'\r
 * R.tail('a');    //=> ''\r
 * R.tail('');     //=> ''\r
 * \`\`\`\r
 */\r
declare function tail(list: string): string\r
// empty tuple - purposefully \`never, They literally have no tail\r
declare function tail(list: readonly []): never\r
// length=1 tuples also return \`never\`. They literally have no tail\r
declare function tail<T>(list: readonly [T]): never\r
// non-empty tuples and array\r
// \`infer Rest\` only works on types like \`readonly [1, '2', 3]\` where you will get back \`['2', 3]\`\r
// else, if the type is \`string[]\`, you'll get back \`string[]\`\r
declare function tail<T extends readonly [...any]>(\r
  tuple: T\r
): T extends readonly [any, ...infer Rest] ? Rest : T\r
\r
/**\r
 * Returns the first \`n\` elements of the given list, string, or\r
 * transducer/transformer (or object with a \`take\` method).\r
 *\r
 * Dispatches to the \`take\` method of the second argument, if present.\r
 *\r
 * See also {@link drop}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.take(1, ['foo', 'bar', 'baz']); //=> ['foo']\r
 * R.take(2, ['foo', 'bar', 'baz']); //=> ['foo', 'bar']\r
 * R.take(3, ['foo', 'bar', 'baz']); //=> ['foo', 'bar', 'baz']\r
 * R.take(4, ['foo', 'bar', 'baz']); //=> ['foo', 'bar', 'baz']\r
 * R.take(3, 'ramda');               //=> 'ram'\r
 *\r
 * const personnel = [\r
 *   'Dave Brubeck',\r
 *   'Paul Desmond',\r
 *   'Eugene Wright',\r
 *   'Joe Morello',\r
 *   'Gerry Mulligan',\r
 *   'Bob Bates',\r
 *   'Joe Dodge',\r
 *   'Ron Crotty'\r
 * ];\r
 *\r
 * const takeFive = R.take(5);\r
 * takeFive(personnel);\r
 * //=> ['Dave Brubeck', 'Paul Desmond', 'Eugene Wright', 'Joe Morello', 'Gerry Mulligan']\r
 * \`\`\`\r
 */\r
declare function take(n: number): {\r
  (xs: string): string\r
  <T>(xs: readonly T[]): T[]\r
}\r
declare function take(n: number, xs: string): string\r
declare function take<T>(n: number, xs: readonly T[]): T[]\r
\r
/**\r
 * Returns a new list containing the last \`n\` elements of the given list.\r
 * If \`n > list.length\`, returns a list of \`list.length\` elements.\r
 *\r
 * See also {@link dropLast}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.takeLast(1, ['foo', 'bar', 'baz']); //=> ['baz']\r
 * R.takeLast(2, ['foo', 'bar', 'baz']); //=> ['bar', 'baz']\r
 * R.takeLast(3, ['foo', 'bar', 'baz']); //=> ['foo', 'bar', 'baz']\r
 * R.takeLast(4, ['foo', 'bar', 'baz']); //=> ['foo', 'bar', 'baz']\r
 * R.takeLast(3, 'ramda');               //=> 'mda'\r
 * \`\`\`\r
 */\r
declare function takeLast(n: number): {\r
  (xs: string): string\r
  <T>(xs: readonly T[]): T[]\r
}\r
declare function takeLast<T>(n: number, xs: readonly T[]): T[]\r
declare function takeLast(n: number, xs: string): string\r
\r
/**\r
 * Returns a new list containing the last \`n\` elements of a given list, passing\r
 * each value to the supplied predicate function, and terminating when the\r
 * predicate function returns \`false\`. Excludes the element that caused the\r
 * predicate function to fail. The predicate function is passed one argument:\r
 * *(value)*.\r
 *\r
 * See also {@link dropLastWhile}, {@link addIndex}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const isNotOne = x => x !== 1;\r
 *\r
 * R.takeLastWhile(isNotOne, [1, 2, 3, 4]); //=> [2, 3, 4]\r
 *\r
 * R.takeLastWhile(x => x !== 'R' , 'Ramda'); //=> 'amda'\r
 * \`\`\`\r
 */\r
declare function takeLastWhile<T>(\r
  pred: (a: T) => boolean\r
): <T>(list: readonly T[]) => T[]\r
declare function takeLastWhile<T>(\r
  pred: (a: T) => boolean,\r
  list: readonly T[]\r
): T[]\r
\r
/**\r
 * Returns a new list containing the first \`n\` elements of a given list,\r
 * passing each value to the supplied predicate function, and terminating when\r
 * the predicate function returns \`false\`. Excludes the element that caused the\r
 * predicate function to fail. The predicate function is passed one argument:\r
 * *(value)*.\r
 *\r
 * Dispatches to the \`takeWhile\` method of the second argument, if present.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link dropWhile}, {@link transduce}, {@link addIndex}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const isNotFour = x => x !== 4;\r
 *\r
 * R.takeWhile(isNotFour, [1, 2, 3, 4, 3, 2, 1]); //=> [1, 2, 3]\r
 *\r
 * R.takeWhile(x => x !== 'd' , 'Ramda'); //=> 'Ram'\r
 * \`\`\`\r
 */\r
declare function takeWhile<T>(\r
  fn: (x: T) => boolean\r
): (list: readonly T[]) => T[]\r
declare function takeWhile<T>(fn: (x: T) => boolean, list: readonly T[]): T[]\r
\r
/**\r
 * Runs the given function with the supplied object, then returns the object.\r
 *\r
 * Acts as a transducer if a transformer is given as second parameter.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const sayX = x => console.log('x is ' + x);\r
 * R.tap(sayX, 100); //=> 100\r
 * // logs 'x is 100'\r
 * \`\`\`\r
 */\r
declare function tap<T, R extends T = T>(\r
  fn: (a: T) => asserts a is R\r
): (value: T) => R\r
declare function tap<T>(fn: (a: T) => void): (value: T) => T\r
declare function tap<T, R extends T = T>(\r
  fn: (a: T) => asserts a is R,\r
  value: T\r
): R\r
declare function tap<T>(fn: (a: T) => void, value: T): T\r
\r
/**\r
 * Determines whether a given string matches a given regular expression.\r
 *\r
 * See also {@link match}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.test(/^x/, 'xyz'); //=> true\r
 * R.test(/^y/, 'xyz'); //=> false\r
 * \`\`\`\r
 */\r
declare function test(regexp: RegExp): (str: string) => boolean\r
declare function test(regexp: RegExp, str: string): boolean\r
\r
/**\r
 * Creates a thunk out of a function. A thunk delays a calculation until\r
 * its result is needed, providing lazy evaluation of arguments.\r
 *\r
 * See also {@link partial}, {@link partialRight}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.thunkify(R.identity)(42)(); //=> 42\r
 * R.thunkify((a, b) => a + b)(25, 17)(); //=> 42\r
 * \`\`\`\r
 */\r
declare function thunkify<F extends (...args: readonly any[]) => any>(\r
  fn: F\r
): Curry<(...args: Parameters<F>) => () => ReturnType<F>>\r
\r
/**\r
 * Calls an input function \`n\` times, returning an array containing the results\r
 * of those function calls.\r
 *\r
 * \`fn\` is passed one argument: The current value of \`n\`, which begins at \`0\`\r
 * and is gradually incremented to \`n - 1\`.\r
 *\r
 * See also {@link repeat}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.times(R.identity, 5); //=> [0, 1, 2, 3, 4]\r
 * \`\`\`\r
 */\r
declare function times<T>(fn: (i: number) => T): (n: number) => T[]\r
declare function times<T>(fn: (i: number) => T, n: number): T[]\r
\r
/**\r
 * The lower case version of a string.\r
 *\r
 * See also {@link toUpper}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.toLower('XYZ'); //=> 'xyz'\r
 * \`\`\`\r
 */\r
declare function toLower<S extends string>(str: S): Lowercase<S>\r
declare function toLower(str: string): string\r
\r
/**\r
 * Converts an object into an array of key, value arrays. Only the object's\r
 * own properties are used.\r
 * Note that the order of the output array is not guaranteed to be consistent\r
 * across different JS platforms.\r
 *\r
 * See also {@link fromPairs}, {@link keys}, {@link values}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.toPairs({a: 1, b: 2, c: 3}); //=> [['a', 1], ['b', 2], ['c', 3]]\r
 * \`\`\`\r
 */\r
declare function toPairs<O extends object>(\r
  obj: O\r
): Array<{ [key in keyof O]: [key, O[key]] }[keyof O]>\r
\r
/**\r
 * Converts an object into an array of key, value arrays. The object's own\r
 * properties and prototype properties are used. Note that the order of the\r
 * output array is not guaranteed to be consistent across different JS\r
 * platforms.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const F = function() { this.x = 'X'; };\r
 * F.prototype.y = 'Y';\r
 * const f = new F();\r
 * R.toPairsIn(f); //=> [['x','X'], ['y','Y']]\r
 * \`\`\`\r
 */\r
declare function toPairsIn<O extends object>(\r
  obj: O\r
): Array<{ [key in keyof O]: [key, O[key]] }[keyof O]>\r
\r
/**\r
 * Returns the string representation of the given value. \`eval\`'ing the output\r
 * should result in a value equivalent to the input value. Many of the built-in\r
 * \`toString\` methods do not satisfy this requirement.\r
 *\r
 * If the given value is an \`[object Object]\` with a \`toString\` method other\r
 * than \`Object.prototype.toString\`, this method is invoked with no arguments\r
 * to produce the return value. This means user-defined constructor functions\r
 * can provide a suitable \`toString\` method. For example:\r
 *\r
 *     function Point(x, y) {\r
 *       this.x = x;\r
 *       this.y = y;\r
 *     }\r
 *\r
 *     Point.prototype.toString = function() {\r
 *       return 'new Point(' + this.x + ', ' + this.y + ')';\r
 *     };\r
 *\r
 *     R.toString(new Point(1, 2)); //=> 'new Point(1, 2)'\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.toString(42); //=> '42'\r
 * R.toString('abc'); //=> '"abc"'\r
 * R.toString([1, 2, 3]); //=> '[1, 2, 3]'\r
 * R.toString({foo: 1, bar: 2, baz: 3}); //=> '{"bar": 2, "baz": 3, "foo": 1}'\r
 * R.toString(new Date('2001-02-03T04:05:06Z')); //=> 'new Date("2001-02-03T04:05:06.000Z")'\r
 * \`\`\`\r
 */\r
declare function toString(val: unknown): string\r
\r
/**\r
 * The upper case version of a string.\r
 *\r
 * See also {@link toLower}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.toUpper('abc'); //=> 'ABC'\r
 * \`\`\`\r
 */\r
declare function toUpper<S extends string = string>(str: S): Uppercase<S>\r
declare function toUpper(str: string): string\r
\r
/**\r
 * Initializes a transducer using supplied iterator function. Returns a single\r
 * item by iterating through the list, successively calling the transformed\r
 * iterator function and passing it an accumulator value and the current value\r
 * from the array, and then passing the result to the next call.\r
 *\r
 * The iterator function receives two values: *(acc, value)*. It will be\r
 * wrapped as a transformer to initialize the transducer. A transformer can be\r
 * passed directly in place of an iterator function. In both cases, iteration\r
 * may be stopped early with the [\`R.reduced\`](#reduced) function.\r
 *\r
 * A transducer is a function that accepts a transformer and returns a\r
 * transformer and can be composed directly.\r
 *\r
 * A transformer is an object that provides a 2-arity reducing iterator\r
 * function, step, 0-arity initial value function, init, and 1-arity result\r
 * extraction function, result. The step function is used as the iterator\r
 * function in reduce. The result function is used to convert the final\r
 * accumulator into the return type and in most cases is\r
 * [\`R.identity\`](#identity). The init function can be used to provide an\r
 * initial accumulator, but is ignored by transduce.\r
 *\r
 * The iteration is performed with [\`R.reduce\`](#reduce) after initializing the transducer.\r
 *\r
 * See also {@link reduce}, {@link reduced}, {@link into}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const numbers = [1, 2, 3, 4];\r
 * const transducer = R.compose(R.map(R.add(1)), R.take(2));\r
 * R.transduce(transducer, R.flip(R.append), [], numbers); //=> [2, 3]\r
 *\r
 * const isOdd = (x) => x % 2 !== 0;\r
 * const firstOddTransducer = R.compose(R.filter(isOdd), R.take(1));\r
 * R.transduce(firstOddTransducer, R.flip(R.append), [], R.range(0, 100)); //=> [1]\r
 * \`\`\`\r
 */\r
declare function transduce<T, U, V>(\r
  xf: (arg: readonly T[]) => U[]\r
): (fn: (acc: V, val: U) => V, acc: V, list: readonly T[]) => V\r
declare function transduce<T, U, V>(\r
  xf: (arg: readonly T[]) => U[],\r
  fn: (acc: V, val: U) => V\r
): (acc: readonly T[], list: readonly T[]) => V\r
declare function transduce<T, U, V>(\r
  xf: (arg: readonly T[]) => U[],\r
  fn: (acc: V, val: U) => V,\r
  acc: readonly T[]\r
): (list: readonly T[]) => V\r
declare function transduce<T, U, V>(\r
  xf: (arg: readonly T[]) => U[],\r
  fn: (acc: V, val: U) => V,\r
  acc: V,\r
  list: readonly T[]\r
): V\r
\r
/**\r
 * Transposes the rows and columns of a 2D list.\r
 * When passed a list of \`n\` lists of length \`x\`,\r
 * returns a list of \`x\` lists of length \`n\`.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.transpose([[1, 'a'], [2, 'b'], [3, 'c']]) //=> [[1, 2, 3], ['a', 'b', 'c']]\r
 * R.transpose([[1, 2, 3], ['a', 'b', 'c']]) //=> [[1, 'a'], [2, 'b'], [3, 'c']]\r
 *\r
 * // If some of the rows are shorter than the following rows, their elements are skipped:\r
 * R.transpose([[10, 11], [20], [], [30, 31, 32]]) //=> [[10, 20, 30], [11, 31], [32]]\r
 * \`\`\`\r
 */\r
declare function transpose<T>(list: readonly T[][]): T[][]\r
\r
/**\r
 * Maps an [Applicative](https://github.com/fantasyland/fantasy-land#applicative)-returning\r
 * function over a [Traversable](https://github.com/fantasyland/fantasy-land#traversable),\r
 * then uses [\`sequence\`](#sequence) to transform the resulting Traversable of Applicative\r
 * into an Applicative of Traversable.\r
 *\r
 * Dispatches to the \`traverse\` method of the third argument, if present.\r
 *\r
 * See also {@link sequence}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * // Returns \`Maybe.Nothing\` if the given divisor is \`0\`\r
 * const safeDiv = n => d => d === 0 ? Maybe.Nothing() : Maybe.Just(n / d)\r
 *\r
 * R.traverse(Maybe.of, safeDiv(10), [2, 4, 5]); //=> Maybe.Just([5, 2.5, 2])\r
 * R.traverse(Maybe.of, safeDiv(10), [2, 0, 5]); //=> Maybe.Nothing\r
 *\r
 * // Using a Type Representative\r
 * R.traverse(Maybe, safeDiv(10), Right(4)); //=> Just(Right(2.5))\r
 * R.traverse(Maybe, safeDiv(10), Right(0)); //=> Nothing\r
 * R.traverse(Maybe, safeDiv(10), Left("X")); //=> Just(Left("X"))\r
 * \`\`\`\r
 */\r
declare function traverse<A, B>(\r
  of: (a: B) => B[]\r
): {\r
  (fn: (t: A) => B[]): (list: readonly A[]) => B[][]\r
  (fn: (t: A) => B[], list: readonly A[]): B[][]\r
}\r
declare function traverse<A, B>(\r
  of: (a: B) => B[],\r
  fn: (t: A) => B[]\r
): (list: readonly A[]) => B[][]\r
declare function traverse<A, B>(\r
  of: (a: B) => B[],\r
  fn: (t: A) => B[],\r
  list: readonly A[]\r
): B[][]\r
\r
/**\r
 * Removes (strips) whitespace from both ends of the string.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.trim('   xyz  '); //=> 'xyz'\r
 * R.map(R.trim, R.split(',', 'x, y, z')); //=> ['x', 'y', 'z']\r
 * \`\`\`\r
 */\r
declare function trim(str: string): string\r
\r
/**\r
 * \`tryCatch\` takes two functions, a \`tryer\` and a \`catcher\`. The returned\r
 * function evaluates the \`tryer\`; if it does not throw, it simply returns the\r
 * result. If the \`tryer\` *does* throw, the returned function evaluates the\r
 * \`catcher\` function and returns its result. Note that for effective\r
 * composition with this function, both the \`tryer\` and \`catcher\` functions\r
 * must return the same type of results.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.tryCatch(R.prop('x'), R.F)({x: true}); //=> true\r
 * R.tryCatch(() => { throw 'foo'}, R.always('caught'))('bar') // =>\r
 * 'caught'\r
 * R.tryCatch(R.times(R.identity), R.always([]))('s') // => []\r
 * R.tryCatch(() => { throw 'this is not a valid value'}, (err, value)=>({error : err,  value }))('bar') // => {'error': 'this is not a valid value', 'value': 'bar'}\r
 * \`\`\`\r
 */\r
declare function tryCatch<F extends (...args: readonly any[]) => any>(\r
  tryer: F\r
): <RE = ReturnType<F>, E = unknown>(\r
  catcher: (error: E, ...args: Parameters$1<F>) => RE\r
) => F | (() => RE)\r
declare function tryCatch<\r
  F extends (...args: readonly any[]) => any,\r
  RE = ReturnType<F>,\r
  E = unknown\r
>(tryer: F, catcher: (error: E, ...args: Parameters$1<F>) => RE): F | (() => RE)\r
\r
/**\r
 * Gives a single-word string description of the (native) type of a value,\r
 * returning such answers as 'Object', 'Number', 'Array', or 'Null'. Does not\r
 * attempt to distinguish user Object types any further, reporting them all as\r
 * 'Object'.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.type({}); //=> "Object"\r
 * R.type(1); //=> "Number"\r
 * R.type(false); //=> "Boolean"\r
 * R.type('s'); //=> "String"\r
 * R.type(null); //=> "Null"\r
 * R.type([]); //=> "Array"\r
 * R.type(/[A-z]/); //=> "RegExp"\r
 * R.type(() => {}); //=> "Function"\r
 * R.type(undefined); //=> "Undefined"\r
 * \`\`\`\r
 */\r
declare function type(\r
  val: any\r
):\r
  | "Object"\r
  | "Number"\r
  | "Boolean"\r
  | "String"\r
  | "Null"\r
  | "Array"\r
  | "RegExp"\r
  | "Function"\r
  | "AsyncFunction"\r
  | "Undefined"\r
  | "Symbol"\r
  | "Error"\r
  | "Date"\r
\r
/**\r
 * Takes a function \`fn\`, which takes a single array argument, and returns a\r
 * function which:\r
 *\r
 *   - takes any number of positional arguments;\r
 *   - passes these arguments to \`fn\` as an array; and\r
 *   - returns the result.\r
 *\r
 * In other words, \`R.unapply\` derives a variadic function from a function which\r
 * takes an array. \`R.unapply\` is the inverse of [\`R.apply\`](#apply).\r
 *\r
 * See also {@link apply}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.unapply(JSON.stringify)(1, 2, 3); //=> '[1,2,3]'\r
 * \`\`\`\r
 */\r
declare function unapply<T>(\r
  fn: (args: readonly any[]) => T\r
): (...args: readonly any[]) => T\r
\r
/**\r
 * Wraps a function of any arity (including nullary) in a function that accepts\r
 * exactly 1 parameter. Any extraneous parameters will not be passed to the\r
 * supplied function.\r
 *\r
 * See also {@link binary}, {@link nAry}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const takesTwoArgs = function(a, b) {\r
 *   return [a, b];\r
 * };\r
 * takesTwoArgs.length; //=> 2\r
 * takesTwoArgs(1, 2); //=> [1, 2]\r
 *\r
 * const takesOneArg = R.unary(takesTwoArgs);\r
 * takesOneArg.length; //=> 1\r
 * // Only 1 argument is passed to the wrapped function\r
 * takesOneArg(1, 2); //=> [1, undefined]\r
 * \`\`\`\r
 */\r
declare function unary<T, R>(\r
  fn: (a: T, ...args: readonly any[]) => R\r
): (a: T) => R\r
\r
/**\r
 * Returns a function of arity \`n\` from a (manually) curried function.\r
 * Note that, the returned function is actually a ramda style\r
 * curryied function, which can accept one or more arguments in each\r
 * function calling.\r
 *\r
 * See also {@link curry}, {@link curryN}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const addFour = a => b => c => d => a + b + c + d;\r
 *\r
 * const uncurriedAddFour = R.uncurryN(4, addFour);\r
 * uncurriedAddFour(1, 2, 3, 4); //=> 10\r
 * \`\`\`\r
 */\r
declare function uncurryN<T>(\r
  len: number\r
): (fn: (a: any) => any) => (...args: unknown[]) => T\r
declare function uncurryN<T>(\r
  len: number,\r
  fn: (a: any) => any\r
): (...args: unknown[]) => T\r
\r
/**\r
 * Builds a list from a seed value. Accepts an iterator function, which returns\r
 * either false to stop iteration or an array of length 2 containing the value\r
 * to add to the resulting list and the seed to be used in the next call to the\r
 * iterator function.\r
 *\r
 * The iterator function receives one argument: *(seed)*.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const f = n => n > 50 ? false : [-n, n + 10];\r
 * R.unfold(f, 10); //=> [-10, -20, -30, -40, -50]\r
 * \`\`\`\r
 */\r
declare function unfold<T, TResult>(\r
  fn: (seed: T) => [TResult, T] | false\r
): (seed: T) => TResult[]\r
declare function unfold<T, TResult>(\r
  fn: (seed: T) => [TResult, T] | false,\r
  seed: T\r
): TResult[]\r
\r
/**\r
 * Combines two lists into a set (i.e. no duplicates) composed of the elements\r
 * of each list.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.union([1, 2, 3], [2, 3, 4]); //=> [1, 2, 3, 4]\r
 * \`\`\`\r
 */\r
declare function union<T>(as: readonly T[]): (bs: readonly T[]) => T[]\r
declare function union<T>(as: readonly T[], bs: readonly T[]): T[]\r
\r
/**\r
 * Combines two lists into a set (i.e. no duplicates) composed of the elements\r
 * of each list. Duplication is determined according to the value returned by\r
 * applying the supplied predicate to two list elements. If an element exists\r
 * in both lists, the first element from the first list will be used.\r
 *\r
 * See also {@link union}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const l1 = [{a: 1}, {a: 2}];\r
 * const l2 = [{a: 1}, {a: 4}];\r
 * R.unionWith(R.eqBy(R.prop('a')), l1, l2); //=> [{a: 1}, {a: 2}, {a: 4}]\r
 * \`\`\`\r
 */\r
declare function unionWith<T>(\r
  pred: (a: T, b: T) => boolean\r
): Curry<(a: readonly T[], b: readonly T[]) => T[]>\r
declare function unionWith<T>(\r
  pred: (a: T, b: T) => boolean,\r
  list1: readonly T[],\r
  list2: readonly T[]\r
): T[]\r
\r
/**\r
 * Returns a new list containing only one copy of each element in the original\r
 * list. [\`R.equals\`](#equals) is used to determine equality.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.uniq([1, 1, 2, 1]); //=> [1, 2]\r
 * R.uniq([1, '1']);     //=> [1, '1']\r
 * R.uniq([[42], [42]]); //=> [[42]]\r
 * \`\`\`\r
 */\r
declare function uniq<T>(list: readonly T[]): T[]\r
\r
/**\r
 * Returns a new list containing only one copy of each element in the original\r
 * list, based upon the value returned by applying the supplied function to\r
 * each list element. Prefers the first item if the supplied function produces\r
 * the same value on two items. [\`R.equals\`](#equals) is used for comparison.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.uniqBy(Math.abs, [-1, -5, 2, 10, 1, 2]); //=> [-1, -5, 2, 10]\r
 * \`\`\`\r
 */\r
declare function uniqBy<T, U>(fn: (a: T) => U): (list: readonly T[]) => T[]\r
declare function uniqBy<T, U>(fn: (a: T) => U, list: readonly T[]): T[]\r
\r
/**\r
 * Returns a new list containing only one copy of each element in the original\r
 * list, based upon the value returned by applying the supplied predicate to\r
 * two list elements. Prefers the first item if two items compare equal based\r
 * on the predicate.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const strEq = R.eqBy(String);\r
 * R.uniqWith(strEq)([1, '1', 2, 1]); //=> [1, 2]\r
 * R.uniqWith(strEq)([{}, {}]);       //=> [{}]\r
 * R.uniqWith(strEq)([1, '1', 1]);    //=> [1]\r
 * R.uniqWith(strEq)(['1', 1, 1]);    //=> ['1']\r
 * \`\`\`\r
 */\r
declare function uniqWith<T>(\r
  pred: (x: T, y: T) => boolean\r
): (list: readonly T[]) => T[]\r
declare function uniqWith<T>(\r
  pred: (x: T, y: T) => boolean,\r
  list: readonly T[]\r
): T[]\r
\r
/**\r
 * Tests the final argument by passing it to the given predicate function. If\r
 * the predicate is not satisfied, the function will return the result of\r
 * calling the \`whenFalseFn\` function with the same argument. If the predicate\r
 * is satisfied, the argument is returned as is.\r
 *\r
 * See also {@link ifElse}, {@link when}, {@link cond}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * let safeInc = R.unless(R.isNil, R.inc);\r
 * safeInc(null); //=> null\r
 * safeInc(1); //=> 2\r
 * \`\`\`\r
 */\r
declare function unless<T, U>(\r
  pred: (a: T) => boolean,\r
  whenFalseFn: (a: T) => U\r
): (a: T) => T | U\r
declare function unless<T, U>(\r
  pred: (a: T) => boolean,\r
  whenFalseFn: (a: T) => U,\r
  a: T\r
): T | U\r
\r
/**\r
 * Shorthand for \`R.chain(R.identity)\`, which removes one level of nesting from\r
 * any [Chain](https://github.com/fantasyland/fantasy-land#chain).\r
 *\r
 * See also {@link flatten}, {@link chain}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.unnest([1, [2], [[3]]]); //=> [1, 2, [3]]\r
 * R.unnest([[1, 2], [3, 4], [5, 6]]); //=> [1, 2, 3, 4, 5, 6]\r
 * \`\`\`\r
 */\r
declare function unnest<T extends readonly any[]>(list: T): UnNest<T>\r
\r
/**\r
 * Takes a predicate, a transformation function, and an initial value,\r
 * and returns a value of the same type as the initial value.\r
 * It does so by applying the transformation until the predicate is satisfied,\r
 * at which point it returns the satisfactory value.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.until(R.gt(R.__, 100), R.multiply(2))(1) // => 128\r
 * \`\`\`\r
 */\r
declare function until<T, U>(\r
  pred: (val: T) => boolean,\r
  fn: (val: T) => U\r
): (init: U) => U\r
declare function until<T, U>(\r
  pred: (val: T) => boolean,\r
  fn: (val: T) => U,\r
  init: U\r
): U\r
\r
/**\r
 * Deconstructs an array field from the input documents to output a document for each element.\r
 * Each output document is the input document with the value of the array field replaced by the element.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.unwind('hobbies', {\r
 *   name: 'alice',\r
 *   hobbies: ['Golf', 'Hacking'],\r
 *   colors: ['red', 'green'],\r
 * });\r
 * // [\r
 * //   { name: 'alice', hobbies: 'Golf', colors: ['red', 'green'] },\r
 * //   { name: 'alice', hobbies: 'Hacking', colors: ['red', 'green'] }\r
 * // ]\r
 * \`\`\`\r
 */\r
declare function unwind<O extends object>(\r
  __: Placeholder,\r
  obj: O\r
): {\r
  <K extends keyof O>(\r
    key: K\r
  ): O[K] extends Array<infer T> ? Array<Omit<O, K> & Record<K, T>> : [O]\r
}\r
declare function unwind<K extends keyof O, O>(\r
  key: K,\r
  obj: O\r
): O[K] extends Array<infer T> ? Array<Omit<O, K> & Record<K, T>> : [O]\r
declare function unwind<K extends PropertyKey>(\r
  key: K\r
): {\r
  <O extends Record<K, any>>(\r
    obj: O\r
  ): O[K] extends Array<infer T> ? Array<Omit<O, K> & Record<K, T>> : [O]\r
}\r
\r
/**\r
 * Returns a new copy of the array with the element at the provided index\r
 * replaced with the given value.\r
 *\r
 * See also {@link adjust}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.update(1, '_', ['a', 'b', 'c']);      //=> ['a', '_', 'c']\r
 * R.update(-1, '_', ['a', 'b', 'c']);     //=> ['a', 'b', '_']\r
 * \`\`\`\r
 */\r
declare function update<T>(index: number, value: T): (list: readonly T[]) => T[]\r
declare function update<T>(index: number, value: T, list: readonly T[]): T[]\r
\r
/**\r
 * Accepts a function \`fn\` and a list of transformer functions and returns a\r
 * new curried function. When the new function is invoked, it calls the\r
 * function \`fn\` with parameters consisting of the result of calling each\r
 * supplied handler on successive arguments to the new function.\r
 *\r
 * If more arguments are passed to the returned function than transformer\r
 * functions, those arguments are passed directly to \`fn\` as additional\r
 * parameters. If you expect additional arguments that don't need to be\r
 * transformed, although you can ignore them, it's best to pass an identity\r
 * function so that the new function reports the correct arity.\r
 *\r
 * See also {@link converge}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.useWith(Math.pow, [R.identity, R.identity])(3, 4); //=> 81\r
 * R.useWith(Math.pow, [R.identity, R.identity])(3)(4); //=> 81\r
 * R.useWith(Math.pow, [R.dec, R.inc])(3, 4); //=> 32\r
 * R.useWith(Math.pow, [R.dec, R.inc])(3)(4); //=> 32\r
 * \`\`\`\r
 */\r
declare function useWith<\r
  TArg1,\r
  TR1,\r
  TArg2,\r
  TR2,\r
  TArg3,\r
  TR3,\r
  TArg4,\r
  TR4,\r
  TArg5,\r
  TR5,\r
  TArg6,\r
  TR6,\r
  TArg7,\r
  TR7,\r
  TResult,\r
  RestFunctions extends Array<(...args: any[]) => any>,\r
  TArgs extends [\r
    TArg1,\r
    TArg2,\r
    TArg3,\r
    TArg4,\r
    TArg5,\r
    TArg6,\r
    TArg7,\r
    ...InputTypesOfFns<RestFunctions>\r
  ]\r
>(\r
  fn: (\r
    ...args: [\r
      TR1,\r
      TR2,\r
      TR3,\r
      TR4,\r
      TR5,\r
      TR6,\r
      TR7,\r
      ...ReturnTypesOfFns<RestFunctions>\r
    ]\r
  ) => TResult,\r
  transformers: [\r
    (arg: TArg1) => TR1,\r
    (arg: TArg2) => TR2,\r
    (arg: TArg3) => TR3,\r
    (arg: TArg4) => TR4,\r
    (arg: TArg5) => TR5,\r
    (arg: TArg6) => TR6,\r
    (arg: TArg7) => TR7,\r
    ...RestFunctions\r
  ]\r
): (...args: TArgs) => TResult\r
declare function useWith<\r
  TArg1,\r
  TR1,\r
  TArg2,\r
  TR2,\r
  TArg3,\r
  TR3,\r
  TArg4,\r
  TR4,\r
  TArg5,\r
  TR5,\r
  TArg6,\r
  TR6,\r
  TArg7,\r
  TR7,\r
  TResult\r
>(\r
  fn: (...args: [TR1, TR2, TR3, TR4, TR5, TR6, TR7] & { length: 7 }) => TResult,\r
  transformers: [\r
    (arg: TArg1) => TR1,\r
    (arg: TArg2) => TR2,\r
    (arg: TArg3) => TR3,\r
    (arg: TArg4) => TR4,\r
    (arg: TArg5) => TR5,\r
    (arg: TArg6) => TR6,\r
    (arg: TArg7) => TR7\r
  ]\r
): (...args: [TArg1, TArg2, TArg3, TArg4, TArg5, TArg7]) => TResult\r
declare function useWith<\r
  TArg1,\r
  TR1,\r
  TArg2,\r
  TR2,\r
  TArg3,\r
  TR3,\r
  TArg4,\r
  TR4,\r
  TArg5,\r
  TR5,\r
  TArg6,\r
  TR6,\r
  TResult\r
>(\r
  fn: (...args: [TR1, TR2, TR3, TR4, TR5, TR6] & { length: 6 }) => TResult,\r
  transformers: [\r
    (arg: TArg1) => TR1,\r
    (arg: TArg2) => TR2,\r
    (arg: TArg3) => TR3,\r
    (arg: TArg4) => TR4,\r
    (arg: TArg5) => TR5,\r
    (arg: TArg6) => TR6\r
  ]\r
): (...args: [TArg1, TArg2, TArg3, TArg4, TArg5, TArg6]) => TResult\r
declare function useWith<\r
  TArg1,\r
  TR1,\r
  TArg2,\r
  TR2,\r
  TArg3,\r
  TR3,\r
  TArg4,\r
  TR4,\r
  TArg5,\r
  TR5,\r
  TResult\r
>(\r
  fn: (...args: [TR1, TR2, TR3, TR4, TR5] & { length: 5 }) => TResult,\r
  transformers: [\r
    (arg: TArg1) => TR1,\r
    (arg: TArg2) => TR2,\r
    (arg: TArg3) => TR3,\r
    (arg: TArg4) => TR4,\r
    (arg: TArg5) => TR5\r
  ]\r
): (...args: [TArg1, TArg2, TArg3, TArg4, TArg5]) => TResult\r
declare function useWith<\r
  TArg1,\r
  TR1,\r
  TArg2,\r
  TR2,\r
  TArg3,\r
  TR3,\r
  TArg4,\r
  TR4,\r
  TResult\r
>(\r
  fn: (...args: [TR1, TR2, TR3, TR4] & { length: 4 }) => TResult,\r
  transformers: [\r
    (arg: TArg1) => TR1,\r
    (arg: TArg2) => TR2,\r
    (arg: TArg3) => TR3,\r
    (arg: TArg4) => TR4\r
  ]\r
): (...args: [TArg1, TArg2, TArg3, TArg4]) => TResult\r
declare function useWith<TArg1, TR1, TArg2, TR2, TArg3, TR3, TResult>(\r
  fn: (...args: [TR1, TR2, TR3] & { length: 3 }) => TResult,\r
  transformers: [(arg: TArg1) => TR1, (arg: TArg2) => TR2, (arg: TArg3) => TR3]\r
): (...args: [TArg1, TArg2, TArg3]) => TResult\r
declare function useWith<TArg1, TR1, TArg2, TR2, TResult>(\r
  fn: (...args: [TR1, TR2] & { length: 2 }) => TResult,\r
  transformers: [(arg: TArg1) => TR1, (arg: TArg2) => TR2]\r
): (...args: [TArg1, TArg2]) => TResult\r
declare function useWith<TArg1, TR1, TResult>(\r
  fn: (...args: [TR1]) => TResult,\r
  transformers: [(arg: TArg1) => TR1]\r
): (...args: [TArg1]) => TResult\r
\r
/**\r
 * Returns a list of all the enumerable own properties of the supplied object.\r
 * Note that the order of the output array is not guaranteed across different\r
 * JS platforms.\r
 *\r
 * See also {@link valuesIn}, {@link keys}, {@link toPairs}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.values({a: 1, b: 2, c: 3}); //=> [1, 2, 3]\r
 * \`\`\`\r
 */\r
declare function values<T extends object>(obj: T): ValueOfUnion<T>[]\r
\r
/**\r
 * Returns a list of all the properties, including prototype properties, of the\r
 * supplied object.\r
 * Note that the order of the output array is not guaranteed to be consistent\r
 * across different JS platforms.\r
 *\r
 * See also {@link values}, {@link keysIn}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const F = function() { this.x = 'X'; };\r
 * F.prototype.y = 'Y';\r
 * const f = new F();\r
 * R.valuesIn(f); //=> ['X', 'Y']\r
 * \`\`\`\r
 */\r
declare function valuesIn<T>(obj: any): T[]\r
\r
/**\r
 * Returns a "view" of the given data structure, determined by the given lens.\r
 * The lens's focus determines which portion of the data structure is visible.\r
 *\r
 * See also {@link set}, {@link over}, {@link lens}, {@link lensIndex}, {@link lensProp}, {@link lensPath}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const xLens = R.lensProp('x');\r
 *\r
 * R.view(xLens, {x: 1, y: 2});  //=> 1\r
 * R.view(xLens, {x: 4, y: 2});  //=> 4\r
 * \`\`\`\r
 */\r
declare function view<S, A>(lens: Lens<S, A>): (obj: S) => A\r
declare function view<S, A>(lens: Lens<S, A>, obj: S): A\r
\r
/**\r
 * Tests the final argument by passing it to the given predicate function. If\r
 * the predicate is satisfied, the function will return the result of calling\r
 * the \`whenTrueFn\` function with the same argument. If the predicate is not\r
 * satisfied, the argument is returned as is.\r
 *\r
 * See also {@link ifElse}, {@link unless}, {@link cond}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * // truncate :: String -> String\r
 * const truncate = R.when(\r
 *   R.propSatisfies(R.gt(R.__, 10), 'length'),\r
 *   R.pipe(R.take(10), R.append('…'), R.join(''))\r
 * );\r
 * truncate('12345');         //=> '12345'\r
 * truncate('0123456789ABC'); //=> '0123456789…'\r
 * \`\`\`\r
 */\r
declare function when<T, U extends T, V>(\r
  pred: (a: T) => a is U,\r
  whenTrueFn: (a: U) => V\r
): (a: T) => T | V\r
declare function when<T, U>(\r
  pred: (a: T) => boolean,\r
  whenTrueFn: (a: T) => U\r
): (a: T) => T | U\r
declare function when<T, U extends T, V>(\r
  pred: (a: T) => a is U,\r
  whenTrueFn: (a: U) => V,\r
  a: T\r
): T | V\r
declare function when<T, U>(\r
  pred: (a: T) => boolean,\r
  whenTrueFn: (a: T) => U,\r
  a: T\r
): T | U\r
\r
/**\r
 * Takes a spec object and a test object; returns true if the test satisfies\r
 * the spec. Each of the spec's own properties must be a predicate function.\r
 * Each predicate is applied to the value of the corresponding property of the\r
 * test object. \`where\` returns true if all the predicates return true, false\r
 * otherwise.\r
 *\r
 * \`where\` is well suited to declaratively expressing constraints for other\r
 * functions such as [\`filter\`](#filter) and [\`find\`](#find).\r
 *\r
 * See also {@link propSatisfies}, {@link whereEq}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * // pred :: Object -> Boolean\r
 * const pred = R.where({\r
 *   a: R.equals('foo'),\r
 *   b: R.complement(R.equals('bar')),\r
 *   x: R.gt(R.__, 10),\r
 *   y: R.lt(R.__, 20)\r
 * });\r
 *\r
 * pred({a: 'foo', b: 'xxx', x: 11, y: 19}); //=> true\r
 * pred({a: 'xxx', b: 'xxx', x: 11, y: 19}); //=> false\r
 * pred({a: 'foo', b: 'bar', x: 11, y: 19}); //=> false\r
 * pred({a: 'foo', b: 'xxx', x: 10, y: 19}); //=> false\r
 * pred({a: 'foo', b: 'xxx', x: 11, y: 20}); //=> false\r
 * \`\`\`\r
 */\r
declare function where<T>(spec: T): <U>(testObj: U) => boolean\r
declare function where<T, U>(spec: T, testObj: U): boolean\r
\r
/**\r
 * Takes a spec object and a test object; each of the spec's own properties must be a predicate function.\r
 * Each predicate is applied to the value of the corresponding property of the\r
 * test object. \`whereAny\` returns true if at least one of the predicates return true,\r
 * false otherwise.\r
 *\r
 * \`whereAny\` is well suited to declaratively expressing constraints for other\r
 * functions such as [\`filter\`](#filter) and [\`find\`](#find).\r
 *\r
 * See also {@link propSatisfies}, {@link where}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * // pred :: Object -> Boolean\r
 * const pred = R.whereAny({\r
 *   a: R.equals('foo'),\r
 *   b: R.complement(R.equals('xxx')),\r
 *   x: R.gt(R.__, 10),\r
 *   y: R.lt(R.__, 20)\r
 * });\r
 *\r
 * pred({a: 'foo', b: 'xxx', x: 8, y: 34}); //=> true\r
 * pred({a: 'xxx', b: 'xxx', x: 9, y: 21}); //=> false\r
 * pred({a: 'bar', b: 'xxx', x: 10, y: 20}); //=> false\r
 * pred({a: 'foo', b: 'bar', x: 10, y: 20}); //=> true\r
 * pred({a: 'foo', b: 'xxx', x: 11, y: 20}); //=> true\r
 * \`\`\`\r
 */\r
declare function whereAny<\r
  Spec extends Record<PropertyKey, (value: any) => boolean>\r
>(spec: Spec): <U extends Record<keyof Spec, any>>(testObj: U) => boolean\r
declare function whereAny<U>(\r
  __: Placeholder,\r
  testObj: U\r
): <Spec extends Partial<Record<keyof U, (value: any) => boolean>>>(\r
  spec: Spec\r
) => boolean\r
declare function whereAny<\r
  Spec extends Partial<Record<keyof U, (value: any) => boolean>>,\r
  U\r
>(spec: Spec, testObj: U): boolean\r
\r
/**\r
 * Takes a spec object and a test object; returns true if the test satisfies\r
 * the spec, false otherwise. An object satisfies the spec if, for each of the\r
 * spec's own properties, accessing that property of the object gives the same\r
 * value (in [\`R.equals\`](#equals) terms) as accessing that property of the\r
 * spec.\r
 *\r
 * \`whereEq\` is a specialization of [\`where\`](#where).\r
 *\r
 * See also {@link propEq}, {@link where}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * // pred :: Object -> Boolean\r
 * const pred = R.whereEq({a: 1, b: 2});\r
 *\r
 * pred({a: 1});              //=> false\r
 * pred({a: 1, b: 2});        //=> true\r
 * pred({a: 1, b: 2, c: 3});  //=> true\r
 * pred({a: 1, b: 1});        //=> false\r
 * \`\`\`\r
 */\r
declare function whereEq<T>(spec: T): <U>(obj: U) => boolean\r
declare function whereEq<T, U>(spec: T, obj: U): boolean\r
\r
/**\r
 * Returns a new list without values in the first argument.\r
 * [\`R.equals\`](#equals) is used to determine equality.\r
 *\r
 * Acts as a transducer if a transformer is given in list position.\r
 *\r
 * See also {@link transduce}, {@link difference}, {@link remove}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.without([1, 2], [1, 2, 1, 3, 4]); //=> [3, 4]\r
 * \`\`\`\r
 */\r
declare function without<T>(\r
  list1: readonly T[] | readonly unknown[]\r
): (list2: readonly T[]) => T[]\r
declare function without<T>(list1: readonly unknown[], list2: readonly T[]): T[]\r
\r
/**\r
 * Exclusive disjunction logical operation.\r
 * Returns \`true\` if one of the arguments is truthy and the other is falsy.\r
 * Otherwise, it returns \`false\`.\r
 *\r
 * See also {@link or}, {@link and}\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.xor(true, true); //=> false\r
 * R.xor(true, false); //=> true\r
 * R.xor(false, true); //=> true\r
 * R.xor(false, false); //=> false\r
 * \`\`\`\r
 */\r
declare function xor(a: any, b: any): boolean\r
declare function xor(a: any): (b: any) => boolean\r
\r
/**\r
 * Creates a new list out of the two supplied by creating each possible pair\r
 * from the lists.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.xprod([1, 2], ['a', 'b']); //=> [[1, 'a'], [1, 'b'], [2, 'a'], [2, 'b']]\r
 * \`\`\`\r
 */\r
declare function xprod<K>(\r
  as: readonly K[]\r
): <V>(bs: readonly V[]) => Array<KeyValuePair<K, V>>\r
declare function xprod<K, V>(\r
  as: readonly K[],\r
  bs: readonly V[]\r
): Array<KeyValuePair<K, V>>\r
\r
/**\r
 * Creates a new list out of the two supplied by pairing up equally-positioned\r
 * items from both lists. The returned list is truncated to the length of the\r
 * shorter of the two input lists.\r
 * Note: \`zip\` is equivalent to \`zipWith(function(a, b) { return [a, b] })\`.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.zip([1, 2, 3], ['a', 'b', 'c']); //=> [[1, 'a'], [2, 'b'], [3, 'c']]\r
 * \`\`\`\r
 */\r
declare function zip<K>(\r
  list1: readonly K[]\r
): <V>(list2: readonly V[]) => Array<KeyValuePair<K, V>>\r
declare function zip<K, V>(\r
  list1: readonly K[],\r
  list2: readonly V[]\r
): Array<KeyValuePair<K, V>>\r
\r
/**\r
 * Creates a new object out of a list of keys and a list of values.\r
 * Key/value pairing is truncated to the length of the shorter of the two lists.\r
 * Note: \`zipObj\` is equivalent to \`pipe(zip, fromPairs)\`.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * R.zipObj(['a', 'b', 'c'], [1, 2, 3]); //=> {a: 1, b: 2, c: 3}\r
 * \`\`\`\r
 */\r
declare function zipObj<K extends PropertyKey>(\r
  keys: readonly K[]\r
): <T>(values: readonly T[]) => { [P in K]: T }\r
declare function zipObj<T, K extends PropertyKey>(\r
  keys: readonly K[],\r
  values: readonly T[]\r
): { [P in K]: T }\r
\r
/**\r
 * Creates a new list out of the two supplied by applying the function to each\r
 * equally-positioned pair in the lists. The returned list is truncated to the\r
 * length of the shorter of the two input lists.\r
 *\r
 * @example\r
 * \`\`\`typescript\r
 * const f = (x, y) => {\r
 *   // ...\r
 * };\r
 * R.zipWith(f, [1, 2, 3], ['a', 'b', 'c']);\r
 * //=> [f(1, 'a'), f(2, 'b'), f(3, 'c')]\r
 * \`\`\`\r
 */\r
declare function zipWith<T, U, TResult>(\r
  fn: (x: T, y: U) => TResult\r
): (list1: readonly T[], list2: readonly U[]) => TResult[]\r
declare function zipWith<T, U, TResult>(\r
  fn: (x: T, y: U) => TResult,\r
  list1: readonly T[]\r
): (list2: readonly U[]) => TResult[]\r
declare function zipWith<T, U, TResult>(\r
  fn: (x: T, y: U) => TResult,\r
  list1: readonly T[],\r
  list2: readonly U[]\r
): TResult[]\r
`,xte=`
  ${[BGe,VGe,WGe,HGe].join(`

`)}
`,UGe="file:///node_modules/@types/ramda-extras/index.d.ts",AF=Uk.typescript.typescriptDefaults;AF.addExtraLib(xte,UGe);AF.setCompilerOptions({...AF.getCompilerOptions(),noLib:!0,module:Uk.typescript.ModuleKind.CommonJS,moduleResolution:Uk.typescript.ModuleResolutionKind.NodeJs});lw.createModel(xte,"typescript",kQ.parse("file:///main.tsx"));lw.defineTheme("dracula",FGe);const jGe=new URLSearchParams(document.location.search).get("code")??void 0,zGe={theme:"dracula",automaticLayout:!0,showFoldingControls:"mouseover",minimap:{enabled:!1},lineNumbers:"on",renderLineHighlight:"none",language:"typescript",fontFamily:"Fira Code",fontLigatures:!0,fontSize:14,autoIndent:"full",formatOnPaste:!0,value:jGe,scrollbar:{useShadows:!1},tabSize:2,insertSpaces:!0};var $Ge=0;function Mr(i,e,t,n,r,s){var o,a,l={};for(a in e)a=="ref"?o=e[a]:l[a]=e[a];var c={type:i,props:l,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--$Ge,__i:-1,__source:r,__self:s};if(typeof i=="function"&&(o=i.defaultProps))for(a in o)l[a]===void 0&&(l[a]=o[a]);return yt.vnode&&yt.vnode(c),c}const Sp=aC(null),Tte=$r(w4),KGe=wC(Tte,$r(z4));wC([...Tte,...KGe],$r(zF));const qGe=i=>{let e=-1;return()=>{clearTimeout(e),e=setTimeout(i,500)}},GGe=()=>{const i=Fj(null);return Oj(()=>{i.current!=null&&(Sp.value=lw.create(i.current,zGe),Sp.value.onDidChangeModelContent(qGe(Lte)))},[i]),Mr("div",{class:"box editor",ref:i})};const ZGe={theme:"dracula",automaticLayout:!0,minimap:{enabled:!1},lineNumbers:"off",language:"javascript",renderLineHighlight:"none",fontFamily:"Fira Code",fontLigatures:!0,readOnly:!0,fontSize:14,scrollbar:{useShadows:!1}},ag=aC(null),XGe=()=>{const i=Fj(null);return Oj(()=>{i.current!=null&&(ag.value=lw.create(i.current,ZGe))},[i]),Mr("div",{class:"box output",ref:i})},O9=$r(w4),kte=wC(O9,$r(z4)),YGe=wC([...O9,...kte],$r(zF)),Lte=()=>{var i,e;if(ag.value&&Sp.value)try{const t=pSe(Sp.value.getValue(),{transforms:["typescript"]});Object.defineProperties(window,{R:{value:w4,writable:!1},RA:{value:z4,writable:!1},P:{value:zF,writable:!1}});const n=`
        const {${O9.join(",")}} = R;
        const {${kte.join(",")}} = RA;
        const {${YGe.join(",")}} = P;
        ${t.code}
      `,r=window.eval(n);r!==void 0?ag.value.setValue(JSON.stringify(r,null,2).replace('"use strict"',"")):ag.value.setValue("")}catch(t){t instanceof Error?(i=ag.value.getModel())==null||i.setValue(`${t.message}
${t.stack??""}`):(e=ag.value.getModel())==null||e.setValue(`${t}`),console.warn(t)}};function Dte(i,e){for(var t in e)i[t]=e[t];return i}function hj(i,e){for(var t in i)if(t!=="__source"&&!(t in e))return!0;for(var n in e)if(n!=="__source"&&i[n]!==e[n])return!0;return!1}function fj(i){this.props=i}(fj.prototype=new Nc).isPureReactComponent=!0,fj.prototype.shouldComponentUpdate=function(i,e){return hj(this.props,i)||hj(this.state,e)};var gj=yt.__b;yt.__b=function(i){i.type&&i.type.__f&&i.ref&&(i.props.ref=i.ref,i.ref=null),gj&&gj(i)};var QGe=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function JGe(i){function e(t){var n=Dte({},t);return delete n.ref,i(n,t.ref||null)}return e.$$typeof=QGe,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(i.displayName||i.name)+")",e}var eZe=yt.__e;yt.__e=function(i,e,t,n){if(i.then){for(var r,s=e;s=s.__;)if((r=s.__c)&&r.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),r.__c(i,e)}eZe(i,e,t,n)};var pj=yt.unmount;function Ite(i,e,t){return i&&(i.__c&&i.__c.__H&&(i.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),i.__c.__H=null),(i=Dte({},i)).__c!=null&&(i.__c.__P===t&&(i.__c.__P=e),i.__c=null),i.__k=i.__k&&i.__k.map(function(n){return Ite(n,e,t)})),i}function Rte(i,e,t){return i&&t&&(i.__v=null,i.__k=i.__k&&i.__k.map(function(n){return Rte(n,e,t)}),i.__c&&i.__c.__P===e&&(i.__e&&t.appendChild(i.__e),i.__c.__e=!0,i.__c.__P=t)),i}function ON(){this.__u=0,this.t=null,this.__b=null}function Ete(i){var e=i.__.__c;return e&&e.__a&&e.__a(i)}function XS(){this.u=null,this.o=null}yt.unmount=function(i){var e=i.__c;e&&e.__R&&e.__R(),e&&i.__h===!0&&(i.type=null),pj&&pj(i)},(ON.prototype=new Nc).__c=function(i,e){var t=e.__c,n=this;n.t==null&&(n.t=[]),n.t.push(t);var r=Ete(n.__v),s=!1,o=function(){s||(s=!0,t.__R=null,r?r(a):a())};t.__R=o;var a=function(){if(!--n.__u){if(n.state.__a){var c=n.state.__a;n.__v.__k[0]=Rte(c,c.__c.__P,c.__c.__O)}var d;for(n.setState({__a:n.__b=null});d=n.t.pop();)d.forceUpdate()}},l=e.__h===!0;n.__u++||l||n.setState({__a:n.__b=n.__v.__k[0]}),i.then(o,o)},ON.prototype.componentWillUnmount=function(){this.t=[]},ON.prototype.render=function(i,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=Ite(this.__b,t,n.__O=n.__P)}this.__b=null}var r=e.__a&&u0(Pg,null,i.fallback);return r&&(r.__h=null),[u0(Pg,null,e.__a?null:i.children),r]};var mj=function(i,e,t){if(++t[1]===t[0]&&i.o.delete(e),i.props.revealOrder&&(i.props.revealOrder[0]!=="t"||!i.o.size))for(t=i.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;i.u=t=t[2]}};(XS.prototype=new Nc).__a=function(i){var e=this,t=Ete(e.__v),n=e.o.get(i);return n[0]++,function(r){var s=function(){e.props.revealOrder?(n.push(r),mj(e,i,n)):r()};t?t(s):s()}},XS.prototype.render=function(i){this.u=null,this.o=new Map;var e=Gx(i.children);i.revealOrder&&i.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.o.set(e[t],this.u=[1,0,this.u]);return i.children},XS.prototype.componentDidUpdate=XS.prototype.componentDidMount=function(){var i=this;this.o.forEach(function(e,t){mj(i,t,e)})};var tZe=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,nZe=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,iZe=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,rZe=/[A-Z0-9]/g,sZe=typeof document<"u",oZe=function(i){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(i)};Nc.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(i){Object.defineProperty(Nc.prototype,i,{configurable:!0,get:function(){return this["UNSAFE_"+i]},set:function(e){Object.defineProperty(this,i,{configurable:!0,writable:!0,value:e})}})});var _j=yt.event;function aZe(){}function lZe(){return this.cancelBubble}function cZe(){return this.defaultPrevented}yt.event=function(i){return _j&&(i=_j(i)),i.persist=aZe,i.isPropagationStopped=lZe,i.isDefaultPrevented=cZe,i.nativeEvent=i};var dZe={enumerable:!1,configurable:!0,get:function(){return this.class}},bj=yt.vnode;yt.vnode=function(i){typeof i.type=="string"&&function(e){var t=e.props,n=e.type,r={};for(var s in t){var o=t[s];if(!(s==="value"&&"defaultValue"in t&&o==null||sZe&&s==="children"&&n==="noscript"||s==="class"||s==="className")){var a=s.toLowerCase();s==="defaultValue"&&"value"in t&&t.value==null?s="value":s==="download"&&o===!0?o="":a==="ondoubleclick"?s="ondblclick":a!=="onchange"||n!=="input"&&n!=="textarea"||oZe(t.type)?a==="onfocus"?s="onfocusin":a==="onblur"?s="onfocusout":iZe.test(s)?s=a:n.indexOf("-")===-1&&nZe.test(s)?s=s.replace(rZe,"-$&").toLowerCase():o===null&&(o=void 0):a=s="oninput",a==="oninput"&&r[s=a]&&(s="oninputCapture"),r[s]=o}}n=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=Gx(t.children).forEach(function(l){l.props.selected=r.value.indexOf(l.props.value)!=-1})),n=="select"&&r.defaultValue!=null&&(r.value=Gx(t.children).forEach(function(l){l.props.selected=r.multiple?r.defaultValue.indexOf(l.props.value)!=-1:r.defaultValue==l.props.value})),t.class&&!t.className?(r.class=t.class,Object.defineProperty(r,"className",dZe)):(t.className&&!t.class||t.class&&t.className)&&(r.class=r.className=t.className),e.props=r}(i),i.$$typeof=tZe,bj&&bj(i)};var vj=yt.__r;yt.__r=function(i){vj&&vj(i),i.__c};var yj=yt.diffed;yt.diffed=function(i){yj&&yj(i);var e=i.props,t=i.__e;t!=null&&i.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value)};var Nte={exports:{}},uZe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",hZe=uZe,fZe=hZe;function Ate(){}function Pte(){}Pte.resetWarningCache=Ate;var gZe=function(){function i(n,r,s,o,a,l){if(l!==fZe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}i.isRequired=i;function e(){return i}var t={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:e,element:i,elementType:i,instanceOf:e,node:i,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Pte,resetWarningCache:Ate};return t.PropTypes=t,t};Nte.exports=gZe();var pZe=Nte.exports;const Ff=f0e(pZe);var mZe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},_Ze=Object.defineProperty,bZe=Object.defineProperties,vZe=Object.getOwnPropertyDescriptors,bL=Object.getOwnPropertySymbols,Mte=Object.prototype.hasOwnProperty,Ote=Object.prototype.propertyIsEnumerable,Cj=(i,e,t)=>e in i?_Ze(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,wj=(i,e)=>{for(var t in e||(e={}))Mte.call(e,t)&&Cj(i,t,e[t]);if(bL)for(var t of bL(e))Ote.call(e,t)&&Cj(i,t,e[t]);return i},yZe=(i,e)=>bZe(i,vZe(e)),CZe=(i,e)=>{var t={};for(var n in i)Mte.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&bL)for(var n of bL(i))e.indexOf(n)<0&&Ote.call(i,n)&&(t[n]=i[n]);return t},F9=(i,e,t)=>{const n=JGe((r,s)=>{var o=r,{color:a="currentColor",size:l=24,stroke:c=2,children:d}=o,u=CZe(o,["color","size","stroke","children"]);return u0("svg",wj(yZe(wj({ref:s},mZe),{width:l,height:l,stroke:a,strokeWidth:c,className:`tabler-icon tabler-icon-${i}`}),u),[...t.map(([h,f])=>u0(h,f)),...d||[]])});return n.propTypes={color:Ff.string,size:Ff.oneOfType([Ff.string,Ff.number]),stroke:Ff.oneOfType([Ff.string,Ff.number])},n.displayName=`${e}`,n},wZe=F9("book-2","IconBook2",[["path",{d:"M19 4v16h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12z",key:"svg-0"}],["path",{d:"M19 16h-12a2 2 0 0 0 -2 2",key:"svg-1"}],["path",{d:"M9 8h6",key:"svg-2"}]]),SZe=F9("copy","IconCopy",[["path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2",key:"svg-1"}]]),xZe=F9("indent-increase","IconIndentIncrease",[["path",{d:"M20 6l-11 0",key:"svg-0"}],["path",{d:"M20 12l-7 0",key:"svg-1"}],["path",{d:"M20 18l-11 0",key:"svg-2"}],["path",{d:"M4 8l4 4l-4 4",key:"svg-3"}]]);const TZe=()=>window.open("https://ramdajs.com/docs/"),kZe=()=>{var e;const i=(e=Sp.value)==null?void 0:e.getValue();if(i){const t=new URL(document.location.href);t.searchParams.set("code",i),navigator.clipboard.writeText(t.toString())}},LZe=()=>{var i,e;(e=(i=Sp.value)==null?void 0:i.getAction("editor.action.formatDocument"))==null||e.run()},DZe=()=>Mr("nav",{children:[Mr("h2",{className:"title","data-title":"ramda, ramda-adjunct, purify-ts",children:"ramda, ramda-adjunct, purify-ts"}),Mr("ul",{className:"utils",children:[Mr("li",{children:Mr("button",{onClick:TZe,children:[Mr(wZe,{stroke:1}),"Docs"]})}),Mr("li",{children:Mr("button",{onClick:kZe,children:[Mr(SZe,{stroke:1}),"Share"]})}),Mr("li",{children:Mr("button",{onClick:LZe,children:[Mr(xZe,{stroke:1}),"Format"]})})]})]}),Sj=aC(!1);wL(()=>{!Sj.value&&Sp.value&&ag.value&&(Sj.value=!0,Lte())});const IZe=()=>Mr(Pg,{children:[Mr(DZe,{}),Mr(GGe,{}),Mr(XGe,{})]});self.MonacoEnvironment={getWorker:()=>new nne};const RZe=document.getElementById("app");Ea.fromNullable(RZe).map(i=>tne(Mr(IZe,{}),i));export{cw as m,jQ as t};
